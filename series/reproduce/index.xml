<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>è½¬è½½ - ç³»åˆ— - xiaobinqt åšå®¢ - æŠ€æœ¯æ”¹å˜ç”Ÿæ´»</title>
        <link>https://www.xiaobinqt.cn/series/reproduce/</link>
        <description>è½¬è½½ - ç³»åˆ— - xiaobinqt åšå®¢ - æŠ€æœ¯æ”¹å˜ç”Ÿæ´»</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>xiaobinqt@163.com (xiaobinqt)</managingEditor>
            <webMaster>xiaobinqt@163.com (xiaobinqt)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><atom:link href="https://www.xiaobinqt.cn/series/reproduce/" rel="self" type="application/rss+xml" /><item>
    <title>Go sync.Map è§£è¯»</title>
    <link>https://www.xiaobinqt.cn/go-sync-map/</link>
    <pubDate>Wed, 14 Sep 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/go-sync-map/</guid>
    <description><![CDATA[<!-- authorï¼š xiaobinqt -->
<!-- emailï¼š xiaobinqt@163.com -->
<!-- https://xiaobinqt.github.io -->
<!-- https://www.xiaobinqt.cn -->
<h2 id="èƒŒæ™¯" class="headerLink">
    <a href="#%e8%83%8c%e6%99%af" class="header-mark"></a>èƒŒæ™¯</h2><p>é¡¹ç›®ä¸­é‡åˆ°äº†éœ€è¦ä½¿ç”¨é«˜å¹¶å‘çš„ map çš„åœºæ™¯ï¼Œä¼—æ‰€å‘¨çŸ¥ Go å®˜æ–¹çš„åŸç”Ÿ map æ˜¯ä¸æ”¯æŒå¹¶å‘è¯»å†™çš„ï¼Œç›´æ¥å¹¶å‘çš„è¯»å†™å¾ˆå®¹æ˜“è§¦å‘ panicã€‚</p>
<p>è§£å†³çš„åŠæ³•æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>è‡ªå·±é…ä¸€æŠŠé” <code>sync.Mutex</code> æˆ–è€…æ›´åŠ è€ƒç©¶ä¸€ç‚¹é…ä¸€æŠŠè¯»å†™é” <code>sync.RWMutex</code>ã€‚è¿™ç§æ–¹æ¡ˆç®€çº¦ç›´æ¥ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜æ˜¾ï¼Œå°±æ˜¯æ€§èƒ½ä¸ä¼šå¤ªé«˜ã€‚</li>
<li>ä½¿ç”¨ Go è¯­è¨€åœ¨ 2017 å¹´å‘å¸ƒçš„ Go 1.9 ä¸­æ­£å¼åŠ å…¥äº†å¹¶å‘å®‰å…¨çš„å­—å…¸ç±»å‹<code>sync.Map</code>ã€‚</li>
</ul>
<p>å¾ˆæ˜¾ç„¶ï¼Œæ–¹æ¡ˆ 2 æ˜¯ä¼˜é›…ä¸”å®ç”¨çš„ã€‚ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆå®˜æ–¹çš„ <code>sync.Map</code> èƒ½å¤Ÿåœ¨ <strong><ruby>lock free<rt>æ— é”å¹¶å‘</rt></ruby></strong> çš„å‰æä¸‹ï¼Œä¿è¯è¶³å¤Ÿé«˜çš„æ€§èƒ½â“æœ¬æ–‡ç»“åˆ golang 1.14 æºç è¿›è¡Œç®€å•çš„åˆ†æã€‚</p>
<h2 id="æ ¸å¿ƒæ€æƒ³" class="headerLink">
    <a href="#%e6%a0%b8%e5%bf%83%e6%80%9d%e6%83%b3" class="header-mark"></a>æ ¸å¿ƒæ€æƒ³</h2><p>å¦‚æœè¦ä¿è¯å¹¶å‘çš„å®‰å…¨ï¼Œæœ€æœ´ç´ çš„æƒ³æ³•å°±æ˜¯ä½¿ç”¨é”ï¼Œä½†æ˜¯è¿™æ„å‘³ç€è¦æŠŠä¸€äº›å¹¶å‘çš„æ“ä½œå¼ºåˆ¶ä¸²è¡ŒåŒ–ï¼Œæ€§èƒ½è‡ªç„¶å°±ä¼šä¸‹é™ã€‚</p>
<p>äº‹å®ä¸Šï¼Œé™¤äº†ä½¿ç”¨é”ï¼Œè¿˜æœ‰ä¸€ä¸ªåŠæ³•ä¹Ÿå¯ä»¥è¾¾åˆ°ç±»ä¼¼å¹¶å‘å®‰å…¨çš„ç›®çš„ï¼Œå°±æ˜¯åŸå­æ“ä½œ <code>atomic</code>ã€‚<code>sync.Map</code> çš„è®¾è®¡éå¸¸å·§å¦™ï¼Œå……åˆ†åˆ©ç”¨äº† <code>atmoic</code> å’Œ <code>mutex</code> çš„é…åˆã€‚</p>
<ul>
<li>read map ç”±äºæ˜¯åŸå­åŒ…æ‰˜ç®¡ï¼Œä¸»è¦è´Ÿè´£é«˜æ€§èƒ½ï¼Œä½†æ˜¯æ— æ³•ä¿è¯æ‹¥æœ‰å…¨é‡çš„ keyï¼Œå› ä¸ºå¯¹äºæ–°å¢ keyï¼Œä¼šé¦–å…ˆåŠ åˆ° dirty ä¸­ï¼Œæ‰€ä»¥ read æŸç§ç¨‹åº¦ä¸Šï¼Œç±»ä¼¼äºä¸€ä¸ª key çš„å¿«ç…§ï¼Œè¿™ä¸ªå¿«ç…§åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æ˜¯å…¨é‡å¿«ç…§ã€‚</li>
<li>dirty map æ‹¥æœ‰å…¨é‡çš„ keyï¼Œå½“ <code>Store</code> æ“ä½œè¦æ–°å¢ä¸€ä¸ªä¹‹å‰ä¸å­˜åœ¨çš„ key çš„æ—¶å€™ï¼Œé¢„å…ˆæ˜¯å¢åŠ åˆ° dirty ä¸­çš„ã€‚</li>
<li>åœ¨æŸ¥æ‰¾æŒ‡å®šçš„ key çš„æ—¶å€™ï¼Œæ€»ä¼šå…ˆå»åªè¯»å­—å…¸ä¸­å¯»æ‰¾ï¼Œå¹¶ä¸éœ€è¦é”å®šäº’æ–¥é”ã€‚åªæœ‰å½“ read ä¸­æ²¡æœ‰ï¼Œä½† dirty ä¸­å¯èƒ½ä¼šæœ‰è¿™ä¸ª key çš„æ—¶å€™ï¼Œæ‰ä¼šåœ¨é”çš„ä¿æŠ¤ä¸‹å»è®¿é—® dirtyã€‚</li>
<li>åœ¨å­˜å‚¨é”®å€¼å¯¹çš„æ—¶å€™ï¼Œåªè¦ read ä¸­å·²å­˜æœ‰è¿™ä¸ª keyï¼Œå¹¶ä¸”è¯¥é”®å€¼å¯¹æœªè¢«æ ‡è®°ä¸º <code>expunged</code>ï¼Œå°±ä¼šæŠŠæ–°å€¼å­˜åˆ°é‡Œé¢å¹¶ç›´æ¥è¿”å›ï¼Œè¿™ç§æƒ…å†µä¸‹ä¹Ÿä¸éœ€è¦ç”¨åˆ°é”ã€‚</li>
<li>read å’Œ dirty ä¹‹é—´æ˜¯ä¼šäº’ç›¸è½¬æ¢çš„ï¼Œåœ¨ dirty ä¸­æŸ¥æ‰¾ key å¯¹æ¬¡æ•°è¶³å¤Ÿå¤šçš„æ—¶å€™ï¼Œ<code>sync.Map</code> ä¼šæŠŠ dirty ç›´æ¥ä½œä¸º readï¼Œå³è§¦å‘  <code>dirty=&gt;read</code> å‡çº§ï¼ŒåŒæ—¶åœ¨æŸäº›æƒ…å†µï¼Œä¹Ÿä¼šå‡ºç° <code>read=&gt;dirty</code> çš„é‡å¡‘ã€‚</li>
</ul>
<h2 id="æ•°æ®ç»“æ„" class="headerLink">
    <a href="#%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84" class="header-mark"></a>æ•°æ®ç»“æ„</h2><p>å°½é‡ä½¿ç”¨åŸå­æ“ä½œï¼Œæœ€å¤§ç¨‹åº¦ä¸Šå‡å°‘äº†é”çš„ä½¿ç”¨ï¼Œä»è€Œæ¥è¿‘äº† lock free çš„æ•ˆæœã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221205/3c105d85e5c24fecb51e45bc3a184cfe.png" title="æ•°æ®ç»“æ„" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221205/3c105d85e5c24fecb51e45bc3a184cfe.png" data-sub-html="<h2>æ•°æ®ç»“æ„</h2><p>æ•°æ®ç»“æ„</p>">
        
    </a><figcaption class="image-caption">æ•°æ®ç»“æ„</figcaption>
    </figure></p>
<p>sync.Map ç±»å‹çš„åº•å±‚æ•°æ®ç»“æ„å¦‚ä¸‹ğŸ‘‡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">type Map struct {
</span></span><span class="line"><span class="cl"> mu Mutex
</span></span><span class="line"><span class="cl"> read atomic.Value // readOnly
</span></span><span class="line"><span class="cl"> dirty map[interface{}]*entry
</span></span><span class="line"><span class="cl"> misses int
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// Map.read å±æ€§å®é™…å­˜å‚¨çš„æ˜¯ readOnlyã€‚
</span></span><span class="line"><span class="cl">type readOnly struct {
</span></span><span class="line"><span class="cl"> m       map[interface{}]*entry
</span></span><span class="line"><span class="cl"> amended bool
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>muï¼šäº’æ–¥é”ï¼Œç”¨äºä¿æŠ¤ read å’Œ dirtyã€‚</li>
<li>readï¼šåªè¯»æ•°æ®ï¼Œæ”¯æŒå¹¶å‘è¯»å–ï¼ˆ<code>atomic.Value</code> ç±»å‹ï¼‰ã€‚å¦‚æœæ¶‰åŠåˆ°æ›´æ–°æ“ä½œï¼Œåˆ™åªéœ€è¦åŠ é”æ¥ä¿è¯æ•°æ®å®‰å…¨ã€‚</li>
<li>read å®é™…å­˜å‚¨çš„æ˜¯ readOnly ç»“æ„ä½“ï¼Œå†…éƒ¨ä¹Ÿæ˜¯ä¸€ä¸ªåŸç”Ÿ mapï¼Œamended å±æ€§ç”¨äºæ ‡è®° read å’Œ dirty çš„æ•°æ®æ˜¯å¦ä¸€è‡´ã€‚</li>
<li>dirtyï¼šè¯»å†™æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªåŸç”Ÿ mapï¼Œä¹Ÿå°±æ˜¯éçº¿ç¨‹å®‰å…¨ã€‚æ“ä½œ dirty éœ€è¦åŠ é”æ¥ä¿è¯æ•°æ®å®‰å…¨ã€‚</li>
<li>missesï¼šç»Ÿè®¡æœ‰å¤šå°‘æ¬¡è¯»å– read æ²¡æœ‰å‘½ä¸­ã€‚æ¯æ¬¡ read ä¸­è¯»å–å¤±è´¥åï¼Œmisses çš„è®¡æ•°å€¼éƒ½ä¼šåŠ  1ã€‚</li>
</ul>
<p>åœ¨ read å’Œ dirty ä¸­ï¼Œéƒ½æœ‰æ¶‰åŠåˆ°çš„ç»“æ„ä½“ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">type entry struct {
</span></span><span class="line"><span class="cl"> p unsafe.Pointer // *interface{}
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å…¶åŒ…å«ä¸€ä¸ªæŒ‡é’ˆ p, ç”¨äºæŒ‡å‘ç”¨æˆ·å­˜å‚¨çš„å…ƒç´ ï¼ˆkeyï¼‰æ‰€æŒ‡å‘çš„ value å€¼ã€‚</p>
<h2 id="storeå†™å…¥è¿‡ç¨‹" class="headerLink">
    <a href="#store%e5%86%99%e5%85%a5%e8%bf%87%e7%a8%8b" class="header-mark"></a>Storeå†™å…¥è¿‡ç¨‹</h2><p>å…ˆæ¥çœ‹ expunged</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">var expunged = unsafe.Pointer(new(interface{}))
</span></span></code></pre></td></tr></table>
</div>
</div><p>expunged æ˜¯ä¸€ä¸ªæŒ‡å‘ä»»æ„ç±»å‹çš„æŒ‡é’ˆï¼Œç”¨æ¥æ ‡è®°ä» dirty map ä¸­<strong>åˆ é™¤</strong>çš„ entryã€‚</p>
<p>sync.Map ç±»å‹çš„ Store æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯æ–°å¢æˆ–æ›´æ–°ä¸€ä¸ªå…ƒç´ ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (m *Map) Store(key, value interface{}) {
</span></span><span class="line"><span class="cl"> read, _ := m.read.Load().(readOnly)
</span></span><span class="line"><span class="cl"> if e, ok := read.m[key]; ok &amp;&amp; e.tryStore(&amp;value) {
</span></span><span class="line"><span class="cl">  return
</span></span><span class="line"><span class="cl"> }
</span></span><span class="line"><span class="cl">  ...
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// tryStore stores a value if the entry has not been expunged.
</span></span><span class="line"><span class="cl">//
</span></span><span class="line"><span class="cl">// If the entry is expunged, tryStore returns false and leaves the entry
</span></span><span class="line"><span class="cl">// unchanged.
</span></span><span class="line"><span class="cl">func (e *entry) tryStore(i *interface{}) bool {
</span></span><span class="line"><span class="cl">	for {
</span></span><span class="line"><span class="cl">		p := atomic.LoadPointer(&amp;e.p)
</span></span><span class="line"><span class="cl">		if p == expunged {
</span></span><span class="line"><span class="cl">			return false
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		if atomic.CompareAndSwapPointer(&amp;e.p, p, unsafe.Pointer(i)) {
</span></span><span class="line"><span class="cl">			return true
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è°ƒç”¨<code>Load</code>æ–¹æ³•æ£€æŸ¥<code>m.read</code>ä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªå…ƒç´ ã€‚è‹¥å­˜åœ¨ï¼Œä¸”åœ¨ tryStore æ—¶ï¼Œåˆ¤æ–­æ²¡æœ‰è¢«æ ‡è®°ä¸º expunged åˆ é™¤çŠ¶æ€ï¼Œåˆ™å°è¯•å­˜å‚¨ã€‚</p>
<p>è‹¥è¯¥å…ƒç´ ä¸å­˜åœ¨æˆ–åœ¨ tryStore æ—¶åˆ¤æ–­æ—¶ï¼Œå·²ç»è¢«æ ‡è®°ä¸ºåˆ é™¤çŠ¶æ€ï¼Œåˆ™ç»§ç»­èµ°åˆ°ä¸‹é¢æµç¨‹ğŸ‘‡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (m *Map) Store(key, value interface{}) {
</span></span><span class="line"><span class="cl">    ...
</span></span><span class="line"><span class="cl">    m.mu.Lock()
</span></span><span class="line"><span class="cl">	read, _ = m.read.Load().(readOnly)
</span></span><span class="line"><span class="cl">	if e, ok := read.m[key]; ok {
</span></span><span class="line"><span class="cl">		if e.unexpungeLocked() {
</span></span><span class="line"><span class="cl">			// å¦‚æœ read map ä¸­å­˜åœ¨è¯¥ keyï¼Œä½† p == expungedï¼Œåˆ™è¯´æ˜åœ¨ read ä¸­å·²ç»è¢«åˆ é™¤äº†:
</span></span><span class="line"><span class="cl">			//    a. å°† p çš„çŠ¶æ€ç”±ä¸­é—´å€¼ expunged æ›´æ”¹ä¸º nil
</span></span><span class="line"><span class="cl">			//    b. dirty map æ’å…¥ key
</span></span><span class="line"><span class="cl">			m.dirty[key] = e
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		// æ›´æ–° entry.p = value (read map å’Œ dirty map æŒ‡å‘åŒä¸€ä¸ª entry)
</span></span><span class="line"><span class="cl">		e.storeLocked(&amp;value)
</span></span><span class="line"><span class="cl">	} else if e, ok := m.dirty[key]; ok {
</span></span><span class="line"><span class="cl">		// å¦‚æœ read map ä¸­ä¸å­˜åœ¨è¯¥ keyï¼Œä½† dirty map ä¸­å­˜åœ¨è¯¥ keyï¼Œç›´æ¥å†™å…¥æ›´æ–° entry(read map ä¸­ä»ç„¶æ²¡æœ‰è¿™ä¸ª key)
</span></span><span class="line"><span class="cl">		e.storeLocked(&amp;value)
</span></span><span class="line"><span class="cl">	} else {
</span></span><span class="line"><span class="cl">		// å¦‚æœ read map å’Œ dirty map ä¸­éƒ½ä¸å­˜åœ¨è¯¥ keyï¼Œåˆ™ï¼š
</span></span><span class="line"><span class="cl">		//	  a. å¦‚æœ dirty map ä¸ºç©ºï¼Œåˆ™éœ€è¦åˆ›å»º dirty mapï¼Œå¹¶ä» read map ä¸­æ‹·è´æœªåˆ é™¤çš„å…ƒç´ åˆ°æ–°åˆ›å»ºçš„ dirty map
</span></span><span class="line"><span class="cl">		//    b. æ›´æ–° amended å­—æ®µï¼Œæ ‡è¯† dirty map ä¸­å­˜åœ¨ read map ä¸­æ²¡æœ‰çš„ key
</span></span><span class="line"><span class="cl">		//    c. å°† kv å†™å…¥ dirty map ä¸­ï¼Œread ä¸å˜
</span></span><span class="line"><span class="cl">		if !read.amended {
</span></span><span class="line"><span class="cl">		    // åˆ°è¿™é‡Œå°±æ„å‘³ç€ï¼Œå½“å‰çš„ key æ˜¯ç¬¬ä¸€æ¬¡è¢«åŠ åˆ° dirty map ä¸­ã€‚
</span></span><span class="line"><span class="cl">			// store ä¹‹å‰å…ˆåˆ¤æ–­ä¸€ä¸‹ dirty map æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œå°±æŠŠ read map æµ…æ‹·è´ä¸€æ¬¡ã€‚
</span></span><span class="line"><span class="cl">			m.dirtyLocked()
</span></span><span class="line"><span class="cl">			m.read.Store(readOnly{m: read.m, amended: true})
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		// å†™å…¥æ–° keyï¼Œåœ¨ dirty ä¸­å­˜å‚¨ value
</span></span><span class="line"><span class="cl">		m.dirty[key] = newEntry(value)
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	m.mu.Unlock()
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">func (m *Map) dirtyLocked() {
</span></span><span class="line"><span class="cl">	if m.dirty != nil {
</span></span><span class="line"><span class="cl">		return
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	read, _ := m.read.Load().(readOnly)
</span></span><span class="line"><span class="cl">	m.dirty = make(map[interface{}]*entry, len(read.m))
</span></span><span class="line"><span class="cl">	for k, e := range read.m {
</span></span><span class="line"><span class="cl">		if !e.tryExpungeLocked() {
</span></span><span class="line"><span class="cl">			m.dirty[k] = e
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">}
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">func (e *entry) tryExpungeLocked() (isExpunged bool) {
</span></span><span class="line"><span class="cl">	p := atomic.LoadPointer(&amp;e.p)
</span></span><span class="line"><span class="cl">	for p == nil {
</span></span><span class="line"><span class="cl">		// å°†å·²ç»åˆ é™¤æ ‡è®°ä¸ºnilçš„æ•°æ®æ ‡è®°ä¸º expunged
</span></span><span class="line"><span class="cl">		if atomic.CompareAndSwapPointer(&amp;e.p, nil, expunged) {
</span></span><span class="line"><span class="cl">			return true
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		p = atomic.LoadPointer(&amp;e.p)
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	return p == expunged
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œä½¿ç”¨äº†<strong>åŒæ£€æŸ¥</strong>çš„å¤„ç†ï¼Œå› ä¸ºåœ¨ä¸‹é¢çš„ä¸¤ä¸ªè¯­å¥ä¸­ï¼Œè¿™ä¸¤è¡Œè¯­å¥å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">if !ok &amp;&amp; read.amended {
</span></span><span class="line"><span class="cl">		m.mu.Lock()
</span></span></code></pre></td></tr></table>
</div>
</div><p>è™½ç„¶ç¬¬ä¸€å¥æ‰§è¡Œçš„æ—¶å€™æ¡ä»¶æ»¡è¶³ï¼Œä½†æ˜¯åœ¨åŠ é”ä¹‹å‰ï¼Œ<code>m.dirty</code> å¯èƒ½è¢«æå‡ä¸º <code>m.read</code>ï¼Œæ‰€ä»¥åŠ é”åè¿˜å¾—å†æ£€æŸ¥ä¸€æ¬¡ <code>m.read</code>ï¼Œåç»­çš„æ–¹æ³•ä¸­éƒ½ä½¿ç”¨äº†è¿™ä¸ªæ–¹æ³•ã€‚</p>
<p>ç”±äºå·²ç»èµ°åˆ°äº† dirty çš„æµç¨‹ï¼Œå› æ­¤å¼€å¤´å°±ç›´æ¥è°ƒç”¨äº† <code>Lock</code> æ–¹æ³•ä¸Š<strong>äº’æ–¥é”</strong>ï¼Œä¿è¯æ•°æ®å®‰å…¨ï¼Œä¹Ÿæ˜¯å‡¸æ˜¾<strong>æ€§èƒ½å˜å·®çš„ç¬¬ä¸€å¹•</strong>ã€‚</p>
<p>å†™å…¥è¿‡ç¨‹çš„æ•´ä½“æµç¨‹æ˜¯ğŸ‘‡</p>
<ol>
<li>å¦‚æœåœ¨ read é‡Œèƒ½å¤Ÿæ‰¾åˆ°å¾…å­˜å‚¨çš„ keyï¼Œå¹¶ä¸”å¯¹åº”çš„ entry çš„ p å€¼ä¸ä¸º expungedï¼Œä¹Ÿå°±æ˜¯æ²¡è¢«åˆ é™¤æ—¶ï¼Œç›´æ¥æ›´æ–°å¯¹åº”çš„ entry å³å¯ã€‚</li>
<li>å¦‚æœç¬¬ä¸€æ­¥æ²¡æœ‰æˆåŠŸï¼Œè¦ä¹ˆ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œè¦ä¹ˆ key è¢«æ ‡è®°ä¸ºåˆ é™¤ã€‚åˆ™å…ˆåŠ é”ï¼Œå†è¿›è¡Œåç»­çš„æ“ä½œã€‚</li>
<li>å†æ¬¡åœ¨ read ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¿™ä¸ª keyï¼Œä¹Ÿå°±æ˜¯ double check åŒæ£€æŸ¥ä¸€ä¸‹ï¼Œè¿™æ˜¯ lock-free ç¼–ç¨‹çš„å¸¸è§å¥—è·¯ã€‚å¦‚æœ read ä¸­å­˜åœ¨è¯¥ keyï¼Œä½† <code>p == expunged</code>ï¼Œè¯´æ˜ <code>m.dirty != nil</code>ï¼ˆ<code>m.dirty</code> æ˜¯è¢«åˆå§‹åŒ–è¿‡çš„ï¼‰å¹¶ä¸” <code>m.dirty</code> ä¸­ä¸å­˜åœ¨è¯¥ key å€¼ï¼ˆå› ä¸ºå·²ç»è¢«åˆ é™¤äº†ï¼Œdirty ä¸­çš„åˆ é™¤ç›´æ¥å°±åˆ é™¤äº†ï¼›read ä¸­çš„åˆ é™¤ï¼Œä¼šå…ˆæ ‡è®°ä¸º nilï¼Œ<code>read=&gt;dirty</code> é‡å¡‘æ—¶å†æ ‡è®°ä¸º <code>expunged</code>ï¼‰ï¼Œæ­¤æ—¶ğŸ‘‡
<ol>
<li>å°† p çš„çŠ¶æ€ç”± <code>expunged</code> æ›´æ”¹ä¸º <code>nil</code></li>
<li>dirty map æ’å…¥ keyã€‚ç„¶åï¼Œç›´æ¥æ›´æ–°å¯¹åº”çš„ value</li>
</ol>
</li>
<li>å¦‚æœ read ä¸­æ²¡æœ‰æ­¤ keyï¼Œé‚£å°±æŸ¥çœ‹ dirty ä¸­æ˜¯å¦æœ‰æ­¤ keyï¼Œå¦‚æœæœ‰ï¼Œåˆ™ç›´æ¥æ›´æ–°å¯¹åº”çš„ valueï¼Œè¿™æ—¶ read ä¸­è¿˜æ˜¯æ²¡æœ‰æ­¤ keyã€‚</li>
<li>æœ€åä¸€æ­¥ï¼Œå¦‚æœ read å’Œ dirty ä¸­éƒ½ä¸å­˜åœ¨è¯¥ keyï¼Œåˆ™ğŸ‘‡
<ol>
<li>å¦‚æœ <code>dirty</code> ä¸ºç©ºï¼Œåˆ™éœ€è¦åˆ›å»º <code>dirty</code>ï¼Œå¹¶ä» <code>read</code> ä¸­æ‹·è´æœªè¢«åˆ é™¤çš„å…ƒç´ </li>
<li>æ›´æ–° <code>amended</code> å­—æ®µä¸º trueï¼Œæ ‡è¯† dirty map ä¸­å­˜åœ¨ read map ä¸­æ²¡æœ‰çš„ <code>key</code></li>
<li>å°† <code>k-v</code> å†™å…¥ dirty map ä¸­ï¼Œ<code>read.m</code> ä¸å˜ã€‚æœ€åï¼Œæ›´æ–°æ­¤ key å¯¹åº”çš„ <code>value</code>ã€‚</li>
</ol>
</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆ read ä¸­å­˜åœ¨ keyï¼Œä½†æ˜¯ <code>p == expunged</code> æ—¶éœ€è¦æŠŠ p çš„çŠ¶æ€ç”± <code>expunged</code> æ›´æ”¹ä¸º <code>nil</code></strong> â“</p>
<p>expunged çš„æ„ä¹‰æ˜¯åœ¨åˆ é™¤æ“ä½œåï¼Œé”®çš„å¯¹åº”å€¼è¢«æ ‡è®°ä¸º expungedï¼Œè€Œä¸æ˜¯ç®€å•åœ°è®¾ç½®ä¸º nilã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œnil å€¼å¯èƒ½æ˜¯é”®æœ¬èº«çš„æœ‰æ•ˆå€¼ï¼Œå› æ­¤æ— æ³•åŒºåˆ†é”®å·²è¢«åˆ é™¤å’Œé”®å¯¹åº”çš„å€¼ä¸º nil ä¸¤ç§æƒ…å†µã€‚é€šè¿‡ä½¿ç”¨ expunged æ ‡è®°ï¼Œsync.Map å¯ä»¥æ¸…æ¥šåœ°åŒºåˆ†é”®è¢«åˆ é™¤å’Œé”®å¯¹åº”çš„å€¼ä¸º nilã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">if e.unexpungeLocked() {
</span></span><span class="line"><span class="cl">      // The entry was previously expunged, which implies that there is a
</span></span><span class="line"><span class="cl">      // non-nil dirty map and this entry is not in it.
</span></span><span class="line"><span class="cl">      m.dirty[key] = e
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">  e.storeLocked(&amp;value)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">// storeLocked unconditionally stores a value to the entry.
</span></span><span class="line"><span class="cl">//
</span></span><span class="line"><span class="cl">// The entry must be known not to be expunged.
</span></span><span class="line"><span class="cl">func (e *entry) storeLocked(i *interface{}) {
</span></span><span class="line"><span class="cl">	atomic.StorePointer(&amp;e.p, unsafe.Pointer(i))
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Store å¯èƒ½ä¼šåœ¨æŸç§æƒ…å†µä¸‹ï¼ˆåˆå§‹åŒ–æˆ–è€… <code>m.dirty</code> åˆšè¢«æå‡åï¼Œæ­¤æ—¶ <code>m.read</code> ä¸­çš„æ•°æ®å’Œ <code>m.dirty</code> ä¸­çš„ç›¸ç­‰ï¼ŒreadOnly ä¸­çš„ <code>amended</code> ä¸º <code>false</code>ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½å­˜åœ¨ä¸€ä¸ª keyï¼Œread ä¸­æ‰¾ä¸åˆ° dirty ä¸­ä¹Ÿæ‰¾ä¸åˆ°ï¼‰ä» <code>m.read</code> ä¸­å¤åˆ¶æ•°æ®ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ <code>m.read</code> ä¸­æ•°æ®é‡éå¸¸å¤§ï¼Œå¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚</p>
<p>ç»¼ä¸Šï¼Œsync.Map ç±»å‹<strong>ä¸é€‚åˆå†™å¤šçš„åœºæ™¯</strong>ï¼Œè¯»å¤šå†™å°‘æ˜¯æ¯”è¾ƒå¥½çš„ã€‚è‹¥æœ‰å¤§æ•°æ®é‡çš„åœºæ™¯ï¼Œåˆ™éœ€è¦è€ƒè™‘ read å¤åˆ¶æ•°æ®æ—¶çš„å¶ç„¶æ€§èƒ½æŠ–åŠ¨æ˜¯å¦èƒ½å¤Ÿæ¥å—ã€‚</p>
<h2 id="loadæŸ¥æ‰¾è¿‡ç¨‹" class="headerLink">
    <a href="#load%e6%9f%a5%e6%89%be%e8%bf%87%e7%a8%8b" class="header-mark"></a>LoadæŸ¥æ‰¾è¿‡ç¨‹</h2><p>sync.Map ç±»å‹æœ¬è´¨ä¸Šæ˜¯æœ‰ä¸¤ä¸ª mapã€‚ä¸€ä¸ªå« readã€ä¸€ä¸ªå« dirtyï¼Œé•¿çš„ä¹Ÿå·®ä¸å¤šğŸ‘‡</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221204/301dd5df668c43c08845983b106b0fc4.png" title="sync.map" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221204/301dd5df668c43c08845983b106b0fc4.png" data-sub-html="<h2>sync.map</h2><p>sync.map</p>">
        
    </a><figcaption class="image-caption">sync.map</figcaption>
    </figure></p>
<p>å½“ä» sync.Map ç±»å‹ä¸­è¯»å–æ•°æ®æ—¶ï¼Œå…¶ä¼šå…ˆæŸ¥çœ‹ read ä¸­æ˜¯å¦åŒ…å«æ‰€éœ€çš„å…ƒç´ ï¼š</p>
<ul>
<li>è‹¥æœ‰ï¼Œåˆ™é€šè¿‡ atomic åŸå­æ“ä½œè¯»å–æ•°æ®å¹¶è¿”å›ã€‚</li>
<li>è‹¥æ— ï¼Œåˆ™ä¼šåˆ¤æ–­ read.readOnly ä¸­çš„ amended å±æ€§ï¼Œä»–ä¼šå‘Šè¯‰ç¨‹åºï¼Œdirty æ˜¯å¦åŒ…å« <code>read.readOnly.m</code> ä¸­æ²¡æœ‰çš„æ•°æ®ï¼›å¦‚æœå­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯ amended ä¸º trueï¼Œå°†ä¼šè¿› ä¸€æ­¥åˆ° dirty ä¸­æŸ¥æ‰¾æ•°æ®ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (m *Map) Load(key interface{}) (value interface{}, ok bool) {
</span></span><span class="line"><span class="cl">	// 1.é¦–å…ˆä» m.read ä¸­å¾—åˆ°åªè¯» readOnly,ä»å®ƒçš„ map ä¸­æŸ¥æ‰¾ï¼Œä¸éœ€è¦åŠ é”
</span></span><span class="line"><span class="cl">	read, _ := m.read.Load().(readOnly)
</span></span><span class="line"><span class="cl">	e, ok := read.m[key]
</span></span><span class="line"><span class="cl">	// 2. å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå¹¶ä¸” m.dirty ä¸­æœ‰æ–°æ•°æ®ï¼Œéœ€è¦ä» m.dirty æŸ¥æ‰¾ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦åŠ é”
</span></span><span class="line"><span class="cl">	if !ok &amp;&amp; read.amended {
</span></span><span class="line"><span class="cl">		m.mu.Lock()
</span></span><span class="line"><span class="cl">		// åŒæ£€æŸ¥ï¼Œé¿å…åŠ é”çš„æ—¶å€™ m.dirty æå‡ä¸º m.read,è¿™ä¸ªæ—¶å€™ m.read å¯èƒ½è¢«æ›¿æ¢äº†ã€‚
</span></span><span class="line"><span class="cl">		read, _ = m.read.Load().(readOnly)
</span></span><span class="line"><span class="cl">		e, ok = read.m[key]
</span></span><span class="line"><span class="cl">		// å¦‚æœm.readä¸­è¿˜æ˜¯ä¸å­˜åœ¨ï¼Œå¹¶ä¸”m.dirtyä¸­æœ‰æ–°æ•°æ®
</span></span><span class="line"><span class="cl">		if !ok &amp;&amp; read.amended {
</span></span><span class="line"><span class="cl">			// ä»m.dirtyæŸ¥æ‰¾
</span></span><span class="line"><span class="cl">			e, ok = m.dirty[key]
</span></span><span class="line"><span class="cl">			// ä¸ç®¡ m.dirty ä¸­å­˜ä¸å­˜åœ¨ï¼Œéƒ½å°† misses è®¡æ•°åŠ ä¸€
</span></span><span class="line"><span class="cl">			// missLocked()ä¸­æ»¡è¶³æ¡ä»¶åå°±ä¼šæå‡ m.dirty
</span></span><span class="line"><span class="cl">			m.missLocked()
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		m.mu.Unlock()
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	if !ok {
</span></span><span class="line"><span class="cl">		return nil, false
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	return e.load()
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¤„ç†è·¯å¾„åˆ†ä¸º fast path å’Œ slow pathï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ˜¯ fast pathï¼Œç›´æ¥åœ¨ read ä¸­æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†ç›´æ¥è°ƒç”¨ entry çš„ load æ–¹æ³•ï¼Œå–å‡ºå…¶ä¸­çš„å€¼ã€‚</li>
<li>å¦‚æœ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œä¸” amended ä¸º falseï¼Œè¯´æ˜ dirty ä¸ºç©ºï¼Œé‚£ç›´æ¥è¿”å›ç©ºå’Œ falseã€‚</li>
<li>å¦‚æœ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œä¸” amended ä¸º trueï¼Œè¯´æ˜ dirty ä¸­å¯èƒ½å­˜åœ¨æˆ‘ä»¬è¦æ‰¾çš„ keyã€‚è¦å…ˆä¸Šé”ï¼Œå†å°è¯•å» dirty ä¸­æŸ¥æ‰¾ã€‚åœ¨è¿™ä¹‹å‰ï¼Œä»ç„¶æœ‰ä¸€ä¸ª double check çš„æ“ä½œã€‚è‹¥è¿˜æ˜¯æ²¡æœ‰åœ¨ read ä¸­æ‰¾åˆ°ï¼Œé‚£ä¹ˆå°±ä» dirty ä¸­æ‰¾ã€‚ä¸ç®¡ dirty ä¸­æœ‰æ²¡æœ‰æ‰¾åˆ°ï¼Œéƒ½è¦ â€œè®°ä¸€ç¬”â€ï¼Œå› ä¸ºåœ¨ dirty è¢«æå‡ä¸º read ä¹‹å‰ï¼Œéƒ½ä¼šè¿›å…¥è¿™æ¡è·¯å¾„</li>
</ol>
<p>é‚£ä¹ˆ <code>m.dirty</code> æ˜¯å¦‚ä½•è¢«æå‡çš„â“ <code>missLocked</code> æ–¹æ³•ä¸­å¯èƒ½ä¼šå°† <code>m.dirty</code> æå‡ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (m *Map) missLocked() {
</span></span><span class="line"><span class="cl">	m.misses++
</span></span><span class="line"><span class="cl">	if m.misses &lt; len(m.dirty) {
</span></span><span class="line"><span class="cl">		return
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	m.read.Store(readOnly{m: m.dirty})
</span></span><span class="line"><span class="cl">	m.dirty = nil
</span></span><span class="line"><span class="cl">	m.misses = 0
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç›´æ¥å°† misses çš„å€¼åŠ  1ï¼Œè¡¨ç¤ºä¸€æ¬¡æœªå‘½ä¸­ï¼Œå¦‚æœ misses å€¼å°äº <code>m.dirty</code> çš„é•¿åº¦ï¼Œå°±ç›´æ¥è¿”å›ã€‚å¦åˆ™ï¼Œå°† <code>m.dirty</code> æ™‹å‡ä¸º readï¼Œå¹¶æ¸…ç©º dirtyï¼Œæ¸…ç©º misses è®¡æ•°å€¼ï¼Œå¹¶ä¸” <code>m.read.amended</code> ä¸º <code>false</code>ã€‚è¿™æ ·ï¼Œä¹‹å‰ä¸€æ®µæ—¶é—´æ–°åŠ å…¥çš„ key éƒ½ä¼šè¿›å…¥åˆ° read ä¸­ï¼Œä»è€Œèƒ½å¤Ÿæå‡ read çš„å‘½ä¸­ç‡ã€‚</p>
<p>å†æ¥çœ‹ä¸‹ entry çš„ load æ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (e *entry) load() (value interface{}, ok bool) {
</span></span><span class="line"><span class="cl">	p := atomic.LoadPointer(&amp;e.p)
</span></span><span class="line"><span class="cl">	if p == nil || p == expunged {
</span></span><span class="line"><span class="cl">		return nil, false
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	return *(*interface{})(p), true
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¯¹äº nil å’Œ expunged çŠ¶æ€çš„ entryï¼Œç›´æ¥è¿”å› <code>ok=false</code>ï¼›å¦åˆ™ï¼Œå°† p è½¬æˆ <code>interface{}</code> è¿”å›ã€‚</p>
<p>sync.Map çš„è¯»æ“ä½œæ€§èƒ½å¦‚æ­¤ä¹‹é«˜çš„åŸå› ï¼Œå°±åœ¨äºå­˜åœ¨ read è¿™ä¸€å·§å¦™çš„è®¾è®¡ï¼Œå…¶ä½œä¸ºä¸€ä¸ªç¼“å­˜å±‚ï¼Œæä¾›äº†<strong><ruby>å¿«è·¯å¾„<rt>fast path</rt></ruby></strong>çš„æŸ¥æ‰¾ã€‚</p>
<h2 id="deleteåˆ é™¤è¿‡ç¨‹" class="headerLink">
    <a href="#delete%e5%88%a0%e9%99%a4%e8%bf%87%e7%a8%8b" class="header-mark"></a>Deleteåˆ é™¤è¿‡ç¨‹</h2><p>å†™å…¥è¿‡ç¨‹ï¼Œç†è®ºä¸Šå’Œåˆ é™¤ä¸ä¼šå·®å¤ªè¿œã€‚æ€ä¹ˆ sync.Map ç±»å‹çš„åˆ é™¤çš„æ€§èƒ½ä¼¼ä¹è¿˜è¡Œï¼Œé‚£è¿™é‡Œé¢åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„å‘¢â“</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (m *Map) Delete(key interface{}) {
</span></span><span class="line"><span class="cl">	read, _ := m.read.Load().(readOnly)
</span></span><span class="line"><span class="cl">	e, ok := read.m[key]
</span></span><span class="line"><span class="cl">	// å¦‚æœ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œä¸” dirty map ä¸ä¸ºç©º
</span></span><span class="line"><span class="cl">	if !ok &amp;&amp; read.amended {
</span></span><span class="line"><span class="cl">		m.mu.Lock()
</span></span><span class="line"><span class="cl">		read, _ = m.read.Load().(readOnly)
</span></span><span class="line"><span class="cl">		e, ok = read.m[key]
</span></span><span class="line"><span class="cl">		if !ok &amp;&amp; read.amended {
</span></span><span class="line"><span class="cl">			delete(m.dirty, key) // ç›´æ¥ä» dirty ä¸­åˆ é™¤è¿™ä¸ª key
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		m.mu.Unlock()
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	if ok {
</span></span><span class="line"><span class="cl">		e.delete() // å¦‚æœåœ¨ read ä¸­æ‰¾åˆ°äº†è¿™ä¸ª keyï¼Œå°† p ç½®ä¸º nil
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸€ç§æƒ…å†µï¼šå¯ä»¥çœ‹åˆ°ï¼Œå…ˆä» read é‡ŒæŸ¥æ˜¯å¦æœ‰è¿™ä¸ª keyï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œ <code>e.delete</code> æ–¹æ³•ï¼Œå°† p ç½®ä¸º nilï¼Œè¿™æ · read å’Œ dirty éƒ½èƒ½çœ‹åˆ°è¿™ä¸ªå˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åœ°å€ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221205/3c105d85e5c24fecb51e45bc3a184cfe.png" title="æ•°æ®ç»“æ„" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221205/3c105d85e5c24fecb51e45bc3a184cfe.png" data-sub-html="<h2>æ•°æ®ç»“æ„</h2><p>æ•°æ®ç»“æ„</p>">
        
    </a><figcaption class="image-caption">æ•°æ®ç»“æ„</figcaption>
    </figure></p>
<p>ä»¥ä¸‹æ˜¯<code>entry.delete</code>æ–¹æ³•ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (e *entry) delete() (hadValue bool) {
</span></span><span class="line"><span class="cl">	for {
</span></span><span class="line"><span class="cl">		p := atomic.LoadPointer(&amp;e.p)
</span></span><span class="line"><span class="cl">		if p == nil || p == expunged {
</span></span><span class="line"><span class="cl">			return false
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		if atomic.CompareAndSwapPointer(&amp;e.p, p, nil) {
</span></span><span class="line"><span class="cl">			return true
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒçœŸæ­£åšçš„äº‹æƒ…æ˜¯å°†æ­£å¸¸çŠ¶æ€ï¼ˆæŒ‡å‘ä¸€ä¸ª interface{}ï¼‰çš„ p è®¾ç½®æˆ nilã€‚æ²¡æœ‰è®¾ç½®æˆ expunged çš„åŸå› æ˜¯ï¼Œå½“ p ä¸º expunged æ—¶ï¼Œè¡¨ç¤ºå®ƒå·²ç»ä¸åœ¨ dirty ä¸­äº†ï¼Œè¿™æ˜¯ p çš„çŠ¶æ€å†³å®šçš„ï¼Œåœ¨ <code>tryExpungeLocked</code> å‡½æ•°ä¸­ï¼Œä¼šå°† nil åŸå­åœ°è®¾ç½®æˆ expungedã€‚</p>
<p><code>tryExpungeLocked</code> æ˜¯åœ¨æ–°åˆ›å»º dirty æ—¶è°ƒç”¨çš„ï¼Œä¼šå°†å·²è¢«åˆ é™¤çš„ <code>entry.p</code> ä» nil æ”¹æˆ expungedï¼Œè¿™ä¸ª entry å°±ä¸ä¼šå†™å…¥ dirty äº†ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (e *entry) tryExpungeLocked() (isExpunged bool) {
</span></span><span class="line"><span class="cl">	p := atomic.LoadPointer(&amp;e.p)
</span></span><span class="line"><span class="cl">	for p == nil {
</span></span><span class="line"><span class="cl">		// å¦‚æœåŸæ¥æ˜¯ nilï¼Œè¯´æ˜åŸ key å·²è¢«åˆ é™¤ï¼Œåˆ™å°†å…¶è½¬ä¸º expungedã€‚
</span></span><span class="line"><span class="cl">		if atomic.CompareAndSwapPointer(&amp;e.p, nil, expunged) {
</span></span><span class="line"><span class="cl">			return true
</span></span><span class="line"><span class="cl">		}
</span></span><span class="line"><span class="cl">		p = atomic.LoadPointer(&amp;e.p)
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	return p == expunged
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒç§æƒ…å†µï¼šå¦‚æœæ²¡åœ¨ read ä¸­æ‰¾åˆ°è¿™ä¸ª keyï¼Œå¹¶ä¸” dirty ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå°±è¦æ“ä½œ dirty äº†ï¼Œæ“ä½œä¹‹å‰ï¼Œè¿˜æ˜¯è¦å…ˆä¸Šé”ã€‚ç„¶åè¿›è¡Œ double checkï¼Œå¦‚æœä»ç„¶æ²¡æœ‰åœ¨ read é‡Œæ‰¾åˆ°æ­¤ keyï¼Œåˆ™ä» dirty ä¸­åˆ æ‰è¿™ä¸ª keyã€‚</p>
<p>æ³¨æ„åˆ°å¦‚æœ key åŒæ—¶å­˜åœ¨äº read å’Œ dirty ä¸­æ—¶ï¼Œåˆ é™¤åªæ˜¯åšäº†ä¸€ä¸ªæ ‡è®°ï¼Œå°† p ç½®ä¸º nilï¼›è€Œå¦‚æœä»…åœ¨ dirty ä¸­å«æœ‰è¿™ä¸ª key æ—¶ï¼Œä¼šç›´æ¥åˆ é™¤è¿™ä¸ª keyã€‚åŸå› åœ¨äºï¼Œè‹¥ä¸¤è€…éƒ½å­˜åœ¨è¿™ä¸ª keyï¼Œä»…åšæ ‡è®°åˆ é™¤ï¼Œå¯ä»¥åœ¨ä¸‹æ¬¡æŸ¥æ‰¾è¿™ä¸ª key æ—¶ï¼Œå‘½ä¸­ readï¼Œæå‡æ•ˆç‡ã€‚è‹¥åªæœ‰åœ¨ dirty ä¸­å­˜åœ¨æ—¶ï¼Œread èµ·ä¸åˆ° â€œç¼“å­˜â€ çš„ä½œç”¨ï¼Œç›´æ¥åˆ é™¤ã€‚</p>
<h2 id="dirtyå’Œreadäº’è½¬åˆ†åˆ«åœ¨ä»€ä¹ˆæ ·çš„æ—¶æœºä¸‹è¿›è¡Œ" class="headerLink">
    <a href="#dirty%e5%92%8cread%e4%ba%92%e8%bd%ac%e5%88%86%e5%88%ab%e5%9c%a8%e4%bb%80%e4%b9%88%e6%a0%b7%e7%9a%84%e6%97%b6%e6%9c%ba%e4%b8%8b%e8%bf%9b%e8%a1%8c" class="header-mark"></a>dirtyå’Œreadäº’è½¬ï¼Œåˆ†åˆ«åœ¨ä»€ä¹ˆæ ·çš„æ—¶æœºä¸‹è¿›è¡Œ</h2><ul>
<li><code>dirty=&gt;read</code>ï¼šéšç€ load çš„ miss ä¸æ–­è‡ªå¢ï¼Œè¾¾åˆ°é˜ˆå€¼ï¼ˆ<code>m.misses &gt;= len(m.dirty)</code>ï¼‰åè§¦å‘å‡çº§è½¬å‚¨ã€‚</li>
<li><code>read=&gt;dirty</code>ï¼šå½“æœ‰ read ä¸­ä¸å­˜åœ¨çš„æ–° key éœ€è¦å¢åŠ ï¼Œä¸” read å’Œ dirty ä¸€è‡´çš„æ—¶å€™ï¼Œè§¦å‘é‡å¡‘ï¼Œä¸” <code>read.amended</code> è®¾ç½®ä¸º trueï¼Œç„¶åå†åœ¨ dirty æ–°å¢ã€‚é‡å¡‘çš„è¿‡ç¨‹ï¼Œä¼šå°† nil çŠ¶æ€çš„ entryï¼Œå…¨éƒ¨æŒ¤å‹åˆ° expunged çŠ¶æ€ä¸­ï¼ŒåŒæ—¶å°†é expunged çš„ entry æµ…æ‹·è´åˆ° dirty ä¸­ï¼Œè¿™æ ·å¯ä»¥é¿å… read çš„ key æ— é™çš„è†¨èƒ€ï¼ˆå­˜åœ¨å¤§é‡é€»è¾‘åˆ é™¤çš„ keyï¼‰ã€‚æœ€ç»ˆï¼Œåœ¨ dirty å†æ¬¡å‡çº§ä¸º read çš„æ—¶å€™ï¼Œè¿™äº›é€»è¾‘åˆ é™¤çš„ key å°±å¯ä»¥ä¸€æ¬¡æ€§ä¸¢å¼ƒé‡Šæ”¾ï¼ˆå› ä¸ºæ˜¯ç›´æ¥è¦†ç›–ä¸Šå»ï¼‰ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">if !read.amended {
</span></span><span class="line"><span class="cl">   // We&#39;re adding the first new key to the dirty map.
</span></span><span class="line"><span class="cl">   // Make sure it is allocated and mark the read-only map as incomplete.
</span></span><span class="line"><span class="cl">   m.dirtyLocked()
</span></span><span class="line"><span class="cl">   m.read.Store(readOnly{m: read.m, amended: true})
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221025/e8837d7eda904db586f5e78b23a69ef2.png" title="read=&amp;gt;dirty" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221025/e8837d7eda904db586f5e78b23a69ef2.png" data-sub-html="<h2>read=&gt;dirty</h2><p>read=&amp;gt;dirty</p>">
        
    </a><figcaption class="image-caption">read=>dirty</figcaption>
    </figure></p>
<h2 id="readä»ä½•è€Œæ¥å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ" class="headerLink">
    <a href="#read%e4%bb%8e%e4%bd%95%e8%80%8c%e6%9d%a5%e5%ad%98%e5%9c%a8%e7%9a%84%e6%84%8f%e4%b9%89%e6%98%af%e4%bb%80%e4%b9%88" class="header-mark"></a>readä»ä½•è€Œæ¥ï¼Œå­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ</h2><ul>
<li>read æ˜¯ç”± dirty å‡çº§è€Œæ¥ï¼Œæ˜¯åˆ©ç”¨äº† <code>atomic.Store</code> ä¸€æ¬¡æ€§è¦†ç›–ï¼Œè€Œä¸æ˜¯ä¸€ç‚¹ç‚¹çš„ set æ“ä½œå‡ºæ¥çš„ã€‚æ‰€ä»¥ï¼Œread æ›´åƒæ˜¯ä¸€ä¸ªå¿«ç…§ï¼Œread ä¸­ key çš„é›†åˆä¸èƒ½è¢«æ”¹å˜ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œè¯´çš„ read çš„ key ä¸å¯æ”¹å˜ï¼Œä¸ä»£è¡¨æŒ‡å®šçš„ key çš„ value ä¸å¯æ”¹å˜ï¼Œvalue æ˜¯å¯ä»¥é€šè¿‡åŸå­ <code>CAS</code> æ¥è¿›è¡Œæ›´æ”¹çš„ï¼‰ï¼Œæ‰€ä»¥å…¶ä¸­çš„é”®çš„é›†åˆæœ‰æ—¶å€™å¯èƒ½æ˜¯ä¸å…¨çš„ã€‚</li>
<li>è„å­—å…¸ä¸­çš„é”®å€¼å¯¹é›†åˆæ€»æ˜¯å®Œå…¨çš„ï¼Œä½†æ˜¯å…¶ä¸­<strong>ä¸ä¼šåŒ…å«</strong> expunged çš„é”®å€¼å¯¹ã€‚</li>
<li>read çš„å­˜åœ¨ä»·å€¼ï¼Œåœ¨äºåŠ é€Ÿè¯»æ€§èƒ½ï¼ˆé€šè¿‡åŸå­æ“ä½œé¿å…äº†é”ï¼‰ã€‚</li>
</ul>
<h2 id="dirtyä»€ä¹ˆæ—¶å€™æ˜¯nil" class="headerLink">
    <a href="#dirty%e4%bb%80%e4%b9%88%e6%97%b6%e5%80%99%e6%98%afnil" class="header-mark"></a>dirtyä»€ä¹ˆæ—¶å€™æ˜¯nil</h2><p>dirty æ•°æ®æå‡ä¸º read æ—¶ <code>m.dirty</code> ä¼šç½®ä¸º nilã€‚æ­¤æ—¶ï¼Œ<code>m.read</code> å’Œ <code>m.dirty</code> ç›¸ç­‰ï¼Œ<code>m.amended</code> ä¸º falseï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œread ä¸­æ‰¾ä¸åˆ°çš„æ•°æ®ï¼Œdirty ä¸­åŒæ ·æ‰¾ä¸åˆ°ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">amended bool // true if the dirty map contains some key not in m.
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">func (m *Map) missLocked() {
</span></span><span class="line"><span class="cl">	m.misses++
</span></span><span class="line"><span class="cl">	if m.misses &lt; len(m.dirty) {
</span></span><span class="line"><span class="cl">		return
</span></span><span class="line"><span class="cl">	}
</span></span><span class="line"><span class="cl">	m.read.Store(readOnly{m: m.dirty})
</span></span><span class="line"><span class="cl">	m.dirty = nil
</span></span><span class="line"><span class="cl">	m.misses = 0
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="entryçš„på¯èƒ½çš„çŠ¶æ€æœ‰å“ªäº›" class="headerLink">
    <a href="#entry%e7%9a%84p%e5%8f%af%e8%83%bd%e7%9a%84%e7%8a%b6%e6%80%81%e6%9c%89%e5%93%aa%e4%ba%9b" class="header-mark"></a>entryçš„på¯èƒ½çš„çŠ¶æ€æœ‰å“ªäº›</h2><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230714/9ab5f3ce270e4d39ac832e6bea79238b.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230714/9ab5f3ce270e4d39ac832e6bea79238b.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230714/9ab5f3ce270e4d39ac832e6bea79238b.png" data-sub-html="<h2>p çš„çŠ¶æ€</h2>">
        
    </a><figcaption class="image-caption">p çš„çŠ¶æ€</figcaption>
    </figure></p>
<ul>
<li><code>e.p==nil</code>ï¼šentry å·²ç»è¢«æ ‡è®°åˆ é™¤ï¼Œä¸è¿‡æ­¤æ—¶è¿˜æœªç»è¿‡ <code>read=&gt;dirty</code> é‡å¡‘ï¼Œæ­¤æ—¶å¯èƒ½ä»ç„¶å±äº dirtyï¼ˆå¦‚æœ dirty é nilï¼‰ã€‚</li>
<li><code>e.p==expunged</code>ï¼šentry å·²ç»è¢«æ ‡è®°åˆ é™¤ï¼Œç»è¿‡ <code>read=&gt;dirty</code> é‡å¡‘ï¼Œä¸å±äº dirtyï¼Œä»…ä»…å±äº readï¼Œä¸‹ä¸€æ¬¡ <code>dirty=&gt;read</code> å‡çº§ï¼Œä¼šè¢«å½»åº•æ¸…ç†ï¼ˆå› ä¸ºå‡çº§çš„æ“ä½œæ˜¯ç›´æ¥è¦†ç›–ï¼Œread ä¸­çš„ expunged ä¼šè¢«è‡ªåŠ¨é‡Šæ”¾å›æ”¶ï¼‰</li>
<li><code>e.p==æ™®é€šæŒ‡é’ˆ</code>ï¼šæ­¤æ—¶ entry æ˜¯ä¸€ä¸ªæ™®é€šçš„å­˜åœ¨çŠ¶æ€ï¼Œå±äº readï¼Œå¦‚æœ dirty é nilï¼Œä¹Ÿå±äº dirtyã€‚</li>
</ul>
<h2 id="åˆ é™¤æ—¶epæ˜¯è®¾ç½®æˆäº†nilè¿˜æ˜¯expunged" class="headerLink">
    <a href="#%e5%88%a0%e9%99%a4%e6%97%b6ep%e6%98%af%e8%ae%be%e7%bd%ae%e6%88%90%e4%ba%86nil%e8%bf%98%e6%98%afexpunged" class="header-mark"></a>åˆ é™¤æ—¶e.pæ˜¯è®¾ç½®æˆäº†nilè¿˜æ˜¯expunged</h2><ul>
<li>å¦‚æœ key ä¸åœ¨ read ä¸­ï¼Œä½†æ˜¯åœ¨ dirty ä¸­ï¼Œåˆ™ç›´æ¥ deleteã€‚</li>
<li>å¦‚æœ key åœ¨ read ä¸­ï¼Œåˆ™é€»è¾‘åˆ é™¤ï¼Œ<code>e.p</code> èµ‹å€¼ä¸º nilï¼Œåç»­åœ¨ <code>read=&gt;dirty</code> é‡å¡‘çš„æ—¶å€™ï¼Œnil ä¼šå˜æˆ expungedã€‚</li>
</ul>
<h2 id="ä»€ä¹ˆæ—¶å€™epç”±nilå˜æˆexpunged" class="headerLink">
    <a href="#%e4%bb%80%e4%b9%88%e6%97%b6%e5%80%99ep%e7%94%b1nil%e5%8f%98%e6%88%90expunged" class="header-mark"></a>ä»€ä¹ˆæ—¶å€™e.pç”±nilå˜æˆexpunged</h2><ul>
<li><code>read=&gt;dirty</code> é‡å¡‘çš„æ—¶å€™ï¼Œæ­¤æ—¶ read ä¸­ä»ç„¶æ˜¯ nil çš„ä¼šå˜æˆ expungedï¼Œè¡¨ç¤ºè¿™éƒ¨åˆ† key ç­‰å¾…è¢«æœ€ç»ˆä¸¢å¼ƒï¼ˆexpunged æ˜¯æœ€ç»ˆæ€ï¼Œç­‰å¾…è¢«ä¸¢å¼ƒï¼Œé™¤éåˆå‡ºç°äº†é‡æ–° store çš„æƒ…å†µï¼‰</li>
<li>æœ€ç»ˆä¸¢å¼ƒçš„æ—¶æœºå°±æ˜¯ <code>dirty=&gt;read</code> å‡çº§çš„æ—¶å€™ï¼Œdirty çš„ç›´æ¥ç²—æš´è¦†ç›–ï¼Œä¼šä½¿å¾— read ä¸­çš„æ‰€æœ‰æˆå‘˜éƒ½è¢«ä¸¢å¼ƒï¼ŒåŒ…æ‹¬ expungedã€‚</li>
</ul>
<h2 id="æ—¢ç„¶nilä¹Ÿè¡¨ç¤ºæ ‡è®°åˆ é™¤å†è®¾è®¡å‡ºä¸€ä¸ªexpungedçš„æ„ä¹‰æ˜¯ä»€ä¹ˆ" class="headerLink">
    <a href="#%e6%97%a2%e7%84%b6nil%e4%b9%9f%e8%a1%a8%e7%a4%ba%e6%a0%87%e8%ae%b0%e5%88%a0%e9%99%a4%e5%86%8d%e8%ae%be%e8%ae%a1%e5%87%ba%e4%b8%80%e4%b8%aaexpunged%e7%9a%84%e6%84%8f%e4%b9%89%e6%98%af%e4%bb%80%e4%b9%88" class="header-mark"></a>æ—¢ç„¶nilä¹Ÿè¡¨ç¤ºæ ‡è®°åˆ é™¤ï¼Œå†è®¾è®¡å‡ºä¸€ä¸ªexpungedçš„æ„ä¹‰æ˜¯ä»€ä¹ˆ</h2><p>åœ¨ <code>sync.Map</code> çš„å®ç°ä¸­ï¼Œ<code>nil</code> å€¼ç”¨äºè¡¨ç¤ºé”®å·²è¢«åˆ é™¤ã€‚ä½†æ˜¯ï¼Œä¸ºäº†æ›´æœ‰æ•ˆåœ°æ”¯æŒåˆ é™¤æ“ä½œï¼Œå¹¶ä¸”é¿å… <code>nil</code> å€¼å¯èƒ½å¸¦æ¥çš„æ­§ä¹‰ï¼Œ<code>sync.Map</code> å¼•å…¥äº† <code>expunged</code>ï¼ˆåˆ é™¤æ ‡è®°ï¼‰çš„æ¦‚å¿µã€‚</p>
<p><code>expunged</code> çš„æ„ä¹‰æ˜¯åœ¨åˆ é™¤æ“ä½œåï¼Œé”®çš„å¯¹åº”å€¼è¢«æ ‡è®°ä¸º <code>expunged</code>ï¼Œè€Œä¸æ˜¯ç®€å•åœ°è®¾ç½®ä¸º <code>nil</code>ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œ<code>nil</code> å€¼å¯èƒ½æ˜¯é”®æœ¬èº«çš„æœ‰æ•ˆå€¼ï¼Œå› æ­¤æ— æ³•åŒºåˆ†é”®å·²è¢«åˆ é™¤å’Œé”®å¯¹åº”çš„å€¼ä¸º <code>nil</code> ä¸¤ç§æƒ…å†µã€‚é€šè¿‡ä½¿ç”¨ <code>expunged</code> æ ‡è®°ï¼Œ<code>sync.Map</code> å¯ä»¥æ¸…æ¥šåœ°åŒºåˆ†é”®è¢«åˆ é™¤å’Œé”®å¯¹åº”çš„å€¼ä¸º <code>nil</code>ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå½“æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œ<code>sync.Map</code> å°†é”®å¯¹åº”çš„å€¼è®¾ç½®ä¸ºä¸€ä¸ªç‰¹æ®Šçš„å ä½ç¬¦ <code>expunged</code>ï¼Œè¡¨ç¤ºè¯¥é”®å·²è¢«åˆ é™¤ã€‚åœ¨åç»­çš„æ“ä½œä¸­ï¼Œé€šè¿‡æ£€æŸ¥å€¼æ˜¯å¦ç­‰äº <code>expunged</code>ï¼Œå¯ä»¥åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨ã€‚</p>
<p>è¿™ç§è®¾è®¡æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p>
<ol>
<li>é¿å…äº† <code>nil</code> å€¼å¯èƒ½å¸¦æ¥çš„æ­§ä¹‰ï¼š<code>nil</code> å€¼å¯èƒ½æ˜¯é”®çš„æœ‰æ•ˆå€¼ï¼Œå› æ­¤ä¸èƒ½ç®€å•åœ°ä¾é  <code>nil</code> å€¼æ¥åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨æˆ–å·²è¢«åˆ é™¤ã€‚</li>
<li>æé«˜äº†åˆ é™¤æ“ä½œçš„æ•ˆç‡ï¼šç›´æ¥å°†å€¼æ ‡è®°ä¸º <code>expunged</code>ï¼Œè€Œä¸æ˜¯åˆ é™¤é”®å€¼å¯¹ï¼Œå¯ä»¥é¿å…é‡æ–°åˆ†é…å†…å­˜æˆ–è¿›è¡Œå…¶ä»–å¤æ‚çš„æ“ä½œï¼Œä»è€Œæé«˜äº†åˆ é™¤æ“ä½œçš„æ•ˆç‡ã€‚</li>
<li>ä¿æŒäº†å¹¶å‘å®‰å…¨æ€§ï¼šé€šè¿‡å°†é”®çš„å¯¹åº”å€¼è®¾ç½®ä¸º <code>expunged</code>ï¼Œ<code>sync.Map</code> åœ¨å¹¶å‘ç¯å¢ƒä¸­ä»ç„¶èƒ½å¤Ÿä¿æŒæ­£ç¡®çš„çŠ¶æ€å’Œæ“ä½œä¸€è‡´æ€§ã€‚</li>
</ol>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://cloud.tencent.com/developer/article/2022098" target="_blank" rel="noopener noreferrer">ä¸å¾—ä¸çŸ¥é“çš„Golangä¹‹sync.Mapè§£è¯»ï¼</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzUxMDI4MDc1NA==&amp;mid=2247489164&amp;idx=1&amp;sn=e56e5c9836cda40f3c95a39e2ba57dde" target="_blank" rel="noopener noreferrer">ä¸€å£æ°”ææ‡‚ Go sync.map æ‰€æœ‰çŸ¥è¯†ç‚¹</a></li>
<li><a href="https://colobu.com/2017/07/11/dive-into-sync-Map/" target="_blank" rel="noopener noreferrer">Go 1.9 sync.Mapæ­ç§˜</a></li>
<li><a href="https://qcrao.com/post/dive-into-go-sync-map/" target="_blank" rel="noopener noreferrer">æ·±åº¦è§£å¯† Go è¯­è¨€ä¹‹ sync.map</a></li>
</ul>
]]></description>
</item><item>
    <title>é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›</title>
    <link>https://www.xiaobinqt.cn/highly-concurrent-architecture-evolution/</link>
    <pubDate>Mon, 29 Aug 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/highly-concurrent-architecture-evolution/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/89de4f7569e845ad91eab0a8857d5afb.png" referrerpolicy="no-referrer">
            </div><!-- authorï¼š xiaobinqt -->
<!-- emailï¼š xiaobinqt@163.com -->
<!-- https://xiaobinqt.github.io -->
<!-- https://www.xiaobinqt.cn -->
<blockquote>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="https://segmentfault.com/a/1190000018626163" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000018626163</a></p>
</blockquote>
<h2 id="0-ç›®å½•å’Œè¯´æ˜" class="headerLink">
    <a href="#0-%e7%9b%ae%e5%bd%95%e5%92%8c%e8%af%b4%e6%98%8e" class="header-mark"></a>0. ç›®å½•å’Œè¯´æ˜</h2><p>æ–‡ç« åœ¨ä»‹ç»ä¸€äº›åŸºæœ¬æ¦‚å¿µåï¼ŒæŒ‰ç…§ä»¥ä¸‹è¿‡ç¨‹é˜è¿°äº†æ•´ä¸ªæ¶æ„çš„æ¼”è¿›è¿‡ç¨‹ï¼š</p>
<ul>
<li>
<p>å•æœºæ¶æ„</p>
</li>
<li>
<p>ç¬¬ä¸€æ¬¡æ¼”è¿›ï¼šTomcat ä¸æ•°æ®åº“åˆ†å¼€éƒ¨ç½²</p>
</li>
<li>
<p>ç¬¬äºŒæ¬¡æ¼”è¿›ï¼šå¼•å…¥æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜</p>
</li>
<li>
<p>ç¬¬ä¸‰æ¬¡æ¼”è¿›ï¼šå¼•å…¥åå‘ä»£ç†å®ç°è´Ÿè½½å‡è¡¡</p>
</li>
<li>
<p>ç¬¬å››æ¬¡æ¼”è¿›ï¼šæ•°æ®åº“è¯»å†™åˆ†ç¦»</p>
</li>
<li>
<p>ç¬¬äº”æ¬¡æ¼”è¿›ï¼šæ•°æ®åº“æŒ‰ä¸šåŠ¡åˆ†åº“</p>
</li>
<li>
<p>ç¬¬å…­æ¬¡æ¼”è¿›ï¼šæŠŠå¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨</p>
</li>
<li>
<p>ç¬¬ä¸ƒæ¬¡æ¼”è¿›ï¼šä½¿ç”¨ LVS æˆ– F5 æ¥ä½¿å¤šä¸ª Nginx è´Ÿè½½å‡è¡¡</p>
</li>
<li>
<p>ç¬¬å…«æ¬¡æ¼”è¿›ï¼šé€šè¿‡ DNS è½®è¯¢å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡</p>
</li>
<li>
<p>ç¬¬ä¹æ¬¡æ¼”è¿›ï¼šå¼•å…¥ NoSQL æ•°æ®åº“å’Œæœç´¢å¼•æ“ç­‰æŠ€æœ¯</p>
</li>
<li>
<p>ç¬¬åæ¬¡æ¼”è¿›ï¼šå¤§åº”ç”¨æ‹†åˆ†ä¸ºå°åº”ç”¨</p>
</li>
<li>
<p>ç¬¬åä¸€æ¬¡æ¼”è¿›ï¼šå¤ç”¨çš„åŠŸèƒ½æŠ½ç¦»æˆå¾®æœåŠ¡</p>
</li>
<li>
<p>ç¬¬åäºŒæ¬¡æ¼”è¿›ï¼šå¼•å…¥ä¼ä¸šæœåŠ¡æ€»çº¿ ESB å±è”½æœåŠ¡æ¥å£çš„è®¿é—®å·®å¼‚</p>
</li>
<li>
<p>ç¬¬åä¸‰æ¬¡æ¼”è¿›ï¼šå¼•å…¥å®¹å™¨åŒ–æŠ€æœ¯å®ç°è¿è¡Œç¯å¢ƒéš”ç¦»ä¸åŠ¨æ€æœåŠ¡ç®¡ç†</p>
</li>
<li>
<p>ç¬¬åå››æ¬¡æ¼”è¿›ï¼šä»¥äº‘å¹³å°æ‰¿è½½ç³»ç»Ÿ</p>
</li>
</ul>
<h2 id="1-æ¦‚è¿°" class="headerLink">
    <a href="#1-%e6%a6%82%e8%bf%b0" class="header-mark"></a>1. æ¦‚è¿°</h2><p>æœ¬æ–‡ä»¥æ·˜å®ä½œä¸ºä¾‹å­ï¼Œä»‹ç»ä»ä¸€ç™¾ä¸ªåˆ°åƒä¸‡çº§å¹¶å‘æƒ…å†µä¸‹æœåŠ¡ç«¯çš„æ¶æ„çš„æ¼”è¿›è¿‡ç¨‹ï¼ŒåŒæ—¶åˆ—ä¸¾å‡ºæ¯ä¸ªæ¼”è¿›é˜¶æ®µä¼šé‡åˆ°çš„ç›¸å…³æŠ€æœ¯ï¼Œè®©å¤§å®¶å¯¹æ¶æ„çš„æ¼”è¿›æœ‰ä¸€ä¸ªæ•´ä½“çš„è®¤çŸ¥ï¼Œæ–‡ç« æœ€åæ±‡æ€»äº†ä¸€äº›æ¶æ„è®¾è®¡çš„åŸåˆ™ã€‚</p>
<blockquote>
<p>ç‰¹åˆ«è¯´æ˜ï¼šæœ¬æ–‡ä»¥æ·˜å®ä¸ºä¾‹ä»…ä»…æ˜¯ä¸ºäº†ä¾¿äºè¯´æ˜æ¼”è¿›è¿‡ç¨‹å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¹¶éæ˜¯æ·˜å®çœŸæ­£çš„æŠ€æœ¯æ¼”è¿›è·¯å¾„</p>
</blockquote>
<h2 id="2-åŸºæœ¬æ¦‚å¿µ" class="headerLink">
    <a href="#2-%e5%9f%ba%e6%9c%ac%e6%a6%82%e5%bf%b5" class="header-mark"></a>2. åŸºæœ¬æ¦‚å¿µ</h2><p>åœ¨ä»‹ç»æ¶æ„ä¹‹å‰ï¼Œä¸ºäº†é¿å…éƒ¨åˆ†è¯»è€…å¯¹æ¶æ„è®¾è®¡ä¸­çš„ä¸€äº›æ¦‚å¿µä¸äº†è§£ï¼Œä¸‹é¢å¯¹å‡ ä¸ªæœ€åŸºç¡€çš„æ¦‚å¿µè¿›è¡Œä»‹ç»ã€‚</p>
<ul>
<li><strong>åˆ†å¸ƒå¼</strong></li>
</ul>
<p>ç³»ç»Ÿä¸­çš„å¤šä¸ªæ¨¡å—åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œå³å¯ç§°ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚ Tomcat å’Œæ•°æ®åº“åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œæˆ–ä¸¤ä¸ªç›¸åŒåŠŸèƒ½çš„ Tomcat åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨ä¸Š</p>
<ul>
<li><strong>é«˜å¯ç”¨</strong></li>
</ul>
<p>ç³»ç»Ÿä¸­éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹èƒ½å¤Ÿæ¥æ›¿å®ƒç»§ç»­æä¾›æœåŠ¡ï¼Œåˆ™å¯è®¤ä¸ºç³»ç»Ÿå…·æœ‰é«˜å¯ç”¨æ€§</p>
<ul>
<li><strong>é›†ç¾¤</strong></li>
</ul>
<p>ä¸€ä¸ªç‰¹å®šé¢†åŸŸçš„è½¯ä»¶éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šå¹¶<strong>ä½œä¸ºä¸€ä¸ªæ•´ä½“</strong>æä¾›ä¸€ç±»æœåŠ¡ï¼Œè¿™ä¸ªæ•´ä½“ç§°ä¸ºé›†ç¾¤ã€‚å¦‚ Zookeeper ä¸­çš„ Master å’Œ Slave åˆ†åˆ«éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå…±åŒç»„æˆä¸€ä¸ªæ•´ä½“æä¾›é›†ä¸­é…ç½®æœåŠ¡ã€‚åœ¨å¸¸è§çš„é›†ç¾¤ä¸­ï¼Œå®¢æˆ·ç«¯å¾€å¾€èƒ½å¤Ÿè¿æ¥ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹è·å¾—æœåŠ¡ï¼Œå¹¶ä¸”å½“é›†ç¾¤ä¸­ä¸€ä¸ªèŠ‚ç‚¹æ‰çº¿æ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹å¾€å¾€èƒ½å¤Ÿè‡ªåŠ¨çš„æ¥æ›¿å®ƒç»§ç»­æä¾›æœåŠ¡ï¼Œè¿™æ—¶å€™è¯´æ˜é›†ç¾¤å…·æœ‰é«˜å¯ç”¨æ€§</p>
<ul>
<li><strong>è´Ÿè½½å‡è¡¡</strong></li>
</ul>
<p>è¯·æ±‚å‘é€åˆ°ç³»ç»Ÿæ—¶ï¼Œé€šè¿‡æŸäº›æ–¹å¼æŠŠè¯·æ±‚å‡åŒ€åˆ†å‘åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œä½¿ç³»ç»Ÿä¸­æ¯ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿå‡åŒ€çš„å¤„ç†è¯·æ±‚è´Ÿè½½ï¼Œåˆ™å¯è®¤ä¸ºç³»ç»Ÿæ˜¯è´Ÿè½½å‡è¡¡çš„</p>
<ul>
<li><strong>æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</strong></li>
</ul>
<p>ç³»ç»Ÿå†…éƒ¨è¦è®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶ï¼Œç»Ÿä¸€é€šè¿‡ä¸€ä¸ªä»£ç†æœåŠ¡å™¨æŠŠè¯·æ±‚è½¬å‘å‡ºå»ï¼Œåœ¨å¤–éƒ¨ç½‘ç»œçœ‹æ¥å°±æ˜¯ä»£ç†æœåŠ¡å™¨å‘èµ·çš„è®¿é—®ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å®ç°çš„æ˜¯æ­£å‘ä»£ç†ï¼›å½“å¤–éƒ¨è¯·æ±‚è¿›å…¥ç³»ç»Ÿæ—¶ï¼Œä»£ç†æœåŠ¡å™¨æŠŠè¯¥è¯·æ±‚è½¬å‘åˆ°ç³»ç»Ÿä¸­çš„æŸå°æœåŠ¡å™¨ä¸Šï¼Œå¯¹å¤–éƒ¨è¯·æ±‚æ¥è¯´ï¼Œä¸ä¹‹äº¤äº’çš„åªæœ‰ä»£ç†æœåŠ¡å™¨ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å®ç°çš„æ˜¯åå‘ä»£ç†ã€‚ç®€å•æ¥è¯´ï¼Œ<strong>æ­£å‘ä»£ç†æ˜¯ä»£ç†æœåŠ¡å™¨ä»£æ›¿ç³»ç»Ÿå†…éƒ¨æ¥è®¿é—®å¤–éƒ¨ç½‘ç»œçš„è¿‡ç¨‹ï¼Œåå‘ä»£ç†æ˜¯å¤–éƒ¨è¯·æ±‚è®¿é—®ç³»ç»Ÿæ—¶é€šè¿‡ä»£ç†æœåŠ¡å™¨è½¬å‘åˆ°å†…éƒ¨æœåŠ¡å™¨çš„è¿‡ç¨‹</strong>ã€‚</p>
<h2 id="3-æ¶æ„æ¼”è¿›" class="headerLink">
    <a href="#3-%e6%9e%b6%e6%9e%84%e6%bc%94%e8%bf%9b" class="header-mark"></a>3. æ¶æ„æ¼”è¿›</h2><h3 id="31-å•æœºæ¶æ„" class="headerLink">
    <a href="#31-%e5%8d%95%e6%9c%ba%e6%9e%b6%e6%9e%84" class="header-mark"></a>3.1 å•æœºæ¶æ„</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/1f117811d1f646bbbb030f52013818ab.png" title="å•æœºæ¶æ„" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/1f117811d1f646bbbb030f52013818ab.png" data-sub-html="<h2>å•æœºæ¶æ„</h2><p>å•æœºæ¶æ„</p>">
        
    </a><figcaption class="image-caption">å•æœºæ¶æ„</figcaption>
    </figure></p>
<p>ä»¥æ·˜å®ä½œä¸ºä¾‹å­ã€‚åœ¨ç½‘ç«™æœ€åˆæ—¶ï¼Œåº”ç”¨æ•°é‡ä¸ç”¨æˆ·æ•°éƒ½è¾ƒå°‘ï¼Œå¯ä»¥æŠŠ Tomcat å’Œæ•°æ®åº“éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚æµè§ˆå™¨å¾€ <code>www.taobao.com</code> å‘èµ·è¯·æ±‚æ—¶ï¼Œé¦–å…ˆç»è¿‡ DNS æœåŠ¡å™¨ï¼ˆåŸŸåç³»ç»Ÿï¼‰æŠŠåŸŸåè½¬æ¢ä¸ºå®é™… IP åœ°å€
<code>10.102.4.1</code>ï¼Œæµè§ˆå™¨è½¬è€Œè®¿é—®è¯¥ IP å¯¹åº”çš„ Tomcatã€‚</p>
<blockquote>
<p>éšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼ŒTomcat å’Œæ•°æ®åº“ä¹‹é—´ç«äº‰èµ„æºï¼Œå•æœºæ€§èƒ½ä¸è¶³ä»¥æ”¯æ’‘ä¸šåŠ¡</p>
</blockquote>
<h3 id="32-ç¬¬ä¸€æ¬¡æ¼”è¿›tomcat-ä¸æ•°æ®åº“åˆ†å¼€éƒ¨ç½²" class="headerLink">
    <a href="#32-%e7%ac%ac%e4%b8%80%e6%ac%a1%e6%bc%94%e8%bf%9btomcat-%e4%b8%8e%e6%95%b0%e6%8d%ae%e5%ba%93%e5%88%86%e5%bc%80%e9%83%a8%e7%bd%b2" class="header-mark"></a>3.2 ç¬¬ä¸€æ¬¡æ¼”è¿›ï¼šTomcat ä¸æ•°æ®åº“åˆ†å¼€éƒ¨ç½²</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/51b57795a18a487daae0807e4e005d73.png" title="ç¬¬ä¸€æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/51b57795a18a487daae0807e4e005d73.png" data-sub-html="<h2>ç¬¬ä¸€æ¬¡æ¼”è¿›</h2><p>ç¬¬ä¸€æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬ä¸€æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>Tomcat å’Œæ•°æ®åº“åˆ†åˆ«ç‹¬å æœåŠ¡å™¨èµ„æºï¼Œæ˜¾è‘—æé«˜ä¸¤è€…å„è‡ªæ€§èƒ½ã€‚</p>
<blockquote>
<p>éšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå¹¶å‘è¯»å†™æ•°æ®åº“æˆä¸ºç“¶é¢ˆ</p>
</blockquote>
<h3 id="33-ç¬¬äºŒæ¬¡æ¼”è¿›å¼•å…¥æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜" class="headerLink">
    <a href="#33-%e7%ac%ac%e4%ba%8c%e6%ac%a1%e6%bc%94%e8%bf%9b%e5%bc%95%e5%85%a5%e6%9c%ac%e5%9c%b0%e7%bc%93%e5%ad%98%e5%92%8c%e5%88%86%e5%b8%83%e5%bc%8f%e7%bc%93%e5%ad%98" class="header-mark"></a>3.3 ç¬¬äºŒæ¬¡æ¼”è¿›ï¼šå¼•å…¥æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/08062e488e3a42c3952d2e083e117f28.png" title="ç¬¬äºŒæ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/08062e488e3a42c3952d2e083e117f28.png" data-sub-html="<h2>ç¬¬äºŒæ¬¡æ¼”è¿›</h2><p>ç¬¬äºŒæ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬äºŒæ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>åœ¨ Tomcat åŒæœåŠ¡å™¨ä¸Šæˆ–åŒ JVM ä¸­å¢åŠ æœ¬åœ°ç¼“å­˜ï¼Œå¹¶åœ¨å¤–éƒ¨å¢åŠ åˆ†å¸ƒå¼ç¼“å­˜ï¼Œç¼“å­˜çƒ­é—¨å•†å“ä¿¡æ¯æˆ–çƒ­é—¨å•†å“çš„ html é¡µé¢ç­‰ã€‚é€šè¿‡ç¼“å­˜èƒ½æŠŠç»å¤§å¤šæ•°è¯·æ±‚åœ¨è¯»å†™æ•°æ®åº“å‰æ‹¦æˆªæ‰ï¼Œå¤§å¤§é™ä½æ•°æ®åº“å‹åŠ›ã€‚å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šä½¿ç”¨ memcached ä½œä¸ºæœ¬åœ°ç¼“å­˜ï¼Œä½¿ç”¨ Redis ä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜ï¼Œè¿˜ä¼šæ¶‰åŠç¼“å­˜ä¸€è‡´æ€§ã€ç¼“å­˜ç©¿é€/å‡»ç©¿ã€ç¼“å­˜é›ªå´©ã€çƒ­ç‚¹æ•°æ®é›†ä¸­å¤±æ•ˆç­‰é—®é¢˜ã€‚</p>
<blockquote>
<p>ç¼“å­˜æŠ—ä½äº†å¤§éƒ¨åˆ†çš„è®¿é—®è¯·æ±‚ï¼Œéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå¹¶å‘å‹åŠ›ä¸»è¦è½åœ¨å•æœºçš„ Tomcat ä¸Šï¼Œå“åº”é€æ¸å˜æ…¢</p>
</blockquote>
<h3 id="34-ç¬¬ä¸‰æ¬¡æ¼”è¿›å¼•å…¥åå‘ä»£ç†å®ç°è´Ÿè½½å‡è¡¡" class="headerLink">
    <a href="#34-%e7%ac%ac%e4%b8%89%e6%ac%a1%e6%bc%94%e8%bf%9b%e5%bc%95%e5%85%a5%e5%8f%8d%e5%90%91%e4%bb%a3%e7%90%86%e5%ae%9e%e7%8e%b0%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1" class="header-mark"></a>3.4 ç¬¬ä¸‰æ¬¡æ¼”è¿›ï¼šå¼•å…¥åå‘ä»£ç†å®ç°è´Ÿè½½å‡è¡¡</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/447531a9c371496e9263e32a312b192c.png" title="ç¬¬ä¸‰æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/447531a9c371496e9263e32a312b192c.png" data-sub-html="<h2>ç¬¬ä¸‰æ¬¡æ¼”è¿›</h2><p>ç¬¬ä¸‰æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬ä¸‰æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>åœ¨å¤šå°æœåŠ¡å™¨ä¸Šåˆ†åˆ«éƒ¨ç½² Tomcatï¼Œä½¿ç”¨åå‘ä»£ç†è½¯ä»¶ï¼ˆNginxï¼‰æŠŠè¯·æ±‚å‡åŒ€åˆ†å‘åˆ°æ¯ä¸ª Tomcat ä¸­ã€‚æ­¤å¤„å‡è®¾ Tomcat æœ€å¤šæ”¯æŒ 100 ä¸ªå¹¶å‘ï¼ŒNginx æœ€å¤šæ”¯æŒ 50000 ä¸ªå¹¶å‘ï¼Œé‚£ä¹ˆç†è®ºä¸Š Nginx æŠŠè¯·æ±‚åˆ†å‘åˆ° 500 ä¸ª Tomcat ä¸Šï¼Œå°±èƒ½æŠ—ä½ 50000 ä¸ªå¹¶å‘ã€‚å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šNginxã€HAProxyï¼Œä¸¤è€…éƒ½æ˜¯å·¥ä½œåœ¨ç½‘ç»œç¬¬ä¸ƒå±‚çš„åå‘ä»£ç†è½¯ä»¶ï¼Œä¸»è¦æ”¯æŒ http åè®®ï¼Œè¿˜ä¼šæ¶‰åŠ session å…±äº«ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½çš„é—®é¢˜ã€‚</p>
<blockquote>
<p>åå‘ä»£ç†ä½¿åº”ç”¨æœåŠ¡å™¨å¯æ”¯æŒçš„å¹¶å‘é‡å¤§å¤§å¢åŠ ï¼Œä½†å¹¶å‘é‡çš„å¢é•¿ä¹Ÿæ„å‘³ç€æ›´å¤šè¯·æ±‚ç©¿é€åˆ°æ•°æ®åº“ï¼Œå•æœºçš„æ•°æ®åº“æœ€ç»ˆæˆä¸ºç“¶é¢ˆ</p>
</blockquote>
<h3 id="35-ç¬¬å››æ¬¡æ¼”è¿›æ•°æ®åº“è¯»å†™åˆ†ç¦»" class="headerLink">
    <a href="#35-%e7%ac%ac%e5%9b%9b%e6%ac%a1%e6%bc%94%e8%bf%9b%e6%95%b0%e6%8d%ae%e5%ba%93%e8%af%bb%e5%86%99%e5%88%86%e7%a6%bb" class="header-mark"></a>3.5 ç¬¬å››æ¬¡æ¼”è¿›ï¼šæ•°æ®åº“è¯»å†™åˆ†ç¦»</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/53d08f904fa54100bb891bacf5d55eec.png" title="ç¬¬å››æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/53d08f904fa54100bb891bacf5d55eec.png" data-sub-html="<h2>ç¬¬å››æ¬¡æ¼”è¿›</h2><p>ç¬¬å››æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬å››æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>æŠŠæ•°æ®åº“åˆ’åˆ†ä¸ºè¯»åº“å’Œå†™åº“ï¼Œè¯»åº“å¯ä»¥æœ‰å¤šä¸ªï¼Œé€šè¿‡åŒæ­¥æœºåˆ¶æŠŠå†™åº“çš„æ•°æ®åŒæ­¥åˆ°è¯»åº“ï¼Œå¯¹äºéœ€è¦æŸ¥è¯¢æœ€æ–°å†™å…¥æ•°æ®åœºæ™¯ï¼Œå¯é€šè¿‡åœ¨ç¼“å­˜ä¸­å¤šå†™ä¸€ä»½ï¼Œé€šè¿‡ç¼“å­˜è·å¾—æœ€æ–°æ•°æ®ã€‚å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šMycatï¼Œå®ƒæ˜¯æ•°æ®åº“ä¸­é—´ä»¶ï¼Œå¯é€šè¿‡å®ƒæ¥ç»„ç»‡æ•°æ®åº“çš„åˆ†ç¦»è¯»å†™å’Œåˆ†åº“åˆ†è¡¨ï¼Œå®¢æˆ·ç«¯é€šè¿‡å®ƒæ¥è®¿é—®ä¸‹å±‚æ•°æ®åº“ï¼Œè¿˜ä¼šæ¶‰åŠæ•°æ®åŒæ­¥ï¼Œæ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p>
<blockquote>
<p>ä¸šåŠ¡é€æ¸å˜å¤šï¼Œä¸åŒä¸šåŠ¡ä¹‹é—´çš„è®¿é—®é‡å·®è·è¾ƒå¤§ï¼Œä¸åŒä¸šåŠ¡ç›´æ¥ç«äº‰æ•°æ®åº“ï¼Œç›¸äº’å½±å“æ€§èƒ½</p>
</blockquote>
<h3 id="36-ç¬¬äº”æ¬¡æ¼”è¿›æ•°æ®åº“æŒ‰ä¸šåŠ¡åˆ†åº“" class="headerLink">
    <a href="#36-%e7%ac%ac%e4%ba%94%e6%ac%a1%e6%bc%94%e8%bf%9b%e6%95%b0%e6%8d%ae%e5%ba%93%e6%8c%89%e4%b8%9a%e5%8a%a1%e5%88%86%e5%ba%93" class="header-mark"></a>3.6 ç¬¬äº”æ¬¡æ¼”è¿›ï¼šæ•°æ®åº“æŒ‰ä¸šåŠ¡åˆ†åº“</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/effe7db154244811af27331d0b1a4d8c.png" title="ç¬¬äº”æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/effe7db154244811af27331d0b1a4d8c.png" data-sub-html="<h2>ç¬¬äº”æ¬¡æ¼”è¿›</h2><p>ç¬¬äº”æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬äº”æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>æŠŠä¸åŒä¸šåŠ¡çš„æ•°æ®ä¿å­˜åˆ°ä¸åŒçš„æ•°æ®åº“ä¸­ï¼Œä½¿ä¸šåŠ¡ä¹‹é—´çš„èµ„æºç«äº‰é™ä½ï¼Œå¯¹äºè®¿é—®é‡å¤§çš„ä¸šåŠ¡ï¼Œå¯ä»¥éƒ¨ç½²æ›´å¤šçš„æœåŠ¡å™¨æ¥æ”¯æ’‘ã€‚è¿™æ ·åŒæ—¶å¯¼è‡´è·¨ä¸šåŠ¡çš„è¡¨æ— æ³•ç›´æ¥åšå…³è”åˆ†æï¼Œéœ€è¦é€šè¿‡å…¶ä»–é€”å¾„æ¥è§£å†³ï¼Œä½†è¿™ä¸æ˜¯æœ¬æ–‡è®¨è®ºçš„é‡ç‚¹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œæœç´¢è§£å†³æ–¹æ¡ˆã€‚</p>
<blockquote>
<p>éšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå•æœºçš„å†™åº“ä¼šé€æ¸ä¼šè¾¾åˆ°æ€§èƒ½ç“¶é¢ˆ</p>
</blockquote>
<h3 id="37-ç¬¬å…­æ¬¡æ¼”è¿›æŠŠå¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨" class="headerLink">
    <a href="#37-%e7%ac%ac%e5%85%ad%e6%ac%a1%e6%bc%94%e8%bf%9b%e6%8a%8a%e5%a4%a7%e8%a1%a8%e6%8b%86%e5%88%86%e4%b8%ba%e5%b0%8f%e8%a1%a8" class="header-mark"></a>3.7 ç¬¬å…­æ¬¡æ¼”è¿›ï¼šæŠŠå¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/2fad6020cd9b4b97baebc993157067dc.png" title="ç¬¬å…­æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/2fad6020cd9b4b97baebc993157067dc.png" data-sub-html="<h2>ç¬¬å…­æ¬¡æ¼”è¿›</h2><p>ç¬¬å…­æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬å…­æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>æ¯”å¦‚é’ˆå¯¹è¯„è®ºæ•°æ®ï¼Œå¯æŒ‰ç…§å•†å“ ID è¿›è¡Œ hashï¼Œè·¯ç”±åˆ°å¯¹åº”çš„è¡¨ä¸­å­˜å‚¨ï¼›é’ˆå¯¹æ”¯ä»˜è®°å½•ï¼Œå¯æŒ‰ç…§å°æ—¶åˆ›å»ºè¡¨ï¼Œæ¯ä¸ªå°æ—¶è¡¨ç»§ç»­æ‹†åˆ†ä¸ºå°è¡¨ï¼Œä½¿ç”¨ç”¨æˆ· ID æˆ–è®°å½•ç¼–å·æ¥è·¯ç”±æ•°æ®ã€‚åªè¦å®æ—¶æ“ä½œçš„è¡¨æ•°æ®é‡è¶³å¤Ÿå°ï¼Œè¯·æ±‚èƒ½å¤Ÿè¶³å¤Ÿå‡åŒ€çš„åˆ†å‘åˆ°å¤šå°æœåŠ¡å™¨ä¸Šçš„å°è¡¨ï¼Œé‚£æ•°æ®åº“å°±èƒ½é€šè¿‡æ°´å¹³æ‰©å±•çš„æ–¹å¼æ¥æé«˜æ€§èƒ½ã€‚å…¶ä¸­å‰é¢æåˆ°çš„ Mycat ä¹Ÿæ”¯æŒåœ¨å¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨æƒ…å†µä¸‹çš„è®¿é—®æ§åˆ¶ã€‚</p>
<p>è¿™ç§åšæ³•æ˜¾è‘—çš„å¢åŠ äº†æ•°æ®åº“è¿ç»´çš„éš¾åº¦ï¼Œå¯¹ DBA çš„è¦æ±‚è¾ƒé«˜ã€‚æ•°æ®åº“è®¾è®¡åˆ°è¿™ç§ç»“æ„æ—¶ï¼Œå·²ç»å¯ä»¥ç§°ä¸ºåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œä½†æ˜¯è¿™åªæ˜¯ä¸€ä¸ªé€»è¾‘çš„æ•°æ®åº“æ•´ä½“ï¼Œæ•°æ®åº“é‡Œä¸åŒçš„ç»„æˆéƒ¨åˆ†æ˜¯ç”±ä¸åŒçš„ç»„ä»¶å•ç‹¬æ¥å®ç°çš„ï¼Œå¦‚åˆ†åº“åˆ†è¡¨çš„ç®¡ç†å’Œè¯·æ±‚åˆ†å‘ï¼Œç”± Mycat å®ç°ï¼ŒSQL çš„è§£æç”±å•æœºçš„æ•°æ®åº“å®ç°ï¼Œè¯»å†™åˆ†ç¦»å¯èƒ½ç”±ç½‘å…³å’Œæ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°ï¼ŒæŸ¥è¯¢ç»“æœçš„æ±‡æ€»å¯èƒ½ç”±æ•°æ®åº“æ¥å£å±‚æ¥å®ç°ç­‰ç­‰ï¼Œè¿™ç§æ¶æ„å…¶å®æ˜¯ <strong><ruby>MPP<rt>Massively Parallel Processing</rt></ruby></strong>
ï¼ˆå¤§è§„æ¨¡å¹¶è¡Œå¤„ç†ï¼‰æ¶æ„çš„ä¸€ç±»å®ç°ã€‚</p>
<p>ç›®å‰å¼€æºå’Œå•†ç”¨éƒ½å·²ç»æœ‰ä¸å°‘ MPP æ•°æ®åº“ï¼Œå¼€æºä¸­æ¯”è¾ƒæµè¡Œçš„æœ‰ Greenplumã€TiDBã€Postgresql XCã€HAWQ ç­‰ï¼Œå•†ç”¨çš„å¦‚å—å¤§é€šç”¨çš„ GBaseã€ç¿å¸†ç§‘æŠ€çš„é›ªçƒ DBã€åä¸ºçš„ LibrA ç­‰ç­‰ï¼Œä¸åŒçš„ MPP æ•°æ®åº“çš„ä¾§é‡ç‚¹ä¹Ÿä¸ä¸€æ ·ï¼Œå¦‚ TiDB æ›´ä¾§é‡äºåˆ†å¸ƒå¼ OLTP åœºæ™¯ï¼ŒGreenplum æ›´ä¾§é‡äºåˆ†å¸ƒå¼ OLAP åœºæ™¯ï¼Œè¿™äº› MPP æ•°æ®åº“åŸºæœ¬éƒ½æä¾›äº†ç±»ä¼¼ Postgresqlã€Oracleã€MySQL é‚£æ ·çš„ SQL æ ‡å‡†æ”¯æŒèƒ½åŠ›ï¼Œèƒ½æŠŠä¸€ä¸ªæŸ¥è¯¢è§£æä¸ºåˆ†å¸ƒå¼çš„æ‰§è¡Œè®¡åˆ’åˆ†å‘åˆ°æ¯å°æœºå™¨ä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œæœ€ç»ˆç”±æ•°æ®åº“æœ¬èº«æ±‡æ€»æ•°æ®è¿›è¡Œè¿”å›ï¼Œä¹Ÿæä¾›äº†è¯¸å¦‚æƒé™ç®¡ç†ã€åˆ†åº“åˆ†è¡¨ã€äº‹åŠ¡ã€æ•°æ®å‰¯æœ¬ç­‰èƒ½åŠ›ï¼Œå¹¶ä¸”å¤§å¤šèƒ½å¤Ÿæ”¯æŒ 100 ä¸ªèŠ‚ç‚¹ä»¥ä¸Šçš„é›†ç¾¤ï¼Œå¤§å¤§é™ä½äº†æ•°æ®åº“è¿ç»´çš„æˆæœ¬ï¼Œå¹¶ä¸”ä½¿æ•°æ®åº“ä¹Ÿèƒ½å¤Ÿå®ç°æ°´å¹³æ‰©å±•ã€‚</p>
<blockquote>
<p>æ•°æ®åº“å’Œ Tomcat éƒ½èƒ½å¤Ÿæ°´å¹³æ‰©å±•ï¼Œå¯æ”¯æ’‘çš„å¹¶å‘å¤§å¹…æé«˜ï¼Œéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œæœ€ç»ˆå•æœºçš„ Nginx ä¼šæˆä¸ºç“¶é¢ˆ</p>
</blockquote>
<h3 id="38-ç¬¬ä¸ƒæ¬¡æ¼”è¿›ä½¿ç”¨-lvs-æˆ–-f5-æ¥ä½¿å¤šä¸ª-nginx-è´Ÿè½½å‡è¡¡" class="headerLink">
    <a href="#38-%e7%ac%ac%e4%b8%83%e6%ac%a1%e6%bc%94%e8%bf%9b%e4%bd%bf%e7%94%a8-lvs-%e6%88%96-f5-%e6%9d%a5%e4%bd%bf%e5%a4%9a%e4%b8%aa-nginx-%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1" class="header-mark"></a>3.8 ç¬¬ä¸ƒæ¬¡æ¼”è¿›ï¼šä½¿ç”¨ LVS æˆ– F5 æ¥ä½¿å¤šä¸ª Nginx è´Ÿè½½å‡è¡¡</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/1b37027ad49a4aaeb4485885ad9a696a.png" title="ç¬¬ä¸ƒæ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/1b37027ad49a4aaeb4485885ad9a696a.png" data-sub-html="<h2>ç¬¬ä¸ƒæ¬¡æ¼”è¿›</h2><p>ç¬¬ä¸ƒæ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬ä¸ƒæ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>ç”±äºç“¶é¢ˆåœ¨ Nginxï¼Œå› æ­¤æ— æ³•é€šè¿‡ä¸¤å±‚çš„ Nginx æ¥å®ç°å¤šä¸ª Nginx çš„è´Ÿè½½å‡è¡¡ã€‚å›¾ä¸­çš„ <strong><ruby>LVS<rt>Linux Virtual Server</rt></ruby></strong> å’Œ F5 æ˜¯å·¥ä½œåœ¨ç½‘ç»œç¬¬å››å±‚çš„è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­ LVS æ˜¯è½¯ä»¶ï¼Œè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿå†…æ ¸æ€ï¼Œå¯å¯¹ TCP è¯·æ±‚æˆ–æ›´é«˜å±‚çº§çš„ç½‘ç»œåè®®è¿›è¡Œè½¬å‘ï¼Œå› æ­¤æ”¯æŒçš„åè®®æ›´ä¸°å¯Œï¼Œå¹¶ä¸”æ€§èƒ½ä¹Ÿè¿œé«˜äº Nginxï¼Œå¯å‡è®¾å•æœºçš„ LVS å¯æ”¯æŒå‡ åä¸‡ä¸ªå¹¶å‘çš„è¯·æ±‚è½¬å‘ï¼›F5 æ˜¯ä¸€ç§è´Ÿè½½å‡è¡¡ç¡¬ä»¶ï¼Œä¸ LVS æä¾›çš„èƒ½åŠ›ç±»ä¼¼ï¼Œæ€§èƒ½æ¯” LVS æ›´é«˜ï¼Œä½†ä»·æ ¼æ˜‚è´µã€‚</p>
<p>ç”±äº LVS æ˜¯å•æœºç‰ˆçš„è½¯ä»¶ï¼Œè‹¥ LVS æ‰€åœ¨æœåŠ¡å™¨å®•æœºåˆ™ä¼šå¯¼è‡´æ•´ä¸ªåç«¯ç³»ç»Ÿéƒ½æ— æ³•è®¿é—®ï¼Œå› æ­¤éœ€è¦æœ‰å¤‡ç”¨èŠ‚ç‚¹ã€‚å¯ä½¿ç”¨ keepalived è½¯ä»¶æ¨¡æ‹Ÿå‡ºè™šæ‹Ÿ IPï¼Œç„¶åæŠŠè™šæ‹Ÿ IP ç»‘å®šåˆ°å¤šå° LVS æœåŠ¡å™¨ä¸Šï¼Œæµè§ˆå™¨è®¿é—®è™šæ‹Ÿ IP æ—¶ï¼Œä¼šè¢«è·¯ç”±å™¨é‡å®šå‘åˆ°çœŸå®çš„ LVS æœåŠ¡å™¨ï¼Œå½“ä¸» LVS æœåŠ¡å™¨å®•æœºæ—¶ï¼Œkeepalived è½¯ä»¶ä¼šè‡ªåŠ¨æ›´æ–°è·¯ç”±å™¨ä¸­çš„è·¯ç”±è¡¨ï¼ŒæŠŠè™šæ‹Ÿ IP é‡å®šå‘åˆ°å¦å¤–ä¸€å°æ­£å¸¸çš„ LVS æœåŠ¡å™¨ï¼Œä»è€Œè¾¾åˆ° LVS æœåŠ¡å™¨é«˜å¯ç”¨çš„æ•ˆæœã€‚</p>
<p>æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šå›¾ä¸­ä» Nginx å±‚åˆ° Tomcat å±‚è¿™æ ·ç”»å¹¶ä¸ä»£è¡¨å…¨éƒ¨ Nginx éƒ½è½¬å‘è¯·æ±‚åˆ°å…¨éƒ¨çš„ Tomcatï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå¯èƒ½ä¼šæ˜¯å‡ ä¸ª Nginx ä¸‹é¢æ¥ä¸€éƒ¨åˆ†çš„ Tomcatï¼Œè¿™äº› Nginx ä¹‹é—´é€šè¿‡ keepalived å®ç°é«˜å¯ç”¨ï¼Œå…¶ä»–çš„ Nginx æ¥å¦å¤–çš„ Tomcatï¼Œè¿™æ ·å¯æ¥å…¥çš„ Tomcat æ•°é‡å°±èƒ½æˆå€çš„å¢åŠ ã€‚</p>
<blockquote>
<p>ç”±äº LVS ä¹Ÿæ˜¯å•æœºçš„ï¼Œéšç€å¹¶å‘æ•°å¢é•¿åˆ°å‡ åä¸‡æ—¶ï¼ŒLVS æœåŠ¡å™¨æœ€ç»ˆä¼šè¾¾åˆ°ç“¶é¢ˆï¼Œæ­¤æ—¶ç”¨æˆ·æ•°è¾¾åˆ°åƒä¸‡ç”šè‡³ä¸Šäº¿çº§åˆ«ï¼Œç”¨æˆ·åˆ†å¸ƒåœ¨ä¸åŒçš„åœ°åŒºï¼Œä¸æœåŠ¡å™¨æœºæˆ¿è·ç¦»ä¸åŒï¼Œå¯¼è‡´äº†è®¿é—®çš„å»¶è¿Ÿä¼šæ˜æ˜¾ä¸åŒ</p>
</blockquote>
<h3 id="39-ç¬¬å…«æ¬¡æ¼”è¿›é€šè¿‡-dns-è½®è¯¢å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡" class="headerLink">
    <a href="#39-%e7%ac%ac%e5%85%ab%e6%ac%a1%e6%bc%94%e8%bf%9b%e9%80%9a%e8%bf%87-dns-%e8%bd%ae%e8%af%a2%e5%ae%9e%e7%8e%b0%e6%9c%ba%e6%88%bf%e9%97%b4%e7%9a%84%e8%b4%9f%e8%bd%bd%e5%9d%87%e8%a1%a1" class="header-mark"></a>3.9 ç¬¬å…«æ¬¡æ¼”è¿›ï¼šé€šè¿‡ DNS è½®è¯¢å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/460349470a99405eb838823aa29cbe27.png" title="ç¬¬å…«æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/460349470a99405eb838823aa29cbe27.png" data-sub-html="<h2>ç¬¬å…«æ¬¡æ¼”è¿›</h2><p>ç¬¬å…«æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬å…«æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>åœ¨ DNS æœåŠ¡å™¨ä¸­å¯é…ç½®ä¸€ä¸ªåŸŸåå¯¹åº”å¤šä¸ª IP åœ°å€ï¼Œæ¯ä¸ª IP åœ°å€å¯¹åº”åˆ°ä¸åŒçš„æœºæˆ¿é‡Œçš„è™šæ‹Ÿ IPã€‚å½“ç”¨æˆ·è®¿é—® <code>www.taobao.com</code> æ—¶ï¼ŒDNS æœåŠ¡å™¨ä¼šä½¿ç”¨è½®è¯¢ç­–ç•¥æˆ–å…¶ä»–ç­–ç•¥ï¼Œæ¥é€‰æ‹©æŸä¸ª IP ä¾›ç”¨æˆ·è®¿é—®ã€‚æ­¤æ–¹å¼èƒ½å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡ï¼Œè‡³æ­¤ï¼Œç³»ç»Ÿå¯åšåˆ°æœºæˆ¿çº§åˆ«çš„æ°´å¹³æ‰©å±•ï¼Œåƒä¸‡çº§åˆ°äº¿çº§çš„å¹¶å‘é‡éƒ½å¯é€šè¿‡å¢åŠ æœºæˆ¿æ¥è§£å†³ï¼Œç³»ç»Ÿå…¥å£å¤„çš„è¯·æ±‚å¹¶å‘é‡ä¸å†æ˜¯é—®é¢˜ã€‚</p>
<blockquote>
<p>éšç€æ•°æ®çš„ä¸°å¯Œç¨‹åº¦å’Œä¸šåŠ¡çš„å‘å±•ï¼Œæ£€ç´¢ã€åˆ†æç­‰éœ€æ±‚è¶Šæ¥è¶Šä¸°å¯Œï¼Œå•å•ä¾é æ•°æ®åº“æ— æ³•è§£å†³å¦‚æ­¤ä¸°å¯Œçš„éœ€æ±‚</p>
</blockquote>
<h3 id="310-ç¬¬ä¹æ¬¡æ¼”è¿›å¼•å…¥-nosql-æ•°æ®åº“å’Œæœç´¢å¼•æ“ç­‰æŠ€æœ¯" class="headerLink">
    <a href="#310-%e7%ac%ac%e4%b9%9d%e6%ac%a1%e6%bc%94%e8%bf%9b%e5%bc%95%e5%85%a5-nosql-%e6%95%b0%e6%8d%ae%e5%ba%93%e5%92%8c%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e%e7%ad%89%e6%8a%80%e6%9c%af" class="header-mark"></a>3.10 ç¬¬ä¹æ¬¡æ¼”è¿›ï¼šå¼•å…¥ NoSQL æ•°æ®åº“å’Œæœç´¢å¼•æ“ç­‰æŠ€æœ¯</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/4431084b90e14e95bad5a0beb93e9196.png" title="ç¬¬ä¹æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/4431084b90e14e95bad5a0beb93e9196.png" data-sub-html="<h2>ç¬¬ä¹æ¬¡æ¼”è¿›</h2><p>ç¬¬ä¹æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬ä¹æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>å½“æ•°æ®åº“ä¸­çš„æ•°æ®å¤šåˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œæ•°æ®åº“å°±ä¸é€‚ç”¨äºå¤æ‚çš„æŸ¥è¯¢äº†ï¼Œå¾€å¾€åªèƒ½æ»¡è¶³æ™®é€šæŸ¥è¯¢çš„åœºæ™¯ã€‚å¯¹äºç»Ÿè®¡æŠ¥è¡¨åœºæ™¯ï¼Œåœ¨æ•°æ®é‡å¤§æ—¶ä¸ä¸€å®šèƒ½è·‘å‡ºç»“æœï¼Œè€Œä¸”åœ¨è·‘å¤æ‚æŸ¥è¯¢æ—¶ä¼šå¯¼è‡´å…¶ä»–æŸ¥è¯¢å˜æ…¢ï¼Œå¯¹äºå…¨æ–‡æ£€ç´¢ã€å¯å˜æ•°æ®ç»“æ„ç­‰åœºæ™¯ï¼Œæ•°æ®åº“å¤©ç”Ÿä¸é€‚ç”¨ã€‚å› æ­¤éœ€è¦é’ˆå¯¹ç‰¹å®šçš„åœºæ™¯ï¼Œå¼•å…¥åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚å¯¹äºæµ·é‡æ–‡ä»¶å­˜å‚¨ï¼Œå¯é€šè¿‡åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ HDFS è§£å†³ï¼Œå¯¹äº key value ç±»å‹çš„æ•°æ®ï¼Œå¯é€šè¿‡ HBase å’Œ Redis ç­‰æ–¹æ¡ˆè§£å†³ï¼Œå¯¹äºå…¨æ–‡æ£€ç´¢åœºæ™¯ï¼Œå¯é€šè¿‡æœç´¢å¼•æ“å¦‚ ElasticSearch è§£å†³ï¼Œå¯¹äºå¤šç»´åˆ†æåœºæ™¯ï¼Œå¯é€šè¿‡ Kylin æˆ– Druid ç­‰æ–¹æ¡ˆè§£å†³ã€‚</p>
<p>å½“ç„¶ï¼Œå¼•å…¥æ›´å¤šç»„ä»¶åŒæ—¶ä¼šæé«˜ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œä¸åŒçš„ç»„ä»¶ä¿å­˜çš„æ•°æ®éœ€è¦åŒæ­¥ï¼Œéœ€è¦è€ƒè™‘ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œéœ€è¦æœ‰æ›´å¤šçš„è¿ç»´æ‰‹æ®µæ¥ç®¡ç†è¿™äº›ç»„ä»¶ç­‰ã€‚</p>
<blockquote>
<p>å¼•å…¥æ›´å¤šç»„ä»¶è§£å†³äº†ä¸°å¯Œçš„éœ€æ±‚ï¼Œä¸šåŠ¡ç»´åº¦èƒ½å¤Ÿæå¤§æ‰©å……ï¼Œéšä¹‹è€Œæ¥çš„æ˜¯ä¸€ä¸ªåº”ç”¨ä¸­åŒ…å«äº†å¤ªå¤šçš„ä¸šåŠ¡ä»£ç ï¼Œä¸šåŠ¡çš„å‡çº§è¿­ä»£å˜å¾—å›°éš¾</p>
</blockquote>
<h3 id="311-ç¬¬åæ¬¡æ¼”è¿›å¤§åº”ç”¨æ‹†åˆ†ä¸ºå°åº”ç”¨" class="headerLink">
    <a href="#311-%e7%ac%ac%e5%8d%81%e6%ac%a1%e6%bc%94%e8%bf%9b%e5%a4%a7%e5%ba%94%e7%94%a8%e6%8b%86%e5%88%86%e4%b8%ba%e5%b0%8f%e5%ba%94%e7%94%a8" class="header-mark"></a>3.11 ç¬¬åæ¬¡æ¼”è¿›ï¼šå¤§åº”ç”¨æ‹†åˆ†ä¸ºå°åº”ç”¨</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/8cb5f4af10c54384bcda7ac1a19bdaba.png" title="ç¬¬åæ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/8cb5f4af10c54384bcda7ac1a19bdaba.png" data-sub-html="<h2>ç¬¬åæ¬¡æ¼”è¿›</h2><p>ç¬¬åæ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬åæ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>æŒ‰ç…§ä¸šåŠ¡æ¿å—æ¥åˆ’åˆ†åº”ç”¨ä»£ç ï¼Œä½¿å•ä¸ªåº”ç”¨çš„èŒè´£æ›´æ¸…æ™°ï¼Œç›¸äº’ä¹‹é—´å¯ä»¥åšåˆ°ç‹¬ç«‹å‡çº§è¿­ä»£ã€‚è¿™æ—¶å€™åº”ç”¨ä¹‹é—´å¯èƒ½ä¼šæ¶‰åŠåˆ°ä¸€äº›å…¬å…±é…ç½®ï¼Œå¯ä»¥é€šè¿‡åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ Zookeeper æ¥è§£å†³ã€‚</p>
<blockquote>
<p>ä¸åŒåº”ç”¨ä¹‹é—´å­˜åœ¨å…±ç”¨çš„æ¨¡å—ï¼Œç”±åº”ç”¨å•ç‹¬ç®¡ç†ä¼šå¯¼è‡´ç›¸åŒä»£ç å­˜åœ¨å¤šä»½ï¼Œå¯¼è‡´å…¬å…±åŠŸèƒ½å‡çº§æ—¶å…¨éƒ¨åº”ç”¨ä»£ç éƒ½è¦è·Ÿç€å‡çº§</p>
</blockquote>
<h3 id="312-ç¬¬åä¸€æ¬¡æ¼”è¿›å¤ç”¨çš„åŠŸèƒ½æŠ½ç¦»æˆå¾®æœåŠ¡" class="headerLink">
    <a href="#312-%e7%ac%ac%e5%8d%81%e4%b8%80%e6%ac%a1%e6%bc%94%e8%bf%9b%e5%a4%8d%e7%94%a8%e7%9a%84%e5%8a%9f%e8%83%bd%e6%8a%bd%e7%a6%bb%e6%88%90%e5%be%ae%e6%9c%8d%e5%8a%a1" class="header-mark"></a>3.12 ç¬¬åä¸€æ¬¡æ¼”è¿›ï¼šå¤ç”¨çš„åŠŸèƒ½æŠ½ç¦»æˆå¾®æœåŠ¡</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/542da2f0e6704dd2bc537098708aedcc.png" title="ç¬¬åä¸€æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/542da2f0e6704dd2bc537098708aedcc.png" data-sub-html="<h2>ç¬¬åä¸€æ¬¡æ¼”è¿›</h2><p>ç¬¬åä¸€æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬åä¸€æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>å¦‚ç”¨æˆ·ç®¡ç†ã€è®¢å•ã€æ”¯ä»˜ã€é‰´æƒç­‰åŠŸèƒ½åœ¨å¤šä¸ªåº”ç”¨ä¸­éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠè¿™äº›åŠŸèƒ½çš„ä»£ç å•ç‹¬æŠ½å–å‡ºæ¥å½¢æˆä¸€ä¸ªå•ç‹¬çš„æœåŠ¡æ¥ç®¡ç†ï¼Œè¿™æ ·çš„æœåŠ¡å°±æ˜¯æ‰€è°“çš„å¾®æœåŠ¡ï¼Œåº”ç”¨å’ŒæœåŠ¡ä¹‹é—´é€šè¿‡ HTTPã€TCP æˆ– RPC è¯·æ±‚ç­‰å¤šç§æ–¹å¼æ¥è®¿é—®å…¬å…±æœåŠ¡ï¼Œæ¯ä¸ªå•ç‹¬çš„æœåŠ¡éƒ½å¯ä»¥ç”±å•ç‹¬çš„å›¢é˜Ÿæ¥ç®¡ç†ã€‚æ­¤å¤–ï¼Œå¯ä»¥é€šè¿‡ Dubboã€SpringCloud ç­‰æ¡†æ¶å®ç°æœåŠ¡æ²»ç†ã€é™æµã€ç†”æ–­ã€é™çº§ç­‰åŠŸèƒ½ï¼Œæé«˜æœåŠ¡çš„ç¨³å®šæ€§å’Œå¯ç”¨æ€§ã€‚</p>
<blockquote>
<p>ä¸åŒæœåŠ¡çš„æ¥å£è®¿é—®æ–¹å¼ä¸åŒï¼Œåº”ç”¨ä»£ç éœ€è¦é€‚é…å¤šç§è®¿é—®æ–¹å¼æ‰èƒ½ä½¿ç”¨æœåŠ¡ï¼Œæ­¤å¤–ï¼Œåº”ç”¨è®¿é—®æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ä¹Ÿå¯èƒ½ç›¸äº’è®¿é—®ï¼Œè°ƒç”¨é“¾å°†ä¼šå˜å¾—éå¸¸å¤æ‚ï¼Œé€»è¾‘å˜å¾—æ··ä¹±</p>
</blockquote>
<h3 id="313-ç¬¬åäºŒæ¬¡æ¼”è¿›å¼•å…¥ä¼ä¸šæœåŠ¡æ€»çº¿-esb-å±è”½æœåŠ¡æ¥å£çš„è®¿é—®å·®å¼‚" class="headerLink">
    <a href="#313-%e7%ac%ac%e5%8d%81%e4%ba%8c%e6%ac%a1%e6%bc%94%e8%bf%9b%e5%bc%95%e5%85%a5%e4%bc%81%e4%b8%9a%e6%9c%8d%e5%8a%a1%e6%80%bb%e7%ba%bf-esb-%e5%b1%8f%e8%94%bd%e6%9c%8d%e5%8a%a1%e6%8e%a5%e5%8f%a3%e7%9a%84%e8%ae%bf%e9%97%ae%e5%b7%ae%e5%bc%82" class="header-mark"></a>3.13 ç¬¬åäºŒæ¬¡æ¼”è¿›ï¼šå¼•å…¥ä¼ä¸šæœåŠ¡æ€»çº¿ ESB å±è”½æœåŠ¡æ¥å£çš„è®¿é—®å·®å¼‚</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/a2f54a652b6141f88fc441a97e8dea97.png" title="ç¬¬åäºŒæ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/a2f54a652b6141f88fc441a97e8dea97.png" data-sub-html="<h2>ç¬¬åäºŒæ¬¡æ¼”è¿›</h2><p>ç¬¬åäºŒæ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬åäºŒæ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>é€šè¿‡ ESB ç»Ÿä¸€è¿›è¡Œè®¿é—®åè®®è½¬æ¢ï¼Œåº”ç”¨ç»Ÿä¸€é€šè¿‡ ESB æ¥è®¿é—®åç«¯æœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¹Ÿé€šè¿‡ ESB æ¥ç›¸äº’è°ƒç”¨ï¼Œä»¥æ­¤é™ä½ç³»ç»Ÿçš„è€¦åˆç¨‹åº¦ã€‚è¿™ç§å•ä¸ªåº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªåº”ç”¨ï¼Œå…¬å…±æœåŠ¡å•ç‹¬æŠ½å–å‡ºæ¥æ¥ç®¡ç†ï¼Œå¹¶ä½¿ç”¨ä¼ä¸šæ¶ˆæ¯æ€»çº¿æ¥è§£é™¤æœåŠ¡ä¹‹é—´è€¦åˆé—®é¢˜çš„æ¶æ„ï¼Œå°±æ˜¯æ‰€è°“çš„
<strong><ruby>SOA<rt>Service-Oriented Architecture</rt></ruby></strong>ï¼ˆé¢å‘æœåŠ¡ï¼‰æ¶æ„ï¼Œè¿™ç§æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„å®¹æ˜“æ··æ·†ï¼Œå› ä¸ºè¡¨ç°å½¢å¼ååˆ†ç›¸ä¼¼ã€‚</p>
<p>ä¸ªäººç†è§£ï¼Œå¾®æœåŠ¡æ¶æ„æ›´å¤šæ˜¯æŒ‡æŠŠç³»ç»Ÿé‡Œçš„å…¬å…±æœåŠ¡æŠ½å–å‡ºæ¥å•ç‹¬è¿ç»´ç®¡ç†çš„æ€æƒ³ï¼Œè€Œ SOA æ¶æ„åˆ™æ˜¯æŒ‡ä¸€ç§æ‹†åˆ†æœåŠ¡å¹¶ä½¿æœåŠ¡æ¥å£è®¿é—®å˜å¾—ç»Ÿä¸€çš„æ¶æ„æ€æƒ³ï¼ŒSOA æ¶æ„ä¸­åŒ…å«äº†å¾®æœåŠ¡çš„æ€æƒ³ã€‚</p>
<blockquote>
<p>ä¸šåŠ¡ä¸æ–­å‘å±•ï¼Œåº”ç”¨å’ŒæœåŠ¡éƒ½ä¼šä¸æ–­å˜å¤šï¼Œåº”ç”¨å’ŒæœåŠ¡çš„éƒ¨ç½²å˜å¾—å¤æ‚ï¼ŒåŒä¸€å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²å¤šä¸ªæœåŠ¡è¿˜è¦è§£å†³è¿è¡Œç¯å¢ƒå†²çªçš„é—®é¢˜ï¼Œ
æ­¤å¤–ï¼Œå¯¹äºå¦‚å¤§ä¿ƒè¿™ç±»éœ€è¦åŠ¨æ€æ‰©ç¼©å®¹çš„åœºæ™¯ï¼Œéœ€è¦æ°´å¹³æ‰©å±•æœåŠ¡çš„æ€§èƒ½ï¼Œå°±éœ€è¦åœ¨æ–°å¢çš„æœåŠ¡ä¸Šå‡†å¤‡è¿è¡Œç¯å¢ƒï¼Œéƒ¨ç½²æœåŠ¡ç­‰ï¼Œè¿ç»´å°†å˜å¾—ååˆ†å›°éš¾</p>
</blockquote>
<h3 id="314-ç¬¬åä¸‰æ¬¡æ¼”è¿›å¼•å…¥å®¹å™¨åŒ–æŠ€æœ¯å®ç°è¿è¡Œç¯å¢ƒéš”ç¦»ä¸åŠ¨æ€æœåŠ¡ç®¡ç†" class="headerLink">
    <a href="#314-%e7%ac%ac%e5%8d%81%e4%b8%89%e6%ac%a1%e6%bc%94%e8%bf%9b%e5%bc%95%e5%85%a5%e5%ae%b9%e5%99%a8%e5%8c%96%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0%e8%bf%90%e8%a1%8c%e7%8e%af%e5%a2%83%e9%9a%94%e7%a6%bb%e4%b8%8e%e5%8a%a8%e6%80%81%e6%9c%8d%e5%8a%a1%e7%ae%a1%e7%90%86" class="header-mark"></a>3.14 ç¬¬åä¸‰æ¬¡æ¼”è¿›ï¼šå¼•å…¥å®¹å™¨åŒ–æŠ€æœ¯å®ç°è¿è¡Œç¯å¢ƒéš”ç¦»ä¸åŠ¨æ€æœåŠ¡ç®¡ç†</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/ebae2b361aaa4d00a266279ffb59f28e.png" title="ç¬¬åä¸‰æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/ebae2b361aaa4d00a266279ffb59f28e.png" data-sub-html="<h2>ç¬¬åä¸‰æ¬¡æ¼”è¿›</h2><p>ç¬¬åä¸‰æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬åä¸‰æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>ç›®å‰æœ€æµè¡Œçš„å®¹å™¨åŒ–æŠ€æœ¯æ˜¯ Dockerï¼Œæœ€æµè¡Œçš„å®¹å™¨ç®¡ç†æœåŠ¡æ˜¯ Kubernetes(K8S)ï¼Œåº”ç”¨/æœåŠ¡å¯ä»¥æ‰“åŒ…ä¸º Docker é•œåƒï¼Œé€šè¿‡ K8S æ¥åŠ¨æ€åˆ†å‘å’Œéƒ¨ç½²é•œåƒã€‚Docker é•œåƒå¯ç†è§£ä¸ºä¸€ä¸ªèƒ½è¿è¡Œä½ çš„åº”ç”¨/æœåŠ¡çš„æœ€å°çš„æ“ä½œç³»ç»Ÿï¼Œé‡Œé¢æ”¾ç€åº”ç”¨/æœåŠ¡çš„è¿è¡Œä»£ç ï¼Œè¿è¡Œç¯å¢ƒæ ¹æ®å®é™…çš„éœ€è¦è®¾ç½®å¥½ã€‚æŠŠæ•´ä¸ªâ€œæ“ä½œç³»ç»Ÿâ€æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒåï¼Œå°±å¯ä»¥åˆ†å‘åˆ°éœ€è¦éƒ¨ç½²ç›¸å…³æœåŠ¡çš„æœºå™¨ä¸Šï¼Œç›´æ¥å¯åŠ¨ Docker é•œåƒå°±å¯ä»¥æŠŠæœåŠ¡èµ·èµ·æ¥ï¼Œä½¿æœåŠ¡çš„éƒ¨ç½²å’Œè¿ç»´å˜å¾—ç®€å•ã€‚</p>
<p>åœ¨å¤§ä¿ƒçš„ä¹‹å‰ï¼Œå¯ä»¥åœ¨ç°æœ‰çš„æœºå™¨é›†ç¾¤ä¸Šåˆ’åˆ†å‡ºæœåŠ¡å™¨æ¥å¯åŠ¨ Docker é•œåƒï¼Œå¢å¼ºæœåŠ¡çš„æ€§èƒ½ï¼Œå¤§ä¿ƒè¿‡åå°±å¯ä»¥å…³é—­é•œåƒï¼Œå¯¹æœºå™¨ä¸Šçš„å…¶ä»–æœåŠ¡ä¸é€ æˆå½±å“ï¼ˆåœ¨ 3.14 èŠ‚ä¹‹å‰ï¼ŒæœåŠ¡è¿è¡Œåœ¨æ–°å¢æœºå™¨ä¸Šéœ€è¦ä¿®æ”¹ç³»ç»Ÿé…ç½®æ¥é€‚é…æœåŠ¡ï¼Œè¿™ä¼šå¯¼è‡´æœºå™¨ä¸Šå…¶ä»–æœåŠ¡éœ€è¦çš„è¿è¡Œç¯å¢ƒè¢«ç ´åï¼‰ã€‚</p>
<blockquote>
<p>ä½¿ç”¨å®¹å™¨åŒ–æŠ€æœ¯åæœåŠ¡åŠ¨æ€æ‰©ç¼©å®¹é—®é¢˜å¾—ä»¥è§£å†³ï¼Œä½†æ˜¯æœºå™¨è¿˜æ˜¯éœ€è¦å…¬å¸è‡ªèº«æ¥ç®¡ç†ï¼Œåœ¨éå¤§ä¿ƒçš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦é—²ç½®ç€å¤§é‡çš„æœºå™¨èµ„æºæ¥åº”å¯¹å¤§ä¿ƒï¼Œæœºå™¨è‡ªèº«æˆæœ¬å’Œè¿ç»´æˆæœ¬éƒ½æé«˜ï¼Œèµ„æºåˆ©ç”¨ç‡ä½</p>
</blockquote>
<h3 id="315-ç¬¬åå››æ¬¡æ¼”è¿›ä»¥äº‘å¹³å°æ‰¿è½½ç³»ç»Ÿ" class="headerLink">
    <a href="#315-%e7%ac%ac%e5%8d%81%e5%9b%9b%e6%ac%a1%e6%bc%94%e8%bf%9b%e4%bb%a5%e4%ba%91%e5%b9%b3%e5%8f%b0%e6%89%bf%e8%bd%bd%e7%b3%bb%e7%bb%9f" class="header-mark"></a>3.15 ç¬¬åå››æ¬¡æ¼”è¿›ï¼šä»¥äº‘å¹³å°æ‰¿è½½ç³»ç»Ÿ</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/9c8cba63d6594fa19726b0b0c97fe17d.png" title="ç¬¬åå››æ¬¡æ¼”è¿›" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220830/9c8cba63d6594fa19726b0b0c97fe17d.png" data-sub-html="<h2>ç¬¬åå››æ¬¡æ¼”è¿›</h2><p>ç¬¬åå››æ¬¡æ¼”è¿›</p>">
        
    </a><figcaption class="image-caption">ç¬¬åå››æ¬¡æ¼”è¿›</figcaption>
    </figure></p>
<p>ç³»ç»Ÿå¯éƒ¨ç½²åˆ°å…¬æœ‰äº‘ä¸Šï¼Œåˆ©ç”¨å…¬æœ‰äº‘çš„æµ·é‡æœºå™¨èµ„æºï¼Œè§£å†³åŠ¨æ€ç¡¬ä»¶èµ„æºçš„é—®é¢˜ï¼Œåœ¨å¤§ä¿ƒçš„æ—¶é—´æ®µé‡Œï¼Œåœ¨äº‘å¹³å°ä¸­ä¸´æ—¶ç”³è¯·æ›´å¤šçš„èµ„æºï¼Œç»“åˆ Docker å’Œ K8S æ¥å¿«é€Ÿéƒ¨ç½²æœåŠ¡ï¼Œåœ¨å¤§ä¿ƒç»“æŸåé‡Šæ”¾èµ„æºï¼ŒçœŸæ­£åšåˆ°æŒ‰éœ€ä»˜è´¹ï¼Œèµ„æºåˆ©ç”¨ç‡å¤§å¤§æé«˜ï¼ŒåŒæ—¶å¤§å¤§é™ä½äº†è¿ç»´æˆæœ¬ã€‚</p>
<p>æ‰€è°“çš„äº‘å¹³å°ï¼Œå°±æ˜¯æŠŠæµ·é‡æœºå™¨èµ„æºï¼Œé€šè¿‡ç»Ÿä¸€çš„èµ„æºç®¡ç†ï¼ŒæŠ½è±¡ä¸ºä¸€ä¸ªèµ„æºæ•´ä½“ï¼Œåœ¨ä¹‹ä¸Šå¯æŒ‰éœ€åŠ¨æ€ç”³è¯·ç¡¬ä»¶èµ„æºï¼ˆå¦‚ CPUã€å†…å­˜ã€ç½‘ç»œç­‰ï¼‰ï¼Œå¹¶ä¸”ä¹‹ä¸Šæä¾›é€šç”¨çš„æ“ä½œç³»ç»Ÿï¼Œæä¾›å¸¸ç”¨çš„æŠ€æœ¯ç»„ä»¶ï¼ˆå¦‚ Hadoop æŠ€æœ¯æ ˆï¼ŒMPP æ•°æ®åº“ç­‰ï¼‰ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œç”šè‡³æä¾›å¼€å‘å¥½çš„åº”ç”¨ï¼Œç”¨æˆ·ä¸éœ€è¦å…³ç³»åº”ç”¨å†…éƒ¨ä½¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯ï¼Œå°±èƒ½å¤Ÿè§£å†³éœ€æ±‚ï¼ˆå¦‚éŸ³è§†é¢‘è½¬ç æœåŠ¡ã€é‚®ä»¶æœåŠ¡ã€ä¸ªäººåšå®¢ç­‰ï¼‰ã€‚åœ¨äº‘å¹³å°ä¸­ä¼šæ¶‰åŠå¦‚ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>
<p><strong>IaaS</strong>åŸºç¡€è®¾æ–½å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æœºå™¨èµ„æºç»Ÿä¸€ä¸ºèµ„æºæ•´ä½“ï¼Œå¯åŠ¨æ€ç”³è¯·ç¡¬ä»¶èµ„æºçš„å±‚é¢ï¼›</p>
</li>
<li>
<p><strong>PaaS</strong>å¹³å°å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æä¾›å¸¸ç”¨çš„æŠ€æœ¯ç»„ä»¶æ–¹ä¾¿ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤ï¼›</p>
</li>
<li>
<p><strong>SaaS</strong>è½¯ä»¶å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æä¾›å¼€å‘å¥½çš„åº”ç”¨æˆ–æœåŠ¡ï¼ŒæŒ‰åŠŸèƒ½æˆ–æ€§èƒ½è¦æ±‚ä»˜è´¹ã€‚</p>
</li>
</ul>
<blockquote>
<p>è‡³æ­¤ï¼Œä»¥ä¸Šæ‰€æåˆ°çš„ä»é«˜å¹¶å‘è®¿é—®é—®é¢˜ï¼Œåˆ°æœåŠ¡çš„æ¶æ„å’Œç³»ç»Ÿå®æ–½çš„å±‚é¢éƒ½æœ‰äº†å„è‡ªçš„è§£å†³æ–¹æ¡ˆï¼Œä½†åŒæ—¶ä¹Ÿåº”è¯¥æ„è¯†åˆ°ï¼Œåœ¨ä¸Šé¢çš„ä»‹ç»ä¸­ï¼Œå…¶å®æ˜¯æœ‰æ„å¿½ç•¥äº†è¯¸å¦‚è·¨æœºæˆ¿æ•°æ®åŒæ­¥ã€åˆ†å¸ƒå¼äº‹åŠ¡å®ç°ç­‰ç­‰çš„å®é™…é—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä»¥åæœ‰æœºä¼šå†æ‹¿å‡ºæ¥å•ç‹¬è®¨è®º</p>
</blockquote>
<h2 id="4-æ¶æ„è®¾è®¡æ€»ç»“" class="headerLink">
    <a href="#4-%e6%9e%b6%e6%9e%84%e8%ae%be%e8%ae%a1%e6%80%bb%e7%bb%93" class="header-mark"></a>4. æ¶æ„è®¾è®¡æ€»ç»“</h2><ul>
<li><strong>æ¶æ„çš„è°ƒæ•´æ˜¯å¦å¿…é¡»æŒ‰ç…§ä¸Šè¿°æ¼”å˜è·¯å¾„è¿›è¡Œï¼Ÿ</strong></li>
</ul>
<p>ä¸æ˜¯çš„ï¼Œä»¥ä¸Šæ‰€è¯´çš„æ¶æ„æ¼”å˜é¡ºåºåªæ˜¯é’ˆå¯¹æŸä¸ªä¾§é¢è¿›è¡Œå•ç‹¬çš„æ”¹è¿›ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼Œå¯èƒ½åŒä¸€æ—¶é—´ä¼šæœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼Œæˆ–è€…å¯èƒ½å…ˆè¾¾åˆ°ç“¶é¢ˆçš„æ˜¯å¦å¤–çš„æ–¹é¢ï¼Œè¿™æ—¶å€™å°±åº”è¯¥æŒ‰ç…§å®é™…é—®é¢˜å®é™…è§£å†³ã€‚å¦‚åœ¨æ”¿åºœç±»çš„å¹¶å‘é‡å¯èƒ½ä¸å¤§ï¼Œä½†ä¸šåŠ¡å¯èƒ½å¾ˆä¸°å¯Œçš„åœºæ™¯ï¼Œé«˜å¹¶å‘å°±ä¸æ˜¯é‡ç‚¹è§£å†³çš„é—®é¢˜ï¼Œæ­¤æ—¶ä¼˜å…ˆéœ€è¦çš„å¯èƒ½ä¼šæ˜¯ä¸°å¯Œéœ€æ±‚çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>å¯¹äºå°†è¦å®æ–½çš„ç³»ç»Ÿï¼Œæ¶æ„åº”è¯¥è®¾è®¡åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ</strong></li>
</ul>
<p>å¯¹äºå•æ¬¡å®æ–½å¹¶ä¸”æ€§èƒ½æŒ‡æ ‡æ˜ç¡®çš„ç³»ç»Ÿï¼Œæ¶æ„è®¾è®¡åˆ°èƒ½å¤Ÿæ”¯æŒç³»ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡è¦æ±‚å°±è¶³å¤Ÿäº†ï¼Œä½†è¦ç•™æœ‰æ‰©å±•æ¶æ„çš„æ¥å£ä»¥ä¾¿ä¸å¤‡ä¹‹éœ€ã€‚å¯¹äºä¸æ–­å‘å±•çš„ç³»ç»Ÿï¼Œå¦‚ç”µå•†å¹³å°ï¼Œåº”è®¾è®¡åˆ°èƒ½æ»¡è¶³ä¸‹ä¸€é˜¶æ®µç”¨æˆ·é‡å’Œæ€§èƒ½æŒ‡æ ‡è¦æ±‚çš„ç¨‹åº¦ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡çš„å¢é•¿ä¸æ–­çš„è¿­ä»£å‡çº§æ¶æ„ï¼Œä»¥æ”¯æŒæ›´é«˜çš„å¹¶å‘å’Œæ›´ä¸°å¯Œçš„ä¸šåŠ¡ã€‚</p>
<ul>
<li><strong>æœåŠ¡ç«¯æ¶æ„å’Œå¤§æ•°æ®æ¶æ„æœ‰ä»€ä¹ˆåŒºåˆ«</strong>?</li>
</ul>
<p>æ‰€è°“çš„â€œå¤§æ•°æ®â€å…¶å®æ˜¯æµ·é‡æ•°æ®é‡‡é›†æ¸…æ´—è½¬æ¢ã€æ•°æ®å­˜å‚¨ã€æ•°æ®åˆ†æã€æ•°æ®æœåŠ¡ç­‰åœºæ™¯è§£å†³æ–¹æ¡ˆçš„ä¸€ä¸ªç»Ÿç§°ï¼Œåœ¨æ¯ä¸€ä¸ªåœºæ™¯éƒ½åŒ…å«äº†å¤šç§å¯é€‰çš„æŠ€æœ¯ï¼Œå¦‚æ•°æ®é‡‡é›†æœ‰ Flumeã€Sqoopã€Kettle ç­‰ï¼Œæ•°æ®å­˜å‚¨æœ‰åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ HDFSã€FastDFSï¼ŒNoSQL æ•°æ®åº“ HBaseã€MongoDB ç­‰ï¼Œæ•°æ®åˆ†ææœ‰ Spark æŠ€æœ¯æ ˆã€æœºå™¨å­¦ä¹ ç®—æ³•ç­‰ã€‚æ€»çš„æ¥è¯´å¤§æ•°æ®æ¶æ„å°±æ˜¯æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œæ•´åˆå„ç§å¤§æ•°æ®ç»„ä»¶ç»„åˆè€Œæˆçš„æ¶æ„ï¼Œä¸€èˆ¬ä¼šæä¾›åˆ†å¸ƒå¼å­˜å‚¨ã€åˆ†å¸ƒå¼è®¡ç®—ã€å¤šç»´åˆ†æã€æ•°æ®ä»“åº“ã€æœºå™¨å­¦ä¹ ç®—æ³•ç­‰èƒ½åŠ›ã€‚è€ŒæœåŠ¡ç«¯æ¶æ„æ›´å¤šæŒ‡çš„æ˜¯åº”ç”¨ç»„ç»‡å±‚é¢çš„æ¶æ„ï¼Œåº•å±‚èƒ½åŠ›å¾€å¾€æ˜¯ç”±å¤§æ•°æ®æ¶æ„æ¥æä¾›ã€‚</p>
<ul>
<li>
<p><strong>æœ‰æ²¡æœ‰ä¸€äº›æ¶æ„è®¾è®¡çš„åŸåˆ™ï¼Ÿ</strong></p>
<ul>
<li>
<p>N+1 è®¾è®¡ã€‚ç³»ç»Ÿä¸­çš„æ¯ä¸ªç»„ä»¶éƒ½åº”åšåˆ°æ²¡æœ‰å•ç‚¹æ•…éšœï¼›</p>
</li>
<li>
<p>å›æ»šè®¾è®¡ã€‚ç¡®ä¿ç³»ç»Ÿå¯ä»¥å‘å‰å…¼å®¹ï¼Œåœ¨ç³»ç»Ÿå‡çº§æ—¶åº”èƒ½æœ‰åŠæ³•å›æ»šç‰ˆæœ¬ï¼›</p>
</li>
<li>
<p>ç¦ç”¨è®¾è®¡ã€‚åº”è¯¥æä¾›æ§åˆ¶å…·ä½“åŠŸèƒ½æ˜¯å¦å¯ç”¨çš„é…ç½®ï¼Œåœ¨ç³»ç»Ÿå‡ºç°æ•…éšœæ—¶èƒ½å¤Ÿå¿«é€Ÿä¸‹çº¿åŠŸèƒ½ï¼›</p>
</li>
<li>
<p>ç›‘æ§è®¾è®¡ã€‚åœ¨è®¾è®¡é˜¶æ®µå°±è¦è€ƒè™‘ç›‘æ§çš„æ‰‹æ®µï¼›</p>
</li>
<li>
<p>å¤šæ´»æ•°æ®ä¸­å¿ƒè®¾è®¡ã€‚è‹¥ç³»ç»Ÿéœ€è¦æé«˜çš„é«˜å¯ç”¨ï¼Œåº”è€ƒè™‘åœ¨å¤šåœ°å®æ–½æ•°æ®ä¸­å¿ƒè¿›è¡Œå¤šæ´»ï¼Œè‡³å°‘åœ¨ä¸€ä¸ªæœºæˆ¿æ–­ç”µçš„æƒ…å†µä¸‹ç³»ç»Ÿä¾ç„¶å¯ç”¨ï¼›</p>
</li>
<li>
<p>é‡‡ç”¨æˆç†Ÿçš„æŠ€æœ¯ã€‚åˆšå¼€å‘çš„æˆ–å¼€æºçš„æŠ€æœ¯å¾€å¾€å­˜åœ¨å¾ˆå¤šéšè—çš„ bugï¼Œå‡ºäº†é—®é¢˜æ²¡æœ‰å•†ä¸šæ”¯æŒå¯èƒ½ä¼šæ˜¯ä¸€ä¸ªç¾éš¾ï¼›</p>
</li>
<li>
<p>èµ„æºéš”ç¦»è®¾è®¡ã€‚åº”é¿å…å•ä¸€ä¸šåŠ¡å ç”¨å…¨éƒ¨èµ„æºï¼›</p>
</li>
<li>
<p>æ¶æ„åº”èƒ½æ°´å¹³æ‰©å±•ã€‚ç³»ç»Ÿåªæœ‰åšåˆ°èƒ½æ°´å¹³æ‰©å±•ï¼Œæ‰èƒ½æœ‰æ•ˆé¿å…ç“¶é¢ˆé—®é¢˜ï¼›</p>
</li>
<li>
<p>éæ ¸å¿ƒåˆ™è´­ä¹°ã€‚éæ ¸å¿ƒåŠŸèƒ½è‹¥éœ€è¦å ç”¨å¤§é‡çš„ç ”å‘èµ„æºæ‰èƒ½è§£å†³ï¼Œåˆ™è€ƒè™‘è´­ä¹°æˆç†Ÿçš„äº§å“ï¼›</p>
</li>
<li>
<p>ä½¿ç”¨å•†ç”¨ç¡¬ä»¶ã€‚å•†ç”¨ç¡¬ä»¶èƒ½æœ‰æ•ˆé™ä½ç¡¬ä»¶æ•…éšœçš„æœºç‡ï¼›</p>
</li>
<li>
<p>å¿«é€Ÿè¿­ä»£ã€‚ç³»ç»Ÿåº”è¯¥å¿«é€Ÿå¼€å‘å°åŠŸèƒ½æ¨¡å—ï¼Œå°½å¿«ä¸Šçº¿è¿›è¡ŒéªŒè¯ï¼Œæ—©æ—¥å‘ç°é—®é¢˜å¤§å¤§é™ä½ç³»ç»Ÿäº¤ä»˜çš„é£é™©ï¼›</p>
</li>
<li>
<p>æ— çŠ¶æ€è®¾è®¡ã€‚æœåŠ¡æ¥å£åº”è¯¥åšæˆæ— çŠ¶æ€çš„ï¼Œå½“å‰æ¥å£çš„è®¿é—®ä¸ä¾èµ–äºæ¥å£ä¸Šæ¬¡è®¿é—®çš„çŠ¶æ€ã€‚</p>
</li>
</ul>
</li>
</ul>
]]></description>
</item><item>
    <title>session cookie token çš„åŒºåˆ«</title>
    <link>https://www.xiaobinqt.cn/session-cookie-token-difference/</link>
    <pubDate>Sat, 11 Jun 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/session-cookie-token-difference/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220824/ee39a9cb19524d918d984db89b1661a5.png" referrerpolicy="no-referrer">
            </div><!-- authorï¼š xiaobinqt -->
<!-- emailï¼š xiaobinqt@163.com -->
<!-- https://xiaobinqt.github.io -->
<!-- https://www.xiaobinqt.cn -->
<h2 id="cookie-å’Œ-session" class="headerLink">
    <a href="#cookie-%e5%92%8c-session" class="header-mark"></a>Cookie å’Œ Session</h2><p>HTTP åè®®æ˜¯ä¸€ç§<code>æ— çŠ¶æ€åè®®</code>ï¼Œå³æ¯æ¬¡æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œéƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¹¶ä¸çŸ¥é“å®¢æˆ·ç«¯çš„å†å²è¯·æ±‚è®°å½•ï¼›Session å’Œ Cookie çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†å¼¥è¡¥ HTTP çš„æ— çŠ¶æ€ç‰¹æ€§ã€‚</p>
<h3 id="session-æ˜¯ä»€ä¹ˆ" class="headerLink">
    <a href="#session-%e6%98%af%e4%bb%80%e4%b9%88" class="header-mark"></a>Session æ˜¯ä»€ä¹ˆ</h3><p>å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¼šä¸ºè¿™æ¬¡è¯·æ±‚å¼€è¾Ÿä¸€å—<code>å†…å­˜ç©ºé—´</code>ï¼Œè¿™ä¸ªå¯¹è±¡ä¾¿æ˜¯ Session å¯¹è±¡ï¼Œå­˜å‚¨ç»“æ„ä¸º <code>ConcurrentHashMap</code>ã€‚Session å¼¥è¡¥äº† HTTP æ— çŠ¶æ€ç‰¹æ€§ï¼ŒæœåŠ¡å™¨å¯ä»¥åˆ©ç”¨ Session å­˜å‚¨å®¢æˆ·ç«¯åœ¨åŒä¸€ä¸ªä¼šè¯æœŸé—´çš„ä¸€äº›æ“ä½œè®°å½•ã€‚</p>
<h3 id="session-å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¼šè¯" class="headerLink">
    <a href="#session-%e5%a6%82%e4%bd%95%e5%88%a4%e6%96%ad%e6%98%af%e5%90%a6%e6%98%af%e5%90%8c%e4%b8%80%e4%bc%9a%e8%af%9d" class="header-mark"></a>Session å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¼šè¯</h3><p>æœåŠ¡å™¨ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œå¼€è¾Ÿäº†ä¸€å— Session ç©ºé—´ï¼ˆåˆ›å»ºäº†Sessionå¯¹è±¡ï¼‰ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ª <code>sessionId</code> ï¼Œå¹¶é€šè¿‡å“åº”å¤´çš„ <strong>Set-Cookieï¼šJSESSIONID=XXXXXXX</strong> å‘½ä»¤ï¼Œå‘å®¢æˆ·ç«¯å‘é€è¦æ±‚è®¾ç½® Cookie çš„å“åº”ï¼›å®¢æˆ·ç«¯æ”¶åˆ°å“åº”åï¼Œåœ¨æœ¬æœºå®¢æˆ·ç«¯è®¾ç½®äº†ä¸€ä¸ª <strong>JSESSIONID=XXXXXXX</strong> çš„ Cookie ä¿¡æ¯ï¼Œè¯¥ Cookie çš„è¿‡æœŸæ—¶é—´ä¸ºæµè§ˆå™¨ä¼šè¯ç»“æŸã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220824/50c3ccd67e62465ab1beaa691995ed06.png" title="ä¼šè¯" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220824/50c3ccd67e62465ab1beaa691995ed06.png" data-sub-html="<h2>ä¼šè¯</h2><p>ä¼šè¯</p>">
        
    </a><figcaption class="image-caption">ä¼šè¯</figcaption>
    </figure></p>
<p>æ¥ä¸‹æ¥å®¢æˆ·ç«¯æ¯æ¬¡å‘åŒä¸€ä¸ªç½‘ç«™å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´éƒ½ä¼šå¸¦ä¸Šè¯¥ Cookieä¿¡æ¯ï¼ˆåŒ…å« sessionId ï¼‰ï¼Œ ç„¶åï¼ŒæœåŠ¡å™¨é€šè¿‡è¯»å–è¯·æ±‚å¤´ä¸­çš„ Cookie ä¿¡æ¯ï¼Œè·å–åç§°ä¸º JSESSIONID çš„å€¼ï¼Œå¾—åˆ°æ­¤æ¬¡è¯·æ±‚çš„ sessionIdã€‚</p>
<h3 id="session-çš„ç¼ºç‚¹" class="headerLink">
    <a href="#session-%e7%9a%84%e7%bc%ba%e7%82%b9" class="header-mark"></a>Session çš„ç¼ºç‚¹</h3><p>Session æœºåˆ¶æœ‰ä¸ªç¼ºç‚¹ï¼Œæ¯”å¦‚ A æœåŠ¡å™¨å­˜å‚¨äº† Sessionï¼Œå°±æ˜¯åšäº†è´Ÿè½½å‡è¡¡åï¼Œå‡å¦‚ä¸€æ®µæ—¶é—´å†… A çš„è®¿é—®é‡æ¿€å¢ï¼Œä¼šè½¬å‘åˆ° B è¿›è¡Œè®¿é—®ï¼Œä½†æ˜¯ B æœåŠ¡å™¨å¹¶æ²¡æœ‰å­˜å‚¨ A çš„ Sessionï¼Œä¼šå¯¼è‡´ Session çš„å¤±æ•ˆã€‚</p>
<h3 id="cookies-æ˜¯ä»€ä¹ˆ" class="headerLink">
    <a href="#cookies-%e6%98%af%e4%bb%80%e4%b9%88" class="header-mark"></a>Cookies æ˜¯ä»€ä¹ˆ</h3><p>HTTP åè®®ä¸­çš„ Cookie åŒ…æ‹¬ <code>Web Cookie</code> å’Œ<code>æµè§ˆå™¨ Cookie</code>ï¼Œå®ƒæ˜¯æœåŠ¡å™¨å‘é€åˆ° Web æµè§ˆå™¨çš„ä¸€å°å—æ•°æ®ã€‚æœåŠ¡å™¨å‘é€åˆ°æµè§ˆå™¨çš„ Cookieï¼Œæµè§ˆå™¨ä¼šè¿›è¡Œå­˜å‚¨ï¼Œå¹¶ä¸ä¸‹ä¸€ä¸ªè¯·æ±‚ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨ã€‚é€šå¸¸ï¼Œå®ƒç”¨äºåˆ¤æ–­ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€ä¸ªæµè§ˆå™¨ï¼Œä¾‹å¦‚ç”¨æˆ·ä¿æŒç™»å½•çŠ¶æ€ã€‚</p>
<blockquote>
<p>HTTP Cookie æœºåˆ¶æ˜¯ HTTP åè®®æ— çŠ¶æ€çš„ä¸€ç§è¡¥å……å’Œæ”¹è‰¯</p>
</blockquote>
<p>Cookie ä¸»è¦ç”¨äºä¸‹é¢ä¸‰ä¸ªç›®çš„</p>
<ul>
<li><code>ä¼šè¯ç®¡ç†</code></li>
</ul>
<p>ç™»é™†ã€è´­ç‰©è½¦ã€æ¸¸æˆå¾—åˆ†æˆ–è€…æœåŠ¡å™¨åº”è¯¥è®°ä½çš„å…¶ä»–å†…å®¹</p>
<ul>
<li><code>ä¸ªæ€§åŒ–</code></li>
</ul>
<p>ç”¨æˆ·åå¥½ã€ä¸»é¢˜æˆ–è€…å…¶ä»–è®¾ç½®</p>
<ul>
<li><code>è¿½è¸ª</code></li>
</ul>
<p>è®°å½•å’Œåˆ†æç”¨æˆ·è¡Œä¸º</p>
<p>Cookie æ›¾ç»ç”¨äºä¸€èˆ¬çš„å®¢æˆ·ç«¯å­˜å‚¨ã€‚è™½ç„¶è¿™æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åœ¨å®¢æˆ·ç«¯ä¸Šå­˜å‚¨æ•°æ®çš„å”¯ä¸€æ–¹æ³•ï¼Œä½†å¦‚ä»Šå»ºè®®ä½¿ç”¨ç°ä»£å­˜å‚¨ APIã€‚Cookie éšæ¯ä¸ªè¯·æ±‚ä¸€èµ·å‘é€ï¼Œå› æ­¤å®ƒä»¬<strong>å¯èƒ½ä¼šé™ä½æ€§èƒ½</strong>ï¼ˆå°¤å…¶æ˜¯å¯¹äºç§»åŠ¨æ•°æ®è¿æ¥è€Œè¨€ï¼‰ã€‚</p>
<h3 id="åˆ›å»º-cookie" class="headerLink">
    <a href="#%e5%88%9b%e5%bb%ba-cookie" class="header-mark"></a>åˆ›å»º Cookie</h3><p>å½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘é€å¸¦æœ‰å“åº”çš„ <code>Set-Cookie</code> æ ‡å¤´ï¼ŒCookie é€šå¸¸ç”±æµè§ˆå™¨å­˜å‚¨ï¼Œç„¶åå°† Cookie ä¸ HTTP æ ‡å¤´ä¸€åŒå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚</p>
<table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Max-Age</code></td>
<td>è®¾ç½®cookieçš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’</td>
</tr>
<tr>
<td><code>Domain</code></td>
<td>æŒ‡å®šäº†Cookieæ‰€å±çš„åŸŸå</td>
</tr>
<tr>
<td><code>Path</code></td>
<td>æŒ‡å®šäº†Cookieæ‰€å±çš„è·¯å¾„</td>
</tr>
<tr>
<td><code>HttpOnly</code></td>
<td>å‘Šè¯‰æµè§ˆå™¨æ­¤Cookieåªèƒ½é æµè§ˆå™¨Httpåè®®ä¼ è¾“,ç¦æ­¢å…¶ä»–æ–¹å¼è®¿é—®</td>
</tr>
<tr>
<td><code>Secure</code></td>
<td>å‘Šè¯‰æµè§ˆå™¨æ­¤Cookieåªèƒ½åœ¨Httpså®‰å…¨åè®®ä¸­ä¼ è¾“,å¦‚æœæ˜¯Httpåˆ™ç¦æ­¢ä¼ è¾“</td>
</tr>
</tbody>
</table>
<h4 id="set-cookie-å’Œ-cookie-æ ‡å¤´" class="headerLink">
    <a href="#set-cookie-%e5%92%8c-cookie-%e6%a0%87%e5%a4%b4" class="header-mark"></a>Set-Cookie å’Œ Cookie æ ‡å¤´</h4><p><code>Set-Cookie</code> HTTP å“åº”æ ‡å¤´å°† cookie ä»æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·ä»£ç†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘é€ Cookie çš„ä¾‹å­</p>
<p><a class="lightgallery" href="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399c20870a~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" title="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399c20870a~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" data-thumbnail="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399c20870a~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png">
        
    </a></p>
<p>æ­¤æ ‡å¤´å‘Šè¯‰å®¢æˆ·ç«¯å­˜å‚¨ Cookie</p>
<p>ç°åœ¨ï¼Œéšç€å¯¹æœåŠ¡å™¨çš„æ¯ä¸ªæ–°è¯·æ±‚ï¼Œæµè§ˆå™¨å°†ä½¿ç”¨ Cookie å¤´å°†æ‰€æœ‰ä»¥å‰å­˜å‚¨çš„ Cookie å‘é€å›æœåŠ¡å™¨ã€‚</p>
<p><a class="lightgallery" href="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399aefd856~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" title="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399aefd856~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" data-thumbnail="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399aefd856~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png">
        
    </a></p>
<p>æœ‰ä¸¤ç§ç±»å‹çš„ Cookiesï¼Œä¸€ç§æ˜¯ <strong><ruby>Session Cookies<rt>ä¼šè¯ cookie</rt></ruby></strong>ï¼Œä¸€ç§æ˜¯ <strong><ruby>Persistent Cookies<rt>æ°¸ä¹… cookie</rt></ruby></strong>ï¼Œå¦‚æœ Cookie ä¸åŒ…å«åˆ°æœŸæ—¥æœŸï¼Œåˆ™å°†å…¶è§†ä¸ºä¼šè¯ Cookieã€‚ä¼šè¯ Cookie å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ°¸è¿œä¸ä¼šå†™å…¥ç£ç›˜ï¼Œå½“æµè§ˆå™¨å…³é—­æ—¶ï¼Œæ­¤å Cookie å°†æ°¸ä¹…ä¸¢å¤±ã€‚å¦‚æœ Cookie åŒ…å«<code>æœ‰æ•ˆæœŸ</code> ï¼Œåˆ™å°†å…¶è§†ä¸ºæŒä¹…æ€§ Cookieã€‚åœ¨åˆ°æœŸæŒ‡å®šçš„æ—¥æœŸï¼ŒCookie å°†ä»ç£ç›˜ä¸­åˆ é™¤ã€‚</p>
<p>è¿˜æœ‰ä¸€ç§æ˜¯ Cookie çš„ <code>Secure</code> å’Œ <code>HttpOnly</code> æ ‡è®°ã€‚</p>
<h4 id="ä¼šè¯-cookies" class="headerLink">
    <a href="#%e4%bc%9a%e8%af%9d-cookies" class="header-mark"></a>ä¼šè¯ Cookies</h4><p>ä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºçš„æ˜¯ä¼šè¯ Cookie ï¼Œä¼šè¯ Cookie æœ‰ä¸ªç‰¹å¾ï¼Œå®¢æˆ·ç«¯å…³é—­æ—¶ Cookie ä¼šåˆ é™¤ï¼Œå› ä¸ºå®ƒ<strong>æ²¡æœ‰æŒ‡å®š</strong><code>Expires</code>æˆ– <code>Max-Age</code> æŒ‡ä»¤ã€‚</p>
<p>ä½†æ˜¯ï¼ŒWeb æµè§ˆå™¨å¯èƒ½ä¼šä½¿ç”¨ä¼šè¯è¿˜åŸï¼Œè¿™ä¼šä½¿å¤§å¤šæ•°ä¼šè¯ Cookie ä¿æŒæ°¸ä¹…çŠ¶æ€ï¼Œå°±åƒä»æœªå…³é—­è¿‡æµè§ˆå™¨ä¸€æ ·ã€‚</p>
<h4 id="æ°¸ä¹…æ€§-cookies" class="headerLink">
    <a href="#%e6%b0%b8%e4%b9%85%e6%80%a7-cookies" class="header-mark"></a>æ°¸ä¹…æ€§ Cookies</h4><p>æ°¸ä¹…æ€§ Cookie ä¸ä¼šåœ¨å®¢æˆ·ç«¯å…³é—­æ—¶è¿‡æœŸï¼Œè€Œæ˜¯åœ¨<code>ç‰¹å®šæ—¥æœŸï¼ˆExpiresï¼‰</code>æˆ–<code>ç‰¹å®šæ—¶é—´é•¿åº¦ï¼ˆMax-Ageï¼‰</code>å¤–è¿‡æœŸã€‚ä¾‹å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT;
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="cookie-çš„-secure-å’Œ-httponly-æ ‡è®°" class="headerLink">
    <a href="#cookie-%e7%9a%84-secure-%e5%92%8c-httponly-%e6%a0%87%e8%ae%b0" class="header-mark"></a>Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°</h4><p>å®‰å…¨çš„ Cookie éœ€è¦ç»è¿‡ HTTPS åè®®é€šè¿‡åŠ å¯†çš„æ–¹å¼å‘é€åˆ°æœåŠ¡å™¨ã€‚å³ä½¿æ˜¯å®‰å…¨çš„ï¼Œä¹Ÿä¸åº”è¯¥å°†æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨cookie ä¸­ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”æ­¤æ ‡å¿—ä¸èƒ½æä¾›çœŸæ­£çš„ä¿æŠ¤ã€‚</p>
<p><strong>HttpOnly çš„ä½œç”¨</strong></p>
<ul>
<li>
<p>ä¼šè¯ Cookie ä¸­ç¼ºå°‘ HttpOnly å±æ€§ä¼šå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ç¨‹åº( JS è„šæœ¬ã€Applet ç­‰)è·å–åˆ°ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œé€ æˆç”¨æˆ· Cookie ä¿¡æ¯æ³„éœ²ï¼Œå¢åŠ æ”»å‡»è€…çš„è·¨ç«™è„šæœ¬æ”»å‡»å¨èƒã€‚</p>
</li>
<li>
<p>HttpOnly æ˜¯å¾®è½¯å¯¹ Cookie åšçš„æ‰©å±•ï¼Œè¯¥å€¼æŒ‡å®š Cookie æ˜¯å¦å¯é€šè¿‡å®¢æˆ·ç«¯è„šæœ¬è®¿é—®ã€‚</p>
</li>
<li>
<p>å¦‚æœåœ¨ Cookie ä¸­<strong>æ²¡æœ‰è®¾ç½®</strong> <code>HttpOnly</code> å±æ€§ä¸º trueï¼Œå¯èƒ½å¯¼è‡´ Cookie è¢«çªƒå–ã€‚çªƒå–çš„ Cookie å¯ä»¥åŒ…å«æ ‡è¯†ç«™ç‚¹ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ ASP.NET ä¼šè¯ ID æˆ– Forms èº«ä»½éªŒè¯ç¥¨è¯ï¼Œæ”»å‡»è€…å¯ä»¥é‡æ’­çªƒå–çš„ Cookieï¼Œä»¥ä¾¿ä¼ªè£…æˆç”¨æˆ·æˆ–è·å–æ•æ„Ÿä¿¡æ¯ï¼Œè¿›è¡Œè·¨ç«™è„šæœ¬æ”»å‡»ç­‰ã€‚</p>
</li>
</ul>
<h3 id="cookie-çš„ä½œç”¨åŸŸ" class="headerLink">
    <a href="#cookie-%e7%9a%84%e4%bd%9c%e7%94%a8%e5%9f%9f" class="header-mark"></a>Cookie çš„ä½œç”¨åŸŸ</h3><p><code>Domain</code> å’Œ <code>Path</code> æ ‡è¯†å®šä¹‰äº† Cookie çš„ä½œç”¨åŸŸï¼šå³ Cookie åº”è¯¥å‘é€ç»™å“ªäº› URLã€‚</p>
<p><code>Domain</code> æ ‡è¯†æŒ‡å®šäº†å“ªäº›ä¸»æœºå¯ä»¥æ¥å— Cookieã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºå½“å‰ä¸»æœº(<strong>ä¸åŒ…å«å­åŸŸå</strong>ï¼‰ã€‚å¦‚æœæŒ‡å®šäº†<code>Domain</code>ï¼Œåˆ™ä¸€èˆ¬åŒ…å«å­åŸŸåã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœè®¾ç½® <code>Domain=mozilla.org</code>ï¼Œåˆ™ Cookie ä¹ŸåŒ…å«åœ¨å­åŸŸåä¸­ï¼ˆå¦‚<code>developer.mozilla.org</code>ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè®¾ç½® <code>Path=/docs</code>ï¼Œåˆ™ä»¥ä¸‹åœ°å€éƒ½ä¼šåŒ¹é…ï¼š</p>
<ul>
<li><code>/docs</code></li>
<li><code>/docs/Web/</code></li>
<li><code>/docs/Web/HTTP</code></li>
</ul>
<h2 id="json-web-token-å’Œ-session-cookies-çš„å¯¹æ¯”" class="headerLink">
    <a href="#json-web-token-%e5%92%8c-session-cookies-%e7%9a%84%e5%af%b9%e6%af%94" class="header-mark"></a>JSON Web Token å’Œ Session Cookies çš„å¯¹æ¯”</h2><p><code>JSON Web Token</code>ï¼Œç®€ç§° <code>JWT</code>ï¼Œå®ƒå’Œ <code>Session</code>éƒ½å¯ä»¥ä¸ºç½‘ç«™æä¾›ç”¨æˆ·çš„èº«ä»½è®¤è¯ï¼Œä½†æ˜¯å®ƒä»¬ä¸æ˜¯ä¸€å›äº‹ã€‚</p>
<h3 id="jwt-å’Œ-session-cookies-çš„ç›¸åŒä¹‹å¤„" class="headerLink">
    <a href="#jwt-%e5%92%8c-session-cookies-%e7%9a%84%e7%9b%b8%e5%90%8c%e4%b9%8b%e5%a4%84" class="header-mark"></a>JWT å’Œ Session Cookies çš„ç›¸åŒä¹‹å¤„</h3><p>åœ¨æ¢è®¨ JWT å’Œ Session Cookies ä¹‹å‰ï¼Œæœ‰å¿…è¦éœ€è¦å…ˆå»ç†è§£ä¸€ä¸‹å®ƒä»¬çš„ç›¸åŒä¹‹å¤„ã€‚</p>
<p>å®ƒä»¬æ—¢å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åœ¨ç”¨æˆ·å•å‡»è¿›å…¥ä¸åŒé¡µé¢æ—¶ä»¥åŠç™»é™†ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºåè¿›è¡Œèº«ä»½éªŒè¯ã€‚</p>
<p>å¦‚æœæ²¡æœ‰è¿™ä¸¤è€…ï¼Œé‚£ä½ å¯èƒ½éœ€è¦åœ¨æ¯ä¸ªé¡µé¢åˆ‡æ¢æ—¶éƒ½éœ€è¦è¿›è¡Œç™»å½•äº†ã€‚å› ä¸º HTTP æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„åè®®ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€å½“ä½ è®¿é—®æŸä¸ªç½‘é¡µï¼Œç„¶åå•å‡»åŒä¸€ç«™ç‚¹ä¸Šçš„å¦ä¸€ä¸ªé¡µé¢æ—¶ï¼ŒæœåŠ¡å™¨çš„<code>å†…å­˜ä¸­</code>å°†ä¸ä¼šè®°ä½ä½ ä¹‹å‰çš„æ“ä½œã€‚</p>
<p><a class="lightgallery" href="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399ae02cc8~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" title="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399ae02cc8~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" data-thumbnail="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e399ae02cc8~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png">
        
    </a></p>
<p>å› æ­¤ï¼Œå¦‚æœä½ ç™»å½•å¹¶è®¿é—®äº†ä½ æœ‰æƒè®¿é—®çš„å¦ä¸€ä¸ªé¡µé¢ï¼Œç”±äº HTTP ä¸ä¼šè®°å½•ä½ åˆšåˆšç™»å½•çš„ä¿¡æ¯ï¼Œå› æ­¤ä½ å°†å†æ¬¡ç™»å½•ã€‚</p>
<p><strong>JWT å’Œ Session Cookies å°±æ˜¯ç”¨æ¥å¤„ç†åœ¨ä¸åŒé¡µé¢ä¹‹é—´åˆ‡æ¢ï¼Œä¿å­˜ç”¨æˆ·ç™»å½•ä¿¡æ¯çš„æœºåˆ¶</strong>ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ç§æŠ€æœ¯éƒ½æ˜¯<strong>ç”¨æ¥ä¿å­˜ä½ çš„ç™»å½•çŠ¶æ€</strong>ï¼Œèƒ½å¤Ÿè®©ä½ åœ¨æµè§ˆä»»æ„å—å¯†ç ä¿æŠ¤çš„ç½‘ç«™ã€‚é€šè¿‡åœ¨æ¯æ¬¡äº§ç”Ÿæ–°çš„è¯·æ±‚æ—¶å¯¹ç”¨æˆ·æ•°æ®è¿›è¡Œèº«ä»½éªŒè¯æ¥è§£å†³æ­¤é—®é¢˜ã€‚</p>
<p>æ‰€ä»¥ JWT å’Œ Session Cookies çš„ç›¸åŒä¹‹å¤„æ˜¯ä»€ä¹ˆï¼Ÿé‚£å°±æ˜¯å®ƒä»¬èƒ½å¤Ÿæ”¯æŒä½ åœ¨å‘é€ä¸åŒè¯·æ±‚ä¹‹é—´ï¼Œè®°å½•å¹¶éªŒè¯ä½ çš„ç™»å½•çŠ¶æ€çš„ä¸€ç§æœºåˆ¶ã€‚</p>
<h3 id="ä»€ä¹ˆæ˜¯-session-cookies" class="headerLink">
    <a href="#%e4%bb%80%e4%b9%88%e6%98%af-session-cookies" class="header-mark"></a>ä»€ä¹ˆæ˜¯ Session Cookies</h3><p>Session Cookies ä¹Ÿç§°ä¸º<code>ä¼šè¯ Cookies</code>ï¼Œåœ¨ Session Cookies ä¸­ï¼Œç”¨æˆ·çš„ç™»å½•çŠ¶æ€ä¼šä¿å­˜åœ¨<code>æœåŠ¡å™¨</code>çš„<code>å†…å­˜</code>ä¸­ã€‚å½“ç”¨æˆ·ç™»å½•æ—¶ï¼ŒSession å°±è¢«æœåŠ¡ç«¯å®‰å…¨çš„åˆ›å»ºã€‚</p>
<p>åœ¨æ¯æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨éƒ½ä¼šä»ä¼šè¯ Cookie ä¸­è¯»å– SessionIdï¼Œå¦‚æœæœåŠ¡ç«¯çš„æ•°æ®å’Œè¯»å–çš„ SessionId ç›¸åŒï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šå‘é€å“åº”ç»™æµè§ˆå™¨ï¼Œå…è®¸ç”¨æˆ·ç™»å½•ã€‚</p>
<p>âš ï¸ ä¸‹å›¾æœ‰ç‚¹é—®é¢˜ï¼ŒåŸŸååº”è¯¥ä¸€è‡´ã€‚</p>
<p><a class="lightgallery" href="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39cc16b100~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" title="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39cc16b100~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" data-thumbnail="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39cc16b100~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png">
        
    </a></p>
<h3 id="ä»€ä¹ˆæ˜¯-json-web-tokens" class="headerLink">
    <a href="#%e4%bb%80%e4%b9%88%e6%98%af-json-web-tokens" class="header-mark"></a>ä»€ä¹ˆæ˜¯ Json Web Tokens</h3><p>Json Web Token çš„ç®€ç§°å°±æ˜¯ JWTï¼Œé€šå¸¸å¯ä»¥ç§°ä¸º <code>Json ä»¤ç‰Œ</code>ã€‚å®ƒæ˜¯<code>RFC 7519</code> ä¸­å®šä¹‰çš„ç”¨äº<code>å®‰å…¨çš„</code>å°†ä¿¡æ¯ä½œä¸º <code>Json å¯¹è±¡</code>è¿›è¡Œä¼ è¾“çš„ä¸€ç§å½¢å¼ã€‚JWT ä¸­å­˜å‚¨çš„ä¿¡æ¯æ˜¯ç»è¿‡<code>æ•°å­—ç­¾å</code>
çš„ï¼Œå› æ­¤å¯ä»¥è¢«ä¿¡ä»»å’Œç†è§£ã€‚å¯ä»¥ä½¿ç”¨ HMAC ç®—æ³•æˆ–ä½¿ç”¨ RSA/ECDSA çš„å…¬ç”¨/ä¸“ç”¨å¯†é’¥å¯¹ JWT è¿›è¡Œç­¾åã€‚</p>
<p>ä½¿ç”¨ JWT ä¸»è¦ç”¨æ¥ä¸‹é¢ä¸¤ç‚¹</p>
<ul>
<li>
<p><code>è®¤è¯(Authorization)</code>ï¼šè¿™æ˜¯ä½¿ç”¨ JWT æœ€å¸¸è§çš„ä¸€ç§æƒ…å†µï¼Œä¸€æ—¦ç”¨æˆ·ç™»å½•ï¼Œåé¢æ¯ä¸ªè¯·æ±‚éƒ½ä¼šåŒ…å« JWTï¼Œä»è€Œå…è®¸ç”¨æˆ·è®¿é—®è¯¥ä»¤ç‰Œæ‰€å…è®¸çš„è·¯ç”±ã€æœåŠ¡å’Œèµ„æºã€‚<code>å•ç‚¹ç™»å½•</code>æ˜¯å½“ä»Šå¹¿æ³›ä½¿ç”¨ JWT çš„ä¸€é¡¹åŠŸèƒ½ï¼Œå› ä¸ºå®ƒçš„å¼€é”€å¾ˆå°ã€‚</p>
</li>
<li>
<p><code>ä¿¡æ¯äº¤æ¢(Information Exchange)</code>ï¼šJWT æ˜¯èƒ½å¤Ÿå®‰å…¨ä¼ è¾“ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚é€šè¿‡ä½¿ç”¨å…¬é’¥/ç§é’¥å¯¹ JWT è¿›è¡Œç­¾åè®¤è¯ã€‚æ­¤å¤–ï¼Œç”±äºç­¾åæ˜¯ä½¿ç”¨ <code>head</code> å’Œ <code>payload</code>
è®¡ç®—çš„ï¼Œå› æ­¤ä½ è¿˜å¯ä»¥éªŒè¯å†…å®¹æ˜¯å¦é­åˆ°ç¯¡æ”¹ã€‚</p>
</li>
</ul>
<h4 id="jwt-çš„æ ¼å¼" class="headerLink">
    <a href="#jwt-%e7%9a%84%e6%a0%bc%e5%bc%8f" class="header-mark"></a>JWT çš„æ ¼å¼</h4><p>ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šæ¢è®¨ä¸€ä¸‹ JWT çš„ç»„æˆå’Œæ ¼å¼æ˜¯ä»€ä¹ˆ</p>
<p>JWT ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæ¯ä¸ªéƒ¨åˆ†ç”¨ <code>.</code> è¿›è¡Œåˆ†å‰²ï¼Œå„ä¸ªéƒ¨åˆ†åˆ†åˆ«æ˜¯</p>
<ul>
<li><code>Header</code></li>
<li><code>Payload</code></li>
<li><code>Signature</code></li>
</ul>
<p>å› æ­¤ï¼Œä¸€ä¸ªéå¸¸ç®€å•çš„ JWT ç»„æˆä¼šæ˜¯ä¸‹é¢è¿™æ ·</p>
<p><a class="lightgallery" href="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39ca50d82a~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" title="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39ca50d82a~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" data-thumbnail="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39ca50d82a~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png">
        
    </a></p>
<p><strong>Header</strong></p>
<p>Header æ˜¯ JWT çš„æ ‡å¤´ï¼Œå®ƒé€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<code>ä»¤ç‰Œçš„ç±»å‹(å³ JWT)</code>å’Œä½¿ç”¨çš„ <code>ç­¾åç®—æ³•</code>ï¼Œä¾‹å¦‚ <code>HMAC SHA256</code>ï¼ˆå†™æˆ HS256ï¼‰ æˆ– <code>RSA</code>ã€‚</p>
<p>ä¾‹å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;alg&#34;: &#34;HS256&#34;,
</span></span><span class="line"><span class="cl">  &#34;typ&#34;: &#34;JWT&#34;
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>æŒ‡å®šç±»å‹å’Œç­¾åç®—æ³•åï¼ŒJson å—è¢« <code>Base64Url</code> ç¼–ç å½¢æˆ JWT çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚</p>
<p><strong>Payload</strong></p>
<p>Token çš„ç¬¬äºŒéƒ¨åˆ†æ˜¯ <code>Payload</code>ï¼ŒPayload ä¸­åŒ…å«ä¸€ä¸ªå£°æ˜ã€‚å£°æ˜æ˜¯æœ‰å…³å®ä½“ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ï¼‰å’Œå…¶ä»–æ•°æ®çš„å£°æ˜ã€‚å…±æœ‰ä¸‰ç§ç±»å‹çš„å£°æ˜ï¼š<strong><code>registered</code>, <code>public</code> å’Œ <code>private</code></strong> å£°æ˜ã€‚</p>
<ul>
<li><code>registered å£°æ˜</code>ï¼š åŒ…å«ä¸€ç»„å»ºè®®ä½¿ç”¨çš„é¢„å®šä¹‰å£°æ˜ï¼Œä¸»è¦åŒ…æ‹¬</li>
</ul>
<table>
<thead>
<tr>
<th>ISS</th>
<th>ç­¾å‘äºº</th>
</tr>
</thead>
<tbody>
<tr>
<td>iss (issuer)</td>
<td>ç­¾å‘äºº</td>
</tr>
<tr>
<td>exp (expiration time)</td>
<td>è¿‡æœŸæ—¶é—´</td>
</tr>
<tr>
<td>sub (subject)</td>
<td>ä¸»é¢˜</td>
</tr>
<tr>
<td>aud (audience)</td>
<td>å—ä¼—</td>
</tr>
<tr>
<td>nbf (Not Before)</td>
<td>ç”Ÿæ•ˆæ—¶é—´</td>
</tr>
<tr>
<td>iat (Issued At)</td>
<td>ç­¾å‘æ—¶é—´</td>
</tr>
<tr>
<td>jti (JWT ID)</td>
<td>ç¼–å·</td>
</tr>
</tbody>
</table>
<ul>
<li><code>public å£°æ˜</code>ï¼šå…¬å…±çš„å£°æ˜ï¼Œå¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯ï¼Œä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†ã€‚</li>
<li><code>private å£°æ˜</code>ï¼šè‡ªå®šä¹‰å£°æ˜ï¼Œæ—¨åœ¨åœ¨åŒæ„ä½¿ç”¨å®ƒä»¬çš„å„æ–¹ä¹‹é—´å…±äº«ä¿¡æ¯ï¼Œæ—¢ä¸æ˜¯æ³¨å†Œå£°æ˜ä¹Ÿä¸æ˜¯å…¬å…±å£°æ˜ã€‚</li>
</ul>
<p>ä¾‹å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{
</span></span><span class="line"><span class="cl">  &#34;sub&#34;: &#34;1234567890&#34;,
</span></span><span class="line"><span class="cl">  &#34;name&#34;: &#34;John Doe&#34;,
</span></span><span class="line"><span class="cl">  &#34;admin&#34;: true
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶å payload Json å—ä¼šè¢«<code>Base64Url</code> ç¼–ç å½¢æˆ JWT çš„ç¬¬äºŒéƒ¨åˆ†ã€‚</p>
<p><strong>signature</strong></p>
<p>JWT çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>header (base64åçš„)</li>
<li>payload (base64åçš„)</li>
<li>secret</li>
</ul>
<p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦ HMAC SHA256 ç®—æ³•è¿›è¡Œç­¾å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">HMACSHA256(
</span></span><span class="line"><span class="cl">  base64UrlEncode(header) + &#34;.&#34; +
</span></span><span class="line"><span class="cl">  base64UrlEncode(payload),
</span></span><span class="line"><span class="cl">  secret)
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç­¾åç”¨äºéªŒè¯æ¶ˆæ¯åœ¨æ­¤è¿‡ç¨‹ä¸­æ²¡æœ‰æ›´æ”¹ï¼Œå¹¶ä¸”å¯¹äºä½¿ç”¨ç§é’¥è¿›è¡Œç­¾åçš„ä»¤ç‰Œï¼Œå®ƒè¿˜å¯ä»¥éªŒè¯ JWT çš„å‘é€è€…çš„çœŸå®èº«ä»½</p>
<h4 id="æ‹¼å‡‘åœ¨ä¸€èµ·" class="headerLink">
    <a href="#%e6%8b%bc%e5%87%91%e5%9c%a8%e4%b8%80%e8%b5%b7" class="header-mark"></a>æ‹¼å‡‘åœ¨ä¸€èµ·</h4><p>ç°åœ¨æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¸‰ä¸ªç”±ç‚¹åˆ†éš”çš„ Base64-URL å­—ç¬¦ä¸²éƒ¨åˆ†ç»„æˆåœ¨ä¸€èµ·ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥åœ¨ HTML å’Œ HTTP ç¯å¢ƒä¸­è½»æ¾ä¼ é€’è¿™äº›å­—ç¬¦ä¸²ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ JWT ç¤ºä¾‹ï¼Œå®ƒå¯¹ header å’Œ payload è¿›è¡Œç¼–ç ï¼Œç„¶åä½¿ç”¨ signature è¿›è¡Œç­¾å</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
</span></span></code></pre></td></tr></table>
</div>
</div><p><a class="lightgallery" href="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39cc29f678~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" title="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39cc29f678~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png" data-thumbnail="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/5/17147e39cc29f678~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.png">
        
    </a></p>
<p>å¦‚æœæƒ³è‡ªå·±æµ‹è¯•ç¼–å†™çš„è¯ï¼Œå¯ä»¥è®¿é—® JWT å®˜ç½‘ <a href="https://jwt.io/#debugger-io" target="_blank" rel="noopener noreferrer">https://jwt.io/#debugger-io</a></p>
<h3 id="jwt-å’Œ-session-cookies-çš„ä¸åŒ" class="headerLink">
    <a href="#jwt-%e5%92%8c-session-cookies-%e7%9a%84%e4%b8%8d%e5%90%8c" class="header-mark"></a>JWT å’Œ Session Cookies çš„ä¸åŒ</h3><p>JWT å’Œ Session Cookies éƒ½æä¾›å®‰å…¨çš„ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒ</p>
<h4 id="å¯†ç ç­¾å" class="headerLink">
    <a href="#%e5%af%86%e7%a0%81%e7%ad%be%e5%90%8d" class="header-mark"></a>å¯†ç ç­¾å</h4><p>JWT å…·æœ‰åŠ å¯†ç­¾åï¼Œè€Œ Session Cookies åˆ™æ²¡æœ‰ã€‚</p>
<h4 id="json-æ˜¯æ— çŠ¶æ€çš„" class="headerLink">
    <a href="#json-%e6%98%af%e6%97%a0%e7%8a%b6%e6%80%81%e7%9a%84" class="header-mark"></a>JSON æ˜¯æ— çŠ¶æ€çš„</h4><p>JWT æ˜¯<code>æ— çŠ¶æ€</code>çš„ï¼Œå› ä¸ºå£°æ˜è¢«å­˜å‚¨åœ¨<code>å®¢æˆ·ç«¯</code>ï¼Œè€Œä¸æ˜¯æœåŠ¡ç«¯å†…å­˜ä¸­ã€‚</p>
<p>èº«ä»½éªŒè¯å¯ä»¥åœ¨<code>æœ¬åœ°</code>è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚å¿…é¡»é€šè¿‡æœåŠ¡å™¨æ•°æ®åº“æˆ–ç±»ä¼¼ä½ç½®ä¸­è¿›è¡Œã€‚ è¿™æ„å‘³ç€å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œå¤šæ¬¡èº«ä»½éªŒè¯ï¼Œè€Œæ— éœ€ä¸ç«™ç‚¹æˆ–åº”ç”¨ç¨‹åºçš„æ•°æ®åº“è¿›è¡Œé€šä¿¡ï¼Œä¹Ÿæ— éœ€åœ¨æ­¤è¿‡ç¨‹ä¸­æ¶ˆè€—å¤§é‡èµ„æºã€‚</p>
<h4 id="å¯æ‰©å±•æ€§" class="headerLink">
    <a href="#%e5%8f%af%e6%89%a9%e5%b1%95%e6%80%a7" class="header-mark"></a>å¯æ‰©å±•æ€§</h4><p>Session Cookies æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœç½‘ç«™æˆ–è€…åº”ç”¨å¾ˆå¤§çš„æƒ…å†µä¸‹ä¼šè€—è´¹å¤§é‡çš„èµ„æºã€‚ç”±äº JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯ä»¥èŠ‚çœæœåŠ¡å™¨èµ„æºã€‚å› æ­¤ JWT è¦æ¯” Session Cookies å…·æœ‰æ›´å¼ºçš„<code>å¯æ‰©å±•æ€§</code>ã€‚</p>
<h4 id="jwt-æ”¯æŒè·¨åŸŸè®¤è¯" class="headerLink">
    <a href="#jwt-%e6%94%af%e6%8c%81%e8%b7%a8%e5%9f%9f%e8%ae%a4%e8%af%81" class="header-mark"></a>JWT æ”¯æŒè·¨åŸŸè®¤è¯</h4><p>Session Cookies åªèƒ½ç”¨åœ¨<code>å•ä¸ªèŠ‚ç‚¹çš„åŸŸ</code>æˆ–è€…å®ƒçš„<code>å­åŸŸ</code>ä¸­æœ‰æ•ˆã€‚å¦‚æœå®ƒä»¬å°è¯•é€šè¿‡ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹è®¿é—®ï¼Œå°±ä¼šè¢«ç¦æ­¢ã€‚å¦‚æœä½ å¸Œæœ›è‡ªå·±çš„ç½‘ç«™å’Œå…¶ä»–ç«™ç‚¹å»ºç«‹å®‰å…¨è¿æ¥æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p>ä½¿ç”¨ JWT å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ JWT èƒ½å¤Ÿé€šè¿‡<code>å¤šä¸ªèŠ‚ç‚¹</code>è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„<code>è·¨åŸŸè®¤è¯</code>ã€‚</p>
<h3 id="jwt-å’Œ-session-cookies-çš„é€‰å‹" class="headerLink">
    <a href="#jwt-%e5%92%8c-session-cookies-%e7%9a%84%e9%80%89%e5%9e%8b" class="header-mark"></a>JWT å’Œ Session Cookies çš„é€‰å‹</h3><p>æˆ‘ä»¬ä¸Šé¢æ¢è®¨äº† JWT å’Œ Cookies çš„ä¸åŒç‚¹ï¼Œç›¸ä¿¡ä½ ä¹Ÿä¼šå¯¹é€‰å‹æœ‰äº†æ›´æ·±çš„è®¤è¯†ï¼Œå¤§è‡´æ¥è¯´</p>
<p>å¯¹äºåªéœ€è¦ç™»å½•ç”¨æˆ·å¹¶è®¿é—®å­˜å‚¨åœ¨ç«™ç‚¹æ•°æ®åº“ä¸­çš„ä¸€äº›ä¿¡æ¯çš„ä¸­å°å‹ç½‘ç«™æ¥è¯´ï¼ŒSession Cookies é€šå¸¸å°±èƒ½æ»¡è¶³ã€‚</p>
<p>å¦‚æœä½ æœ‰ä¼ä¸šçº§ç«™ç‚¹ï¼Œåº”ç”¨ç¨‹åºæˆ–é™„è¿‘çš„ç«™ç‚¹ï¼Œå¹¶ä¸”éœ€è¦å¤„ç†å¤§é‡çš„è¯·æ±‚ï¼Œå°¤å…¶æ˜¯ç¬¬ä¸‰æ–¹æˆ–å¾ˆå¤šç¬¬ä¸‰æ–¹ï¼ˆåŒ…æ‹¬ä½äºä¸åŒåŸŸçš„APIï¼‰ï¼Œåˆ™ JWT æ˜¾ç„¶æ›´é€‚åˆã€‚</p>
<h2 id="faq" class="headerLink">
    <a href="#faq" class="header-mark"></a>FAQ</h2><h4 id="å¦‚ä½•ç¦ç”¨-cookies-åä½¿ç”¨-session" class="headerLink">
    <a href="#%e5%a6%82%e4%bd%95%e7%a6%81%e7%94%a8-cookies-%e5%90%8e%e4%bd%bf%e7%94%a8-session" class="header-mark"></a>å¦‚ä½•ç¦ç”¨ Cookies åï¼Œä½¿ç”¨ Session</h4><ul>
<li>å¦‚æœç¦ç”¨äº† Cookiesï¼ŒæœåŠ¡å™¨ä»ä¼šå°† sessionId ä»¥ cookie çš„æ–¹å¼å‘é€ç»™æµè§ˆå™¨ï¼Œä½†æ˜¯ï¼Œæµè§ˆå™¨ä¸å†ä¿å­˜è¿™ä¸ªcookie (å³sessionId) äº†ã€‚</li>
<li>å¦‚æœæƒ³è¦ç»§ç»­ä½¿ç”¨ sessionï¼Œéœ€è¦é‡‡ç”¨ <code>URL é‡å†™</code>
çš„æ–¹å¼æ¥å®ç°ï¼Œå¯ä»¥å‚è€ƒ <a href="https://www.cnblogs.com/Renyi-Fan/p/11012086.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/Renyi-Fan/p/11012086.html</a></li>
</ul>
<h3 id="jwt-å‰ç«¯è§£ç " class="headerLink">
    <a href="#jwt-%e5%89%8d%e7%ab%af%e8%a7%a3%e7%a0%81" class="header-mark"></a>JWT å‰ç«¯è§£ç </h3><p>åœ¨çº¿è§£å¯†å·¥å…·<a href="https://www.box3.cn/tools/jwt.html" target="_blank" rel="noopener noreferrer">https://www.box3.cn/tools/jwt.html</a></p>
<p>npm åŒ…<a href="https://www.npmjs.com/package/jwt-decode" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/jwt-decode</a></p>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://juejin.cn/post/6844904115080790023" target="_blank" rel="noopener noreferrer">çœ‹å®Œè¿™ç¯‡ Sessionã€Cookieã€Tokenï¼Œå’Œé¢è¯•å®˜æ‰¯çš®å°±æ²¡é—®é¢˜äº†</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2018/07/json_web_token-tutorial.html" target="_blank" rel="noopener noreferrer">JSON Web Token å…¥é—¨æ•™ç¨‹</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/193090304" target="_blank" rel="noopener noreferrer">è®¤è¯æ–¹å¼çš„å‰ä¸–ä»Šç”Ÿï¼Œä»¥åŠ JWT çš„ä½¿ç”¨</a></li>
</ul>
]]></description>
</item><item>
    <title>MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰</title>
    <link>https://www.xiaobinqt.cn/mysql-faq-2/</link>
    <pubDate>Sat, 21 May 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/mysql-faq-2/</guid>
    <description><![CDATA[<!-- authorï¼š xiaobinqt -->
<!-- emailï¼š xiaobinqt@163.com -->
<!-- https://xiaobinqt.github.io -->
<!-- https://www.xiaobinqt.cn -->
<h2 id="ç´¢å¼•æ•°æ®ç»“æ„ä¸ºä»€ä¹ˆä¸ä½¿ç”¨çº¢é»‘æ ‘æˆ–bæ ‘" class="headerLink">
    <a href="#%e7%b4%a2%e5%bc%95%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e4%b8%ba%e4%bb%80%e4%b9%88%e4%b8%8d%e4%bd%bf%e7%94%a8%e7%ba%a2%e9%bb%91%e6%a0%91%e6%88%96b%e6%a0%91" class="header-mark"></a>ç´¢å¼•æ•°æ®ç»“æ„ä¸ºä»€ä¹ˆä¸ä½¿ç”¨çº¢é»‘æ ‘æˆ–Bæ ‘</h2><p>åœ¨ InnoDB å¼•æ“ä¸­ï¼Œç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„æ˜¯ B+ æ ‘ã€‚MySQL çš„æ•°æ®æ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜çš„ï¼Œåœ¨æŸ¥è¯¢æ—¶ä¸€èˆ¬æ˜¯ä¸èƒ½ã€Œä¸€æ¬¡æ€§ã€æŠŠå…¨éƒ¨æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ã€‚çº¢é»‘æ ‘æ˜¯ã€ŒäºŒå‰æŸ¥æ‰¾æ ‘ã€çš„å˜ç§ï¼Œä¸€ä¸ª Node èŠ‚ç‚¹åªèƒ½å­˜å‚¨ä¸€ä¸ª<code>Key</code>å’Œä¸€ä¸ª<code>Value</code>ã€‚B å’Œ B+ æ ‘è·Ÿçº¢é»‘æ ‘ä¸ä¸€æ ·ï¼Œå®ƒä»¬ç®—æ˜¯ã€Œå¤šè·¯æœç´¢æ ‘ã€ï¼Œç›¸è¾ƒäºã€ŒäºŒå‰æœç´¢æ ‘ã€è€Œè¨€ï¼Œä¸€ä¸ª Node èŠ‚ç‚¹å¯ä»¥å­˜å‚¨çš„ä¿¡æ¯ä¼šæ›´å¤šï¼Œã€Œå¤šè·¯æœç´¢æ ‘ã€çš„é«˜åº¦ä¼šæ¯”ã€ŒäºŒå‰æœç´¢æ ‘ã€æ›´ä½ã€‚</p>
<p>äº†è§£äº†åŒºåˆ«ä¹‹åï¼Œå…¶å®å°±å¾ˆå®¹æ˜“å‘ç°ï¼Œåœ¨æ•°æ®ä¸èƒ½ä¸€æ¬¡åŠ è½½è‡³å†…å­˜çš„åœºæ™¯ä¸‹ï¼Œæ•°æ®éœ€è¦è¢«æ£€ç´¢å‡ºæ¥ï¼Œé€‰æ‹© B æˆ– B+ æ ‘çš„ç†ç”±å°±å¾ˆå……åˆ†äº†ï¼Œä¸€ä¸ª Node èŠ‚ç‚¹å­˜å‚¨ä¿¡æ¯æ›´å¤šï¼ˆç›¸è¾ƒäºäºŒå‰æœç´¢æ ‘ï¼‰ï¼Œ æ ‘çš„é«˜åº¦æ›´ä½ï¼Œ
<strong>æ ‘çš„é«˜åº¦å½±å“æ£€ç´¢çš„é€Ÿåº¦</strong>ã€‚</p>
<p>B+ æ ‘ç›¸å¯¹äº B æ ‘è€Œè¨€ï¼Œå®ƒåˆæœ‰ä¸¤ç§ç‰¹æ€§ï¼š</p>
<ul>
<li>
<p>B+ æ ‘éå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œåœ¨ç›¸åŒçš„æ•°æ®é‡ä¸‹ï¼ŒB+ æ ‘æ›´åŠ çŸ®å£®ã€‚æ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œéå¶å­èŠ‚ç‚¹çš„å­˜å‚¨èƒ½å­˜å‚¨æ›´å¤šçš„ç´¢å¼•ï¼Œæ‰€ä»¥æ•´æ£µæ ‘å°±æ›´åŠ çŸ®å£®ã€‚<strong>æ ‘çš„é«˜åº¦èƒ½å¤Ÿå†³å®šç£ç›˜ IO çš„æ¬¡æ•°</strong>ï¼Œç£ç›˜ IO æ¬¡æ•°è¶Šå°‘ï¼Œå¯¹äºæ€§èƒ½çš„æå‡å°±è¶Šå¤§ã€‚</p>
</li>
<li>
<p>å› ä¸ºå¶å­èŠ‚ç‚¹å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼Œæ‰€ä»¥ B+ æ ‘çš„å…¨å±€æ‰«æèƒ½åŠ›æ›´å¼ºä¸€äº›ï¼Œå› ä¸ºå®ƒåªéœ€è¦æ‰«æå¶å­èŠ‚ç‚¹ã€‚ä½†æ˜¯ B æ ‘éœ€è¦éå†æ•´ä¸ªæ ‘ã€‚B+ æ ‘å¶å­èŠ‚ç‚¹ä¹‹é—´ç»„æˆä¸€ä¸ªé“¾è¡¨ï¼Œæ–¹ä¾¿äºéå†æŸ¥è¯¢ï¼Œéå†æ“ä½œåœ¨ MySQL ä¸­æ¯”è¾ƒå¸¸è§ã€‚</p>
</li>
</ul>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221201/b768c90fe50b48aa8d7deec33efd7e8c.png" title="b&#43;æ ‘" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221201/b768c90fe50b48aa8d7deec33efd7e8c.png" data-sub-html="<h2>b&#43;æ ‘</h2><p>b&#43;æ ‘</p>">
        
    </a><figcaption class="image-caption">b+æ ‘</figcaption>
    </figure></p>
<p>åœ¨ MySQL InnoDB å¼•æ“ä¸‹ï¼Œæ¯åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œç›¸å½“äºç”Ÿæˆäº†ä¸€é¢— B+ æ ‘ã€‚å¦‚æœè¯¥ç´¢å¼•æ˜¯ã€Œèšé›†ï¼ˆèšç°‡ï¼‰ç´¢å¼•ã€ï¼Œé‚£å½“å‰ B+ æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨ç€ã€Œä¸»é”®å’Œå½“å‰è¡Œçš„æ•°æ®ã€ï¼Œå¦‚æœè¯¥ç´¢å¼•æ˜¯ã€Œéèšç°‡ç´¢å¼•ã€ï¼Œé‚£å½“å‰ B+ æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨ç€ã€Œä¸»é”®å’Œå½“å‰ç´¢å¼•åˆ—å€¼ã€</p>
<p>æ¯”å¦‚å†™äº†ä¸€å¥ğŸ‘‡</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">select</span> * from user where id &gt;<span class="o">=</span> <span class="m">10</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‚£åªè¦å®šä½åˆ° id ä¸º 10 çš„è®°å½•ï¼Œç„¶ååœ¨å¶å­èŠ‚ç‚¹ä¹‹é—´é€šè¿‡éå†é“¾è¡¨ï¼ˆå¶å­èŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨ï¼‰ï¼Œå³å¯æ‰¾åˆ°å¾€åçš„è®°å½•äº†ã€‚ç”±äº B æ ‘æ˜¯ä¼šåœ¨éå¶å­èŠ‚ç‚¹ä¹Ÿå­˜å‚¨æ•°æ®ï¼Œè¦éå†çš„æ—¶å€™å¯èƒ½å°±å¾—<strong>è·¨å±‚</strong>æ£€ç´¢ï¼Œç›¸å¯¹éº»çƒ¦äº›ã€‚åŸºäºæ ‘çš„å±‚çº§ä»¥åŠä¸šåŠ¡ä½¿ç”¨åœºæ™¯çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ MySQL é€‰æ‹©äº† B+ æ ‘ä½œä¸ºç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„ã€‚</p>
<h2 id="ä»€ä¹ˆå«åšå›è¡¨" class="headerLink">
    <a href="#%e4%bb%80%e4%b9%88%e5%8f%ab%e5%81%9a%e5%9b%9e%e8%a1%a8" class="header-mark"></a>ä»€ä¹ˆå«åšå›è¡¨</h2><p>å½“æˆ‘ä»¬ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢æ•°æ®æ—¶ï¼Œæ£€ç´¢å‡ºæ¥çš„æ•°æ®å¯èƒ½åŒ…å«å…¶ä»–åˆ—ï¼Œä½†èµ°çš„ç´¢å¼•æ ‘ï¼Œå¶å­èŠ‚ç‚¹åªèƒ½æŸ¥åˆ°å½“å‰åˆ—å€¼ä»¥åŠä¸»é”® IDï¼Œæ‰€ä»¥éœ€è¦æ ¹æ®ä¸»é”® ID å†å»æŸ¥ä¸€éæ•°æ®ï¼Œå¾—åˆ°SQL æ‰€éœ€çš„åˆ—ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç»™è®¢å•å·å­—æ®µ<code>orderId</code>å»ºäº†ä¸ªç´¢å¼•ï¼Œä½†æŸ¥è¯¢çš„ SQL æ˜¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="k">select</span> orderId,orderName from orderdetail where <span class="nv">orderId</span> <span class="o">=</span> <span class="m">123</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨<code>orderId</code>çš„ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹åªæœ‰<code>orderId</code>å’Œä¸»é”®<code>Id</code>ï¼Œè€Œæˆ‘ä»¬è¿˜æƒ³æ£€ç´¢å‡º<code>orderName</code>ï¼Œæ‰€ä»¥ MySQL ä¼šæ‹¿åˆ° ID å†å»æŸ¥å‡º<code>orderName</code>ç»™æˆ‘ä»¬è¿”å›ï¼Œè¿™ç§æ“ä½œå°±å«å›è¡¨ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221201/89f82e92055d4bd78318ab9baa4d9dd5.png" title="å›è¡¨" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221201/89f82e92055d4bd78318ab9baa4d9dd5.png" data-sub-html="<h2>å›è¡¨</h2><p>å›è¡¨</p>">
        
    </a><figcaption class="image-caption">å›è¡¨</figcaption>
    </figure></p>
<p>æƒ³è¦é¿å…å›è¡¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆèƒ½ä½¿ç”¨å°±ä½¿ç”¨ï¼Œå› ä¸ºå¯ä»¥é¿å…å›è¡¨æ“ä½œï¼‰ã€‚</p>
<p>æ‰€è°“çš„è¦†ç›–ç´¢å¼•ï¼Œå®é™…ä¸Šå°±æ˜¯ä½ æƒ³è¦æŸ¥å‡ºçš„åˆ—åˆšå¥½åœ¨å¶å­èŠ‚ç‚¹ä¸Šéƒ½å­˜åœ¨ï¼Œæ¯”å¦‚å»ºäº†<code>orderId</code>å’Œ<code>orderName</code>è”åˆç´¢å¼•ï¼Œåˆšå¥½æˆ‘éœ€è¦æŸ¥è¯¢ä¹Ÿæ˜¯<code>orderId</code>å’Œ<code>orderName</code>ï¼Œè¿™äº›æ•°æ®éƒ½å­˜åœ¨ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œå°±ä¸éœ€è¦å›è¡¨æ“ä½œäº†ã€‚æ‰€ä»¥ï¼Œå¦‚æœæŸ¥è¯¢çš„å­—æ®µæ°å¥½å‘½ä¸­è”åˆç´¢å¼•çš„å­—æ®µï¼Œåˆ™å¯ä»¥é¿å…å›è¡¨æ“ä½œã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™" class="headerLink">
    <a href="#%e4%bb%80%e4%b9%88%e6%98%af%e6%9c%80%e5%b7%a6%e5%8c%b9%e9%85%8d%e5%8e%9f%e5%88%99" class="header-mark"></a>ä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™</h2><p>å¦‚æœæœ‰è”åˆç´¢å¼• (a,b,c,d)ï¼Œå®é™…ä¸Šå…¶å®æ–°å»ºäº† <code>a</code>ï¼Œ<code>ab</code>ï¼Œ<code>abc</code>ï¼Œ<code>abcb</code> å››ä¸ªç´¢å¼•ï¼Œå› æ­¤åªè¦æŸ¥è¯¢ä¸­ä½¿ç”¨äº†è¿™ 4 ç»„å­—æ®µï¼Œéƒ½å¯ä»¥è®©è”åˆç´¢å¼•ç”Ÿæ•ˆã€‚</p>
<p>æŸ¥è¯¢æ¡ä»¶ <code>a=1 and b=2 and c&gt;3 and d=4</code>ï¼Œè¿™é‡Œåªèƒ½ä½¿ç”¨<code>a</code>ï¼Œ<code>b</code>å’Œ<code>aã€b</code>ç´¢å¼•ï¼Œè€Œä¸èƒ½ä½¿ç”¨<code>aã€bã€c</code>æˆ–<code>aã€bã€cã€d</code>ç´¢å¼•ã€‚</p>
<p>å…ˆåŒ¹é…æœ€å·¦è¾¹çš„ï¼Œç´¢å¼•åªèƒ½ç”¨äºæŸ¥æ‰¾<code>key</code>æ˜¯å¦å­˜åœ¨æˆ–ç›¸ç­‰ï¼Œé‡åˆ°èŒƒå›´æŸ¥è¯¢<code>&gt;</code>ã€<code>&lt;</code>ã€<code>between</code>ã€<code>like</code>å·¦åŒ¹é…ç­‰å°±ä¸èƒ½è¿›ä¸€æ­¥åŒ¹é…äº†ï¼Œåç»­é€€åŒ–ä¸ºçº¿æ€§æŸ¥æ‰¾ï¼Œè¿™å°±æ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ã€‚</p>
<h2 id="å®é™…é¡¹ç›®ä¸­å¦‚ä½•ç”Ÿæˆä¸»é”®" class="headerLink">
    <a href="#%e5%ae%9e%e9%99%85%e9%a1%b9%e7%9b%ae%e4%b8%ad%e5%a6%82%e4%bd%95%e7%94%9f%e6%88%90%e4%b8%bb%e9%94%ae" class="header-mark"></a>å®é™…é¡¹ç›®ä¸­å¦‚ä½•ç”Ÿæˆä¸»é”®</h2><p>ç”¨è‡ªå¢ä¸»é”®ã€‚é¦–å…ˆä¸»é”®å¾—ä¿è¯å®ƒçš„å”¯ä¸€æ€§å’Œç©ºé—´å°½å¯èƒ½çŸ­ï¼Œè¿™ä¸¤å—æ˜¯éœ€è¦è€ƒè™‘çš„ã€‚ç”±äºç´¢å¼•çš„æœ‰åºç‰¹æ€§ï¼Œid æœ¬èº«å…·æœ‰è¿ç»­æ€§ä½¿å¾—å¯¹åº”çš„æ•°æ®ä¹Ÿä¼šæŒ‰ç…§é¡ºåºå­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œå†™å…¥æ€§èƒ½å’Œæ£€ç´¢æ€§èƒ½éƒ½å¾ˆé«˜ã€‚å¦‚æœä½¿ç”¨ uuid è¿™ç§éšæœº idï¼Œé‚£ä¹ˆåœ¨é¢‘ç¹æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šå¯¼è‡´éšæœºç£ç›˜ IOï¼Œä»è€Œå¯¼è‡´æ€§èƒ½è¾ƒä½ã€‚</p>
<h2 id="å¦‚ä½•ç†è§£innodbå¼•æ“ä¸­çš„äº‹åŠ¡" class="headerLink">
    <a href="#%e5%a6%82%e4%bd%95%e7%90%86%e8%a7%a3innodb%e5%bc%95%e6%93%8e%e4%b8%ad%e7%9a%84%e4%ba%8b%e5%8a%a1" class="header-mark"></a>å¦‚ä½•ç†è§£InnoDBå¼•æ“ä¸­çš„äº‹åŠ¡</h2><p>äº‹åŠ¡å¯ä»¥ä½¿ã€Œä¸€ç»„æ“ä½œã€è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚äº‹åŠ¡å…¶ç›®çš„æ˜¯ä¸ºäº†ã€Œä¿è¯æ•°æ®æœ€ç»ˆçš„ä¸€è‡´æ€§ã€ã€‚</p>
<h2 id="äº‹åŠ¡çš„ç‰¹æ€§" class="headerLink">
    <a href="#%e4%ba%8b%e5%8a%a1%e7%9a%84%e7%89%b9%e6%80%a7" class="header-mark"></a>äº‹åŠ¡çš„ç‰¹æ€§</h2><p>ACIDï¼Œåˆ†åˆ«æ˜¯åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚</p>
<p><strong>åŸå­æ€§</strong>æŒ‡çš„æ˜¯ï¼šå½“å‰äº‹åŠ¡çš„æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚åŸå­æ€§ç”± undo log æ—¥å¿—æ¥ä¿è¯ï¼Œå› ä¸º undo log è®°è½½ç€æ•°æ®ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬è¦ insert ä¸€æ¡æ•°æ®äº†ï¼Œé‚£ undo log ä¼šè®°å½•çš„ä¸€æ¡å¯¹åº”çš„ delete æ—¥å¿—ã€‚æˆ‘ä»¬è¦ update ä¸€æ¡è®°å½•æ—¶ï¼Œé‚£ undo log ä¼šè®°å½•ä¹‹å‰çš„ã€Œæ—§å€¼ã€çš„ update è®°å½•ã€‚</p>
<p>å¦‚æœæ‰§è¡Œäº‹åŠ¡è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸çš„æƒ…å†µï¼Œé‚£æ‰§è¡Œã€Œå›æ»šã€ã€‚InnoDB å¼•æ“å°±æ˜¯åˆ©ç”¨ undo log è®°å½•ä¸‹çš„æ•°æ®ï¼Œæ¥å°†æ•°æ®ã€Œæ¢å¤ã€åˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/8a8fcedc257b42c8ad74a868363fdafe.png" title="åŸå­æ€§" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/8a8fcedc257b42c8ad74a868363fdafe.png" data-sub-html="<h2>åŸå­æ€§</h2><p>åŸå­æ€§</p>">
        
    </a><figcaption class="image-caption">åŸå­æ€§</figcaption>
    </figure></p>
<p><strong>éš”ç¦»æ€§</strong>æŒ‡çš„æ˜¯ï¼šåœ¨äº‹åŠ¡ã€Œå¹¶å‘ã€æ‰§è¡Œæ—¶ï¼Œä»–ä»¬å†…éƒ¨çš„æ“ä½œä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚å¦‚æœå¤šä¸ªäº‹åŠ¡å¯ä»¥åŒæ—¶æ“ä½œä¸€ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜ã€‚äºæ˜¯ï¼Œäº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´éœ€è¦å­˜åœ¨ã€Œä¸€å®šã€çš„éš”ç¦»ã€‚</p>
<p>åœ¨ InnoDB å¼•æ“ä¸­ï¼Œå®šä¹‰äº†å››ç§éš”ç¦»çº§åˆ«ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œåˆ†åˆ«æ˜¯ï¼š<strong><ruby>read uncommitted<rt>è¯»æœªæäº¤</rt></ruby></strong>ã€<strong><ruby>read committed<rt>è¯»å·²æäº¤</rt></ruby></strong>ã€<strong><ruby>repeatable read<rt>å¯é‡å¤å¤è¯»</rt></ruby></strong>ã€<strong><ruby>serializable<rt>ä¸²è¡Œ</rt></ruby></strong>ã€‚</p>
<p>ä¸åŒçš„éš”ç¦»çº§åˆ«å¯¹äº‹åŠ¡ä¹‹é—´çš„éš”ç¦»æ€§æ˜¯ä¸ä¸€æ ·çš„ï¼Œçº§åˆ«è¶Šé«˜äº‹åŠ¡éš”ç¦»æ€§è¶Šå¥½ï¼Œä½†æ€§èƒ½å°±è¶Šä½ï¼Œè€Œéš”ç¦»æ€§æ˜¯ç”± MySQL çš„å„ç§é”æ¥å®ç°çš„ï¼Œåªæ˜¯å®ƒå±è”½äº†åŠ é”çš„ç»†èŠ‚ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/20d805b51694457d955fbf985e0e9adb.png" title="éš”ç¦»æ€§" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/20d805b51694457d955fbf985e0e9adb.png" data-sub-html="<h2>éš”ç¦»æ€§</h2><p>éš”ç¦»æ€§</p>">
        
    </a><figcaption class="image-caption">éš”ç¦»æ€§</figcaption>
    </figure></p>
<p><strong>æŒä¹…æ€§</strong>æŒ‡çš„å°±æ˜¯ï¼šä¸€æ—¦æäº¤äº†äº‹åŠ¡ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ã€‚è¯´ç™½äº†å°±æ˜¯ï¼Œä¼šå°†æ•°æ®æŒä¹…åŒ–åœ¨ç¡¬ç›˜ä¸Šã€‚</p>
<p>è€ŒæŒä¹…æ€§ç”± redo log æ—¥å¿—æ¥ä¿è¯ã€‚å½“æˆ‘ä»¬è¦ä¿®æ”¹æ•°æ®æ—¶ï¼ŒMySQL æ˜¯å…ˆæŠŠè¿™æ¡è®°å½•æ‰€åœ¨çš„ã€Œé¡µã€æ‰¾åˆ°ï¼Œç„¶åæŠŠè¯¥é¡µåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå°†å¯¹åº”è®°å½•è¿›è¡Œä¿®æ”¹ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢å†…å­˜ä¿®æ”¹å®Œäº†ï¼ŒMySQL å°±æŒ‚æ‰çš„é—®é¢˜ã€‚å¦‚æœå†…å­˜æ”¹å®Œï¼Œç›´æ¥æŒ‚æ‰ï¼Œé‚£è¿™æ¬¡çš„ä¿®æ”¹ç›¸å½“äºå°±ä¸¢å¤±äº†ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼ŒMySQLå¼•å…¥äº† redo logï¼Œå†…å­˜å†™å®Œäº†ï¼Œç„¶åä¼šå†™ä¸€ä»½ redo logï¼Œè¿™ä»½ redo log è®°è½½ç€è¿™æ¬¡åœ¨æŸä¸ªé¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹ã€‚å³ä¾¿ MySQL åœ¨ä¸­é€”æŒ‚äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ® redo log æ¥å¯¹æ•°æ®è¿›è¡Œæ¢å¤ã€‚redo log æ˜¯é¡ºåºå†™çš„ï¼Œå†™å…¥é€Ÿåº¦å¾ˆå¿«ã€‚å¹¶ä¸”å®ƒè®°å½•çš„æ˜¯ç‰©ç†ä¿®æ”¹ï¼ˆxxxx é¡µåšäº† xxx ä¿®æ”¹ï¼‰ï¼Œæ–‡ä»¶çš„ä½“ç§¯å¾ˆå°ï¼Œæ¢å¤é€Ÿåº¦å¾ˆå¿«ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/a58e871764ee402e933beb1c10adae7c.png" title="æŒä¹…æ€§" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/a58e871764ee402e933beb1c10adae7c.png" data-sub-html="<h2>æŒä¹…æ€§</h2><p>æŒä¹…æ€§</p>">
        
    </a><figcaption class="image-caption">æŒä¹…æ€§</figcaption>
    </figure></p>
<p><strong>ä¸€è‡´æ€§</strong>ä»»ä½•ä¸€ä¸ªäº‹åŠ¡å‘ç”Ÿçš„å‰åï¼Œåº“ä¸­çš„æ•°æ®å˜åŒ–å¿…é¡»ä¸€è‡´ã€‚å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬ä½¿ç”¨äº‹åŠ¡çš„ã€Œç›®çš„ã€ï¼Œè€Œã€Œéš”ç¦»æ€§ã€ã€ŒåŸå­æ€§ã€ã€ŒæŒä¹…æ€§ã€å‡æ˜¯ä¸ºäº†ä¿éšœã€Œä¸€è‡´æ€§ã€çš„æ‰‹æ®µï¼Œä¿è¯ä¸€è‡´æ€§éœ€è¦ç”±åº”ç”¨ç¨‹åºä»£ç æ¥ä¿è¯ã€‚æ¯”å¦‚ï¼Œå¦‚æœäº‹åŠ¡åœ¨å‘ç”Ÿçš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†å¼‚å¸¸æƒ…å†µï¼Œæ­¤æ—¶ä½ å°±å¾—å›æ»šäº‹åŠ¡ï¼Œè€Œä¸æ˜¯å¼ºè¡Œæäº¤äº‹åŠ¡æ¥å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/4702334e18194c00b62d4001d1100e13.png" title="ä¸€è‡´æ€§" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/4702334e18194c00b62d4001d1100e13.png" data-sub-html="<h2>ä¸€è‡´æ€§</h2><p>ä¸€è‡´æ€§</p>">
        
    </a><figcaption class="image-caption">ä¸€è‡´æ€§</figcaption>
    </figure></p>
<h2 id="ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤" class="headerLink">
    <a href="#%e4%bb%80%e4%b9%88%e6%98%af%e4%b8%a4%e9%98%b6%e6%ae%b5%e6%8f%90%e4%ba%a4" class="header-mark"></a>ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤</h2><p>MySQL çš„ bin log åªèƒ½ç”¨äºå½’æ¡£ï¼Œä¸è¶³ä»¥å®ç°<strong><ruby>å´©æºƒæ¢å¤<rt>crash-safe</rt></ruby></strong>ï¼Œéœ€è¦å€ŸåŠ© InnoDB å¼•æ“çš„ redo log æ‰èƒ½æ‹¥æœ‰å´©æºƒæ¢å¤çš„èƒ½åŠ›ã€‚æ‰€è°“å´©æºƒæ¢å¤å°±æ˜¯ï¼Œå³ä½¿åœ¨æ•°æ®åº“å®•æœºçš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¸ä¼šå‡ºç°æ“ä½œä¸€åŠçš„æƒ…å†µã€‚</p>
<p><strong>bin log å’Œ redo log çš„åŒºåˆ«</strong>ğŸ‘‡</p>
<p>bin log æ˜¯ MySQL çš„ Server å±‚å®ç°çš„ï¼Œå¯¹æ‰€æœ‰å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè€Œ redo log æ˜¯ InnoDB å¼•æ“ç‰¹æœ‰çš„ã€‚</p>
<p>bin log æ˜¯å¯ä»¥è¿½åŠ å†™å…¥çš„ã€‚â€œè¿½åŠ å†™â€ æ˜¯æŒ‡ bin log æ–‡ä»¶å†™åˆ°ä¸€å®šå¤§å°åä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªï¼Œå¹¶ä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—ï¼Œä¿å­˜çš„æ˜¯å…¨é‡çš„æ—¥å¿—ã€‚ä½†æ˜¯è¿™å°±ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ²¡æœ‰æ ‡å¿—èƒ½è®© InnoDB ä» bin log ä¸­åˆ¤æ–­å“ªäº›æ•°æ®å·²ç»åˆ·å…¥ç£ç›˜äº†ï¼Œå“ªäº›æ•°æ®è¿˜æ²¡æœ‰ã€‚</p>
<p>redo log æ˜¯å¾ªç¯å†™çš„ï¼Œredo log åªä¼šè®°å½•æœªåˆ·å…¥ç£ç›˜çš„æ—¥å¿—ï¼Œå·²ç»åˆ·å…¥ç£ç›˜çš„æ•°æ®éƒ½ä¼šä» redo log è¿™ä¸ªæœ‰é™å¤§å°çš„æ—¥å¿—æ–‡ä»¶é‡Œåˆ é™¤ã€‚</p>
<p>bin log å› ä¸ºæ˜¯å…¨é‡æ—¥å¿—ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸ºæ¢å¤æ•°æ®ä½¿ç”¨ï¼Œä¸»ä»å¤åˆ¶æ­å»ºã€‚redo log å¯ä»¥ä½œä¸ºå¼‚å¸¸å®•æœºæˆ–è€…æ•…éšœåçš„æ•°æ®æ¢å¤ä½¿ç”¨ã€‚</p>
<p>ä»¥ä¸‹é¢çš„ SQL è¯­å¥ä¸ºä¾‹ï¼Œæ¥è§£é‡Šä¸‹æ‰§è¡Œå™¨å’Œ InnoDB å­˜å‚¨å¼•æ“åœ¨æ›´æ–°æ—¶åšäº†å“ªäº›äº‹æƒ…ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">update table <span class="nb">set</span> <span class="nv">age</span> <span class="o">=</span> age + <span class="m">1</span> where <span class="nv">id</span> <span class="o">=</span> 1<span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221206/0fa9678f6b214a63bfdd8506cabe8a28.png" title="ä¸¤é˜¶æ®µæäº¤" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221206/0fa9678f6b214a63bfdd8506cabe8a28.png" data-sub-html="<h2>ä¸¤é˜¶æ®µæäº¤</h2><p>ä¸¤é˜¶æ®µæäº¤</p>">
        
    </a><figcaption class="image-caption">ä¸¤é˜¶æ®µæäº¤</figcaption>
    </figure></p>
<p>æ‰€è°“ä¸¤é˜¶æ®µæäº¤ï¼Œå…¶å®å°±æ˜¯æŠŠ redo log çš„å†™å…¥æ‹†åˆ†æˆäº†ä¸¤ä¸ªæ­¥éª¤<code>prepare</code>å’Œ<code>commit</code>ã€‚æ ¹æ®ä¸¤é˜¶æ®µæäº¤ï¼Œå´©æºƒæ¢å¤æ—¶çš„åˆ¤æ–­è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š</p>
<p>å¦‚æœ redo log é‡Œé¢çš„äº‹åŠ¡æ˜¯å®Œæ•´çš„ï¼Œä¹Ÿå°±æ˜¯å·²ç»æœ‰äº† commit æ ‡è¯†ï¼Œåˆ™ç›´æ¥æäº¤ã€‚</p>
<p>å¦‚æœ redo log é‡Œé¢çš„äº‹åŠ¡å¤„äº prepare çŠ¶æ€ï¼Œåˆ™åˆ¤æ–­å¯¹åº”çš„äº‹åŠ¡ binlog æ˜¯å¦å­˜åœ¨å¹¶å®Œæ•´ã€‚</p>
<ol>
<li>å¦‚æœ binlog å­˜åœ¨å¹¶å®Œæ•´ï¼Œåˆ™æäº¤äº‹åŠ¡ï¼›</li>
<li>å¦åˆ™ï¼Œå›æ»šäº‹åŠ¡ã€‚</li>
</ol>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦ä¸¤é˜¶æ®µæäº¤" class="headerLink">
    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e9%9c%80%e8%a6%81%e4%b8%a4%e9%98%b6%e6%ae%b5%e6%8f%90%e4%ba%a4" class="header-mark"></a>ä¸ºä»€ä¹ˆéœ€è¦ä¸¤é˜¶æ®µæäº¤</h2><p>ä¸¤é˜¶æ®µæäº¤ä¸»è¦æ˜¯<strong>ä¸ºäº†è§£å†³ä¸»ä»æ•°æ®åŒæ­¥çš„é—®é¢˜</strong>ã€‚å¦‚æœæ²¡æœ‰ä¸¤é˜¶æ®µæäº¤ï¼Œé‚£ä¹ˆ binlog å’Œ redolog çš„æäº¤ï¼Œæ— éå°±æ˜¯ä¸¤ç§å½¢å¼ğŸ‘‡</p>
<ol>
<li>å…ˆå†™ bin-log å†å†™ redo-log</li>
<li>å…ˆå†™ redo-log å†å†™ bin-log</li>
</ol>
<p>å‡è®¾æˆ‘ä»¬è¦å‘è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½• Rï¼Œå¦‚æœæ˜¯å…ˆå†™ bin-log å†å†™ redo-logï¼Œé‚£ä¹ˆå‡è®¾ bin-log å†™å®Œåå´©æºƒäº†ï¼Œæ­¤æ—¶ redo-log è¿˜æ²¡å†™ã€‚é‚£ä¹ˆé‡å¯æ¢å¤çš„æ—¶å€™å°±ä¼šå‡ºé—®é¢˜ï¼šbin-log ä¸­å·²ç»æœ‰ R çš„è®°å½•äº†ï¼Œå½“ä»æœºä»ä¸»æœºåŒæ­¥æ•°æ®çš„æ—¶å€™æˆ–è€…æˆ‘ä»¬ä½¿ç”¨ bin-log æ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šåŒæ­¥åˆ° R è¿™æ¡è®°å½•ï¼›ä½†æ˜¯ redo-log ä¸­æ²¡æœ‰å…³äº R çš„è®°å½•ï¼Œæ‰€ä»¥å´©æºƒæ¢å¤ä¹‹åï¼Œæ’å…¥ R è®°å½•çš„è¿™ä¸ªäº‹åŠ¡æ˜¯æ— æ•ˆçš„ï¼Œå³æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥è¡Œè®°å½•ï¼Œè¿™å°±é€ æˆäº†æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p>ç›¸åï¼Œå‡è®¾æˆ‘ä»¬è¦å‘è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½• Rï¼Œå¦‚æœæ˜¯å…ˆå†™ redo-log å†å†™ bin-logï¼Œé‚£ä¹ˆå‡è®¾ redo-log å†™å®Œåå´©æºƒäº†ï¼Œæ­¤æ—¶ bin-log è¿˜æ²¡å†™ã€‚é‚£ä¹ˆé‡å¯æ¢å¤çš„æ—¶å€™ä¹Ÿä¼šå‡ºé—®é¢˜ï¼šredo-log ä¸­å·²ç»æœ‰ R çš„è®°å½•äº†ï¼Œæ‰€ä»¥å´©æºƒæ¢å¤ä¹‹åï¼Œæ’å…¥ R è®°å½•çš„è¿™ä¸ªäº‹åŠ¡æ˜¯æœ‰æ•ˆçš„ï¼Œé€šè¿‡è¯¥è®°å½•å°†æ•°æ®æ¢å¤åˆ°æ•°æ®åº“ä¸­ï¼›ä½†æ˜¯ bin-log ä¸­è¿˜æ²¡æœ‰å…³äº R çš„è®°å½•ï¼Œæ‰€ä»¥å½“ä»æœºä»ä¸»æœºåŒæ­¥æ•°æ®çš„æ—¶å€™æˆ–è€…æˆ‘ä»¬ä½¿ç”¨ bin-log æ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¸ä¼šåŒæ­¥åˆ° R è¿™æ¡è®°å½•ï¼Œè¿™å°±é€ æˆäº†æ•°æ®ä¸ä¸€è‡´ã€‚</p>
<h2 id="å››ç§éš”ç¦»çº§åˆ«" class="headerLink">
    <a href="#%e5%9b%9b%e7%a7%8d%e9%9a%94%e7%a6%bb%e7%ba%a7%e5%88%ab" class="header-mark"></a>å››ç§éš”ç¦»çº§åˆ«</h2><ol>
<li>Read uncommitted/RUï¼šè¯»æœªæäº¤ï¼Œå¤„äºè¯¥éš”ç¦»çº§åˆ«çš„æ•°æ®åº“ï¼Œè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜éƒ½æœ‰å¯èƒ½å‘ç”Ÿã€‚</li>
<li>Read committed/RCï¼šè¯»å·²æäº¤ï¼Œå¤„äºè¯¥éš”ç¦»çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»é—®é¢˜ï¼Œä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ä¾æ—§å­˜åœ¨ã€‚</li>
<li>Repeatable read/RRï¼šå¯é‡å¤è¯»ï¼Œå¤„äºè¯¥éš”ç¦»çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ã€‚</li>
<li>Serializableï¼šåºåˆ—åŒ–/ä¸²è¡ŒåŒ–ï¼Œå¤„äºè¯¥éš”ç¦»çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜éƒ½ä¸å­˜åœ¨ã€‚</li>
</ol>
<p>æ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œ<strong>ç”±ä½åˆ°é«˜</strong>ä¾æ¬¡ä¸º Read uncommitted ã€Read committedã€Repeatable read ã€Serializableã€‚</p>
<p>ä¸Šè¿°å››ä¸ªçº§åˆ«ï¼Œè¶Šé åå¹¶å‘æ§åˆ¶åº¦è¶Šé«˜ï¼Œä¹Ÿå°±æ˜¯åœ¨å¤šçº¿ç¨‹å¹¶å‘æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå‡ºç°é—®é¢˜çš„å‡ ç‡è¶Šå°ï¼Œä½†å¯¹åº”çš„ä¹Ÿæ€§èƒ½è¶Šå·®ï¼ŒMySQL çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œ é»˜è®¤ä¸ºç¬¬ä¸‰çº§åˆ«ï¼š<code>Repeatable read</code>å¯é‡å¤è¯»ã€‚</p>
<p>é¦–å…ˆæ¥çœ‹ä¸‹<strong><ruby>read uncommitted<rt>è¯»æœªæäº¤</rt></ruby></strong>ã€‚æ¯”å¦‚è¯´ï¼šA å‘ B è½¬è´¦ï¼ŒA æ‰§è¡Œäº†è½¬è´¦è¯­å¥ï¼Œä½† A è¿˜æ²¡æœ‰æäº¤äº‹åŠ¡ï¼ŒB è¯»å–æ•°æ®ï¼Œå‘ç°è‡ªå·±è´¦æˆ·é’±å˜å¤šäº†ï¼B è·Ÿ A è¯´ï¼Œæˆ‘å·²ç»æ”¶åˆ°é’±äº†ã€‚A å›æ»šäº‹åŠ¡ã€rollbackã€‘ï¼Œç­‰ B å†æŸ¥çœ‹è´¦æˆ·çš„é’±æ—¶ï¼Œå‘ç°é’±å¹¶æ²¡æœ‰å¤šã€‚</p>
<p>ç®€å•çš„å®šä¹‰å°±æ˜¯ï¼šäº‹åŠ¡ B è¯»å–åˆ°äº†äº‹åŠ¡ A è¿˜æ²¡æäº¤çš„æ•°æ®ï¼Œè¿™ç§ç”¨ä¸“ä¸šæœ¯è¯­æ¥è¯´å«åšã€Œ<strong>è„è¯»</strong>ã€ã€‚</p>
<p>å¯¹äºé”çš„ç»´åº¦è€Œè¨€ï¼Œå…¶å®å°±æ˜¯åœ¨ read uncommitted éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»ä¸ä¼šåŠ ä»»ä½•é”ï¼Œè€Œå†™ä¼šåŠ æ’ä»–é”ã€‚è¯»ä»€ä¹ˆé”éƒ½ä¸åŠ ï¼Œè¿™å°±è®©æ’ä»–é”æ— æ³•æ’å®ƒäº†ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/06ccfe53f21143e8a3a9093f0864ac46.png" title="è¯»æœªæäº¤" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/06ccfe53f21143e8a3a9093f0864ac46.png" data-sub-html="<h2>è¯»æœªæäº¤</h2><p>è¯»æœªæäº¤</p>">
        
    </a><figcaption class="image-caption">è¯»æœªæäº¤</figcaption>
    </figure></p>
<p>è€Œæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ›´æ–°æ“ä½œè€Œè¨€ï¼ŒInnoDB æ˜¯è‚¯å®šä¼šåŠ å†™é”çš„ï¼ˆæ•°æ®åº“æ˜¯ä¸å¯èƒ½å…è®¸åœ¨åŒä¸€æ—¶é—´ï¼Œæ›´æ–°åŒä¸€æ¡è®°å½•çš„ï¼‰ã€‚è€Œè¯»æ“ä½œï¼Œå¦‚æœä¸åŠ ä»»ä½•é”ï¼Œé‚£å°±ä¼šé€ æˆä¸Šé¢çš„è„è¯»ã€‚</p>
<p>è„è¯»åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è‚¯å®šæ˜¯æ— æ³•æ¥å—çš„ï¼Œé‚£å¦‚æœè¯»åŠ é”çš„è¯ï¼Œé‚£æ„å‘³ç€ï¼šå½“æ›´æ–°æ•°æ®çš„æ—¶ï¼Œå°±æ²¡åŠæ³•è¯»å–äº†ï¼Œè¿™ä¼šæå¤§åœ°é™ä½æ•°æ®åº“æ€§èƒ½ã€‚</p>
<p>åœ¨ MySQL InnoDB å¼•æ“å±‚é¢ï¼Œæœ‰æ–°çš„è§£å†³æ–¹æ¡ˆï¼Œè§£å†³åŠ é”åè¯»å†™æ€§èƒ½é—®é¢˜ï¼Œå«åš<strong><ruby>MVCC<rt>Multi-Version Concurrency Control</rt></ruby></strong>å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/0e52740b759b4aa490ef6e37497de964.png" title="MVCC" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/0e52740b759b4aa490ef6e37497de964.png" data-sub-html="<h2>MVCC</h2><p>MVCC</p>">
        
    </a><figcaption class="image-caption">MVCC</figcaption>
    </figure></p>
<p>åœ¨ MVCC ä¸‹ï¼Œå°±å¯ä»¥åšåˆ°è¯»å†™ä¸é˜»å¡ï¼Œä¸”é¿å…äº†ç±»ä¼¼è„è¯»è¿™æ ·çš„é—®é¢˜ã€‚é‚£ MVCC æ˜¯æ€ä¹ˆåšçš„å‘¢â“</p>
<p>MVCC é€šè¿‡ç”Ÿæˆæ•°æ®<strong><ruby>å¿«ç…§<rt>Snapshot</rt></ruby></strong>ï¼Œå¹¶ç”¨è¿™ä¸ªå¿«ç…§æ¥æä¾›ä¸€å®šçº§åˆ«ï¼ˆè¯­å¥çº§æˆ–äº‹åŠ¡çº§ï¼‰çš„ä¸€è‡´æ€§è¯»å–ã€‚</p>
<p>å›åˆ°äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ï¼Œé’ˆå¯¹äº<strong><ruby>read committed<rt>è¯»å·²æäº¤</rt></ruby></strong> éš”ç¦»çº§åˆ«ï¼Œå®ƒç”Ÿæˆçš„å°±æ˜¯<strong>è¯­å¥çº§å¿«ç…§</strong>ï¼Œè€Œé’ˆå¯¹äº<strong><ruby>repeatable read<rt>å¯é‡å¤è¯»</rt></ruby></strong>ï¼Œå®ƒç”Ÿæˆçš„å°±æ˜¯<strong>äº‹åŠ¡çº§çš„å¿«ç…§</strong>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/00282fd01288429b8b03a1407b7c5227.png" title="MVCC2" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/00282fd01288429b8b03a1407b7c5227.png" data-sub-html="<h2> </h2><p>MVCC2</p>">
        
    </a><figcaption class="image-caption"> </figcaption>
    </figure></p>
<p>å‰é¢æåˆ°è¿‡ read uncommitted éš”ç¦»çº§åˆ«ä¸‹ä¼šäº§ç”Ÿè„è¯»ï¼Œè€Œ<strong><ruby>read committed<rt>è¯»å·²æäº¤</rt></ruby></strong> éš”ç¦»çº§åˆ«è§£å†³äº†è„è¯»ã€‚æ€æƒ³å…¶å®å¾ˆç®€å•ï¼šåœ¨è¯»å–çš„æ—¶å€™ç”Ÿæˆä¸€ä¸ª â€œç‰ˆæœ¬å·â€ï¼Œç­‰åˆ°å…¶ä»–äº‹åŠ¡ commit äº†ä¹‹åï¼Œæ‰ä¼šè¯»å–æœ€æ–°å·² commit çš„ â€œç‰ˆæœ¬å·â€ æ•°æ®ã€‚</p>
<p>æ¯”å¦‚è¯´ï¼šäº‹åŠ¡ A è¯»å–äº†è®°å½•ï¼ˆç”Ÿæˆç‰ˆæœ¬å·ï¼‰ï¼Œäº‹åŠ¡ B ä¿®æ”¹äº†è®°å½•ï¼Œæ­¤æ—¶åŠ äº†å†™é”ï¼Œäº‹åŠ¡ A å†è¯»å–çš„æ—¶å€™ï¼Œæ˜¯ä¾æ®æœ€æ–°çš„ç‰ˆæœ¬å·æ¥è¯»å–çš„ï¼ˆå½“äº‹åŠ¡ B æ‰§è¡Œ commit äº†ä¹‹åï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰ˆæœ¬å·ï¼‰ï¼Œå¦‚æœäº‹åŠ¡ B è¿˜æ²¡æœ‰ commitï¼Œé‚£äº‹åŠ¡ A è¯»å–çš„è¿˜æ˜¯ä¹‹å‰ç‰ˆæœ¬å·çš„æ•°æ®ã€‚</p>
<p>é€šè¿‡ã€Œç‰ˆæœ¬ã€çš„æ¦‚å¿µï¼Œè¿™æ ·å°±è§£å†³äº†è„è¯»çš„é—®é¢˜ï¼Œè€Œã€Œç‰ˆæœ¬ã€å…¶å®å°±æ˜¯å¯¹åº”å¿«ç…§çš„æ•°æ®ã€‚</p>
<p><strong><ruby>read committed<rt>è¯»å·²æäº¤</rt></ruby></strong> è§£å†³äº†è„è¯»ï¼Œä½†ä¹Ÿä¼šæœ‰å…¶ä»–å¹¶å‘çš„é—®é¢˜ã€‚ã€Œä¸å¯é‡å¤è¯»ã€ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªäº‹åŠ¡å¯ä»¥çœ‹åˆ°å…¶ä»–äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ã€‚</p>
<p>ä¸å¯é‡å¤è¯»çš„ä¾‹å­ï¼šA æŸ¥è¯¢æ•°æ®åº“å¾—åˆ°æ•°æ®ï¼ŒB å»ä¿®æ”¹æ•°æ®åº“çš„æ•°æ®ï¼Œå¯¼è‡´ A å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“çš„ç»“æœéƒ½ä¸ä¸€æ ·ã€å±å®³ï¼šA æ¯æ¬¡æŸ¥è¯¢çš„ç»“æœéƒ½æ˜¯å— B çš„å½±å“çš„ã€‘</p>
<p>äº†è§£ MVCC ä¹‹åï¼Œå°±å¾ˆå®¹æ˜“æƒ³åˆ°<strong><ruby>repeatable read<rt>å¯é‡å¤å¤è¯»</rt></ruby></strong> éš”ç¦»çº§åˆ«æ˜¯æ€ä¹ˆé¿å…ä¸å¯é‡å¤è¯»çš„é—®é¢˜äº†ã€‚</p>
<p><strong><ruby>repeatable read<rt>å¯é‡å¤å¤è¯»</rt></ruby></strong>éš”ç¦»çº§åˆ«æ˜¯ã€Œäº‹åŠ¡çº§åˆ«ã€çš„å¿«ç…§ï¼æ¯æ¬¡è¯»å–çš„éƒ½æ˜¯ã€Œå½“å‰äº‹åŠ¡çš„ç‰ˆæœ¬ã€ï¼Œå³ä½¿å½“å‰æ•°æ®è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹äº†ï¼ˆcommitï¼‰ï¼Œä¹Ÿåªä¼šè¯»å–å½“å‰äº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/c8d49279d79f4b5fb09d26aba8a809bd.png" title="MVCC3" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/c8d49279d79f4b5fb09d26aba8a809bd.png" data-sub-html="<h2> </h2><p>MVCC3</p>">
        
    </a><figcaption class="image-caption"> </figcaption>
    </figure></p>
<p>è€Œ<strong><ruby>repeatable read<rt>å¯é‡å¤å¤è¯»</rt></ruby></strong> éš”ç¦»çº§åˆ«ä¼šå­˜åœ¨å¹»è¯»çš„é—®é¢˜ï¼Œã€Œå¹»è¯»ã€æŒ‡çš„æ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…è¯»å–åˆ°äº†åˆ«çš„äº‹åŠ¡<strong>æ’å…¥</strong>çš„æ•°æ®ï¼Œå¯¼è‡´å‰åè¯»å–ä¸ä¸€è‡´ã€‚</p>
<p>åœ¨ InnoDB å¼•æ“ä¸‹çš„çš„<strong><ruby>repeatable read<rt>å¯é‡å¤å¤è¯»</rt></ruby></strong>éš”ç¦»çº§åˆ«ä¸‹ï¼Œå¿«ç…§è¯» MVCC å½±å“ä¸‹ï¼Œå·²ç»è§£å†³äº†å¹»è¯»çš„é—®é¢˜ï¼ˆå› ä¸ºå®ƒæ˜¯è¯»å†å²ç‰ˆæœ¬çš„æ•°æ®ï¼‰ã€‚</p>
<p>è€Œå¦‚æœæ˜¯å½“å‰è¯»ï¼ˆæŒ‡çš„æ˜¯<code>select * from table for update</code>ï¼‰ï¼Œåˆ™éœ€è¦é…åˆé—´éš™é”æ¥è§£å†³å¹»è¯»çš„é—®é¢˜ã€‚</p>
<p>å‰©ä¸‹çš„å°±æ˜¯<strong><ruby>serializable<rt>ä¸²è¡Œ</rt></ruby></strong>éš”ç¦»çº§åˆ«äº†ï¼Œå®ƒçš„æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œç›¸å½“äºä¸å…è®¸äº‹åŠ¡çš„å¹¶å‘ï¼Œäº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´æ‰§è¡Œæ˜¯ä¸²è¡Œçš„ï¼Œå®ƒçš„æ•ˆç‡æœ€ä½ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯æœ€å®‰å…¨çš„ã€‚</p>
<h2 id="äº‹åŠ¡éš”ç¦»æœºåˆ¶çš„åº•å±‚å®ç°" class="headerLink">
    <a href="#%e4%ba%8b%e5%8a%a1%e9%9a%94%e7%a6%bb%e6%9c%ba%e5%88%b6%e7%9a%84%e5%ba%95%e5%b1%82%e5%ae%9e%e7%8e%b0" class="header-mark"></a>äº‹åŠ¡éš”ç¦»æœºåˆ¶çš„åº•å±‚å®ç°</h2><p>æ¯ç§éš”ç¦»çº§åˆ«éƒ½æ˜¯åŸºäºé”å’Œ MVCC æœºåˆ¶å®ç°çš„ğŸ‘‡</p>
<ul>
<li>è¯»æœªæäº¤/RUï¼šå†™æ“ä½œåŠ æ’ä»–é”ï¼Œè¯»æ“ä½œä¸åŠ é”ã€‚</li>
<li>è¯»å·²æäº¤/RCï¼šå†™æ“ä½œåŠ æ’ä»–é”ï¼Œè¯»æ“ä½œä½¿ç”¨ MVCCï¼Œä½†æ¯æ¬¡ select éƒ½ç”Ÿæˆè¯»è§†å›¾ã€‚</li>
<li>å¯é‡å¤è¯»/RRï¼šå†™æ“ä½œåŠ æ’ä»–é”ï¼Œè¯»æ“ä½œä¾æ—§é‡‡ç”¨ MVCC æœºåˆ¶ï¼Œä½†ä¸€æ¬¡äº‹åŠ¡ä¸­åªç”Ÿæˆä¸€ä¸ªè¯»è§†å›¾ã€‚</li>
<li>åºåˆ—åŒ–/Serializableï¼šæ‰€æœ‰å†™æ“ä½œåŠ ä¸´é”®é”ï¼ˆå…·å¤‡äº’æ–¥ç‰¹æ€§ï¼‰ï¼Œæ‰€æœ‰è¯»æ“ä½œåŠ å…±äº«é”ã€‚</li>
</ul>
<h2 id="mvccåŸç†" class="headerLink">
    <a href="#mvcc%e5%8e%9f%e7%90%86" class="header-mark"></a>MVCCåŸç†</h2><p>MVCC çš„ä¸»è¦æ˜¯é€šè¿‡ read view å’Œ undo log æ¥å®ç°çš„ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/3f80906689ea4930bbf75288bd905d3c.png" title="mvccåŸç†" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/3f80906689ea4930bbf75288bd905d3c.png" data-sub-html="<h2>mvccåŸç†</h2><p>mvccåŸç†</p>">
        
    </a><figcaption class="image-caption">mvccåŸç†</figcaption>
    </figure></p>
<p>undo log ä¼šè®°å½•ä¿®æ”¹æ•°æ®ä¹‹å‰çš„ä¿¡æ¯ï¼Œäº‹åŠ¡ä¸­çš„åŸå­æ€§å°±æ˜¯é€šè¿‡ undo log æ¥å®ç°çš„ã€‚æ‰€ä»¥æœ‰ undo log å¯ä»¥å¸®æˆ‘ä»¬æ‰¾åˆ°ã€Œç‰ˆæœ¬ã€çš„æ•°æ®ã€‚</p>
<p>è€Œ read view å®é™…ä¸Šå°±æ˜¯åœ¨æŸ¥è¯¢æ—¶ï¼ŒInnoDB ä¼šç”Ÿæˆä¸€ä¸ª read viewï¼Œread view æœ‰å‡ ä¸ªé‡è¦çš„å­—æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><code>trx_ids</code> å°šæœªæäº¤ commit çš„äº‹åŠ¡ç‰ˆæœ¬å·é›†åˆ</li>
<li><code>up_limit_id</code> ä¸‹ä¸€æ¬¡è¦ç”Ÿæˆçš„äº‹åŠ¡ ID å€¼</li>
<li><code>low_limit_id</code> å°šæœªæäº¤ç‰ˆæœ¬å·çš„äº‹åŠ¡ ID æœ€å°å€¼</li>
<li><code>creator_trx_id</code> å½“å‰çš„äº‹åŠ¡ç‰ˆæœ¬å·</li>
</ul>
<p>åœ¨æ¯è¡Œæ•°æ®æœ‰ä¸¤åˆ—éšè—çš„å­—æ®µï¼Œåˆ†åˆ«æ˜¯<code>DB_TRX_ID</code>ï¼ˆè®°å½•ç€å½“å‰ IDï¼‰ä»¥åŠ<code>DB_ROLL_PTR</code> æŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬æ•°æ®åœ¨ undo log é‡Œçš„ä½ç½®æŒ‡é’ˆï¼Œåˆ°è¿™é‡Œï¼Œå¾ˆå®¹æ˜“å°±å‘ç°ï¼ŒMVCC å…¶å®å°±æ˜¯é ã€Œæ¯”å¯¹ç‰ˆæœ¬ã€æ¥å®ç°è¯»å†™ä¸é˜»å¡ï¼Œè€Œç‰ˆæœ¬çš„æ•°æ®å­˜åœ¨äº undo log ä¸­ã€‚</p>
<p>è€Œé’ˆå¯¹äºä¸åŒçš„éš”ç¦»çº§åˆ« read committed å’Œ repeatable readï¼Œæ— éå°±æ˜¯ read committed éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ¯æ¬¡éƒ½è·å–ä¸€ä¸ªæ–°çš„ read viewï¼Œrepeatable read éš”ç¦»çº§åˆ«åˆ™æ¯æ¬¡äº‹åŠ¡åªè·å–ä¸€ä¸ª read viewã€‚</p>
<h2 id="å·¥ä½œä¸­å¦‚ä½•å»ºç´¢å¼•" class="headerLink">
    <a href="#%e5%b7%a5%e4%bd%9c%e4%b8%ad%e5%a6%82%e4%bd%95%e5%bb%ba%e7%b4%a2%e5%bc%95" class="header-mark"></a>å·¥ä½œä¸­å¦‚ä½•å»ºç´¢å¼•</h2><p>å¦‚æœè¡¨æœ‰ä¸€å®šçš„æ•°æ®é‡ï¼Œé‚£å°±åº”è¯¥è¦åˆ›å»ºå¯¹åº”çš„ç´¢å¼•ï¼Œåˆ›å»ºç´¢å¼•éœ€è¦æ³¨æ„çš„ç‚¹ï¼Œæ¯”å¦‚è¯´ğŸ‘‡</p>
<ol>
<li>
<p>æ˜¯å¦èƒ½ä½¿ç”¨ã€Œè¦†ç›–ç´¢å¼•ã€ï¼Œå‡å°‘ã€Œå›è¡¨ã€æ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚æ„å‘³ç€ï¼Œæˆ‘ä»¬åœ¨ select çš„æ—¶å€™ï¼Œä¸€å®šè¦æŒ‡æ˜å¯¹åº”çš„åˆ—ï¼Œè€Œä¸æ˜¯<code>select *</code></p>
</li>
<li>
<p>è€ƒè™‘æ˜¯å¦ç»„å»ºã€Œè”åˆç´¢å¼•ã€ï¼Œå¦‚æœç»„å»ºã€Œè”åˆç´¢å¼•ã€ï¼Œå°½é‡å°†åŒºåˆ†åº¦æœ€é«˜çš„æ”¾åœ¨æœ€å·¦è¾¹ï¼Œå¹¶ä¸”éœ€è¦è€ƒè™‘ã€Œæœ€å·¦åŒ¹é…åŸåˆ™ã€</p>
</li>
<li>
<p>å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°æ“ä½œæˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ</p>
</li>
<li>
<p>åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯ã€‚æ¯”å¦‚<code>limit offset</code>, n åœ¨ MySQL æ˜¯è·å– offset + n çš„è®°å½•ï¼Œå†è¿”å› n æ¡ã€‚è€Œåˆ©ç”¨å­æŸ¥è¯¢åˆ™æ˜¯æŸ¥å‡º n æ¡ï¼Œé€šè¿‡ ID æ£€ç´¢å¯¹åº”çš„è®°å½•å‡ºæ¥ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</li>
<li>
<p>é€šè¿‡ explain å‘½ä»¤æ¥æŸ¥çœ‹ SQL çš„æ‰§è¡Œè®¡åˆ’ï¼Œçœ‹çœ‹è‡ªå·±å†™çš„ SQL æ˜¯å¦èµ°äº†ç´¢å¼•ï¼Œèµ°äº†ä»€ä¹ˆç´¢å¼•ã€‚é€šè¿‡ show profile æ¥æŸ¥çœ‹ SQL å¯¹ç³»ç»Ÿèµ„æºçš„æŸè€—æƒ…å†µï¼ˆä¸è¿‡ä¸€èˆ¬è¿˜æ˜¯æ¯”è¾ƒå°‘ç”¨åˆ°ï¼‰</p>
</li>
<li>
<p>åœ¨å¼€å¯äº‹åŠ¡åï¼Œåœ¨äº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå¹¶æœ‰æ„è¯†åœ°å‡å°‘é”çš„æŒæœ‰æ—¶é—´ã€‚æ¯”å¦‚åœ¨äº‹åŠ¡å†…éœ€è¦æ’å…¥å’Œä¿®æ”¹æ•°æ®ï¼Œé‚£å¯ä»¥å…ˆæ’å…¥åä¿®æ”¹ã€‚å› ä¸ºä¿®æ”¹æ˜¯æ›´æ–°æ“ä½œï¼Œä¼šåŠ è¡Œé”ã€‚å¦‚æœå…ˆæ›´æ–°ï¼Œé‚£å¹¶å‘ä¸‹å¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªäº‹åŠ¡çš„è¯·æ±‚ç­‰å¾…è¡Œé”é‡Šæ”¾ã€‚</p>
</li>
</ol>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/7a6c78d1a5ac42e587ffd82ced372440.png" title="ç´¢å¼•" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/7a6c78d1a5ac42e587ffd82ced372440.png" data-sub-html="<h2>ç´¢å¼•</h2><p>ç´¢å¼•</p>">
        
    </a><figcaption class="image-caption">ç´¢å¼•</figcaption>
    </figure></p>
<h2 id="çº¿ä¸Šç”¨çš„æ˜¯ä»€ä¹ˆéš”ç¦»çº§åˆ«" class="headerLink">
    <a href="#%e7%ba%bf%e4%b8%8a%e7%94%a8%e7%9a%84%e6%98%af%e4%bb%80%e4%b9%88%e9%9a%94%e7%a6%bb%e7%ba%a7%e5%88%ab" class="header-mark"></a>çº¿ä¸Šç”¨çš„æ˜¯ä»€ä¹ˆéš”ç¦»çº§åˆ«</h2><p>æˆ‘ä»¬è¿™è¾¹ç”¨çš„æ˜¯<strong><ruby>Read committed<rt>è¯»å·²æäº¤</rt></ruby></strong>ï¼ŒMySQL é»˜è®¤ç”¨çš„æ˜¯ <strong><ruby>Repeatable read<rt>å¯é‡å¤è¯»</rt></ruby></strong>ã€‚</p>
<p>é€‰ç”¨ä»€ä¹ˆéš”ç¦»çº§åˆ«ï¼Œä¸»è¦çœ‹åº”ç”¨åœºæ™¯ï¼Œå› ä¸ºéš”ç¦»çº§åˆ«è¶Šä½ï¼Œäº‹åŠ¡å¹¶å‘æ€§èƒ½è¶Šé«˜ã€‚ä¸€èˆ¬äº’è”ç½‘å…¬å¸éƒ½é€‰æ‹© Read committed ä½œä¸ºä¸»è¦çš„éš”ç¦»çº§åˆ«ã€‚</p>
<p>åƒ<strong><ruby>Repeatable read<rt>å¯é‡å¤è¯»</rt></ruby></strong>éš”ç¦»çº§åˆ«ï¼Œå°±æœ‰å¯èƒ½å› ä¸ºã€Œé—´éš™é”ã€å¯¼è‡´çš„æ­»é”é—®é¢˜ã€‚</p>
<p>MySQL é»˜è®¤çš„éš”ç¦»çº§åˆ«ä¸º Repeatable readã€‚å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› æ˜¯åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼ŒMySQL çš„ binlog æ²¡æœ‰ row æ¨¡å¼ï¼ˆè®°å½•å…·ä½“å‡ºç°å˜æ›´çš„æ•°æ®ï¼Œä¹Ÿä¼šåŒ…å«æ•°æ®æ‰€åœ¨çš„åˆ†åŒºä»¥åŠæ‰€ä½äºçš„æ•°æ®é¡µï¼‰ï¼Œåœ¨ read committed éš”ç¦»çº§åˆ«ä¸‹ä¼šå­˜åœ¨ã€Œä¸»ä»æ•°æ®ä¸ä¸€è‡´ã€çš„é—®é¢˜ã€‚binlog è®°å½•äº†æ•°æ®åº“è¡¨ç»“æ„å’Œè¡¨æ•°æ®ã€Œå˜æ›´ã€ï¼Œæ¯”å¦‚<code>update/delete/insert/truncate/create</code>ã€‚åœ¨ MySQL ä¸­ï¼Œä¸»ä»åŒæ­¥å®é™…ä¸Šå°±æ˜¯åº”ç”¨äº† binlog æ¥å®ç°çš„ã€‚æœ‰äº†è¯¥å†å²åŸå› ï¼Œæ‰€ä»¥ MySQL å°±å°†é»˜è®¤çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸º Repeatable readã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/acbe1fc753c84d1e9a9ccbd047f8afc9.png" title="éš”ç¦»çº§åˆ«" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/acbe1fc753c84d1e9a9ccbd047f8afc9.png" data-sub-html="<h2>éš”ç¦»çº§åˆ«</h2><p>éš”ç¦»çº§åˆ«</p>">
        
    </a><figcaption class="image-caption">éš”ç¦»çº§åˆ«</figcaption>
    </figure></p>
<h2 id="ä¸ºä»€ä¹ˆèµ°äº†ç´¢å¼•æŸ¥è¯¢è¿˜æ˜¯æ…¢" class="headerLink">
    <a href="#%e4%b8%ba%e4%bb%80%e4%b9%88%e8%b5%b0%e4%ba%86%e7%b4%a2%e5%bc%95%e6%9f%a5%e8%af%a2%e8%bf%98%e6%98%af%e6%85%a2" class="header-mark"></a>ä¸ºä»€ä¹ˆèµ°äº†ç´¢å¼•æŸ¥è¯¢è¿˜æ˜¯æ…¢</h2><p>å¦‚æœèµ°å¯¹äº†ç´¢å¼•ï¼Œä½†æŸ¥è¯¢è¿˜æ˜¯æ…¢ï¼Œé‚£ä¸€èˆ¬æ¥è¯´å°±æ˜¯è¡¨çš„æ•°æ®é‡å®åœ¨æ˜¯å¤ªå¤§äº†ã€‚</p>
<p>é¦–å…ˆï¼Œè€ƒè™‘èƒ½ä¸èƒ½æŠŠã€Œæ—§çš„æ•°æ®ã€ç»™ â€œåˆ æ‰â€ ğŸ˜¢ å¦‚æœã€Œæ—§çš„æ•°æ®ã€å·²ç»æ²¡æœ‰æŸ¥è¯¢çš„ä¸šåŠ¡äº†ï¼Œé‚£æœ€ç®€å•çš„åŠæ³•è‚¯å®šæ˜¯ â€œåˆ æ‰â€ éƒ¨åˆ†æ•°æ®å’¯ã€‚æ•°æ®é‡é™ä½äº†ï¼Œé‚£è‡ªç„¶ï¼Œæ£€ç´¢é€Ÿåº¦å°±å¿«äº†&hellip;.</p>
<p>å…¶å®ï¼Œåªæœ‰æå°‘éƒ¨åˆ†ä¸šåŠ¡å¯ä»¥åˆ æ‰æ•°æ®&hellip;</p>
<p>é‚£ä¹ˆï¼Œå°±è€ƒè™‘å¦ä¸€ç§æƒ…å†µï¼Œèƒ½ä¸èƒ½åœ¨æŸ¥è¯¢ä¹‹å‰ï¼Œç›´æ¥èµ°ä¸€å±‚ç¼“å­˜ï¼ˆRedisï¼‰ã€‚</p>
<p>è€Œèµ°ç¼“å­˜çš„è¯ï¼Œåˆè¦çœ‹ä¸šåŠ¡èƒ½ä¸èƒ½å¿å—è¯»å–çš„ã€ŒéçœŸæ­£å®æ—¶ã€çš„æ•°æ®ï¼ˆæ¯•ç«Ÿ Redis å’Œ MySQL çš„æ•°æ®ä¸€è‡´æ€§éœ€è¦ä¿è¯ï¼‰ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ç›¸å¯¹å¤æ‚ä¸”å¤šå˜çš„è¯ï¼ˆæ¶‰åŠå„ç§ group by å’Œ sum ï¼‰ï¼Œé‚£èµ°ç¼“å­˜ä¹Ÿä¸æ˜¯ä¸€ç§å¥½çš„åŠæ³•ï¼Œç»´æŠ¤èµ·æ¥å°±ä¸æ–¹ä¾¿äº†â€¦</p>
<p>å†çœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰ã€Œå­—ç¬¦ä¸²ã€æ£€ç´¢çš„åœºæ™¯å¯¼è‡´æŸ¥è¯¢ä½æ•ˆï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æŠŠè¡¨çš„æ•°æ®å¯¼å…¥è‡³ Elasticsearch ç±»çš„æœç´¢å¼•æ“ï¼Œåç»­çš„çº¿ä¸ŠæŸ¥è¯¢å°±ç›´æ¥èµ° Elasticsearch äº†ã€‚</p>
<p><code>MySQL-&gt;Elasticsearch</code> éœ€è¦æœ‰å¯¹åº”çš„åŒæ­¥ç¨‹åºï¼ˆä¸€èˆ¬å°±æ˜¯ç›‘å¬ MySQL çš„ binlogï¼Œè§£æ binlog åå¯¼å…¥åˆ° Elasticsearch)ã€‚</p>
<p>å¦‚æœè¿˜ä¸æ˜¯çš„è¯ï¼Œé‚£è€ƒè™‘è¦ä¸è¦æ ¹æ®æŸ¥è¯¢æ¡ä»¶çš„ç»´åº¦ï¼Œåšç›¸å¯¹åº”çš„èšåˆè¡¨ï¼Œçº¿ä¸Šçš„è¯·æ±‚å°±æŸ¥è¯¢èšåˆè¡¨çš„æ•°æ®ï¼Œä¸èµ°åŸè¡¨ã€‚</p>
<p>æ¯”å¦‚ï¼Œç”¨æˆ·ä¸‹å•åï¼Œæœ‰ä¸€ä»½è®¢å•æ˜ç»†ï¼Œè€Œè®¢å•æ˜ç»†è¡¨çš„é‡çº§å¤ªå¤§ã€‚ä½†åœ¨äº§å“ä¾§ï¼ˆå‰å°ï¼‰é€å‡ºçš„æŸ¥è¯¢åŠŸèƒ½æ˜¯ä»¥ã€Œå¤©ã€ç»´åº¦æ¥å±•ç¤ºçš„ï¼Œé‚£å°±å¯ä»¥å°†æ¯ä¸ªç”¨æˆ·çš„æ¯å¤©æ•°æ®èšåˆèµ·æ¥ï¼Œåœ¨èšåˆè¡¨å°±æ˜¯ä¸€ä¸ªç”¨æˆ·ä¸€å¤©åªæœ‰ä¸€æ¡æ±‡æ€»åçš„æ•°æ®ã€‚æŸ¥è¯¢èµ°èšåˆåçš„è¡¨ï¼Œé‚£é€Ÿåº¦è‚¯å®šå¾ˆå¿«çš„ï¼ˆèšåˆåçš„è¡¨æ•°æ®é‡è‚¯å®šæ¯”åŸå§‹è¡¨è¦å°‘å¾ˆå¤šï¼‰ã€‚</p>
<p>æ€è·¯å¤§è‡´çš„å°±æ˜¯ã€Œä»¥ç©ºé—´æ¢æ—¶é—´ã€ï¼Œç›¸åŒçš„æ•°æ®æ¢åˆ«çš„åœ°æ–¹ä¹Ÿå­˜å‚¨ä¸€ä»½ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/9861ea4c29cb40a583593ce747b146d6.png" title="ç©ºé—´æ¢æ—¶é—´" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/9861ea4c29cb40a583593ce747b146d6.png" data-sub-html="<h2>ç©ºé—´æ¢æ—¶é—´</h2><p>ç©ºé—´æ¢æ—¶é—´</p>">
        
    </a><figcaption class="image-caption">ç©ºé—´æ¢æ—¶é—´</figcaption>
    </figure></p>
<h2 id="å†™æ€§èƒ½çš„ç“¶é¢ˆå¦‚ä½•å¤„ç†" class="headerLink">
    <a href="#%e5%86%99%e6%80%a7%e8%83%bd%e7%9a%84%e7%93%b6%e9%a2%88%e5%a6%82%e4%bd%95%e5%a4%84%e7%90%86" class="header-mark"></a>å†™æ€§èƒ½çš„ç“¶é¢ˆå¦‚ä½•å¤„ç†</h2><p>å¦‚æœåœ¨ MySQL è¯»å†™éƒ½æœ‰ç“¶é¢ˆï¼Œé‚£é¦–å…ˆçœ‹ä¸‹ç›®å‰ MySQL çš„æ¶æ„æ˜¯æ€ä¹ˆæ ·çš„ã€‚</p>
<p>å¦‚æœæ˜¯å•åº“çš„ï¼Œé‚£æ˜¯ä¸æ˜¯å¯ä»¥è€ƒè™‘å‡çº§è‡³ä¸»ä»æ¶æ„ï¼Œå®ç°è¯»å†™åˆ†ç¦»ã€‚</p>
<p>ç®€å•ç†è§£å°±æ˜¯ï¼šä¸»åº“æ¥æ”¶å†™è¯·æ±‚ï¼Œä»åº“æ¥æ”¶è¯»è¯·æ±‚ã€‚ä»åº“çš„æ•°æ®ç”±ä¸»åº“å‘é€çš„ binlog è¿›è€Œæ›´æ–°ï¼Œå®ç°ä¸»ä»æ•°æ®ä¸€è‡´ï¼ˆåœ¨ä¸€èˆ¬åœºæ™¯ä¸‹ï¼Œä¸»ä»çš„æ•°æ®æ˜¯é€šè¿‡å¼‚æ­¥æ¥ä¿è¯æœ€ç»ˆä¸€è‡´æ€§çš„ï¼‰ã€‚</p>
<p>å¦‚æœåœ¨ä¸»ä»æ¶æ„ä¸‹ï¼Œè¯»å†™ä»å­˜åœ¨ç“¶é¢ˆï¼Œé‚£å°±è¦è€ƒè™‘æ˜¯å¦è¦åˆ†åº“åˆ†è¡¨äº†ã€‚</p>
<p>æˆ‘è¿™é‡Œè®²çš„åˆ†åº“åˆ†è¡¨çš„å«ä¹‰æ˜¯ï¼šåœ¨åŸæ¥çš„æŸä¸ªåº“çš„æŸä¸ªè¡¨è¿›è€Œæ‹†åˆ†ã€‚</p>
<p>æ¯”å¦‚ï¼Œç°åœ¨æˆ‘æœ‰ä¸€å¼ ä¸šåŠ¡è®¢å•è¡¨ï¼Œè¿™å¼ è®¢å•è¡¨åœ¨å¹¿å‘Šåº“ä¸­ï¼Œå‡å®šè¿™å¼ ä¸šåŠ¡è®¢å•è¡¨å·²ç»æœ‰ 1 äº¿æ•°æ®é‡äº†ï¼Œç°åœ¨æˆ‘è¦åˆ†åº“åˆ†è¡¨ï¼Œé‚£å°±ä¼šå°†è¿™å¼ è¡¨çš„æ•°æ®åˆ†è‡³å¤šä¸ªå¹¿å‘Šåº“ä»¥åŠå¤šå¼ è¡¨ä¸­ã€‚</p>
<p>åˆ†åº“åˆ†è¡¨çš„æœ€æ˜æ˜¾çš„å¥½å¤„å°±æ˜¯æŠŠè¯·æ±‚è¿›è¡Œå‡æ‘Šï¼ˆæœ¬æ¥å•ä¸ªåº“å•ä¸ªè¡¨æœ‰ä¸€äº¿çš„æ•°æ®ï¼Œé‚£å‡è®¾æˆ‘åˆ†å¼€ 8 ä¸ªåº“ï¼Œé‚£æ¯ä¸ªåº“ 1200+W çš„æ•°æ®é‡ï¼Œæ¯ä¸ªåº“ä¸‹åˆ† 8 å¼ è¡¨ï¼Œé‚£æ¯å¼ è¡¨å°± 150W çš„æ•°æ®é‡ï¼‰ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/6583d2b4aed24774a316bced6d17e38b.png" title="åˆ†åº“åˆ†è¡¨" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/6583d2b4aed24774a316bced6d17e38b.png" data-sub-html="<h2>åˆ†åº“åˆ†è¡¨</h2><p>åˆ†åº“åˆ†è¡¨</p>">
        
    </a><figcaption class="image-caption">åˆ†åº“åˆ†è¡¨</figcaption>
    </figure></p>
<h2 id="å¸¸ä»¥ä»€ä¹ˆä½œä¸ºåˆ†åº“é”®" class="headerLink">
    <a href="#%e5%b8%b8%e4%bb%a5%e4%bb%80%e4%b9%88%e4%bd%9c%e4%b8%ba%e5%88%86%e5%ba%93%e9%94%ae" class="header-mark"></a>å¸¸ä»¥ä»€ä¹ˆä½œä¸ºåˆ†åº“é”®</h2><p>ä¸€èˆ¬æ¥è¯´æ˜¯æŒ‰ç…§<code>userId</code>ï¼Œå› ä¸ºæŒ‰ç…§ç”¨æˆ·çš„ç»´åº¦æŸ¥è¯¢æ¯”è¾ƒå¤šï¼Œå¦‚æœè¦æŒ‰ç…§å…¶ä»–çš„ç»´åº¦è¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£è¿˜æ˜¯å‚ç…§ä¸Šé¢çš„çš„æ€è·¯ï¼ˆä»¥ç©ºé—´æ¢æ—¶é—´ï¼‰ã€‚</p>
<h2 id="åˆ†åº“åˆ†è¡¨åçš„idæ˜¯æ€ä¹ˆç”Ÿæˆçš„" class="headerLink">
    <a href="#%e5%88%86%e5%ba%93%e5%88%86%e8%a1%a8%e5%90%8e%e7%9a%84id%e6%98%af%e6%80%8e%e4%b9%88%e7%94%9f%e6%88%90%e7%9a%84" class="header-mark"></a>åˆ†åº“åˆ†è¡¨åçš„IDæ˜¯æ€ä¹ˆç”Ÿæˆçš„</h2><p>è¿™å°±æ¶‰åŠåˆ°åˆ†å¸ƒå¼ ID ç”Ÿæˆçš„æ–¹å¼äº†ï¼Œæ€è·¯æœ‰å¾ˆå¤šã€‚æœ‰å€ŸåŠ© MySQL è‡ªå¢çš„ï¼Œæœ‰å€ŸåŠ© Redis è‡ªå¢çš„ï¼Œæœ‰åŸºäºã€Œé›ªèŠ±ç®—æ³•ã€è‡ªå¢çš„ã€‚å…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œé‚£å°±çœ‹å…¬å¸çš„æŠ€æœ¯æ ˆäº†ï¼Œä¸€èˆ¬ä½¿ç”¨ Redis å’ŒåŸºäºã€Œé›ªèŠ±ç®—æ³•ã€å®ç°ç”¨å¾—æ¯”è¾ƒå¤šã€‚</p>
<blockquote>
<p>è‡³äºä¸ºä»€ä¹ˆå¼ºè°ƒè‡ªå¢ï¼Œè¿˜æ˜¯è·Ÿç´¢å¼•æ˜¯æœ‰åºæœ‰å…³ï¼Œå¯ä»¥çœ‹å‰é¢</p>
</blockquote>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/059ac16a9707417a91f9342bb8f9330c.png" title="åˆ†åº“åˆ†è¡¨çš„ä¸»é”®" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221202/059ac16a9707417a91f9342bb8f9330c.png" data-sub-html="<h2>åˆ†åº“åˆ†è¡¨çš„ä¸»é”®</h2><p>åˆ†åº“åˆ†è¡¨çš„ä¸»é”®</p>">
        
    </a><figcaption class="image-caption">åˆ†åº“åˆ†è¡¨çš„ä¸»é”®</figcaption>
    </figure></p>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://mp.weixin.qq.com/s/74lPw8-keqM_niBDoOXSCQ" target="_blank" rel="noopener noreferrer">MySQL ç´¢å¼•</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&amp;mid=2247485997&amp;idx=1&amp;sn=b05b4a56d0248e9c7108bd01eb95438d" target="_blank" rel="noopener noreferrer">MySQL äº‹åŠ¡ã€é”å’ŒMVCC</a></li>
<li><a href="https://mp.weixin.qq.com/s?__biz=MzU4NzA3MTc5Mg==&amp;mid=2247486035&amp;idx=1&amp;sn=7878dd9b45bc79e210eca1478ac2d9be" target="_blank" rel="noopener noreferrer">MySQL è°ƒä¼˜</a></li>
<li><a href="https://juejin.cn/post/6844904199952531463" target="_blank" rel="noopener noreferrer">redo log/binlog/ä¸¤é˜¶æ®µæäº¤</a></li>
</ul>
]]></description>
</item><item>
    <title>MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B&#43; æ ‘ç´¢å¼•</title>
    <link>https://www.xiaobinqt.cn/why-mysql-index-use-btree/</link>
    <pubDate>Fri, 20 May 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/why-mysql-index-use-btree/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221127/8018e68746b147a8bba7dac0c65ae308.png" referrerpolicy="no-referrer">
            </div><!-- authorï¼š xiaobinqt -->
<!-- emailï¼š xiaobinqt@163.com -->
<!-- https://xiaobinqt.github.io -->
<!-- https://www.xiaobinqt.cn -->
<h2 id="å‰è¨€" class="headerLink">
    <a href="#%e5%89%8d%e8%a8%80" class="header-mark"></a>å‰è¨€</h2><p>ä¸ºä»€ä¹ˆ MySQL é‡‡ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•ï¼Ÿ</p>
<p>å¦‚æœçº¯ç²¹çš„çŒœæµ‹ MySQL æ•°æ®åº“ç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ï¼Ÿé‚£ä¹ˆå›´ç»•è¿™ä¸ªé—®é¢˜çš„å›ç­”é€šå¸¸ä¸€å®šæ˜¯å›´ç»• B+ æ ‘æœ¬èº«æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿è¿™ä¸¤ç‚¹å»è§£é‡Šè¿™ä¸ªé—®é¢˜ã€‚</p>
<p>è¿™ä¸æ˜¯æˆ‘å¼€å§‹è¿™ä¹ˆå»æƒ³çš„ï¼Œçœ‹äº†å¾ˆå¤šæ–‡ç« éƒ½æ˜¯ä»è¿™ä¸€ç»´åº¦é—®ç­”ï¼Œè¿™äº›å›ç­”è®©æˆ‘å¤±æœ›ã€‚ç›´åˆ°é‚£å¤©é—®äº†ååœ¨æˆ‘æ—è¾¹é‚£ä¸ªæ•´å¤©æ‘¸é±¼çš„ 5 å¹´ç¨‹åºå‘˜ï¼›ä»–æ…µæ‡’çš„å›ç­”ï¼šä½ æƒ³ä¸ºä»€ä¹ˆæ˜¯ä½¿ç”¨çš„æ˜¯æ ‘ç»“æ„å‘¢ï¼Ÿå’¦ï¼Œå¬åˆ°è¿™å›ç­”ï¼Œä¸€ä¸‹æ‰“å¼€äº†æˆ‘çš„æ€ç»ªï¼Œæœ‰ç‚¹æ„æ€ï¼</p>
<p>å…ˆæŠ›å¼€ B+ æ ‘æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Œè¿™äº›å…ˆå…¥ä¸ºä¸»çš„ç­”æ¡ˆã€‚æˆ‘æƒ³è¦çš„æ˜¯ä¸ºä»€ä¹ˆâ“</p>
<p>ä¸ºä»€ä¹ˆ MySQL çš„ç´¢å¼•æœ‰é‚£ä¹ˆå¤šçš„æ•°æ®ç»“æ„å¯é€‰ï¼Œååé€‰æ ‘ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆé‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆåˆååé‡‡ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•?</p>
<p>è¿™æ‰æ˜¯æˆ‘è¦æƒ³æ˜ç™½çš„ï¼æˆ‘æƒ³è¦çš„æ˜¯ä¸åªæ˜¯ç­”æ¡ˆï¼Œè¿˜è¦ç­”æ¡ˆèƒŒåçš„è„‰ç»œï¼æˆ‘æƒ³è¦çš„ä¸ä»…æ˜¯è¦çŸ¥å…¶ç„¶ï¼Œæ›´æƒ³è¦çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚</p>
<h2 id="é‚£ä¹ˆå¤šæ•°æ®ç»“æ„ä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„" class="headerLink">
    <a href="#%e9%82%a3%e4%b9%88%e5%a4%9a%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e4%b8%ba%e4%bb%80%e4%b9%88%e9%80%89%e6%a0%91%e7%bb%93%e6%9e%84" class="header-mark"></a>é‚£ä¹ˆå¤šæ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„ï¼Ÿ</h2><p>ä¼—å¤šçš„æ•°æ®ç»“æ„åœ¨é€»è¾‘å±‚é¢å¯åˆ†ä¸ºï¼š<strong>çº¿æ€§ç»“æ„</strong>å’Œ<strong>éçº¿æ€§ç»“æ„</strong>ã€‚</p>
<p>çº¿æ€§ç»“æ„æœ‰ï¼š<strong>æ•°ç»„</strong>ã€<strong>é“¾è¡¨</strong>ï¼ŒåŸºäºå®ƒä»¬è¡ç”Ÿå‡ºçš„æœ‰<strong>å“ˆå¸Œè¡¨</strong>ï¼ˆå“ˆå¸Œè¡¨ä¹Ÿç§°æ•£åˆ—è¡¨ï¼‰ã€<strong>æ ˆ</strong>ã€<strong>é˜Ÿåˆ—</strong>ç­‰ã€‚</p>
<p>éçº¿æ€§ç»“æ„æœ‰ï¼š<strong>æ ‘</strong>ã€<strong>å›¾</strong>ã€‚</p>
<p>è¿˜æœ‰å…¶ä»–æ•°æ®ç»“æ„å¦‚ï¼š<strong>è·³è¡¨</strong>ã€<strong>ä½å›¾</strong> ä¹Ÿéƒ½ç”±åŸºç¡€æ•°æ®ç»“æ„æ¼”åŒ–è€Œæ¥ï¼Œä¸åŒçš„æ•°æ®ç»“æ„å­˜åœ¨å³éƒ½æ˜¯ä¸ºäº†è§£å†³æŸäº›åœºæ™¯é—®é¢˜ã€‚</p>
<p>å¦‚æœè¦çŸ¥é“ç´¢å¼•é€‚åˆä»€ä¹ˆæ•°æ®ç»“æ„ï¼Œé‚£æˆ‘ä»¬å¾—å…ˆæ¥å›ç­”ç´¢å¼•éœ€è¦æ¥è§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜ï¼ˆç—›ç‚¹ï¼‰ï¼Ÿå’Œå‘æŒ¥ç€ä»€ä¹ˆæ ·çš„ä½œç”¨ï¼Ÿå…¶æ¬¡å†æ‰æ˜¯é€‰æ‹©ä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„ã€‚åè€…åªæ˜¯æœï¼Œå‰è€…æ‰æ˜¯å› ã€‚</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ MySQL å­˜å‚¨çš„æ•°æ®æ˜¯åœ¨ç£ç›˜é‡Œï¼Œå› ä¸ºå³ä½¿è®¾å¤‡æ–­ç”µï¼Œæ”¾åœ¨ç£ç›˜çš„æ•°æ®æ˜¯ä¸ä¼šæœ‰å½±å“çš„ï¼Œä¿éšœäº†æ•°æ®ä¸ä¸¢å¤±ï¼Œè¿™æ„å‘³ç€ MySQL åœ¨ç£ç›˜ä¸Šçš„æ•°æ®æ˜¯æŒä¹…åŒ–çš„ã€‚</p>
<p>ä½†æ•°æ®å­˜å‚¨åœ¨ç£ç›˜å¾—åˆ°ä¿éšœçš„åŒæ—¶ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼Œè¿™ä»£ä»·å°±æ˜¯ç£ç›˜çš„å¤„ç†é€Ÿåº¦æ˜¯æ¯«ç§’çº§åˆ«çš„ï¼Œç›¸æ¯”<strong>å†…å­˜çº³ç§’çº§åˆ«</strong>çš„é€Ÿåº¦ï¼Œç®€ç›´æ˜¯å°å·«è§å¤§å·«ã€‚</p>
<p>ä½ å¯èƒ½å¯¹æ—¶é—´å•ä½æ²¡ä»€ä¹ˆæ¦‚å¿µï¼Œå¯ä»¥çœ‹ 1 æ¯«ç§’èƒ½æ…¢ä¸Šçº³ç§’å‡ ä¸‡å€ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/f12d0ec3934f47c49269efd3c57283a0.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/f12d0ec3934f47c49269efd3c57283a0.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/f12d0ec3934f47c49269efd3c57283a0.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>ç´¢å¼•è™½ç„¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œä½†ä½¿ç”¨ç´¢å¼•æŸ¥æ‰¾æ•°æ®æ—¶ï¼Œå¯ä»¥ä»ç£ç›˜å…ˆè¯»å–ç´¢å¼•æ”¾åˆ°å†…å­˜ä¸­ï¼Œå†é€šè¿‡ç´¢å¼•ä»ç£ç›˜æ‰¾åˆ°æ•°æ®ï¼›å†ç„¶åå°†ç£ç›˜è¯»å–åˆ°çš„æ•°æ®ä¹Ÿæ”¾åˆ°å†…å­˜é‡Œã€‚ç´¢å¼•å°±è®©ç£ç›˜å’Œå†…å­˜å¼ºå¼ºè”æ‰‹ï¼Œè¶æœºæ­ä¸Šäº†å†…å­˜çš„è½¦ï¼Œæ„Ÿå—äº†ä¸€æŠŠçº³ç§’çº§åˆ«é€Ÿåº¦çš„æ¨èƒŒæ„Ÿã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/134c7c03e62d4c8bbc867daa00cbc789.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/134c7c03e62d4c8bbc867daa00cbc789.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/134c7c03e62d4c8bbc867daa00cbc789.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>ä½†æ˜¯ä¸ç®¡æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­æ€ä¹ˆä¼˜åŒ–ï¼Œåªè¦æ ¹è¿˜åœ¨ç£ç›˜ï¼Œå°±é¿å…ä¸äº†ä¼šå‘ç”Ÿå¤šæ¬¡ç£ç›˜ I/O ï¼Œè€Œç£ç›˜ I/O æ¬¡æ•°è¶Šå¤šï¼Œæ¶ˆè€—çš„æ—¶é—´ä¹Ÿè¶Šå¤šã€‚èªæ˜çš„ä½ è¿™ä¼šå„¿å¯ä»¥çœ‹å‡ºè¿™å…¶å®å°±æ˜¯ä¸ªéœ€è¦è€ƒè™‘è§£å†³çš„ç—›ç‚¹äº†ã€‚</p>
<ul>
<li><strong>è¦å°½å°‘åœ¨ç£ç›˜åš I/O æ“ä½œ</strong></li>
</ul>
<p>ä½†è¿˜æœ‰é‚£ä¹ˆå¤šçš„æ•°æ®ç»“æ„å¯é€‰å‘¢ã€‚å…¶å®ç´¢å¼•éœ€è¦å‘æŒ¥çš„ç›®çš„å·²ç»å†³å®šäº†æœ‰å“ªäº›æ•°æ®ç»“æ„å¯é€‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç¼©å°é€‰æ‹©å…¶ä»–æ•°æ®ç»“æ„çš„èŒƒå›´ã€‚ä»ä¸ºä»€ä¹ˆè¦å»ºç´¢å¼•æœ¬èº«çš„é¦–è¦ç›®çš„å‡ºå‘ã€‚</p>
<ul>
<li><strong>è¦èƒ½å°½å¿«çš„æŒ‰ç…§åŒºé—´é«˜æ•ˆåœ°èŒƒå›´æŸ¥æ‰¾</strong></li>
</ul>
<p>å½“ç„¶ç´¢å¼•é¦–è¦ç›®çš„<strong>èƒ½æ”¯æŒé«˜æ•ˆèŒƒå›´æŸ¥è¯¢ï¼Œè¿˜è¦æœ‰æ’å…¥æ›´æ–°ç­‰æ“ä½œçš„åŠ¨æ€æ•°æ®ç»“æ„</strong>ã€‚</p>
<p>æ‰€ä»¥æœ‰æ»¡è¶³ä»¥è¿™ä¸¤æ¡ä¸»è¦æ¡ä»¶çš„é™¤äº†æ ‘ç»“æ„ä½ è¿˜ä¼šæƒ³åˆ°å…¶ä»–ä»€ä¹ˆæ•°æ®ç»“æ„ï¼Ÿè¿˜æœ‰å°±æ˜¯å“ˆå¸Œè¡¨ã€è·³è¡¨</p>
<h3 id="å“ˆå¸Œè¡¨" class="headerLink">
    <a href="#%e5%93%88%e5%b8%8c%e8%a1%a8" class="header-mark"></a>å“ˆå¸Œè¡¨</h3><p>å“ˆå¸Œè¡¨çš„ç‰©ç†å­˜å‚¨æ˜¯ä¸€ä¸ªæ•°ç»„âš ï¸ï¼Œè€Œæ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯<strong>è¿ç»­åœ°å€</strong>çš„ç©ºé—´ã€‚</p>
<p>æ•°æ®ä»¥ <code>Key</code>ã€<code>Value</code> çš„æ–¹å¼å­˜å‚¨ã€‚å“ˆå¸Œè¡¨æ‹¥æœ‰ç²¾ç¡®çš„æŸ¥è¯¢ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(1)</code>ã€‚</p>
<p>è€Œå“ˆå¸Œè¡¨ä¹‹æ‰€ä»¥èƒ½è¿™ä¹ˆå¿«æ˜¯é€šè¿‡ <code>Key </code>è®¡ç®—æ•°ç»„ä¸‹æ ‡æ¥å¿«é€Ÿæ‰¾åˆ° <code>Value</code>ã€‚</p>
<p>æœ€ç®€å•çš„è®¡ç®—çš„æ–¹å¼æ˜¯ <strong>ä½™æ•°æ³•</strong>ï¼Œé€šè¿‡å…ˆè®¡ç®—<code>key</code>çš„ <code>HashCode</code>ï¼Œå†é€šè¿‡<strong>å“ˆå¸Œè¡¨çš„æ•°ç»„é•¿åº¦</strong>å¯¹ <code>HashCode</code> æ±‚ä½™ï¼Œæ±‚ä½™å¾—å‡ºçš„ä½™æ•°å°±æ˜¯æ•°ç»„ä¸‹æ ‡ï¼Œæœ€åç”±ä¸‹æ ‡è®¿é—®åˆ°å“ˆå¸Œè¡¨ä¸­å­˜çš„<code>Keyã€Value</code>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/c9364955db264236a436b221756a1a1a.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/c9364955db264236a436b221756a1a1a.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/c9364955db264236a436b221756a1a1a.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>ä½†æ˜¯ <code>Key</code> è®¡ç®—å‡ºçš„ä¸‹æ ‡<strong>å¯èƒ½ä¼šæœ‰ç›¸åŒ</strong>çš„æƒ…å†µï¼Œä¾‹å¦‚ <code>HashCode 1010</code> å¯¹ <code>6</code> å–ä½™æ˜¯ <code>2</code>ï¼Œä½†æ˜¯ <code>HashCode 1112</code> å¯¹ <code>6</code> å–ä½™ä¹Ÿæ˜¯ <code>2</code>ã€‚</p>
<p>å“ˆå¸Œç®—æ³•éšæœºè®¡ç®—å‡º HashCode å–ä½™æ•°ç»„é•¿åº¦å¯èƒ½å‡ºç°æ•°ç»„ä¸‹æ ‡ç›¸åŒçš„æƒ…å†µï¼Œå°±æ˜¯æ‰€è°“çš„ <strong><code>å“ˆå¸Œå†²çª</code></strong>ã€‚</p>
<p>è€Œ <code>å“ˆå¸Œå†²çª</code> å¸¸ç”¨ <code>é“¾è¡¨</code> çš„æ–¹æ³•è§£å†³ã€‚å½“å‘ç”Ÿ <code>å“ˆå¸Œå†²çª</code>ï¼Œç›¸åŒä¸‹æ ‡çš„æ•°æ®å…ƒç´ ä¼šæ›¿æ¢æˆå­˜å‚¨æŒ‡é’ˆï¼Œè€Œä¸åŒ <code>Key</code> çš„æ•°æ®å…ƒç´ æ·»åŠ åˆ°é“¾è¡¨ä¸­ã€‚æŸ¥æ‰¾æ—¶é€šè¿‡æŒ‡é’ˆéå†è¿™ä¸ªé“¾è¡¨ï¼Œå†åŒ¹é…å‡ºæ­£ç¡®çš„ <code>Key</code> å°±å¯ä»¥ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/7cdd6369532c417a9843dcf83fcfa584.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/7cdd6369532c417a9843dcf83fcfa584.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/7cdd6369532c417a9843dcf83fcfa584.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ<code>Key</code> æ˜¯ &ldquo;ä¸€é¢—å‰½æ‚çš„ç§å­&rdquo; çš„å­—ç¬¦ä¸² ï¼Œ<code>Value</code> æ˜¯ &ldquo;ä¸è¦å¿˜äº†å…³æ³¨ã€ç‚¹èµã€è¯„è®º&rdquo;ã€‚æˆ‘ä»¬é€šè¿‡è®¡ç®—<code>key</code>ä¸º <code>HashCodeï¼ˆ1010ï¼‰</code> çš„æ•´æ•°å‹å€¼<code>int</code>ã€‚ç„¶åç”¨ <code>HashCodeï¼ˆ1010ï¼‰</code> å¯¹é•¿åº¦ä¸º <code>6</code> çš„å“ˆå¸Œè¡¨æ•°ç»„é•¿åº¦åšå–ä½™å¾—å‡º <code>2</code>ï¼Œè¿™ <code>2</code> çš„å€¼å…ƒç´ å°±æ˜¯ ( Key = &ldquo;ä¸€é¢—å‰½æ‚çš„ç§å­&rdquo;,Value = &ldquo;ä¸è¦å¿˜äº†å…³æ³¨ã€ç‚¹èµã€è¯„è®º&rdquo;) ã€‚</p>
<p>è™½ç„¶å“ˆå¸Œè¡¨è™½ç„¶å¯ä»¥é«˜æ•ˆçš„ç­‰å€¼æŸ¥è¯¢ã€‚ä¾‹å¦‚SQLï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">select * from weixin where username = &#34;ä¸€é¢—å‰½æ‚çš„ç§å­&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯<strong>ä¸æ”¯æŒåŒºé—´æŸ¥è¯¢</strong>ã€‚ä¾‹å¦‚SQLï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">select * from weixin where age &lt; 18
</span></span></code></pre></td></tr></table>
</div>
</div><p>é‚£ä¹ˆå¦‚æœå“ˆå¸Œè¡¨ç”¨æ¥åšæˆç´¢å¼•ï¼Œå½“è¿›è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶æ„å‘³ç€è¦å…¨éƒ¨æ‰«æã€‚ç±»ä¼¼ Redis å­˜å‚¨å½¢å¼æ˜¯ KV çš„ NoSQL æ•°æ®åº“ï¼Œä¼šé€‚åˆç­‰å€¼æŸ¥è¯¢çš„åœºæ™¯ã€‚</p>
<h3 id="è·³è¡¨" class="headerLink">
    <a href="#%e8%b7%b3%e8%a1%a8" class="header-mark"></a>è·³è¡¨</h3><p>è·³è¡¨ä¼¼ä¹å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯ä¸€ä¸ªæ¯”è¾ƒé™Œç”Ÿçš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯åœ¨ Redis ä¸­å´æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚è·³è¡¨åº•å±‚å®è´¨å°±æ˜¯å¯ä»¥è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾çš„<strong>æœ‰åºé“¾è¡¨</strong>ï¼Œä»–åœ¨é“¾è¡¨åŸºç¡€åŠ ä¸Šç´¢å¼•å±‚ï¼Œå³èƒ½æ”¯æŒæ’å…¥ã€åˆ é™¤ç­‰åŠ¨æ€æ“ä½œï¼Œä¹Ÿæ”¯æŒæŒ‰åŒºé—´é«˜æ•ˆæŸ¥è¯¢ã€‚è€Œä¸”ä¸ç®¡æ˜¯æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ <code>O(logn)</code>ã€‚</p>
<p>è¦ç†è§£è·³è¡¨ï¼Œå…ˆæ¥çœ‹é“¾è¡¨ï¼Œå‡è®¾é“¾è¡¨å­˜å‚¨æ˜¯æœ‰åºçš„æ•°æ®ï¼Œæˆ‘ä»¬è¦æƒ³æŸ¥è¯¢æŸä¸€ä¸ªæ•°æ®ï¼Œåœ¨æœ€å·®çš„æƒ…å†µä¸‹è¦ä»å¤´å…¨éå†æ•´ä¸ªé“¾è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(n)</code>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/8b760ec0cec045aea1302676ec385eaf.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/8b760ec0cec045aea1302676ec385eaf.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/8b760ec0cec045aea1302676ec385eaf.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè·³è¡¨æ˜¯åœ¨é“¾è¡¨åŸºç¡€ä¸ŠåŠ äº†ç´¢å¼•å±‚ã€‚å¯ä»¥èµ·åˆ°æ”¯æŒåŒºé—´æŸ¥è¯¢çš„ä½œç”¨ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/de330e29044d428c93fcaa5b6f1669d8.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/de330e29044d428c93fcaa5b6f1669d8.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/de330e29044d428c93fcaa5b6f1669d8.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>ä»ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¦‚æœè¦æŸ¥è¯¢ä¸€ä¸ª <code>26</code> çš„èŠ‚ç‚¹ï¼Œè·³è¡¨å°±å¯ä»¥å…ˆä»ç´¢å¼•å±‚éå†ï¼Œå½“éå†åˆ°åœ¨ç´¢å¼•å±‚çš„ <code>21</code> èŠ‚ç‚¹ï¼Œä¼šå‘ç°ä¸‹ä¸€ä¸ªç´¢å¼•å±‚çš„èŠ‚ç‚¹æ˜¯ <code>36</code> èŠ‚ç‚¹æ—¶ï¼Œå¾ˆæ˜æ˜¾è¦æ‰¾çš„ <code>26</code>
çš„èŠ‚ç‚¹å°±åœ¨è¿™åŒºé—´ã€‚æ­¤æ—¶æˆ‘ä»¬åªè¦å†é€šè¿‡ç´¢å¼•å±‚æŒ‡å‘åŸå§‹é“¾è¡¨çš„æŒ‡é’ˆå¾€ä¸‹ç§»åˆ°åŸå§‹é“¾è¿™ä¸€å±‚éå†ï¼Œåªè¦éå† <code>2</code> ä¸ªèŠ‚ç‚¹å³å¯æ‰¾åˆ° <code>26</code> äº†ã€‚<del>å¦‚æœç”¨åŸæ¥çš„é“¾è¡¨éœ€è¦éå† <code>10</code> ä¸ªèŠ‚ç‚¹ï¼Œç°åœ¨åªè¦éå† <code>8</code> ä¸ªèŠ‚ç‚¹</del>ã€‚å¦‚æœç”¨åŸæ¥çš„é“¾è¡¨éœ€è¦éå† <code>8</code> ä¸ªèŠ‚ç‚¹ï¼Œç°åœ¨ä¹Ÿåªè¦éå† <code>8</code> ä¸ªèŠ‚ç‚¹ï¼ˆ<code>5-&gt;10-&gt;16-&gt;21-&gt;36-&gt;21-&gt;21-&gt;26</code>
ï¼‰ï¼Œä½†æ˜¯å¯¹äºå¤§é‡æ•°æ®æ¥è¯´ï¼Œæ˜¯å¯ä»¥èŠ‚çœæŸ¥è¯¢æ—¶é—´çš„ã€‚ï¼ˆåŸæ–‡åº”è¯¥æ˜¯æœ‰è¯¯ï¼Œè¿™æ˜¯æŒ‰ç…§æˆ‘çš„ç†è§£å†™çš„ï¼Œå…·ä½“å¯ä»¥å‚çœ‹<a href="https://juejin.cn/post/7081065180301361183#heading-3:~:text=%E5%A6%82%E6%9E%9C%E7%94%A8%E5%8E%9F%E6%9D%A5%E7%9A%84%E9%93%BE%E8%A1%A8%E9%9C%80%E8%A6%81%E9%81%8D%E5%8E%86%2010%20%E4%B8%AA%E8%8A%82%E7%82%B9%EF%BC%8C%E7%8E%B0%E5%9C%A8%E5%8F%AA%E8%A6%81%E9%81%8D%E5%8E%86%208%20%E4%B8%AA%E8%8A%82%E7%82%B9%E3%80%82" target="_blank" rel="noopener noreferrer">åŸæ–‡</a>ï¼‰ã€‚</p>
<p>å¦‚ä¸‹å›¾ä¸­ï¼Œä¸€å›¾èƒœåƒè¨€ã€‚å½“æ•°æ®é‡å¤§æ—¶ï¼Œä¸€ä¸ªåŒ…å«å¤šä¸ªç»“ç‚¹çš„é“¾è¡¨ï¼Œåœ¨å»ºç«‹äº†äº”çº§ç´¢å¼•åå¯ä»¥çªæ˜¾çš„çœ‹åˆ°ç´¢å¼•å±‚çš„ä¼˜åŠ¿ã€‚åŒæ—¶æ³¨æ„é“è¿™æ ·ä¸€ä¸ªè§„å¾‹ <strong>â€œåŠ ä¸€å±‚ç´¢å¼•ï¼ŒæŸ¥è¯¢æ‰€éœ€è¦éå†çš„èŠ‚ç‚¹ä¸ªæ•°å‡å°‘ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿå°±æé«˜äº†ã€‚â€</strong></p>
<p>ä»ç”¨æˆ·çš„è§’åº¦å°±æ˜¯ï¼Œè·³è¡¨è¿™å®¶ä¼™å…¶å®å°±æ˜¯åœ¨å‘Šè¯‰é“¾è¡¨ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹æ‰¾æ¯”è¾ƒå¿«ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/03cc278b5ef545138f52074efec2999b.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/03cc278b5ef545138f52074efec2999b.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/03cc278b5ef545138f52074efec2999b.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>çœ‹åˆ°è¿™ï¼Œè·³è¡¨ä¼¼ä¹ä¹Ÿå¾ˆé€‚åˆç”¨æ¥ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„ã€‚ä½†æ˜¯ä¸è¦å¿˜äº†è¿˜æœ‰é¦–ä¸ªæ¡ä»¶æ²¡æ»¡è¶³ï¼Œå°±æ˜¯ <strong>&ldquo;è¦å°½å°‘åœ¨ç£ç›˜åš I/O æ“ä½œã€‚&rdquo;</strong>
è€Œè·³è¡¨æ˜¾ç„¶æ²¡èƒ½æ»¡è¶³è¿™ä¸€æ¡ä»¶ï¼Œ<strong>è·³è¡¨åœ¨éšæ•°æ®é‡å¢å¤šçš„æƒ…å†µï¼Œç´¢å¼•å±‚ä¹Ÿä¼šéšç€å¢é«˜ï¼Œç›¸åº”çš„å°±ä¼šå¢åŠ è¯»å–I/Oçš„æ¬¡æ•°ï¼Œä»è€Œå½±å“æ€§èƒ½</strong>ã€‚</p>
<p>é‚£ä¹ˆå›åˆ° â€œé‚£ä¹ˆå¤šæ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„çš„é—®é¢˜ï¼Ÿâ€ï¼Œæˆ‘ä»¬å‘ç°å“ˆå¸Œè¡¨å’Œè·³è¡¨å¹¶ä¸èƒ½å¾ˆå¥½çš„æ»¡è¶³è§£å†³ç£ç›˜ç—›ç‚¹å’Œç´¢å¼•ç›®çš„çš„è¿™ä¸¤ä¸ªä¸»è¦æ¡ä»¶ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸ºä»€ä¹ˆè¦æ¥é€‰æ ‘ç»“æ„ã€‚</p>
<h3 id="æ ‘ç»“æ„" class="headerLink">
    <a href="#%e6%a0%91%e7%bb%93%e6%9e%84" class="header-mark"></a>æ ‘ç»“æ„</h3><p>æˆ‘ä»¬å…ˆæ¥çœ‹ç°å®ä¸­ä¸€é¢—æ ‘éƒ½æœ‰å“ªäº›éƒ¨åˆ†ç»„æˆï¼Œé¦–å…ˆè¦æœ‰æ ¹ã€æ ‘æã€è¿˜æœ‰æ ‘å¶ã€‚é‚£æŠ½è±¡æˆæ ‘ç»“æ„ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ ‘ç»“æ„çš„é¡¶ç«¯æ˜¯ <code>æ ¹èŠ‚ç‚¹ï¼ˆrootï¼‰</code>ï¼Œå·¦ä¾§çš„èŠ‚ç‚¹ç§°ä¸º <code>å·¦å­æ ‘</code>ï¼Œå³å­æ ‘å¯¹åº”çš„åœ¨å³ä¾§çš„èŠ‚ç‚¹ï¼Œæ ‘çš„æœ«ç«¯æ²¡æœ‰èŠ‚ç‚¹çš„ç§°ä¸º <code>å¶å­èŠ‚ç‚¹</code>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/06fe0d461c284c218f616c98b0d14dff.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/06fe0d461c284c218f616c98b0d14dff.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/06fe0d461c284c218f616c98b0d14dff.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>ä»æ ‘çš„å±‚çº§å…³ç³»å¯ä»¥åˆ†ä¸ºä¸Šä¸‹çº§å’ŒåŒçº§èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾ï¼Œ<code>Dã€E</code>æ˜¯<code>B</code>èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ<code>B</code> èŠ‚ç‚¹å°±æ˜¯å®ƒä»¬çš„çˆ¶èŠ‚ç‚¹ï¼Œè·Ÿ<code>B</code>èŠ‚ç‚¹åœ¨åŒä¸€å±‚çº§çš„<code>C</code>èŠ‚ç‚¹æ˜¯<code>B</code>èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ã€‚</p>
<p>åŒæ—¶æ ‘çš„æœ€å¤§å±‚çº§æ•°ï¼Œç§°ä¸ºæ ‘çš„é«˜åº¦ï¼ˆæ·±åº¦ï¼‰ï¼Œå›¾ä¸‹çš„æ ‘é«˜åº¦æ˜¯<strong>3</strong>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/316bcf4e06bd4b15a480b56eb5665b99.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/316bcf4e06bd4b15a480b56eb5665b99.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/316bcf4e06bd4b15a480b56eb5665b99.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>ä»æ ‘ç»“æ„çš„å±‚çº§è§’åº¦çœ‹ï¼Œå…¶å®æ ‘ç»“æ„æ˜¯ä¸æ˜¯è·Ÿå‰é¢çš„è·³è¡¨è¿˜æœ‰ç‚¹ç›¸ä¼¼ã€‚è€Œè·³è¡¨ä¹‹æ‰€ä»¥è¿™ä¹ˆå¿«æ˜¯å› ä¸ºæœ‰èƒ½æŒ‰åŒºé—´é«˜æ•ˆæŸ¥è¯¢çš„ç´¢å¼•å±‚ã€‚</p>
<p>è€Œæ ‘ç»“æ„å…¶ç‰¹æ€§å†³å®šäº†éå†æ•°æ®æ–¹å¼æœ¬èº«å°±çº¯å¤©ç„¶çš„æ”¯æŒæŒ‰åŒºé—´æŸ¥è¯¢ã€‚å†åŠ ä¸Šæ ‘æ˜¯éçº¿æ€§ç»“æ„çš„ä¼˜åŠ¿ç›¸æ¯”äºçº¿æ€§ç»“æ„çš„æ•°ç»„ï¼Œä¸å¿…åƒæ•°ç»„çš„æ•°æ®æ˜¯è¿ç»­å­˜æ”¾çš„ã€‚é‚£ä¹ˆå½“æ ‘ç»“æ„åœ¨æ’å…¥æ–°æ•°æ®æ—¶å°±ä¸ç”¨åƒæ•°ç»„æ’å…¥æ•°æ®å‰æ—¶ï¼Œéœ€è¦å°†æ•°æ®æ‰€åœ¨å¾€åçš„æ‰€æœ‰æ•°æ®èŠ‚ç‚¹éƒ½å¾—å¾€åæŒªåŠ¨çš„å¼€é”€ã€‚æ‰€ä»¥æ ‘ç»“æ„æ›´é€‚åˆæ’å…¥æ›´æ–°ç­‰åŠ¨æ€æ“ä½œçš„æ•°æ®ç»“æ„ã€‚</p>
<p>æ ‘ç»“æ„åœ¨æ»¡è¶³äº†ç´¢å¼•ç›®çš„å’Œå…¶ä»–æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œè‡³äºå‡å°‘ç£ç›˜æŸ¥è¯¢æ“ä½œçš„ç—›ç‚¹å…¶å®æˆ‘ä»¬å°±å¯ä»¥åœ¨åŸºäºæ ‘ç»“æ„çš„æ•°æ®ç»“æ„ä¸­å»é€‰æ‹©ã€‚</p>
<h2 id="é‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ä¸ºä»€ä¹ˆååé‡‡ç”¨-b-æ ‘ä½œä¸ºç´¢å¼•" class="headerLink">
    <a href="#%e9%82%a3%e4%b9%88%e5%a4%9a%e7%9a%84%e6%a0%91%e7%bb%93%e6%9e%84%e4%b8%ba%e4%bb%80%e4%b9%88%e5%81%8f%e5%81%8f%e9%87%87%e7%94%a8-b-%e6%a0%91%e4%bd%9c%e4%b8%ba%e7%b4%a2%e5%bc%95" class="header-mark"></a>é‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆååé‡‡ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•?</h2><p>é‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ä¸­ï¼Œé™¤äº†B+æ ‘ï¼Œä½ è¿˜ä¼šæƒ³åˆ°å“ªäº›æ ‘ç»“æ„ï¼ŸäºŒå‰æ ‘æŸ¥æ‰¾æ ‘ã€è‡ªå¹³è¡¡äºŒå‰æ ‘ã€Bæ ‘ã€‚</p>
<h3 id="äºŒå‰æ ‘" class="headerLink">
    <a href="#%e4%ba%8c%e5%8f%89%e6%a0%91" class="header-mark"></a>äºŒå‰æ ‘</h3><p>åœ¨äº†è§£äºŒå‰æŸ¥æ‰¾æ ‘æˆ–è€…è‡ªå¹³è¡¡äºŒå‰æ ‘å‰éœ€è¦å…ˆç®€å•çŸ¥é“ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Œä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾æ ‘ã€‚å› ä¸ºä½ çœ‹äºŒå‰æŸ¥æ‰¾æ ‘ä¸å°±æ˜¯è¿™ä¸¤æ£µæ ‘çš„åˆå¹¶å—ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹äºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘çš„æ ‘ç»“æ„ä¸­å®šä¹‰çš„æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„å¯ä»¥æ˜¯<code>0ä¸ªå­èŠ‚</code>æˆ–<code>1ä¸ªå­èŠ‚ç‚¹</code>ï¼Œä½†æ˜¯æœ€å¤šä¸è¶…<code>2ä¸ªå­èŠ‚ç‚¹</code>ã€‚</p>
<p>è€ŒäºŒå‰æ ‘è¿˜æœ‰ä¸¤ä¸ªå½¢å¼ï¼š<strong>æ»¡äºŒå‰æ ‘ã€å®Œå…¨äºŒå‰æ ‘</strong></p>
<p><strong>æ»¡äºŒå‰æ ‘</strong></p>
<p>æ»¡äºŒå‰æ ‘çš„å®šä¹‰æ˜¯ä¸€æ£µäºŒå‰æ ‘çš„æ‰€æœ‰éå¶å­èŠ‚ç‚¹éƒ½å­˜åœ¨å·¦å³å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ‰€æœ‰å­èŠ‚ç‚¹åœ¨åŒä¸€å±‚çº§ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/a5ecaccfda4246f086a976cdd3988a54.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/a5ecaccfda4246f086a976cdd3988a54.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/a5ecaccfda4246f086a976cdd3988a54.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p><strong>å®Œå…¨äºŒå‰æ ‘</strong></p>
<p>å®Œå…¨äºŒå‰æ ‘æ˜¯æŒ‡ä»å·¦è‡³å³å¡«å……èŠ‚ç‚¹ï¼Œç›´åˆ°æœ€åä¸€å±‚ï¼Œä¸”æœ€åä¸€å±‚çš„èŠ‚ç‚¹éƒ½é å·¦å¯¹é½ã€‚å› æ­¤ï¼Œæ»¡äºŒå‰æ ‘çš„æ‰€æœ‰å±‚éƒ½å¯èƒ½è¢«å¡«å……æ»¡ï¼Œè€Œå®Œå…¨äºŒå‰æ ‘è™½ç„¶æœ€åä¸€å±‚ä¸ä¸€å®šæ»¡ï¼Œä½†æ˜¯å°½å¯èƒ½å¡«å……åˆ°æœ€å·¦ä¾§ã€‚å¦‚ä¸‹å›¾ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/90538ecd70fc4c439054eed2e33b93c6.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/90538ecd70fc4c439054eed2e33b93c6.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/90538ecd70fc4c439054eed2e33b93c6.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<h3 id="äºŒå‰æŸ¥æ‰¾æ ‘" class="headerLink">
    <a href="#%e4%ba%8c%e5%8f%89%e6%9f%a5%e6%89%be%e6%a0%91" class="header-mark"></a>äºŒå‰æŸ¥æ‰¾æ ‘</h3><p>æ­¤äºŒå‰æŸ¥æ‰¾æ ‘çš„ â€œäºŒâ€ éå½¼äºŒï¼Œå› ä¸ºæ­¤ â€œäºŒâ€ æ—¢å¯ä»¥è¯´æ˜¯è¡¨ç¤ºäºŒå‰çš„æ ‘ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºäºŒåˆ†æŸ¥æ‰¾ï¼Œå› ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘æ—¢æ˜¯äºŒå‰ä¹Ÿèåˆäº†äºŒåˆ†æŸ¥æ‰¾ã€‚</p>
<p>å…ˆç®€å•çš„çœ‹çœ‹äºŒåˆ†æŸ¥æ‰¾ï¼ŒäºŒåˆ†æŸ¥æ‰¾å¯ä»¥é¿å…æœ‰åºçš„æ•°ç»„ä»å¤´ä¾æ¬¡çš„éå†æŸ¥è¯¢ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“è¿™ç§æƒ…å†µå¦‚æœè¦æŸ¥æ‰¾ä¸€ä¸ªæ•°æœ€å·®çš„æƒ…å†µæ—¶é—´å¤æ‚å°±æ˜¯<code>O(n)</code>
ï¼Œæ•´ä½“æŸ¥è¯¢æ•ˆç‡ä¸é«˜ã€‚è€Œå¦‚æœæ•°ç»„æ˜¯<strong>æœ‰åº</strong>çš„ï¼Œå°±å¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å°†æ¯æ¬¡çš„æŸ¥è¯¢èŒƒå›´å‡åŠï¼Œæ—¶é—´å¤æ‚åº¦è‡ªç„¶å°±æ˜¯<code>O(logn)</code>ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/1689be2bb3d24f7da12fbf2d4ec37736.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/1689be2bb3d24f7da12fbf2d4ec37736.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/1689be2bb3d24f7da12fbf2d4ec37736.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>æ‰€ä»¥è¯´ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘ä¸åŒäºæ™®é€šäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ˜¯å°†å°äºæ ¹èŠ‚ç‚¹çš„å…ƒç´ æ”¾åœ¨å·¦å­æ ‘ï¼Œè€Œå³å­æ ‘æ­£å¥½ç›¸åæ˜¯æ”¾å¤§äºæ ¹èŠ‚ç‚¹çš„å…ƒç´ ã€‚è¯´ç™½äº†å°±æ˜¯æ ¹èŠ‚ç‚¹æ˜¯å·¦å­æ ‘å’Œå³å­æ ‘çš„ä¸­ä½æ•°ï¼Œå·¦è¾¹æ”¾å°äºä¸­ä½æ•°çš„ï¼Œå³è¾¹æ”¾å¤§äºä¸­ä½æ•°ï¼Œè¿™ä¸å°±æ˜¯äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„å¥¥ä¹‰ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/cbb74bc84a5c4c88abde473347b77dd6~tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.gif" title="640.gif" data-thumbnail="https://cdn.xiaobinqt.cn/cbb74bc84a5c4c88abde473347b77dd6~tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.gif" data-sub-html="<h2>å›¾ç‰‡</h2><p>640.gif</p>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>å¦‚ä¸ŠåŠ¨å›¾æ‰€ç¤ºï¼ŒäºŒåˆ†æŸ¥æ‰¾æ ‘åœ¨æŸ¥æ‰¾æ•°æ®æ—¶ï¼Œåªéœ€è¦å°†éœ€è¦æŸ¥æ‰¾çš„å…ƒç´ ä¸æ ‘èŠ‚ç‚¹å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå½“å…ƒç´ å¤§äºæ ¹èŠ‚ç‚¹åˆ™å¾€å³å­æ ‘ä¸­æŸ¥æ‰¾ï¼Œå…ƒç´ å°äºæ ¹èŠ‚ç‚¹åˆ™å¾€å·¦å­æ ‘ä¸­æŸ¥æ‰¾ï¼Œå…ƒç´ å¦‚æœæ­£å¥½æ˜¯ä¸­ä½æ•°é‚£ä¹ˆå°±æ˜¯æ­£å¥½æ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥äºŒå‰æŸ¥æ‰¾æ ‘å…·å¤‡é«˜æ•ˆæŸ¥è¯¢ã€‚</p>
<p>ä½†æ˜¯äºŒå‰æ ‘ä¹Ÿæœ‰æ˜æ˜¾<strong>å¼Šç«¯</strong>ï¼Œåœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœæ¯æ¬¡æ’å…¥çš„æ•°æ®éƒ½æ˜¯æœ€å°æˆ–è€…éƒ½æ˜¯æœ€å¤§çš„å…ƒç´ ï¼Œé‚£ä¹ˆæ ‘ç»“æ„ä¼šé€€åŒ–æˆä¸€æ¡é“¾è¡¨ã€‚æŸ¥è¯¢æ•°æ®æ˜¯çš„æ—¶é—´å¤æ‚åº¦å°±ä¼šæ˜¯<code>O(n)</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/2fa9c648547f4c15a87959a2b3459dfa.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/2fa9c648547f4c15a87959a2b3459dfa.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/2fa9c648547f4c15a87959a2b3459dfa.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>å½“äºŒåˆ†æŸ¥æ‰¾æ ‘é€€åŒ–æˆé“¾è¡¨æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“é“¾è¡¨ä¸ä»…ä¸èƒ½é«˜æ•ˆæŸ¥è¯¢è€Œä¸”ä¹Ÿå¢åŠ äº†ç£ç›˜ IO æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ’å‘ä¸‹ä¸€ä¸ªæ ‘å‹æ•°æ®ç»“æ„ã€‚</p>
<h3 id="è‡ªå¹³è¡¡äºŒå‰æ ‘avlæ ‘" class="headerLink">
    <a href="#%e8%87%aa%e5%b9%b3%e8%a1%a1%e4%ba%8c%e5%8f%89%e6%a0%91avl%e6%a0%91" class="header-mark"></a>è‡ªå¹³è¡¡äºŒå‰æ ‘/AVLæ ‘</h3><p>è‡ªå¹³è¡¡äºŒå‰æ ‘å°±æ˜¯æ¥è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘æç«¯ä¸‹é€€åŒ–æˆé“¾è¡¨çš„é—®é¢˜ï¼Œè‡ªå¹³è¡¡äºŒå‰æ ‘ä¹Ÿç§°<strong>å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘</strong>ï¼ˆAVLæ ‘ï¼‰ã€‚</p>
<blockquote>
<p>å¯ä»¥çœ‹åˆ°ä»ç®€å•çš„äºŒå‰æ ‘ï¼Œä¸€æ­¥æ­¥æ¼”åŒ–åˆ°äºŒåˆ†æŸ¥æ‰¾æ ‘å†åˆ°ç°åœ¨çš„è‡ªå¹³è¡¡äºŒå‰æ ‘ã€‚ä¸€ä¸ªç®€å•çš„ä¸œè¥¿æ…¢æ…¢çš„é€æ¸èµ°å‘å¤æ‚ã€‚å¦‚æœåªçŸ¥é“ç­”æ¡ˆï¼Œæˆ‘ä»¬æ˜¯ä¸ä¼šçŸ¥é“æ¥é¾™å»è„‰çš„ã€‚</p>
</blockquote>
<p>å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘å…¶å®ä¸»è¦å°±æ˜¯åœ¨äºŒå‰æŸ¥æ‰¾æ ‘çš„åŸºç¡€ä¸ŠåŠ ä¸Šçº¦æŸï¼š<strong>è®©æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸èƒ½è¶…è¿‡ 1</strong>ã€‚é‚£ä¹ˆè¿™æ ·è®©å¯ä»¥è®©å·¦å³å­æ ‘éƒ½ä¿æŒå¹³è¡¡ï¼Œè®©æŸ¥è¯¢æ•°æ®æ“ä½œçš„æ—¶é—´å¤æ‚åº¦åœ¨ <code>O(logn)</code>ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘å°†æ¯æ¬¡æ’å…¥çš„å…ƒç´ æ•°æ®éƒ½ä¼šç»´æŒè‡ªå¹³è¡¡ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/202308053871d3e8b2e34eaa8253be7643052ae1~tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.gif" title="640.gif" data-thumbnail="https://cdn.xiaobinqt.cn/202308053871d3e8b2e34eaa8253be7643052ae1~tplv-k3u1fbpfcp-zoom-in-crop-mark_3024_0_0_0.gif" data-sub-html="<h2>å›¾ç‰‡</h2><p>640.gif</p>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ™®é€šéå¹³è¡¡äºŒå‰æ ‘å’Œå¹³è¡¡äºŒå‰æ ‘çš„å¯¹æ¯”ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/87466af324fb41dbae9f8bd27e91ecfc.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/87466af324fb41dbae9f8bd27e91ecfc.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/87466af324fb41dbae9f8bd27e91ecfc.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>è¿˜æœ‰åœ¨ Java ä¸­é›†åˆç±»å¸¸è§çš„çº¢é»‘æ ‘ï¼Œä¹Ÿæ˜¯è‡ªå¹³è¡¡äºŒå‰æ ‘ä¸­çš„ä¸€ç§ã€‚</p>
<p>ä½†æ˜¯ä¸ç®¡è‡ªå¹³è¡¡æ ‘æ˜¯å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘è¿˜æ˜¯çº¢é»‘æ ‘ï¼Œéƒ½ä¼š<strong>éšç€æ’å…¥çš„å…ƒç´ å¢å¤šï¼Œè€Œå¯¼è‡´æ ‘çš„é«˜åº¦å˜é«˜</strong>ï¼Œè¿™åŒæ ·æ„å‘³ç€ç£ç›˜ I/O æ“ä½œæ¬¡æ•°å¤šï¼Œå½±å“åˆ°æ•´ä½“æŸ¥è¯¢çš„æ•ˆç‡ã€‚</p>
<h3 id="bæ ‘" class="headerLink">
    <a href="#b%e6%a0%91" class="header-mark"></a>Bæ ‘</h3><p>æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°<code>B+æ ‘</code>è¿˜æœ‰<code>B-æ ‘</code>ï¼Œä¸å…å°±ä¼šå°†<code>B-æ ‘</code>è¯»æˆ<code>Bå‡æ ‘</code> ï¼Œä½†<code>B-æ ‘</code>å…¶<code>-</code>æ¨ªçº¿åªæ˜¯è¿æ¥ç¬¦ï¼Œæ‰€ä»¥<code>B-æ ‘</code>å°±æ˜¯ç§°ä¸º<code>Bæ ‘</code>ã€‚</p>
<p>è‡ªå¹³è¡¡äºŒå‰æ ‘è™½ç„¶æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦åœ¨<code>O(logn)</code>ï¼Œå‰é¢ä¹Ÿè¯´è¿‡å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰2ä¸ªå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆéšç€æ•°æ®é‡å¢å¤§çš„æ—¶å€™ï¼ŒèŠ‚ç‚¹ä¸ªæ•°è¶Šå¤šï¼Œæ ‘é«˜åº¦ä¹Ÿä¼šå¢é«˜ï¼ˆä¹Ÿå°±æ˜¯æ ‘çš„æ·±åº¦è¶Šæ·±ï¼‰ï¼Œå¢åŠ ç£ç›˜ I/O æ¬¡æ•°ï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚</p>
<p>é‚£ä¹ˆä½ å¦‚æœä»æ ‘å½¢ç»“æ„çš„äºŒå‰æ ‘è¿™ä¸€è·¯çš„è¿›é˜¶è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒäºŒå‰æ ‘æ¯ä¸€æ¬¡ä¸ºäº†è§£å†³ä¸€ä¸ªæ–°çš„é—®é¢˜éƒ½ä¼šåˆ›é€ å‡ºæ–°çš„<code>bug</code>æˆ–è€…åˆ›é€ ä¸€ä¸ªåˆä¸ªçš„ç—›ç‚¹ã€‚çœ‹åˆ°è¿™å°±ä¸éš¾çŒœåˆ°ï¼ŒBæ ‘çš„å‡ºç°å¯ä»¥è§£å†³æ ‘é«˜åº¦çš„é—®é¢˜ã€‚</p>
<p>ä¹‹æ‰€ä»¥æ˜¯ B æ ‘ï¼Œè€Œå¹¶ä¸æ˜¯åç§°ä¸­ â€œxxxäºŒå‰æ ‘â€ï¼Œå°±æ˜¯å®ƒ<strong>ä¸å†é™åˆ¶ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ä¸­åªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹</strong>ï¼Œè€Œæ˜¯å…è®¸ <code>M</code> ä¸ªå­èŠ‚ç‚¹<code>ï¼ˆM &gt; 2ï¼‰</code>ã€‚ä¸ä»…å¦‚æ­¤ï¼Œ<strong>Bæ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ </strong>ï¼Œç›¸æ¯”è¾ƒäºå‰é¢çš„é‚£äº›äºŒå‰æ ‘æ•°æ®ç»“æ„åˆå°†æ•´ä½“çš„æ ‘é«˜åº¦é™ä½äº†ã€‚</p>
<p>B æ ‘çš„èŠ‚ç‚¹å¯ä»¥åŒ…å«æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæ‰€ä»¥<strong>Bæ ‘æ˜¯ä¸€æ£µå¤šå‰æ ‘</strong>ï¼Œå®ƒçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹åŒ…å«çš„æœ€å¤šå­èŠ‚ç‚¹æ•°é‡çš„ç§°ä¸ºBæ ‘çš„<strong>é˜¶</strong>ã€‚å¦‚ä¸‹å›¾æ˜¯ä¸€é¢— 3 é˜¶çš„ B æ ‘ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/e0c9903e46ab49558dd38d7e803da058.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/e0c9903e46ab49558dd38d7e803da058.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/e0c9903e46ab49558dd38d7e803da058.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<blockquote>
<p>ä¸Šå›¾ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹ç§°ä¸ºé¡µï¼Œåœ¨ mysql ä¸­æ•°æ®è¯»å–çš„åŸºæœ¬å•ä½æ˜¯é¡µï¼Œè€Œé¡µå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ç£ç›˜å—ã€‚ç£ç›˜å—ä¸­çš„ p èŠ‚ç‚¹æ˜¯æŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</p>
<p>æŒ‡é’ˆåœ¨æ ‘ç»“æ„ä¸­éƒ½æœ‰ï¼Œåœ¨å‰é¢çš„äºŒå‰æ ‘ä¸­ä¹Ÿéƒ½æ˜¯æœ‰çš„ã€‚</p>
</blockquote>
<p>é‚£æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ä¸€é¢— 3 é˜¶çš„Bæ ‘æŸ¥æ‰¾ <code>90</code> è¿™ä¸ªçš„å…ƒç´ æ—¶çš„æµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ</p>
<p>å…ˆä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œä¹Ÿå°±æ˜¯ <code>ç£ç›˜å—1</code>ï¼Œåˆ¤æ–­ <code>90</code> åœ¨<code>17 ~ 35</code>ä¹‹é—´ï¼Œé€šè¿‡<code>ç£ç›˜å—1</code>ä¸­çš„æŒ‡é’ˆ <code>p3</code> æ‰¾åˆ°<code>ç£ç›˜å—4</code>ã€‚è¿˜æ˜¯æŒ‰ç…§åŸæ¥çš„æ­¥éª¤ï¼Œåœ¨<code>ç£ç›˜å—4</code>ä¸­çš„<code>65 ~ 87</code>ä¹‹é—´ç›¸æ¯”è¾ƒï¼Œæœ€å<code>ç£ç›˜4</code>çš„æŒ‡é’ˆ<code>p3</code>æ‰¾åˆ°<code>ç£ç›˜å—11</code>ã€‚ä¹Ÿå°±æ‰¾åˆ°æœ‰åŒ¹é…<code>90</code>çš„é”®å€¼ã€‚</p>
<p>å¯ä»¥å‘ç°ä¸€é¢— 3 é˜¶çš„ B æ ‘åœ¨æŸ¥æ‰¾å¶å­èŠ‚ç‚¹æ—¶ï¼Œç”±äºæ ‘é«˜åº¦åªæœ‰ <code>3</code>ï¼Œæ‰€ä»¥æŸ¥æ‰¾è¿‡ç¨‹æœ€å¤šåªéœ€è¦<code>3æ¬¡</code>çš„ç£ç›˜ I/O æ“ä½œã€‚</p>
<p>æ•°æ®é‡ä¸å¤§æ—¶å¯èƒ½ä¸å¤ªçœŸåˆ‡ã€‚ä½†å½“æ•°æ®é‡å¤§æ—¶ï¼ŒèŠ‚ç‚¹ä¹Ÿä¼šéšç€å¢å¤šï¼›æ­¤æ—¶å¦‚æœè¿˜æ˜¯å‰é¢çš„è‡ªå¹³è¡¡äºŒå‰æ ‘çš„åœºæ™¯ä¸‹ï¼Œç”±äºäºŒå‰æ ‘åªèƒ½æœ€å¤š<code>2</code>ä¸ªå¶å­èŠ‚ç‚¹çš„çº¦æŸï¼Œä¹Ÿåªèƒ½çºµå‘å»çš„å»æ‰©å±•å­èŠ‚ç‚¹ï¼Œæ ‘çš„é«˜åº¦ä¼šå¾ˆé«˜ï¼Œæ„å‘³ç€éœ€è¦æ›´å¤šçš„æ“ä½œç£ç›˜ I/O æ¬¡æ•°ã€‚è€Œ B æ ‘åˆ™å¯ä»¥é€šè¿‡æ¨ªå‘æ‰©å±•èŠ‚ç‚¹ä»è€Œé™ä½æ ‘çš„é«˜åº¦ï¼Œæ‰€ä»¥æ•ˆç‡è‡ªç„¶è¦æ¯”äºŒå‰æ ‘æ•ˆç‡æ›´é«˜ã€‚ç›´ç™½è¯´å°±æ˜¯å˜çŸ®èƒ–äº†ã€‚</p>
<p>çœ‹åˆ°è¿™ï¼Œç›¸ä¿¡ä½ ä¹ŸçŸ¥é“å¦‚æœ B æ ‘è¿™ä¹ˆé€‚åˆï¼Œä¹Ÿå°±æ²¡æœ‰æ¥ä¸‹æ¥ B+ æ ‘çš„ä»€ä¹ˆäº‹äº†ã€‚</p>
<p>æ¥ç€ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ç”¨ B æ ‘ï¼Œè€Œç”¨ äº†B+ æ ‘å‘¢ï¼Ÿ</p>
<p>å…¶å®ï¼ŒB æ ‘å…¶å®å·²ç»æ»¡è¶³äº†æˆ‘ä»¬æœ€å‰é¢æ‰€è¦æ»¡è¶³çš„æ¡ä»¶ï¼Œå‡å°‘ç£ç›˜ I/O æ“ä½œï¼ŒåŒæ—¶æ”¯æŒæŒ‰åŒºé—´æŸ¥æ‰¾ã€‚ä½†æ³¨æ„ï¼Œè™½ç„¶ <strong>B æ ‘æ”¯æŒæŒ‰åŒºé—´æŸ¥æ‰¾ï¼Œä½†å¹¶ä¸é«˜æ•ˆ</strong>ã€‚</p>
<p>ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒBæ ‘èƒ½é«˜æ•ˆçš„é€šè¿‡<strong>ç­‰å€¼æŸ¥è¯¢</strong> <code>90</code>è¿™ä¸ªå€¼ï¼Œä½†ä¸æ–¹ä¾¿æŸ¥è¯¢å‡ºä¸€ä¸ªåŒºé—´å†…æ¯”å¦‚ï¼Œ<code>3 ~ 10</code> åŒºé—´å†…æ‰€æœ‰æ•°çš„ç»“æœã€‚å› ä¸ºå½“Bæ ‘åšèŒƒå›´æŸ¥è¯¢æ—¶éœ€è¦ä½¿ç”¨ä¸­åºéå†ï¼Œé‚£ä¹ˆçˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ä¹Ÿå°±éœ€è¦ä¸æ–­çš„æ¥å›åˆ‡æ¢æ¶‰åŠäº†å¤šä¸ªèŠ‚ç‚¹ä¼šç»™ç£ç›˜ I/O å¸¦æ¥å¾ˆå¤šè´Ÿæ‹…ã€‚</p>
<h3 id="bæ ‘-1" class="headerLink">
    <a href="#b%e6%a0%91-1" class="header-mark"></a>B+æ ‘</h3><p>B+ æ ‘ä»<code>+</code>çš„ç¬¦å·å¯ä»¥çœ‹å‡ºæ˜¯ B æ ‘çš„å‡çº§ç‰ˆï¼ŒMySQL ä¸­ innoDB å¼•æ“ä¸­çš„ç´¢å¼•åº•å±‚æ•°æ®ç»“æ„é‡‡ç”¨çš„æ­£æ˜¯ B+ æ ‘ã€‚</p>
<p>B+ æ ‘ç›¸æ¯”äº B æ ‘ï¼Œåšäº†è¿™æ ·çš„å‡çº§ï¼š<strong>B+ æ ‘ä¸­çš„éå¶å­èŠ‚ç‚¹éƒ½ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åªä½œä¸ºç´¢å¼•</strong>ã€‚</p>
<p>ç”±å¶å­èŠ‚ç‚¹å­˜æ”¾æ•´æ£µæ ‘çš„æ‰€æœ‰æ•°æ®ã€‚è€Œå¶å­èŠ‚ç‚¹ä¹‹é—´æ„æˆä¸€ä¸ªä»å°åˆ°å¤§æœ‰åºçš„é“¾è¡¨äº’ç›¸æŒ‡å‘ç›¸é‚»çš„å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯å¶å­èŠ‚ç‚¹ä¹‹é—´å½¢æˆäº†æœ‰åºçš„åŒå‘é“¾è¡¨ã€‚å¦‚ä¸‹å›¾ B+ æ ‘çš„ç»“æ„ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/f8eec821424f49598a2d62e82f63e711.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/f8eec821424f49598a2d62e82f63e711.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230805/f8eec821424f49598a2d62e82f63e711.png" data-sub-html="<h2>å›¾ç‰‡</h2>">
        
    </a><figcaption class="image-caption">å›¾ç‰‡</figcaption>
    </figure></p>
<p>B+ æ ‘æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒå‰é¢çš„è·³è¡¨ï¼Œæ•°æ®åº•å±‚æ˜¯æ•°æ®ï¼Œä¸Šå±‚éƒ½æ˜¯æŒ‰åº•å±‚åŒºé—´æ„æˆçš„ç´¢å¼•å±‚ï¼Œåªä¸è¿‡å®ƒä¸åƒè·³è¡¨æ˜¯çºµå‘æ‰©å±•ï¼Œè€Œæ˜¯æ¨ªå‘æ‰©å±•çš„ â€œè·³è¡¨â€ã€‚è¿™ä¹ˆåšçš„å¥½å¤„å³å‡å°‘ç£ç›˜çš„ IO æ“ä½œåˆæé«˜äº†èŒƒå›´æŸ¥æ‰¾çš„æ•ˆç‡ã€‚</p>
<p>æ¥ç€å†æ¥çœ‹ B+ æ ‘çš„æ’å…¥å’Œåˆ é™¤ï¼ŒB+ æ ‘åšäº†å¤§é‡å†—ä½™èŠ‚ç‚¹ï¼Œä»ä¸Šé¢å¯ä»¥å‘ç°çˆ¶èŠ‚ç‚¹çš„æ‰€æœ‰å…ƒç´ éƒ½ä¼šåœ¨å­èŠ‚ç‚¹ä¸­å‡ºç°ï¼Œè¿™æ ·å½“åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»å¶å­èŠ‚ç‚¹ä¸­åˆ é™¤ï¼Œè¿™æ ·æ•ˆç‡æ›´å¿«ã€‚</p>
<p>B æ ‘ç›¸æ¯”äº B+ æ ‘ï¼ŒB æ ‘æ²¡æœ‰å†—ä½™èŠ‚ç‚¹ï¼Œåˆ é™¤èŠ‚ç‚¹æ—¶ä¼šå‘ç”Ÿå¤æ‚çš„<strong>æ ‘å˜å½¢</strong>ï¼Œè€Œ B+ æ ‘æœ‰å†—ä½™èŠ‚ç‚¹ï¼Œä¸ä¼šæ¶‰åŠåˆ°å¤æ‚çš„æ ‘å˜å½¢ã€‚è€Œä¸” B+ æ ‘çš„æ’å…¥ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæœ€å¤šåªæ¶‰åŠæ ‘çš„ä¸€æ¡åˆ†æ”¯è·¯å¾„ã€‚B+ æ ‘ä¹Ÿä¸ç”¨æ›´å¤šå¤æ‚ç®—æ³•ï¼Œå¯ä»¥ç±»ä¼¼é»‘çº¢æ ‘çš„æ—‹è½¬å»è‡ªåŠ¨å¹³è¡¡ã€‚</p>
<h2 id="æ€»ç»“" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>æ€»ç»“</h2><p>ä»æ–‡ç« çš„é¢˜ç›®å¼€å§‹å°±æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥å›ç­”ä¸ºä»€ä¹ˆMySQL é‡‡ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•çš„ç­”æ¡ˆï¼Œè€Œæ˜¯ç›¸åçš„é—®å‡ºäº†ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªé—®é¢˜æ˜¯é‚£ä¹ˆå¤šæ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„ï¼Ÿå¦ä¸€ä¸ªé—®é¢˜æ˜¯é‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ï¼Œåˆä¸ºä»€ä¹ˆååé‡‡ç”¨ B+ æ ‘ï¼Ÿ</p>
<p>è¦å¾—åˆ°æœï¼Œå¾—å…ˆçŸ¥é“å› ï¼Œæˆ‘ä»¬ä»ä¸¤ä¸ªæ–¹é¢å¼€å§‹å‡ºå‘ï¼Œå› ä¸º MySQL çš„æ•°æ®æ˜¯æ”¾åœ¨ç£ç›˜çš„ï¼Œè€Œç£ç›˜çš„å¤„ç†é€Ÿåº¦æ˜¯æ¯«ç§’çº§åˆ«çš„ï¼Œå¦‚æœåœ¨ç£ç›˜ IO åšè¿‡å¤šæŸ¥è¯¢æ“ä½œï¼Œä¼šç»™æŸ¥è¯¢å¸¦æ¥è´Ÿæ‹…ï¼Œæ‰€ä»¥è¦å°½å°‘åœ¨ç£ç›˜ I/O æ“ä½œä¸­åšæŸ¥è¯¢ã€‚å¦ä¸€ä¸ªæ˜¯ä»ç´¢å¼•æœ¬èº«çš„é¦–è¦ç›®çš„ï¼Œè¦èƒ½æŒ‰åŒºé—´é«˜æ•ˆåœ°èŒƒå›´æŸ¥æ‰¾ã€‚</p>
<p>æœ‰äº†å› ï¼Œæˆ‘ä»¬å°±å¼€å§‹å»æ¢ç´¢æœï¼Œæˆ‘ä»¬å°±å¯ä»¥å…ˆæ¥å›ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>â€œé‚£ä¹ˆå¤šæ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„ï¼Ÿâ€</strong>
åœ¨å…¶ä»–æ•°æ®ç»“æ„ä¸­æŒ‰é€»è¾‘ç»“æ„çš„çº¿æ€§ç»“æ„æœ‰å“ˆå¸Œè¡¨å’Œè·³è¡¨ã€‚å“ˆå¸Œè¡¨åº•å±‚åŸºäºæ•°ç»„ï¼Œè™½ç„¶å¯ä»¥é«˜æ•ˆæŸ¥è¯¢ï¼Œä½†æ˜¯åªèƒ½ç­‰å€¼æŸ¥è¯¢ï¼Œè€Œä¸èƒ½æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€‚è€Œè·³è¡¨åº•å±‚æ˜¯é“¾è¡¨ï¼Œé€šè¿‡ç´¢å¼•å±‚å¯ä»¥å®ç°é«˜æ•ˆçš„åŒºé—´æŸ¥è¯¢ï¼Œä½†æ˜¯éšç€æ•°æ®é‡çš„é€’å¢ï¼Œç´¢å¼•å±‚ä¹Ÿéšç€æ•°æ®é‡çš„å¢å¤šè€Œå¢åŠ ã€‚æ‰€ä»¥é‡‡ç”¨æ ‘çš„æ•°æ®ç»“æ„ï¼Œæ ‘ç»“æ„å…¶ç‰¹æ€§å†³å®šäº†éå†æ•°æ®æ–¹å¼æœ¬èº«å°±çº¯å¤©ç„¶çš„æ”¯æŒæŒ‰åŒºé—´æŸ¥è¯¢ã€‚æ ‘ç»“æ„åœ¨æ’å…¥ç­‰æ“ä½œä¸ç”¨çº¿æ€§ç»“æ„æ•°ç»„çš„å¼€é”€ï¼Œæ‰€ä»¥æ›´é€‚åˆæ’å…¥æ›´æ–°ç­‰åŠ¨æ€æ“ä½œçš„æ•°æ®ç»“æ„ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬å¦ä¸€ä¸ªé—®é¢˜ï¼Œ<strong>â€œé‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ï¼Œåˆä¸ºä»€ä¹ˆååé‡‡ç”¨B+æ ‘ï¼Ÿâ€</strong> æˆ‘ä»¬ä»æ ‘ç»“æ„ä¸­çˆ¶èŠ‚ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œå†ä»äºŒå‰æ ‘åŠ ä¸ŠäºŒåˆ†æŸ¥æ‰¾çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼ŒäºŒå‰æ ‘å±•ç°äº†é«˜æ•ˆçš„æŸ¥è¯¢èƒ½åŠ›ï¼›ä½†äºŒå‰æŸ¥æ‰¾æ ‘åœ¨<strong>æç«¯æƒ…å†µä¸‹ä¼šé€€åŒ–æˆé“¾è¡¨</strong>ï¼Œæ‰€ä»¥è¿›é˜¶åˆ°è‡ªå¹³è¡¡äºŒå‰æ ‘ï¼Œè‡ªå¹³è¡¡äºŒå‰æ ‘çº¦æŸäº†æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘ç›¸å·®ä¸èƒ½å¤§äº 1ï¼Œä½†æ˜¯äºŒå‰æ ‘å› ä¸ºåªèƒ½æœ€å¤šæ˜¯ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ ‘çš„é«˜åº¦è¿‡é«˜ä¼šå¯¼è‡´ç£ç›˜åšè¿‡å¤š I/O çš„æŸ¥è¯¢æ“ä½œè´Ÿæ‹…ã€‚</p>
<p>æ‰€ä»¥æœ€åçœŸæ­£åˆ°äº† B æ ‘ï¼ŒB æ ‘æ˜¯å¤šå‰æ ‘ï¼Œä½†åªèƒ½é«˜æ•ˆå•æŸ¥è¯¢ï¼Œå¹¶ä¸èƒ½é«˜æ•ˆåŒºé—´æŸ¥è¯¢ã€‚æ‰€ä»¥æ‰æœ‰ B+ æ ‘ï¼ŒB+ æ ‘æ˜¯ B æ ‘çš„å‡çº§ï¼Œæ‰€æœ‰éå¶å­èŠ‚ç‚¹éƒ½ç”¨æ¥åšç´¢å¼•ï¼Œåªæœ‰å¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®è€Œä¸”æ˜¯æœ‰åºåŒå‘çš„é“¾è¡¨ï¼Œæ ‘èŠ‚ç‚¹åšäº†å†—ä½™ï¼Œç›¸æ¯”äº B æ ‘æ—¢èƒ½æ”¯æŒé«˜æ•ˆçš„åŒºé—´æŸ¥è¯¢ï¼Œæ’å…¥å’Œåˆ é™¤éƒ½æ¯” B æ ‘æ›´åŠ å‡ºè‰²ã€‚</p>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://blog.csdn.net/zzti_erlie/article/details/82973742" target="_blank" rel="noopener noreferrer">MySQLç´¢å¼•ä¸ºä»€ä¹ˆè¦ç”¨B+æ ‘å®ç°</a></li>
<li><a href="https://www.cnblogs.com/cqqfboy/p/15323462.html" target="_blank" rel="noopener noreferrer">MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘æ¥ä½œç´¢å¼•ï¼ŸMySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘æ¥ä½œç´¢å¼•ï¼Ÿ</a></li>
<li><a href="https://ivanzz1001.github.io/records/post/data-structure/2018/06/16/ds-bplustree" target="_blank" rel="noopener noreferrer">B+æ ‘è¯¦è§£</a></li>
<li><a href="https://www.bilibili.com/video/BV1HX4y1N7v6/" target="_blank" rel="noopener noreferrer">ã€å¹²è´§ã€‘æ•°æ®åº“ç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨B+Treeï¼Ÿ</a></li>
<li><a href="https://juejin.cn/post/7081065180301361183" target="_blank" rel="noopener noreferrer">MySQL ä¸ºä»€ä¹ˆé‡‡ç”¨ B+æ ‘ä½œä¸ºç´¢å¼•ï¼Ÿ5å¹´ç»éªŒç¨‹åºå‘˜å›ç­”è®©æˆ‘æ‚Ÿäº†</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/152285749" target="_blank" rel="noopener noreferrer">æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘çš„åŒºåˆ«</a></li>
</ul>
]]></description>
</item><item>
    <title>Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©</title>
    <link>https://www.xiaobinqt.cn/redis-break-pierce-avalanche/</link>
    <pubDate>Wed, 13 Apr 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/redis-break-pierce-avalanche/</guid>
    <description><![CDATA[<h2 id="ç¼“å­˜å‡»ç©¿" class="headerLink">
    <a href="#%e7%bc%93%e5%ad%98%e5%87%bb%e7%a9%bf" class="header-mark"></a>ç¼“å­˜å‡»ç©¿</h2><p>é«˜å¹¶å‘æµé‡ï¼Œè®¿é—®çš„è¿™ä¸ªæ•°æ®æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œè¯·æ±‚çš„æ•°æ®åœ¨ DB ä¸­å­˜åœ¨ï¼Œä½†æ˜¯ Redis å­˜çš„é‚£ä¸€ä»½å·²ç»è¿‡æœŸï¼Œåç«¯éœ€è¦ä» DB ä»åŠ è½½æ•°æ®å¹¶å†™åˆ° Redisã€‚</p>
<p>æ€»ç»“èµ·æ¥å°±æ˜¯ï¼šå•ä¸€çƒ­ç‚¹æ•°æ®ã€é«˜å¹¶å‘ã€æ•°æ®å¤±æ•ˆã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220413/10c8c8557c8b41ea967c82617bef1814.png" title="ç¼“å­˜å‡»ç©¿" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220413/10c8c8557c8b41ea967c82617bef1814.png" data-sub-html="<h2>ç¼“å­˜å‡»ç©¿</h2><p>ç¼“å­˜å‡»ç©¿</p>">
        
    </a><figcaption class="image-caption">ç¼“å­˜å‡»ç©¿</figcaption>
    </figure></p>
<h3 id="è§£å†³æ–¹æ¡ˆ" class="headerLink">
    <a href="#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88" class="header-mark"></a>è§£å†³æ–¹æ¡ˆ</h3><h4 id="è¿‡æœŸæ—¶é—´éšæœºå€¼" class="headerLink">
    <a href="#%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4%e9%9a%8f%e6%9c%ba%e5%80%bc" class="header-mark"></a>è¿‡æœŸæ—¶é—´â•éšæœºå€¼</h4><p>å¯¹äºçƒ­ç‚¹æ•°æ®ï¼Œæˆ‘ä»¬ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠè¯·æ±‚éƒ½æ”¾åœ¨ç¼“å­˜ä¸­å¤„ç†ï¼Œå……åˆ†æŠŠ Redis é«˜ååé‡æ€§èƒ½åˆ©ç”¨èµ·æ¥ã€‚æˆ–è€…è¿‡æœŸæ—¶é—´å†åŠ ä¸€ä¸ªéšæœºå€¼ã€‚</p>
<p>è®¾è®¡ç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ—¶ï¼Œä½¿ç”¨å…¬å¼ï¼š<strong>è¿‡æœŸæ—¶é—´ = baes æ—¶é—´ + éšæœºæ—¶é—´</strong>ã€‚</p>
<p>å³ç›¸åŒä¸šåŠ¡æ•°æ®å†™ç¼“å­˜æ—¶ï¼Œåœ¨åŸºç¡€è¿‡æœŸæ—¶é—´ä¹‹ä¸Šï¼Œå†åŠ ä¸€ä¸ªéšæœºçš„è¿‡æœŸæ—¶é—´ï¼Œè®©æ•°æ®åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…æ…¢æ…¢è¿‡æœŸï¼Œé¿å…ç¬æ—¶å…¨éƒ¨è¿‡æœŸï¼Œå¯¹ DB é€ æˆè¿‡å¤§å‹åŠ›ã€‚</p>
<h4 id="é¢„çƒ­" class="headerLink">
    <a href="#%e9%a2%84%e7%83%ad" class="header-mark"></a>é¢„çƒ­</h4><p>é¢„å…ˆæŠŠçƒ­é—¨æ•°æ®æå‰å­˜å…¥ Redis ä¸­ï¼Œå¹¶è®¾çƒ­é—¨æ•°æ®çš„è¿‡æœŸæ—¶é—´è¶…å¤§å€¼ã€‚</p>
<h4 id="ä½¿ç”¨é”" class="headerLink">
    <a href="#%e4%bd%bf%e7%94%a8%e9%94%81" class="header-mark"></a>ä½¿ç”¨é”</h4><p>å½“å‘ç°ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œä¸æ˜¯ç«‹å³ä»æ•°æ®åº“åŠ è½½æ•°æ®ã€‚</p>
<p>è€Œæ˜¯å…ˆè·å–åˆ†å¸ƒå¼é”ï¼Œè·å–é”æˆåŠŸæ‰æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢å’Œå†™æ•°æ®åˆ°ç¼“å­˜çš„æ“ä½œï¼Œè·å–é”å¤±è´¥ï¼Œåˆ™è¯´æ˜å½“å‰æœ‰çº¿ç¨‹åœ¨æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢æ“ä½œï¼Œå½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´å†é‡è¯•ã€‚è¿™æ ·åªè®©ä¸€ä¸ªè¯·æ±‚å»æ•°æ®åº“è¯»å–æ•°æ®ã€‚</p>
<h2 id="ç¼“å­˜ç©¿é€" class="headerLink">
    <a href="#%e7%bc%93%e5%ad%98%e7%a9%bf%e9%80%8f" class="header-mark"></a>ç¼“å­˜ç©¿é€</h2><p>æ•°æ®åº“æœ¬å°±æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œè¯·æ±‚ç›´å¥”æ•°æ®åº“ï¼Œç¼“å­˜ç³»ç»Ÿå½¢åŒè™šè®¾ã€‚</p>
<p>å¤§é‡è¯·æ±‚çš„ key æ ¹æœ¬<font color="red"><strong>ä¸å­˜åœ¨äºç¼“å­˜ä¸­ä¹Ÿä¸å­˜åœ¨æ•°æ®åº“</strong></font>ï¼Œå¯¼è‡´è¯·æ±‚ç›´æ¥åˆ°äº†æ•°æ®åº“ä¸Šï¼Œæ ¹æœ¬æ²¡æœ‰ç»è¿‡ç¼“å­˜è¿™ä¸€å±‚ï¼Œå¯¹æ•°æ®åº“é€ æˆå‹åŠ›è€Œå½±å“æ­£å¸¸æœåŠ¡ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220413/19352698c9c047d4a635c3e561b8293b.png" title="ç¼“å­˜ç©¿é€" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220413/19352698c9c047d4a635c3e561b8293b.png" data-sub-html="<h2>ç¼“å­˜ç©¿é€</h2><p>ç¼“å­˜ç©¿é€</p>">
        
    </a><figcaption class="image-caption">ç¼“å­˜ç©¿é€</figcaption>
    </figure></p>
<h3 id="è§£å†³æ–¹æ¡ˆ-1" class="headerLink">
    <a href="#%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88-1" class="header-mark"></a>è§£å†³æ–¹æ¡ˆ</h3><p>æœ€åŸºæœ¬çš„é¦–å…ˆå°±æ˜¯åšå¥½å‚æ•°æ ¡éªŒï¼Œä¸€äº›ä¸åˆæ³•çš„å‚æ•°è¯·æ±‚ç›´æ¥æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<h4 id="ç¼“å­˜æ— æ•ˆçš„-key" class="headerLink">
    <a href="#%e7%bc%93%e5%ad%98%e6%97%a0%e6%95%88%e7%9a%84-key" class="header-mark"></a>ç¼“å­˜æ— æ•ˆçš„ key</h4><p>å¦‚æœ<strong>ç¼“å­˜å’Œæ•°æ®åº“éƒ½æŸ¥ä¸åˆ°</strong>
æŸä¸ª key çš„æ•°æ®å°±å†™ä¸€ä¸ªåˆ° Redis ä¸­å»å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¯·æ±‚çš„ key å˜åŒ–ä¸é¢‘ç¹çš„æƒ…å†µï¼Œå¦‚æœé»‘å®¢æ¶æ„æ”»å‡»ï¼Œæ¯æ¬¡æ„å»ºä¸åŒçš„è¯·æ±‚ keyï¼Œä¼šå¯¼è‡´ Redis ä¸­ç¼“å­˜å¤§é‡æ— æ•ˆçš„ key ã€‚è¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³æ­¤é—®é¢˜ã€‚å¦‚æœéè¦ç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ç©¿é€é—®é¢˜çš„è¯ï¼Œåº”è¯¥å°½é‡å°†æ— æ•ˆçš„ key çš„è¿‡æœŸæ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹æ¯”å¦‚ 1 åˆ†é’Ÿã€‚</p>
<h4 id="å¸ƒéš†è¿‡æ»¤å™¨" class="headerLink">
    <a href="#%e5%b8%83%e9%9a%86%e8%bf%87%e6%bb%a4%e5%99%a8" class="header-mark"></a>å¸ƒéš†è¿‡æ»¤å™¨</h4><p>å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªéå¸¸ç¥å¥‡çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°<strong>åˆ¤æ–­ä¸€ä¸ªç»™å®šæ•°æ®æ˜¯å¦å­˜åœ¨äºæµ·é‡æ•°æ®ä¸­</strong>ã€‚æˆ‘ä»¬éœ€è¦çš„ä»…ä»…å°±æ˜¯åˆ¤æ–­ key æ˜¯å¦åˆæ³•ã€‚</p>
<p>å…·ä½“æ˜¯è¿™æ ·åšçš„ï¼šæŠŠæ‰€æœ‰å¯èƒ½å­˜åœ¨çš„è¯·æ±‚çš„å€¼éƒ½å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå½“ç”¨æˆ·è¯·æ±‚è¿‡æ¥ï¼Œå…ˆåˆ¤æ–­ç”¨æˆ·å‘æ¥çš„è¯·æ±‚çš„å€¼æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ä¸å­˜åœ¨çš„è¯ï¼Œç›´æ¥è¿”å›è¯·æ±‚å‚æ•°é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œå­˜åœ¨çš„è¯å†èµ°å…¶ä»–çš„åˆ¤æ–­æµç¨‹ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/c81922434bf5420c94e349e07980054b.png" title="å¸ƒéš†è¿‡æ»¤å™¨" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/c81922434bf5420c94e349e07980054b.png" data-sub-html="<h2>å¸ƒéš†è¿‡æ»¤å™¨</h2><p>å¸ƒéš†è¿‡æ»¤å™¨</p>">
        
    </a><figcaption class="image-caption">å¸ƒéš†è¿‡æ»¤å™¨</figcaption>
    </figure></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯å¸ƒéš†è¿‡æ»¤å™¨å¯èƒ½ä¼šå­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µã€‚</p>
<p><strong>å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ å­˜åœ¨ï¼Œå°æ¦‚ç‡ä¼šè¯¯åˆ¤ã€‚å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ ä¸åœ¨ï¼Œè¿™ä¸ªå…ƒç´ ä¸€å®šä¸åœ¨</strong>ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºï¼Œå½“ä¸€ä¸ªå…ƒç´ åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<ol>
<li>ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„å“ˆå¸Œå‡½æ•°å¯¹å…ƒç´ å€¼è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°å“ˆå¸Œå€¼ï¼ˆæœ‰å‡ ä¸ªå“ˆå¸Œå‡½æ•°å¾—åˆ°å‡ ä¸ªå“ˆå¸Œå€¼ï¼‰ã€‚</li>
<li>æ ¹æ®å¾—åˆ°çš„å“ˆå¸Œå€¼ï¼Œåœ¨æ•°ç»„ä¸­æŠŠå¯¹åº”ä¸‹æ ‡çš„å€¼ç½®ä¸º 1ã€‚</li>
</ol>
<p>å½“éœ€è¦åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š</p>
<ol>
<li>å¯¹ç»™å®šå…ƒç´ å†æ¬¡è¿›è¡Œç›¸åŒçš„å“ˆå¸Œè®¡ç®—ï¼›</li>
<li>å¾—åˆ°å€¼ä¹‹ååˆ¤æ–­ä½æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦éƒ½ä¸º 1ï¼Œå¦‚æœå€¼éƒ½ä¸º 1ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªå€¼åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå€¼ä¸ä¸º 1ï¼Œè¯´æ˜è¯¥å…ƒç´ ä¸åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚</li>
</ol>
<p>ç„¶è€Œï¼Œä¸€å®šä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼šä¸åŒçš„å­—ç¬¦ä¸²å¯èƒ½å“ˆå¸Œå‡ºæ¥çš„ä½ç½®ç›¸åŒã€‚æˆ‘ä»¬å¯ä»¥é€‚å½“å¢åŠ ä½æ•°ç»„å¤§å°æˆ–è€…è°ƒæ•´æˆ‘ä»¬çš„å“ˆå¸Œå‡½æ•°æ¥é™ä½æ¦‚ç‡ã€‚</p>
<h2 id="ç¼“å­˜é›ªå´©" class="headerLink">
    <a href="#%e7%bc%93%e5%ad%98%e9%9b%aa%e5%b4%a9" class="header-mark"></a>ç¼“å­˜é›ªå´©</h2><p>ç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œåé¢çš„è¯·æ±‚éƒ½ç›´æ¥è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“çŸ­æ—¶é—´å†…æ‰¿å—å¤§é‡è¯·æ±‚ã€‚æˆ–æ˜¯æœ‰ä¸€äº›è¢«å¤§é‡è®¿é—®æ•°æ®ï¼ˆçƒ­ç‚¹ç¼“å­˜ï¼‰åœ¨æŸä¸€æ—¶åˆ»å¤§é¢ç§¯å¤±æ•ˆï¼Œå¯¼è‡´å¯¹åº”çš„è¯·æ±‚ç›´æ¥è½åˆ°äº†æ•°æ®åº“ä¸Šã€‚</p>
<p>è€Œå‡ºç°è¯¥åŸå› ä¸»è¦æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li>å¤§é‡çƒ­ç‚¹æ•°æ®åŒæ—¶è¿‡æœŸï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚éœ€è¦æŸ¥è¯¢æ•°æ®åº“å¹¶å†™åˆ°ç¼“å­˜ã€‚</li>
<li>Redis æ•…éšœå®•æœºï¼Œç¼“å­˜ç³»ç»Ÿå¼‚å¸¸ã€‚</li>
</ul>
<h3 id="ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ" class="headerLink">
    <a href="#%e7%bc%93%e5%ad%98%e5%a4%a7%e9%87%8f%e6%95%b0%e6%8d%ae%e5%90%8c%e6%97%b6%e8%bf%87%e6%9c%9f" class="header-mark"></a>ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ</h3><p>æ•°æ®ä¿å­˜åœ¨ç¼“å­˜ç³»ç»Ÿå¹¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯ç”±äºåœ¨åŒæ—¶ä¸€åˆ»ï¼Œå¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸã€‚ç³»ç»Ÿå°±æŠŠè¯·æ±‚å…¨éƒ¨æ‰“åˆ°æ•°æ®åº“è·å–æ•°æ®ï¼Œå¹¶å‘é‡å¤§çš„è¯å°±ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›æ¿€å¢ã€‚</p>
<p><font color="red"><strong>ç¼“å­˜é›ªå´©æ˜¯å‘ç”Ÿåœ¨å¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆçš„åœºæ™¯ï¼Œè€Œç¼“å­˜å‡»ç©¿æ˜¯åœ¨æŸä¸ªçƒ­ç‚¹æ•°æ®å¤±æ•ˆçš„åœºæ™¯ï¼Œè¿™æ˜¯ä»–ä»¬æœ€å¤§çš„åŒºåˆ«</strong>
</font>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220413/12a33b5773ef4e36be2c71a94b93df11.png" title="ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220413/12a33b5773ef4e36be2c71a94b93df11.png" data-sub-html="<h2>ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ</h2><p>ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ</p>">
        
    </a><figcaption class="image-caption">ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ</figcaption>
    </figure></p>
<h4 id="è¿‡æœŸæ—¶é—´æ·»åŠ éšæœºå€¼" class="headerLink">
    <a href="#%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4%e6%b7%bb%e5%8a%a0%e9%9a%8f%e6%9c%ba%e5%80%bc" class="header-mark"></a>è¿‡æœŸæ—¶é—´æ·»åŠ éšæœºå€¼</h4><p>è¦é¿å…ç»™å¤§é‡çš„æ•°æ®è®¾ç½®ä¸€æ ·çš„è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸæ—¶é—´ = baes æ—¶é—´+ éšæœºæ—¶é—´ï¼ˆè¾ƒå°çš„éšæœºæ•°ï¼Œæ¯”å¦‚éšæœºå¢åŠ  1~5 åˆ†é’Ÿï¼‰ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸ä¼šå¯¼è‡´åŒä¸€æ—¶åˆ»çƒ­ç‚¹æ•°æ®å…¨éƒ¨å¤±æ•ˆï¼ŒåŒæ—¶è¿‡æœŸæ—¶é—´å·®åˆ«ä¹Ÿä¸ä¼šå¤ªå¤§ï¼Œæ—¢ä¿è¯äº†ç›¸è¿‘æ—¶é—´å¤±æ•ˆï¼Œåˆèƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<h4 id="æ¥å£é™æµ" class="headerLink">
    <a href="#%e6%8e%a5%e5%8f%a3%e9%99%90%e6%b5%81" class="header-mark"></a>æ¥å£é™æµ</h4><p>å½“è®¿é—®çš„ä¸æ˜¯æ ¸å¿ƒæ•°æ®çš„æ—¶å€™ï¼Œåœ¨æŸ¥è¯¢çš„æ–¹æ³•ä¸ŠåŠ ä¸Šæ¥å£é™æµä¿æŠ¤ã€‚æ¯”å¦‚è®¾ç½® 10000 req/sã€‚å¦‚æœè®¿é—®çš„æ˜¯æ ¸å¿ƒæ•°æ®æ¥å£ï¼Œç¼“å­˜ä¸å­˜åœ¨å…è®¸ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶è®¾ç½®åˆ°ç¼“å­˜ä¸­ã€‚è¿™æ ·çš„è¯ï¼Œåªæœ‰éƒ¨åˆ†è¯·æ±‚ä¼šå‘é€åˆ°æ•°æ®åº“ï¼Œå‡å°‘äº†å‹åŠ›ã€‚</p>
<p><strong>é™æµï¼Œå°±æ˜¯æŒ‡ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡ç³»ç»Ÿçš„è¯·æ±‚å…¥å£å‰ç«¯æ§åˆ¶æ¯ç§’è¿›å…¥ç³»ç»Ÿçš„è¯·æ±‚æ•°ï¼Œé¿å…è¿‡å¤šçš„è¯·æ±‚è¢«å‘é€åˆ°æ•°æ®åº“</strong>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220413/340401972fac48f391fa6906a9444eac.png" title="é™æµ" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220413/340401972fac48f391fa6906a9444eac.png" data-sub-html="<h2>é™æµ</h2><p>é™æµ</p>">
        
    </a><figcaption class="image-caption">é™æµ</figcaption>
    </figure></p>
<h3 id="redis-æ•…éšœ" class="headerLink">
    <a href="#redis-%e6%95%85%e9%9a%9c" class="header-mark"></a>Redis æ•…éšœ</h3><p>ä¸€æ—¦ Redis æ•…éšœæˆ–å®•æœºï¼Œä¼šå¯¼è‡´å¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“ï¼Œä»è€Œå‘ç”Ÿç¼“å­˜é›ªå´©ã€‚å¯¹äº Redis æ•…éšœï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 id="æœåŠ¡ç†”æ–­å’Œé™æµ" class="headerLink">
    <a href="#%e6%9c%8d%e5%8a%a1%e7%86%94%e6%96%ad%e5%92%8c%e9%99%90%e6%b5%81" class="header-mark"></a>æœåŠ¡ç†”æ–­å’Œé™æµ</h4><p>åœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œé’ˆå¯¹é«˜å¹¶å‘çš„ä½¿ç”¨æœåŠ¡ç†”æ–­æ¥æœ‰æŸæä¾›æœåŠ¡ä»è€Œä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</p>
<p>æœåŠ¡ç†”æ–­å°±æ˜¯å½“ä»ç¼“å­˜è·å–æ•°æ®å‘ç°å¼‚å¸¸ï¼Œåˆ™ç›´æ¥è¿”å›é”™è¯¯æ•°æ®ç»™å‰ç«¯ï¼Œé˜²æ­¢æ‰€æœ‰æµé‡æ‰“åˆ°æ•°æ®åº“å¯¼è‡´å®•æœºã€‚</p>
<p>æœåŠ¡ç†”æ–­å’Œé™æµå±äºåœ¨å‘ç”Ÿäº†ç¼“å­˜é›ªå´©ï¼Œå¦‚ä½•<strong>é™ä½é›ªå´©å¯¹æ•°æ®åº“é€ æˆçš„å½±å“</strong>çš„æ–¹æ¡ˆã€‚</p>
<h4 id="é«˜å¯ç”¨ç¼“å­˜é›†ç¾¤" class="headerLink">
    <a href="#%e9%ab%98%e5%8f%af%e7%94%a8%e7%bc%93%e5%ad%98%e9%9b%86%e7%be%a4" class="header-mark"></a>é«˜å¯ç”¨ç¼“å­˜é›†ç¾¤</h4><p>ç¼“å­˜ç³»ç»Ÿä¸€å®šè¦æ„å»ºä¸€å¥— Redis é«˜å¯ç”¨é›†ç¾¤ï¼Œæ¯”å¦‚ <a href="" rel="">Redis å“¨å…µé›†ç¾¤ TODO</a> æˆ–è€… <a href="" rel="">Redis Cluster é›†ç¾¤ TODO</a>ï¼Œå¦‚æœ Redis çš„ä¸»èŠ‚ç‚¹æ•…éšœå®•æœºäº†ï¼Œä»èŠ‚ç‚¹è¿˜å¯ä»¥åˆ‡æ¢æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œç»§ç»­æä¾›ç¼“å­˜æœåŠ¡ï¼Œé¿å…äº†ç”±äºç¼“å­˜å®ä¾‹å®•æœºè€Œå¯¼è‡´çš„ç¼“å­˜é›ªå´©é—®é¢˜ã€‚</p>
<h2 id="æ€»ç»“" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>æ€»ç»“</h2><ul>
<li>ç¼“å­˜ç©¿é€æŒ‡çš„æ˜¯æ•°æ®åº“æœ¬å°±æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œè¯·æ±‚ç›´å¥”æ•°æ®åº“ï¼Œç¼“å­˜ç³»ç»Ÿå½¢åŒè™šè®¾ã€‚</li>
<li>ç¼“å­˜å‡»ç©¿ï¼ˆå¤±æ•ˆï¼‰æŒ‡çš„æ˜¯æ•°æ®åº“æœ‰æ•°æ®ï¼Œç¼“å­˜æœ¬åº”è¯¥ä¹Ÿæœ‰æ•°æ®ï¼Œä½†æ˜¯ç¼“å­˜è¿‡æœŸäº†ï¼ŒRedis è¿™å±‚æµé‡é˜²æŠ¤å±éšœè¢«å‡»ç©¿äº†ï¼Œè¯·æ±‚ç›´å¥”æ•°æ®åº“ã€‚</li>
<li>ç¼“å­˜é›ªå´©æŒ‡çš„æ˜¯å¤§é‡çš„çƒ­ç‚¹æ•°æ®æ— æ³•åœ¨ Redis ç¼“å­˜ä¸­å¤„ç†ï¼ˆå¤§é¢ç§¯çƒ­ç‚¹æ•°æ®ç¼“å­˜å¤±æ•ˆã€Redis å®•æœºï¼‰ï¼Œæµé‡å…¨éƒ¨æ‰“åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“æå¤§å‹åŠ›ã€‚</li>
</ul>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://mp.weixin.qq.com/s?__biz=Mzg5NDY2MDk4Mw==&amp;mid=2247488270&amp;idx=1&amp;sn=03674abcaa78b027bd12aaafd5a2f6e2" target="_blank" rel="noopener noreferrer">Redis ç¼“å­˜å‡»ç©¿ï¼ˆå¤±æ•ˆï¼‰ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©æ€ä¹ˆè§£å†³ï¼Ÿ</a></li>
</ul>
]]></description>
</item><item>
    <title>Go GC åƒåœ¾å›æ”¶</title>
    <link>https://www.xiaobinqt.cn/go-gc/</link>
    <pubDate>Wed, 06 Apr 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/go-gc/</guid>
    <description><![CDATA[<div class="featured-image">
                <img src="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221118/74f00ad9b278426887ea4348fd7a0e1c.png" referrerpolicy="no-referrer">
            </div><p>åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼ŒGCï¼‰æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­æä¾›çš„è‡ªåŠ¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œè‡ªåŠ¨é‡Šæ”¾ä¸éœ€è¦çš„å†…å­˜å¯¹è±¡ï¼Œè®©å‡ºå­˜å‚¨å™¨èµ„æºã€‚GC è¿‡ç¨‹ä¸­æ— éœ€ç¨‹åºå‘˜æ‰‹åŠ¨æ‰§è¡Œã€‚</p>
<p>GC æœºåˆ¶åœ¨ç°ä»£å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒï¼ŒGC èƒ½åŠ›çš„æ€§èƒ½ä¸ä¼˜åŠ£ä¹Ÿæ˜¯ä¸åŒè¯­è¨€ä¹‹é—´å¯¹æ¯”åº¦æŒ‡æ ‡ä¹‹ä¸€ã€‚</p>
<h2 id="gc-å˜é©" class="headerLink">
    <a href="#gc-%e5%8f%98%e9%9d%a9" class="header-mark"></a>GC å˜é©</h2><p>// TODO</p>
<h2 id="å †å’Œæ ˆ" class="headerLink">
    <a href="#%e5%a0%86%e5%92%8c%e6%a0%88" class="header-mark"></a>å †å’Œæ ˆ</h2><p><strong>æ ˆ</strong>ï¼šç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚</p>
<p><strong>å †</strong>ï¼šä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”± OS å›æ”¶ã€‚</p>
<p>æ ˆä½¿ç”¨çš„æ˜¯ä¸€çº§ç¼“å­˜ï¼Œä»–ä»¬é€šå¸¸éƒ½æ˜¯è¢«è°ƒç”¨æ—¶å¤„äºå­˜å‚¨ç©ºé—´ä¸­ï¼Œ<strong>è°ƒç”¨å®Œæ¯•ç«‹å³é‡Šæ”¾</strong>ã€‚</p>
<p>å †åˆ™æ˜¯å­˜æ”¾åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸç”±è™šæ‹Ÿæœºçš„åƒåœ¾å›æ”¶ç®—æ³•æ¥å†³å®šï¼Œä½†å¹¶ä¸æ˜¯ä¸€æ—¦æˆä¸ºå­¤å„¿å¯¹è±¡å°±èƒ½è¢«å›æ”¶ã€‚</p>
<p>ç”³è¯·åˆ°æ ˆå†…å­˜å¥½å¤„ï¼šå‡½æ•°è¿”å›ç›´æ¥é‡Šæ”¾ï¼Œä¸ä¼šå¼•èµ·åƒåœ¾å›æ”¶ï¼Œå¯¹æ€§èƒ½æ²¡æœ‰å½±å“ã€‚</p>
<h2 id="æ ‡è®°æ¸…é™¤ç®—æ³•" class="headerLink">
    <a href="#%e6%a0%87%e8%ae%b0%e6%b8%85%e9%99%a4%e7%ae%97%e6%b3%95" class="header-mark"></a>æ ‡è®°æ¸…é™¤ç®—æ³•</h2><p>Go V1.3 ä¹‹å‰ä½¿ç”¨æ™®é€šçš„<strong><ruby>æ ‡è®°-æ¸…é™¤<rt>mark and sweep</rt></ruby></strong>ç®—æ³•ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªä¸»è¦çš„æ­¥éª¤ï¼š</p>
<ol>
<li>
<p>æ ‡è®°(Mark phase)ï¼Œæ‰¾å‡º<strong>ä¸å¯è¾¾</strong>çš„å¯¹è±¡ï¼Œç„¶ååšä¸Šæ ‡è®°ã€‚</p>
</li>
<li>
<p>æ¸…é™¤(Sweep phase)ï¼Œå›æ”¶æ ‡è®°å¥½çš„å¯¹è±¡ã€‚</p>
</li>
</ol>
<h3 id="ç¬¬ä¸€æ­¥" class="headerLink">
    <a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5" class="header-mark"></a>ç¬¬ä¸€æ­¥</h3><p><strong>æš‚åœ</strong>ç¨‹åºä¸šåŠ¡é€»è¾‘ï¼Œ åˆ†ç±»å‡ºå¯è¾¾å’Œä¸å¯è¾¾çš„å¯¹è±¡ï¼Œç„¶ååšä¸Šæ ‡è®°ã€‚</p>
<figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/692b1bd1669647518c96b6530c01b8a3.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/692b1bd1669647518c96b6530c01b8a3.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/692b1bd1669647518c96b6530c01b8a3.png" data-sub-html="<h2>ç¨‹åºä¸å¯¹è±¡çš„å¯è¾¾å…³ç³»</h2>">
        
    </a><figcaption class="image-caption">ç¨‹åºä¸å¯¹è±¡çš„å¯è¾¾å…³ç³»</figcaption>
    </figure>
<p>ğŸ‘†å›¾ä¸­è¡¨ç¤ºæ˜¯ç¨‹åºä¸å¯¹è±¡çš„å¯è¾¾å…³ç³»ï¼Œç›®å‰<strong>ç¨‹åºçš„å¯è¾¾</strong>å¯¹è±¡æœ‰å¯¹è±¡ 1-2-3ï¼Œå¯¹è±¡ 4-7 ç­‰äº”ä¸ªå¯¹è±¡ã€‚</p>
<h3 id="ç¬¬äºŒæ­¥" class="headerLink">
    <a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5" class="header-mark"></a>ç¬¬äºŒæ­¥</h3><p>å¼€å§‹æ ‡è®°ï¼Œç¨‹åºæ‰¾å‡ºå®ƒæ‰€æœ‰å¯è¾¾çš„å¯¹è±¡ï¼Œå¹¶åšä¸Šæ ‡è®°ğŸ‘‡ã€‚</p>
<figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/00d8aba1d229497c9cc907b359010178.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/00d8aba1d229497c9cc907b359010178.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/00d8aba1d229497c9cc907b359010178.png" data-sub-html="<h2>æ‰¾å‡ºå¯è¾¾å¯¹è±¡</h2>">
        
    </a><figcaption class="image-caption">æ‰¾å‡ºå¯è¾¾å¯¹è±¡</figcaption>
    </figure>
<p>å¯¹è±¡ 1-2-3 ã€å¯¹è±¡ 4-7 ç­‰äº”ä¸ªå¯¹è±¡è¢«åšä¸Šæ ‡è®°ã€‚</p>
<h3 id="ç¬¬ä¸‰æ­¥" class="headerLink">
    <a href="#%e7%ac%ac%e4%b8%89%e6%ad%a5" class="header-mark"></a>ç¬¬ä¸‰æ­¥</h3><p>æ ‡è®°å®Œäº†ä¹‹åï¼Œç„¶åå¼€å§‹æ¸…é™¤æœªæ ‡è®°çš„å¯¹è±¡ã€‚</p>
<figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/1a1ebfbd5c9b4f4183cb5bca704311e5.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/1a1ebfbd5c9b4f4183cb5bca704311e5.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/1a1ebfbd5c9b4f4183cb5bca704311e5.png" data-sub-html="<h2>æ¸…é™¤å¯¹è±¡</h2>">
        
    </a><figcaption class="image-caption">æ¸…é™¤å¯¹è±¡</figcaption>
    </figure>
<p>å¯¹è±¡ 5ï¼Œ6 ä¸å¯è¾¾ï¼Œè¢« GC æ¸…é™¤ã€‚</p>
<p>æ“ä½œç®€å•ï¼Œä½†æ˜¯ mark and sweep ç®—æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œéœ€è¦ç¨‹åºæš‚åœï¼å³ <strong><ruby>STW<rt>stop the world</rt></ruby></strong>ï¼ŒSTW çš„è¿‡ç¨‹ä¸­ï¼ŒCPU ä¸æ‰§è¡Œç”¨æˆ·ä»£ç ï¼Œå…¨éƒ¨ç”¨äºåƒåœ¾å›æ”¶ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„å½±å“å¾ˆå¤§ï¼Œæ‰€ä»¥ STW ä¹Ÿæ˜¯ä¸€äº›å›æ”¶æœºåˆ¶æœ€å¤§çš„éš¾é¢˜å’Œå¸Œæœ›ä¼˜åŒ–çš„ç‚¹ã€‚</p>
<p><strong>åœ¨æ‰§è¡Œç¬¬ä¸‰æ­¥çš„è¿™æ®µæ—¶é—´ï¼Œç¨‹åºä¼šæš‚å®šåœæ­¢ä»»ä½•å·¥ä½œï¼Œå¡åœ¨é‚£ç­‰å¾…å›æ”¶æ‰§è¡Œå®Œæ¯•</strong>ã€‚</p>
<h3 id="ç¬¬å››æ­¥" class="headerLink">
    <a href="#%e7%ac%ac%e5%9b%9b%e6%ad%a5" class="header-mark"></a>ç¬¬å››æ­¥</h3><p>åœæ­¢æš‚åœï¼Œè®©ç¨‹åºç»§ç»­æ‰§è¡Œã€‚ç„¶åå¾ªç¯é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ° process ç¨‹åºç”Ÿå‘½å‘¨æœŸç»“æŸã€‚</p>
<h3 id="ç¼ºç‚¹ä¸ä¼˜åŒ–" class="headerLink">
    <a href="#%e7%bc%ba%e7%82%b9%e4%b8%8e%e4%bc%98%e5%8c%96" class="header-mark"></a>ç¼ºç‚¹ä¸ä¼˜åŒ–</h3><p>æ ‡è®°æ¸…é™¤ç®—æ³•æ˜äº†ï¼Œè¿‡ç¨‹é²œæ˜å¹²è„†ï¼Œä½†æ˜¯ä¹Ÿæœ‰éå¸¸ä¸¥é‡çš„é—®é¢˜ï¼Œå°±æ˜¯ STWï¼Œè®©ç¨‹åºæš‚åœï¼Œç¨‹åºå‡ºç°å¡é¡¿ã€‚</p>
<p>Go V1.3 ç‰ˆæœ¬ä¹‹å‰å°±æ˜¯ç”¨è¿™ç§æ–¹å¼æ¥å®æ–½çš„ã€‚æ‰§è¡Œ GC çš„åŸºæœ¬æµç¨‹å°±æ˜¯é¦–å…ˆå¯åŠ¨ STW æš‚åœï¼Œç„¶åæ‰§è¡Œæ ‡è®°ï¼Œå†æ‰§è¡Œæ•°æ®å›æ”¶ï¼Œæœ€ååœæ­¢ STW ï¼Œå¦‚ä¸‹å›¾ğŸ‘‡</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/7913f2957c4f4b5c9ba01013cb0c44fa.png" title="STW" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/7913f2957c4f4b5c9ba01013cb0c44fa.png" data-sub-html="<h2>STW</h2><p>STW</p>">
        
    </a><figcaption class="image-caption">STW</figcaption>
    </figure></p>
<p>ä»ğŸ‘†æ¥çœ‹ï¼Œå…¨éƒ¨çš„ GC æ—¶é—´éƒ½æ˜¯åŒ…è£¹åœ¨ STW èŒƒå›´ä¹‹å†…çš„ï¼Œè¿™æ ·è²Œä¼¼ç¨‹åºæš‚åœçš„æ—¶é—´è¿‡é•¿ï¼Œå½±å“ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚æ‰€ä»¥Go V1.3 åšäº†ç®€å•çš„ä¼˜åŒ–ï¼Œå°† STW çš„æ­¥éª¤æå‰ï¼Œå‡å°‘ STW æš‚åœçš„æ—¶é—´èŒƒå›´
ğŸ‘‡</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/2b64ccd849624544ae495ed36236a780.png" title="STWä¼˜åŒ–" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/2b64ccd849624544ae495ed36236a780.png" data-sub-html="<h2>STWä¼˜åŒ–</h2><p>STWä¼˜åŒ–</p>">
        
    </a><figcaption class="image-caption">STWä¼˜åŒ–</figcaption>
    </figure></p>
<p>ä¸»è¦æ˜¯å°† STW çš„æ­¥éª¤æå‰äº†ä¸€æ­¥ï¼Œå› ä¸ºåœ¨ Sweep æ¸…é™¤çš„æ—¶å€™ï¼Œå¯ä»¥ä¸éœ€è¦ STW åœæ­¢ï¼Œå› ä¸ºè¿™äº›å¯¹è±¡å·²ç»æ˜¯ä¸å¯è¾¾å¯¹è±¡äº†ï¼Œä¸ä¼šå‡ºç°å›æ”¶å†™å†²çªç­‰é—®é¢˜ï¼Œ<strong>æ¸…é™¤æ“ä½œå’Œç”¨æˆ·é€»è¾‘å¯ä»¥å¹¶å‘</strong>ã€‚</p>
<p>ä½†æ˜¯æ— è®ºæ€ä¹ˆä¼˜åŒ–ï¼ŒGo v1.3 éƒ½é¢ä¸´è¿™ä¸ªä¸€ä¸ªé‡è¦é—®é¢˜ï¼Œå°±æ˜¯ mark-and-sweep ç®—æ³•ä¼šæš‚åœæ•´ä¸ªç¨‹åº ã€‚</p>
<h2 id="æœ‰stwçš„ä¸‰è‰²æ ‡è®°æ³•" class="headerLink">
    <a href="#%e6%9c%89stw%e7%9a%84%e4%b8%89%e8%89%b2%e6%a0%87%e8%ae%b0%e6%b3%95" class="header-mark"></a>æœ‰STWçš„ä¸‰è‰²æ ‡è®°æ³•</h2><p>Go ä¸­çš„åƒåœ¾å›æ”¶ä¸»è¦åº”ç”¨ä¸‰è‰²æ ‡è®°æ³•ï¼ŒGC è¿‡ç¨‹å’Œå…¶ä»–ç”¨æˆ· goroutine å¯å¹¶å‘è¿è¡Œï¼Œä½†éœ€è¦ä¸€å®šæ—¶é—´çš„ STWã€‚</p>
<p>æ‰€è°“ä¸‰è‰²æ ‡è®°æ³•å®é™…ä¸Šå°±æ˜¯é€šè¿‡<strong>ä¸‰ä¸ªé˜¶æ®µçš„æ ‡è®°</strong>æ¥ç¡®å®šéœ€è¦æ¸…é™¤çš„å¯¹è±¡æœ‰å“ªäº›ã€‚</p>
<h3 id="ç¬¬ä¸€æ­¥-1" class="headerLink">
    <a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5-1" class="header-mark"></a>ç¬¬ä¸€æ­¥</h3><p>æ¯æ¬¡æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œé»˜è®¤çš„é¢œè‰²éƒ½æ˜¯æ ‡è®°ä¸º â€œç™½è‰²â€ğŸ‘‡</p>
<figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/3b601d5fc23247b4b05de52b7fb2ed52.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/3b601d5fc23247b4b05de52b7fb2ed52.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/3b601d5fc23247b4b05de52b7fb2ed52.png" data-sub-html="<h2>ç™½è‰²å¯¹è±¡</h2>">
        
    </a><figcaption class="image-caption">ç™½è‰²å¯¹è±¡</figcaption>
    </figure>
<p>ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„ç¨‹åºå¯æŠµè¾¾çš„å†…å­˜å¯¹è±¡å…³ç³»å¦‚å·¦å›¾æ‰€ç¤ºï¼Œå³è¾¹çš„æ ‡è®°è¡¨æ˜¯ç”¨æ¥è®°å½•ç›®å‰æ¯ä¸ªå¯¹è±¡çš„æ ‡è®°é¢œè‰²åˆ†ç±»ã€‚è¿™é‡Œæ‰€è°“ â€œç¨‹åºâ€ï¼Œæ˜¯ä¸€äº›<strong>å¯¹è±¡çš„æ ¹èŠ‚ç‚¹é›†åˆ</strong>ã€‚å¦‚æœæˆ‘ä»¬å°† â€œç¨‹åºâ€ å±•å¼€ï¼Œä¼šå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¡¨ç°å½¢å¼ï¼š</p>
<figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/25f6f7613a894569a426c70c6c8c2c10.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/25f6f7613a894569a426c70c6c8c2c10.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/25f6f7613a894569a426c70c6c8c2c10.png" data-sub-html="<h2>ç¨‹åºçš„æ ¹èŠ‚ç‚¹é›†åˆå±•å¼€</h2>">
        
    </a><figcaption class="image-caption">ç¨‹åºçš„æ ¹èŠ‚ç‚¹é›†åˆå±•å¼€</figcaption>
    </figure>
<h3 id="ç¬¬äºŒæ­¥-1" class="headerLink">
    <a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5-1" class="header-mark"></a>ç¬¬äºŒæ­¥</h3><p>æ¯æ¬¡ GC å›æ”¶å¼€å§‹ï¼Œ ä¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ‰€æœ‰å¯¹è±¡ï¼ŒæŠŠéå†åˆ°çš„å¯¹è±¡ä»ç™½è‰²é›†åˆæ”¾å…¥ â€œç°è‰²â€ é›†åˆï¼š</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/c982dc0455cf437bace1b65454597995.png" title="éå†æ ¹å¯¹è±¡" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/c982dc0455cf437bace1b65454597995.png" data-sub-html="<h2>éå†æ ¹å¯¹è±¡</h2><p>éå†æ ¹å¯¹è±¡</p>">
        
    </a><figcaption class="image-caption">éå†æ ¹å¯¹è±¡</figcaption>
    </figure></p>
<p>æœ¬æ¬¡éå†æ˜¯<strong>ä¸€æ¬¡éå†ï¼Œéé€’å½’å½¢å¼</strong>ï¼Œæ˜¯ä»ç¨‹åºåˆæ¬¡å¯æŠµè¾¾çš„å¯¹è±¡éå†ä¸€å±‚ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“å‰å¯æŠµè¾¾çš„å¯¹è±¡æ˜¯å¯¹è±¡1å’Œå¯¹è±¡4ï¼Œé‚£ä¹ˆè‡ªç„¶æœ¬è½®éå†ç»“æŸï¼Œå¯¹è±¡1å’Œå¯¹è±¡4å°±ä¼šè¢«æ ‡è®°ä¸ºç°è‰²ï¼Œç°è‰²æ ‡è®°è¡¨å°±ä¼šå¤šå‡ºè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚</p>
<h3 id="ç¬¬ä¸‰æ­¥-1" class="headerLink">
    <a href="#%e7%ac%ac%e4%b8%89%e6%ad%a5-1" class="header-mark"></a>ç¬¬ä¸‰æ­¥</h3><p>éå†ç°è‰²é›†åˆï¼Œå°†ç°è‰²å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ä»ç™½è‰²é›†åˆæ”¾å…¥ç°è‰²é›†åˆï¼Œä¹‹åå°†æ­¤ç°è‰²å¯¹è±¡æ”¾å…¥é»‘è‰²é›†åˆï¼š</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/f381a66d7e4944c998f7c893629accd4.png" title="éå†_2" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/f381a66d7e4944c998f7c893629accd4.png" data-sub-html="<h2>éå†_2</h2><p>éå†_2</p>">
        
    </a><figcaption class="image-caption">éå†_2</figcaption>
    </figure></p>
<p>è¿™ä¸€æ¬¡éå†æ˜¯<strong>åªæ‰«æç°è‰²å¯¹è±¡</strong>ï¼Œå°†ç°è‰²å¯¹è±¡çš„ç¬¬ä¸€å±‚éå†å¯æŠµè¾¾çš„å¯¹è±¡ç”±ç™½è‰²å˜ä¸ºç°è‰²ï¼Œå¦‚ï¼šå¯¹è±¡2ã€å¯¹è±¡7ã€‚ è€Œä¹‹å‰çš„ç°è‰²å¯¹è±¡1 å’Œå¯¹è±¡4 åˆ™ä¼šè¢«æ ‡è®°ä¸ºé»‘è‰²ï¼ŒåŒæ—¶ç”±ç°è‰²æ ‡è®°è¡¨ç§»åŠ¨åˆ°é»‘è‰²æ ‡è®°è¡¨ä¸­ã€‚</p>
<h3 id="ç¬¬å››æ­¥-1" class="headerLink">
    <a href="#%e7%ac%ac%e5%9b%9b%e6%ad%a5-1" class="header-mark"></a>ç¬¬å››æ­¥</h3><p>é‡å¤ç¬¬ä¸‰æ­¥ï¼Œ ç›´åˆ°ç°è‰²ä¸­æ— ä»»ä½•å¯¹è±¡ï¼Œå¦‚å›¾ğŸ‘‡æ‰€ç¤ºï¼š</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/3a751806772e445d813bee6344ab81d1.png" title="éå†_3" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/3a751806772e445d813bee6344ab81d1.png" data-sub-html="<h2>éå†_3</h2><p>éå†_3</p>">
        
    </a><figcaption class="image-caption">éå†_3</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/07f715dda56a4b6ab242367ce0e15e4b.png" title="éå†_4" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/07f715dda56a4b6ab242367ce0e15e4b.png" data-sub-html="<h2>éå†_4</h2><p>éå†_4</p>">
        
    </a><figcaption class="image-caption">éå†_4</figcaption>
    </figure></p>
<p>å½“æˆ‘ä»¬å…¨éƒ¨çš„å¯è¾¾å¯¹è±¡éƒ½éå†å®Œåï¼Œ<strong>ç°è‰²æ ‡è®°è¡¨å°†ä¸å†å­˜åœ¨ç°è‰²å¯¹è±¡</strong>ã€‚</p>
<p>ç›®å‰å…¨éƒ¨å†…å­˜çš„æ•°æ®åªæœ‰ä¸¤ç§é¢œè‰²ï¼Œé»‘è‰²å’Œç™½è‰²ã€‚é‚£ä¹ˆï¼Œé»‘è‰²å¯¹è±¡å°±æ˜¯æˆ‘ä»¬ç¨‹åºé€»è¾‘å¯è¾¾ï¼ˆéœ€è¦çš„ï¼‰å¯¹è±¡ï¼Œè¿™äº›æ•°æ®æ˜¯ç›®å‰æ”¯æ’‘ç¨‹åºæ­£å¸¸ä¸šåŠ¡è¿è¡Œçš„ï¼Œæ˜¯åˆæ³•çš„æœ‰ç”¨æ•°æ®ï¼Œä¸å¯åˆ é™¤ã€‚ç™½è‰²çš„å¯¹è±¡æ˜¯å…¨éƒ¨ä¸å¯è¾¾å¯¹è±¡ï¼Œç›®å‰ç¨‹åºé€»è¾‘å¹¶ä¸ä¾èµ–ä»–ä»¬ï¼Œé‚£ä¹ˆç™½è‰²å¯¹è±¡å°±æ˜¯å†…å­˜ä¸­ç›®å‰çš„åƒåœ¾æ•°æ®ï¼Œéœ€è¦è¢«æ¸…é™¤ã€‚</p>
<h3 id="ç¬¬äº”æ­¥" class="headerLink">
    <a href="#%e7%ac%ac%e4%ba%94%e6%ad%a5" class="header-mark"></a>ç¬¬äº”æ­¥</h3><p>å›æ”¶æ‰€æœ‰çš„ç™½è‰²æ ‡è®°è¡¨çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å›æ”¶åƒåœ¾ï¼Œå¦‚å›¾æ‰€ç¤ºğŸ‘‡</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/f271ee96ace2416c8eaf808d3f45b8f0.png" title="GC å›æ”¶" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/f271ee96ace2416c8eaf808d3f45b8f0.png" data-sub-html="<h2>GC å›æ”¶</h2><p>GC å›æ”¶</p>">
        
    </a><figcaption class="image-caption">GC å›æ”¶</figcaption>
    </figure></p>
<p>å°†å…¨éƒ¨çš„ç™½è‰²å¯¹è±¡è¿›è¡Œåˆ é™¤å›æ”¶ï¼Œå‰©ä¸‹çš„å°±æ˜¯å…¨éƒ¨ä¾èµ–çš„é»‘è‰²å¯¹è±¡ã€‚</p>
<p>è¿™é‡Œé¢å¯èƒ½ä¼šæœ‰å¾ˆå¤šå¹¶å‘æµç¨‹å‡ä¼šè¢«æ‰«æï¼Œæ‰§è¡Œå¹¶å‘æµç¨‹çš„å†…å­˜å¯èƒ½ç›¸äº’ä¾èµ–ï¼Œä¸ºäº†åœ¨ GC è¿‡ç¨‹ä¸­ä¿è¯æ•°æ®çš„å®‰å…¨ï¼Œ<strong>åœ¨å¼€å§‹ä¸‰è‰²æ ‡è®°ä¹‹å‰å°±ä¼šåŠ ä¸Š STWï¼Œåœ¨æ‰«æç¡®å®šé»‘ç™½å¯¹è±¡ä¹‹åå†æ”¾å¼€ STW</strong>ã€‚ä½†æ˜¯å¾ˆæ˜æ˜¾è¿™æ ·çš„ GC æ‰«æçš„æ€§èƒ½å®åœ¨æ˜¯å¤ªä½äº†ã€‚</p>
<p>æ‰€ä»¥ç°åœ¨çš„ä¸‰è‰²æ ‡è®°æ³•è¿˜æ˜¯ä¼š STWã€‚</p>
<h2 id="æ²¡æœ‰stwçš„ä¸‰è‰²æ ‡è®°æ³•" class="headerLink">
    <a href="#%e6%b2%a1%e6%9c%89stw%e7%9a%84%e4%b8%89%e8%89%b2%e6%a0%87%e8%ae%b0%e6%b3%95" class="header-mark"></a>æ²¡æœ‰STWçš„ä¸‰è‰²æ ‡è®°æ³•</h2><p>å¦‚æœæ²¡æœ‰ STWï¼Œé‚£ä¹ˆä¹Ÿå°±ä¸ä¼šå†å­˜åœ¨æ€§èƒ½ä¸Šçš„é—®é¢˜ï¼Œé‚£ä¹ˆå‡è®¾å¦‚æœä¸‰è‰²æ ‡è®°æ³•ä¸åŠ å…¥ STW ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…â“</p>
<p>è¿˜æ˜¯åŸºäºä¸Šè¿°çš„ä¸‰è‰²æ ‡è®°æ³•æ¥åˆ†æï¼Œä»–æ˜¯ä¸€å®šè¦ä¾èµ– STW çš„ï¼Œå› ä¸ºå¦‚æœä¸æš‚åœç¨‹åºï¼Œç¨‹åºçš„é€»è¾‘å¯èƒ½ä¼šæ”¹å˜å¯¹è±¡çš„å¼•ç”¨å…³ç³»ï¼Œè¿™ç§åŠ¨ä½œå¦‚æœåœ¨æ ‡è®°é˜¶æ®µåšäº†ä¿®æ”¹ï¼Œä¼šå½±å“æ ‡è®°ç»“æœçš„æ­£ç¡®æ€§ã€‚</p>
<p>æ¥çœ‹çœ‹ä¸€ä¸ªåœºæ™¯ï¼Œå¦‚æœä¸‰è‰²æ ‡è®°æ³•ï¼Œæ ‡è®°è¿‡ç¨‹ä¸ä½¿ç”¨ STW å°†ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…â“</p>
<p>æˆ‘ä»¬æŠŠåˆå§‹çŠ¶æ€è®¾ç½®ä¸ºå·²ç»ç»å†äº†ç¬¬ä¸€è½®æ‰«æï¼Œç›®å‰é»‘è‰²çš„æœ‰å¯¹è±¡ 1 å’Œå¯¹è±¡ 4ï¼Œç°è‰²çš„æœ‰å¯¹è±¡ 2 å’Œå¯¹è±¡ 7ï¼Œå…¶ä»–çš„ä¸ºç™½è‰²å¯¹è±¡ï¼Œä¸”å¯¹è±¡ 2 æ˜¯é€šè¿‡æŒ‡é’ˆ p æŒ‡å‘å¯¹è±¡ 3 çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/df4917c4b48d4e12857a5b8552cf3815.png" title="no ST2 01" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/df4917c4b48d4e12857a5b8552cf3815.png" data-sub-html="<h2>no ST2 01</h2><p>no ST2 01</p>">
        
    </a><figcaption class="image-caption">no ST2 01</figcaption>
    </figure></p>
<p>ç°åœ¨å¦‚æœä¸‰è‰²æ ‡è®°è¿‡ç¨‹ä¸å¯åŠ¨ STWï¼Œé‚£ä¹ˆåœ¨ GC æ‰«æè¿‡ç¨‹ä¸­ï¼Œ<strong>ä»»æ„çš„å¯¹è±¡å‡å¯èƒ½å‘ç”Ÿè¯»å†™æ“ä½œ</strong>
ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨è¿˜æ²¡æœ‰æ‰«æåˆ°å¯¹è±¡ 2 çš„æ—¶å€™ï¼Œå·²ç»æ ‡è®°ä¸ºé»‘è‰²çš„å¯¹è±¡ 4ï¼Œæ­¤æ—¶åˆ›å»ºæŒ‡é’ˆ qï¼Œå¹¶ä¸”æŒ‡å‘ç™½è‰²çš„å¯¹è±¡ 3ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/c47b38d901dc46efb2ddc7b3d01fede4.png" title="no ST2 02" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/c47b38d901dc46efb2ddc7b3d01fede4.png" data-sub-html="<h2>no ST2 02</h2><p>no ST2 02</p>">
        
    </a><figcaption class="image-caption">no ST2 02</figcaption>
    </figure></p>
<p>ä¸æ­¤åŒæ—¶ç°è‰²çš„å¯¹è±¡ 2 å°†æŒ‡é’ˆ p ç§»é™¤ï¼Œé‚£ä¹ˆç™½è‰²çš„å¯¹è±¡ 3 å®åˆ™æ˜¯è¢«æŒ‚åœ¨äº†å·²ç»æ‰«æå®Œæˆçš„é»‘è‰²çš„å¯¹è±¡ 4 ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/da651f3e078847ad8ba6ca0635301978.png" title="no ST2 03" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/da651f3e078847ad8ba6ca0635301978.png" data-sub-html="<h2>no ST2 03</h2><p>no ST2 03</p>">
        
    </a><figcaption class="image-caption">no ST2 03</figcaption>
    </figure></p>
<p>ç„¶åæˆ‘ä»¬æ­£å¸¸æ‰§è¡Œä¸‰è‰²æ ‡è®°çš„ç®—æ³•é€»è¾‘ï¼Œå°†æ‰€æœ‰ç°è‰²çš„å¯¹è±¡æ ‡è®°ä¸ºé»‘è‰²ï¼Œé‚£ä¹ˆå¯¹è±¡ 2 å’Œå¯¹è±¡ 7 å°±è¢«æ ‡è®°æˆäº†é»‘è‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/2a00e38c265a4370923ed6b4bf4a7435.png" title="no ST2 04" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/2a00e38c265a4370923ed6b4bf4a7435.png" data-sub-html="<h2>no ST2 04</h2><p>no ST2 04</p>">
        
    </a><figcaption class="image-caption">no ST2 04</figcaption>
    </figure></p>
<p>é‚£ä¹ˆå°±æ‰§è¡Œäº†ä¸‰è‰²æ ‡è®°çš„æœ€åä¸€æ­¥ï¼Œå°†æ‰€æœ‰ç™½è‰²å¯¹è±¡å½“åšåƒåœ¾è¿›è¡Œå›æ”¶ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/512e92ad527e4ac1871abb2a8df63e75.png" title="no ST2 05" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/512e92ad527e4ac1871abb2a8df63e75.png" data-sub-html="<h2>no ST2 05</h2><p>no ST2 05</p>">
        
    </a><figcaption class="image-caption">no ST2 05</figcaption>
    </figure></p>
<p>æœ€åæˆ‘ä»¬å‘ç°ï¼Œæœ¬æ¥æ˜¯å¯¹è±¡4åˆæ³•å¼•ç”¨çš„å¯¹è±¡ 3ï¼Œå´è¢«GCç»™â€œè¯¯æ€â€å›æ”¶æ‰äº†ã€‚</p>
<p>å¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼Œåœ¨ä¸‰è‰²æ ‡è®°æ³•ä¸­æ˜¯ä¸å¸Œæœ›è¢«å‘ç”Ÿçš„ã€‚</p>
<ul>
<li>ğŸ‘‰ ä¸€ä¸ªç™½è‰²å¯¹è±¡è¢«é»‘è‰²å¯¹è±¡å¼•ç”¨ <strong>ï¼ˆç™½è‰²è¢«æŒ‚åœ¨é»‘è‰²ä¸‹ï¼‰</strong></li>
<li>ğŸ‘‰ ç°è‰²å¯¹è±¡ä¸å®ƒä¹‹é—´å¯è¾¾å…³ç³»çš„ç™½è‰²å¯¹è±¡é­åˆ°ç ´å <strong>ï¼ˆç°è‰²åŒæ—¶ä¸¢äº†è¯¥ç™½è‰²ï¼‰</strong></li>
</ul>
<p>å¦‚æœå½“ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³æ—¶ï¼Œå°±ä¼šå‡ºç°å¯¹è±¡ä¸¢å¤±ç°è±¡ï¼</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221120/f9e8dce78c274ccfb76bb491967d8fc2.png" title="ä¸‰è‰²æ ‡è®°å¯¹è±¡ä¸¢å¤±" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221120/f9e8dce78c274ccfb76bb491967d8fc2.png" data-sub-html="<h2>ä¸‰è‰²æ ‡è®°å¯¹è±¡ä¸¢å¤±</h2><p>ä¸‰è‰²æ ‡è®°å¯¹è±¡ä¸¢å¤±</p>">
        
    </a><figcaption class="image-caption">ä¸‰è‰²æ ‡è®°å¯¹è±¡ä¸¢å¤±</figcaption>
    </figure></p>
<p>å¹¶ä¸”ï¼Œä¸Šé¢æ‰€ç¤ºçš„åœºæ™¯ä¸­ï¼Œå¦‚æœç¤ºä¾‹ä¸­çš„ç™½è‰²å¯¹è±¡3è¿˜æœ‰å¾ˆå¤šä¸‹æ¸¸å¯¹è±¡çš„è¯ï¼Œä¹Ÿä¼šä¸€å¹¶éƒ½æ¸…ç†æ‰ã€‚</p>
<p>ä¸ºäº†é˜²æ­¢è¿™ç§ç°è±¡çš„å‘ç”Ÿï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ STWï¼Œç›´æ¥ç¦æ­¢æ‰å…¶ä»–ç”¨æˆ·ç¨‹åºå¯¹å¯¹è±¡å¼•ç”¨å…³ç³»çš„å¹²æ‰°ï¼Œä½†æ˜¯<strong>STWçš„è¿‡ç¨‹æœ‰æ˜æ˜¾çš„èµ„æºæµªè´¹ï¼Œå¯¹æ‰€æœ‰çš„ç”¨æˆ·ç¨‹åºéƒ½æœ‰å¾ˆå¤§å½±å“</strong>ã€‚</p>
<p>é‚£ä¹ˆæ˜¯å¦å¯ä»¥åœ¨ä¿è¯å¯¹è±¡ä¸ä¸¢å¤±çš„æƒ…å†µä¸‹åˆç†çš„å°½å¯èƒ½çš„æé«˜ GC æ•ˆç‡ï¼Œå‡å°‘ STW æ—¶é—´å‘¢â“</p>
<p>ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬åªè¦ä½¿ç”¨ä¸€ç§æœºåˆ¶ï¼Œå°è¯•å»ç ´åä¸Šé¢çš„ä¸¤ä¸ªå¿…è¦æ¡ä»¶å°±å¯ä»¥äº†ã€‚</p>
<h2 id="å±éšœæœºåˆ¶" class="headerLink">
    <a href="#%e5%b1%8f%e9%9a%9c%e6%9c%ba%e5%88%b6" class="header-mark"></a>å±éšœæœºåˆ¶</h2><p>å¦‚æœè®© GC å›æ”¶å™¨ï¼Œæ»¡è¶³ä¸‹é¢ä¸¤ç§æƒ…å†µä¹‹ä¸€æ—¶ï¼Œå³å¯ä¿è¯å¯¹è±¡ä¸ä¸¢å¤±ã€‚è¿™ä¸¤ç§æ–¹å¼å°±æ˜¯<strong>å¼ºä¸‰è‰²ä¸å˜å¼</strong>å’Œ<strong>å¼±ä¸‰è‰²ä¸å˜å¼</strong>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221120/95aefcee22ae4f72a04437582362e947.png" title="å¼º/å¼±ä¸‰è‰²ä¸å˜å¼" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20221120/95aefcee22ae4f72a04437582362e947.png" data-sub-html="<h2>å¼º/å¼±ä¸‰è‰²ä¸å˜å¼</h2><p>å¼º/å¼±ä¸‰è‰²ä¸å˜å¼</p>">
        
    </a><figcaption class="image-caption">å¼º/å¼±ä¸‰è‰²ä¸å˜å¼</figcaption>
    </figure></p>
<h3 id="å¼ºä¸‰è‰²ä¸å˜å¼" class="headerLink">
    <a href="#%e5%bc%ba%e4%b8%89%e8%89%b2%e4%b8%8d%e5%8f%98%e5%bc%8f" class="header-mark"></a>å¼ºä¸‰è‰²ä¸å˜å¼</h3><p>å¼ºä¸‰è‰²ä¸å˜å¼å®é™…ä¸Šæ˜¯å¼ºåˆ¶æ€§çš„<strong>ä¸å…è®¸é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡</strong>ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°æœ‰ç™½è‰²å¯¹è±¡è¢«è¯¯åˆ çš„æƒ…å†µã€‚</p>
<figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230105/9f8f0337b20c475bbf637503e68b0766.png" title="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230105/9f8f0337b20c475bbf637503e68b0766.png" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20230105/9f8f0337b20c475bbf637503e68b0766.png" data-sub-html="<h2>å¼ºä¸‰è‰²ä¸å˜å¼</h2>">
        
    </a><figcaption class="image-caption">å¼ºä¸‰è‰²ä¸å˜å¼</figcaption>
    </figure>
<h3 id="å¼±ä¸‰è‰²ä¸å˜å¼" class="headerLink">
    <a href="#%e5%bc%b1%e4%b8%89%e8%89%b2%e4%b8%8d%e5%8f%98%e5%bc%8f" class="header-mark"></a>å¼±ä¸‰è‰²ä¸å˜å¼</h3><p>æ‰€æœ‰è¢«é»‘è‰²å¯¹è±¡å¼•ç”¨çš„ç™½è‰²å¯¹è±¡éƒ½å¤„äºç°è‰²ä¿æŠ¤çŠ¶æ€ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/9766a534c5244092b12e47a8255c7dc4.png" title="å¼±ä¸‰è‰²ä¸å˜å¼" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/9766a534c5244092b12e47a8255c7dc4.png" data-sub-html="<h2>å¼±ä¸‰è‰²ä¸å˜å¼</h2><p>å¼±ä¸‰è‰²ä¸å˜å¼</p>">
        
    </a><figcaption class="image-caption">å¼±ä¸‰è‰²ä¸å˜å¼</figcaption>
    </figure></p>
<p>å¼±ä¸‰è‰²ä¸å˜å¼å¼ºè°ƒï¼Œé»‘è‰²å¯¹è±¡å¯ä»¥å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªç™½è‰²å¯¹è±¡å¿…é¡»å­˜åœ¨å…¶ä»–ç°è‰²å¯¹è±¡å¯¹å®ƒçš„å¼•ç”¨ï¼Œæˆ–è€…å¯è¾¾å®ƒçš„é“¾è·¯ä¸Šæ¸¸å­˜åœ¨ç°è‰²å¯¹è±¡ã€‚è¿™æ ·å®åˆ™æ˜¯é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œç™½è‰²å¯¹è±¡å¤„äºä¸€ä¸ªå±é™©è¢«åˆ é™¤çš„çŠ¶æ€ï¼Œä½†æ˜¯ç”±äºä¸Šæ¸¸ç°è‰²å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯ä»¥ä¿æŠ¤è¯¥ç™½è‰²å¯¹è±¡ï¼Œä½¿å…¶å®‰å…¨ã€‚</p>
<p>ä¸ºäº†éµå¾ªä¸Šè¿°çš„ä¸¤ä¸ªæ–¹å¼ï¼ŒGC ç®—æ³•æ¼”è¿›åˆ°ä¸¤ç§å±éšœæ–¹å¼ï¼Œåˆ†åˆ«æ˜¯<strong>æ’å…¥å±éšœ</strong>å’Œ<strong>åˆ é™¤å±éšœ</strong>ã€‚</p>
<h3 id="æ’å…¥å±éšœ" class="headerLink">
    <a href="#%e6%8f%92%e5%85%a5%e5%b1%8f%e9%9a%9c" class="header-mark"></a>æ’å…¥å±éšœ</h3><p>å…·ä½“æ“ä½œï¼š åœ¨ A å¯¹è±¡å¼•ç”¨ B å¯¹è±¡çš„æ—¶å€™ï¼ŒB å¯¹è±¡è¢«æ ‡è®°ä¸ºç°è‰²ã€‚<strong>å°† B æŒ‚åœ¨ A ä¸‹æ¸¸ï¼ŒB å¿…é¡»è¢«æ ‡è®°ä¸ºç°è‰²</strong>ã€‚</p>
<p>æ»¡è¶³ï¼š<strong>å¼ºä¸‰è‰²ä¸å˜å¼</strong>ã€‚ä¸å­˜åœ¨é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡çš„æƒ…å†µäº†ï¼Œ å› ä¸º<strong>ç™½è‰²ä¼šå¼ºåˆ¶å˜æˆç°è‰²</strong>ã€‚</p>
<p>ä¼ªä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(å½“å‰ä¸‹æ¸¸å¯¹è±¡slot, æ–°ä¸‹æ¸¸å¯¹è±¡ptr) {
</span></span><span class="line"><span class="cl">  //1
</span></span><span class="line"><span class="cl">  æ ‡è®°ç°è‰²(æ–°ä¸‹æ¸¸å¯¹è±¡ptr)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  //2
</span></span><span class="line"><span class="cl">  å½“å‰ä¸‹æ¸¸å¯¹è±¡slot = æ–°ä¸‹æ¸¸å¯¹è±¡ptr
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœºæ™¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">A.æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(nil, B)   //A ä¹‹å‰æ²¡æœ‰ä¸‹æ¸¸ï¼Œ æ–°æ·»åŠ ä¸€ä¸ªä¸‹æ¸¸å¯¹è±¡Bï¼Œ Bè¢«æ ‡è®°ä¸ºç°è‰²
</span></span><span class="line"><span class="cl">A.æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(C, B)     //A å°†ä¸‹æ¸¸å¯¹è±¡C æ›´æ¢ä¸ºBï¼Œ  Bè¢«æ ‡è®°ä¸ºç°è‰²
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ®µä¼ªä»£ç é€»è¾‘å°±æ˜¯å†™å±éšœï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªæ€§èƒ½æŸè€—çš„åœ°æ–¹å°±æ˜¯æ¯æ¬¡æ·»åŠ å¥½æ’å…¥å¯¹è±¡éƒ½è¦å»åˆ¤æ–­ã€‚</p>
<p>é»‘è‰²å¯¹è±¡çš„å†…å­˜æ§½æœ‰ä¸¤ç§ä½ç½®ï¼Œæ ˆå’Œå †ã€‚ æ ˆç©ºé—´çš„ç‰¹ç‚¹æ˜¯å®¹é‡å°ï¼Œä½†æ˜¯è¦æ±‚å“åº”é€Ÿåº¦å¿«ï¼Œå› ä¸ºå‡½æ•°è°ƒç”¨å¼¹å‡ºé¢‘ç¹ä½¿ç”¨ï¼Œæ‰€ä»¥<strong>æ’å…¥å±éšœæœºåˆ¶ï¼Œåœ¨æ ˆç©ºé—´çš„å¯¹è±¡æ“ä½œä¸­ä¸ä½¿ç”¨ï¼Œè€Œä»…ä»…ä½¿ç”¨åœ¨å †ç©ºé—´å¯¹è±¡çš„æ“ä½œä¸­</strong>ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸‹æ•´ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½æ›´å¯è§‚çš„çœ‹æ¸…æ•´ä½“æµç¨‹ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/9d76191546e44252ac8edd0fae087465.png" title="æ’å…¥å±éšœ01" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/9d76191546e44252ac8edd0fae087465.png" data-sub-html="<h2>æ’å…¥å±éšœ01</h2><p>æ’å…¥å±éšœ01</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ01</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/3d4a215e1c8347e2a6ebf416617cb2ee.png" title="æ’å…¥å±éšœ02" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/3d4a215e1c8347e2a6ebf416617cb2ee.png" data-sub-html="<h2>æ’å…¥å±éšœ02</h2><p>æ’å…¥å±éšœ02</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ02</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/53f0850d9ca746668c9a8ebf9c628ca3.png" title="æ’å…¥å±éšœ03" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/53f0850d9ca746668c9a8ebf9c628ca3.png" data-sub-html="<h2>æ’å…¥å±éšœ03</h2><p>æ’å…¥å±éšœ03</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ03</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/2b66b768590b448f857a5dba72cd7146.png" title="æ’å…¥å±éšœ04" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/2b66b768590b448f857a5dba72cd7146.png" data-sub-html="<h2>æ’å…¥å±éšœ04</h2><p>æ’å…¥å±éšœ04</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ04</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/f0a379d3fd1d45df8dd20f7a68f615e0.png" title="æ’å…¥å±éšœ05" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/f0a379d3fd1d45df8dd20f7a68f615e0.png" data-sub-html="<h2>æ’å…¥å±éšœ05</h2><p>æ’å…¥å±éšœ05</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ05</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/c55625c54be54d848fb98ccfc88a76f9.png" title="æ’å…¥å±éšœ06" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/c55625c54be54d848fb98ccfc88a76f9.png" data-sub-html="<h2>æ’å…¥å±éšœ06</h2><p>æ’å…¥å±éšœ06</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ06</figcaption>
    </figure></p>
<p>ä½†æ˜¯å¦‚æœæ ˆä¸æ·»åŠ ï¼Œå½“å…¨éƒ¨ä¸‰è‰²æ ‡è®°æ‰«æä¹‹åï¼Œæ ˆä¸Šæœ‰å¯èƒ½ä¾ç„¶å­˜åœ¨ç™½è‰²å¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µï¼ˆå¦‚ä¸Šå›¾çš„å¯¹è±¡9ï¼‰ã€‚æ‰€ä»¥è¦å¯¹æ ˆé‡æ–°è¿›è¡Œä¸‰è‰²æ ‡è®°æ‰«æï¼Œä½†è¿™æ¬¡ä¸ºäº†å¯¹è±¡ä¸ä¸¢å¤±ï¼Œ<strong>è¦å¯¹æœ¬æ¬¡æ ‡è®°æ‰«æå¯åŠ¨ STW æš‚åœ</strong>ï¼Œç›´åˆ°æ ˆç©ºé—´çš„ä¸‰è‰²æ ‡è®°ç»“æŸã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/80c67f3febd44156b71332b19172c2ec.png" title="æ’å…¥å±éšœ07" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/80c67f3febd44156b71332b19172c2ec.png" data-sub-html="<h2>æ’å…¥å±éšœ07</h2><p>æ’å…¥å±éšœ07</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ07</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/77edaf8cc2cb4fad9283b5eedd81d2cf.png" title="æ’å…¥å±éšœ08" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/77edaf8cc2cb4fad9283b5eedd81d2cf.png" data-sub-html="<h2>æ’å…¥å±éšœ08</h2><p>æ’å…¥å±éšœ08</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ08</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/268b613c2dbd44048b5fd32667957a6e.png" title="æ’å…¥å±éšœ09" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/268b613c2dbd44048b5fd32667957a6e.png" data-sub-html="<h2>æ’å…¥å±éšœ09</h2><p>æ’å…¥å±éšœ09</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ09</figcaption>
    </figure></p>
<p>æœ€åå°†æ ˆå’Œå †ç©ºé—´æ‰«æå‰©ä½™çš„å…¨éƒ¨ç™½è‰²èŠ‚ç‚¹æ¸…é™¤ï¼Œè¿™æ¬¡ STW å¤§çº¦çš„æ—¶é—´åœ¨ 10~100ms é—´ã€‚è¿™ä¹Ÿæ˜¯æ’å…¥å†™å±éšœçš„<strong>ä¸è¶³</strong>ï¼Œå› ä¸ºè¿˜æ˜¯éœ€è¦ STWï¼Œè™½ç„¶æ—¶é—´å¾ˆçŸ­ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/c3fe1710d579448aa8b13f84cd2cd6f0.png" title="æ’å…¥å±éšœ10" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/c3fe1710d579448aa8b13f84cd2cd6f0.png" data-sub-html="<h2>æ’å…¥å±éšœ10</h2><p>æ’å…¥å±éšœ10</p>">
        
    </a><figcaption class="image-caption">æ’å…¥å±éšœ10</figcaption>
    </figure></p>
<h3 id="åˆ é™¤å±éšœ" class="headerLink">
    <a href="#%e5%88%a0%e9%99%a4%e5%b1%8f%e9%9a%9c" class="header-mark"></a>åˆ é™¤å±éšœ</h3><p>å…·ä½“æ“ä½œï¼šè¢«åˆ é™¤çš„å¯¹è±¡ï¼Œå¦‚æœè‡ªèº«ä¸ºç°è‰²æˆ–è€…ç™½è‰²ï¼Œé‚£ä¹ˆè¢«æ ‡è®°ä¸ºç°è‰²ã€‚</p>
<p>æ»¡è¶³ï¼š<strong>å¼±ä¸‰è‰²ä¸å˜å¼</strong>ï¼Œä¿æŠ¤ç°è‰²å¯¹è±¡åˆ°ç™½è‰²å¯¹è±¡çš„è·¯å¾„ä¸ä¼šæ–­ã€‚</p>
<p>ä¼ªä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(å½“å‰ä¸‹æ¸¸å¯¹è±¡slotï¼Œ æ–°ä¸‹æ¸¸å¯¹è±¡ptr) {
</span></span><span class="line"><span class="cl">  //1
</span></span><span class="line"><span class="cl">  if (å½“å‰ä¸‹æ¸¸å¯¹è±¡slotæ˜¯ç°è‰² || å½“å‰ä¸‹æ¸¸å¯¹è±¡slotæ˜¯ç™½è‰²) {
</span></span><span class="line"><span class="cl">  		æ ‡è®°ç°è‰²(å½“å‰ä¸‹æ¸¸å¯¹è±¡slot)     //slotä¸ºè¢«åˆ é™¤å¯¹è±¡ï¼Œ æ ‡è®°ä¸ºç°è‰²
</span></span><span class="line"><span class="cl">  }
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  //2
</span></span><span class="line"><span class="cl">  å½“å‰ä¸‹æ¸¸å¯¹è±¡slot = æ–°ä¸‹æ¸¸å¯¹è±¡ptr
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœºæ™¯ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">A.æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(B, nil)   //Aå¯¹è±¡ï¼Œåˆ é™¤Bå¯¹è±¡çš„å¼•ç”¨ã€‚ Bè¢«Aåˆ é™¤ï¼Œè¢«æ ‡è®°ä¸ºç°(å¦‚æœBä¹‹å‰ä¸ºç™½)
</span></span><span class="line"><span class="cl">A.æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(B, C)         //Aå¯¹è±¡ï¼Œæ›´æ¢ä¸‹æ¸¸Bå˜æˆCã€‚ Bè¢«Aåˆ é™¤ï¼Œè¢«æ ‡è®°ä¸ºç°(å¦‚æœBä¹‹å‰ä¸ºç™½)
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿæ›´å¯è§‚çš„çœ‹æ¸…æ¥šæ•´ä½“æµç¨‹ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/3ef46111cdca45b18626a0511f9b3df5.png" title="åˆ é™¤å±éšœ01" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/3ef46111cdca45b18626a0511f9b3df5.png" data-sub-html="<h2>åˆ é™¤å±éšœ01</h2><p>åˆ é™¤å±éšœ01</p>">
        
    </a><figcaption class="image-caption">åˆ é™¤å±éšœ01</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/e08ac9cd722c45ef98d9362fa5401c48.png" title="åˆ é™¤å±éšœ02" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/e08ac9cd722c45ef98d9362fa5401c48.png" data-sub-html="<h2>åˆ é™¤å±éšœ02</h2><p>åˆ é™¤å±éšœ02</p>">
        
    </a><figcaption class="image-caption">åˆ é™¤å±éšœ02</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/a8ad362faec241848935c82e1fa7e428.png" title="åˆ é™¤å±éšœ03" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/a8ad362faec241848935c82e1fa7e428.png" data-sub-html="<h2>åˆ é™¤å±éšœ03</h2><p>åˆ é™¤å±éšœ03</p>">
        
    </a><figcaption class="image-caption">åˆ é™¤å±éšœ03</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/e230f27d981248e1b4bfb254a776c038.png" title="åˆ é™¤å±éšœ04" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/e230f27d981248e1b4bfb254a776c038.png" data-sub-html="<h2>åˆ é™¤å±éšœ04</h2><p>åˆ é™¤å±éšœ04</p>">
        
    </a><figcaption class="image-caption">åˆ é™¤å±éšœ04</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/3887ebd09e204ec9932c0cfb10fb38fa.png" title="åˆ é™¤å±éšœ05" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/3887ebd09e204ec9932c0cfb10fb38fa.png" data-sub-html="<h2>åˆ é™¤å±éšœ05</h2><p>åˆ é™¤å±éšœ05</p>">
        
    </a><figcaption class="image-caption">åˆ é™¤å±éšœ05</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/65cdf09e3d3e454487a23e3e79c424ee.png" title="åˆ é™¤å±éšœ06" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/65cdf09e3d3e454487a23e3e79c424ee.png" data-sub-html="<h2>åˆ é™¤å±éšœ06</h2><p>åˆ é™¤å±éšœ06</p>">
        
    </a><figcaption class="image-caption">åˆ é™¤å±éšœ06</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/7d6c80f3eec34796ab3c3e333642de96.png" title="åˆ é™¤å±éšœ07" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220406/7d6c80f3eec34796ab3c3e333642de96.png" data-sub-html="<h2>åˆ é™¤å±éšœ07</h2><p>åˆ é™¤å±éšœ07</p>">
        
    </a><figcaption class="image-caption">åˆ é™¤å±éšœ07</figcaption>
    </figure></p>
<p>è¿™ç§æ–¹å¼çš„<strong>ä¸è¶³æ˜¯å›æ”¶ç²¾åº¦ä½</strong>ï¼Œä¸€ä¸ªå¯¹è±¡å³ä½¿è¢«åˆ é™¤äº†æœ€åä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆä¹Ÿ<strong>ä¾æ—§å¯ä»¥</strong>æ´»è¿‡è¿™ä¸€è½®ï¼Œåœ¨ä¸‹ä¸€è½® GC ä¸­è¢«æ¸…ç†æ‰ã€‚</p>
<h2 id="æ··åˆå†™å±éšœ" class="headerLink">
    <a href="#%e6%b7%b7%e5%90%88%e5%86%99%e5%b1%8f%e9%9a%9c" class="header-mark"></a>æ··åˆå†™å±éšœ</h2><p>æ’å…¥å†™å±éšœå’Œåˆ é™¤å†™å±éšœçš„çŸ­æ¿ï¼š</p>
<ul>
<li>æ’å…¥å†™å±éšœï¼šç»“æŸæ—¶éœ€è¦ STW æ¥é‡æ–°æ‰«ææ ˆï¼Œæ ‡è®°æ ˆä¸Šå¼•ç”¨çš„ç™½è‰²å¯¹è±¡çš„å­˜æ´»ï¼Œå¤§çº¦éœ€è¦ 10-100msã€‚</li>
<li>åˆ é™¤å†™å±éšœï¼šå›æ”¶ç²¾åº¦ä½ï¼Œä¸€ä¸ªå¯¹è±¡å³ä½¿è¢«åˆ é™¤äº†æœ€åä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆä¹Ÿä¾æ—§å¯ä»¥æ´»è¿‡è¿™ä¸€è½®ï¼Œåœ¨ä¸‹ä¸€è½® GC ä¸­è¢«æ¸…ç†æ‰ã€‚GC å¼€å§‹æ—¶ STW æ‰«æå †æ ˆæ¥è®°å½•åˆå§‹å¿«ç…§ï¼ˆç›‘æ§å¯¹è±¡çš„å†…å­˜ä¿®æ”¹ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦åˆ é™¤ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¿æŠ¤å¼€å§‹æ—¶åˆ»çš„æ‰€æœ‰å­˜æ´»å¯¹è±¡ã€‚</li>
</ul>
<p>Go v1.8 ç‰ˆæœ¬å¼•å…¥äº†<strong><ruby>æ··åˆå†™å±éšœæœºåˆ¶<rt>hybrid write barrier</rt></ruby></strong>ï¼Œé¿å…äº†å¯¹æ ˆ re-scan çš„è¿‡ç¨‹ï¼Œæå¤§çš„å‡å°‘äº† STW çš„æ—¶é—´ï¼Œç»“åˆäº†ä¸¤è€…çš„ä¼˜ç‚¹ã€‚</p>
<h3 id="è§„åˆ™" class="headerLink">
    <a href="#%e8%a7%84%e5%88%99" class="header-mark"></a>è§„åˆ™</h3><p>å…·ä½“æ“ä½œï¼š</p>
<ol>
<li>GC å¼€å§‹å°†æ ˆä¸Šçš„å¯¹è±¡å…¨éƒ¨æ‰«æå¹¶æ ‡è®°ä¸ºé»‘è‰²ï¼ˆä¹‹åä¸å†è¿›è¡Œç¬¬äºŒæ¬¡é‡å¤æ‰«æï¼Œæ— éœ€ STW ï¼‰ã€‚</li>
<li><strong>GC æœŸé—´ï¼Œä»»ä½•åœ¨æ ˆä¸Šåˆ›å»ºçš„æ–°å¯¹è±¡ï¼Œå‡ä¸ºé»‘è‰²</strong>ã€‚</li>
<li>è¢«åˆ é™¤çš„å¯¹è±¡æ ‡è®°ä¸ºç°è‰²ã€‚</li>
<li>è¢«æ·»åŠ çš„å¯¹è±¡æ ‡è®°ä¸ºç°è‰²ã€‚</li>
</ol>
<p>æ»¡è¶³ï¼šå˜å½¢çš„å¼±ä¸‰è‰²ä¸å˜å¼ã€‚</p>
<p>ä¼ªä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(å½“å‰ä¸‹æ¸¸å¯¹è±¡slot, æ–°ä¸‹æ¸¸å¯¹è±¡ptr) {
</span></span><span class="line"><span class="cl">  	//1
</span></span><span class="line"><span class="cl">	æ ‡è®°ç°è‰²(å½“å‰ä¸‹æ¸¸å¯¹è±¡slot)    //åªè¦å½“å‰ä¸‹æ¸¸å¯¹è±¡è¢«ç§»èµ°ï¼Œå°±æ ‡è®°ç°è‰²
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  	//2
</span></span><span class="line"><span class="cl">  	æ ‡è®°ç°è‰²(æ–°ä¸‹æ¸¸å¯¹è±¡ptr)
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  	//3
</span></span><span class="line"><span class="cl">  	å½“å‰ä¸‹æ¸¸å¯¹è±¡slot = æ–°ä¸‹æ¸¸å¯¹è±¡ptr
</span></span><span class="line"><span class="cl">}
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>å±éšœæŠ€æœ¯æ˜¯ä¸åœ¨æ ˆä¸Šåº”ç”¨çš„ï¼Œå› ä¸ºè¦ä¿è¯æ ˆçš„è¿è¡Œæ•ˆç‡ã€‚</p>
</blockquote>
<h3 id="å…·ä½“åœºæ™¯" class="headerLink">
    <a href="#%e5%85%b7%e4%bd%93%e5%9c%ba%e6%99%af" class="header-mark"></a>å…·ä½“åœºæ™¯</h3><p>æˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿæ›´å¯è§‚çš„çœ‹æ¸…æ¥šæ•´ä½“æµç¨‹ã€‚</p>
<p>æ··åˆå†™å±éšœæ˜¯ GC çš„ä¸€ç§å±éšœæœºåˆ¶ï¼Œæ‰€ä»¥åªæ˜¯å½“ç¨‹åºæ‰§è¡Œ GC çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘è¿™ç§æœºåˆ¶ã€‚</p>
<p>GCå¼€å§‹ï¼šä¼˜å…ˆæ‰«ææ ˆåŒºï¼Œå°†å¯è¾¾å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸ºé»‘</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/d7aefd0f1c7e47fb94db02096fe857d9.png" title="æ··åˆå†™å±éšœ01" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/d7aefd0f1c7e47fb94db02096fe857d9.png" data-sub-html="<h2>æ··åˆå†™å±éšœ01</h2><p>æ··åˆå†™å±éšœ01</p>">
        
    </a><figcaption class="image-caption">æ··åˆå†™å±éšœ01</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/d674041682d940189041add754694bdf.png" title="æ··åˆå†™å±éšœ02" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/d674041682d940189041add754694bdf.png" data-sub-html="<h2>æ··åˆå†™å±éšœ02</h2><p>æ··åˆå†™å±éšœ02</p>">
        
    </a><figcaption class="image-caption">æ··åˆå†™å±éšœ02</figcaption>
    </figure></p>
<h4 id="åœºæ™¯ä¸€" class="headerLink">
    <a href="#%e5%9c%ba%e6%99%af%e4%b8%80" class="header-mark"></a>åœºæ™¯ä¸€</h4><p>å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚</p>
<p>ä¼ªä»£ç </p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">//å‰æï¼šå †å¯¹è±¡4-&gt;å¯¹è±¡7 = å¯¹è±¡7ï¼›  //å¯¹è±¡7 è¢« å¯¹è±¡4å¼•ç”¨
</span></span><span class="line"><span class="cl">æ ˆå¯¹è±¡1-&gt;å¯¹è±¡7 = å †å¯¹è±¡7ï¼›  //å°†å †å¯¹è±¡7 æŒ‚åœ¨ æ ˆå¯¹è±¡1 ä¸‹æ¸¸
</span></span><span class="line"><span class="cl">å †å¯¹è±¡4-&gt;å¯¹è±¡7 = nullï¼›    //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7
</span></span></code></pre></td></tr></table>
</div>
</div><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/6eccf4b23f1044499d0bbf77c2069b21.png" title="åœºæ™¯1-01" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/6eccf4b23f1044499d0bbf77c2069b21.png" data-sub-html="<h2>åœºæ™¯1-01</h2><p>åœºæ™¯1-01</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯1-01</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/03f8a2fc5bcc4d76a74f48495900d00f.png" title="åœºæ™¯1-02" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/03f8a2fc5bcc4d76a74f48495900d00f.png" data-sub-html="<h2>åœºæ™¯1-02</h2><p>åœºæ™¯1-02</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯1-02</figcaption>
    </figure></p>
<h4 id="åœºæ™¯äºŒ" class="headerLink">
    <a href="#%e5%9c%ba%e6%99%af%e4%ba%8c" class="header-mark"></a>åœºæ™¯äºŒ</h4><p>å¯¹è±¡è¢«ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚</p>
<p>ä¼ªä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">new æ ˆå¯¹è±¡9ï¼›
</span></span><span class="line"><span class="cl">å¯¹è±¡8-&gt;å¯¹è±¡3 = å¯¹è±¡3ï¼›      //å°†æ ˆå¯¹è±¡3 æŒ‚åœ¨ æ ˆå¯¹è±¡9 ä¸‹æ¸¸
</span></span><span class="line"><span class="cl">å¯¹è±¡2-&gt;å¯¹è±¡3 = nullï¼›      //å¯¹è±¡2 åˆ é™¤å¼•ç”¨ å¯¹è±¡3
</span></span></code></pre></td></tr></table>
</div>
</div><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/da92001995cf4c8cbf2568c3bacd7fbd.png" title="åœºæ™¯2-01" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/da92001995cf4c8cbf2568c3bacd7fbd.png" data-sub-html="<h2>åœºæ™¯2-01</h2><p>åœºæ™¯2-01</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯2-01</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/bc9ae45a820e4af682c58a25f96155e2.png" title="åœºæ™¯2-02" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/bc9ae45a820e4af682c58a25f96155e2.png" data-sub-html="<h2>åœºæ™¯2-02</h2><p>åœºæ™¯2-02</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯2-02</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/310dda56e97f411bab5a2e5576fd4369.png" title="åœºæ™¯2-03" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/310dda56e97f411bab5a2e5576fd4369.png" data-sub-html="<h2>åœºæ™¯2-03</h2><p>åœºæ™¯2-03</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯2-03</figcaption>
    </figure></p>
<h4 id="åœºæ™¯ä¸‰" class="headerLink">
    <a href="#%e5%9c%ba%e6%99%af%e4%b8%89" class="header-mark"></a>åœºæ™¯ä¸‰</h4><p>å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚</p>
<p>ä¼ªä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å †å¯¹è±¡10-&gt;å¯¹è±¡7 = å †å¯¹è±¡7ï¼›       //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸
</span></span><span class="line"><span class="cl">å †å¯¹è±¡4-&gt;å¯¹è±¡7 = nullï¼›         //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7
</span></span></code></pre></td></tr></table>
</div>
</div><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/899ed05a51664c9eb09bfecce8b2945a.png" title="åœºæ™¯3-01" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/899ed05a51664c9eb09bfecce8b2945a.png" data-sub-html="<h2>åœºæ™¯3-01</h2><p>åœºæ™¯3-01</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯3-01</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/cee749d8466d416f8a1ecb07d1c165de.png" title="åœºæ™¯3-02" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/cee749d8466d416f8a1ecb07d1c165de.png" data-sub-html="<h2>åœºæ™¯3-02</h2><p>åœºæ™¯3-02</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯3-02</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/7d0257110cd2437dac1c7835c43b2a73.png" title="åœºæ™¯3-03" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/7d0257110cd2437dac1c7835c43b2a73.png" data-sub-html="<h2>åœºæ™¯3-03</h2><p>åœºæ™¯3-03</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯3-03</figcaption>
    </figure></p>
<h4 id="åœºæ™¯å››" class="headerLink">
    <a href="#%e5%9c%ba%e6%99%af%e5%9b%9b" class="header-mark"></a>åœºæ™¯å››</h4><p>å¯¹è±¡ä»ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚</p>
<p>ä¼ªä»£ç ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">å †å¯¹è±¡10-&gt;å¯¹è±¡7 = å †å¯¹è±¡7ï¼›       //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸
</span></span><span class="line"><span class="cl">å †å¯¹è±¡4-&gt;å¯¹è±¡7 = nullï¼›         //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7
</span></span></code></pre></td></tr></table>
</div>
</div><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/c1cc894d7bef4f1ba26e92c7427de8a5.png" title="åœºæ™¯4-01" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/c1cc894d7bef4f1ba26e92c7427de8a5.png" data-sub-html="<h2>åœºæ™¯4-01</h2><p>åœºæ™¯4-01</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯4-01</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/0c64f5d24f674a90942170b8998deafa.png" title="åœºæ™¯4-02" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/0c64f5d24f674a90942170b8998deafa.png" data-sub-html="<h2>åœºæ™¯4-02</h2><p>åœºæ™¯4-02</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯4-02</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/e25db1900a4d404189fdcb61d33ac5d2.png" title="åœºæ™¯4-03" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220407/e25db1900a4d404189fdcb61d33ac5d2.png" data-sub-html="<h2>åœºæ™¯4-03</h2><p>åœºæ™¯4-03</p>">
        
    </a><figcaption class="image-caption">åœºæ™¯4-03</figcaption>
    </figure></p>
<p>Go ä¸­çš„æ··åˆå†™å±éšœæ»¡è¶³<strong>å¼±ä¸‰è‰²ä¸å˜å¼</strong>ï¼Œç»“åˆäº†åˆ é™¤å†™å±éšœå’Œæ’å…¥å†™å±éšœçš„ä¼˜ç‚¹ï¼Œ<strong>åªéœ€è¦åœ¨å¼€å§‹æ—¶å¹¶å‘æ‰«æå„ä¸ª goroutine çš„æ ˆ</strong>ï¼Œä½¿å…¶å˜é»‘å¹¶ä¸€ç›´ä¿æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ STWï¼Œè€Œæ ‡è®°ç»“æŸåï¼Œå› ä¸ºæ ˆåœ¨æ‰«æåå§‹ç»ˆæ˜¯é»‘è‰²çš„ï¼Œä¹Ÿæ— éœ€å†è¿›è¡Œ re-scan æ“ä½œäº†ï¼Œå‡å°‘äº† STW çš„æ—¶é—´ã€‚</p>
<h2 id="æ€»ç»“" class="headerLink">
    <a href="#%e6%80%bb%e7%bb%93" class="header-mark"></a>æ€»ç»“</h2><p>GoV1.3ï¼šæ™®é€šæ ‡è®°æ¸…é™¤æ³•ï¼Œæ•´ä½“è¿‡ç¨‹éœ€è¦å¯åŠ¨ STWï¼Œæ•ˆç‡æä½ã€‚</p>
<p>GoV1.5ï¼šä¸‰è‰²æ ‡è®°æ³•ï¼Œå †ç©ºé—´å¯åŠ¨å†™å±éšœï¼Œæ ˆç©ºé—´ä¸å¯åŠ¨ï¼Œå…¨éƒ¨æ‰«æä¹‹åï¼Œéœ€è¦é‡æ–°æ‰«æä¸€æ¬¡æ ˆ(éœ€è¦ STW )ï¼Œæ•ˆç‡æ™®é€šã€‚</p>
<p>GoV1.8ï¼šä¸‰è‰²æ ‡è®°æ³•ï¼Œæ··åˆå†™å±éšœæœºåˆ¶ï¼Œ æ ˆç©ºé—´ä¸å¯åŠ¨ï¼Œå †ç©ºé—´å¯åŠ¨ã€‚æ•´ä¸ªè¿‡ç¨‹å‡ ä¹ä¸éœ€è¦STWï¼Œæ•ˆç‡è¾ƒé«˜ã€‚</p>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://community.apinto.com/d/34057-golang-gc" target="_blank" rel="noopener noreferrer">ä¸€æ–‡å¼„æ‡‚ Golang GCã€ä¸‰è‰²æ ‡è®°ã€æ··åˆå†™å±éšœæœºåˆ¶</a></li>
<li><a href="https://www.kancloud.cn/aceld/golang/1958308" target="_blank" rel="noopener noreferrer">Golangä¸‰è‰²æ ‡è®°+æ··åˆå†™å±éšœGCæ¨¡å¼å…¨åˆ†æ</a></li>
<li><a href="https://www.bilibili.com/video/BV1wz4y1y7Kd/" target="_blank" rel="noopener noreferrer">Golangä¸­GCå›æ”¶æœºåˆ¶ä¸‰è‰²æ ‡è®°ä¸æ··åˆå†™å±éšœ</a></li>
</ul>
]]></description>
</item><item>
    <title>äº’è”ç½‘åè®®ç®€è¿°</title>
    <link>https://www.xiaobinqt.cn/net-protocol-glance/</link>
    <pubDate>Sun, 27 Mar 2022 00:00:00 &#43;0000</pubDate><author>
        <name>ä½œè€…</name>
    </author><guid>https://www.xiaobinqt.cn/net-protocol-glance/</guid>
    <description><![CDATA[<h2 id="æ¦‚è¿°" class="headerLink">
    <a href="#%e6%a6%82%e8%bf%b0" class="header-mark"></a>æ¦‚è¿°</h2><h3 id="äº”å±‚æ¨¡å‹" class="headerLink">
    <a href="#%e4%ba%94%e5%b1%82%e6%a8%a1%e5%9e%8b" class="header-mark"></a>äº”å±‚æ¨¡å‹</h3><p>äº’è”ç½‘çš„å®ç°ï¼Œåˆ†æˆå¥½å‡ å±‚ã€‚æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½ï¼Œå°±åƒå»ºç­‘ç‰©ä¸€æ ·ï¼Œæ¯ä¸€å±‚éƒ½é ä¸‹ä¸€å±‚æ”¯æŒã€‚</p>
<p>ç”¨æˆ·æ¥è§¦åˆ°çš„ï¼Œåªæ˜¯æœ€ä¸Šé¢çš„ä¸€å±‚ï¼Œæ ¹æœ¬æ²¡æœ‰æ„Ÿè§‰åˆ°ä¸‹é¢çš„å±‚ã€‚ç†è§£äº’è”ç½‘ï¼Œéœ€è¦ä»æœ€ä¸‹å±‚å¼€å§‹ï¼Œè‡ªä¸‹è€Œä¸Šç†è§£æ¯ä¸€å±‚çš„åŠŸèƒ½ã€‚</p>
<p>å¦‚ä½•åˆ†å±‚ï¼Œæœ‰ä¸åŒçš„æ¨¡å‹ï¼Œæœ‰çš„æ¨¡å‹åˆ†ä¸ƒå±‚ï¼Œæœ‰çš„åˆ†å››å±‚ã€‚æŠŠäº’è”ç½‘åˆ†æˆäº”å±‚ï¼Œæ¯”è¾ƒå®¹æ˜“è§£é‡Šã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/0b07f1e814384409a9a5f97a4bbc8196.png" title="äº”å±‚æ¨¡å‹" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/0b07f1e814384409a9a5f97a4bbc8196.png" data-sub-html="<h2>äº”å±‚æ¨¡å‹</h2><p>äº”å±‚æ¨¡å‹</p>">
        
    </a><figcaption class="image-caption">äº”å±‚æ¨¡å‹</figcaption>
    </figure></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ€åº•ä¸‹çš„ä¸€å±‚å«åš<strong><ruby>å®ä½“å±‚<rt>Physical Layer</rt></ruby></strong>ï¼Œæœ€ä¸Šé¢çš„ä¸€å±‚å«åš<strong><ruby>åº”ç”¨å±‚<rt>Application Layer</rt></ruby></strong>ï¼Œä¸­é—´çš„ä¸‰å±‚ï¼ˆè‡ªä¸‹è€Œä¸Šï¼‰åˆ†åˆ«æ˜¯<strong><ruby>é“¾æ¥å±‚<rt>Link Layer</rt></ruby></strong>ã€<strong><ruby>ç½‘ç»œå±‚<rt>Network Layer</rt></ruby></strong>å’Œ<strong><ruby>ä¼ è¾“å±‚<rt>Transport Layer</rt></ruby></strong>ã€‚è¶Šä¸‹é¢çš„å±‚ï¼Œè¶Šé è¿‘ç¡¬ä»¶ï¼›è¶Šä¸Šé¢çš„å±‚ï¼Œè¶Šé è¿‘ç”¨æˆ·ã€‚</p>
<p>åå­—åªæ˜¯ä¸€ä¸ªä»£å·ï¼Œå®ƒä»¬å«ä»€ä¹ˆåå­—ï¼Œå…¶å®å¹¶ä¸é‡è¦ã€‚åªéœ€è¦çŸ¥é“ï¼Œäº’è”ç½‘åˆ†æˆè‹¥å¹²å±‚å°±å¯ä»¥äº†ã€‚</p>
<h3 id="å±‚ä¸åè®®" class="headerLink">
    <a href="#%e5%b1%82%e4%b8%8e%e5%8d%8f%e8%ae%ae" class="header-mark"></a>å±‚ä¸åè®®</h3><p>æ¯ä¸€å±‚éƒ½æ˜¯ä¸ºäº†å®Œæˆä¸€ç§åŠŸèƒ½ã€‚ä¸ºäº†å®ç°è¿™äº›åŠŸèƒ½ï¼Œå°±éœ€è¦å¤§å®¶éƒ½éµå®ˆå…±åŒçš„è§„åˆ™ã€‚</p>
<p>å¤§å®¶éƒ½éµå®ˆçš„è§„åˆ™ï¼Œå°±å«åšâ€œåè®®â€ï¼ˆprotocolï¼‰ã€‚</p>
<p>äº’è”ç½‘çš„æ¯ä¸€å±‚ï¼Œéƒ½å®šä¹‰äº†å¾ˆå¤šåè®®ã€‚è¿™äº›åè®®çš„æ€»ç§°ï¼Œå°±å«åšâ€œäº’è”ç½‘åè®®â€ï¼ˆInternet Protocol Suiteï¼‰ï¼Œå®ƒä»¬æ˜¯äº’è”ç½‘çš„æ ¸å¿ƒã€‚</p>
<h2 id="å®ä½“å±‚" class="headerLink">
    <a href="#%e5%ae%9e%e4%bd%93%e5%b1%82" class="header-mark"></a>å®ä½“å±‚</h2><p>ç”µè„‘è¦ç»„ç½‘ï¼Œç¬¬ä¸€ä»¶äº‹æ˜¯å…ˆæŠŠç”µè„‘è¿èµ·æ¥ï¼Œå¯ä»¥ç”¨å…‰ç¼†ã€ç”µç¼†ã€åŒç»çº¿ã€æ— çº¿ç”µæ³¢ç­‰æ–¹å¼ã€‚</p>
<p>è¿™å°±å«åšâ€œå®ä½“å±‚â€ï¼Œå®ƒå°±æ˜¯<strong>æŠŠç”µè„‘è¿æ¥èµ·æ¥çš„ç‰©ç†æ‰‹æ®µã€‚å®ƒä¸»è¦è§„å®šäº†ç½‘ç»œçš„ä¸€äº›ç”µæ°”ç‰¹æ€§ï¼Œä½œç”¨æ˜¯è´Ÿè´£ä¼ é€ 0 å’Œ 1 çš„ç”µä¿¡å·</strong>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/008215cf196441ff891300b99ca05e41.png" title="å®ä½“å±‚" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/008215cf196441ff891300b99ca05e41.png" data-sub-html="<h2>å®ä½“å±‚</h2><p>å®ä½“å±‚</p>">
        
    </a><figcaption class="image-caption">å®ä½“å±‚</figcaption>
    </figure></p>
<h2 id="é“¾æ¥å±‚" class="headerLink">
    <a href="#%e9%93%be%e6%8e%a5%e5%b1%82" class="header-mark"></a>é“¾æ¥å±‚</h2><p>å•çº¯çš„ 0 å’Œ 1 æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå¿…é¡»è§„å®šè§£è¯»æ–¹å¼ï¼šå¤šå°‘ä¸ªç”µä¿¡å·ç®—ä¸€ç»„â“æ¯ä¸ªä¿¡å·ä½æœ‰ä½•æ„ä¹‰â“</p>
<p>è¿™å°±æ˜¯â€œé“¾æ¥å±‚â€çš„åŠŸèƒ½ï¼Œå®ƒåœ¨â€œå®ä½“å±‚â€çš„ä¸Šæ–¹ï¼Œ<strong>ç¡®å®šäº† 0 å’Œ 1 çš„åˆ†ç»„æ–¹å¼</strong>ã€‚</p>
<h3 id="ä»¥å¤ªç½‘åè®®" class="headerLink">
    <a href="#%e4%bb%a5%e5%a4%aa%e7%bd%91%e5%8d%8f%e8%ae%ae" class="header-mark"></a>ä»¥å¤ªç½‘åè®®</h3><p>æ—©æœŸçš„æ—¶å€™ï¼Œæ¯å®¶å…¬å¸éƒ½æœ‰è‡ªå·±çš„ç”µä¿¡å·åˆ†ç»„æ–¹å¼ã€‚é€æ¸åœ°ï¼Œä¸€ç§å«åšâ€œä»¥å¤ªç½‘â€ï¼ˆEthernetï¼‰çš„åè®®ï¼Œå æ®äº†ä¸»å¯¼åœ°ä½ã€‚</p>
<p>ä»¥å¤ªç½‘è§„å®šï¼Œ<strong>ä¸€ç»„ç”µä¿¡å·</strong>æ„æˆä¸€ä¸ªæ•°æ®åŒ…ï¼Œå«åšâ€œå¸§â€ï¼ˆ<code>Frame</code>ï¼‰ã€‚æ¯ä¸€å¸§åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ‡å¤´ï¼ˆ<code>Head</code>ï¼‰å’Œæ•°æ®ï¼ˆ<code>Data</code>ï¼‰ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/7faf60ba902f4f5dac74eae05aa46470.png" title="head-data" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/7faf60ba902f4f5dac74eae05aa46470.png" data-sub-html="<h2>head-data</h2><p>head-data</p>">
        
    </a><figcaption class="image-caption">head-data</figcaption>
    </figure></p>
<p>â€œæ ‡å¤´â€åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜é¡¹ï¼Œæ¯”å¦‚å‘é€è€…ã€æ¥å—è€…ã€æ•°æ®ç±»å‹ç­‰ç­‰ï¼›â€œæ•°æ®â€åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚</p>
<p><strong>â€œæ ‡å¤´â€çš„é•¿åº¦ï¼Œå›ºå®šä¸º 18 å­—èŠ‚ã€‚â€œæ•°æ®â€çš„é•¿åº¦ï¼Œæœ€çŸ­ä¸º 46 å­—èŠ‚ï¼Œæœ€é•¿ä¸º 1500 å­—èŠ‚</strong>
ã€‚å› æ­¤ï¼Œæ•´ä¸ªâ€œå¸§â€æœ€çŸ­ä¸º 64 å­—èŠ‚ï¼Œæœ€é•¿ä¸º 1518 å­—èŠ‚ã€‚å¦‚æœæ•°æ®å¾ˆé•¿ï¼Œå°±å¿…é¡»åˆ†å‰²æˆå¤šä¸ªå¸§è¿›è¡Œå‘é€ã€‚</p>
<h3 id="mac-åœ°å€" class="headerLink">
    <a href="#mac-%e5%9c%b0%e5%9d%80" class="header-mark"></a>MAC åœ°å€</h3><p><strong>ä»¥å¤ªç½‘æ•°æ®åŒ…çš„â€œæ ‡å¤´â€ï¼ŒåŒ…å«äº†å‘é€è€…å’Œæ¥å—è€…çš„ä¿¡æ¯</strong>ã€‚é‚£ä¹ˆï¼Œå‘é€è€…å’Œæ¥å—è€…æ˜¯å¦‚ä½•æ ‡è¯†å‘¢ï¼Ÿ</p>
<p>ä»¥å¤ªç½‘è§„å®šï¼Œè¿å…¥ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡ï¼Œéƒ½å¿…é¡»å…·æœ‰â€œç½‘å¡â€æ¥å£ã€‚
<strong>æ•°æ®åŒ…å¿…é¡»æ˜¯ä»ä¸€å—ç½‘å¡ï¼Œä¼ é€åˆ°å¦ä¸€å—ç½‘å¡</strong>ã€‚ç½‘å¡çš„åœ°å€ï¼Œå°±æ˜¯æ•°æ®åŒ…çš„å‘é€åœ°å€å’Œæ¥æ”¶åœ°å€ï¼Œè¿™å«åš MAC åœ°å€ã€‚</p>
<p>æ¯å—ç½‘å¡å‡ºå‚çš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ªå…¨ä¸–ç•Œç‹¬ä¸€æ— äºŒçš„ MAC åœ°å€ï¼Œé•¿åº¦æ˜¯ 48 ä¸ªäºŒè¿›åˆ¶ä½ï¼Œé€šå¸¸ç”¨ 12 ä¸ªåå…­è¿›åˆ¶æ•°è¡¨ç¤ºã€‚</p>
<p>å‰ 6 ä¸ªåå…­è¿›åˆ¶æ•°æ˜¯å‚å•†ç¼–å·ï¼Œå 6 ä¸ªæ˜¯è¯¥å‚å•†çš„ç½‘å¡æµæ°´å·ã€‚æœ‰äº† MAC åœ°å€ï¼Œå°±å¯ä»¥å®šä½ç½‘å¡å’Œæ•°æ®åŒ…çš„è·¯å¾„äº†ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/210ac80feaab480c824906751e28b7cf.png" title="MAC address" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/210ac80feaab480c824906751e28b7cf.png" data-sub-html="<h2>MAC address</h2><p>MAC address</p>">
        
    </a><figcaption class="image-caption">MAC address</figcaption>
    </figure></p>
<p>ä¸Šå›¾çš„ MAC åœ°å€çš„äºŒè¿›åˆ¶ä½ä¸º <code>00000000-10110000-11010000-10000110-10111011-11110111</code>ã€‚</p>
<h3 id="å¹¿æ’­" class="headerLink">
    <a href="#%e5%b9%bf%e6%92%ad" class="header-mark"></a>å¹¿æ’­</h3><p>ä»¥å¤ªç½‘æ•°æ®åŒ…å¿…é¡»çŸ¥é“æ¥æ”¶æ–¹çš„ MAC åœ°å€ï¼Œç„¶åæ‰èƒ½å‘é€ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ</p>
<ul>
<li>ä¸€å—ç½‘å¡æ€ä¹ˆä¼šçŸ¥é“å¦ä¸€å—ç½‘å¡çš„MACåœ°å€ï¼Ÿ</li>
<li>å°±ç®—æœ‰äº† MAC åœ°å€ï¼Œç³»ç»Ÿæ€æ ·æ‰èƒ½æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æ¥æ”¶æ–¹ï¼Ÿ</li>
</ul>
<p>å›ç­”æ˜¯ï¼Œä»¥å¤ªç½‘é‡‡ç”¨äº†ä¸€ç§å¾ˆâ€œåŸå§‹â€çš„æ–¹å¼ï¼Œå®ƒä¸æ˜¯æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æ¥æ”¶æ–¹ï¼Œè€Œæ˜¯å‘<strong>æœ¬ç½‘ç»œå†…æ‰€æœ‰è®¡ç®—æœº</strong>å‘é€ï¼Œè®©æ¯å°è®¡ç®—æœºè‡ªå·±åˆ¤æ–­ï¼Œæ˜¯å¦ä¸ºæ¥æ”¶æ–¹ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/259a2bda03624c2c9381cfb244af47dd.png" title="å¹¿æ’­" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/259a2bda03624c2c9381cfb244af47dd.png" data-sub-html="<h2>å¹¿æ’­</h2><p>å¹¿æ’­</p>">
        
    </a><figcaption class="image-caption">å¹¿æ’­</figcaption>
    </figure></p>
<p>ä¸Šå›¾ä¸­ï¼Œ1 å·è®¡ç®—æœºå‘ 2 å·è®¡ç®—æœºå‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼ŒåŒä¸€ä¸ªå­ç½‘ç»œçš„ 3 å·ã€4 å·ã€5 å·è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªåŒ…ã€‚å®ƒä»¬è¯»å–è¿™ä¸ªåŒ…çš„â€œæ ‡å¤´â€ï¼Œæ‰¾åˆ°æ¥æ”¶æ–¹çš„ MAC åœ°å€ï¼Œç„¶åä¸è‡ªèº«çš„ MAC åœ°å€ç›¸æ¯”è¾ƒï¼Œå¦‚æœä¸¤è€…ç›¸åŒï¼Œå°±æ¥å—è¿™ä¸ªåŒ…ï¼Œåšè¿›ä¸€æ­¥å¤„ç†ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚è¿™ç§å‘é€æ–¹å¼å°±å«åš<strong><ruby>å¹¿æ’­<rt>broadcasting</rt></ruby></strong>ã€‚</p>
<p>æœ‰äº†æ•°æ®åŒ…çš„å®šä¹‰ã€ç½‘å¡çš„ MAC åœ°å€ã€å¹¿æ’­çš„å‘é€æ–¹å¼ï¼Œâ€œé“¾æ¥å±‚â€å°±å¯ä»¥åœ¨å¤šå°è®¡ç®—æœºä¹‹é—´ä¼ é€æ•°æ®äº†ã€‚</p>
<h2 id="ç½‘ç»œå±‚" class="headerLink">
    <a href="#%e7%bd%91%e7%bb%9c%e5%b1%82" class="header-mark"></a>ç½‘ç»œå±‚</h2><h3 id="ç½‘ç»œå±‚çš„ç”±æ¥" class="headerLink">
    <a href="#%e7%bd%91%e7%bb%9c%e5%b1%82%e7%9a%84%e7%94%b1%e6%9d%a5" class="header-mark"></a>ç½‘ç»œå±‚çš„ç”±æ¥</h3><p>ä»¥å¤ªç½‘åè®®ï¼Œä¾é  MAC åœ°å€å‘é€æ•°æ®ã€‚ç†è®ºä¸Šï¼Œå•å•ä¾é  MAC åœ°å€ï¼Œä¸Šæµ·çš„ç½‘å¡å°±å¯ä»¥æ‰¾åˆ°æ´›æ‰çŸ¶çš„ç½‘å¡äº†ï¼ŒæŠ€æœ¯ä¸Šæ˜¯å¯ä»¥å®ç°çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªé‡å¤§çš„ç¼ºç‚¹ã€‚<strong>ä»¥å¤ªç½‘é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ…</strong>ï¼Œæ‰€æœ‰æˆå‘˜äººæ‰‹ä¸€â€œåŒ…â€ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œè€Œä¸”å±€é™åœ¨å‘é€è€…æ‰€åœ¨çš„å­ç½‘ç»œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ
<strong>å¦‚æœä¸¤å°è®¡ç®—æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¹¿æ’­æ˜¯ä¼ ä¸è¿‡å»çš„</strong>ã€‚è¿™ç§è®¾è®¡æ˜¯åˆç†çš„ï¼Œå¦åˆ™äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°æ‰€æœ‰åŒ…ï¼Œé‚£ä¼šå¼•èµ·ç¾éš¾ã€‚</p>
<p><strong>äº’è”ç½‘æ˜¯æ— æ•°å­ç½‘ç»œå…±åŒç»„æˆçš„ä¸€ä¸ªå·¨å‹ç½‘ç»œ</strong>ï¼Œå¾ˆåƒæƒ³è±¡ä¸Šæµ·å’Œæ´›æ‰çŸ¶çš„ç”µè„‘ä¼šåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œè¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/cee93bcb3c2245d6a238a7074dd540ff.png" title="å­ç½‘ç»œ" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/cee93bcb3c2245d6a238a7074dd540ff.png" data-sub-html="<h2>å­ç½‘ç»œ</h2><p>å­ç½‘ç»œ</p>">
        
    </a><figcaption class="image-caption">å­ç½‘ç»œ</figcaption>
    </figure></p>
<p>å› æ­¤ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤ŸåŒºåˆ†å“ªäº› MAC åœ°å€å±äºåŒä¸€ä¸ªå­ç½‘ç»œï¼Œå“ªäº›ä¸æ˜¯ã€‚å¦‚æœæ˜¯åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€ï¼Œå¦åˆ™å°±é‡‡ç”¨â€œè·¯ç”±â€æ–¹å¼å‘é€ã€‚ï¼ˆâ€œè·¯ç”±â€çš„æ„æ€ï¼Œå°±æ˜¯æŒ‡å¦‚ä½•å‘ä¸åŒçš„å­ç½‘ç»œåˆ†å‘æ•°æ®åŒ…ã€‚ï¼‰ï¼ŒMAC åœ°å€æœ¬èº«æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒåªä¸å‚å•†æœ‰å…³ï¼Œä¸æ‰€å¤„ç½‘ç»œæ— å…³ã€‚</p>
<p>è¿™å°±å¯¼è‡´äº†â€œç½‘ç»œå±‚â€çš„è¯ç”Ÿã€‚å®ƒçš„ä½œç”¨æ˜¯ <strong>å¼•è¿›ä¸€å¥—æ–°çš„åœ°å€ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œ</strong>
ã€‚è¿™å¥—åœ°å€å°±å«åšâ€œç½‘ç»œåœ°å€â€ï¼Œç®€ç§°â€œç½‘å€â€ã€‚</p>
<p>äºæ˜¯ï¼Œâ€œç½‘ç»œå±‚â€å‡ºç°ä»¥åï¼Œæ¯å°è®¡ç®—æœºæœ‰äº†ä¸¤ç§åœ°å€ï¼Œä¸€ç§æ˜¯ MAC åœ°å€ï¼Œå¦ä¸€ç§æ˜¯ç½‘ç»œåœ°å€ã€‚
<strong>ä¸¤ç§åœ°å€ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»</strong>ï¼ŒMAC åœ°å€æ˜¯ç»‘å®šåœ¨ç½‘å¡ä¸Šçš„ï¼Œç½‘ç»œåœ°å€åˆ™æ˜¯ç®¡ç†å‘˜åˆ†é…çš„ï¼Œå®ƒä»¬åªæ˜¯éšæœºç»„åˆåœ¨ä¸€èµ·ã€‚</p>
<p><strong>ç½‘ç»œåœ°å€å¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å­ç½‘ç»œï¼ŒMAC åœ°å€åˆ™å°†æ•°æ®åŒ…é€åˆ°è¯¥å­ç½‘ç»œä¸­çš„ç›®æ ‡ç½‘å¡</strong>ã€‚å› æ­¤ï¼Œä»é€»è¾‘ä¸Šå¯ä»¥æ¨æ–­ï¼Œå¿…å®šæ˜¯
<strong>å…ˆå¤„ç†ç½‘ç»œåœ°å€ï¼Œç„¶åå†å¤„ç† MAC åœ°å€</strong>ã€‚</p>
<h3 id="ipåè®®å’Œå­ç½‘æ©ç " class="headerLink">
    <a href="#ip%e5%8d%8f%e8%ae%ae%e5%92%8c%e5%ad%90%e7%bd%91%e6%8e%a9%e7%a0%81" class="header-mark"></a>IPåè®®å’Œå­ç½‘æ©ç </h3><p>è§„å®šç½‘ç»œåœ°å€çš„åè®®ï¼Œå«åš IP åè®®ã€‚å®ƒæ‰€å®šä¹‰çš„åœ°å€ï¼Œå°±è¢«ç§°ä¸º IP åœ°å€ã€‚</p>
<p>ç›®å‰ï¼Œå¹¿æ³›é‡‡ç”¨çš„æ˜¯ IP åè®®ç¬¬å››ç‰ˆï¼Œç®€ç§° IPv4ã€‚è¿™ä¸ªç‰ˆæœ¬è§„å®šï¼Œç½‘ç»œåœ°å€ç”± 32 ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/a4ba02cbb01341ddbb0b75e979b61625.png" title="IPåè®®" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/a4ba02cbb01341ddbb0b75e979b61625.png" data-sub-html="<h2>IPåè®®</h2><p>IPåè®®</p>">
        
    </a><figcaption class="image-caption">IPåè®®</figcaption>
    </figure></p>
<p>ä¹ æƒ¯ä¸Šï¼Œæˆ‘ä»¬ç”¨åˆ†æˆå››æ®µçš„åè¿›åˆ¶æ•°è¡¨ç¤º IP åœ°å€ï¼Œä» <code>0.0.0.0</code> ä¸€ç›´åˆ° <code>255.255.255.255</code>ã€‚</p>
<p>äº’è”ç½‘ä¸Šçš„æ¯ä¸€å°è®¡ç®—æœºï¼Œéƒ½ä¼šåˆ†é…åˆ°ä¸€ä¸ª IP åœ°å€ã€‚</p>
<p><strong>IP åœ°å€åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œå‰ä¸€éƒ¨åˆ†ä»£è¡¨ç½‘ç»œï¼Œåä¸€éƒ¨åˆ†ä»£è¡¨ä¸»æœº</strong>ã€‚</p>
<p>æ¯”å¦‚ï¼ŒIP åœ°å€ <code>172.16.254.1</code>ï¼Œè¿™æ˜¯ä¸€ä¸ª 32 ä½çš„åœ°å€ï¼Œå‡å®šå®ƒçš„ç½‘ç»œéƒ¨åˆ†æ˜¯å‰ 24 ä½ï¼ˆ<code>172.16.254</code>ï¼‰ï¼Œé‚£ä¹ˆä¸»æœºéƒ¨åˆ†å°±æ˜¯å 8 ä½ï¼ˆæœ€åçš„é‚£ä¸ª 1 ï¼‰ã€‚
<strong>å¤„äºåŒä¸€ä¸ªå­ç½‘ç»œçš„ç”µè„‘ï¼Œå®ƒä»¬ IP åœ°å€çš„ç½‘ç»œéƒ¨åˆ†å¿…å®šæ˜¯ç›¸åŒçš„</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ <code>172.16.254.2</code> åº”è¯¥ä¸ <code>172.16.254.1</code> å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚</p>
<p>å•å•ä» IP åœ°å€ï¼Œæˆ‘ä»¬æ— æ³•åˆ¤æ–­ç½‘ç»œéƒ¨åˆ†ã€‚è¿˜æ˜¯ä»¥ <code>172.16.254.1</code> ä¸ºä¾‹ï¼Œå®ƒçš„ç½‘ç»œéƒ¨åˆ†ï¼Œåˆ°åº•æ˜¯å‰ 24 ä½ï¼Œè¿˜æ˜¯å‰ 16 ä½ï¼Œç”šè‡³å‰ 28 ä½ï¼Œä» IP åœ°å€ä¸Šæ˜¯çœ‹ä¸å‡ºæ¥çš„ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½ä»IPåœ°å€ï¼Œåˆ¤æ–­ä¸¤å°è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œå‘¢â“è¿™å°±è¦ç”¨åˆ°å¦ä¸€ä¸ªå‚æ•°<strong><ruby>å­ç½‘æ©ç <rt>subnet mask</rt></ruby></strong>ã€‚</p>
<p>æ‰€è°“ <strong>â€œå­ç½‘æ©ç â€ï¼Œå°±æ˜¯è¡¨ç¤ºå­ç½‘ç»œç‰¹å¾çš„ä¸€ä¸ªå‚æ•°</strong>ã€‚å®ƒåœ¨å½¢å¼ä¸Šç­‰åŒäº IP åœ°å€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª 32 ä½äºŒè¿›åˆ¶æ•°å­—ï¼Œå®ƒçš„<strong>ç½‘ç»œéƒ¨åˆ†å…¨éƒ¨ä¸º
1ï¼Œä¸»æœºéƒ¨åˆ†å…¨éƒ¨ä¸º 0</strong> ã€‚æ¯”å¦‚ï¼ŒIP åœ°å€ <code>172.16.254.1</code>
ï¼Œå¦‚æœå·²çŸ¥ç½‘ç»œéƒ¨åˆ†æ˜¯å‰ 24 ä½ï¼Œä¸»æœºéƒ¨åˆ†æ˜¯å 8 ä½ï¼Œé‚£ä¹ˆå­ç½‘ç»œæ©ç å°±æ˜¯ <code>11111111.11111111.11111111.00000000</code>ï¼Œå†™æˆåè¿›åˆ¶å°±æ˜¯ <code>255.255.255.0</code>ã€‚</p>
<p>çŸ¥é“&quot;å­ç½‘æ©ç &quot;ï¼Œæˆ‘ä»¬å°±èƒ½åˆ¤æ–­ï¼Œä»»æ„ä¸¤ä¸ª IP åœ°å€æ˜¯å¦å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚æ–¹æ³•æ˜¯å°†ä¸¤ä¸ª IP åœ°å€ä¸å­ç½‘æ©ç 
<strong>åˆ†åˆ«</strong>è¿›è¡Œ AND è¿ç®—ï¼ˆä¸¤ä¸ªæ•°ä½éƒ½ä¸º 1 ï¼Œè¿ç®—ç»“æœä¸º 1ï¼Œå¦åˆ™ä¸º 0ï¼‰ï¼Œç„¶åæ¯”è¾ƒç»“æœæ˜¯å¦ç›¸åŒï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±è¡¨æ˜å®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œä¸­ï¼Œå¦åˆ™å°±ä¸æ˜¯ã€‚</p>
<p>æ¯”å¦‚ï¼Œå·²çŸ¥IPåœ°å€ <code>172.16.254.1</code> å’Œ <code>172.16.254.233</code> çš„å­ç½‘æ©ç éƒ½æ˜¯ <code>255.255.255.0</code>ï¼Œè¯·é—®å®ƒä»¬æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Ÿä¸¤è€…ä¸å­ç½‘æ©ç åˆ†åˆ«è¿›è¡Œ AND è¿ç®—ï¼Œç»“æœéƒ½æ˜¯
<code>172.16.254.0</code>ï¼Œå› æ­¤å®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">10101100.00010000.11111110.00000001 <span class="c1"># 172.16.254.1</span>
</span></span><span class="line"><span class="cl">11111111.11111111.11111111.00000000 <span class="c1"># 255.255.255.0</span>
</span></span><span class="line"><span class="cl">10101100.00010000.11111110.00000000 <span class="c1"># AND ç»“æœäºŒè¿›åˆ¶ä½</span>
</span></span><span class="line"><span class="cl">172.16.254.0                        <span class="c1"># AND ç»“æœè½¬æˆåè¿›åˆ¶</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰€ä»¥ï¼Œ<strong>IP åè®®çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¸ºæ¯ä¸€å°è®¡ç®—æœºåˆ†é… IP åœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯ç¡®å®šå“ªäº›åœ°å€åœ¨åŒä¸€ä¸ªå­ç½‘ç»œ</strong>ã€‚</p>
<h3 id="ipæ•°æ®åŒ…" class="headerLink">
    <a href="#ip%e6%95%b0%e6%8d%ae%e5%8c%85" class="header-mark"></a>IPæ•°æ®åŒ…</h3><p>æ ¹æ® IP åè®®å‘é€çš„æ•°æ®ï¼Œå°±å«åš IP æ•°æ®åŒ…ã€‚ä¸éš¾æƒ³è±¡ï¼Œå…¶ä¸­å¿…å®šåŒ…æ‹¬ IP åœ°å€ä¿¡æ¯ã€‚</p>
<p>ä½†æ˜¯å‰é¢è¯´è¿‡ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…åªåŒ…å« MAC åœ°å€ï¼Œå¹¶æ²¡æœ‰ IP åœ°å€çš„æ ä½ã€‚é‚£ä¹ˆæ˜¯å¦éœ€è¦ä¿®æ”¹æ•°æ®å®šä¹‰ï¼Œå†æ·»åŠ ä¸€ä¸ªæ ä½å‘¢ï¼Ÿ</p>
<p>å›ç­”æ˜¯ä¸éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ IP æ•°æ®åŒ…ç›´æ¥æ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œå› æ­¤å®Œå…¨ä¸ç”¨ä¿®æ”¹ä»¥å¤ªç½‘çš„è§„æ ¼ã€‚è¿™å°±æ˜¯äº’è”ç½‘åˆ†å±‚ç»“æ„çš„å¥½å¤„ï¼šä¸Šå±‚çš„å˜åŠ¨å®Œå…¨ä¸æ¶‰åŠä¸‹å±‚çš„ç»“æ„ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼ŒIP æ•°æ®åŒ…ä¹Ÿåˆ†ä¸ºâ€œæ ‡å¤´â€å’Œâ€œæ•°æ®â€ä¸¤ä¸ªéƒ¨åˆ†ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/a13ff01efe0e4053ae1e8d126404a619.png" title="IPæ•°æ®åŒ…1" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/a13ff01efe0e4053ae1e8d126404a619.png" data-sub-html="<h2>IPæ•°æ®åŒ…1</h2><p>IPæ•°æ®åŒ…1</p>">
        
    </a><figcaption class="image-caption">IPæ•°æ®åŒ…1</figcaption>
    </figure></p>
<p>â€œæ ‡å¤´â€éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ç‰ˆæœ¬ã€é•¿åº¦ã€IP åœ°å€ç­‰ä¿¡æ¯ï¼Œâ€œæ•°æ®â€éƒ¨åˆ†åˆ™æ˜¯ IP æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚å®ƒæ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…åï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…å°±å˜æˆäº†ä¸‹é¢è¿™æ ·ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/14bf0cdc38654770bb9a6f0d58c0175f.png" title="IPæ•°æ®åŒ…2" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/14bf0cdc38654770bb9a6f0d58c0175f.png" data-sub-html="<h2>IPæ•°æ®åŒ…2</h2><p>IPæ•°æ®åŒ…2</p>">
        
    </a><figcaption class="image-caption">IPæ•°æ®åŒ…2</figcaption>
    </figure></p>
<p>IP æ•°æ®åŒ…çš„â€œæ ‡å¤´â€éƒ¨åˆ†çš„é•¿åº¦ä¸º 20 åˆ° 60 å­—èŠ‚ï¼Œæ•´ä¸ªæ•°æ®åŒ…çš„æ€»é•¿åº¦æœ€å¤§ä¸º 65,535 å­—èŠ‚ã€‚å› æ­¤ï¼Œç†è®ºä¸Šï¼Œä¸€ä¸ª IP æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œæœ€é•¿ä¸º 65,515 å­—èŠ‚ã€‚å‰é¢è¯´è¿‡ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œæœ€é•¿åªæœ‰ 1500 å­—èŠ‚ã€‚å› æ­¤ï¼Œå¦‚æœ IP æ•°æ®åŒ…è¶…è¿‡äº† 1500 å­—èŠ‚ï¼ˆä¸Šå›¾çº¢è‰²éƒ¨åˆ†ï¼‰ï¼Œå®ƒå°±éœ€è¦åˆ†å‰²æˆå‡ ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ï¼Œåˆ†å¼€å‘é€äº†ã€‚</p>
<h3 id="arpåè®®" class="headerLink">
    <a href="#arp%e5%8d%8f%e8%ae%ae" class="header-mark"></a>ARPåè®®</h3><p>ç”±äº IP æ•°æ®åŒ…æ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…é‡Œå‘é€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åŒæ—¶çŸ¥é“ä¸¤ä¸ªåœ°å€ï¼Œä¸€ä¸ªæ˜¯å¯¹æ–¹çš„ MAC åœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹æ–¹çš„ IP åœ°å€ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹æ–¹çš„ IP åœ°å€æ˜¯å·²çŸ¥çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å®ƒçš„ MAC åœ°å€ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿä» IP åœ°å€å¾—åˆ° MAC åœ°å€ã€‚</p>
<p>è¿™é‡Œåˆå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µã€‚</p>
<p>ç¬¬ä¸€ç§æƒ…å†µï¼Œå¦‚æœä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆäº‹å®ä¸Šæ²¡æœ‰åŠæ³•å¾—åˆ°å¯¹æ–¹çš„ MAC åœ°å€ï¼Œåªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå­ç½‘ç»œè¿æ¥å¤„çš„<strong><ruby>ç½‘å…³<rt>gateway</rt></ruby></strong>ï¼Œè®©ç½‘å…³å»å¤„ç†ã€‚</p>
<p>ç¬¬äºŒç§æƒ…å†µï¼Œå¦‚æœä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ ARP åè®®ï¼Œå¾—åˆ°å¯¹æ–¹çš„ MAC åœ°å€ã€‚ARP åè®®ä¹Ÿæ˜¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆåŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­ï¼‰ï¼Œå…¶ä¸­åŒ…å«å®ƒæ‰€è¦æŸ¥è¯¢ä¸»æœºçš„ IP åœ°å€ï¼Œåœ¨å¯¹æ–¹çš„ MAC åœ°å€è¿™ä¸€æ ï¼Œå¡«çš„æ˜¯<code>FF:FF:FF:FF:FF:FF</code>ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª&quot;å¹¿æ’­&quot;
åœ°å€ã€‚å®ƒæ‰€åœ¨å­ç½‘ç»œçš„æ¯ä¸€å°ä¸»æœºï¼Œéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…ï¼Œä»ä¸­å–å‡º IP åœ°å€ï¼Œä¸è‡ªèº«çš„ IP åœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œéƒ½åšå‡ºå›å¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„ MAC åœ°å€ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚</p>
<p>æœ‰äº† ARP åè®®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°<strong>åŒä¸€ä¸ªå­ç½‘ç»œå†…çš„ä¸»æœº MAC åœ°å€ï¼Œå¯ä»¥æŠŠæ•°æ®åŒ…å‘é€åˆ°ä»»æ„ä¸€å°ä¸»æœºä¹‹ä¸Š</strong>ã€‚</p>
<h2 id="ä¼ è¾“å±‚" class="headerLink">
    <a href="#%e4%bc%a0%e8%be%93%e5%b1%82" class="header-mark"></a>ä¼ è¾“å±‚</h2><h3 id="ä¼ è¾“å±‚çš„ç”±æ¥" class="headerLink">
    <a href="#%e4%bc%a0%e8%be%93%e5%b1%82%e7%9a%84%e7%94%b1%e6%9d%a5" class="header-mark"></a>ä¼ è¾“å±‚çš„ç”±æ¥</h3><p>æœ‰äº† MAC åœ°å€å’Œ IP åœ°å€ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨äº’è”ç½‘ä¸Šä»»æ„ä¸¤å°ä¸»æœºä¸Šå»ºç«‹é€šä¿¡ã€‚</p>
<p>æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼ŒåŒä¸€å°ä¸»æœºä¸Šæœ‰è®¸å¤šç¨‹åºéƒ½éœ€è¦ç”¨åˆ°ç½‘ç»œï¼Œæ¯”å¦‚ï¼Œä½ ä¸€è¾¹æµè§ˆç½‘é¡µï¼Œä¸€è¾¹ä¸æœ‹å‹åœ¨çº¿èŠå¤©ã€‚å½“ä¸€ä¸ªæ•°æ®åŒ…ä»äº’è”ç½‘ä¸Šå‘æ¥çš„æ—¶å€™ï¼Œä½ æ€ä¹ˆçŸ¥é“ï¼Œå®ƒæ˜¯è¡¨ç¤ºç½‘é¡µçš„å†…å®¹ï¼Œè¿˜æ˜¯è¡¨ç¤ºåœ¨çº¿èŠå¤©çš„å†…å®¹ï¼Ÿ</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®åŒ…åˆ°åº•ä¾›å“ªä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ä½¿ç”¨ã€‚è¿™ä¸ªå‚æ•°å°±å«åš<strong><ruby>ç«¯å£<rt>port</rt></ruby></strong>ï¼Œå®ƒå…¶å®
<strong>æ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„ç¨‹åºçš„ç¼–å·</strong>ã€‚æ¯ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£ï¼Œæ‰€ä»¥ä¸åŒçš„ç¨‹åºå°±èƒ½å–åˆ°è‡ªå·±æ‰€éœ€è¦çš„æ•°æ®ã€‚</p>
<p>â€œç«¯å£â€æ˜¯ 0 åˆ° 65535 ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œæ­£å¥½ 16 ä¸ªäºŒè¿›åˆ¶ä½ã€‚
<strong>0 åˆ° 1023 çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨</strong>ï¼Œç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äº 1023 çš„ç«¯å£ã€‚ä¸ç®¡æ˜¯æµè§ˆç½‘é¡µè¿˜æ˜¯åœ¨çº¿èŠå¤©ï¼Œåº”ç”¨ç¨‹åºä¼šéšæœºé€‰ç”¨ä¸€ä¸ªç«¯å£ï¼Œç„¶åä¸æœåŠ¡å™¨çš„ç›¸åº”ç«¯å£è”ç³»ã€‚</p>
<p><strong>â€œä¼ è¾“å±‚â€çš„åŠŸèƒ½ï¼Œå°±æ˜¯å»ºç«‹â€œç«¯å£åˆ°ç«¯å£â€çš„é€šä¿¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€œç½‘ç»œå±‚â€çš„åŠŸèƒ½æ˜¯å»ºç«‹â€œä¸»æœºåˆ°ä¸»æœºâ€çš„é€šä¿¡ã€‚åªè¦ç¡®å®šä¸»æœºå’Œç«¯å£ï¼Œ
æˆ‘ä»¬å°±èƒ½å®ç°ç¨‹åºä¹‹é—´çš„äº¤æµ</strong>ã€‚å› æ­¤ï¼ŒUnixç³»ç»Ÿå°±æŠŠä¸»æœº+ç«¯å£ï¼Œå«åš<strong><ruby>å¥—æ¥å­—<rt>socket</rt></ruby></strong>ã€‚æœ‰äº†å®ƒï¼Œå°±å¯ä»¥è¿›è¡Œç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘äº†ã€‚</p>
<h3 id="udp-åè®®" class="headerLink">
    <a href="#udp-%e5%8d%8f%e8%ae%ae" class="header-mark"></a>UDP åè®®</h3><p>æˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ç«¯å£ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ–°çš„åè®®ã€‚æœ€ç®€å•çš„å®ç°å«åš UDP åè®®ï¼Œå®ƒçš„æ ¼å¼å‡ ä¹å°±æ˜¯åœ¨æ•°æ®å‰é¢ï¼ŒåŠ ä¸Šç«¯å£å·ã€‚</p>
<p>UDP æ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯ç”±â€œæ ‡å¤´â€å’Œâ€œæ•°æ®â€ä¸¤éƒ¨åˆ†ç»„æˆã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/f22b3c1122804019a03f91c5a3efa31d.png" title="UDPæ•°æ®æ ¼å¼_1" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/f22b3c1122804019a03f91c5a3efa31d.png" data-sub-html="<h2>UDPæ•°æ®æ ¼å¼_1</h2><p>UDPæ•°æ®æ ¼å¼_1</p>">
        
    </a><figcaption class="image-caption">UDPæ•°æ®æ ¼å¼_1</figcaption>
    </figure></p>
<p>â€œæ ‡å¤´â€éƒ¨åˆ†ä¸»è¦å®šä¹‰äº†å‘å‡ºç«¯å£å’Œæ¥æ”¶ç«¯å£ï¼Œâ€œæ•°æ®â€éƒ¨åˆ†å°±æ˜¯å…·ä½“çš„å†…å®¹ã€‚ç„¶åï¼ŒæŠŠæ•´ä¸ª UDP æ•°æ®åŒ…æ”¾å…¥ IP æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œè€Œå‰é¢è¯´è¿‡ï¼ŒIP æ•°æ®åŒ…åˆæ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¹‹ä¸­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ç°åœ¨å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/4d0af7444c9b437297c362dbbbdb67ca.png" title="UDPæ•°æ®æ ¼å¼_2" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/4d0af7444c9b437297c362dbbbdb67ca.png" data-sub-html="<h2>UDPæ•°æ®æ ¼å¼_2</h2><p>UDPæ•°æ®æ ¼å¼_2</p>">
        
    </a><figcaption class="image-caption">UDPæ•°æ®æ ¼å¼_2</figcaption>
    </figure></p>
<p>UDP æ•°æ®åŒ…éå¸¸ç®€å•ï¼Œâ€œæ ‡å¤´â€éƒ¨åˆ†ä¸€å…±åªæœ‰ 8 ä¸ªå­—èŠ‚ï¼Œæ€»é•¿åº¦ä¸è¶…è¿‡ 65,535 å­—èŠ‚ï¼Œæ­£å¥½æ”¾è¿›ä¸€ä¸ªIPæ•°æ®åŒ…ã€‚</p>
<h3 id="tcp-åè®®" class="headerLink">
    <a href="#tcp-%e5%8d%8f%e8%ae%ae" class="header-mark"></a>TCP åè®®</h3><p>UDP åè®®çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯é æ€§è¾ƒå·®ï¼Œä¸€æ—¦æ•°æ®åŒ…å‘å‡ºï¼Œæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæé«˜ç½‘ç»œå¯é æ€§ï¼ŒTCP åè®®å°±è¯ç”Ÿäº†ã€‚è¿™ä¸ªåè®®éå¸¸å¤æ‚ï¼Œä½†å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œå®ƒå°±æ˜¯æœ‰ç¡®è®¤æœºåˆ¶çš„ UDP åè®®ï¼Œæ¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…éƒ½è¦æ±‚ç¡®è®¤ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ•°æ®åŒ…é—å¤±ï¼Œå°±æ”¶ä¸åˆ°ç¡®è®¤ï¼Œå‘å‡ºæ–¹å°±çŸ¥é“æœ‰å¿…è¦é‡å‘è¿™ä¸ªæ•°æ®åŒ…äº†ã€‚</p>
<p>å› æ­¤ï¼ŒTCP åè®®èƒ½å¤Ÿç¡®ä¿æ•°æ®ä¸ä¼šé—å¤±ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è¿‡ç¨‹å¤æ‚ã€å®ç°å›°éš¾ã€æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚</p>
<p>TCP æ•°æ®åŒ…å’Œ UDP æ•°æ®åŒ…ä¸€æ ·ï¼Œéƒ½æ˜¯å†…åµŒåœ¨ IP æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ã€‚TCP æ•°æ®åŒ…æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™é•¿ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œçš„æ•ˆç‡ï¼Œ
<strong>é€šå¸¸ TCP æ•°æ®åŒ…çš„é•¿åº¦ä¸ä¼šè¶…è¿‡ IP æ•°æ®åŒ…çš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å•ä¸ª TCP æ•°æ®åŒ…ä¸å¿…å†åˆ†å‰²</strong>ã€‚</p>
<h2 id="åº”ç”¨å±‚" class="headerLink">
    <a href="#%e5%ba%94%e7%94%a8%e5%b1%82" class="header-mark"></a>åº”ç”¨å±‚</h2><p>åº”ç”¨ç¨‹åºæ”¶åˆ°&quot;ä¼ è¾“å±‚&quot;çš„æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±è¦è¿›è¡Œè§£è¯»ã€‚ç”±äºäº’è”ç½‘æ˜¯å¼€æ”¾æ¶æ„ï¼Œæ•°æ®æ¥æºäº”èŠ±å…«é—¨ï¼Œå¿…é¡»äº‹å…ˆè§„å®šå¥½æ ¼å¼ï¼Œå¦åˆ™æ ¹æœ¬æ— æ³•è§£è¯»ã€‚</p>
<p><strong>â€œåº”ç”¨å±‚â€çš„ä½œç”¨ï¼Œå°±æ˜¯è§„å®šåº”ç”¨ç¨‹åºçš„æ•°æ®æ ¼å¼ã€‚</strong></p>
<p>ä¸¾ä¾‹æ¥è¯´ï¼ŒTCP åè®®å¯ä»¥ä¸ºå„ç§å„æ ·çš„ç¨‹åºä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚ Emailã€WWWã€FTP ç­‰ç­‰ã€‚é‚£ä¹ˆï¼Œå¿…é¡»æœ‰ä¸åŒåè®®ï¼ˆæ¯”å¦‚ http åè®®ï¼‰è§„å®šç”µå­é‚®ä»¶ã€ç½‘é¡µã€FTP æ•°æ®çš„æ ¼å¼ï¼Œè¿™äº›åº”ç”¨ç¨‹åºåè®®å°±æ„æˆäº†&quot;åº”ç”¨å±‚&quot;ã€‚</p>
<p>è¿™æ˜¯æœ€é«˜çš„ä¸€å±‚ï¼Œç›´æ¥é¢å¯¹ç”¨æˆ·ã€‚å®ƒçš„æ•°æ®å°±æ”¾åœ¨ TCP æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œç°åœ¨çš„ä»¥å¤ªç½‘çš„æ•°æ®åŒ…å°±å˜æˆä¸‹é¢è¿™æ ·ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/935efc2ef36e4928bab08c8609c67935.png" title="åº”ç”¨å±‚æ•°æ®åŒ…" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220328/935efc2ef36e4928bab08c8609c67935.png" data-sub-html="<h2>åº”ç”¨å±‚æ•°æ®åŒ…</h2><p>åº”ç”¨å±‚æ•°æ®åŒ…</p>">
        
    </a><figcaption class="image-caption">åº”ç”¨å±‚æ•°æ®åŒ…</figcaption>
    </figure></p>
<h2 id="å°ç»“" class="headerLink">
    <a href="#%e5%b0%8f%e7%bb%93" class="header-mark"></a>å°ç»“</h2><p>ç½‘ç»œé€šä¿¡å°±æ˜¯äº¤æ¢æ•°æ®åŒ…ã€‚ç”µè„‘ A å‘ç”µè„‘ B å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œåè€…æ”¶åˆ°äº†ï¼Œå›å¤ä¸€ä¸ªæ•°æ®åŒ…ï¼Œä»è€Œå®ç°ä¸¤å°ç”µè„‘ä¹‹é—´çš„é€šä¿¡ã€‚æ•°æ®åŒ…çš„ç»“æ„ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸‹é¢è¿™æ ·ï¼š</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/05cd964675504c5697dcca0b27fcbc4a.png" title="æ•°æ®åŒ…" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/05cd964675504c5697dcca0b27fcbc4a.png" data-sub-html="<h2>æ•°æ®åŒ…</h2><p>æ•°æ®åŒ…</p>">
        
    </a><figcaption class="image-caption">æ•°æ®åŒ…</figcaption>
    </figure></p>
<p>å‘é€è¿™ä¸ªåŒ…ï¼Œéœ€è¦çŸ¥é“ä¸¤ä¸ªåœ°å€ï¼š</p>
<ul>
<li>å¯¹æ–¹çš„ MAC åœ°å€</li>
<li>å¯¹æ–¹çš„ IP åœ°å€</li>
</ul>
<p>æœ‰äº†è¿™ä¸¤ä¸ªåœ°å€ï¼Œæ•°æ®åŒ…æ‰èƒ½å‡†ç¡®é€åˆ°æ¥æ”¶è€…æ‰‹ä¸­ã€‚ä½†æ˜¯ï¼ŒMAC åœ°å€æœ‰å±€é™æ€§ï¼Œ<strong>å¦‚æœä¸¤å°ç”µè„‘ä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±æ— æ³•çŸ¥é“å¯¹æ–¹çš„ MAC
åœ°å€ï¼Œå¿…é¡»é€šè¿‡ç½‘å…³ï¼ˆgatewayï¼‰è½¬å‘</strong>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/14a9089e17c94a1eb8a1215dd31a2b40.png" title="ç½‘å…³" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/14a9089e17c94a1eb8a1215dd31a2b40.png" data-sub-html="<h2>ç½‘å…³</h2><p>ç½‘å…³</p>">
        
    </a><figcaption class="image-caption">ç½‘å…³</figcaption>
    </figure></p>
<p>ä¸Šå›¾â˜ï¸ä¸­ï¼Œ1 å·ç”µè„‘è¦å‘ 4 å·ç”µè„‘å‘é€ä¸€ä¸ªæ•°æ®åŒ…ã€‚å®ƒå…ˆåˆ¤æ–­ 4 å·ç”µè„‘æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œç»“æœå‘ç°ä¸æ˜¯ï¼Œäºæ˜¯å°±æŠŠè¿™ä¸ªæ•°æ®åŒ…å‘åˆ°ç½‘å…³ Aã€‚ç½‘å…³ A é€šè¿‡è·¯ç”±åè®®ï¼Œå‘ç° 4 å·ç”µè„‘ä½äºå­ç½‘ç»œ Bï¼ŒåˆæŠŠæ•°æ®åŒ…å‘ç»™ç½‘å…³ Bï¼Œç½‘å…³ B å†è½¬å‘åˆ° 4 å·ç”µè„‘ã€‚</p>
<p>1 å·ç”µè„‘æŠŠæ•°æ®åŒ…å‘åˆ°ç½‘å…³ Aï¼Œå¿…é¡»çŸ¥é“ç½‘å…³ A çš„ MAC åœ°å€ã€‚æ‰€ä»¥ï¼Œæ•°æ®åŒ…çš„ç›®æ ‡åœ°å€ï¼Œå®é™…ä¸Šåˆ†æˆä¸¤ç§æƒ…å†µï¼š</p>
<table>
<thead>
<tr>
<th>åœºæ™¯</th>
<th>æ•°æ®åŒ…åœ°å€</th>
</tr>
</thead>
<tbody>
<tr>
<td>åŒä¸€ä¸ªå­ç½‘ç»œ</td>
<td>å¯¹æ–¹çš„ MAC åœ°å€ï¼Œå¯¹æ–¹çš„ IP åœ°å€</td>
</tr>
<tr>
<td>éåŒä¸€ä¸ªå­ç½‘ç»œ</td>
<td>ç½‘å…³çš„ MAC åœ°å€ï¼Œå¯¹æ–¹çš„ IP åœ°å€</td>
</tr>
</tbody>
</table>
<p>å‘é€æ•°æ®åŒ…ä¹‹å‰ï¼Œç”µè„‘å¿…é¡»åˆ¤æ–­å¯¹æ–¹æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œç„¶åé€‰æ‹©ç›¸åº”çš„ MAC åœ°å€ã€‚</p>
<h2 id="ä¸Šç½‘è®¾ç½®" class="headerLink">
    <a href="#%e4%b8%8a%e7%bd%91%e8%ae%be%e7%bd%ae" class="header-mark"></a>ä¸Šç½‘è®¾ç½®</h2><h3 id="é™æ€ipåœ°å€" class="headerLink">
    <a href="#%e9%9d%99%e6%80%81ip%e5%9c%b0%e5%9d%80" class="header-mark"></a>é™æ€IPåœ°å€</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/d0cf31e76b2046d89c4053cf9e7bc541.png" title="computer" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/d0cf31e76b2046d89c4053cf9e7bc541.png" data-sub-html="<h2>new computer</h2><p>computer</p>">
        
    </a><figcaption class="image-caption">new computer</figcaption>
    </figure></p>
<p>é€šå¸¸ä½ å¿…é¡»åšä¸€äº›è®¾ç½®ã€‚æœ‰æ—¶ï¼Œç®¡ç†å‘˜ä¼šå‘Šè¯‰ä½ ä¸‹é¢å››ä¸ªå‚æ•°ï¼Œä½ æŠŠå®ƒä»¬å¡«å…¥æ“ä½œç³»ç»Ÿï¼Œè®¡ç®—æœºå°±èƒ½è¿ä¸Šç½‘äº†ï¼š</p>
<ul>
<li>æœ¬æœºçš„IPåœ°å€</li>
<li>å­ç½‘æ©ç </li>
<li>ç½‘å…³çš„IPåœ°å€</li>
<li>DNSçš„IPåœ°å€</li>
</ul>
<p>ä¸‹å›¾æ˜¯Windowsç³»ç»Ÿçš„è®¾ç½®çª—å£ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/feb7f5ebde2d4f63992aa9779ca55262.png" title="ç³»ç»Ÿè®¾ç½®" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/feb7f5ebde2d4f63992aa9779ca55262.png" data-sub-html="<h2>ç³»ç»Ÿè®¾ç½®</h2><p>ç³»ç»Ÿè®¾ç½®</p>">
        
    </a><figcaption class="image-caption">ç³»ç»Ÿè®¾ç½®</figcaption>
    </figure></p>
<p>è¿™å››ä¸ªå‚æ•°ç¼ºä¸€ä¸å¯ã€‚ç”±äºå®ƒä»¬æ˜¯ç»™å®šçš„ï¼Œè®¡ç®—æœºæ¯æ¬¡å¼€æœºï¼Œéƒ½ä¼šåˆ†åˆ°åŒæ ·çš„IPåœ°å€ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µè¢«ç§°ä½œâ€œé™æ€IPåœ°å€ä¸Šç½‘â€ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™æ ·çš„è®¾ç½®å¾ˆä¸“ä¸šï¼Œæ™®é€šç”¨æˆ·æœ›è€Œç”Ÿç•ï¼Œè€Œä¸”å¦‚æœä¸€å°ç”µè„‘çš„IPåœ°å€ä¿æŒä¸å˜ï¼Œå…¶ä»–ç”µè„‘å°±ä¸èƒ½ä½¿ç”¨è¿™ä¸ªåœ°å€ï¼Œä¸å¤Ÿçµæ´»ã€‚å‡ºäºè¿™ä¸¤ä¸ªåŸå› ï¼Œå¤§å¤šæ•°ç”¨æˆ·ä½¿ç”¨â€œåŠ¨æ€IPåœ°å€ä¸Šç½‘â€ã€‚</p>
<h3 id="åŠ¨æ€ipåœ°å€" class="headerLink">
    <a href="#%e5%8a%a8%e6%80%81ip%e5%9c%b0%e5%9d%80" class="header-mark"></a>åŠ¨æ€IPåœ°å€</h3><p>æ‰€è°“â€œåŠ¨æ€IPåœ°å€â€ï¼Œæ˜¯æŒ‡è®¡ç®—æœºå¼€æœºåï¼Œä¼šè‡ªåŠ¨åˆ†é…åˆ°ä¸€ä¸ª IP åœ°å€ï¼Œä¸ç”¨äººä¸ºè®¾å®šã€‚å®ƒä½¿ç”¨çš„åè®®å«åš DHCP åè®®ã€‚</p>
<p>è¿™ä¸ªåè®®è§„å®šï¼Œæ¯ä¸€ä¸ªå­ç½‘ç»œä¸­ï¼Œæœ‰ä¸€å°è®¡ç®—æœºè´Ÿè´£ç®¡ç†æœ¬ç½‘ç»œçš„æ‰€æœ‰IPåœ°å€ï¼Œå®ƒå«åšâ€œDHCPæœåŠ¡å™¨â€ã€‚æ–°çš„è®¡ç®—æœºåŠ å…¥ç½‘ç»œï¼Œå¿…é¡»å‘â€œDHCPæœåŠ¡å™¨â€å‘é€ä¸€ä¸ªâ€œDHCPè¯·æ±‚â€æ•°æ®åŒ…ï¼Œç”³è¯·IPåœ°å€å’Œç›¸å…³çš„ç½‘ç»œå‚æ•°ã€‚</p>
<p>å‰é¢è¯´è¿‡ï¼Œå¦‚æœä¸¤å°è®¡ç®—æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¿…é¡»çŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€å’Œ IP åœ°å€ï¼Œæ‰èƒ½å‘é€æ•°æ®åŒ…ã€‚ä½†æ˜¯ï¼Œæ–°åŠ å…¥çš„è®¡ç®—æœºä¸çŸ¥é“è¿™ä¸¤ä¸ªåœ°å€ï¼Œæ€ä¹ˆå‘é€æ•°æ®åŒ…å‘¢ï¼Ÿ</p>
<p>DHCPåè®®åšäº†ä¸€äº›å·§å¦™çš„è§„å®šã€‚</p>
<h3 id="dhcpåè®®" class="headerLink">
    <a href="#dhcp%e5%8d%8f%e8%ae%ae" class="header-mark"></a>DHCPåè®®</h3><p>é¦–å…ˆï¼Œå®ƒæ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå»ºç«‹åœ¨UDPåè®®ä¹‹ä¸Šï¼Œæ‰€ä»¥æ•´ä¸ªæ•°æ®åŒ…æ˜¯è¿™æ ·çš„ï¼š</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/93b546648e6640ea97c1e8709280708d.png" title="HDCPåè®®æ•°æ®åŒ…" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/93b546648e6640ea97c1e8709280708d.png" data-sub-html="<h2>HDCPåè®®æ•°æ®åŒ…</h2><p>HDCPåè®®æ•°æ®åŒ…</p>">
        
    </a><figcaption class="image-caption">HDCPåè®®æ•°æ®åŒ…</figcaption>
    </figure></p>
<ol>
<li>
<p>æœ€å‰é¢çš„â€œä»¥å¤ªç½‘æ ‡å¤´â€ï¼Œè®¾ç½®å‘å‡ºæ–¹ï¼ˆæœ¬æœºï¼‰çš„MACåœ°å€å’Œæ¥æ”¶æ–¹ï¼ˆDHCPæœåŠ¡å™¨ï¼‰çš„MACåœ°å€ã€‚å‰è€…å°±æ˜¯æœ¬æœºç½‘å¡çš„MACåœ°å€ï¼Œåè€…è¿™æ—¶ä¸çŸ¥é“ï¼Œå°±å¡«å…¥ä¸€ä¸ªå¹¿æ’­åœ°å€ï¼š<code>FF-FF-FF-FF-FF-FF</code>ã€‚</p>
</li>
<li>
<p>åé¢çš„â€œIPæ ‡å¤´â€ï¼Œè®¾ç½®å‘å‡ºæ–¹çš„IPåœ°å€å’Œæ¥æ”¶æ–¹çš„IPåœ°å€ã€‚è¿™æ—¶ï¼Œå¯¹äºè¿™ä¸¤è€…ï¼Œæœ¬æœºéƒ½ä¸çŸ¥é“ã€‚äºæ˜¯ï¼Œå‘å‡ºæ–¹çš„IPåœ°å€å°±è®¾ä¸º<code>0.0.0.0</code>ï¼Œæ¥æ”¶æ–¹çš„IPåœ°å€è®¾ä¸º<code>255.255.255.255</code>ã€‚</p>
</li>
<li>
<p>æœ€åçš„â€œUDPæ ‡å¤´â€ï¼Œè®¾ç½®å‘å‡ºæ–¹çš„ç«¯å£å’Œæ¥æ”¶æ–¹çš„ç«¯å£ã€‚è¿™ä¸€éƒ¨åˆ†æ˜¯ DHCP åè®®è§„å®šå¥½çš„ï¼Œå‘å‡ºæ–¹æ˜¯ 68 ç«¯å£ï¼Œæ¥æ”¶æ–¹æ˜¯ 67 ç«¯å£ã€‚</p>
</li>
</ol>
<p>è¿™ä¸ªæ•°æ®åŒ…æ„é€ å®Œæˆåï¼Œå°±å¯ä»¥å‘å‡ºäº†ã€‚ä»¥å¤ªç½‘æ˜¯å¹¿æ’­å‘é€ï¼ŒåŒä¸€ä¸ªå­ç½‘ç»œçš„æ¯å°è®¡ç®—æœºéƒ½æ”¶åˆ°äº†è¿™ä¸ªåŒ…ã€‚å› ä¸ºæ¥æ”¶æ–¹çš„MACåœ°å€æ˜¯<code>FF-FF-FF-FF-FF-FF</code>
ï¼Œçœ‹ä¸å‡ºæ˜¯å‘ç»™è°çš„ï¼Œæ‰€ä»¥æ¯å°æ”¶åˆ°è¿™ä¸ªåŒ…çš„è®¡ç®—æœºï¼Œè¿˜å¿…é¡»åˆ†æè¿™ä¸ªåŒ…çš„ IP åœ°å€ï¼Œæ‰èƒ½ç¡®å®šæ˜¯ä¸æ˜¯å‘ç»™è‡ªå·±çš„ã€‚å½“çœ‹åˆ°å‘å‡ºæ–¹ IP åœ°å€æ˜¯<code>0.0.0.0</code>ï¼Œæ¥æ”¶æ–¹æ˜¯<code>255.255.255.255</code>ï¼Œäºæ˜¯ DHCP æœåŠ¡å™¨çŸ¥é“â€œè¿™ä¸ªåŒ…æ˜¯å‘ç»™æˆ‘çš„â€ï¼Œè€Œå…¶ä»–è®¡ç®—æœºå°±å¯ä»¥ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼ŒDHCP æœåŠ¡å™¨è¯»å‡ºè¿™ä¸ªåŒ…çš„æ•°æ®å†…å®¹ï¼Œåˆ†é…å¥½ IP åœ°å€ï¼Œå‘é€å›å»ä¸€ä¸ªâ€œDHCPå“åº”â€æ•°æ®åŒ…ã€‚è¿™ä¸ªå“åº”åŒ…çš„ç»“æ„ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä»¥å¤ªç½‘æ ‡å¤´çš„ MAC åœ°å€æ˜¯åŒæ–¹çš„ç½‘å¡åœ°å€ï¼ŒIP æ ‡å¤´çš„ IP åœ°å€æ˜¯ DHCP æœåŠ¡å™¨çš„ IP åœ°å€ï¼ˆå‘å‡ºæ–¹ï¼‰å’Œ<code>255.255.255.255</code>ï¼ˆæ¥æ”¶æ–¹ï¼‰ï¼ŒUDP æ ‡å¤´çš„ç«¯å£æ˜¯ 67ï¼ˆå‘å‡ºæ–¹ï¼‰å’Œ 68ï¼ˆæ¥æ”¶æ–¹ï¼‰ï¼Œåˆ†é…ç»™è¯·æ±‚ç«¯çš„ IP åœ°å€å’Œæœ¬ç½‘ç»œçš„å…·ä½“å‚æ•°åˆ™åŒ…å«åœ¨ Data éƒ¨åˆ†ã€‚</p>
<p>æ–°åŠ å…¥çš„è®¡ç®—æœºæ”¶åˆ°è¿™ä¸ªå“åº”åŒ…ï¼Œäºæ˜¯å°±çŸ¥é“äº†è‡ªå·±çš„IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³åœ°å€ã€DNS æœåŠ¡å™¨ç­‰ç­‰å‚æ•°ã€‚</p>
<h3 id="å°ç»“-1" class="headerLink">
    <a href="#%e5%b0%8f%e7%bb%93-1" class="header-mark"></a>å°ç»“</h3><p>ä¸ç®¡æ˜¯â€œé™æ€IPåœ°å€â€è¿˜æ˜¯â€œåŠ¨æ€IPåœ°å€â€ï¼Œç”µè„‘ä¸Šç½‘çš„é¦–è¦æ­¥éª¤ï¼Œæ˜¯ç¡®å®šå››ä¸ªå‚æ•°ã€‚è¿™å››ä¸ªå€¼å¾ˆé‡è¦ï¼Œå€¼å¾—é‡å¤ä¸€éï¼š</p>
<ul>
<li>æœ¬æœºçš„IPåœ°å€</li>
<li>å­ç½‘æ©ç </li>
<li>ç½‘å…³çš„IPåœ°å€</li>
<li>DNSçš„IPåœ°å€</li>
</ul>
<p>æœ‰äº†è¿™å‡ ä¸ªæ•°å€¼ï¼Œç”µè„‘å°±å¯ä»¥ä¸Šç½‘&quot;å†²æµª&quot;äº†ã€‚</p>
<h2 id="ä¸€ä¸ªå®ä¾‹" class="headerLink">
    <a href="#%e4%b8%80%e4%b8%aa%e5%ae%9e%e4%be%8b" class="header-mark"></a>ä¸€ä¸ªå®ä¾‹</h2><h3 id="æœ¬æœºå‚æ•°" class="headerLink">
    <a href="#%e6%9c%ac%e6%9c%ba%e5%8f%82%e6%95%b0" class="header-mark"></a>æœ¬æœºå‚æ•°</h3><p>æˆ‘ä»¬å‡å®šï¼Œç”¨æˆ·è®¾ç½®å¥½äº†è‡ªå·±çš„ç½‘ç»œå‚æ•°ï¼š</p>
<ul>
<li>æœ¬æœºçš„IPåœ°å€ï¼š<code>192.168.1.100</code></li>
<li>å­ç½‘æ©ç ï¼š<code>255.255.255.0</code></li>
<li>ç½‘å…³çš„IPåœ°å€ï¼š<code>192.168.1.1</code></li>
<li>DNSçš„IPåœ°å€ï¼š<code>8.8.8.8</code></li>
</ul>
<p>ç„¶åä»–æ‰“å¼€æµè§ˆå™¨ï¼Œæƒ³è¦è®¿é—® Googleï¼Œåœ¨åœ°å€æ è¾“å…¥äº†ç½‘å€ï¼š<a href="https://www.google.com/" target="_blank" rel="noopener noreferrer">www.google.com</a>ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/4c713bfb8027455aa671d16c55a58d2f.png" title="è®¿é—®google" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/4c713bfb8027455aa671d16c55a58d2f.png" data-sub-html="<h2>è®¿é—®google</h2><p>è®¿é—®google</p>">
        
    </a><figcaption class="image-caption">è®¿é—®google</figcaption>
    </figure></p>
<p>è¿™æ„å‘³ç€ï¼Œæµè§ˆå™¨è¦å‘ Google å‘é€ä¸€ä¸ªç½‘é¡µè¯·æ±‚çš„æ•°æ®åŒ…ã€‚</p>
<h3 id="dnsåè®®" class="headerLink">
    <a href="#dns%e5%8d%8f%e8%ae%ae" class="header-mark"></a>DNSåè®®</h3><p>æˆ‘ä»¬çŸ¥é“ï¼Œå‘é€æ•°æ®åŒ…ï¼Œå¿…é¡»è¦çŸ¥é“å¯¹æ–¹çš„ IP åœ°å€ã€‚ä½†æ˜¯ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬åªçŸ¥é“ç½‘å€ <a href="https://www.google.com/" target="_blank" rel="noopener noreferrer">www.google.com</a>ï¼Œä¸çŸ¥é“å®ƒçš„ IP åœ°å€ã€‚</p>
<p>DNS åè®®å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼Œå°†è¿™ä¸ªç½‘å€è½¬æ¢æˆ IP åœ°å€ã€‚å·²çŸ¥DNSæœåŠ¡å™¨ä¸º<code>8.8.8.8</code>ï¼Œäºæ˜¯æˆ‘ä»¬å‘è¿™ä¸ªåœ°å€å‘é€ä¸€ä¸ª DNS æ•°æ®åŒ…ï¼ˆ53ç«¯å£ï¼‰ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/2dc987c9aea7402591d054ea660235e9.png" title="DNSæ•°æ®åŒ…" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/2dc987c9aea7402591d054ea660235e9.png" data-sub-html="<h2>DNSæ•°æ®åŒ…</h2><p>DNSæ•°æ®åŒ…</p>">
        
    </a><figcaption class="image-caption">DNSæ•°æ®åŒ…</figcaption>
    </figure></p>
<p>ç„¶åï¼ŒDNS æœåŠ¡å™¨åšå‡ºå“åº”ï¼Œå‘Šè¯‰æˆ‘ä»¬ Google çš„ I Påœ°å€æ˜¯<code>172.194.72.105</code>ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“äº†å¯¹æ–¹çš„ IP åœ°å€ã€‚</p>
<h3 id="å­ç½‘æ©ç " class="headerLink">
    <a href="#%e5%ad%90%e7%bd%91%e6%8e%a9%e7%a0%81" class="header-mark"></a>å­ç½‘æ©ç </h3><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­ï¼Œè¿™ä¸ª IP åœ°å€æ˜¯ä¸æ˜¯åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œè¿™å°±è¦ç”¨åˆ°å­ç½‘æ©ç ã€‚</p>
<p>å·²çŸ¥å­ç½‘æ©ç æ˜¯<code>255.255.255.0</code>ï¼Œæœ¬æœºç”¨å®ƒå¯¹è‡ªå·±çš„ IP åœ°å€<code>192.168.1.100</code>ï¼Œåšä¸€ä¸ªäºŒè¿›åˆ¶çš„<code>AND</code>è¿ç®—ï¼ˆä¸¤ä¸ªæ•°ä½éƒ½ä¸º1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0ï¼‰ï¼Œè®¡ç®—ç»“æœä¸º<code>192.168.1.0</code>ï¼›ç„¶åå¯¹ Google çš„ IP åœ°å€<code>172.194.72.105</code>ä¹Ÿåšä¸€ä¸ª<code>AND</code>è¿ç®—ï¼Œè®¡ç®—ç»“æœä¸º<code>172.194.72.0</code>ã€‚è¿™ä¸¤ä¸ªç»“æœä¸ç›¸ç­‰ï¼Œæ‰€ä»¥ç»“è®ºæ˜¯ï¼ŒGoogle ä¸æœ¬æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬è¦å‘ Google å‘é€æ•°æ®åŒ…ï¼Œå¿…é¡»é€šè¿‡ç½‘å…³<code>192.168.1.1</code>è½¬å‘ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¥æ”¶æ–¹çš„ MAC åœ°å€å°†æ˜¯ç½‘å…³çš„ MAC åœ°å€ã€‚</p>
<h3 id="åº”ç”¨å±‚åè®®" class="headerLink">
    <a href="#%e5%ba%94%e7%94%a8%e5%b1%82%e5%8d%8f%e8%ae%ae" class="header-mark"></a>åº”ç”¨å±‚åè®®</h3><p>æµè§ˆç½‘é¡µç”¨çš„æ˜¯ HTTP åè®®ï¼Œå®ƒçš„æ•´ä¸ªæ•°æ®åŒ…æ„é€ æ˜¯è¿™æ ·çš„ï¼š</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/d64d5794254341dc98a40bd6dd4b3893.png" title="HTTPåè®®æ•°æ®åŒ…" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/d64d5794254341dc98a40bd6dd4b3893.png" data-sub-html="<h2>HTTPåè®®æ•°æ®åŒ…</h2><p>HTTPåè®®æ•°æ®åŒ…</p>">
        
    </a><figcaption class="image-caption">HTTPåè®®æ•°æ®åŒ…</figcaption>
    </figure></p>
<p>HTTPéƒ¨åˆ†çš„å†…å®¹ï¼Œç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-http" data-lang="http"><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="nf">GET</span> <span class="nn">/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
</span></span><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="n">Host</span><span class="o">:</span> <span class="l">www.google.com</span>
</span></span><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="n">Connection</span><span class="o">:</span> <span class="l">keep-alive</span>
</span></span><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="n">User-Agent</span><span class="o">:</span> <span class="l">Mozilla/5.0 (Windows NT 6.1) ......</span>
</span></span><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="n">Accept</span><span class="o">:</span> <span class="l">text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</span>
</span></span><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="n">Accept-Encoding</span><span class="o">:</span> <span class="l">gzip,deflate,sdch</span>
</span></span><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="n">Accept-Language</span><span class="o">:</span> <span class="l">zh-CN,zh;q=0.8</span>
</span></span><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="n">Accept-Charset</span><span class="o">:</span> <span class="l">GBK,utf-8;q=0.7,*;q=0.3</span>
</span></span><span class="line"><span class="cl"><span class="err">ã€€ã€€</span><span class="n">Cookie</span><span class="o">:</span> <span class="l">... ...</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æˆ‘ä»¬å‡å®šè¿™ä¸ªéƒ¨åˆ†çš„é•¿åº¦ä¸º 4960 å­—èŠ‚ï¼Œå®ƒä¼šè¢«åµŒåœ¨ TCP æ•°æ®åŒ…ä¹‹ä¸­ã€‚</p>
<h3 id="tcpåè®®" class="headerLink">
    <a href="#tcp%e5%8d%8f%e8%ae%ae" class="header-mark"></a>TCPåè®®</h3><p>TCP æ•°æ®åŒ…éœ€è¦è®¾ç½®ç«¯å£ï¼Œæ¥æ”¶æ–¹ï¼ˆGoogleï¼‰çš„ HTTP ç«¯å£é»˜è®¤æ˜¯ 80ï¼Œå‘é€æ–¹ï¼ˆæœ¬æœºï¼‰çš„ç«¯å£æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„ 1024-65535 ä¹‹é—´çš„æ•´æ•°ï¼Œå‡å®šä¸º 51775ã€‚TCP æ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º 20 å­—èŠ‚ï¼ŒåŠ ä¸ŠåµŒå…¥ HTTP çš„æ•°æ®åŒ…ï¼Œæ€»é•¿åº¦å˜ä¸º 4980 å­—èŠ‚ã€‚</p>
<h3 id="ipåè®®" class="headerLink">
    <a href="#ip%e5%8d%8f%e8%ae%ae" class="header-mark"></a>IPåè®®</h3><p>ç„¶åï¼ŒTCP æ•°æ®åŒ…å†åµŒå…¥ IP æ•°æ®åŒ…ã€‚IP æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„ IP åœ°å€ï¼Œè¿™æ˜¯å·²çŸ¥çš„ï¼Œå‘é€æ–¹æ˜¯<code>192.168.1.100</code>ï¼ˆæœ¬æœºï¼‰ï¼Œæ¥æ”¶æ–¹æ˜¯<code>172.194.72.105</code>ï¼ˆGoogleï¼‰ã€‚IP æ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º 20 å­—èŠ‚ï¼ŒåŠ ä¸ŠåµŒå…¥çš„ TCP æ•°æ®åŒ…ï¼Œæ€»é•¿åº¦å˜ä¸º 5000 å­—èŠ‚ã€‚</p>
<h3 id="ä»¥å¤ªç½‘åè®®-1" class="headerLink">
    <a href="#%e4%bb%a5%e5%a4%aa%e7%bd%91%e5%8d%8f%e8%ae%ae-1" class="header-mark"></a>ä»¥å¤ªç½‘åè®®</h3><p>æœ€åï¼ŒIP æ•°æ®åŒ…åµŒå…¥ä»¥å¤ªç½‘æ•°æ®åŒ…ã€‚ä»¥å¤ªç½‘æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„ MAC åœ°å€ï¼Œå‘é€æ–¹ä¸ºæœ¬æœºçš„ç½‘å¡ MAC åœ°å€ï¼Œæ¥æ”¶æ–¹ä¸ºç½‘å…³<code>192.168.1.1</code>çš„ MAC åœ°å€ï¼ˆé€šè¿‡ ARP åè®®å¾—åˆ°ï¼‰ã€‚</p>
<p>ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†ï¼Œæœ€å¤§é•¿åº¦ä¸º 1500 å­—èŠ‚ï¼Œè€Œç°åœ¨çš„ IP æ•°æ®åŒ…é•¿åº¦ä¸º 5000 å­—èŠ‚ã€‚å› æ­¤ï¼ŒIP æ•°æ®åŒ…å¿…é¡»åˆ†å‰²æˆå››ä¸ªåŒ…ã€‚å› ä¸ºæ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„ IP æ ‡å¤´ï¼ˆ20å­—èŠ‚ï¼‰ï¼Œæ‰€ä»¥å››ä¸ªåŒ…çš„ IP æ•°æ®åŒ…çš„é•¿åº¦åˆ†åˆ«ä¸º 1500ã€1500ã€1500ã€560ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/fb5d47e23bf84f62bc189df69bfdd991.png" title="ä»¥å¤ªç½‘åè®®" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/fb5d47e23bf84f62bc189df69bfdd991.png" data-sub-html="<h2>ä»¥å¤ªç½‘åè®®</h2><p>ä»¥å¤ªç½‘åè®®</p>">
        
    </a><figcaption class="image-caption">ä»¥å¤ªç½‘åè®®</figcaption>
    </figure></p>
<h3 id="æœåŠ¡å™¨ç«¯å“åº”" class="headerLink">
    <a href="#%e6%9c%8d%e5%8a%a1%e5%99%a8%e7%ab%af%e5%93%8d%e5%ba%94" class="header-mark"></a>æœåŠ¡å™¨ç«¯å“åº”</h3><p>ç»è¿‡å¤šä¸ªç½‘å…³çš„è½¬å‘ï¼ŒGoogle çš„æœåŠ¡å™¨<code>172.194.72.105</code>ï¼Œæ”¶åˆ°äº†è¿™å››ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ã€‚</p>
<p>æ ¹æ®IPæ ‡å¤´çš„åºå·ï¼ŒGoogle å°†å››ä¸ªåŒ…æ‹¼èµ·æ¥ï¼Œå–å‡ºå®Œæ•´çš„ TCP æ•°æ®åŒ…ï¼Œç„¶åè¯»å‡ºé‡Œé¢çš„â€œHTTPè¯·æ±‚â€ï¼Œæ¥ç€åšå‡ºâ€œHTTPå“åº”â€ï¼Œå†ç”¨ TCP åè®®å‘å›æ¥ã€‚</p>
<p>æœ¬æœºæ”¶åˆ° HTTP å“åº”ä»¥åï¼Œå°±å¯ä»¥å°†ç½‘é¡µæ˜¾ç¤ºå‡ºæ¥ï¼Œå®Œæˆä¸€æ¬¡ç½‘ç»œé€šä¿¡ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/9935c287faa04dd1aa107864273e8a27.png" title="æœåŠ¡å™¨ç›¸åº”" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220329/9935c287faa04dd1aa107864273e8a27.png" data-sub-html="<h2>æœåŠ¡å™¨ç›¸åº”</h2><p>æœåŠ¡å™¨ç›¸åº”</p>">
        
    </a><figcaption class="image-caption">æœåŠ¡å™¨ç›¸åº”</figcaption>
    </figure></p>
<p>ä¸Šé¢çš„ä¾‹å­ï¼Œè™½ç„¶ç»è¿‡äº†ç®€åŒ–ï¼Œä½†å®ƒå¤§è‡´ä¸Šåæ˜ äº†äº’è”ç½‘åè®®çš„æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ã€‚</p>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html" target="_blank" rel="noopener noreferrer">äº’è”ç½‘åè®®å…¥é—¨</a></li>
</ul>
]]></description>
</item><item>
    <title>OAuth2.0çš„ç†è§£ä¸åº”ç”¨</title>
    <link>https://www.xiaobinqt.cn/oauth2.0/</link>
    <pubDate>Tue, 22 Mar 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/oauth2.0/</guid>
    <description><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯-oauth20" class="headerLink">
    <a href="#%e4%bb%80%e4%b9%88%e6%98%af-oauth20" class="header-mark"></a>ä»€ä¹ˆæ˜¯ OAuth2.0</h2><p><strong>OAuth çš„æ ¸å¿ƒå°±æ˜¯å‘ç¬¬ä¸‰æ–¹åº”ç”¨é¢å‘ä»¤ç‰Œ</strong>ï¼Œæ¯”å¦‚ç½‘ç«™Aæƒ³ç”¨Githubçš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå¯¹äºGithubæ¥è¯´ï¼Œç½‘ç«™Aå°±æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚</p>
<p>ç¬¬ä¸‰æ–¹åº”ç”¨ç”³è¯·ä»¤ç‰Œä¹‹å‰ï¼Œéƒ½å¿…é¡»å…ˆåˆ°ç³»ç»Ÿå¤‡æ¡ˆï¼Œæ¯”å¦‚ç”³è¯·Githubçš„ä»¤ç‰Œï¼Œå¾—å…ˆåˆ°<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener noreferrer">githubå¤‡æ¡ˆç™»è®°</a>ï¼Œ è¯´æ˜è‡ªå·±çš„èº«ä»½ï¼Œç„¶åä¼šæ‹¿åˆ°ä¸¤ä¸ªèº«ä»½è¯†åˆ«ç ï¼šå®¢æˆ·ç«¯ IDï¼ˆclient IDï¼‰å’Œå®¢æˆ·ç«¯å¯†é’¥ï¼ˆclient secretï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ä»¤ç‰Œè¢«æ»¥ç”¨ï¼Œæ²¡æœ‰å¤‡æ¡ˆè¿‡çš„ç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œæ˜¯ä¸ä¼šæ‹¿åˆ°ä»¤ç‰Œçš„ã€‚</p>
<p>å…³äº OAuth2.0 æ˜¯ä»€ä¹ˆå¯ä»¥å‚è€ƒä¸€ä¸‹æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://www.ruanyifeng.com/blog/2019/04/oauth_design.html" target="_blank" rel="noopener noreferrer">OAuth 2.0 çš„ä¸€ä¸ªç®€å•è§£é‡Š</a></li>
<li><a href="https://learnku.com/articles/20082" target="_blank" rel="noopener noreferrer">[ç®€æ˜“å›¾è§£]ã€ OAuth2.0ã€ ã€è¿›é˜¶ã€ æˆæƒæ¨¡å¼æ€»ç»“</a></li>
</ul>
<h2 id="ç¬¬ä¸‰æ–¹ç™»å½•github" class="headerLink">
    <a href="#%e7%ac%ac%e4%b8%89%e6%96%b9%e7%99%bb%e5%bd%95github" class="header-mark"></a>ç¬¬ä¸‰æ–¹ç™»å½•Github</h2><p>æ‰€è°“ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œå®è´¨å°±æ˜¯ OAuth æˆæƒã€‚ç”¨æˆ·æƒ³è¦ç™»å½• A ç½‘ç«™ï¼ŒA ç½‘ç«™è®©ç”¨æˆ·æä¾›ç¬¬ä¸‰æ–¹ç½‘ç«™çš„æ•°æ®ï¼Œè¯æ˜è‡ªå·±çš„èº«ä»½ã€‚è·å–ç¬¬ä¸‰æ–¹ç½‘ç«™çš„èº«ä»½æ•°æ®ï¼Œå°±éœ€è¦ OAuth æˆæƒã€‚</p>
<p>æ¯”å¦‚ï¼ŒA ç½‘ç«™å…è®¸ GitHub ç™»å½•ï¼ŒèƒŒåå°±æ˜¯ä¸‹é¢çš„æµç¨‹ï¼š</p>
<ol>
<li>A ç½‘ç«™è®©ç”¨æˆ·è·³è½¬åˆ° GitHubã€‚</li>
<li>GitHub è¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œç„¶åè¯¢é—®&quot;A ç½‘ç«™è¦æ±‚è·å¾— xx æƒé™ï¼Œä½ æ˜¯å¦åŒæ„ï¼Ÿ&quot;</li>
<li>ç”¨æˆ·åŒæ„ï¼ŒGitHub å°±ä¼šé‡å®šå‘å› A ç½‘ç«™ï¼ŒåŒæ—¶å‘å›ä¸€ä¸ªæˆæƒç ã€‚</li>
<li>A ç½‘ç«™ä½¿ç”¨æˆæƒç ï¼Œå‘ GitHub è¯·æ±‚ä»¤ç‰Œã€‚</li>
<li>GitHub è¿”å›ä»¤ç‰Œ.</li>
<li>A ç½‘ç«™ä½¿ç”¨ä»¤ç‰Œï¼Œå‘ GitHub è¯·æ±‚ç”¨æˆ·æ•°æ®ã€‚</li>
</ol>
<h3 id="æ³¨å†Œ-oauth-åº”ç”¨" class="headerLink">
    <a href="#%e6%b3%a8%e5%86%8c-oauth-%e5%ba%94%e7%94%a8" class="header-mark"></a>æ³¨å†Œ OAuth åº”ç”¨</h3><p>ç°åœ¨åœ¨ Github ä¸Š<a href="https://github.com/settings/applications/new" target="_blank" rel="noopener noreferrer">æ³¨å†Œ</a>ä¸€ä¸ª OAuth åº”ç”¨ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/0db45fb787184c9e8321202da1758937.png?imageView2/0/interlace/1/q/50%7cimageslim" title="githubæ³¨å†Œoauthåº”ç”¨" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/0db45fb787184c9e8321202da1758937.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2> </h2><p>githubæ³¨å†Œoauthåº”ç”¨</p>">
        
    </a><figcaption class="image-caption"> </figcaption>
    </figure></p>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>Application name</td>
<td>åº”ç”¨åç§°</td>
</tr>
<tr>
<td>Homepage URL</td>
<td>é¦–é¡µURLï¼Œå¦‚<code>https://www.xiaobinqt.cn</code></td>
</tr>
<tr>
<td>Authorization callback URL</td>
<td>ç”¨æˆ·åœ¨ Github ç™»å½•æˆåŠŸåé‡å®šå‘å›çš„ URL</td>
</tr>
</tbody>
</table>
<p>æ³¨å†ŒæˆåŠŸåä¼šç”Ÿæˆ <code>Client ID</code> å’Œ <code>Client Secret</code>ï¼Œè¿™ä¸¤ä¸ªæ˜¯ç”¨æ¥è¯·æ±‚ä»¤ç‰Œçš„ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/0c69a51ee31842b5979dce762e7dfede.png?imageView2/0/interlace/1/q/50%7cimageslim" title="ç”Ÿæˆçš„Clientä¿¡æ¯" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/0c69a51ee31842b5979dce762e7dfede.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2> </h2><p>ç”Ÿæˆçš„Clientä¿¡æ¯</p>">
        
    </a><figcaption class="image-caption"> </figcaption>
    </figure></p>
<h3 id="é€šè¿‡-oauth-è·å–ç”¨æˆ·ä¿¡æ¯" class="headerLink">
    <a href="#%e9%80%9a%e8%bf%87-oauth-%e8%8e%b7%e5%8f%96%e7%94%a8%e6%88%b7%e4%bf%a1%e6%81%af" class="header-mark"></a>é€šè¿‡ OAuth è·å–ç”¨æˆ·ä¿¡æ¯</h3><p>å‰ç«¯ç•Œé¢ oauth.html</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#34;en&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">&#34;UTF-8&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Title<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">a</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;https://github.com/login/oauth/authorize?client_id={{.ClientId}}&amp;redirect_uri={{.RedirectUrl}}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    Github ç¬¬ä¸‰æ–¹æˆæƒç™»å½•<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>go ä»£ç é€šè¿‡OAuthè·å–ç”¨æˆ·ä¿¡æ¯</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;flag&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;html/template&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;io/ioutil&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;log&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;net/http&#34;</span>
</span></span><span class="line"><span class="cl">	<span class="s">&#34;os&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">	<span class="nx">clientSecret</span> <span class="p">=</span> <span class="nx">flag</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="s">&#34;cs&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;github oauth client secret&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">clientID</span>     <span class="p">=</span> <span class="nx">flag</span><span class="p">.</span><span class="nf">String</span><span class="p">(</span><span class="s">&#34;ci&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">,</span> <span class="s">&#34;github oauth client id&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Conf</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">ClientId</span>     <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">ClientSecret</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">	<span class="nx">RedirectUrl</span>  <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Token</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">AccessToken</span> <span class="kt">string</span> <span class="s">`json:&#34;access_token&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è®¤è¯å¹¶è·å–ç”¨æˆ·ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">OAuth</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="nx">err</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// è·å– code
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">code</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nf">Query</span><span class="p">().</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;code&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// é€šè¿‡ code, è·å– token
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">tokenAuthUrl</span> <span class="p">=</span> <span class="nf">GetTokenAuthURL</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">token</span> <span class="o">*</span><span class="nx">Token</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">token</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nf">GetToken</span><span class="p">(</span><span class="nx">tokenAuthUrl</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// é€šè¿‡tokenï¼Œè·å–ç”¨æˆ·ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">userInfo</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">userInfo</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nf">GetUserInfo</span><span class="p">(</span><span class="nx">token</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//  å°†ç”¨æˆ·ä¿¡æ¯è¿”å›å‰ç«¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">userInfoBytes</span> <span class="p">[]</span><span class="kt">byte</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">userInfoBytes</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">userInfo</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;åœ¨å°†ç”¨æˆ·ä¿¡æ¯(map)è½¬ä¸ºç”¨æˆ·ä¿¡æ¯([]byte)æ—¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">w</span><span class="p">.</span><span class="nf">Header</span><span class="p">().</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s">&#34;application/json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">w</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">userInfoBytes</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;åœ¨å°†ç”¨æˆ·ä¿¡æ¯([]byte)è¿”å›å‰ç«¯æ—¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// é€šè¿‡codeè·å–tokenè®¤è¯url
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetTokenAuthURL</span><span class="p">(</span><span class="nx">code</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">string</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="s">&#34;https://github.com/login/oauth/access_token?client_id=%s&amp;client_secret=%s&amp;code=%s&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="o">*</span><span class="nx">clientID</span><span class="p">,</span> <span class="o">*</span><span class="nx">clientSecret</span><span class="p">,</span> <span class="nx">code</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è·å– token
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetToken</span><span class="p">(</span><span class="nx">url</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="o">*</span><span class="nx">Token</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// å½¢æˆè¯·æ±‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">err</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewRequest</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">MethodGet</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">nil</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">req</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;accept&#34;</span><span class="p">,</span> <span class="s">&#34;application/json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// å‘é€è¯·æ±‚å¹¶è·å¾—å“åº”
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="nx">httpClient</span> <span class="p">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Client</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">		<span class="nx">res</span>        <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Response</span>
</span></span><span class="line"><span class="cl">		<span class="nx">respBody</span>   <span class="p">=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="nx">token</span>      <span class="nx">Token</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">httpClient</span><span class="p">.</span><span class="nf">Do</span><span class="p">(</span><span class="nx">req</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">respBody</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">ioutil</span><span class="p">.</span><span class="nf">ReadAll</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">Body</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;token: %s&#34;</span><span class="p">,</span> <span class="nb">string</span><span class="p">(</span><span class="nx">respBody</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// å°†å“åº”ä½“è§£æä¸º tokenï¼Œå¹¶è¿”å›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="nx">err</span> <span class="p">=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">(</span><span class="nx">respBody</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">token</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="o">&amp;</span><span class="nx">token</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è·å–ç”¨æˆ·ä¿¡æ¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="nf">GetUserInfo</span><span class="p">(</span><span class="nx">token</span> <span class="o">*</span><span class="nx">Token</span><span class="p">)</span> <span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{},</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// å½¢æˆè¯·æ±‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">userInfoUrl</span> <span class="p">=</span> <span class="s">&#34;https://api.github.com/user&#34;</span> <span class="c1">// githubç”¨æˆ·ä¿¡æ¯è·å–æ¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">req</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">err</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">req</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">NewRequest</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">MethodGet</span><span class="p">,</span> <span class="nx">userInfoUrl</span><span class="p">,</span> <span class="kc">nil</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">req</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;accept&#34;</span><span class="p">,</span> <span class="s">&#34;application/json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">req</span><span class="p">.</span><span class="nx">Header</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;Authorization&#34;</span><span class="p">,</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;token %s&#34;</span><span class="p">,</span> <span class="nx">token</span><span class="p">.</span><span class="nx">AccessToken</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// å‘é€è¯·æ±‚å¹¶è·å–å“åº”
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">client</span> <span class="p">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">Client</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">res</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Response</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">res</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">Do</span><span class="p">(</span><span class="nx">req</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// å°†å“åº”çš„æ•°æ®å†™å…¥ userInfo ä¸­ï¼Œå¹¶è¿”å›
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">userInfo</span> <span class="p">=</span> <span class="nb">make</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{})</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">NewDecoder</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">Body</span><span class="p">).</span><span class="nf">Decode</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">userInfo</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="kc">nil</span><span class="p">,</span> <span class="nx">err</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">userInfo</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Html</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="c1">// è§£ææŒ‡å®šæ–‡ä»¶ç”Ÿæˆæ¨¡æ¿å¯¹è±¡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="nx">temp</span> <span class="o">*</span><span class="nx">template</span><span class="p">.</span><span class="nx">Template</span>
</span></span><span class="line"><span class="cl">		<span class="nx">err</span>  <span class="kt">error</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">dir</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">os</span><span class="p">.</span><span class="nf">Getwd</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">temp</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">template</span><span class="p">.</span><span class="nf">ParseFiles</span><span class="p">(</span><span class="nx">dir</span> <span class="o">+</span> <span class="s">&#34;/oauth.html&#34;</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è¯»å–æ–‡ä»¶å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">// åˆ©ç”¨ç»™å®šæ•°æ®æ¸²æŸ“æ¨¡æ¿(htmlé¡µé¢)ï¼Œå¹¶å°†ç»“æœå†™å…¥wï¼Œè¿”å›ç»™å‰ç«¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="k">if</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">temp</span><span class="p">.</span><span class="nf">Execute</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">Conf</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ClientId</span><span class="p">:</span>     <span class="o">*</span><span class="nx">clientID</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">ClientSecret</span><span class="p">:</span> <span class="o">*</span><span class="nx">clientSecret</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">		<span class="nx">RedirectUrl</span><span class="p">:</span>  <span class="s">&#34;http://127.0.0.1:9000/oauth/callback&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">	<span class="p">});</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è¯»å–æ¸²æŸ“htmlé¡µé¢å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">UserInfo</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">r</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">token</span> <span class="o">:=</span> <span class="nx">r</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nf">Query</span><span class="p">().</span><span class="nf">Get</span><span class="p">(</span><span class="s">&#34;token&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;UserInfo token: %s&#34;</span><span class="p">,</span> <span class="nx">token</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">		<span class="nx">err</span>      <span class="kt">error</span>
</span></span><span class="line"><span class="cl">		<span class="nx">userInfo</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">	<span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">userInfo</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nf">GetUserInfo</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">Token</span><span class="p">{</span><span class="nx">AccessToken</span><span class="p">:</span> <span class="nx">token</span><span class="p">});</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="c1">//  å°†ç”¨æˆ·ä¿¡æ¯è¿”å›å‰ç«¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>	<span class="kd">var</span> <span class="nx">userInfoBytes</span> <span class="p">[]</span><span class="kt">byte</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">userInfoBytes</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Marshal</span><span class="p">(</span><span class="nx">userInfo</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;åœ¨å°†ç”¨æˆ·ä¿¡æ¯(map)è½¬ä¸ºç”¨æˆ·ä¿¡æ¯([]byte)æ—¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">	<span class="nx">w</span><span class="p">.</span><span class="nf">Header</span><span class="p">().</span><span class="nf">Set</span><span class="p">(</span><span class="s">&#34;Content-Type&#34;</span><span class="p">,</span> <span class="s">&#34;application/json&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">w</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="nx">userInfoBytes</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;åœ¨å°†ç”¨æˆ·ä¿¡æ¯([]byte)è¿”å›å‰ç«¯æ—¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">flag</span><span class="p">.</span><span class="nf">Parse</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">	<span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;clientSecrets: %s,clientID: %s&#34;</span><span class="p">,</span> <span class="o">*</span><span class="nx">clientSecret</span><span class="p">,</span> <span class="o">*</span><span class="nx">clientID</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="o">*</span><span class="nx">clientSecret</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="o">||</span> <span class="o">*</span><span class="nx">clientID</span> <span class="o">==</span> <span class="s">&#34;&#34;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">log</span><span class="p">.</span><span class="nf">Fatal</span><span class="p">(</span><span class="s">&#34;clientSecrets or clientID is required&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/&#34;</span><span class="p">,</span> <span class="nx">Html</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/oauth/callback&#34;</span><span class="p">,</span> <span class="nx">OAuth</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="nx">http</span><span class="p">.</span><span class="nf">HandleFunc</span><span class="p">(</span><span class="s">&#34;/getUserInfo&#34;</span><span class="p">,</span> <span class="nx">UserInfo</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">http</span><span class="p">.</span><span class="nf">ListenAndServe</span><span class="p">(</span><span class="s">&#34;:9000&#34;</span><span class="p">,</span> <span class="kc">nil</span><span class="p">);</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;ç›‘å¬å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‰§è¡Œè„šæœ¬ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"> go run main.go -ci<span class="o">=</span><span class="nv">$CLIENT_ID</span> -cs<span class="o">=</span><span class="nv">$CLIENT_SECRET</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>github è¿”å›çš„tokenæ ¼å¼ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;access_token&#34;</span><span class="p">:</span> <span class="s2">&#34;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&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;token_type&#34;</span><span class="p">:</span> <span class="s2">&#34;bearer&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scope&#34;</span><span class="p">:</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="æ•ˆæœ" class="headerLink">
    <a href="#%e6%95%88%e6%9e%9c" class="header-mark"></a>æ•ˆæœ</h2><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/bfadd1f3ff8e43409b50985f99bc23ea.png?imageView2/0/interlace/1/q/50%7cimageslim" title="å‰ç«¯ç•Œé¢" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/bfadd1f3ff8e43409b50985f99bc23ea.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2>å‰ç«¯ç•Œé¢</h2><p>å‰ç«¯ç•Œé¢</p>">
        
    </a><figcaption class="image-caption">å‰ç«¯ç•Œé¢</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/9bd65bc08fdc4c899d4b0def1ecdc2da.png?imageView2/0/interlace/1/q/50%7cimageslim" title="æˆæƒé¡µé¢" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/9bd65bc08fdc4c899d4b0def1ecdc2da.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2>æˆæƒé¡µé¢</h2><p>æˆæƒé¡µé¢</p>">
        
    </a><figcaption class="image-caption">æˆæƒé¡µé¢</figcaption>
    </figure></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/895795367370407592caa400eba1b3a0.png?imageView2/0/interlace/1/q/50%7cimageslim" title="githubè¿”å›çš„ç”¨æˆ·ä¿¡æ¯" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220322/895795367370407592caa400eba1b3a0.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2>githubè¿”å›çš„ç”¨æˆ·ä¿¡æ¯</h2><p>githubè¿”å›çš„ç”¨æˆ·ä¿¡æ¯</p>">
        
    </a><figcaption class="image-caption">githubè¿”å›çš„ç”¨æˆ·ä¿¡æ¯</figcaption>
    </figure></p>
<h2 id="æºç " class="headerLink">
    <a href="#%e6%ba%90%e7%a0%81" class="header-mark"></a>æºç </h2><p><a href="https://github.com/xiaobinqt/go.src/tree/master/dev/github.oauth" target="_blank" rel="noopener noreferrer">æºç åœ°å€</a></p>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://docs.github.com/en/developers/apps/building-oauth-apps/creating-an-oauth-app" target="_blank" rel="noopener noreferrer">Building OAuth Apps</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2019/04/oauth_design.html" target="_blank" rel="noopener noreferrer">OAuth 2.0 çš„ä¸€ä¸ªç®€å•è§£é‡Š</a></li>
<li><a href="https://blog.csdn.net/qq_19018277/article/details/104935403" target="_blank" rel="noopener noreferrer">Goè¯­è¨€å®ç°ç¬¬ä¸‰æ–¹ç™»å½•Github (é€šè¿‡OAuth2.0)</a></li>
<li><a href="https://docs.github.com/en/rest/guides/basics-of-authentication" target="_blank" rel="noopener noreferrer">basics of authentication</a></li>
<li><a href="https://learnku.com/articles/20082" target="_blank" rel="noopener noreferrer">[ç®€æ˜“å›¾è§£]ã€ OAuth2.0ã€ ã€è¿›é˜¶ã€ æˆæƒæ¨¡å¼æ€»ç»“</a></li>
</ul>
]]></description>
</item><item>
    <title>httpå…¥é—¨ç¬”è®°</title>
    <link>https://www.xiaobinqt.cn/http-glance/</link>
    <pubDate>Thu, 17 Mar 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/http-glance/</guid>
    <description><![CDATA[<p>è¯¥ç¬”è®°æ˜¯åœ¨å­¦ä¹ ã€Šé€è§† HTTP åè®®ã€‹æ—¶æ•´ç†ï¼Œè¿˜å‚è€ƒäº†ç½‘ä¸Šçš„å…¶ä»–èµ„æ–™ã€‚é„™äººåªæ˜¯ç½‘ç»œä¸–ç•Œçš„æ¬è¿æ•´ç†å·¥ğŸ˜‚ã€‚</p>
<h2 id="æ€»è§ˆ" class="headerLink">
    <a href="#%e6%80%bb%e8%a7%88" class="header-mark"></a>æ€»è§ˆ</h2><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/6935d109cbc64fa58c3177a90fd33098.png?imageView2/0/interlace/1/q/50%7cimageslim" title="httpæ€»è§ˆ" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/6935d109cbc64fa58c3177a90fd33098.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2> </h2><p>httpæ€»è§ˆ</p>">
        
    </a><figcaption class="image-caption"> </figcaption>
    </figure></p>
<h2 id="http-åè®®" class="headerLink">
    <a href="#http-%e5%8d%8f%e8%ae%ae" class="header-mark"></a>http åè®®</h2><p>httpï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ä¸€ä¸ªç”¨åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œçš„åè®®ã€‚å®ƒä½¿ç”¨è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„è¯­è¨€ç¡®ç«‹äº†ä¸€ç§è®¡ç®—æœºä¹‹é—´äº¤æµé€šä¿¡çš„è§„èŒƒï¼Œä»¥åŠç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹å¼ã€‚</p>
<p>http æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒã€‚</p>
<p>http ä¸æ˜¯ç¼–ç¨‹è¯­è¨€ï¼Œä½†æ˜¯å¯ä»¥ç”¨ç¼–ç¨‹è¯­è¨€å»å®ç° HTTPï¼Œå‘Šè¯‰è®¡ç®—æœºå¦‚ä½•ç”¨ HTTP æ¥ä¸å¤–ç•Œé€šä¿¡ã€‚</p>
<p>åœ¨äº’è”ç½‘ä¸–ç•Œé‡Œï¼ŒHTTP é€šå¸¸è·‘åœ¨ TCP/IP åè®®æ ˆä¹‹ä¸Šï¼Œä¾é  IP åè®®å®ç°å¯»å€å’Œè·¯ç”±ã€TCP åè®®å®ç°å¯é æ•°æ®ä¼ è¾“ã€DNS åè®®å®ç°åŸŸåæŸ¥æ‰¾ã€SSL/TLS åè®®å®ç°å®‰å…¨é€šä¿¡ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›åè®®ä¾èµ–äº HTTPï¼Œä¾‹å¦‚ WebSocketã€HTTPDNS ç­‰ã€‚è¿™äº›åè®®ç›¸äº’äº¤ç»‡ï¼Œæ„æˆäº†ä¸€ä¸ªåè®®ç½‘ï¼Œè€Œ HTTP åˆ™å¤„äºä¸­å¿ƒåœ°ä½ã€‚</p>
<blockquote>
<p>HTTP ä¼ è¾“çš„ä¸æ˜¯ TCP/UDP è¿™äº›åº•å±‚åè®®é‡Œè¢«åˆ‡åˆ†çš„æ‚ä¹±æ— ç« çš„äºŒè¿›åˆ¶åŒ…ï¼ˆdatagramï¼‰ï¼Œè€Œæ˜¯å®Œæ•´çš„ã€æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¯ä»¥è¢«æµè§ˆå™¨ã€æœåŠ¡å™¨è¿™æ ·çš„ä¸Šå±‚åº”ç”¨ç¨‹åºå¤„ç†ã€‚</p>
</blockquote>
<h3 id="äº’è”ç½‘å’Œä¸‡ç»´ç½‘çš„åŒºåˆ«" class="headerLink">
    <a href="#%e4%ba%92%e8%81%94%e7%bd%91%e5%92%8c%e4%b8%87%e7%bb%b4%e7%bd%91%e7%9a%84%e5%8c%ba%e5%88%ab" class="header-mark"></a>äº’è”ç½‘å’Œä¸‡ç»´ç½‘çš„åŒºåˆ«</h3><p>æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„â€œä¸Šç½‘â€å®é™…ä¸Šè®¿é—®çš„åªæ˜¯äº’è”ç½‘çš„ä¸€ä¸ªå­é›†â€œä¸‡ç»´ç½‘â€ï¼ˆWorld Wide Webï¼‰ï¼Œå®ƒåŸºäº HTTP åè®®ï¼Œä¼ è¾“ HTML ç­‰è¶…æ–‡æœ¬èµ„æºï¼Œèƒ½åŠ›è¢«é™åˆ¶åœ¨ HTTP åè®®ä¹‹å†…ã€‚</p>
<p>äº’è”ç½‘ä¸Šè¿˜æœ‰è®¸å¤šä¸‡ç»´ç½‘ä¹‹å¤–çš„èµ„æºï¼Œä¾‹å¦‚å¸¸ç”¨çš„ç”µå­é‚®ä»¶ã€BT å’Œ Magnet ç‚¹å¯¹ç‚¹ä¸‹è½½ã€FTP æ–‡ä»¶ä¸‹è½½ã€SSH å®‰å…¨ç™»å½•ã€å„ç§å³æ—¶é€šä¿¡æœåŠ¡ç­‰ç­‰ï¼Œå®ƒä»¬éœ€è¦ç”¨å„è‡ªçš„ä¸“æœ‰åè®®æ¥è®¿é—®ã€‚</p>
<p>ä¸è¿‡ç”±äº HTTP åè®®éå¸¸çµæ´»ã€æ˜“äºæ‰©å±•ï¼Œè€Œä¸”â€œè¶…æ–‡æœ¬â€çš„è¡¨è¿°èƒ½åŠ›å¾ˆå¼ºï¼Œæ‰€ä»¥å¾ˆå¤šå…¶ä»–åŸæœ¬ä¸å±äº HTTP çš„èµ„æºä¹Ÿå¯ä»¥â€œåŒ…è£…â€æˆ HTTP æ¥è®¿é—®ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆèƒ½å¤Ÿæ€»çœ‹åˆ°å„ç§â€œç½‘é¡µåº”ç”¨â€â€”â€”ä¾‹å¦‚â€œå¾®ä¿¡ç½‘é¡µç‰ˆâ€â€œé‚®ç®±ç½‘é¡µç‰ˆâ€â€”â€”çš„åŸå› ã€‚</p>
<h3 id="tcpip" class="headerLink">
    <a href="#tcpip" class="header-mark"></a>TCP/IP</h3><p>TCP/IP åè®®å®é™…ä¸Šæ˜¯ä¸€ç³»åˆ—ç½‘ç»œé€šä¿¡åè®®çš„ç»Ÿç§°ï¼Œ å…¶ä¸­æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªåè®®æ˜¯TCPï¼ˆTransmission Control Protocol/ä¼ è¾“æ§åˆ¶åè®®ï¼‰å’ŒIPï¼ˆInternet Protocolï¼‰ï¼Œå…¶ä»–çš„è¿˜æœ‰ UDPã€ICMPã€ARP ç­‰ç­‰ï¼Œå…±åŒæ„æˆäº†ä¸€ä¸ªå¤æ‚ä½†æœ‰å±‚æ¬¡çš„åè®®æ ˆã€‚</p>
<blockquote>
<p>HTTP æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ŒTCP æ˜¯ä¼ è¾“æ§åˆ¶åè®®ï¼Œéƒ½æ˜¯ä¼ è¾“ï¼ŒåŒºåˆ«æ˜¯ï¼ŒHTTP ä¼ è¾“çš„æ˜¯å®Œæ•´çš„ã€æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¯ä»¥è¢«æµè§ˆå™¨ã€
æœåŠ¡å™¨è¿™æ ·çš„ä¸Šå±‚åº”ç”¨ç¨‹åºå¤„ç†ï¼ŒHTTP ä¸å…³å¿ƒå¯»å€ã€è·¯ç”±ã€æ•°æ®å®Œæ•´æ€§ç­‰ä¼ è¾“ç»†èŠ‚ï¼Œè€Œè¦æ±‚è¿™äº›å·¥ä½œéƒ½ç”±ä¸‹å±‚ï¼ˆåŸºæœ¬éƒ½ç”± TCPï¼‰æ¥å¤„ç†ã€‚ TCP ä¼ è¾“çš„æ˜¯å¯é çš„ã€å­—èŠ‚æµå’ŒäºŒè¿›åˆ¶åŒ…ã€‚</p>
</blockquote>
<p>TCP æ˜¯ HTTP å¾—ä»¥å®ç°çš„åŸºç¡€ï¼ŒHTTP åè®®è¿è¡Œåœ¨ TCP/IP ä¸Šï¼ŒHTTP å¯ä»¥æ›´å‡†ç¡®åœ°ç§°ä¸º â€œHTTP over TCP/IPâ€ã€‚</p>
<h3 id="uriurl" class="headerLink">
    <a href="#uriurl" class="header-mark"></a>URI/URL</h3><p>URIï¼ˆUniform Resource Identifierï¼‰ï¼Œä¸­æ–‡åç§°æ˜¯ ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œä½¿ç”¨å®ƒå°±èƒ½å¤Ÿå”¯ä¸€åœ°æ ‡è®°äº’è”ç½‘ä¸Šèµ„æºã€‚</p>
<p>URI å¦ä¸€ä¸ªæ›´å¸¸ç”¨çš„è¡¨ç°å½¢å¼æ˜¯ URLï¼ˆUniform Resource Locatorï¼‰ï¼Œ ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„â€œç½‘å€â€ï¼Œå®ƒå®é™…ä¸Šæ˜¯ URI çš„ä¸€ä¸ªå­é›†ï¼Œè¿™ä¸¤è€…å‡ ä¹æ˜¯ç›¸åŒçš„ï¼Œå·®å¼‚ä¸å¤§ï¼Œé™¤éå†™è®ºæ–‡ï¼Œå¦åˆ™ä¸ç”¨ç‰¹æ„åŒºåˆ†ã€‚</p>
<h3 id="ssltsl" class="headerLink">
    <a href="#ssltsl" class="header-mark"></a>SSL/TSL</h3><p>SSL çš„å…¨ç§°æ˜¯â€œSecure Socket Layerâ€ï¼Œç½‘æ™¯å…¬å¸å‘æ˜ï¼Œå½“å‘å±•åˆ° 3.0 æ—¶è¢«æ ‡å‡†åŒ–ï¼Œæ”¹åä¸º TLSï¼Œå³â€œTransport Layer Securityâ€ã€‚ æ‰€ä»¥ TLS è·Ÿ SSL æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œç›¸å½“äºå¼ å›å®çš„ 2.0 ç‰ˆæœ¬æ˜¯å¼ ä¸‰ä¸°ã€‚</p>
<p>SSL æ˜¯ä¸€ä¸ªè´Ÿè´£åŠ å¯†é€šä¿¡çš„å®‰å…¨åè®®ï¼Œå»ºç«‹åœ¨ TCP/IP ä¹‹ä¸Šï¼Œåœ¨ HTTP åè®®ä¹‹ä¸‹ã€‚</p>
<h3 id="proxy-ä»£ç†" class="headerLink">
    <a href="#proxy-%e4%bb%a3%e7%90%86" class="header-mark"></a>proxy ä»£ç†</h3><ul>
<li>åŒ¿åä»£ç†ï¼šå®Œå…¨â€œéšåŒ¿â€äº†è¢«ä»£ç†çš„æœºå™¨ï¼Œå¤–ç•Œçœ‹åˆ°çš„åªæ˜¯ä»£ç†æœåŠ¡å™¨ï¼›</li>
<li>é€æ˜ä»£ç†ï¼šé¡¾åæ€ä¹‰ï¼Œå®ƒåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯â€œé€æ˜å¼€æ”¾â€çš„ï¼Œå¤–ç•Œæ—¢çŸ¥é“ä»£ç†ï¼Œä¹ŸçŸ¥é“å®¢æˆ·ç«¯ï¼›</li>
<li>æ­£å‘ä»£ç†ï¼šé è¿‘å®¢æˆ·ç«¯ï¼Œä»£ç†çš„å¯¹è±¡æ˜¯å®¢æˆ·ç«¯ï¼Œä»£è¡¨å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼›</li>
</ul>
<p>æ­£å‘ä»£ç†æ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯å’ŒåŸå§‹æœåŠ¡å™¨ï¼ˆorigin serverï¼‰ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨å–å¾—å†…å®¹ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶æŒ‡å®šç›®æ ‡ï¼ˆåŸå§‹æœåŠ¡å™¨ï¼Œæ¯”å¦‚ Googleï¼‰ï¼Œç„¶åä»£ç†å‘åŸå§‹æœåŠ¡å™¨è½¬äº¤è¯·æ±‚å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/22475408cd734b9c861b345040e356f4.png?imageView2/0/interlace/1/q/50%7cimageslim" title="æ­£å‘ä»£ç†" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/22475408cd734b9c861b345040e356f4.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2>æ­£å‘ä»£ç†</h2><p>æ­£å‘ä»£ç†</p>">
        
    </a><figcaption class="image-caption">æ­£å‘ä»£ç†</figcaption>
    </figure></p>
<ul>
<li>åå‘ä»£ç†ï¼šé è¿‘æœåŠ¡å™¨ç«¯ï¼Œä»£ç†ä»£ç†çš„å¯¹è±¡æ˜¯æœåŠ¡ç«¯ï¼Œä»£è¡¨æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚</li>
</ul>
<p>åå‘ä»£ç†æŒ‡çš„æ˜¯ä»£ç†æœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä»å…¶å…³ç³»çš„ä¸€ç»„æˆ–å¤šç»„åç«¯æœåŠ¡å™¨ï¼ˆå¦‚ Web æœåŠ¡å™¨ï¼‰ä¸Šè·å–èµ„æºï¼Œç„¶åå†å°†è¿™äº›èµ„æºè¿”å›ç»™å®¢æˆ·ç«¯çš„è¿‡ç¨‹ï¼Œå®¢æˆ·ç«¯åªä¼šå¾—çŸ¥ä»£ç†æœåŠ¡å™¨çš„ IP åœ°å€ï¼Œè€Œä¸çŸ¥é“åœ¨ä»£ç†æœåŠ¡å™¨åé¢çš„æœåŠ¡å™¨é›†ç¾¤çš„å­˜åœ¨ã€‚</p>
<p>å½“ä¸€ä¸ªä»£ç†æœåŠ¡å™¨èƒ½å¤Ÿä»£ç†å¤–éƒ¨ç½‘ç»œä¸Šçš„ä¸»æœºï¼Œè®¿é—®å†…éƒ¨ç½‘ç»œæ—¶ï¼Œè¿™ç§ä»£ç†æœåŠ¡çš„æ–¹å¼ç§°ä¸ºåå‘ä»£ç†æœåŠ¡ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/6a2b4d26c0bf43cd9494df793c48a814.png?imageView2/0/interlace/1/q/50%7cimageslim" title="åå‘ä»£ç†" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/6a2b4d26c0bf43cd9494df793c48a814.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2>åå‘ä»£ç†</h2><p>åå‘ä»£ç†</p>">
        
    </a><figcaption class="image-caption">åå‘ä»£ç†</figcaption>
    </figure></p>
<h2 id="http-ç‰ˆæœ¬" class="headerLink">
    <a href="#http-%e7%89%88%e6%9c%ac" class="header-mark"></a>http ç‰ˆæœ¬</h2><p>ä¸‡ç»´ç½‘å…³é”®æŠ€æœ¯</p>
<ul>
<li>URIï¼šå³ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œä½œä¸ºäº’è”ç½‘ä¸Šèµ„æºçš„å”¯ä¸€èº«ä»½ï¼›</li>
<li>HTMLï¼šå³è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œæè¿°è¶…æ–‡æœ¬æ–‡æ¡£ï¼›</li>
<li>HTTPï¼šå³è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œç”¨æ¥ä¼ è¾“è¶…æ–‡æœ¬ã€‚</li>
</ul>
<p>åŸºäºè¿™ä¸‰é¡¹å…³é”®æŠ€æœ¯å°±å¯ä»¥æŠŠè¶…æ–‡æœ¬ç³»ç»Ÿå®Œç¾åœ°è¿è¡Œåœ¨äº’è”ç½‘ä¸Šï¼Œè®©å„åœ°çš„äººä»¬èƒ½å¤Ÿè‡ªç”±åœ°å…±äº«ä¿¡æ¯ï¼Œè¿™ä¸ªç³»ç»Ÿç§°ä¸ºâ€œä¸‡ç»´ç½‘â€ï¼ˆWorld Wide Webï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨æ‰€ç†ŸçŸ¥çš„ Webã€‚</p>
<h3 id="http09" class="headerLink">
    <a href="#http09" class="header-mark"></a>http/0.9</h3><p>ç»“æ„ç®€å•ï¼Œè®¾ç½®ä¹‹åˆè®¾æƒ³ç³»ç»Ÿé‡Œçš„æ–‡æ¡£éƒ½æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥åªå…è®¸ç”¨ GET åŠ¨ä½œä»æœåŠ¡å™¨ä¸Šè·å– HTML çº¯æ–‡æœ¬æ ¼å¼çš„æ–‡æ¡£ï¼Œå¹¶ä¸”åœ¨å“åº”è¯·æ±‚ä¹‹åç«‹å³å…³é—­è¿æ¥ï¼ŒåŠŸèƒ½éå¸¸æœ‰é™ã€‚</p>
<h3 id="http10" class="headerLink">
    <a href="#http10" class="header-mark"></a>http/1.0</h3><p>HTTP/1.0 å¹¶ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œåªæ˜¯è®°å½•å·²æœ‰å®è·µå’Œæ¨¡å¼çš„ä¸€ä»½å‚è€ƒæ–‡æ¡£ï¼Œä¸å…·æœ‰å®é™…çš„çº¦æŸåŠ›ï¼Œç›¸å½“äºä¸€ä¸ªå¤‡å¿˜å½•ã€‚</p>
<p>åœ¨å¤šæ–¹é¢å¢å¼ºäº† 0.9 ç‰ˆï¼Œå½¢å¼ä¸Šå·²ç»å’Œæˆ‘ä»¬ç°åœ¨çš„ HTTP å·®åˆ«ä¸å¤§äº†ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å¢åŠ äº† HEADã€POST ç­‰æ–°æ–¹æ³•ï¼›</li>
<li>å¢åŠ äº†å“åº”çŠ¶æ€ç ï¼Œæ ‡è®°å¯èƒ½çš„é”™è¯¯åŸå› ï¼›</li>
<li>å¼•å…¥äº†åè®®ç‰ˆæœ¬å·æ¦‚å¿µï¼›</li>
<li>å¼•å…¥äº† HTTP Headerï¼ˆå¤´éƒ¨ï¼‰çš„æ¦‚å¿µï¼Œè®© HTTP å¤„ç†è¯·æ±‚å’Œå“åº”æ›´åŠ çµæ´»ï¼›</li>
<li>ä¼ è¾“çš„æ•°æ®ä¸å†ä»…é™äºæ–‡æœ¬ã€‚</li>
</ul>
<h3 id="http11" class="headerLink">
    <a href="#http11" class="header-mark"></a>http/1.1</h3><p>æ˜¯ä¸€ä¸ªæ­£å¼çš„æ ‡å‡†ï¼Œè€Œä¸æ˜¯ä¸€ä»½å¯æœ‰å¯æ— çš„å‚è€ƒæ–‡æ¡£ï¼Œåªè¦ç”¨åˆ° HTTP åè®®ï¼Œå°±å¿…é¡»ä¸¥æ ¼éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚</p>
<p>ä¸»è¦å˜æ›´ï¼š</p>
<ul>
<li>å¢åŠ äº† PUTã€DELETE ç­‰æ–°çš„æ–¹æ³•ï¼›</li>
<li>å¢åŠ äº†ç¼“å­˜ç®¡ç†å’Œæ§åˆ¶ï¼›</li>
<li>æ˜ç¡®äº†è¿æ¥ç®¡ç†ï¼Œå…è®¸æŒä¹…è¿æ¥ï¼›</li>
<li>å…è®¸å“åº”æ•°æ®åˆ†å—ï¼ˆchunkedï¼‰ï¼Œåˆ©äºä¼ è¾“å¤§æ–‡ä»¶ï¼›</li>
<li>å¼ºåˆ¶è¦æ±‚ Host å¤´ï¼Œè®©äº’è”ç½‘ä¸»æœºæ‰˜ç®¡æˆä¸ºå¯èƒ½ã€‚</li>
</ul>
<h3 id="http2" class="headerLink">
    <a href="#http2" class="header-mark"></a>http/2</h3><p>ç”± google ä¸»å¯¼ï¼ŒåŸºäº google çš„ SPDY åè®®ä¸ºåŸºç¡€å¼€å§‹åˆ¶å®šæ–°ç‰ˆæœ¬çš„ HTTP åè®®ï¼Œæœ€ç»ˆåœ¨ 2015 å¹´å‘å¸ƒäº† HTTP/2ã€‚</p>
<p>ä¸»è¦ç‰¹ç‚¹ï¼š</p>
<ul>
<li>äºŒè¿›åˆ¶åè®®ï¼Œä¸å†æ˜¯çº¯æ–‡æœ¬ï¼›</li>
<li>å¯å‘èµ·å¤šä¸ªè¯·æ±‚ï¼ŒåºŸå¼ƒäº† 1.1 é‡Œçš„ç®¡é“ï¼›</li>
<li>ä½¿ç”¨ä¸“ç”¨ç®—æ³•å‹ç¼©å¤´éƒ¨ï¼Œå‡å°‘æ•°æ®ä¼ è¾“é‡ï¼›</li>
<li>å…è®¸æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼›</li>
<li>å¢å¼ºäº†å®‰å…¨æ€§ï¼Œâ€œäº‹å®ä¸Šâ€è¦æ±‚åŠ å¯†é€šä¿¡ã€‚</li>
</ul>
<h3 id="http3" class="headerLink">
    <a href="#http3" class="header-mark"></a>http/3</h3><p>ç”± google ä¸»å¯¼ï¼ŒåŸºäº google çš„ QUIC åè®®ä¸ºåŸºç¡€å¼€å§‹åˆ¶å®šæ–°ç‰ˆæœ¬çš„ HTTP åè®®ã€‚</p>
<h2 id="ç½‘ç»œåˆ†å±‚æ¨¡å‹" class="headerLink">
    <a href="#%e7%bd%91%e7%bb%9c%e5%88%86%e5%b1%82%e6%a8%a1%e5%9e%8b" class="header-mark"></a>ç½‘ç»œåˆ†å±‚æ¨¡å‹</h2><h3 id="tcpip-1" class="headerLink">
    <a href="#tcpip-1" class="header-mark"></a>TCP/IP</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/87869e9a3d0d4eaba7c9d6fe0798674f.png?imageView2/0/interlace/1/q/50%7cimageslim" title="tcp/ipåˆ†å±‚æ¨¡å‹" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/87869e9a3d0d4eaba7c9d6fe0798674f.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2>TCP/IPåˆ†å±‚æ¨¡å‹</h2><p>tcp/ipåˆ†å±‚æ¨¡å‹</p>">
        
    </a><figcaption class="image-caption">TCP/IPåˆ†å±‚æ¨¡å‹</figcaption>
    </figure></p>
<p>è¿™é‡Œçš„å±‚æ¬¡é¡ºåºæ˜¯â€œä»ä¸‹å¾€ä¸Šâ€æ•°çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€å±‚å°±æ˜¯æœ€ä¸‹é¢çš„ä¸€å±‚ã€‚</p>
<h4 id="é“¾æ¥å±‚" class="headerLink">
    <a href="#%e9%93%be%e6%8e%a5%e5%b1%82" class="header-mark"></a>é“¾æ¥å±‚</h4><p>ç¬¬ä¸€å±‚å«â€œé“¾æ¥å±‚â€ï¼ˆlink layerï¼‰ï¼Œè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚</p>
<h4 id="ç½‘ç»œäº’è”å±‚" class="headerLink">
    <a href="#%e7%bd%91%e7%bb%9c%e4%ba%92%e8%81%94%e5%b1%82" class="header-mark"></a>ç½‘ç»œäº’è”å±‚</h4><p>ç¬¬äºŒå±‚å«â€œç½‘é™…å±‚â€æˆ–è€…â€œç½‘ç»œäº’è¿å±‚â€ï¼ˆinternet layerï¼‰ï¼ŒIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚</p>
<h4 id="ä¼ è¾“å±‚" class="headerLink">
    <a href="#%e4%bc%a0%e8%be%93%e5%b1%82" class="header-mark"></a>ä¼ è¾“å±‚</h4><p>ç¬¬ä¸‰å±‚å«â€œä¼ è¾“å±‚â€ï¼ˆtransport layerï¼‰ï¼Œè¿™ä¸ªå±‚æ¬¡åè®®çš„èŒè´£æ˜¯ä¿è¯æ•°æ®åœ¨ IP åœ°å€æ ‡è®°çš„ä¸¤ç‚¹ä¹‹é—´â€œå¯é â€åœ°ä¼ è¾“ï¼Œæ˜¯ TCP åè®®å·¥ä½œçš„å±‚æ¬¡ï¼Œå¦å¤–è¿˜æœ‰å®ƒçš„ä¸€ä¸ªâ€œå°ä¼™ä¼´â€UDPã€‚</p>
<p>TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚</p>
<h4 id="åº”ç”¨å±‚" class="headerLink">
    <a href="#%e5%ba%94%e7%94%a8%e5%b1%82" class="header-mark"></a>åº”ç”¨å±‚</h4><p>åè®®æ ˆçš„ç¬¬å››å±‚å«â€œåº”ç”¨å±‚â€ï¼ˆapplication layerï¼‰ï¼Œç”±äºä¸‹é¢çš„ä¸‰å±‚æŠŠåŸºç¡€æ‰“å¾—éå¸¸å¥½ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€å±‚å°±â€œç™¾èŠ±é½æ”¾â€äº†ï¼Œæœ‰å„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ã€‚ä¾‹å¦‚ Telnetã€SSHã€FTPã€SMTPï¼ŒHTTP ç­‰ç­‰ã€‚</p>
<div class="details admonition tip open">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw"></i>Tip<i class="details-icon fas fa-angle-right fa-fw"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content">MAC å±‚ï¼ˆé“¾æ¥å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯å¸§ï¼ˆframeï¼‰ï¼ŒIP å±‚ï¼ˆç½‘ç»œäº’è”å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰ï¼ŒTCP å±‚ä¼ è¾“å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰ï¼Œ HTTP ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰ã€‚è¿™äº›åè¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ†ï¼Œå¯ä»¥ç»Ÿç§°ä¸ºæ•°æ®åŒ…ã€‚</div>
        </div>
    </div>
<h3 id="osi-ç½‘ç»œåˆ†å±‚æ¨¡å‹" class="headerLink">
    <a href="#osi-%e7%bd%91%e7%bb%9c%e5%88%86%e5%b1%82%e6%a8%a1%e5%9e%8b" class="header-mark"></a>OSI ç½‘ç»œåˆ†å±‚æ¨¡å‹</h3><p>OSI åˆ†å±‚æ¨¡å‹åœ¨å‘å¸ƒçš„æ—¶å€™å°±æ˜ç¡®åœ°è¡¨æ˜æ˜¯ä¸€ä¸ªâ€œå‚è€ƒâ€ï¼Œä¸æ˜¯å¼ºåˆ¶æ ‡å‡†ã€‚è¿™æ˜¯å› ä¸º TCP/IP ç­‰åè®®å·²ç»åœ¨è®¸å¤šç½‘ç»œä¸Šå®é™…è¿è¡Œï¼Œä¸å¯èƒ½æ¨ç¿»é‡æ¥ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/4ddd78194c284518a2ce2db4cfab2a3c.png?imageView2/0/interlace/1/q/50%7cimageslim" title="OSIæ¨¡å‹" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/4ddd78194c284518a2ce2db4cfab2a3c.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2>OSIç½‘ç»œæ¨¡å‹</h2><p>OSIæ¨¡å‹</p>">
        
    </a><figcaption class="image-caption">OSIç½‘ç»œæ¨¡å‹</figcaption>
    </figure></p>
<ul>
<li>ç¬¬ä¸€å±‚ï¼šç‰©ç†å±‚ï¼Œç½‘ç»œçš„ç‰©ç†å½¢å¼ï¼Œä¾‹å¦‚ç”µç¼†ã€å…‰çº¤ã€ç½‘å¡ã€é›†çº¿å™¨ç­‰ç­‰ï¼›</li>
<li>ç¬¬äºŒå±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼Œå®ƒåŸºæœ¬ç›¸å½“äº TCP/IP çš„é“¾æ¥å±‚ï¼›</li>
<li>ç¬¬ä¸‰å±‚ï¼šç½‘ç»œå±‚ï¼Œç›¸å½“äº TCP/IP é‡Œçš„ç½‘é™…å±‚ï¼›</li>
<li>ç¬¬å››å±‚ï¼šä¼ è¾“å±‚ï¼Œç›¸å½“äº TCP/IP é‡Œçš„ä¼ è¾“å±‚ï¼›</li>
<li>ç¬¬äº”å±‚ï¼šä¼šè¯å±‚ï¼Œç»´æŠ¤ç½‘ç»œä¸­çš„è¿æ¥çŠ¶æ€ï¼Œå³ä¿æŒä¼šè¯å’ŒåŒæ­¥ï¼›</li>
<li>ç¬¬å…­å±‚ï¼šè¡¨ç¤ºå±‚ï¼ŒæŠŠæ•°æ®è½¬æ¢ä¸ºåˆé€‚ã€å¯ç†è§£çš„è¯­æ³•å’Œè¯­ä¹‰ï¼›</li>
<li>ç¬¬ä¸ƒå±‚ï¼šåº”ç”¨å±‚ï¼Œé¢å‘å…·ä½“çš„åº”ç”¨ä¼ è¾“æ•°æ®ã€‚</li>
</ul>
<p>å¯¹æ¯”ä¸€ä¸‹å°±å¯ä»¥å‘ç°ï¼ŒTCP/IP æ˜¯ä¸€ä¸ªçº¯è½¯ä»¶çš„æ ˆï¼Œæ²¡æœ‰ç½‘ç»œåº”æœ‰çš„æœ€æ ¹åŸºçš„ç”µç¼†ã€ç½‘å¡ç­‰ç‰©ç†è®¾å¤‡çš„ä½ç½®ã€‚è€Œ OSI åˆ™è¡¥è¶³äº†è¿™ä¸ªç¼ºå¤±ï¼Œ åœ¨ç†è®ºå±‚é¢ä¸Šæè¿°ç½‘ç»œæ›´åŠ å®Œæ•´ã€‚</p>
<p>OSI è¿˜ä¸ºæ¯ä¸€å±‚æ ‡è®°äº†æ˜ç¡®äº†ç¼–å·ï¼Œæœ€åº•å±‚æ˜¯ä¸€å±‚ï¼Œæœ€ä¸Šå±‚æ˜¯ä¸ƒå±‚ï¼Œè€Œ TCP/IP çš„å±‚æ¬¡ä»æ¥åªæœ‰åå­—è€Œæ²¡æœ‰ç¼–å·ã€‚</p>
<h3 id="ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„å¯¹åº”å…³ç³»" class="headerLink">
    <a href="#%e4%b8%a4%e4%b8%aa%e5%88%86%e5%b1%82%e6%a8%a1%e5%9e%8b%e7%9a%84%e5%af%b9%e5%ba%94%e5%85%b3%e7%b3%bb" class="header-mark"></a>ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„å¯¹åº”å…³ç³»</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/539751215a0b45ada0a373f8289ca232.png?imageView2/0/interlace/1/q/50%7cimageslim" title="å¯¹åº”å…³ç³»" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220317/539751215a0b45ada0a373f8289ca232.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2>ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„å¯¹åº”å…³ç³»</h2><p>å¯¹åº”å…³ç³»</p>">
        
    </a><figcaption class="image-caption">ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„å¯¹åº”å…³ç³»</figcaption>
    </figure></p>
<p>æ‰€è°“çš„â€œå››å±‚è´Ÿè½½å‡è¡¡â€å°±æ˜¯æŒ‡å·¥ä½œåœ¨ä¼ è¾“å±‚ä¸Šï¼ŒåŸºäº TCP/IP åè®®çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ IP åœ°å€ã€ç«¯å£å·ç­‰å®ç°å¯¹åç«¯æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ã€‚</p>
<p>æ‰€è°“çš„â€œä¸ƒå±‚è´Ÿè½½å‡è¡¡â€å°±æ˜¯æŒ‡å·¥ä½œåœ¨åº”ç”¨å±‚ä¸Šï¼Œçœ‹åˆ°çš„æ˜¯ HTTP åè®®ï¼Œè§£æ HTTP æŠ¥æ–‡é‡Œçš„ URIã€ä¸»æœºåã€èµ„æºç±»å‹ç­‰æ•°æ®ï¼Œå†ç”¨é€‚å½“çš„ç­–ç•¥è½¬å‘ç»™åç«¯æœåŠ¡å™¨ã€‚</p>
<p>æœ‰ä¸€ä¸ªè¾¨åˆ«å››å±‚å’Œä¸ƒå±‚æ¯”è¾ƒå¥½çš„ï¼ˆä½†ä¸æ˜¯ç»å¯¹çš„ï¼‰å°çªé—¨ï¼Œâ€œä¸¤ä¸ªå‡¡æ˜¯â€ï¼š<strong>å‡¡æ˜¯ç”±æ“ä½œç³»ç»Ÿè´Ÿè´£å¤„ç†çš„å°±æ˜¯å››å±‚æˆ–å››å±‚ä»¥ä¸‹</strong>ï¼Œå¦åˆ™ï¼Œ<strong>å‡¡æ˜¯éœ€è¦ç”±åº”ç”¨ç¨‹åºï¼ˆä¹Ÿå°±æ˜¯ä½ è‡ªå·±å†™ä»£ç ï¼‰è´Ÿè´£å¤„ç†çš„å°±æ˜¯ä¸ƒå±‚</strong>ã€‚</p>
<h2 id="httpåè®®æ ¸å¿ƒ" class="headerLink">
    <a href="#http%e5%8d%8f%e8%ae%ae%e6%a0%b8%e5%bf%83" class="header-mark"></a>httpåè®®æ ¸å¿ƒ</h2><p>ç”±äº HTTP æ˜¯åœ¨ TCP/IP åè®®ä¹‹ä¸Šçš„ï¼Œè€Œ TCP/IP åè®®è´Ÿè´£åº•å±‚çš„å…·ä½“ä¼ è¾“å·¥ä½œï¼Œæ‰€ä»¥ http åœ¨ä¼ è¾“æ–¹é¢ä¸ç”¨å¤ªæ“å¿ƒï¼ŒTCP/IP ä¼šå»è§£å†³ï¼Œæ‰€ä»¥ HTTP å…³å¿ƒçš„å°±åªæœ‰ä»–æ‰€ä¼ è¾“çš„æŠ¥æ–‡å†…å®¹ï¼Œåˆå› ä¸º HTTP æ˜¯â€œçº¯æ–‡æœ¬â€çš„ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯éƒ½æ˜¯ ASCII ç çš„æ–‡æœ¬ï¼Œä¸ç”¨å€ŸåŠ©ç¨‹åºè§£æå¯ä»¥ç›´æ¥é˜…è¯»ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220321/619a6b063a5e4ced936d156d155f3fed.png?imageView2/0/interlace/1/q/50%7cimageslim" title="httpæŠ¥æ–‡" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220321/619a6b063a5e4ced936d156d155f3fed.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2> </h2><p>httpæŠ¥æ–‡</p>">
        
    </a><figcaption class="image-caption"> </figcaption>
    </figure></p>
<h3 id="å¸¸ç”¨å¤´å­—æ®µ" class="headerLink">
    <a href="#%e5%b8%b8%e7%94%a8%e5%a4%b4%e5%ad%97%e6%ae%b5" class="header-mark"></a>å¸¸ç”¨å¤´å­—æ®µ</h3><h4 id="æ³¨æ„äº‹é¡¹" class="headerLink">
    <a href="#%e6%b3%a8%e6%84%8f%e4%ba%8b%e9%a1%b9" class="header-mark"></a>æ³¨æ„äº‹é¡¹</h4><ul>
<li>å­—æ®µåä¸åŒºåˆ†å¤§å°å†™ï¼Œä¾‹å¦‚â€œHostâ€ä¹Ÿå¯ä»¥å†™æˆâ€œhostâ€ï¼Œä½†é¦–å­—æ¯å¤§å†™çš„å¯è¯»æ€§æ›´å¥½ï¼›</li>
<li>å­—æ®µåé‡Œä¸å…è®¸å‡ºç°ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨è¿å­—ç¬¦â€œ-â€ï¼Œä½†ä¸èƒ½ä½¿ç”¨ä¸‹åˆ’çº¿â€œ_â€ã€‚ä¾‹å¦‚ï¼Œâ€œtest-nameâ€æ˜¯åˆæ³•çš„å­—æ®µåï¼Œè€Œâ€œtest nameâ€â€œtest_nameâ€æ˜¯ä¸æ­£ç¡®çš„å­—æ®µåï¼›</li>
<li>å­—æ®µååé¢å¿…é¡»ç´§æ¥ç€â€œ:â€ï¼Œä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè€Œâ€œ:â€åçš„å­—æ®µå€¼å‰å¯ä»¥æœ‰å¤šä¸ªç©ºæ ¼ï¼›</li>
</ul>
<h4 id="åˆ†ç±»" class="headerLink">
    <a href="#%e5%88%86%e7%b1%bb" class="header-mark"></a>åˆ†ç±»</h4><ul>
<li>é€šç”¨å­—æ®µï¼šåœ¨è¯·æ±‚å¤´å’Œå“åº”å¤´é‡Œéƒ½å¯ä»¥å‡ºç°ï¼›</li>
<li>è¯·æ±‚å­—æ®µï¼šä»…èƒ½å‡ºç°åœ¨è¯·æ±‚å¤´é‡Œï¼Œè¿›ä¸€æ­¥è¯´æ˜è¯·æ±‚ä¿¡æ¯æˆ–è€…é¢å¤–çš„é™„åŠ æ¡ä»¶ï¼›</li>
<li>å“åº”å­—æ®µï¼šä»…èƒ½å‡ºç°åœ¨å“åº”å¤´é‡Œï¼Œè¡¥å……è¯´æ˜å“åº”æŠ¥æ–‡çš„ä¿¡æ¯ï¼›</li>
<li>å®ä½“å­—æ®µï¼šå®ƒå®é™…ä¸Šå±äºé€šç”¨å­—æ®µï¼Œä½†ä¸“é—¨æè¿° body çš„é¢å¤–ä¿¡æ¯ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>ç±»å‹</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Host</code></td>
<td>è¯·æ±‚å­—æ®µ</td>
<td>å”¯ä¸€ä¸€ä¸ª HTTP/1.1 è§„èŒƒé‡Œè¦æ±‚<strong>å¿…é¡»å‡ºç°</strong>çš„å­—æ®µï¼Œå¦‚æœè¯·æ±‚å¤´é‡Œæ²¡æœ‰ Hostï¼Œé‚£è¿™å°±æ˜¯ä¸€ä¸ªé”™è¯¯çš„æŠ¥æ–‡ã€‚Host å­—æ®µå‘Šè¯‰æœåŠ¡å™¨è¿™ä¸ªè¯·æ±‚åº”è¯¥ç”±å“ªä¸ªä¸»æœºæ¥å¤„ç†</td>
</tr>
<tr>
<td><code>User-Agent</code></td>
<td>è¯·æ±‚å­—æ®µ</td>
<td>æè¿°å‘èµ· HTTP è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¾æ®å®ƒæ¥è¿”å›æœ€åˆé€‚æ­¤æµè§ˆå™¨æ˜¾ç¤ºçš„é¡µé¢</td>
</tr>
<tr>
<td><code>Date</code></td>
<td>é€šç”¨å­—æ®µ</td>
<td>è¡¨ç¤º HTTP æŠ¥æ–‡åˆ›å»ºçš„æ—¶é—´ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ—¶é—´å†æ­é…å…¶ä»–å­—æ®µå†³å®šç¼“å­˜ç­–ç•¥</td>
</tr>
<tr>
<td><code>Server</code></td>
<td>å“åº”å­—æ®µ</td>
<td>å‘Šè¯‰å®¢æˆ·ç«¯å½“å‰æ­£åœ¨æä¾› Web æœåŠ¡çš„è½¯ä»¶åç§°å’Œç‰ˆæœ¬å·</td>
</tr>
<tr>
<td><code>Content-Length</code></td>
<td>å®ä½“å­—æ®µ</td>
<td>æŠ¥æ–‡é‡Œ body çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚å¤´æˆ–å“åº”å¤´ç©ºè¡Œåé¢æ•°æ®çš„é•¿åº¦ã€‚æœåŠ¡å™¨çœ‹åˆ°è¿™ä¸ªå­—æ®µï¼Œå°±çŸ¥é“äº†åç»­æœ‰å¤šå°‘æ•°æ®ï¼Œå¯ä»¥ç›´æ¥æ¥æ”¶ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆ body å°±æ˜¯ä¸å®šé•¿çš„ï¼Œéœ€è¦ä½¿ç”¨ chunked æ–¹å¼åˆ†æ®µä¼ è¾“</td>
</tr>
</tbody>
</table>
<h3 id="è¯·æ±‚æ–¹å¼" class="headerLink">
    <a href="#%e8%af%b7%e6%b1%82%e6%96%b9%e5%bc%8f" class="header-mark"></a>è¯·æ±‚æ–¹å¼</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220321/c113e062fccf4d18959dc52d90e59c1b.png?imageView2/0/interlace/1/q/50%7cimageslim" title="è¯·æ±‚æ–¹å¼" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220321/c113e062fccf4d18959dc52d90e59c1b.png?imageView2/0/interlace/1/q/50|imageslim" data-sub-html="<h2> </h2><p>è¯·æ±‚æ–¹å¼</p>">
        
    </a><figcaption class="image-caption"> </figcaption>
    </figure></p>
<table>
<thead>
<tr>
<th>æ–¹å¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>è·å–èµ„æºï¼Œå¯ä»¥ç†è§£ä¸ºè¯»å–æˆ–è€…ä¸‹è½½æ•°æ®</td>
</tr>
<tr>
<td>HEAD</td>
<td>è·å–èµ„æºçš„å…ƒä¿¡æ¯ï¼Œä¸ä¼šè¿”å›è¯·æ±‚çš„å®ä½“æ•°æ®ï¼Œåªä¼šä¼ å›å“åº”å¤´</td>
</tr>
<tr>
<td>POST</td>
<td>å‘èµ„æºæäº¤æ•°æ®ï¼Œç›¸å½“äºå†™å…¥æˆ–ä¸Šä¼ æ•°æ®</td>
</tr>
<tr>
<td>PUT</td>
<td>ç±»ä¼¼ POST</td>
</tr>
<tr>
<td>DELETE</td>
<td>åˆ é™¤èµ„æº</td>
</tr>
<tr>
<td>CONNECT</td>
<td>å»ºç«‹ç‰¹æ®Šçš„è¿æ¥éš§é“</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>åˆ—å‡ºå¯å¯¹èµ„æºå®è¡Œçš„æ–¹æ³•</td>
</tr>
<tr>
<td>TRACE</td>
<td>è¿½è¸ªè¯·æ±‚ - å“åº”çš„ä¼ è¾“è·¯å¾„</td>
</tr>
</tbody>
</table>
<h3 id="çŠ¶æ€ç " class="headerLink">
    <a href="#%e7%8a%b6%e6%80%81%e7%a0%81" class="header-mark"></a>çŠ¶æ€ç </h3><table>
<thead>
<tr>
<th>çŠ¶æ€ç </th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1Ã—x</code></td>
<td>æç¤ºä¿¡æ¯ï¼Œè¡¨ç¤ºç›®å‰æ˜¯åè®®å¤„ç†çš„ä¸­é—´çŠ¶æ€ï¼Œè¿˜éœ€è¦åç»­çš„æ“ä½œ</td>
</tr>
<tr>
<td><code>2Ã—Ã—</code></td>
<td>æˆåŠŸï¼ŒæŠ¥æ–‡å·²ç»æ”¶åˆ°å¹¶è¢«æ­£ç¡®å¤„ç†</td>
</tr>
<tr>
<td><code>3Ã—Ã—</code></td>
<td>é‡å®šå‘ï¼Œèµ„æºä½ç½®å‘ç”Ÿå˜åŠ¨ï¼Œéœ€è¦å®¢æˆ·ç«¯é‡æ–°å‘é€è¯·æ±‚</td>
</tr>
<tr>
<td><code>4Ã—Ã—</code></td>
<td>å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚æŠ¥æ–‡æœ‰è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç†</td>
</tr>
<tr>
<td><code>5Ã—Ã—</code></td>
<td>æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å†…éƒ¨å‘ç”Ÿäº†é”™è¯¯</td>
</tr>
</tbody>
</table>
<p>ä¸€äº›å¸¸ç”¨çŠ¶æ€ç è¯´æ˜</p>
<table>
<thead>
<tr>
<th>status code</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>301</td>
<td>æ°¸ä¹…é‡å®šå‘ï¼Œå«ä¹‰æ˜¯æ­¤æ¬¡è¯·æ±‚çš„èµ„æºå·²ç»ä¸å­˜åœ¨äº†ï¼Œéœ€è¦æ”¹ç”¨æ”¹ç”¨æ–°çš„ URI å†æ¬¡è®¿é—®</td>
</tr>
<tr>
<td>302</td>
<td>ä¸´æ—¶é‡å®šå‘ï¼Œæ„æ€æ˜¯è¯·æ±‚çš„èµ„æºè¿˜åœ¨ï¼Œä½†éœ€è¦æš‚æ—¶ç”¨å¦ä¸€ä¸ª URI æ¥è®¿é—®ã€‚æ¯”å¦‚ï¼Œä½ çš„ç½‘ç«™å‡çº§åˆ°äº† HTTPSï¼ŒåŸæ¥çš„ HTTP ä¸æ‰“ç®—ç”¨äº†ï¼Œè¿™å°±æ˜¯â€œæ°¸ä¹…â€çš„ï¼Œæ‰€ä»¥è¦é…ç½® 301 è·³è½¬ï¼ŒæŠŠæ‰€æœ‰çš„ HTTP æµé‡éƒ½åˆ‡æ¢åˆ° HTTPSã€‚ å†æ¯”å¦‚ï¼Œä»Šå¤©å¤œé‡Œç½‘ç«™åå°è¦ç³»ç»Ÿç»´æŠ¤ï¼ŒæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¿™å°±å±äºâ€œä¸´æ—¶â€çš„ï¼Œå¯ä»¥é…ç½®æˆ 302 è·³è½¬ï¼ŒæŠŠæµé‡ä¸´æ—¶åˆ‡æ¢åˆ°ä¸€ä¸ªé™æ€é€šçŸ¥é¡µé¢ï¼Œæµè§ˆå™¨çœ‹åˆ°è¿™ä¸ª 302 å°±çŸ¥é“è¿™åªæ˜¯æš‚æ—¶çš„æƒ…å†µï¼Œä¸ä¼šåšç¼“å­˜ä¼˜åŒ–ï¼Œç¬¬äºŒå¤©è¿˜ä¼šè®¿é—®åŸæ¥çš„åœ°å€ã€‚</td>
</tr>
<tr>
<td>304</td>
<td>Not Modifiedï¼Œå®ƒç”¨äº If-Modified-Since ç­‰æ¡ä»¶è¯·æ±‚ï¼Œè¡¨ç¤ºèµ„æºæœªä¿®æ”¹ï¼Œç”¨äºç¼“å­˜æ§åˆ¶ã€‚å®ƒä¸å…·æœ‰é€šå¸¸çš„è·³è½¬å«ä¹‰ï¼Œä½†å¯ä»¥ç†è§£æˆâ€œé‡å®šå‘å·²åˆ°ç¼“å­˜çš„æ–‡ä»¶â€ï¼ˆå³â€œç¼“å­˜é‡å®šå‘â€ï¼‰</td>
</tr>
<tr>
<td>405</td>
<td>ä¸å…è®¸ä½¿ç”¨æŸäº›æ–¹æ³•æ“ä½œèµ„æºï¼Œä¾‹å¦‚ä¸å…è®¸ POST åªèƒ½ GET</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable èµ„æºæ— æ³•æ»¡è¶³å®¢æˆ·ç«¯è¯·æ±‚çš„æ¡ä»¶ï¼Œä¾‹å¦‚è¯·æ±‚ä¸­æ–‡ä½†åªæœ‰è‹±æ–‡</td>
</tr>
<tr>
<td>408</td>
<td>Request Timeoutï¼šè¯·æ±‚è¶…æ—¶ï¼ŒæœåŠ¡å™¨ç­‰å¾…äº†è¿‡é•¿çš„æ—¶é—´</td>
</tr>
<tr>
<td>409</td>
<td>Conflictï¼šå¤šä¸ªè¯·æ±‚å‘ç”Ÿäº†å†²çªï¼Œå¯ä»¥ç†è§£ä¸ºå¤šçº¿ç¨‹å¹¶å‘æ—¶çš„ç«æ€</td>
</tr>
<tr>
<td>413</td>
<td>Request Entity Too Largeï¼šè¯·æ±‚æŠ¥æ–‡é‡Œçš„ body å¤ªå¤§</td>
</tr>
<tr>
<td>414</td>
<td>Request-URI Too Longï¼šè¯·æ±‚è¡Œé‡Œçš„ URI å¤ªå¤§</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests å®¢æˆ·ç«¯å‘é€äº†å¤ªå¤šçš„è¯·æ±‚ï¼Œé€šå¸¸æ˜¯ç”±äºæœåŠ¡å™¨çš„é™è¿ç­–ç•¥</td>
</tr>
<tr>
<td>431</td>
<td>Request Header Fields Too Large è¯·æ±‚å¤´æŸä¸ªå­—æ®µæˆ–æ€»ä½“å¤ªå¤§</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error ä¸ 400 ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé€šç”¨çš„é”™è¯¯ç ï¼ŒæœåŠ¡å™¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆé”™è¯¯æˆ‘ä»¬æ˜¯ä¸çŸ¥é“çš„ã€‚ä¸è¿‡å¯¹äºæœåŠ¡å™¨æ¥è¯´è¿™åº”è¯¥ç®—æ˜¯å¥½äº‹ï¼Œé€šå¸¸ä¸åº”è¯¥æŠŠæœåŠ¡å™¨å†…éƒ¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å‡ºé”™çš„å‡½æ•°è°ƒç”¨æ ˆå‘Šè¯‰å¤–ç•Œã€‚è™½ç„¶ä¸åˆ©äºè°ƒè¯•ï¼Œä½†èƒ½å¤Ÿé˜²æ­¢é»‘å®¢çš„çª¥æ¢æˆ–è€…åˆ†æ</td>
</tr>
<tr>
<td>501</td>
<td>Not Implemented è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„åŠŸèƒ½è¿˜ä¸æ”¯æŒï¼Œè¿™ä¸ªé”™è¯¯ç æ¯” 500 è¦æ¸©å’Œä¸€äº›ï¼Œå’Œâ€œå³å°†å¼€ä¸šï¼Œæ•¬è¯·æœŸå¾…â€çš„æ„æ€å·®ä¸å¤šï¼Œä¸è¿‡å…·ä½“ä»€ä¹ˆæ—¶å€™â€œå¼€ä¸šâ€å°±ä¸å¥½è¯´äº†</td>
</tr>
<tr>
<td>502</td>
<td>Bad Gatewayâ€é€šå¸¸æ˜¯æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†æ—¶è¿”å›çš„é”™è¯¯ç ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è‡ªèº«å·¥ä½œæ­£å¸¸ï¼Œè®¿é—®åç«¯æœåŠ¡å™¨æ—¶å‘ç”Ÿäº†é”™è¯¯ï¼Œä½†å…·ä½“çš„é”™è¯¯åŸå› ä¹Ÿæ˜¯ä¸çŸ¥é“çš„</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable è¡¨ç¤ºæœåŠ¡å™¨å½“å‰å¾ˆå¿™ï¼Œæš‚æ—¶æ— æ³•å“åº”æœåŠ¡ï¼Œæˆ‘ä»¬ä¸Šç½‘æ—¶æœ‰æ—¶å€™é‡åˆ°çš„â€œç½‘ç»œæœåŠ¡æ­£å¿™ï¼Œè¯·ç¨åé‡è¯•â€çš„æç¤ºä¿¡æ¯å°±æ˜¯çŠ¶æ€ç  503</td>
</tr>
</tbody>
</table>
<h3 id="http-ç‰¹ç‚¹" class="headerLink">
    <a href="#http-%e7%89%b9%e7%82%b9" class="header-mark"></a>http ç‰¹ç‚¹</h3><ul>
<li>HTTP æ˜¯çµæ´»å¯æ‰©å±•çš„ï¼Œå¯ä»¥ä»»æ„æ·»åŠ å¤´å­—æ®µå®ç°ä»»æ„åŠŸèƒ½ã€‚</li>
<li>HTTP æ˜¯å¯é ä¼ è¾“åè®®ï¼ŒåŸºäº TCP/IP åè®®â€œå°½é‡â€ä¿è¯æ•°æ®çš„é€è¾¾ã€‚</li>
<li>HTTP æ˜¯åº”ç”¨å±‚åè®®ï¼Œæ¯” FTPã€SSH ç­‰æ›´é€šç”¨åŠŸèƒ½æ›´å¤šï¼Œèƒ½å¤Ÿä¼ è¾“ä»»æ„æ•°æ®ã€‚</li>
<li>HTTP ä½¿ç”¨äº†è¯·æ±‚ - åº”ç­”æ¨¡å¼ï¼Œå®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¢«åŠ¨å›å¤è¯·æ±‚ã€‚</li>
<li>HTTP æœ¬è´¨ä¸Šæ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯äº’ç›¸ç‹¬ç«‹ã€æ¯«æ— å…³è”çš„ï¼Œåè®®ä¸è¦æ±‚å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨è®°å½•è¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ã€‚</li>
</ul>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://baijiahao.baidu.com/s?id=1738680012806649947" target="_blank" rel="noopener noreferrer">ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Œåå‘ä»£ç†æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</a></li>
<li><a href="https://blog.csdn.net/weixin_45775963/article/details/104440190" target="_blank" rel="noopener noreferrer">ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†å’Œåå‘ä»£ç†</a></li>
<li><a href="https://www.jianshu.com/p/23b6775fbb91" target="_blank" rel="noopener noreferrer">å¦‚ä½•ç†è§£åå‘ä»£ç†æœåŠ¡å™¨</a></li>
</ul>]]></description>
</item></channel>
</rss>
