<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
    <channel>
        <title>gitalk - æ ‡ç­¾ - xiaobinqt åšå®¢ - æŠ€æœ¯æ”¹å˜ç”Ÿæ´»</title>
        <link>https://www.xiaobinqt.cn/tags/gitalk/</link>
        <description>gitalk - æ ‡ç­¾ - xiaobinqt åšå®¢ - æŠ€æœ¯æ”¹å˜ç”Ÿæ´»</description>
        <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><managingEditor>xiaobinqt@163.com (xiaobinqt)</managingEditor>
            <webMaster>xiaobinqt@163.com (xiaobinqt)</webMaster><copyright>This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</copyright><lastBuildDate>Fri, 01 Apr 2022 00:00:00 &#43;0000</lastBuildDate><atom:link href="https://www.xiaobinqt.cn/tags/gitalk/" rel="self" type="application/rss+xml" /><item>
    <title>Gitalk åˆå§‹åŒ– issue</title>
    <link>https://www.xiaobinqt.cn/gitalk-init-issue/</link>
    <pubDate>Fri, 01 Apr 2022 00:00:00 &#43;0000</pubDate><author>
        <name>xiaobinqt</name>
    </author><guid>https://www.xiaobinqt.cn/gitalk-init-issue/</guid>
    <description><![CDATA[<p>åœ¨ç”¨ Gitalk ä½œä¸ºä¸ªäººåšå®¢è¯„è®ºç³»ç»Ÿæ—¶ï¼Œå‘ç°æœ‰ä¸ªæ¶å¿ƒçš„ç‚¹æ˜¯ï¼Œæ¯ç¯‡æ–‡ç« å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–ä¸€ä¸ª issue æˆ–æ˜¯ç™»å½• github åï¼ŒæŠŠæ–‡ç« ä¸€ä¸ªä¸€ä¸ªç‚¹å¼€ç•Œé¢å»åˆå§‹åŒ– issueï¼Œä¸ç„¶å°±ä¼šå‡ºç°ä»¥ä¸‹çš„æç¤º</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220401/e360635c7d7b4e5b931306af6c0455cd.png?imageView2/0/q/75%7cwatermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" title="no issus" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220401/e360635c7d7b4e5b931306af6c0455cd.png?imageView2/0/q/75|watermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" data-sub-html="<h2>no issus</h2><p>no issus</p>">
        
    </a><figcaption class="image-caption">no issus</figcaption>
    </figure></p>
<p>ä¸ªäººè§‰å¾—è¿™ä»¶äº‹æƒ…éå¸¸éº»çƒ¦ï¼Œ<strong>Gitalk ä½¿ç”¨ labels æ¥æ˜ å°„ issuse</strong>ï¼Œå¯ä»¥çœ‹ä¸‹æˆ‘ç”¨çš„ä¸»é¢˜ Gitalk åœ¨åˆå§‹åŒ–è¯„è®ºæ—¶å‘å‡ºçš„ç½‘ç»œè¯·æ±‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220401/be1fd41847d1449c8287f4a7820a35e1.png?imageView2/0/q/75%7cwatermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" title="åˆ›å»º issue çš„è¯·æ±‚" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220401/be1fd41847d1449c8287f4a7820a35e1.png?imageView2/0/q/75|watermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" data-sub-html="<h2>åˆ›å»º issue çš„è¯·æ±‚</h2><p>åˆ›å»º issue çš„è¯·æ±‚</p>">
        
    </a><figcaption class="image-caption">åˆ›å»º issue çš„è¯·æ±‚</figcaption>
    </figure></p>
<p>labels ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Gitalkï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ç« çš„å‘å¸ƒæ—¶é—´ï¼Œå‘ƒï¼Œæ„Ÿè§‰æ”¹æˆæ–‡ç« çš„ path ä¼šæ›´å¥½ï¼Œä½†æ˜¯ <strong>github label çš„æœ€å¤§é•¿åº¦æ˜¯ 50 ä¸ªå­—ç¬¦</strong>ï¼Œæ‰€ä»¥æŠŠ path md5 ä¼šæ›´å¥½ã€‚æˆ‘çœ‹äº†ä¸‹æºç ä¿®æ”¹æˆäº† URL
path çš„ md5 æ ¼å¼</p>
<p><code>themes/LoveIt/layouts/partials/comment.html</code></p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220404/94a28c0aa1fd4f44a034b1dce2087af4.png?imageView2/0/q/75%7cwatermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" title="comment id" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220404/94a28c0aa1fd4f44a034b1dce2087af4.png?imageView2/0/q/75|watermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" data-sub-html="<h2>comment id</h2><p>comment id</p>">
        
    </a><figcaption class="image-caption">comment id</figcaption>
    </figure></p>
<p>åˆå§‹å·¥ä½œåšå®Œï¼Œå°±å¯ä»¥å†™è„šæœ¬äº†ã€‚</p>
<h2 id="åˆ†æ" class="headerLink">
    <a href="#%e5%88%86%e6%9e%90" class="header-mark"></a>åˆ†æ</h2><p>æˆ‘ä»¬è¦åšçš„äº‹å…¶å®å°±æ˜¯ç»™æ¯ç¯‡æ–°æ–‡ç« åˆå§‹åŒ–ä¸€ä¸ª issueï¼Œå¯ä»¥ç”¨ github Actions æ¥åšè¿™ä»¶äº‹ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220402/fcdfd734b67b4e4283637061f717788b.png?imageView2/0/q/75%7cwatermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" title="åˆå§‹åŒ– issue å¤§è‡´é€»è¾‘" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220402/fcdfd734b67b4e4283637061f717788b.png?imageView2/0/q/75|watermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" data-sub-html="<h2>åˆå§‹åŒ– issue å¤§è‡´é€»è¾‘</h2><p>åˆå§‹åŒ– issue å¤§è‡´é€»è¾‘</p>">
        
    </a><figcaption class="image-caption">åˆå§‹åŒ– issue å¤§è‡´é€»è¾‘</figcaption>
    </figure></p>
<p>è¿™é‡Œæœ‰å‡ ä¸ªç¨å¾®éº»çƒ¦çš„åœ°æ–¹ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å®ç°æ–¹æ¡ˆï¼Œ<strong>ä»…ä»…æ˜¯æä¾›ä¸€ä¸ªæ€è·¯</strong>ã€‚</p>
<h3 id="è·å–æ‰€æœ‰æ–‡ç« ä¿¡æ¯" class="headerLink">
    <a href="#%e8%8e%b7%e5%8f%96%e6%89%80%e6%9c%89%e6%96%87%e7%ab%a0%e4%bf%a1%e6%81%af" class="header-mark"></a>è·å–æ‰€æœ‰æ–‡ç« ä¿¡æ¯</h3><p>æ€ä¹ˆè·å–æ‰€æœ‰çš„æ–‡ç« â“ï¼Œæˆ‘ç”¨çš„ <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreferrer">LoveIt</a> ä¸»é¢˜åœ¨ build æ—¶åœ¨ public ç›®å½•é‡Œä¼šæœ‰ä¸€ä¸ª index.json
æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„æ–‡ç« çš„ä¿¡æ¯ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220402/e224ac9d408e4dea972caecabecec8ba.png?imageView2/0/q/75%7cwatermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" title="public index.json" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220402/e224ac9d408e4dea972caecabecec8ba.png?imageView2/0/q/75|watermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" data-sub-html="<h2>public index.json</h2><p>public index.json</p>">
        
    </a><figcaption class="image-caption">public index.json</figcaption>
    </figure></p>
<p>å…¶ä»–çš„ä¸»é¢˜å¯ä»¥ä½¿ç”¨ sitemap.xml æ¥è·å–æ‰€æœ‰çš„æ–‡ç« ä¿¡æ¯ï¼Œhugo åœ¨ build æ—¶ä¼šç”Ÿæˆ sitemap.xml æ–‡ä»¶ã€‚</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220402/f59bb44ee8924b639a949bb494a40b9c.png?imageView2/0/q/75%7cwatermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" title="sitemap.xml" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220402/f59bb44ee8924b639a949bb494a40b9c.png?imageView2/0/q/75|watermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" data-sub-html="<h2>sitemap.xml</h2><p>sitemap.xml</p>">
        
    </a><figcaption class="image-caption">sitemap.xml</figcaption>
    </figure></p>
<h3 id="issue-å¦‚ä½•åˆå§‹åŒ–" class="headerLink">
    <a href="#issue-%e5%a6%82%e4%bd%95%e5%88%9d%e5%a7%8b%e5%8c%96" class="header-mark"></a>issue å¦‚ä½•åˆå§‹åŒ–</h3><p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220404/3f28b1b6486e44cfbeeef571bfded6f2.png?imageView2/0/q/75%7cwatermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" title="issueå†…å®¹" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220404/3f28b1b6486e44cfbeeef571bfded6f2.png?imageView2/0/q/75|watermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" data-sub-html="<h2>issueå†…å®¹</h2><p>issueå†…å®¹</p>">
        
    </a><figcaption class="image-caption">issueå†…å®¹</figcaption>
    </figure></p>
<p>å¦‚ä¸Šæˆªå›¾ğŸ‘†æ˜¯æˆ‘åˆ›å»ºçš„ issue å†…å®¹ã€‚body æ˜¯æ–‡ç« çš„ URLï¼Œtitle æ˜¯æ–‡ç« æ ‡é¢˜ï¼Œlabels æœ‰ Gitalk å’Œæ–‡ç« çš„ URL path çš„ md5
ä¸¤ä¸ªã€‚é‚£ä¹ˆé—®é¢˜å°±ç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™æ¯ç¯‡æ–‡ç« åˆå§‹åŒ–ä¸€ä¸ªè¿™æ ·çš„ issue å°±å¯ä»¥äº†ã€‚</p>
<p>å›ºå®šæ–‡ç« çš„ URL ä¸ºå”¯ä¸€æ ‡è¯†ï¼Œç»„æˆä¸¤ä¸ª map ï¼Œmap é”®å°±æ˜¯æ–‡ç« çš„ URLã€‚ä¸€ä¸ª map æ˜¯ github å·²å­˜åœ¨çš„ issue æš‚å®šä¸º <code>issue_map</code>ï¼Œä¸€ä¸ª map æ˜¯æˆ‘ä»¬æ‰€æœ‰æ–‡ç« çš„ map æš‚å®šä¸º <code>posts_map</code>
ï¼ŒURL åœ¨ <code>posts_map</code>
ä¸­å­˜åœ¨ä½†æ˜¯ <code>issue_map</code> ä¸å­˜åœ¨çš„å°±æ˜¯<strong>æ–°å¢</strong>
ã€‚URL åœ¨ <code>posts_map</code> å’Œ <code>issue_map</code> ä¸­éƒ½å­˜åœ¨ä½†æ˜¯ <code>posts_map</code> ä¸­çš„æ ‡é¢˜è·Ÿ <code>issue_map</code> ä¸­çš„æ ‡é¢˜ä¸ç›¸åŒå¯èƒ½å°±æ˜¯æ–‡ç« æ ‡é¢˜è¢«ä¿®æ”¹äº†ã€‚</p>
<p>å¯¹äºæ–°çš„ URL æˆ‘çš„åšæ³•æ˜¯æ‰¿è®¤å®ƒæ˜¯æ–°æ–‡ç« ï¼Œæˆ–æ˜¯æ—§æ–‡ç« çš„ URL è¢«ä¿®æ”¹äº†é‚£åªèƒ½å» github æ‰‹åŠ¨ä¿®æ”¹ issue body ä¸ºæ–°çš„ URL, label ä¸ºæ–°çš„ uri çš„ md5 å€¼ã€‚</p>
<h2 id="python-è„šæœ¬å®ç°" class="headerLink">
    <a href="#python-%e8%84%9a%e6%9c%ac%e5%ae%9e%e7%8e%b0" class="header-mark"></a>python è„šæœ¬å®ç°</h2><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">hashlib</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">sys</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">site_url</span> <span class="o">=</span> <span class="s2">&#34;https://xiaobinqt.github.io&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Usage:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&#34;token username repo_name&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># issue çš„ body å°±æ˜¯æ–‡ç« çš„ URL</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">token</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">username</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">repo_name</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="n">issue_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>  <span class="c1">## [issue_body] = {&#34;issue_number&#34;: issue_number, &#34;issue_title&#34;: issue_title}</span>
</span></span><span class="line"><span class="cl"><span class="n">posts_map</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>  <span class="c1"># [post_url] = {&#34;post_uri&#34;:uri,&#34;post_date&#34;:date,&#34;post_title&#34;:title}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_all_gitalk_issues</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">repo_name</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">150</span><span class="p">):</span>  <span class="c1"># 15000 ä¸ª issue åŸºæœ¬å¤Ÿç”¨äº†,ä¸å¤Ÿå¯ä»¥å†åŠ </span>
</span></span><span class="line"><span class="cl">        <span class="n">_</span><span class="p">,</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">get_issues_page</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">## åˆ é™¤çš„æ–‡ç« ä¸ç®¡....</span>
</span></span><span class="line"><span class="cl"><span class="c1">## æ–‡ç«  title ä¿®æ”¹äº†çš„æ–‡ç« è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ æ ‡é¢˜å¯èƒ½ä¿®æ”¹,ä½†æ˜¯ uri ä¸å˜,issue çš„ body æ˜¯æ–‡ç« åœ°å€,åªè¦æ–‡ç« åœ°å€ä¸å˜ï¼Œå°±å¯ä»¥ç›´æ¥ update issue title</span>
</span></span><span class="line"><span class="cl"><span class="c1">## uri å¦‚æœä¹Ÿå˜äº†ï¼Œç›¸å½“äºæ˜¯æ–‡ä»¶çš„é‡å‘½åäº†ï¼Œè¿™æ—¶åªèƒ½å»æ‰‹åŠ¨ update issue title äº†?.....</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">update_issue</span><span class="p">(</span><span class="n">issue_number</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.github.com/repos/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">/issues/</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">repo_name</span><span class="p">,</span> <span class="n">issue_number</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;update_issue url: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;create_issue req json: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">patch</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Authorization&#34;</span><span class="p">:</span> <span class="s2">&#34;token </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">token</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span> <span class="n">verify</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;update_issue success&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;update_issue fail, status_code: </span><span class="si">%d</span><span class="s2">,title: </span><span class="si">%s</span><span class="s2">,issue_number: </span><span class="si">%d</span><span class="s2">&#34;</span> <span class="o">%</span>
</span></span><span class="line"><span class="cl">              <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">issue_number</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># è·å–æ‰€æœ‰ label ä¸º gitalk çš„ issue</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_issues_page</span><span class="p">(</span><span class="n">page</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.github.com/repos/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">/issues?labels=Gitalk&amp;per_page=100&amp;page=</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">repo_name</span><span class="p">,</span> <span class="n">page</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;get_issues url: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Authorization&#34;</span><span class="p">:</span> <span class="s2">&#34;token </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">token</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Accept&#34;</span><span class="p">:</span> <span class="s2">&#34;application/vnd.github.v3+json&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;get_issues_page fail, status_code: </span><span class="si">%d</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()</span> <span class="o">==</span> <span class="p">[]:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="p">(</span><span class="n">issue_map</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">issue</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">issue</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">issue_map</span> <span class="ow">and</span> <span class="n">issue</span><span class="p">[</span><span class="s2">&#34;body&#34;</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&#34;&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">issue_map</span><span class="p">[</span><span class="n">issue</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;issue_number&#34;</span><span class="p">:</span> <span class="n">issue</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;issue_title&#34;</span><span class="p">:</span> <span class="n">issue</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span><span class="n">issue_map</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># é€šè¿‡ public/index.json è·å–æ‰€æœ‰çš„æ–‡ç« </span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_post_titles</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="s1">&#39;public/index.json&#39;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">file_data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">file_data</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span> <span class="ow">or</span> <span class="n">file_data</span> <span class="o">==</span> <span class="p">[]</span> <span class="ow">or</span> <span class="n">file_data</span> <span class="o">==</span> <span class="p">{}:</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">posts_map</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">file_data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">file_data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">file_data</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">key</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">%s%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">site_url</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;uri&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">posts_map</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">posts_map</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;post_uri&#34;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;uri&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;post_date&#34;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;post_title&#34;</span><span class="p">:</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">posts_map</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">create_issue</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">uri</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="s2">&#34;&#34;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">title</span> <span class="o">==</span> <span class="s2">&#34;&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.github.com/repos/</span><span class="si">%s</span><span class="s1">/</span><span class="si">%s</span><span class="s1">/issues&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">repo_name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;create_issue title: </span><span class="si">%s</span><span class="s2"> uri: </span><span class="si">%s</span><span class="s2"> date: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">uri</span><span class="p">,</span> <span class="n">date</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">m</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">urlmd5</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;title&#39;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;body&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">site_url</span><span class="p">,</span> <span class="n">uri</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;labels&#39;</span><span class="p">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;Gitalk&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">urlmd5</span>
</span></span><span class="line"><span class="cl">        <span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;create_issue req json: </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Authorization&#34;</span><span class="p">:</span> <span class="s2">&#34;token </span><span class="si">%s</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="n">token</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">201</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;create_issue success&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;create_issue fail, status_code: </span><span class="si">%d</span><span class="s2">,title: </span><span class="si">%s</span><span class="s2">,req url: </span><span class="si">%s</span><span class="s2"> </span><span class="se">\n</span><span class="s2">&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">url</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># åˆ›å»º gitalk åˆ›å»º issue,å¦‚æœ issue å·²ç»å­˜åœ¨ï¼Œåˆ™ä¸åˆ›å»º</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">init_gitalk</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">post_url</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">posts_map</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">        <span class="c1">## æ ‡é¢˜è¢«ä¿®æ”¹äº†</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">post_url</span> <span class="ow">in</span> <span class="n">issue_map</span> <span class="ow">and</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;post_title&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">issue_map</span><span class="p">[</span><span class="n">post_url</span><span class="p">][</span><span class="s1">&#39;issue_title&#39;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">            <span class="n">update_issue</span><span class="p">(</span><span class="n">issue_map</span><span class="p">[</span><span class="n">post_url</span><span class="p">][</span><span class="s2">&#34;issue_number&#34;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s1">&#39;post_title&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="n">post_url</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">issue_map</span><span class="p">:</span>  <span class="c1"># æ–°å¢çš„æ–‡ç« </span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;title: [</span><span class="si">%s</span><span class="s2">] , body [</span><span class="si">%s</span><span class="s2">] issue ä¸å­˜åœ¨,åˆ›å»º...&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&#34;post_title&#34;</span><span class="p">],</span> <span class="n">post_url</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">            <span class="n">create_issue</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&#34;post_title&#34;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s2">&#34;post_uri&#34;</span><span class="p">],</span> <span class="n">item</span><span class="p">[</span><span class="s2">&#34;post_date&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># å»¶è¿Ÿ 5 ç§’ï¼Œé˜²æ­¢ github api è¯·æ±‚è¿‡äºé¢‘ç¹ï¼š https://docs.github.com/en/rest/guides/best-practices-for-integrators#dealing-with-secondary-rate-limits</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_uri_md5</span><span class="p">(</span><span class="n">uri</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">m</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">md5</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">m</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">uri</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># print(get_uri_md5(&#34;/gmp-model/&#34;))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">## æ‰§è¡Œ....</span>
</span></span><span class="line"><span class="cl">    <span class="n">get_all_gitalk_issues</span><span class="p">(</span><span class="n">token</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">repo_name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">get_post_titles</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">init_gitalk</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨ github Actions ä¸­æ‰§è¡Œï¼š</p>
<p><figure><a class="lightgallery" href="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220404/0cfea81fd2804aeca5099c364779dda8.png?imageView2/0/q/75%7cwatermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" title="github actions build" data-thumbnail="https://cdn.xiaobinqt.cn/xiaobinqt.io/20220404/0cfea81fd2804aeca5099c364779dda8.png?imageView2/0/q/75|watermark/2/text/eGlhb2JpbnF0/font/dmlqYXlh/fontsize/1000/fill/IzVDNUI1Qg==/dissolve/52/gravity/SouthEast/dx/15/dy/15" data-sub-html="<h2>github actions build</h2><p>github actions build</p>">
        
    </a><figcaption class="image-caption">github actions build</figcaption>
    </figure></p>
<p>å®Œæ•´çš„ Action
æ–‡ä»¶å¯ä»¥å‚è€ƒ <a href="https://github.com/xiaobinqt/xiaobinqt.github.io/blob/main/.github/workflows/ci.yml" target="_blank" rel="noopener noreferrer">https://github.com/xiaobinqt/xiaobinqt.github.io/blob/main/.github/workflows/ci.yml</a></p>
<h2 id="å‚è€ƒ" class="headerLink">
    <a href="#%e5%8f%82%e8%80%83" class="header-mark"></a>å‚è€ƒ</h2><ul>
<li><a href="https://draveness.me/git-comments-initialize/" target="_blank" rel="noopener noreferrer">è‡ªåŠ¨åˆå§‹åŒ– Gitalk å’Œ Gitment è¯„è®º</a></li>
<li><a href="https://www.lshell.com/post/use-github-action-and-python-to-automatically-initialize-gitalk-comments/" target="_blank" rel="noopener noreferrer">åˆ©ç”¨ Github Action è‡ªåŠ¨åˆå§‹åŒ– Gitalk è¯„è®ºä¹‹Pythonç¯‡</a></li>
</ul>
]]></description>
</item></channel>
</rss>
