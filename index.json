[{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":"å‡ å¹´å‰ï¼Œä¸€ä½å¥½æœ‹å‹å»ä¸–äº†ï¼Œä¹é›¶åï¼Œè·Ÿæˆ‘å¹´çºªä¸€æ ·ã€‚æˆ‘è·Ÿä»–ä»å°å°±è®¤è¯†ï¼Œæˆ‘ä»¬ä¸€èµ·ä¸Šçš„å°å­¦ï¼Œä¸€èµ·ä¸Šçš„åˆä¸­ï¼Œé«˜ä¸­ä¹‹åä¾¿è”ç³»çš„å°‘äº†ï¼Œåæ¥æˆ‘å»å¤–åœ°è¯»ä¹¦ï¼Œè”ç³»çš„å°±æ›´å°‘äº†ã€‚ é‚£è¿˜æ˜¯äºŒé›¶ä¸€ä¹ï¼Œé‚£æ—¶æˆ‘åˆšä»è¥¿å®‰æ¥åŒ—äº¬ã€‚ä¸€å¤©å¤œé‡Œï¼Œéƒ½å¾ˆæ™šäº†ï¼Œæˆ‘å¦ˆæ‰“ç”µè¯è·Ÿæˆ‘è¯´ï¼Œä»–å»ä¸–äº†ï¼Œå¥½åƒæ˜¯å¿ƒæ¢—ï¼Œè®©æˆ‘åœ¨å¤–é¢å¤šæ³¨æ„èº«ä½“ã€‚å¤©å•Šï¼Œå½“æˆ‘å¬åˆ°è¿™ä¸ªæ¶ˆæ¯çš„æ—¶å€™ï¼Œæˆ‘ç®€ç›´ä¸æ•¢ç›¸ä¿¡ï¼Œæˆ‘åå¤ç¡®è®¤äº†å‡ æ¬¡ï¼Œæ— ç–‘çš„ç¡®æ˜¯ä»–ã€‚ é‚£æ™šæˆ‘å¾ˆéš¾è¿‡ï¼Œå› ä¸ºæˆ‘ä¸ä¹…ä¹‹å‰è¿˜è§è¿‡ä»–ã€‚äºŒé›¶ä¸€ä¹çš„æ˜¥èŠ‚ï¼Œé‚£å¤©åº”è¯¥æ˜¯åˆäºŒçš„æ—©æ™¨ï¼Œæˆ‘éª‘ç€ç”µç“¶è½¦å»å¤–å…¬å®¶æ‹œå¹´ï¼Œå¤–å…¬å®¶è·Ÿä»–è€å®¶ç¦»çš„ä¸è¿œï¼Œå°±å‡ æ­¥è·¯ï¼Œé‚£å¤©æ—©æ™¨æˆ‘åœ¨è·¯è¾¹çœ‹åˆ°äº†ä»–ï¼Œæˆ‘æ²¡æœ‰åœä¸‹æ¥ï¼Œå¿ƒæƒ³å°±å‡ æ­¥è·¯ï¼Œæˆ‘å›æ¥çš„æ—¶å€™å†å»æ‰¾ä»–ï¼Œä½†æ˜¯ç­‰æˆ‘å†å¾€å›èµ°çš„æ—¶å€™ä»–å°±ä¸åœ¨å®¶äº†ã€‚å¦‚ä»Šå¬åˆ°å™©è€—ï¼Œå†æƒ³èµ·è¿™ä»¶äº‹ï¼Œæˆ‘çœŸçš„ç‰¹åˆ«åæ‚”å½“æ—¶åº”è¯¥åœä¸‹æ¥è§ä»–ä¸€é¢ã€‚åæ¥ï¼Œæˆ‘æŠŠè¿™ä»¶äº‹è¯´ç»™æˆ‘å¥³æœ‹å‹å¬ï¼Œå¥¹ä¹Ÿç‰¹åˆ«æ„Ÿæ…¨çš„è¯´ï¼Œæƒ³åšä»€ä¹ˆäº‹ä¸€å®šè¦èµ¶ç´§å»åšã€‚æ˜¯å•Šï¼Œä¸€å®šè¦èµ¶ç´§å»åšï¼Œæ¯•ç«Ÿä¸–äº‹æ— å¸¸ã€‚ æˆ‘è·Ÿä»–å¤ªä¹…æ²¡æœ‰è”ç³»äº†ï¼Œæ²¡æœ‰ä»–çš„ç”µè¯ï¼Œä¹Ÿæ²¡æœ‰ä»–çš„å¾®ä¿¡ï¼Œåæ¥åœ¨QQ é‡Œæ‰¾åˆ°ä»–çš„è”ç³»æ–¹å¼ã€‚æˆ‘å°è¯•ç€å‘äº†ä¸€æ¡æ¶ˆæ¯è¿‡å»ï¼ŒQQ çš„é‚£è¾¹ï¼Œä»–åª³å¦‡å›äº†ä¸€æ¡æ¶ˆæ¯ï¼Œè¯´ä»–äººå·²ç»ä¸åœ¨äº†ã€‚åæ¥æœ‰ä¸ªåˆä¸­åŒå­¦è”ç³»åˆ°äº†æˆ‘ï¼Œæ˜¯ä»–ç­ä¸Šçš„ï¼Œå»ºäº†ä¸€ä¸ªå¾®ä¿¡ç¾¤ï¼Œæƒ³å°½ç‚¹ç»µè–„ä¹‹åŠ›ï¼Œæˆ‘ä»¬ä¸€äººå‡‘äº†ç‚¹é’±ï¼Œç”±ä¸€ä¸ªåœ¨è€å®¶çš„åŒå­¦ç»™ä»–å®¶é‡Œé€äº†å»ï¼Œä½†ä»–å¦ˆå¦ˆåªæ˜¯é¢†äº†æˆ‘ä»¬çš„å¿ƒæ„ã€‚ä»–å®åœ¨æ˜¯å¤ªå¹´è½»äº†ï¼Œè€Œä¸”æ–°å©šä¸ä¹…ï¼Œå­©å­æ‰ä¸€å²ã€‚ è¿™å¼ ç…§ç‰‡æ˜¯ä¸Šåˆä¸­æ—¶æˆ‘ä»¬ä¸€èµ·å»çš–å—äº‹å˜çƒˆå£«é™µå›­æ‹çš„ï¼Œä¹Ÿæ˜¯æˆ‘è·Ÿä»–å”¯ä¸€çš„ä¸€å¼ åˆå½±ã€‚ 2020 å¹´æ—¶å®¶é‡Œå‘å¤§æ°´ï¼Œå®¶é‡Œçš„ä¸œè¥¿éƒ½æ³¡æ°´äº†ï¼Œè¿™å¼ ç…§ç‰‡åæ¥ä¹Ÿä¸çŸ¥æ‰€è¸ªã€‚ å·¦ä¸‰æ˜¯ä»– æœ‰ä¸€æ¬¡æˆ‘å›å®¶ï¼Œæˆ‘çˆ¸è¿˜è·Ÿæˆ‘è¯´åœ¨ä¸€æ¬¡å©šå®´ä¸Šè§è¿‡ä»–ã€‚ä»–è¿‡ä¸–åï¼Œä¸€æ¬¡åœ¨æˆ‘å¤§èˆ…å®¶åƒé¥­çš„æ—¶å€™ï¼Œä»–å®¶çš„ä¸€ä¸ªäº²æˆšä¹Ÿåœ¨ï¼Œåœ¨èŠèµ·ä»–çš„æ—¶å€™ï¼Œç›´å¤¸ä»–åœ¨å¤–é¢å¹²æ´»èƒ½åƒè‹¦ï¼Œäººä¸é”™ã€‚ æˆ‘è·Ÿä»–ä»å°ç›¸è¯†ï¼Œä¸€èµ·åœ¨æ‘å°å­¦è¯»ä¹¦ï¼Œä¸€èµ·åœ¨ç”°åŸ‚ä¸Šç–¯è·‘ï¼Œä»–æ•™æˆ‘æé¸Ÿçªï¼Œç½‘çŸ¥äº†ï¼Œåœ¨æˆ‘çœ¼é‡Œï¼Œä»–å¥½åƒä»€ä¹ˆéƒ½ä¼šï¼Œä»–æ•™äº†æˆ‘å¾ˆå¤šæŠ€èƒ½ï¼Œå¸¦ç»™æˆ‘å¾ˆå¤šå¿«ä¹ã€‚ä¸Šåˆä¸­çš„æ—¶å€™ï¼Œæˆ‘è·Ÿä»–ä¸€èµ·éª‘è½¦ä¸Šå­¦ï¼Œæ”¾å­¦ä¹Ÿä¸€èµ·å›å®¶ã€‚ä»–æ¯å¤©æ—©ä¸Šéƒ½æ˜¯éª‘ç€è½¦æ¥æˆ‘å¤–å©†å®¶ç­‰æˆ‘ï¼Œç­‰æˆ‘åƒå®Œæ—©é¥­ä¸€èµ·èµ°ï¼Œä¸€è·¯ä¸Šæˆ‘ä»¬æœ‰å¥½å‡ ä¸ªåŒå­¦éƒ½ä¸€èµ·ã€‚ä¸‹åˆæ”¾å­¦ä»–æœ‰æ—¶ä¹Ÿåœ¨æˆ‘å¤–å©†å®¶è·Ÿæˆ‘ä¸€èµ·åšå®Œä½œä¸šæ‰å›å®¶ï¼Œè¿™äº›äº‹å¦‚ä»Šå†å†åœ¨ç›®ï¼Œä½†æ˜¯ä»–å´æ°¸è¿œä¸åœ¨äº†ã€‚ ä¹Ÿè®¸æ˜¯å¹´çºªå¤§äº†ï¼Œä¸çŸ¥ä¸è§‰å¯¹æœ‰äº›äº‹è¶Šæ¥è¶Šä¼¤æ„Ÿã€‚å‡ æ¬¡æç¬”æƒ³å†™ç‚¹ä»€ä¹ˆï¼Œä½†æ˜¯æ¯æ¬¡éƒ½å†™ä¸å‡ºæ¥ï¼Œå¿ƒé‡Œæ€»è®°æŒ‚è¿™ä»¶äº‹ï¼Œå¯èƒ½æ˜¯é‚£æ¬¡æˆ‘æ²¡æœ‰åœä¸‹æ¥è§ä»–å§ã€‚ 2021å¹´10æœˆ15æ—¥å®Œ ","date":"2022-03-16","objectID":"/old-pal/:0:0","series":null,"tags":["éšç¬”"],"title":"çºªå¿µä¸€ä½è€å‹","uri":"/old-pal/#"},{"categories":[""],"content":"xiaobinqt,","date":"2024-06-01","objectID":"/furniture/","series":[],"tags":[""],"title":"è€è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ªå®¶å…·æµ‹è¯•","uri":"/furniture/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,kgm è½¬ mp3,ogg è½¬ mp3,mgg è½¬ mp3","date":"2023-10-16","objectID":"/multi-format-convert-mp3/","series":[],"tags":["mp3","ogg","mgg"],"title":"å„ç§éŸ³ä¹æ–‡ä»¶æ ¼å¼è½¬ MP3","uri":"/multi-format-convert-mp3/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" mggæˆ‘çš„ qq éŸ³ä¹æ¡Œé¢æ’­æ”¾å™¨ç‰ˆæœ¬æ˜¯ 1951ï¼Œä¸‹è½½ä¸‹æ¥çš„éŸ³ä¹æ ¼å¼æ˜¯ mgg æ ¼å¼çš„ã€‚ qq music version mgg å¦‚ä½•å°† mgg æ ¼å¼è½¬ mgg æ ¼å¼è½¬æˆ MP3 æ ¼å¼å‘¢â“ mgg æ–‡ä»¶æš‚æ—¶ä¸æ”¯æŒç›´æ¥è½¬æˆ mp3ï¼Œå¯ä»¥å…ˆæŠŠ mgg æ–‡ä»¶è½¬æˆ ogg æ–‡ä»¶ï¼Œå†æŠŠ ogg æ–‡ä»¶è½¬æˆ mp3 æ–‡ä»¶ã€‚ å…ˆç”¨å·¥å…·å°† mgg æ–‡ä»¶è½¬æˆ ogg æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡åœ¨çº¿å·¥å…· OpenYYY - https://openyyy.com/ è½¬ ogg ä¸‹è½½ ogg æ–‡ä»¶ï¼Œé€šè¿‡ ffmpeg å°† ogg è½¬æˆ mp3ï¼Œå‘½ä»¤ä¸º ffmpeg -i oggæ–‡ä»¶ è¾“å‡ºmp3æ–‡ä»¶ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œå°†è€é¼ çˆ±å¤§ç±³çš„ ogg è½¬æˆäº† mp3 æ–‡ä»¶ï¼š ogg convert mp3 è½¬ä¹‹åçš„ mp3 æ–‡ä»¶ç”¨æ’­æ”¾å™¨å¯ä»¥æ­£å¸¸æ’­æ”¾ï¼š æ­£å¸¸æ’­æ”¾ ffmpeg çš„åœ¨çº¿å·¥å…·å¯ä»¥ä½¿ç”¨ https://ffmpeg-online.vercel.app/ ffmpeg åœ¨çº¿å·¥å…· ","date":"2023-10-16","objectID":"/multi-format-convert-mp3/:1:0","series":[],"tags":["mp3","ogg","mgg"],"title":"å„ç§éŸ³ä¹æ–‡ä»¶æ ¼å¼è½¬ MP3","uri":"/multi-format-convert-mp3/#mgg"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" kgmå¯ä»¥ä½¿ç”¨åœ¨çº¿å·¥å…· https://kgm.worthsee.com/ kgm ","date":"2023-10-16","objectID":"/multi-format-convert-mp3/:2:0","series":[],"tags":["mp3","ogg","mgg"],"title":"å„ç§éŸ³ä¹æ–‡ä»¶æ ¼å¼è½¬ MP3","uri":"/multi-format-convert-mp3/#kgm"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ How can I convert audio from ogg to mp3? How to Install FFmpeg on Ubuntu 22.04? ","date":"2023-10-16","objectID":"/multi-format-convert-mp3/:3:0","series":[],"tags":["mp3","ogg","mgg"],"title":"å„ç§éŸ³ä¹æ–‡ä»¶æ ¼å¼è½¬ MP3","uri":"/multi-format-convert-mp3/#å‚è€ƒ"},{"categories":["mysql"],"content":"xiaobinqt,mysql8.0,json,JSON_CONTAINS","date":"2023-10-12","objectID":"/mysql-json-like-search/","series":[],"tags":["mysql"],"title":"è®°ä¸€æ¬¡ MySQL 8.0 JSON æŸ¥è¯¢","uri":"/mysql-json-like-search/"},{"categories":["mysql"],"content":" æœ‰ 2 å¼ è¡¨ï¼Œä¸€å¼  tag è¡¨ï¼Œä¸»è¦å­—æ®µæœ‰ idï¼Œnameã€‚ä¸€å¼  channel è¡¨ï¼Œæœ‰ä¸ª tags å­—æ®µï¼Œå­˜ tag è¡¨ä¸­ idï¼Œå¦‚ï¼š[1,5]ã€‚ tags ç°åœ¨çš„éœ€æ±‚æ˜¯ï¼Œé€šè¿‡ channel è¡¨å¯ä»¥æ”¯æŒæ¨¡ç³Šæœç´¢ tag çš„ nameï¼Œæ¯”å¦‚ tag è¡¨ä¸­çš„æ•°æ®å¦‚ä¸‹ï¼š tag channel è¡¨ä¸­çš„æŸæ¡æ•°æ®çš„ tags å­—æ®µçš„å€¼æ˜¯ [5,6]ï¼Œé‚£æˆ‘å°±å¯ä»¥é€šè¿‡æœç´¢ æµ‹è¯•ç³»ç»Ÿ æ‰¾åˆ°è¿™æ¡ channel æ•°æ®ã€‚ é¦–å…ˆï¼Œå¯ä»¥ä½¿ç”¨ JSON å‡½æ•°æ¥è§£æ tags åˆ—ï¼Œç„¶åå†è¿æ¥ tag è¡¨ä»¥åŒ¹é… idã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ SQL æŸ¥è¯¢ï¼š SELECT c.* FROM channel c INNER JOIN tag t ON JSON_CONTAINS(c.tags, CAST(t.id AS JSON)) WHERE t.name LIKE '%your_search_query%'; è¿™ä¸ªæŸ¥è¯¢çš„æ­¥éª¤æ˜¯ï¼š FROM channel cï¼šä» channel è¡¨ä¸­é€‰æ‹©æ•°æ®ã€‚ INNER JOIN tag t ON JSON_CONTAINS(c.tags, CAST(t.id AS JSON))ï¼šå°† channel è¡¨ä¸ tag è¡¨è¿æ¥ï¼Œå…¶ä¸­ JSON_CONTAINS ç”¨äºæ£€æŸ¥ tag æ˜¯å¦åœ¨ channel çš„ JSON æ•°ç»„ä¸­ã€‚ WHERE t.name LIKE '%your_search_query%'ï¼šåœ¨è¿æ¥åçš„ç»“æœä¸­ï¼Œä½¿ç”¨ LIKE å­å¥æ¥æ‰§è¡Œæ¨¡ç³ŠåŒ¹é…ã€‚ åœ¨ä¸Šé¢çš„æŸ¥è¯¢ä¸­ï¼Œå¯ä»¥å°† %your_search_query% æ›¿æ¢ä¸ºæƒ³æœç´¢çš„æ ‡ç­¾åç§°çš„éƒ¨åˆ†ã€‚è¿™å°†è¿”å›åŒ…å«åŒ¹é…çš„ tag åç§°çš„ç»“æœé›†ã€‚ å½“åœ¨ SQL ä¸­å¤„ç† JSON æ•°æ®æ—¶ï¼Œå¯èƒ½éœ€è¦å°†æ•°æ®è½¬æ¢ä¸º JSON ç±»å‹ä»¥è¿›è¡Œæ¯”è¾ƒæˆ–æ“ä½œã€‚åœ¨æŸ¥è¯¢ä¸­ï¼ŒJSON_CONTAINS(c.tags, CAST(t.id AS JSON)) æ˜¯ä¸€ä¸ªç”¨äºæ£€æŸ¥ JSON æ•°ç»„ä¸­æ˜¯å¦åŒ…å«ç‰¹å®šå€¼çš„ SQL è¡¨è¾¾å¼ã€‚ ä»¥ä¸‹æ˜¯å¯¹è¿™ä¸ªè¡¨è¾¾å¼çš„è¯¦ç»†è§£é‡Šï¼š CAST(t.id AS JSON)ï¼šè¿™éƒ¨åˆ†å°† t.id è½¬æ¢ä¸º JSON æ•°æ®ç±»å‹ã€‚åœ¨ SQL ä¸­ï¼ŒCAST å‡½æ•°ç”¨äºå°†ä¸€ä¸ªæ•°æ®ç±»å‹è½¬æ¢ä¸ºå¦ä¸€ä¸ªæ•°æ®ç±»å‹ã€‚åœ¨è¿™é‡Œï¼Œt.id æ˜¯æ•´æ•°ç±»å‹ï¼Œé€šè¿‡ CAST(t.id AS JSON)ï¼Œå®ƒè¢«æ˜¾å¼åœ°è½¬æ¢ä¸º JSON ç±»å‹ã€‚è¿™æ˜¯å› ä¸º c.tags æ˜¯ä¸€ä¸ª JSON æ•°æ®ç±»å‹ï¼Œæ‰€ä»¥éœ€è¦ç¡®ä¿è¿›è¡Œæ¯”è¾ƒçš„å€¼ä¹Ÿæ˜¯ JSON ç±»å‹ã€‚ JSON_CONTAINS(c.tags, CAST(t.id AS JSON))ï¼šè¿™æ˜¯ä¸»è¦çš„æ¯”è¾ƒéƒ¨åˆ†ã€‚JSON_CONTAINS å‡½æ•°ç”¨äºæ£€æŸ¥ä¸€ä¸ª JSON æ•°ç»„ï¼ˆåœ¨è¿™é‡Œæ˜¯ c.tagsï¼‰æ˜¯å¦åŒ…å«ç‰¹å®šå€¼ï¼ˆåœ¨è¿™é‡Œæ˜¯ t.id çš„ JSON è¡¨ç¤ºï¼‰ã€‚å¦‚æœ c.tags åŒ…å« t.id çš„ JSON è¡¨ç¤ºï¼Œå®ƒå°†è¿”å› trueï¼›å¦åˆ™ï¼Œè¿”å› falseã€‚è¿™å°±å…è®¸æŸ¥æ‰¾ channel è¡¨ä¸­å…·æœ‰ç‰¹å®š tag çš„è®°å½•ã€‚ å†ç”¨ä¸€ä¸ªç¤ºä¾‹æ¥è§£é‡Šè¿™ä¸ªè¿‡ç¨‹ï¼š å‡è®¾ channel è¡¨çš„æŸä¸€è¡Œçš„ tags åˆ—ä¸­åŒ…å« JSON æ•°ç»„ [1, 3, 5]ï¼Œæƒ³æŸ¥æ‰¾æ‰€æœ‰åŒ…å« tag è¡¨ä¸­ id ä¸º 3 çš„è®°å½•ã€‚ CAST(t.id AS JSON) å°† t.idï¼ˆ3ï¼‰è½¬æ¢ä¸º JSON æ•°æ®ç±»å‹ï¼Œå˜æˆ 3ã€‚ JSON_CONTAINS(c.tags, 3) å°†æ£€æŸ¥ tags åˆ—ä¸­æ˜¯å¦åŒ…å«å€¼ä¸º 3 çš„å…ƒç´ ã€‚ å› ä¸º [1, 3, 5] åŒ…å«å€¼ 3ï¼Œæ‰€ä»¥è¿™ä¸ªè¡¨è¾¾å¼å°†è¿”å› trueã€‚ è¿™å°±æ˜¯å¦‚ä½•ä½¿ç”¨ CAST å‡½æ•°å’Œ JSON_CONTAINS å‡½æ•°æ¥è¿›è¡Œ JSON æ•°æ®çš„æ¯”è¾ƒå’ŒæŸ¥è¯¢ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒå…è®¸åœ¨ channel è¡¨ä¸­æŸ¥æ‰¾åŒ…å«ç‰¹å®š tag çš„è®°å½•ã€‚ ","date":"2023-10-12","objectID":"/mysql-json-like-search/:0:0","series":[],"tags":["mysql"],"title":"è®°ä¸€æ¬¡ MySQL 8.0 JSON æŸ¥è¯¢","uri":"/mysql-json-like-search/#"},{"categories":["golang"],"content":"xiaobinqt,","date":"2023-10-11","objectID":"/go-channel-principle/","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/"},{"categories":["golang"],"content":" æ¦‚å¿µGo ä¸­çš„ channel æ˜¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ï¼Œè´Ÿè´£åç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚Go è¯­è¨€æå€¡ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè€Œè¦é€šè¿‡é€šä¿¡æ¥å®ç°å†…å­˜å…±äº«ï¼ŒCSPï¼ˆCommunicating Sequential Processï¼‰å¹¶å‘æ¨¡å‹ï¼Œå°±æ˜¯é€šè¿‡ goroutine å’Œ channel æ¥å®ç°çš„ã€‚ channel å¸¸ç”¨çš„ä½¿ç”¨åœºæ™¯æœ‰ï¼š åœæ­¢ä¿¡å·ç›‘å¬ å®šæ—¶ä»»åŠ¡ ç”Ÿäº§æ–¹å’Œæ¶ˆè´¹æ–¹è§£è€¦ æ§åˆ¶å¹¶å‘æ•° ","date":"2023-10-11","objectID":"/go-channel-principle/:1:0","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#æ¦‚å¿µ"},{"categories":["golang"],"content":" æ•°æ®ç»“æ„é€šè¿‡ var å£°æ˜æˆ–è€… make å‡½æ•°åˆ›å»ºçš„ channel å˜é‡æ˜¯ä¸€ä¸ªå­˜å‚¨åœ¨å‡½æ•°æ ˆå¸§ä¸Šçš„æŒ‡é’ˆï¼Œå ç”¨ 8 ä¸ªå­—èŠ‚ï¼ŒæŒ‡å‘å †ä¸Šçš„ hchan ç»“æ„ä½“ã€‚æºç åŒ…ä¸­ src/runtime/chan.go å®šä¹‰äº† hchan çš„æ•°æ®ç»“æ„ï¼š hchanç»“æ„ä½“ï¼š type hchan struct { closed uint32 // channelæ˜¯å¦å…³é—­çš„æ ‡å¿— elemtype *_type // channelä¸­çš„å…ƒç´ ç±»å‹ï¼Œ // channelåˆ†ä¸ºæ— ç¼“å†²å’Œæœ‰ç¼“å†²ä¸¤ç§ã€‚ // å¯¹äºæœ‰ç¼“å†²çš„ channel å­˜å‚¨æ•°æ®ï¼Œä½¿ç”¨äº† ring bufferï¼ˆç¯å½¢ç¼“å†²åŒº) æ¥ç¼“å­˜å†™å…¥çš„æ•°æ®ï¼Œæœ¬è´¨æ˜¯å¾ªç¯æ•°ç»„ // ä¸ºå•¥æ˜¯å¾ªç¯æ•°ç»„ï¼Ÿæ™®é€šæ•°ç»„ä¸è¡Œå—ï¼Œæ™®é€šæ•°ç»„å®¹é‡å›ºå®šæ›´é€‚åˆæŒ‡å®šçš„ç©ºé—´ï¼Œå¼¹å‡ºå…ƒç´ æ—¶ï¼Œæ™®é€šæ•°ç»„éœ€è¦å…¨éƒ¨éƒ½å‰ç§» // å½“ä¸‹æ ‡è¶…è¿‡æ•°ç»„å®¹é‡åä¼šå›åˆ°ç¬¬ä¸€ä¸ªä½ç½®ï¼Œæ‰€ä»¥éœ€è¦æœ‰ä¸¤ä¸ªå­—æ®µè®°å½•å½“å‰è¯»å’Œå†™çš„ä¸‹æ ‡ä½ç½® buf unsafe.Pointer // æŒ‡å‘åº•å±‚å¾ªç¯æ•°ç»„çš„æŒ‡é’ˆï¼ˆç¯å½¢ç¼“å†²åŒºï¼‰ qcount uint // å¾ªç¯æ•°ç»„ä¸­çš„å…ƒç´ æ•°é‡ dataqsiz uint // å¾ªç¯æ•°ç»„çš„é•¿åº¦ elemsize uint16 // å…ƒç´ çš„å¤§å° sendx uint // ä¸‹ä¸€æ¬¡å†™ä¸‹æ ‡çš„ä½ç½® recvx uint // ä¸‹ä¸€æ¬¡è¯»ä¸‹æ ‡çš„ä½ç½® // å°è¯•è¯»å– channel æˆ–å‘ channel å†™å…¥æ•°æ®è€Œè¢«é˜»å¡çš„goroutine recvq waitq // è¯»ç­‰å¾…é˜Ÿåˆ— sendq waitq // å†™ç­‰å¾…é˜Ÿåˆ— lock mutex //äº’æ–¥é”ï¼Œä¿è¯è¯»å†™ channel æ—¶ä¸å­˜åœ¨å¹¶å‘ç«äº‰é—®é¢˜ } ç­‰å¾…é˜Ÿåˆ—ï¼š åŒå‘é“¾è¡¨ï¼ŒåŒ…å«ä¸€ä¸ªå¤´ç»“ç‚¹å’Œä¸€ä¸ªå°¾ç»“ç‚¹ã€‚æ¯ä¸ªèŠ‚ç‚¹æ˜¯ä¸€ä¸ª sudog ç»“æ„ä½“å˜é‡ï¼Œè®°å½•å“ªä¸ªåç¨‹åœ¨ç­‰å¾…ï¼Œç­‰å¾…çš„æ˜¯å“ªä¸ª channelï¼Œç­‰å¾…å‘é€/æ¥æ”¶çš„æ•°æ®åœ¨å“ªé‡Œã€‚ type waitq struct { first *sudog last *sudog } type sudog struct { g *g next *sudog prev *sudog elem unsafe.Pointer c *hchan // ... } ","date":"2023-10-11","objectID":"/go-channel-principle/:2:0","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#æ•°æ®ç»“æ„"},{"categories":["golang"],"content":" åˆ›å»ºä½¿ç”¨ make(chan T, cap) æ¥åˆ›å»º channelï¼Œmake è¯­æ³•ä¼šåœ¨ç¼–è¯‘æ—¶ï¼Œè½¬æ¢ä¸º makechan64 å’Œ makechan func makechan64(t *chantype, size int64) *hchan { if int64(int(size)) != size { panic(plainError(\"makechan: size out of range\")) } return makechan(t, int(size)) } åˆ›å»º channel æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯å¸¦ç¼“å†²çš„ channelï¼Œä¸€ç§æ˜¯ä¸å¸¦ç¼“å†²çš„ channel // å¸¦ç¼“å†² ch := make(chan int, 3) // ä¸å¸¦ç¼“å†² ch := make(chan int) åˆ›å»ºæ—¶ä¼šåšä¸€äº›æ£€æŸ¥: å…ƒç´ å¤§å°ä¸èƒ½è¶…è¿‡ 64K å…ƒç´ çš„å¯¹é½å¤§å°ä¸èƒ½è¶…è¿‡ maxAlign ä¹Ÿå°±æ˜¯ 8 å­—èŠ‚ è®¡ç®—å‡ºæ¥çš„å†…å­˜æ˜¯å¦è¶…è¿‡é™åˆ¶ åˆ›å»ºæ—¶çš„ç­–ç•¥: å¦‚æœæ˜¯æ— ç¼“å†²çš„ channelï¼Œä¼šç›´æ¥ç»™ hchan åˆ†é…å†…å­˜ å¦‚æœæ˜¯æœ‰ç¼“å†²çš„ channelï¼Œå¹¶ä¸”å…ƒç´ ä¸åŒ…å«æŒ‡é’ˆï¼Œé‚£ä¹ˆä¼šä¸º hchan å’Œåº•å±‚æ•°ç»„åˆ†é…ä¸€æ®µè¿ç»­çš„åœ°å€ å¦‚æœæ˜¯æœ‰ç¼“å†²çš„ channelï¼Œå¹¶ä¸”å…ƒç´ åŒ…å«æŒ‡é’ˆï¼Œé‚£ä¹ˆä¼šä¸º hchan å’Œåº•å±‚æ•°ç»„åˆ†åˆ«åˆ†é…åœ°å€ ","date":"2023-10-11","objectID":"/go-channel-principle/:2:1","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#åˆ›å»º"},{"categories":["golang"],"content":" å‘é€å‘é€æ“ä½œï¼Œç¼–è¯‘æ—¶è½¬æ¢ä¸º runtime.chansend å‡½æ•° func chansend(c *hchan, ep unsafe.Pointer, block bool, callerpc uintptr) bool é˜»å¡å¼ï¼š è°ƒç”¨ chansend å‡½æ•°ï¼Œå¹¶ä¸” block=true ch \u003c- 10 éé˜»å¡å¼ï¼š è°ƒç”¨ chansend å‡½æ•°ï¼Œå¹¶ä¸” block=false select { case ch \u003c- 10: ... default: } å‘ channel ä¸­å‘é€æ•°æ®æ—¶å¤§æ¦‚åˆ†ä¸ºä¸¤å¤§å—ï¼šæ£€æŸ¥å’Œæ•°æ®å‘é€ï¼Œæ•°æ®å‘é€æµç¨‹å¦‚ä¸‹ï¼š å¦‚æœ channel çš„è¯»ç­‰å¾…é˜Ÿåˆ—å­˜åœ¨æ¥æ”¶è€…goroutine å°†æ•°æ®ç›´æ¥å‘é€ç»™ç¬¬ä¸€ä¸ªç­‰å¾…çš„ goroutineï¼Œå”¤é†’æ¥æ”¶çš„ goroutine å¦‚æœ channel çš„è¯»ç­‰å¾…é˜Ÿåˆ—ä¸å­˜åœ¨æ¥æ”¶è€… goroutine å¦‚æœå¾ªç¯æ•°ç»„ buf æœªæ»¡ï¼Œé‚£ä¹ˆå°†ä¼šæŠŠæ•°æ®å‘é€åˆ°å¾ªç¯æ•°ç»„bufçš„é˜Ÿå°¾ å¦‚æœå¾ªç¯æ•°ç»„ buf å·²æ»¡ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šèµ°é˜»å¡å‘é€çš„æµç¨‹ï¼Œå°†å½“å‰ goroutine åŠ å…¥å†™ç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶æŒ‚èµ·ç­‰å¾…å”¤é†’ ","date":"2023-10-11","objectID":"/go-channel-principle/:2:2","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#å‘é€"},{"categories":["golang"],"content":" æ¥æ”¶æ¥æ”¶æ“ä½œï¼Œç¼–è¯‘æ—¶è½¬æ¢ä¸º runtime.chanrecv å‡½æ•° func chanrecv(c *hchan, ep unsafe.Pointer, block bool) (selected, received bool) é˜»å¡å¼ï¼š è°ƒç”¨ chanrecv å‡½æ•°ï¼Œå¹¶ä¸” block=true \u003c-ch v := \u003c-ch v, ok := \u003c-ch // å½“ channel å…³é—­æ—¶ï¼Œfor å¾ªç¯ä¼šè‡ªåŠ¨é€€å‡ºï¼Œæ— éœ€ä¸»åŠ¨ç›‘æµ‹ channel æ˜¯å¦å…³é—­ï¼Œå¯ä»¥é˜²æ­¢è¯»å–å·²ç»å…³é—­çš„ channel,é€ æˆè¯»åˆ°æ•°æ®ä¸ºé€šé“æ‰€å­˜å‚¨çš„æ•°æ®ç±»å‹çš„é›¶å€¼ for i := range ch { fmt.Println(i) } éé˜»å¡å¼ï¼š è°ƒç”¨ chanrecv å‡½æ•°ï¼Œå¹¶ä¸” block=false select { case \u003c-ch: ... default } å‘ channel ä¸­æ¥æ”¶æ•°æ®æ—¶å¤§æ¦‚åˆ†ä¸ºä¸¤å¤§å—ï¼Œæ£€æŸ¥å’Œæ•°æ®å‘é€ï¼Œè€Œæ•°æ®æ¥æ”¶æµç¨‹å¦‚ä¸‹ï¼š å¦‚æœ channel çš„å†™ç­‰å¾…é˜Ÿåˆ—å­˜åœ¨å‘é€è€… goroutine å¦‚æœæ˜¯æ— ç¼“å†² channelï¼Œç›´æ¥ä»ç¬¬ä¸€ä¸ªå‘é€è€… goroutine é‚£é‡ŒæŠŠæ•°æ®æ‹·è´ç»™æ¥æ”¶å˜é‡ï¼Œå”¤é†’å‘é€çš„ goroutine å¦‚æœæ˜¯æœ‰ç¼“å†² channelï¼ˆå·²æ»¡ï¼‰ï¼Œå°†å¾ªç¯æ•°ç»„bufçš„é˜Ÿé¦–å…ƒç´ æ‹·è´ç»™æ¥æ”¶å˜é‡ï¼Œå°†ç¬¬ä¸€ä¸ªå‘é€è€… goroutine çš„æ•°æ®æ‹·è´åˆ° bufå¾ª ç¯æ•°ç»„é˜Ÿå°¾ï¼Œå”¤é†’å‘é€çš„ goroutine å¦‚æœ channel çš„å†™ç­‰å¾…é˜Ÿåˆ—ä¸å­˜åœ¨å‘é€è€… goroutine å¦‚æœå¾ªç¯æ•°ç»„ buf éç©ºï¼Œå°†å¾ªç¯æ•°ç»„ buf çš„é˜Ÿé¦–å…ƒç´ æ‹·è´ç»™æ¥æ”¶å˜é‡ å¦‚æœå¾ªç¯æ•°ç»„ buf ä¸ºç©ºï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šèµ°é˜»å¡æ¥æ”¶çš„æµç¨‹ï¼Œå°†å½“å‰ goroutine åŠ å…¥è¯»ç­‰å¾…é˜Ÿåˆ—ï¼Œå¹¶æŒ‚èµ·ç­‰å¾…å”¤é†’ å…³é—­ å…³é—­æ“ä½œï¼Œè°ƒç”¨ close å‡½æ•°ï¼Œç¼–è¯‘æ—¶è½¬æ¢ä¸º runtime.closechan å‡½æ•° close(ch) func closechan(c *hchan) æ¡ˆä¾‹åˆ†æï¼š package main import ( \"fmt\" \"time\" \"unsafe\" ) func main() { // ch æ˜¯é•¿åº¦ä¸º 4 çš„å¸¦ç¼“å†²çš„ channel //åˆå§‹ hchan ç»“æ„ä½“é‡çš„ buf ä¸ºç©ºï¼Œsendx å’Œ recvx å‡ä¸º 0 ch := make(chan string, 4) fmt.Println(ch, unsafe.Sizeof(ch)) go sendTask(ch) go receiveTask(ch) time.Sleep(1 * time.Second) } // G1 æ˜¯å‘é€è€… // å½“ G1 å‘ ch é‡Œå‘é€æ•°æ®æ—¶ï¼Œé¦–å…ˆä¼šå¯¹ buf åŠ é”ï¼Œç„¶åå°† task å­˜å‚¨çš„æ•°æ® copy åˆ° buf ä¸­ï¼Œç„¶å sendx++ï¼Œç„¶åé‡Šæ”¾å¯¹ buf çš„é” func sendTask(ch chan string) { taskList := []string{\"this\", \"is\", \"a\", \"demo\"} for _, task := range taskList { ch \u003c- task //å‘é€ä»»åŠ¡åˆ° channel } } // G2 æ˜¯æ¥æ”¶è€… // å½“ G2 æ¶ˆè´¹ ch çš„æ—¶å€™ï¼Œä¼šé¦–å…ˆå¯¹ buf åŠ é”ï¼Œç„¶åå°† buf ä¸­çš„æ•°æ® copy åˆ° task å˜é‡å¯¹åº”çš„å†…å­˜é‡Œï¼Œç„¶å recvx++,å¹¶é‡Šæ”¾é” func receiveTask(ch chan string) { for { task := \u003c-ch //æ¥æ”¶ä»»åŠ¡ fmt.Println(\"received\", task) //å¤„ç†ä»»åŠ¡ } } hchan ç»“æ„ä½“çš„ä¸»è¦ç»„æˆéƒ¨åˆ†æœ‰å››ä¸ªï¼š ç”¨æ¥ä¿å­˜ goroutine ä¹‹é—´ä¼ é€’æ•°æ®çš„å¾ªç¯æ•°ç»„ï¼šbuf ç”¨æ¥è®°å½•æ­¤å¾ªç¯æ•°ç»„å½“å‰å‘é€æˆ–æ¥æ”¶æ•°æ®çš„ä¸‹æ ‡å€¼ï¼šsendx å’Œ recvx ç”¨äºä¿å­˜å‘è¯¥ chan å‘é€å’Œä»è¯¥ chan æ¥æ”¶æ•°æ®è¢«é˜»å¡çš„ goroutine é˜Ÿåˆ—ï¼š sendq å’Œ recvq ä¿è¯ channel å†™å…¥å’Œè¯»å–æ•°æ®æ—¶çº¿ç¨‹å®‰å…¨çš„é”ï¼šlock ","date":"2023-10-11","objectID":"/go-channel-principle/:2:3","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#æ¥æ”¶"},{"categories":["golang"],"content":" ç‰¹ç‚¹channel æœ‰ 2 ç§ç±»å‹ï¼šæ— ç¼“å†²ã€æœ‰ç¼“å†² æœ‰æ— ç¼“å†² channel æœ‰ 3 ç§æ¨¡å¼ï¼šå†™æ“ä½œæ¨¡å¼ï¼ˆå•å‘é€šé“ï¼‰ã€è¯»æ“ä½œæ¨¡å¼ï¼ˆå•å‘é€šé“ï¼‰ã€è¯»å†™æ“ä½œæ¨¡å¼ï¼ˆåŒå‘é€šé“ï¼‰ æ¨¡å¼ channelæœ‰ 3 ç§çŠ¶æ€ï¼šæœªåˆå§‹åŒ–ã€æ­£å¸¸ã€å…³é—­ çŠ¶æ€ æ³¨æ„ç‚¹ï¼š ä¸€ä¸ª channelä¸èƒ½å¤šæ¬¡å…³é—­ï¼Œä¼šå¯¼è‡´ panic å¦‚æœå¤šä¸ª goroutine éƒ½ç›‘å¬åŒä¸€ä¸ª channelï¼Œé‚£ä¹ˆ channel ä¸Šçš„æ•°æ®éƒ½å¯èƒ½éšæœºè¢«æŸä¸€ä¸ª goroutine å–èµ°è¿›è¡Œæ¶ˆè´¹ å¦‚æœå¤šä¸ª goroutine ç›‘å¬åŒä¸€ä¸ª channelï¼Œå¦‚æœè¿™ä¸ª channel è¢«å…³é—­ï¼Œåˆ™æ‰€æœ‰ goroutine éƒ½èƒ½æ”¶åˆ°é€€å‡ºä¿¡å· ","date":"2023-10-11","objectID":"/go-channel-principle/:3:0","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#ç‰¹ç‚¹"},{"categories":["golang"],"content":" çº¿ç¨‹å®‰å…¨ä¸åŒåç¨‹é€šè¿‡ channel è¿›è¡Œé€šä¿¡ï¼Œæœ¬èº«çš„ä½¿ç”¨åœºæ™¯å°±æ˜¯å¤šçº¿ç¨‹ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œå¿…é¡»å®ç°çº¿ç¨‹å®‰å…¨ã€‚ channel çš„åº•å±‚å®ç°ä¸­ï¼Œhchan ç»“æ„ä½“ä¸­é‡‡ç”¨ Mutex é”æ¥ä¿è¯æ•°æ®è¯»å†™å®‰å…¨ã€‚åœ¨å¯¹å¾ªç¯æ•°ç»„ buf ä¸­çš„æ•°æ®è¿›è¡Œå…¥é˜Ÿå’Œå‡ºé˜Ÿæ“ä½œæ—¶ï¼Œå¿…é¡»å…ˆè·å–äº’æ–¥é”ï¼Œæ‰èƒ½æ“ä½œ channel æ•°æ®ã€‚ ","date":"2023-10-11","objectID":"/go-channel-principle/:3:1","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#çº¿ç¨‹å®‰å…¨"},{"categories":["golang"],"content":" æ§åˆ¶å¹¶å‘é¡ºåºå¤šä¸ª goroutine å¹¶å‘æ‰§è¡Œæ—¶ï¼Œæ¯ä¸€ä¸ª goroutine æŠ¢åˆ°å¤„ç†å™¨çš„æ—¶é—´ç‚¹ä¸ä¸€è‡´ï¼Œgoroutine çš„æ‰§è¡Œæœ¬èº«ä¸èƒ½ä¿è¯é¡ºåºã€‚goroutine å¹¶ä¸èƒ½ä¿è¯å…ˆæ‰§è¡Œã€‚ å¯ä»¥ä½¿ç”¨ channel è¿›è¡Œé€šä¿¡é€šçŸ¥ï¼Œç”¨ channel å»ä¼ é€’ä¿¡æ¯ï¼Œä»è€Œæ§åˆ¶å¹¶å‘æ‰§è¡Œé¡ºåºï¼š package main import ( \"fmt\" \"sync\" \"time\" ) var wg sync.WaitGroup func main() { ch1 := make(chan struct{}, 1) ch2 := make(chan struct{}, 1) ch3 := make(chan struct{}, 1) ch1 \u003c- struct{}{} wg.Add(3) start := time.Now().Unix() go myPrint(\"gorouine1\", ch1, ch2) go myPrint(\"gorouine2\", ch2, ch3) go myPrint(\"gorouine3\", ch3, ch1) wg.Wait() end := time.Now().Unix() fmt.Printf(\"duration:%d\\n\", end-start) } func myPrint(gorouine string, inputchan chan struct{}, outchan chan struct{}) { // æ¨¡æ‹Ÿå†…éƒ¨æ“ä½œè€—æ—¶ time.Sleep(1 * time.Second) select { case \u003c-inputchan: fmt.Printf(\"%s\\n\", gorouine) outchan \u003c- struct{}{} } wg.Done() } è¾“å‡ºï¼š gorouine1 gorouine2 gorouine3 duration:1 ","date":"2023-10-11","objectID":"/go-channel-principle/:3:2","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#æ§åˆ¶å¹¶å‘é¡ºåº"},{"categories":["golang"],"content":" æ­»é”é—®é¢˜æ­»é”ï¼š å•ä¸ªåç¨‹æ°¸ä¹…é˜»å¡ ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„åç¨‹çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ã€‚ channel æ­»é”åœºæ™¯ï¼š éç¼“å­˜ channel åªå†™ä¸è¯» éç¼“å­˜ channel è¯»åœ¨å†™åé¢ ç¼“å­˜ channel å†™å…¥è¶…è¿‡ç¼“å†²åŒºæ•°é‡ ç©ºè¯» å¤šä¸ªåç¨‹äº’ç›¸ç­‰å¾… éç¼“å­˜ channel åªå†™ä¸è¯» func deadlock1() { ch := make(chan int) ch \u003c- 3 // è¿™é‡Œä¼šå‘ç”Ÿä¸€ç›´é˜»å¡çš„æƒ…å†µï¼Œæ‰§è¡Œä¸åˆ°ä¸‹é¢ä¸€å¥ } éç¼“å­˜ channel è¯»åœ¨å†™åé¢ func deadlock2() { ch := make(chan int) ch \u003c- 3 // è¿™é‡Œä¼šå‘ç”Ÿä¸€ç›´é˜»å¡çš„æƒ…å†µï¼Œæ‰§è¡Œä¸åˆ°ä¸‹é¢ä¸€å¥ num := \u003c-ch fmt.Println(\"num=\", num) } func deadlock2() { ch := make(chan int) ch \u003c- 100 // è¿™é‡Œä¼šå‘ç”Ÿä¸€ç›´é˜»å¡çš„æƒ…å†µï¼Œæ‰§è¡Œä¸åˆ°ä¸‹é¢ä¸€å¥ go func() { num := \u003c-ch fmt.Println(\"num=\", num) }() time.Sleep(time.Second) } ç¼“å­˜ channel å†™å…¥è¶…è¿‡ç¼“å†²åŒºæ•°é‡ func deadlock3() { ch := make(chan int, 3) ch \u003c- 3 ch \u003c- 4 ch \u003c- 5 ch \u003c- 6 // è¿™é‡Œä¼šå‘ç”Ÿä¸€ç›´é˜»å¡çš„æƒ…å†µ } ç©ºè¯» func deadlock4() { ch := make(chan int) // ch := make(chan int, 1) fmt.Println(\u003c-ch) // è¿™é‡Œä¼šå‘ç”Ÿä¸€ç›´é˜»å¡çš„æƒ…å†µ } å¤šä¸ªåç¨‹äº’ç›¸ç­‰å¾… func deadlock5() { ch1 := make(chan int) ch2 := make(chan int) // äº’ç›¸ç­‰å¯¹æ–¹é€ æˆæ­»é” go func() { for { select { case num := \u003c-ch1: fmt.Println(\"num=\", num) ch2 \u003c- 100 } } }() for { select { case num := \u003c-ch2: fmt.Println(\"num=\", num) ch1 \u003c- 300 } } } ","date":"2023-10-11","objectID":"/go-channel-principle/:4:0","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#æ­»é”é—®é¢˜"},{"categories":["golang"],"content":" å‚è€ƒ golangâ€”â€”channel ","date":"2023-10-11","objectID":"/go-channel-principle/:5:0","series":["golang"],"tags":["golang"],"title":"Go channel ä½¿ç”¨åˆ†æ","uri":"/go-channel-principle/#å‚è€ƒ"},{"categories":["golang"],"content":"xiaobinqt,","date":"2023-10-10","objectID":"/go-slice-principle/","series":["golang"],"tags":["golang"],"title":"Go Slice å®ç°åŸç†","uri":"/go-slice-principle/"},{"categories":["golang"],"content":" ä»€ä¹ˆæ˜¯ sliceåˆ‡ç‰‡æ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œå®ƒçš„åº•å±‚æ˜¯æ•°ç»„ï¼Œå¯ä»¥ç†è§£ä¸ºå¯¹åº•å±‚æ•°ç»„çš„æŠ½è±¡ã€‚ æºç åŒ…ä¸­ src/runtime/slice.go å®šä¹‰äº† slice çš„æ•°æ®ç»“æ„ï¼š type slice struct { array unsafe.Pointer // ArbitraryType int len int cap int } array æ˜¯æŒ‡å‘åº•å±‚æ•°ç»„çš„æŒ‡é’ˆï¼Œå ç”¨ 8 ä¸ªå­—èŠ‚ã€‚len æ˜¯åˆ‡ç‰‡çš„é•¿åº¦ï¼Œå ç”¨ 8 ä¸ªå­—èŠ‚ã€‚cap æ˜¯åˆ‡ç‰‡çš„å®¹é‡ï¼Œcap æ€»æ˜¯å¤§äºç­‰äº len çš„ï¼Œå ç”¨ 8 ä¸ªå­—èŠ‚ã€‚æ‰€ä»¥ slice å ç”¨ 24 ä¸ªå­—èŠ‚ã€‚ slice æœ‰ 4 ç§åˆå§‹åŒ–æ–¹å¼ // åˆå§‹åŒ–æ–¹å¼1ï¼šç›´æ¥å£°æ˜ var slice1 []int // åˆå§‹åŒ–æ–¹å¼2ï¼šä½¿ç”¨å­—é¢é‡ slice2 := []int{1, 2, 3, 4} // åˆå§‹åŒ–æ–¹å¼3ï¼šä½¿ç”¨ make åˆ›å»ºslice slice3 := make([]int, 3, 5) // åˆå§‹åŒ–æ–¹å¼4: ä»åˆ‡ç‰‡æˆ–æ•°ç»„æˆªå– slcie4 := arr[1:3] å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç ï¼Œçœ‹ä¸‹ slice åˆå§‹åŒ–è°ƒç”¨çš„åº•å±‚å‡½æ•°ï¼š package main import \"fmt\" func main() { slice := make([]int, 0) slice = append(slice, 1) fmt.Println(slice, len(slice), cap(slice)) } é€šè¿‡ go tool compile -S main.go | grep CALL å¾—åˆ°æ±‡ç¼–ä»£ç  0x0032 00050 (main.go:6) CALL runtime.makeslice(SB) 0x004b 00075 (main.go:7) CALL runtime.growslice(SB) 0x0076 00118 (main.go:8) CALL runtime.convTslice(SB) 0x0091 00145 (main.go:8) CALL runtime.convT64(SB) 0x00ac 00172 (main.go:8) CALL runtime.convT64(SB) 0x00e0 00224 ($GOROOT/src/fmt/print.go:274) CALL fmt.Fprintln(SB) 0x00f5 00245 (main.go:5) CALL runtime.morestack_noctxt(SB) åˆå§‹åŒ– slice è°ƒç”¨çš„æ˜¯ runtime.makesliceï¼Œmakeslice å‡½æ•°çš„å·¥ä½œä¸»è¦å°±æ˜¯è®¡ç®— slice æ‰€éœ€å†…å­˜å¤§å°ï¼Œç„¶åè°ƒç”¨ mallocgc è¿›è¡Œå†…å­˜çš„åˆ†é…ã€‚ æ‰€éœ€å†…å­˜å¤§å° = åˆ‡ç‰‡ä¸­å…ƒç´ å¤§å° * åˆ‡ç‰‡çš„å®¹é‡ã€‚ package runtime func makeslice(et *_type, len, cap int) unsafe.Pointer { mem, overflow := math.MulUintptr(et.size, uintptr(cap)) if overflow || mem \u003e maxAlloc || len \u003c 0 || len \u003e cap { // NOTE: Produce a 'len out of range' error instead of a // 'cap out of range' error when someone does make([]T, bignumber). // 'cap out of range' is true too, but since the cap is only being // supplied implicitly, saying len is clearer. // See golang.org/issue/4085. mem, overflow := math.MulUintptr(et.size, uintptr(len)) if overflow || mem \u003e maxAlloc || len \u003c 0 { panicmakeslicelen() } panicmakeslicecap() } return mallocgc(mem, et, true) } ","date":"2023-10-10","objectID":"/go-slice-principle/:1:0","series":["golang"],"tags":["golang"],"title":"Go Slice å®ç°åŸç†","uri":"/go-slice-principle/#ä»€ä¹ˆæ˜¯-slice"},{"categories":["golang"],"content":" array å’Œ slice åŒºåˆ« æ•°ç»„åˆå§‹åŒ–å¿…é¡»æŒ‡å®šé•¿åº¦ï¼Œå¹¶ä¸”é•¿åº¦å°±æ˜¯å›ºå®šçš„ åˆ‡ç‰‡çš„é•¿åº¦æ˜¯ä¸å›ºå®šçš„ï¼Œå¯ä»¥è¿½åŠ å…ƒç´ ï¼Œåœ¨è¿½åŠ æ—¶å¯èƒ½ä½¿åˆ‡ç‰‡çš„å®¹é‡å¢å¤§ æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œå°†ä¸€ä¸ªæ•°ç»„èµ‹å€¼ç»™å¦ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œä¼ é€’çš„æ˜¯ä¸€ä»½æ·±æ‹·è´ï¼Œå‡½æ•°ä¼ å‚æ“ä½œéƒ½ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„æ•°æ®ï¼Œä¼šå ç”¨é¢å¤–çš„å†…å­˜ï¼Œå‡½æ•°å†…å¯¹æ•°ç»„å…ƒç´ å€¼çš„ä¿®æ”¹ï¼Œä¸ä¼šä¿®æ”¹åŸæ•°ç»„å†…å®¹ã€‚åˆ‡ç‰‡æ˜¯å¼•ç”¨ç±»å‹ï¼Œå°†ä¸€ä¸ªåˆ‡ç‰‡èµ‹å€¼ç»™å¦ä¸€ä¸ªåˆ‡ç‰‡æ—¶ï¼Œä¼ é€’çš„æ˜¯ä¸€ä»½æµ…æ‹·è´ï¼Œå‡½æ•°ä¼ å‚æ“ä½œä¸ä¼šæ‹·è´æ•´ä¸ªåˆ‡ç‰‡ï¼Œåªä¼šå¤åˆ¶ len å’Œ capï¼Œåº•å±‚å…±ç”¨åŒä¸€ä¸ªæ•°ç»„ï¼Œä¸ä¼šå ç”¨é¢å¤–çš„å†…å­˜ï¼Œå‡½æ•°å†…å¯¹æ•°ç»„å…ƒç´ å€¼çš„ä¿®æ”¹ï¼Œä¼šä¿®æ”¹åŸæ•°ç»„å†…å®¹ã€‚ æ•°ç»„éœ€è¦éå†è®¡ç®—æ•°ç»„é•¿åº¦ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n) åˆ‡ç‰‡åº•å±‚åŒ…å« len å­—æ®µï¼Œå¯ä»¥é€šè¿‡ len() è®¡ç®—åˆ‡ç‰‡é•¿åº¦ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1) ","date":"2023-10-10","objectID":"/go-slice-principle/:2:0","series":["golang"],"tags":["golang"],"title":"Go Slice å®ç°åŸç†","uri":"/go-slice-principle/#array-å’Œ-slice-åŒºåˆ«"},{"categories":["golang"],"content":" slice æ‰©å®¹æœºåˆ¶","date":"2023-10-10","objectID":"/go-slice-principle/:3:0","series":["golang"],"tags":["golang"],"title":"Go Slice å®ç°åŸç†","uri":"/go-slice-principle/#slice-æ‰©å®¹æœºåˆ¶"},{"categories":["golang"],"content":" æ—§è§„åˆ™å­˜åœ¨çš„é—®é¢˜åœ¨ 1.17 åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæ‰©å®¹æœºåˆ¶æ˜¯è¿™æ ·çš„ğŸ‘‡ï¼š å½“æ–°åˆ‡ç‰‡éœ€è¦çš„å®¹é‡ cap å¤§äºä¸¤å€æ‰©å®¹çš„å®¹é‡ï¼Œåˆ™ç›´æ¥æŒ‰ç…§æ–°åˆ‡ç‰‡éœ€è¦çš„å®¹é‡æ‰©å®¹ï¼› å½“åŸ slice å®¹é‡ \u003c 1024 çš„æ—¶å€™ï¼Œæ–° slice å®¹é‡å˜æˆåŸæ¥çš„ 2 å€ï¼› å½“åŸ slice å®¹é‡ \u003e 1024ï¼Œè¿›å…¥ä¸€ä¸ªå¾ªç¯ï¼Œæ¯æ¬¡å®¹é‡å˜æˆåŸæ¥çš„1.25å€ï¼Œç›´åˆ°å¤§äºæœŸæœ›å®¹é‡ã€‚ slice æ‰©å®¹æ—¶ä¼šè°ƒç”¨ runtime.growsliceã€‚è¿™é‡Œåªå…³æ³¨è¯¥å‡½æ•° slice è®¡ç®—å®¹é‡éƒ¨åˆ†çš„é€»è¾‘ï¼Œè®¡ç®—æ–¹æ³•å¦‚ä¸‹: // 1.17åŠä»¥å‰çš„ç‰ˆæœ¬ä¸­ // oldæŒ‡åˆ‡ç‰‡çš„æ—§å®¹é‡, capæŒ‡æœŸæœ›çš„æ–°å®¹é‡ func growslice(old, cap int) int { newcap := old doublecap := newcap + newcap // å¦‚æœæœŸæœ›å®¹é‡å¤§äºæ—§å®¹é‡çš„2å€ï¼Œåˆ™ç›´æ¥ä½¿ç”¨æœŸæœ›å®¹é‡ä½œä¸ºæœ€ç»ˆå®¹é‡ if cap \u003e doublecap { newcap = cap } else { // å¦‚æœæ—§å®¹é‡å°äº1024ï¼Œåˆ™ç›´æ¥ç¿»å€ if old \u003c 1024 { newcap = doublecap } else { // æ¯æ¬¡å¢é•¿å¤§çº¦1.25å€ for 0 \u003c newcap \u0026\u0026 newcap \u003c cap { newcap += newcap / 4 } if newcap \u003c= 0 { newcap = cap } } } // è¿™é‡Œå¿½ç•¥äº†å¯¹é½æ“ä½œ return newcap } è¿™ä¸ªæ‰©å®¹æœºåˆ¶ä»¤ä¸€äº›äººäº§ç”Ÿäº†ä¸€äº›å›°æƒ‘ï¼Œå› ä¸ºå®ƒä¼šäº§ç”Ÿä¸€äº› â€œçœ‹èµ·æ¥ä¸é‚£ä¹ˆè‡ªç„¶çš„è¡Œä¸ºâ€ã€‚æ¯”å¦‚å®ƒè®¡ç®—å‡ºæ¥çš„æ–°å®¹é‡ä¸æ˜¯å•è°ƒé€’å¢çš„ï¼Œä¸‹é¢çš„ç¨‹åºä¼šå°†ä¸åŒå®¹é‡ slice çš„æ‰©å®¹ç»“æœæ‰“å°å‡ºæ¥: package main import ( \"fmt\" ) func main() { for i := 0; i \u003c 2000; i += 100 { fmt.Println(i, cap(append(make([]bool, i), true))) } } è¯¥ç¨‹åºçš„è¾“å‡ºå¦‚ä¸‹ï¼ˆæ—§ç‰ˆæœ¬çš„æ‰©å®¹è§„åˆ™ï¼‰: // ç¬¬ä¸€åˆ—æ˜¯åˆ‡ç‰‡çš„æ—§å®¹é‡ // ç¬¬äºŒåˆ—æ˜¯æ‰©å®¹åçš„å®¹é‡ 0 8 100 208 200 416 300 640 400 896 500 1024 600 1280 700 1408 800 1792 900 2048 1000 2048 1100 1408 \u003c-- åœ¨è¿™ä¸ªç‚¹ï¼Œæ‰©å®¹åçš„æ–°å®¹é‡æ¯”ä¸Šé¢çš„å®¹é‡è¦å° 1200 1536 1300 1792 1400 1792 1500 2048 1600 2048 1700 2304 1800 2304 1900 2688 å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ slice çš„å®¹é‡åˆšåˆšè§¦å‘å¤§äº 1024 å¢é•¿ 1.25 å€è¿™ä¸ªæ¡ä»¶çš„æ—¶å€™ï¼Œè®¡ç®—å‡ºæ¥çš„æ–°å®¹é‡è¦å°äºä¹‹å‰è®¡ç®—å‡ºçš„å®¹é‡ï¼Œè¿™é‡Œç»˜åˆ¶äº†ä¸€å¼ å›¾è¡¨ï¼Œå¯ä»¥æ„Ÿå—ä¸€ä¸‹: ","date":"2023-10-10","objectID":"/go-slice-principle/:3:1","series":["golang"],"tags":["golang"],"title":"Go Slice å®ç°åŸç†","uri":"/go-slice-principle/#æ—§è§„åˆ™å­˜åœ¨çš„é—®é¢˜"},{"categories":["golang"],"content":" æ›´åŠ å¹³æ»‘çš„æ‰©å®¹ç®—æ³•ä» go1.18 å¼€å§‹ï¼Œslice å®¹é‡çš„è®¡ç®—æ–¹æ³•è¢«æ”¹ä¸ºäº†è¿™æ ·: // åªå…³å¿ƒæ‰©å®¹è§„åˆ™çš„ç®€åŒ–ç‰ˆgrowslice func growslice(old, cap int) int { newcap := old doublecap := newcap + newcap if cap \u003e doublecap { newcap = cap } else { const threshold = 256 // ä¸åŒç‚¹1 if old \u003c threshold { newcap = doublecap } else { for 0 \u003c newcap \u0026\u0026 newcap \u003c cap { newcap += (newcap + 3*threshold) / 4 // ä¸åŒç‚¹2 } if newcap \u003c= 0 { newcap = cap } } } return newcap } æ–°ç‰ˆçš„æ‰©å®¹ç®—æ³•ç›¸è¾ƒäºæ—§çš„æœ‰ä¸¤å¤„ä¸åŒï¼Œé¦–å…ˆæ˜¯åŒå€å®¹é‡æ‰©å®¹çš„æœ€å¤§é˜ˆå€¼ä» 1024 é™ä¸ºäº† 256ï¼Œåªè¦è¶…è¿‡äº† 256ï¼Œå°±å¼€å§‹è¿›è¡Œç¼“æ…¢çš„å¢é•¿ã€‚å…¶æ¬¡æ˜¯å¢é•¿æ¯”ä¾‹çš„è°ƒæ•´ï¼Œä¹‹å‰è¶…è¿‡äº†é˜ˆå€¼ä¹‹åï¼ŒåŸºæœ¬ä¸ºæ’å®šçš„ 1.25 å€å¢é•¿ï¼Œè€Œç°åœ¨è¶…è¿‡äº†é˜ˆå€¼ä¹‹åï¼Œå¢é•¿æ¯”ä¾‹æ˜¯ä¼šåŠ¨æ€è°ƒæ•´çš„: å½“æ–°åˆ‡ç‰‡éœ€è¦çš„å®¹é‡ cap å¤§äºä¸¤å€æ‰©å®¹çš„å®¹é‡ï¼Œåˆ™ç›´æ¥æŒ‰ç…§æ–°åˆ‡ç‰‡éœ€è¦çš„å®¹é‡æ‰©å®¹ï¼› å½“åŸ slice å®¹é‡ \u003c thresholdï¼ˆ256ï¼‰ çš„æ—¶å€™ï¼Œæ–° slice å®¹é‡å˜æˆåŸæ¥çš„ 2 å€ï¼› å½“åŸ slice å®¹é‡ \u003e thresholdï¼ˆ256ï¼‰ï¼Œè¿›å…¥ä¸€ä¸ªå¾ªç¯ï¼Œæ¯æ¬¡å®¹é‡å¢åŠ  (æ—§å®¹é‡+3*threshold)/4ã€‚ åˆå§‹é•¿åº¦ å¢é•¿æ¯”ä¾‹ 256 2.0 512 1.63 1024 1.44 2048 1.35 4096 1.30 å¯ä»¥çœ‹åˆ°ï¼Œéšç€åˆ‡ç‰‡å®¹é‡çš„å˜å¤§ï¼Œå¢é•¿æ¯”ä¾‹é€æ¸å‘ç€ 1.25 è¿›è¡Œé æ‹¢ã€‚ è¿™æ¬¡æ›´æ”¹ä¹‹åï¼Œslice æ‰©å®¹æ•´ä½“çš„å¢é•¿æ›²çº¿å˜å¾—æ›´åŠ å¹³æ»‘ï¼š å…³äºæ›´å¤šä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹#2dda92ff6f9f07eeb110ecbf0fc2d7a0ddd27f9d ","date":"2023-10-10","objectID":"/go-slice-principle/:3:2","series":["golang"],"tags":["golang"],"title":"Go Slice å®ç°åŸç†","uri":"/go-slice-principle/#æ›´åŠ å¹³æ»‘çš„æ‰©å®¹ç®—æ³•"},{"categories":["golang"],"content":" slice æ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨çš„çº¿ç¨‹å®‰å…¨çš„å®šä¹‰æ˜¯ï¼š å¤šä¸ªçº¿ç¨‹è®¿é—®ï¼ˆè¯»ï¼‰åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºéƒ½å¯ä»¥è·å¾—æ­£ç¡®çš„ç»“æœï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ è‹¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œå†™æ“ä½œï¼Œä¸€èˆ¬éƒ½éœ€è¦è€ƒè™‘çº¿ç¨‹åŒæ­¥ï¼Œå¦åˆ™çš„è¯å°±å¯èƒ½å½±å“çº¿ç¨‹å®‰å…¨ã€‚ Go è¯­è¨€å®ç°çº¿ç¨‹å®‰å…¨å¸¸ç”¨çš„æ–¹å¼æœ‰ï¼š äº’æ–¥é” è¯»å†™é” åŸå­æ“ä½œ sync.once sync.atomic channel slice åº•å±‚ç»“æ„å¹¶æ²¡æœ‰ä½¿ç”¨åŠ é”ç­‰æ–¹å¼ï¼Œä¸æ”¯æŒå¹¶å‘è¯»å†™ï¼Œæ‰€ä»¥ slice å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½¿ç”¨å¤šä¸ª goroutine å¯¹ç±»å‹ä¸º slice çš„å˜é‡è¿›è¡Œæ“ä½œï¼Œæ¯æ¬¡è¾“å‡ºçš„å€¼å¤§æ¦‚ç‡éƒ½ä¸ä¼šä¸€æ ·ï¼Œä¸é¢„æœŸå€¼ä¸ä¸€è‡´ï¼Œslice åœ¨å¹¶å‘æ‰§è¡Œä¸­ä¸ä¼šæŠ¥é”™ï¼Œä½†æ˜¯æ•°æ®å¯èƒ½ä¼šä¸¢å¤±ã€‚ package main import ( \"log\" \"sync\" ) // åˆ‡ç‰‡éå¹¶å‘å®‰å…¨* å¤šæ¬¡æ‰§è¡Œï¼Œæ¯æ¬¡å¾—åˆ°çš„ç»“æœéƒ½ä¸ä¸€æ ·* å¯ä»¥è€ƒè™‘ä½¿ç”¨ channel æœ¬èº«çš„ç‰¹æ€§ (é˜»å¡) æ¥å®ç°å®‰å…¨çš„å¹¶å‘è¯»å†™ func main() { TestSliceConcurrencySafe() } func TestSliceConcurrencySafe() { a := make([]int, 0) var wg sync.WaitGroup for i := 0; i \u003c 10000; i++ { wg.Add(1) go func(i int) { a = append(a, i) wg.Done() }(i) } wg.Wait() log.Fatalln(len(a)) // è¿™é‡Œçš„å€¼ä¸æ˜¯ 10000 } ","date":"2023-10-10","objectID":"/go-slice-principle/:4:0","series":["golang"],"tags":["golang"],"title":"Go Slice å®ç°åŸç†","uri":"/go-slice-principle/#slice-æ˜¯å¦æ˜¯çº¿ç¨‹å®‰å…¨çš„"},{"categories":["golang"],"content":" å‚è€ƒ Go sliceæ–°çš„æ‰©å®¹æœºåˆ¶ Go 1.18 å…¨æ–°çš„åˆ‡ç‰‡æ‰©å®¹æœºåˆ¶ ","date":"2023-10-10","objectID":"/go-slice-principle/:5:0","series":["golang"],"tags":["golang"],"title":"Go Slice å®ç°åŸç†","uri":"/go-slice-principle/#å‚è€ƒ"},{"categories":["golang"],"content":"xiaobinqt,","date":"2023-10-10","objectID":"/escape-heap/","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/"},{"categories":["golang"],"content":" åœ¨ C/C++ å¼€å‘ä¸­ï¼ŒåŠ¨æ€åˆ†é…å†…å­˜ï¼ˆnew/mallocï¼‰éœ€è¦å¼€å‘è€…æ‰‹åŠ¨é‡Šæ”¾èµ„æºã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œéœ€è¦ç”³è¯·å¤šå°‘å†…å­˜ç©ºé—´å¯ä»¥å¾ˆå¥½çš„æŒæ¡æ€ä¹ˆåˆ†é…ã€‚ä½†æ˜¯è¿™æœ‰ä¸ªç¼ºç‚¹ï¼Œå¦‚æœå¿˜è®°é‡Šæ”¾å†…å­˜ï¼Œåˆ™ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚åœ¨å¾ˆå¤šé«˜çº§è¯­è¨€ä¸­ï¼ˆpython/Go/javaï¼‰éƒ½åŠ ä¸Šäº†åƒåœ¾å›æ”¶æœºåˆ¶ã€‚ ","date":"2023-10-10","objectID":"/escape-heap/:0:0","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#"},{"categories":["golang"],"content":" å †å’Œæ ˆæ ˆå¯ä»¥ç®€å•å¾—ç†è§£æˆä¸€æ¬¡å‡½æ•°è°ƒç”¨å†…éƒ¨ç”³è¯·åˆ°çš„å†…å­˜ï¼Œå®ƒä»¬ä¼šéšç€å‡½æ•°çš„è¿”å›æŠŠå†…å­˜è¿˜ç»™ç³»ç»Ÿã€‚ä¸‹é¢æ¥çœ‹çœ‹ä¸€ä¸ªä¾‹å­ï¼š func F() { temp := make([]int, 0, 20) ... } ä¸Šé¢çš„ä¾‹å­ï¼Œå†…å‡½æ•°å†…éƒ¨ç”³è¯·çš„ä¸´æ—¶å˜é‡ï¼Œå³ä½¿æ˜¯ç”¨ make ç”³è¯·åˆ°çš„å†…å­˜ï¼Œå¦‚æœå‘ç°åœ¨é€€å‡ºå‡½æ•°åæ²¡æœ‰ç”¨äº†ï¼Œé‚£ä¹ˆå°±æŠŠä¸¢åˆ°æ ˆä¸Šï¼Œæ¯•ç«Ÿæ ˆä¸Šçš„å†…å­˜åˆ†é…æ¯”å †ä¸Šå¿«å¾ˆå¤šã€‚ å†çœ‹ä¸€ä¸ªå †çš„ä¾‹å­ï¼š func F() []int{ a := make([]int, 0, 20) return a } ä¸Šé¢è¿™æ®µä»£ç ï¼Œç”³è¯·çš„ä»£ç å’Œä¸Šé¢çš„ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯ç”³è¯·åä½œä¸ºè¿”å›å€¼è¿”å›äº†ï¼Œç¼–è¯‘å™¨ä¼šè®¤ä¸ºåœ¨é€€å‡ºå‡½æ•°ä¹‹åè¿˜æœ‰å…¶ä»–åœ°æ–¹åœ¨å¼•ç”¨ï¼Œå½“å‡½æ•°è¿”å›ä¹‹åå¹¶ä¸ä¼šå°†å…¶å†…å­˜å½’è¿˜ã€‚é‚£ä¹ˆå°±ç”³è¯·åˆ°å †é‡Œã€‚ å¦‚æœå˜é‡éƒ½åˆ†é…åˆ°å †ä¸Šï¼Œå †ä¸åƒæ ˆå¯ä»¥è‡ªåŠ¨æ¸…ç†ã€‚å®ƒä¼šå¼•èµ· Go é¢‘ç¹åœ°è¿›è¡Œåƒåœ¾å›æ”¶ï¼Œè€Œåƒåœ¾å›æ”¶ä¼šå ç”¨æ¯”è¾ƒå¤§çš„ç³»ç»Ÿå¼€é”€ã€‚ ","date":"2023-10-10","objectID":"/escape-heap/:1:0","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#å †å’Œæ ˆ"},{"categories":["golang"],"content":" å †å’Œæ ˆç›¸æ¯”å †é€‚åˆä¸å¯é¢„çŸ¥çš„å¤§å°çš„å†…å­˜åˆ†é…ã€‚ä½†æ˜¯ä¸ºæ­¤ä»˜å‡ºçš„ä»£ä»·æ˜¯åˆ†é…é€Ÿåº¦è¾ƒæ…¢ï¼Œè€Œä¸”ä¼šå½¢æˆå†…å­˜ç¢ç‰‡ã€‚ æ ˆå†…å­˜åˆ†é…åˆ™ä¼šéå¸¸å¿«ï¼Œæ ˆåˆ†é…å†…å­˜åªéœ€è¦ä¸¤ä¸ª CPU æŒ‡ä»¤ï¼šPUSH å’Œ RELEASE åˆ†é…å’Œé‡Šæ”¾ï¼›è€Œå †åˆ†é…å†…å­˜é¦–å…ˆéœ€è¦å»æ‰¾åˆ°ä¸€å—å¤§å°åˆé€‚çš„å†…å­˜å—ã€‚ä¹‹åè¦é€šè¿‡åƒåœ¾å›æ”¶æ‰èƒ½é‡Šæ”¾ã€‚ å†…å­˜ç¢ç‰‡ å†…å­˜ç¢ç‰‡ï¼ˆMemory Fragmentationï¼‰æ˜¯æŒ‡è®¡ç®—æœºç³»ç»Ÿä¸­å­˜åœ¨çš„ä¸€ç§å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„æƒ…å†µï¼Œå®ƒå¯èƒ½å¯¼è‡´ç³»ç»Ÿä¸­çš„å¯ç”¨å†…å­˜ä¸è¿ç»­ã€é›¶æ•£åˆ†å¸ƒï¼Œä½¿å¾—ç³»ç»Ÿæ•ˆç‡ä¸‹é™æˆ–è€…æ— æ³•æœ‰æ•ˆåœ°åˆ©ç”¨å¯ç”¨å†…å­˜ã€‚å†…å­˜ç¢ç‰‡é€šå¸¸åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼šå¤–éƒ¨ç¢ç‰‡å’Œå†…éƒ¨ç¢ç‰‡ã€‚ å¤–éƒ¨ç¢ç‰‡ï¼ˆExternal Fragmentationï¼‰ï¼š å¤–éƒ¨ç¢ç‰‡æŒ‡çš„æ˜¯åœ¨å¯ç”¨å†…å­˜ä¸­å­˜åœ¨çš„æœªåˆ†é…çš„å°å—å†…å­˜ç©ºé—´ï¼Œè™½ç„¶æ€»çš„å¯ç”¨å†…å­˜å¤§å°è¶³å¤Ÿï¼Œä½†æ˜¯è¿™äº›å°å—å†…å­˜åˆ†æ•£åœ¨ä¸åŒçš„åœ°æ–¹ï¼Œæ— æ³•è¢«æœ‰æ•ˆåœ°åˆ©ç”¨ã€‚ å¤–éƒ¨ç¢ç‰‡é€šå¸¸å‘ç”Ÿåœ¨åŠ¨æ€å†…å­˜åˆ†é…å’Œé‡Šæ”¾çš„è¿‡ç¨‹ä¸­ã€‚å½“ç¨‹åºè¯·æ±‚åˆ†é…ä¸€å—å†…å­˜æ—¶ï¼Œç³»ç»Ÿä¼šæ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„è¿ç»­å†…å­˜å—æ¥æ»¡è¶³éœ€æ±‚ï¼Œä½†æ˜¯å¦‚æœå¯ç”¨å†…å­˜è¢«åˆ†å‰²æˆå¤šä¸ªå°å—ï¼Œå°±å¯èƒ½å‡ºç°æ— æ³•åˆ†é…æ‰€éœ€å¤§å°çš„å†…å­˜å—çš„æƒ…å†µã€‚ å†…éƒ¨ç¢ç‰‡ï¼ˆInternal Fragmentationï¼‰ï¼š å†…éƒ¨ç¢ç‰‡æ˜¯æŒ‡å·²ç»åˆ†é…ç»™ç¨‹åºçš„å†…å­˜å—ä¸­ï¼Œæœ‰ä¸€éƒ¨åˆ†å†…å­˜æ²¡æœ‰è¢«ç¨‹åºæœ‰æ•ˆåˆ©ç”¨ï¼Œé€ æˆäº†æµªè´¹ã€‚ å†…éƒ¨ç¢ç‰‡é€šå¸¸å‘ç”Ÿåœ¨å†…å­˜åˆ†é…æ—¶ï¼Œåˆ†é…äº†æ¯”å®é™…éœ€è¦æ›´å¤§çš„å†…å­˜å—ï¼Œä½†ç¨‹åºæ²¡æœ‰å……åˆ†åˆ©ç”¨è¿™äº›é¢å¤–çš„å†…å­˜ç©ºé—´ã€‚ å†…å­˜ç¢ç‰‡çš„é‡è¦æ€§å’Œå½±å“ï¼š å†…å­˜ç¢ç‰‡ä¼šå¯¼è‡´ç³»ç»Ÿæ€§èƒ½ä¸‹é™ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿéœ€è¦æ›´å¤šçš„æ—¶é—´æ¥å¯»æ‰¾è¶³å¤Ÿå¤§çš„è¿ç»­å†…å­˜å—æ¥æ»¡è¶³ç¨‹åºçš„éœ€æ±‚ã€‚ å†…å­˜ç¢ç‰‡ä¹Ÿå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒæˆ–è¿è¡Œä¸ç¨³å®šï¼Œç‰¹åˆ«æ˜¯å½“å†…å­˜ç¢ç‰‡ç§¯ç´¯åˆ°ä¸€å®šç¨‹åº¦æ—¶ã€‚ ä¸ºäº†å‡å°‘å†…å­˜ç¢ç‰‡çš„å½±å“ï¼Œç¨‹åºå‘˜å’Œæ“ä½œç³»ç»Ÿé€šå¸¸é‡‡ç”¨ä¸åŒçš„ç­–ç•¥ï¼Œå¦‚å†…å­˜åˆå¹¶ã€å†…å­˜æ± ç­‰ï¼Œä»¥æ›´æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜ã€‚ ","date":"2023-10-10","objectID":"/escape-heap/:1:1","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#å †å’Œæ ˆç›¸æ¯”"},{"categories":["golang"],"content":" é€ƒé€¸åˆ†æé€ƒé€¸åˆ†ææ˜¯ä¸€ç§ç¡®å®šæŒ‡é’ˆåŠ¨æ€èŒƒå›´çš„æ–¹æ³•ã€‚ç®€å•æ¥è¯´å°±æ˜¯åˆ†æåœ¨ç¨‹åºçš„å“ªäº›åœ°æ–¹å¯ä»¥è®¿é—®åˆ°è¯¥æŒ‡é’ˆã€‚ç¼–è¯‘å™¨ä¼šæ ¹æ®å˜é‡æ˜¯å¦è¢«å¤–éƒ¨å¼•ç”¨æ¥å†³å®šæ˜¯å¦é€ƒé€¸ï¼š å¦‚æœå‡½æ•°å¤–éƒ¨æ²¡æœ‰å¼•ç”¨ï¼Œåˆ™ä¼˜å…ˆæ”¾åˆ°æ ˆä¸­ï¼› å¦‚æœå‡½æ•°å¤–éƒ¨å­˜åœ¨å¼•ç”¨ï¼Œåˆ™å¿…å®šæ”¾åˆ°å †ä¸­ï¼› å¯¹æ­¤å¯ä»¥ç†è§£ä¸ºï¼Œé€ƒé€¸åˆ†ææ˜¯ç¼–è¯‘å™¨ç”¨äºå†³å®šå˜é‡åˆ†é…åˆ°å †ä¸Šè¿˜æ˜¯æ ˆä¸Šçš„ä¸€ç§è¡Œä¸ºã€‚ go åœ¨ç¼–è¯‘é˜¶æ®µç¡®ç«‹é€ƒé€¸ï¼Œå¹¶ä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚ ","date":"2023-10-10","objectID":"/escape-heap/:2:0","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#é€ƒé€¸åˆ†æ"},{"categories":["golang"],"content":" æŒ‡é’ˆé€ƒé€¸æé—®ï¼šå‡½æ•°ä¼ é€’æŒ‡é’ˆçœŸçš„æ¯”ä¼ å€¼æ•ˆç‡é«˜å—ï¼Ÿ ä¼ é€’æŒ‡é’ˆå¯ä»¥å‡å°‘åº•å±‚å€¼çš„æ‹·è´ï¼Œå¯ä»¥æé«˜æ•ˆç‡ï¼Œä½†æ˜¯å¦‚æœæ‹·è´çš„æ•°æ®é‡å°ï¼Œç”±äºæŒ‡é’ˆä¼ é€’ä¼šäº§ç”Ÿé€ƒé€¸ï¼Œå¯èƒ½ä¼šä½¿ç”¨å †ï¼Œä¹Ÿå¯èƒ½ä¼šå¢åŠ  GC çš„è´Ÿæ‹…ï¼Œæ‰€ä»¥ä¼ é€’æŒ‡é’ˆä¸ä¸€å®šæ˜¯é«˜æ•ˆçš„ã€‚ å®˜ç½‘ä¸Šä¸Šæœ‰ä¸€ä¸ªå…³äºå˜é‡åˆ†é…çš„é—®é¢˜ How do I know whether a variable is allocated on the heap or the stack? Go å¯ä»¥è¿”å›å±€éƒ¨å˜é‡æŒ‡é’ˆï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªå…¸å‹çš„å˜é‡é€ƒé€¸æ¡ˆä¾‹ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š package main type Student struct { Name string Age int } func StudentRegister(name string, age int) *Student { s := new(Student) //å±€éƒ¨å˜é‡sé€ƒé€¸åˆ°å † s.Name = name s.Age = age return s } func main() { StudentRegister(\"Jim\", 18) } è™½ç„¶åœ¨å‡½æ•° StudentRegister() å†…éƒ¨ s ä¸ºå±€éƒ¨å˜é‡ï¼Œå…¶å€¼é€šè¿‡å‡½æ•°è¿”å›å€¼è¿”å›ï¼Œs æœ¬èº«ä¸ºä¸€æŒ‡é’ˆï¼Œå…¶æŒ‡å‘çš„å†…å­˜åœ°å€ä¸ä¼šæ˜¯æ ˆè€Œæ˜¯å †ï¼Œè¿™å°±æ˜¯å…¸å‹çš„é€ƒé€¸æ¡ˆä¾‹ã€‚ Î» go build -gcflags=-m main.go # command-line-arguments .\\main.go:8:6: can inline StudentRegister .\\main.go:17:6: can inline main .\\main.go:18:17: inlining call to StudentRegister .\\main.go:8:22: leaking param: name .\\main.go:9:10: new(Student) escapes to heap .\\main.go:18:17: new(Student) does not escape æŒ‡ä»¤é›† -gcflags ç”¨äºå°†æ ‡è¯†å‚æ•°ä¼ é€’ç»™ Go ç¼–è¯‘å™¨ï¼Œ-m ä¼šæ‰“å°å‡ºé€ƒé€¸åˆ†æçš„ä¼˜åŒ–ç­–ç•¥ã€‚ å¯è§åœ¨ StudentRegister() å‡½æ•°ä¸­ï¼Œä¹Ÿå³ä»£ç ç¬¬ 9 è¡Œæ˜¾ç¤º escapes to heapï¼Œä»£è¡¨è¯¥è¡Œå†…å­˜åˆ†é…å‘ç”Ÿäº†é€ƒé€¸ç°è±¡ã€‚ ","date":"2023-10-10","objectID":"/escape-heap/:3:0","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#æŒ‡é’ˆé€ƒé€¸"},{"categories":["golang"],"content":" æ ˆç©ºé—´ä¸è¶³é€ƒé€¸ package main func main() { s := make([]int, 1000, 1000) for index, _ := range s { s[index] = index } } ä¸Šé¢ä»£ç ä¸»å‡½æ•°ä¸­åˆ†é…äº†ä¸€ä¸ª 1000 ä¸ªé•¿åº¦çš„åˆ‡ç‰‡ï¼Œæ˜¯å¦é€ƒé€¸å–å†³äºæ ˆç©ºé—´æ˜¯å¦è¶³å¤Ÿå¤§ã€‚ç›´æ¥æŸ¥çœ‹ç¼–è¯‘æç¤ºï¼Œå¦‚ä¸‹ï¼š Î» go build -gcflags=-m main.go # command-line-arguments .\\main.go:3:6: can inline main .\\main.go:5:11: make([]int, 1000, 1000) does not escape æ ¹æ®ä¸Šé¢çš„ä¿¡æ¯ï¼Œæ²¡æœ‰å‘ç”Ÿé€ƒé€¸ã€‚åˆ†é…äº†ä¸€ä¸ª 1000 çš„é•¿åº¦è¿˜ä¸è¶³ä»¥å‘ç”Ÿé€ƒé€¸ç°è±¡ã€‚x10 å€åï¼Œå†çœ‹çœ‹æƒ…å†µã€‚ package main func main() { s := make([]int, 5, 10000) for index, _ := range s { s[index] = index } } Î» go build -gcflags=-m main.go # command-line-arguments .\\main.go:3:6: can inline main .\\main.go:5:11: make([]int, 10000, 10000) escapes to heap å½“åˆ‡ç‰‡é•¿åº¦æ‰©å¤§åˆ° 10000 æ—¶å°±ä¼šé€ƒé€¸ã€‚å®é™…ä¸Šå½“æ ˆç©ºé—´ä¸è¶³ä»¥å­˜æ”¾å½“å‰å¯¹è±¡æ—¶æˆ–æ— æ³•åˆ¤æ–­å½“å‰åˆ‡ç‰‡é•¿åº¦æ—¶ä¼šå°†å¯¹è±¡åˆ†é…åˆ°å †ä¸­ã€‚ ","date":"2023-10-10","objectID":"/escape-heap/:3:1","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#æ ˆç©ºé—´ä¸è¶³é€ƒé€¸"},{"categories":["golang"],"content":" åŠ¨æ€ç±»å‹é€ƒé€¸å¾ˆå¤šå‡½æ•°å‚æ•°ä¸º interface ç±»å‹ã€‚æ¯”å¦‚ï¼š func Printf(format string, a ...interface{}) (n int, err error) func Sprintf(format string, a ...interface{}) string func Fprint(w io.Writer, a ...interface{}) (n int, err error) func Print(a ...interface{}) (n int, err error) func Println(a ...interface{}) (n int, err error) ç¼–è¯‘æœŸé—´å¾ˆéš¾ç¡®å®šå…¶å‚æ•°çš„å…·ä½“ç±»å‹ï¼Œä¹Ÿèƒ½äº§ç”Ÿé€ƒé€¸ã€‚ å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š package main import \"fmt\" func main() { fmt.Println(\"hello 123\") fmt.Print(\"hello 456\") } Î» go build -gcflags=-m main.go # command-line-arguments .\\main.go:6:13: inlining call to fmt.Println .\\main.go:7:11: inlining call to fmt.Print .\\main.go:6:13: ... argument does not escape .\\main.go:6:14: \"hello 123\" escapes to heap .\\main.go:7:11: ... argument does not escape .\\main.go:7:12: \"hello 456\" escapes to heap ","date":"2023-10-10","objectID":"/escape-heap/:3:2","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#åŠ¨æ€ç±»å‹é€ƒé€¸"},{"categories":["golang"],"content":" é€ƒé€¸åˆ†æçš„ä½œç”¨ é€ƒé€¸åˆ†æçš„å¥½å¤„æ˜¯ä¸ºäº†å‡å°‘ gc çš„å‹åŠ›ï¼Œä¸é€ƒé€¸çš„å¯¹è±¡åˆ†é…åœ¨æ ˆä¸Šï¼Œå½“å‡½æ•°è¿”å›æ—¶å°±å›æ”¶äº†èµ„æºï¼Œä¸éœ€è¦ gc æ ‡è®°æ¸…é™¤ã€‚ é€ƒé€¸åˆ†æå®Œåå¯ä»¥ç¡®å®šå“ªäº›å˜é‡å¯ä»¥åˆ†é…åœ¨æ ˆä¸Šï¼Œæ ˆçš„åˆ†é…æ¯”å †å¿«ï¼Œæ€§èƒ½å¥½ï¼ˆé€ƒé€¸çš„å±€éƒ¨å˜é‡ä¼šåœ¨å †ä¸Šåˆ†é…ï¼Œè€Œæ²¡æœ‰å‘ç”Ÿé€ƒé€¸çš„åˆ™æœ‰ç¼–è¯‘å™¨åœ¨æ ˆä¸Šåˆ†é…ï¼‰ã€‚ åŒæ­¥æ¶ˆé™¤ï¼Œå¦‚æœå®šä¹‰çš„å¯¹è±¡çš„æ–¹æ³•ä¸Šæœ‰åŒæ­¥é”ï¼Œä½†åœ¨è¿è¡Œæ—¶ï¼Œå´åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®ï¼Œæ­¤æ—¶é€ƒé€¸åˆ†æåçš„æœºå™¨ç ï¼Œä¼šå»æ‰åŒæ­¥é”è¿è¡Œã€‚ info å½“æ¶‰åŠåˆ°åŒæ­¥é”ï¼ˆMutexï¼‰ä»¥åŠåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—®çš„æƒ…å†µæ—¶ï¼Œé€ƒé€¸åˆ†æå¯èƒ½ä¼šèµ·åˆ°å…³é”®ä½œç”¨ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ¥è§£é‡Šè¿™ä¸ªæƒ…å†µï¼š package main import \"sync\" func main() { var mu sync.Mutex var data int mu.Lock() data = 42 mu.Unlock() // åœ¨è¿™é‡Œï¼Œç¼–è¯‘å™¨ä¼šæ‰§è¡Œé€ƒé€¸åˆ†æ // å¦‚æœç¼–è¯‘å™¨èƒ½å¤Ÿç¡®å®š data ä¸ä¼šé€ƒé€¸åˆ°å †ä¸Šï¼Œå®ƒå¯èƒ½ä¼šå»é™¤åŒæ­¥é” // å› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—® dataï¼Œä¸æ¶‰åŠå¹¶å‘ç«äº‰ } åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬ä½¿ç”¨äº†åŒæ­¥é”æ¥ä¿æŠ¤ data çš„è®¿é—®ï¼Œä½†æ˜¯åœ¨é€ƒé€¸åˆ†æçš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨å¯ä»¥å‘ç° data æ²¡æœ‰é€ƒé€¸åˆ°å †ä¸Šï¼Œå› æ­¤å®ƒå¯ä»¥é€‰æ‹©å»æ‰åŒæ­¥é”ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è®¿é—® dataï¼Œä¸å­˜åœ¨å¹¶å‘ç«äº‰çš„æƒ…å†µã€‚ è¿™ç§ä¼˜åŒ–å¯ä»¥æé«˜ç¨‹åºçš„æ€§èƒ½ï¼Œå› ä¸ºåŒæ­¥é”çš„è·å–å’Œé‡Šæ”¾æ“ä½œå¯èƒ½ä¼šå¼•å…¥ä¸€äº›å¼€é”€ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å…·ä½“æƒ…å†µè¿›è¡Œåˆ¤æ–­ï¼Œè€Œä¸æ˜¯ç®€å•åœ°å› ä¸ºåªæœ‰ä¸€ä¸ªçº¿ç¨‹å°±å»æ‰æ‰€æœ‰åŒæ­¥é”ã€‚åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼ŒåŒæ­¥é”æ˜¯å¿…è¦çš„ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å®‰å…¨è®¿é—®ã€‚å› æ­¤ï¼Œåœ¨ç¼–å†™å¤šçº¿ç¨‹ç¨‹åºæ—¶ï¼Œä»ç„¶éœ€è¦è°¨æ…ä½¿ç”¨åŒæ­¥é”ä»¥ç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚ ","date":"2023-10-10","objectID":"/escape-heap/:4:0","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#é€ƒé€¸åˆ†æçš„ä½œç”¨"},{"categories":["golang"],"content":" æ€»ç»“ å †ä¸ŠåŠ¨æ€åˆ†é…å†…å­˜æ¯”æ ˆä¸Šé™æ€åˆ†é…å†…å­˜ï¼Œå¼€é”€å¤§å¾ˆå¤šã€‚ å˜é‡åˆ†é…åœ¨æ ˆä¸Šéœ€è¦èƒ½åœ¨ç¼–è¯‘æœŸç¡®å®šå®ƒçš„ä½œç”¨åŸŸï¼Œå¦åˆ™ä¼šåˆ†é…åˆ°å †ä¸Šã€‚ Go ç¼–è¯‘å™¨ä¼šåœ¨ç¼–è¯‘æœŸå¯¹è€ƒå¯Ÿå˜é‡çš„ä½œç”¨åŸŸï¼Œå¹¶ä½œä¸€ç³»åˆ—æ£€æŸ¥ï¼Œå¦‚æœå®ƒçš„ä½œç”¨åŸŸåœ¨è¿è¡ŒæœŸé—´å¯¹ç¼–è¯‘å™¨ä¸€ç›´æ˜¯å¯çŸ¥çš„ï¼Œé‚£ä¹ˆå°±ä¼šåˆ†é…åˆ°æ ˆä¸Šã€‚ç®€å•æ¥è¯´ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®å˜é‡æ˜¯å¦è¢«å¤–éƒ¨å¼•ç”¨æ¥å†³å®šæ˜¯å¦é€ƒé€¸ã€‚ ç¼–è¯‘å™¨çš„è¿™äº›é€ƒé€¸åˆ†æè§„åˆ™å…¶å®ä¸éœ€è¦æŒæ¡ï¼Œåªéœ€é€šè¿‡ go build -gcflags=-m å‘½ä»¤æ¥è§‚å¯Ÿå˜é‡é€ƒé€¸æƒ…å†µå°±è¡Œäº†ã€‚ ä¸è¦ç›²ç›®ä½¿ç”¨å˜é‡çš„æŒ‡é’ˆä½œä¸ºå‡½æ•°å‚æ•°ï¼Œè™½ç„¶å®ƒä¼šå‡å°‘å¤åˆ¶æ“ä½œã€‚ä½†å…¶å®å½“å‚æ•°ä¸ºå˜é‡è‡ªèº«çš„æ—¶å€™ï¼Œå¤åˆ¶æ˜¯åœ¨æ ˆä¸Šå®Œæˆçš„æ“ä½œï¼Œå¼€é”€è¿œæ¯”å˜é‡é€ƒé€¸ååŠ¨æ€åœ°åœ¨å †ä¸Šåˆ†é…å†…å­˜å°‘çš„å¤šã€‚ é€ƒé€¸åˆ†æåœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆçš„ã€‚ ","date":"2023-10-10","objectID":"/escape-heap/:5:0","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#æ€»ç»“"},{"categories":["golang"],"content":" å‚è€ƒ Golang å†…å­˜åˆ†é… - stack and heap ","date":"2023-10-10","objectID":"/escape-heap/:6:0","series":["golang"],"tags":["golang"],"title":"Golang å†…å­˜é€ƒé€¸","uri":"/escape-heap/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,Elasticsearch","date":"2023-09-12","objectID":"/docker-elastic-install/","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£… ESå½“å‰ ElasticSearch å·²ç»åˆ°äº† 8.0+ï¼Œæ–°ç‰ˆæœ¬éƒ½æœ‰å¾ˆå¤šæ–°ç‰¹æ€§ï¼Œæ€§èƒ½å’ŒåŠŸèƒ½éƒ½æœ‰å¤§å¹…æå‡ï¼Œå»ºè®®ä½¿ç”¨è¾ƒé«˜ç‰ˆæœ¬ï¼Œè¿™é‡Œé‡‡ç”¨ 7.12.1 ç‰ˆæœ¬ ğŸ‘¼ es ç‰ˆæœ¬ å®‰è£… ElasticSearch è„šæœ¬å¦‚ä¸‹: docker run -d \\ --name elasticsearch \\ -e \"discovery.type=single-node\" \\ --privileged \\ -p 9200:9200 \\ -p 9300:9300 \\ elasticsearch:7.12.1 å¸¸ç”¨å‘½ä»¤è¯´æ˜ï¼š -e \"cluster.name=es-docker-cluster\"ï¼šè®¾ç½®é›†ç¾¤åç§° -e \"http.host=0.0.0.0\"ï¼šç›‘å¬çš„åœ°å€ï¼Œå¯ä»¥å¤–ç½‘è®¿é—® -e \"ES_JAVA_OPTS=-Xms512m -Xmx512m\"ï¼šå†…å­˜å¤§å° -e \"discovery.type=single-node\"ï¼šéé›†ç¾¤æ¨¡å¼ -v es-data:/usr/share/elasticsearch/dataï¼šæŒ‚è½½é€»è¾‘å·ï¼Œç»‘å®šelasticsearchçš„æ•°æ®ç›®å½• -v es-logs:/usr/share/elasticsearch/logsï¼šæŒ‚è½½é€»è¾‘å·ï¼Œç»‘å®šelasticsearchçš„æ—¥å¿—ç›®å½• -v es-plugins:/usr/share/elasticsearch/pluginsï¼šæŒ‚è½½é€»è¾‘å·ï¼Œç»‘å®šelasticsearchçš„æ’ä»¶ç›®å½• --privilegedï¼šæˆäºˆé€»è¾‘å·è®¿é—®æƒ -p 9200:9200ï¼šç«¯å£æ˜ å°„é…ç½® docker å®‰è£… es å®‰è£…å®Œæˆåï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ï¼šhttp://172.27.46.132/:9200/ å³å¯çœ‹åˆ° elasticsearch çš„å“åº”ç»“æœï¼š es å“åº”ç»“æœ ","date":"2023-09-12","objectID":"/docker-elastic-install/:1:0","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#å®‰è£…-es"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Kibanaæˆ‘ä»¬å¯ä»¥åŸºäº http è¯·æ±‚æ“ä½œ ElasticSearchï¼Œä½†åŸºäº http æ“ä½œæ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é‡‡ç”¨ Kibana å®ç°å¯è§†åŒ–æ“ä½œã€‚ Kibana æ˜¯ä¸€ä¸ªå…è´¹ä¸”å¼€æ”¾çš„ç”¨æˆ·ç•Œé¢ï¼Œèƒ½å¤Ÿå¯¹ Elasticsearch æ•°æ®è¿›è¡Œå¯è§†åŒ–ï¼Œå¹¶åœ¨ Elastic Stack ä¸­è¿›è¡Œå¯¼èˆªï¼Œå¯ä»¥è¿›è¡Œå„ç§æ“ä½œï¼Œä»è·Ÿè¸ªæŸ¥è¯¢è´Ÿè½½ï¼Œåˆ°ç†è§£è¯·æ±‚å¦‚ä½•æµç»çš„æ•´ä¸ªåº”ç”¨ï¼Œéƒ½èƒ½è½»æ¾å®Œæˆã€‚Kibana è®©èƒ½å¤Ÿè‡ªç”±åœ°é€‰æ‹©å¦‚ä½•å‘ˆç°è‡ªå·±çš„æ•°æ®ã€‚ ","date":"2023-09-12","objectID":"/docker-elastic-install/:2:0","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#kibana"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Kibana å®‰è£…ä½¿ç”¨ Docker å®‰è£… Kibana éå¸¸ç®€å•ï¼Œä½†æ˜¯æ‰§è¡Œå‘½ä»¤éœ€è¦æ³¨æ„ Kibana æ“ä½œçš„ ElasticSearch åœ°å€ï¼Œå› ä¸º Kibana æ˜¯éœ€è¦è¿æ¥ ElasticSearch è¿›è¡Œæ“ä½œçš„ï¼Œæ‰€ä»¥éœ€è¦ es å’Œ Kibana åœ¨åŒä¸€ç½‘æ®µï¼Œå®‰è£… Kibana å‘½ä»¤å¦‚ä¸‹: docker run -d \\ --name kibana \\ -e ELASTICSEARCH_HOSTS=http://172.27.46.132:9200 \\ -p 5601:5601 \\ kibana:7.12.1 å‘½ä»¤è¯´æ˜ï¼š -e ELASTICSEARCH_HOSTS=http://172.27.46.132:9200\"ï¼šè®¾ç½® elasticsearch çš„åœ°å€ï¼Œå› ä¸º kibana å·²ç»ä¸elasticsearchåœ¨ä¸€ä¸ªç½‘ç»œï¼Œå› æ­¤å¯ä»¥ç”¨å®¹å™¨åç›´æ¥è®¿é—® elasticsearchï¼Œä¹Ÿå¯ä»¥å†™ IP åœ°å€å®ç°è®¿é—®ã€‚ -p 5601:5601ï¼šç«¯å£æ˜ å°„é…ç½® å®‰è£…çš„æ—¶å€™å¦‚æœæ²¡æœ‰é•œåƒï¼Œä¼šä¸‹è½½é•œåƒï¼Œæ•ˆæœå¦‚ä¸‹ï¼š å®‰è£… Kibana å®‰è£…æˆåŠŸåï¼Œå¯ä»¥è®¿é—® http://172.27.46.132:5601/ æ•ˆæœå¦‚ä¸‹ï¼š Kibana æ•ˆæœ å¯ä»¥ç‚¹å‡» Add dataï¼Œæ·»åŠ ç¤ºä¾‹æ•°æ®ï¼Œå¦‚ä¸‹å›¾ï¼Œéšæ„é€‰ä¸€ä¸ªå³å¯ï¼Œä¸é€‰å…¶å®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ æ·»åŠ æ•°æ® ","date":"2023-09-12","objectID":"/docker-elastic-install/:2:1","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#kibana-å®‰è£…"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Kibana ä¸­æ–‡é…ç½®Kibana æ”¯æŒä¸­æ–‡é…ç½®ï¼Œå¯ä»¥æŠŠ Kibana é…ç½®æˆä¸­æ–‡ç‰ˆï¼Œåˆ‡æ¢ä¸­æ–‡æ“ä½œå¦‚ä¸‹: #è¿›å…¥å®¹å™¨ docker exec -it kibana /bin/bash #è¿›å…¥é…ç½®æ–‡ä»¶ç›®å½• cd /usr/share/kibana/config #ç¼–è¾‘æ–‡ä»¶kibana.yml vi kibana.yml #åœ¨æœ€åä¸€è¡Œæ·»åŠ å¦‚ä¸‹é…ç½® i18n.locale: zh-CN #ä¿å­˜é€€å‡º exit #å¹¶é‡å¯å®¹å™¨ docker restart kibana ç­‰å¾… Kibana å®¹å™¨å¯åŠ¨ï¼Œå†æ¬¡è®¿é—® http://172.27.46.132:5601/ æ•ˆæœå¦‚ä¸‹ï¼š ä¸­æ–‡æ•ˆæœ ","date":"2023-09-12","objectID":"/docker-elastic-install/:2:2","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#kibana-ä¸­æ–‡é…ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" IK åˆ†è¯å™¨å®‰è£…æ‰“å¼€ Kibanaï¼Œç‚¹å‡»å¼€å‘å·¥å…·ï¼Œæ“ä½œå¦‚ä¸‹ï¼š å¼€å‘å·¥å…· åœ¨å·¦è¾¹è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼Œç”¨äºæŸ¥è¯¢åˆ†è¯ï¼š GET _analyze { \"analyzer\": \"standard\", \"text\": \"php æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€\" } æ•ˆæœå¦‚ä¸‹ï¼š åˆ†è¯æ•ˆæœ ä½¿ç”¨ standard å¯¹ php æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ è¿›è¡Œåˆ†è¯ã€‚ åˆ†è¯ï¼šæå–ä¸€å¥è¯æˆ–è€…ä¸€ç¯‡æ–‡ç« ä¸­çš„è¯è¯­ã€‚ æˆ‘ä»¬åœ¨ä½¿ç”¨ ElasticSearch çš„æ—¶å€™ï¼Œé»˜è®¤ç”¨ standard åˆ†è¯å™¨ï¼Œä½† standard åˆ†è¯å™¨ä½¿ç”¨çš„æ˜¯æŒ‰ç©ºæ ¼åˆ†è¯ï¼Œè¿™ç§åˆ†è¯æ“ä½œæ–¹æ³•ä¸ç¬¦åˆä¸­æ–‡åˆ†è¯æ ‡å‡†ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–å®‰è£…ä¸­æ–‡åˆ†è¯å™¨ã€‚ ","date":"2023-09-12","objectID":"/docker-elastic-install/:3:0","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#ik-åˆ†è¯å™¨å®‰è£…"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" IK åˆ†è¯å™¨IK Analyzer æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäº java è¯­è¨€å¼€å‘çš„è½»é‡çº§çš„ä¸­æ–‡åˆ†è¯å·¥å…·åŒ…ã€‚å¯ä»¥ç›´æ¥åœ¨ ElasticSearch ä¸­é›†æˆ IK åˆ†è¯å™¨ï¼ŒIK åˆ†è¯å™¨é›†æˆElasticSearchä¸‹è½½åœ°å€ï¼šelasticsearch-analysis-ik/releasesã€‚IK å¯ä»¥è·Ÿ es çš„ç‰ˆæœ¬ä¸€è‡´ï¼Œæˆ‘ä»¬ es çš„ç‰ˆæœ¬æ˜¯ 7.12.1ï¼ŒIK çš„ç‰ˆæœ¬ä¹Ÿæ˜¯ç”¨ 7.12.1ã€‚ IK åˆ†è¯å™¨ ","date":"2023-09-12","objectID":"/docker-elastic-install/:3:1","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#ik-åˆ†è¯å™¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" IK åˆ†è¯å™¨é…ç½®ä¸‹è½½å®‰è£…åŒ… elasticsearch-analysis-ik/releases/tag/v7.12.1 åï¼Œï¼Œéœ€è¦å°† elasticsearch-analysis-ik-7.12.1.zip æ‹·è´åˆ° elasticSearch å®¹å™¨é‡Œçš„çš„ /usr/share/elasticsearch/plugins ç›®å½•ä¸­è§£å‹å³å¯ã€‚ cp elasticsearch-analysis-ik-7.12.1.zip è§£å‹æ–‡ä»¶æˆåŠŸåï¼Œç„¶åé‡å¯ es å®¹å™¨ã€‚ ","date":"2023-09-12","objectID":"/docker-elastic-install/:3:2","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#ik-åˆ†è¯å™¨é…ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆ†è¯æµ‹è¯•IKåˆ†è¯å™¨åŒ…å«ä¸¤ç§æ¨¡å¼ï¼š ik_smartï¼šæœ€å°‘åˆ‡åˆ† ik_max_wordï¼šæœ€ç»†åˆ‡åˆ† å‰é¢ä½¿ç”¨é»˜è®¤çš„standardåˆ†è¯å™¨ï¼Œå¯¹ä¸­æ–‡åˆ†è¯éå¸¸éš¾ç”¨ï¼Œå®‰è£…IKåˆ†è¯å™¨åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨IKåˆ†è¯å™¨æµ‹è¯•ï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š GET _analyze { \"analyzer\": \"ik_max_word\", \"text\": \"php æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€\" } æµ‹è¯•æ•ˆæœå¦‚ä¸‹ï¼š æ•ˆæœ å¯ä»¥å‘ç°å¯¹ä¸­æ–‡çš„åˆ†è¯æ•ˆæœæ˜¯æ¯”è¾ƒä¸é”™çš„ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›ä¸è¶³ï¼Œæ¯”å¦‚ æœ€å¥½çš„ æˆ‘ä»¬å¸Œæœ›å®ƒæ˜¯ä¸€ä¸ªè¯ï¼Œè€Œ ä¸Šæˆ‘ä»¬å¸Œæœ›å®ƒä¸è¢«è¯†åˆ«ä¸€ä¸ªè¯ï¼Œè¿™ç§éœ€æ±‚å¯ä»¥åŒè¿‡è‡ªå®šä¹‰è¯å…¸è§£å†³ã€‚ ","date":"2023-09-12","objectID":"/docker-elastic-install/:3:3","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#åˆ†è¯æµ‹è¯•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" IK è‡ªå®šä¹‰è¯å…¸IK åˆ†è¯å™¨æ”¯æŒè‡ªå®šä¹‰è¯å…¸ï¼ŒåŒ…æ‹¬è‡ªå®šä¹‰åˆ†è¯ï¼Œä¹ŸåŒ…å«è‡ªå®šä¹‰åœç”¨åˆ†è¯ï¼Œæ“ä½œèµ·æ¥éå¸¸ç®€å•ã€‚æ¥ä¸‹æ¥å®ç°ä¸€ä¸‹è‡ªå®šä¹‰è¯å…¸å’Œåœç”¨è¯å…¸ã€‚ ","date":"2023-09-12","objectID":"/docker-elastic-install/:4:0","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#ik-è‡ªå®šä¹‰è¯å…¸"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è‡ªå®šä¹‰è¯å…¸è‡ªå®šä¹‰è¯å…¸ï¼Œéœ€è¦å…ˆåˆ›å»ºè‡ªå·±çš„è¯å…¸ï¼Œå†å¼•ç”¨è‡ªå·±çš„è¯å…¸å³å¯ã€‚ åˆ›å»ºè¯å…¸ åœ¨ es å®¹å™¨ç›®å½• /usr/share/elasticsearch/plugins/ik/config ä¸­åˆ›å»ºè‡ªå·±çš„è¯å…¸ï¼Œä¾‹å¦‚å« custome.dicï¼Œåœ¨æ–‡ä»¶ä¸­æ·»åŠ è‡ªå®šä¹‰çš„è¯è¯­ï¼Œæ“ä½œå¦‚ä¸‹ï¼š åˆ›å»ºè¯å…¸ æˆ‘ä»¬æŠŠè‡ªå®šä¹‰çš„è¯å…¸ æœ€å¥½çš„ æ·»åŠ åˆ°äº† custome.dic ä¸­äº†ï¼Œè¿™å°±æ˜¯åˆ›å»ºè¯å…¸ï¼Œå¦‚æœæœ‰å¤šä¸ªè‡ªå®šä¹‰è¯ï¼Œéœ€è¦æ¢è¡ŒåŠ å…¥ï¼Œè¿™é‡Œä¸€å®šè¦æ³¨æ„ä¸­æ–‡åˆ†è¯è®¾ç½®ç¼–ç æ ¼å¼ä¸º UTF-8ã€‚ å¼•ç”¨è¯å…¸ ä¿®æ”¹ config/IKAnalyzer.cfg.xml å¼•ç”¨è‡ªå·±åˆ›å»ºçš„ custome.dic è¯å…¸ï¼Œé…ç½®å¦‚ä¸‹: å¼•ç”¨è‡ªå®šä¹‰å­—å…¸ å†ä½¿ç”¨ Kibana æ•ˆæœå¦‚ä¸‹ï¼š æ•ˆæœ ","date":"2023-09-12","objectID":"/docker-elastic-install/:4:1","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#è‡ªå®šä¹‰è¯å…¸"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è‡ªå®šä¹‰åœç”¨è¯æ±‡è‡ªå®šä¹‰åœç”¨è¯å…¸å’Œè‡ªå®šä¹‰è¯å…¸ä¸€æ ·ï¼Œéœ€è¦å…ˆåˆ›å»ºè‡ªå·±çš„è¯å…¸ï¼Œå†å¼•ç”¨è‡ªå·±çš„è¯å…¸å³å¯ã€‚ åˆ›å»ºè¯å…¸ åœ¨ config ä¸­åˆ›å»ºè‡ªå·±çš„åœç”¨è¯å…¸ï¼Œä¾‹å¦‚å« stop.dicï¼Œåœ¨æ–‡ä»¶ä¸­æ·»åŠ è‡ªå®šä¹‰çš„åœç”¨è¯è¯­ï¼Œæ“ä½œå¦‚ä¸‹ï¼š åœç”¨è¯æ±‡ å¼•ç”¨è¯å…¸ ä¿®æ”¹ config/IKAnalyzer.cfg.xml å¼•ç”¨è‡ªå·±åˆ›å»ºçš„ stop.dic åœç”¨è¯å…¸ï¼Œé…ç½®å¦‚ä¸‹: åœç”¨è¯å…¸é…ç½® ä¿®æ”¹å®Œæˆåï¼Œé‡å¯ elasticsearch å®¹å™¨ã€‚ å†ä½¿ç”¨ Kibana æµ‹è¯•æ•ˆæœå¦‚ä¸‹ï¼š åœç”¨åˆ†è¯æ•ˆæœ å¯ä»¥å‘ç°ï¼Œä¸å†æœ‰ ä¸–ç•Œï¼Œçš„ï¼Œæ˜¯ï¼Œä¸Šï¼Œè¯­è¨€ çš„åˆ†è¯äº†ï¼Œè¯´æ˜åœç”¨åˆ†è¯ä¹Ÿç”Ÿæ•ˆäº†ã€‚ ","date":"2023-09-12","objectID":"/docker-elastic-install/:4:2","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#è‡ªå®šä¹‰åœç”¨è¯æ±‡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¸€ä¸ªä¾‹å­ç°åœ¨æœ‰ä¸ªéœ€æ±‚æ˜¯å‘ mysql ä¸­æ’å…¥æ–‡ç« ï¼Œä½†æ˜¯åŒæ—¶éœ€è¦å‘ es ä¸­å†™å…¥æ–‡ç« ï¼Œé€šè¿‡ es æ¥åˆ†è¯ï¼Œä¼˜åŒ–æœç´¢ï¼Œé€šè¿‡ es æœç´¢æ—¶ï¼Œå¯ä»¥è¿”å› mysql ä¸­å¯¹åº”çš„ idã€‚ CREATE TABLE `article` ( `id` int(10) unsigned NOT NULL AUTO_INCREMENT primary key, `title` varchar(200) NOT NULL comment 'æ–‡ç« æ ‡é¢˜', `content` text COMMENT 'æ–‡ç« å†…å®¹', `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP, `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æ–‡ç« è¡¨'; golang ä»£ç ï¼š package main import ( \"context\" \"database/sql\" \"encoding/json\" \"fmt\" \"github.com/elastic/go-elasticsearch/v7/esapi\" _ \"github.com/go-sql-driver/mysql\" \"log\" \"strings\" ) func main() { // åˆå§‹åŒ– MySQL è¿æ¥ db, err := sql.Open(\"mysql\", \"root:123456@tcp(localhost:3306)/wb-test\") if err != nil { log.Fatal(err) } defer db.Close() // åˆå§‹åŒ– Elasticsearch è¿æ¥ esConfig := elasticsearch.Config{ Addresses: []string{\"http://localhost:9200\"}, } esClient, err := elasticsearch.NewClient(esConfig) if err != nil { log.Fatal(err) } // æ’å…¥æ–‡ç« åˆ° MySQL articleTitle := \"è¶æ‹èŠ±\" articleContent := \"èŠ±è¤ªæ®‹çº¢æ³¨é’æå°ã€‚ç‡•å­é£æ—¶ï¼Œç»¿æ°´äººå®¶ç»•ã€‚æä¸ŠæŸ³ç»µæ³¨å¹åˆå°‘ã€‚å¤©æ¶¯ä½•å¤„æ— èŠ³è‰ã€‚å¢™é‡Œç§‹åƒå¢™å¤–é“ã€‚å¢™å¤–è¡Œäººï¼Œå¢™é‡Œä½³äººç¬‘ã€‚ç¬‘æ¸ä¸é—»å£°æ¸æ‚„ã€‚å¤šæƒ…å´è¢«æ— æƒ…æ¼ã€‚\" _, err = db.Exec(\"INSERT INTO article (title, content) VALUES (?, ?)\", articleTitle, articleContent) if err != nil { log.Fatal(err) } // è·å–æ’å…¥æ–‡ç« çš„ MySQL ID var articleID int err = db.QueryRow(\"SELECT LAST_INSERT_ID()\").Scan(\u0026articleID) if err != nil { log.Fatal(err) } // åœ¨ Elasticsearch ä¸­å†™å…¥æ–‡ç«  esIndexName := \"articles\" // Elasticsearch ç´¢å¼•å docID := fmt.Sprintf(\"%d\", articleID) //esDoc := map[string]interface{}{ // \"title\": articleTitle, // \"content\": articleContent, // \"mysql_id\": articleID, // å°† MySQL ID å­˜å‚¨åœ¨ Elasticsearch ä¸­ //} // åˆ›å»º Elasticsearch æ–‡æ¡£ esRequest := esapi.IndexRequest{ Index: esIndexName, DocumentID: docID, Body: strings.NewReader(fmt.Sprintf(`{ \"title\": \"%s\", \"content\": \"%s\", \"mysql_id\": %d }`, articleTitle, articleContent, articleID)), Refresh: \"true\", } res, err := esRequest.Do(context.Background(), esClient) if err != nil { log.Fatal(err) } defer res.Body.Close() // ä» Elasticsearch ä¸­æŸ¥è¯¢æ–‡ç« ï¼ŒåŒ…æ‹¬ MySQL ID //esQuery := map[string]interface{}{ // \"query\": map[string]interface{}{ // \"match\": map[string]interface{}{ // \"title\": \"ç¤ºä¾‹æ–‡ç« æ ‡é¢˜\", // }, // }, //} esSearchRequest := esapi.SearchRequest{ Index: []string{esIndexName}, Body: strings.NewReader(fmt.Sprintf(`{ \"query\": { \"match\": { \"title\": \"ç¤ºä¾‹æ–‡ç« æ ‡é¢˜\" } } }`)), } res, err = esSearchRequest.Do(context.Background(), esClient) if err != nil { log.Fatal(err) } defer res.Body.Close() // å¤„ç† Elasticsearch æŸ¥è¯¢ç»“æœ if res.IsError() { log.Fatalf(\"Error: %s\", res.Status()) } // è§£ææŸ¥è¯¢ç»“æœ var response map[string]interface{} if err := json.NewDecoder(res.Body).Decode(\u0026response); err != nil { log.Fatalf(\"Error parsing the response body: %s\", err) } hits := response[\"hits\"].(map[string]interface{})[\"hits\"].([]interface{}) for _, hit := range hits { source := hit.(map[string]interface{})[\"_source\"].(map[string]interface{}) title := source[\"title\"].(string) content := source[\"content\"].(string) mysqlID := source[\"mysql_id\"].(float64) // ä» Elasticsearch ä¸­è·å– MySQL ID fmt.Printf(\"æ ‡é¢˜: %så†…å®¹: %sMySQL ID: %d\", title, content, int(mysqlID)) } } é€šè¿‡ kibana æŸ¥çœ‹åˆ° es ç°åœ¨æœ‰ 2 æ¡æ•°æ®ï¼š ç»“æœæ•°æ® åœ¨ kibana ä¸­é€šè¿‡æŸ¥è¯¢æ¥å£æœç´¢ content å†…å®¹åŒ…å« â€œç»•â€ çš„ï¼Œå±•ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š æœç´¢ç»“æ„ æŸ¥è¯¢ content å«æœ‰ â€œ11111â€ æˆ– title ä¸­å«æœ‰ â€œæ‚¯â€ çš„æ•°æ®ç»“æœå¦‚ä¸‹ï¼š æŸ¥è¯¢ç»“æœ ","date":"2023-09-12","objectID":"/docker-elastic-install/:5:0","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#ä¸€ä¸ªä¾‹å­"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Elastic Search å…¥é—¨ Elasticsearch ä¸­ must, filter, should, must_not, constant_score çš„åŒºåˆ« ","date":"2023-09-12","objectID":"/docker-elastic-install/:6:0","series":[],"tags":["elasticsearch"],"title":"Docker å•æœºå®‰è£…ä½¿ç”¨ Elasticsearch","uri":"/docker-elastic-install/#å‚è€ƒ"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":"xiaobinqt,å¸ƒé›·é¡¿æ£®æ—ä½“ç³»,åŠ æ¯å’Œå‡æ¯ï¼Œè´¸æ˜“é¡ºå·®å’Œè´¸æ˜“é€†å·®,é«˜é€šèƒ€ï¼Œç´§ç¼©æ”¿ç­–ï¼Œè´¢æ”¿èµ¤å­—ï¼Œç»å¸¸è´¦æˆ·","date":"2023-07-07","objectID":"/bretton-woods-system/","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" æ¥æºå¸ƒé›·é¡¿æ£®æ—ä½“ç³»ï¼ˆBretton Woods systemï¼‰æ˜¯äºŒæˆ˜åå»ºç«‹çš„ä¸€å¥—å…¨çƒé‡‘èå’Œè´§å¸ä½“ç³»ï¼Œäº 1944 å¹´åœ¨ç¾å›½æ–°ç½•å¸ƒä»€å°”å·çš„å¸ƒé›·é¡¿æ£®æ—é…’åº—ï¼ˆBretton Woods Hotelï¼‰ä¼šè®®ä¸Šç¡®ç«‹ã€‚è¯¥ä½“ç³»çš„ç›®æ ‡æ˜¯ä¸ºä¸–ç•Œå„å›½æä¾›ç¨³å®šçš„è´§å¸å’Œè´¸æ˜“ä½“ç³»ï¼Œä»¥ä¿ƒè¿›å›½é™…åˆä½œå’Œé‡å»ºæˆ˜åç»æµã€‚ å¸ƒé›·é¡¿æ£®æ—ä½“ç³»çš„æ ¸å¿ƒæ˜¯å»ºç«‹å›ºå®šæ±‡ç‡åˆ¶åº¦ï¼Œå…¶ä¸­ç¾å…ƒè¢«ç¡®å®šä¸ºä¸»è¦å‚¨å¤‡è´§å¸ï¼Œä¸é»„é‡‘çš„å…‘æ¢æ¯”ç‡å›ºå®šä¸º 35 ç¾å…ƒ/ç›å¸ã€‚å…¶ä»–å›½å®¶çš„è´§å¸åˆ™ä¸ç¾å…ƒè¿›è¡Œå›ºå®šæ±‡ç‡çš„å…‘æ¢ï¼Œä¿æŒæ±‡ç‡çš„ç¨³å®šã€‚æ­¤å¤–ï¼Œæˆç«‹äº†å›½é™…è´§å¸åŸºé‡‘ç»„ç»‡ï¼ˆIMFï¼‰å’Œå›½é™…å¤å…´å¼€å‘é“¶è¡Œï¼ˆWorld Bankï¼‰ï¼Œä»¥æä¾›è´·æ¬¾å’Œæ´åŠ©ç»™æˆ˜åé‡å»ºçš„å›½å®¶ã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:1:0","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#æ¥æº"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" åŠ æ¯å’Œå‡æ¯åŠ æ¯å’Œå‡æ¯æ˜¯å¤®è¡Œè°ƒæ•´åˆ©ç‡æ”¿ç­–æ—¶é‡‡å–çš„ä¸¤ç§ä¸»è¦è¡ŒåŠ¨ã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:2:0","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#åŠ æ¯å’Œå‡æ¯"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" åŠ æ¯åŠ æ¯æŒ‡å¤®è¡Œæé«˜åŸºå‡†åˆ©ç‡æˆ–æ”¿ç­–åˆ©ç‡çš„è¡Œä¸ºã€‚å¤®è¡Œé€šè¿‡åŠ æ¯æ¥æ§åˆ¶ç»æµçš„çƒ­åº¦å’Œé€šèƒ€å‹åŠ›ã€‚å½“å¤®è¡Œè®¤ä¸ºç»æµè¿‡çƒ­æˆ–é€šèƒ€å‹åŠ›ä¸Šå‡æ—¶ï¼Œå®ƒå¯èƒ½ä¼šåŠ æ¯ä»¥æŠ‘åˆ¶æ¶ˆè´¹å’ŒæŠ•èµ„éœ€æ±‚ï¼Œå‡ç¼“ç»æµå¢é•¿é€Ÿåº¦å¹¶æ§åˆ¶é€šèƒ€ã€‚ åŠ æ¯çš„å½±å“åŒ…æ‹¬ï¼š è´·æ¬¾æˆæœ¬ä¸Šå‡ï¼šåŠ æ¯ä¼šå¯¼è‡´å•†ä¸šé“¶è¡Œå€Ÿæ¬¾æˆæœ¬ä¸Šå‡ï¼Œè¿›è€Œä¼ å¯¼åˆ°å€Ÿæ¬¾äººï¼Œä½¿å¾—è´·æ¬¾æ›´åŠ æ˜‚è´µã€‚è¿™å¯ä»¥é™ä½æ¶ˆè´¹å’ŒæŠ•èµ„æ”¯å‡ºï¼ŒæŠ‘åˆ¶ç»æµå¢é•¿ã€‚ æŠ•èµ„æ”¶ç›Šä¸‹é™ï¼šé«˜åˆ©ç‡ä½¿å¾—å‚¨è“„å’Œå›ºå®šæ”¶ç›Šç±»æŠ•èµ„æ›´å…·å¸å¼•åŠ›ï¼Œå¯èƒ½å¯¼è‡´è‚¡ç¥¨å¸‚åœºå›æŠ¥ä¸‹é™ã€‚ è´§å¸å‡å€¼ï¼šé«˜åˆ©ç‡å¾€å¾€ä¼šå¸å¼•å¤–å›½èµ„æœ¬æµå…¥ï¼Œæ¨åŠ¨è´§å¸å‡å€¼ï¼Œå¯¹å‡ºå£ä¼ä¸šé€ æˆå‹åŠ›ï¼Œå¯èƒ½å¯¼è‡´è´¸æ˜“é¡ºå·®å‡å°‘ã€‚ å½“ä¸€ä¸ªå›½å®¶çš„å¤®è¡Œæé«˜åˆ©ç‡æ—¶ï¼Œè¿™å¯èƒ½ä¼šä½¿è¯¥å›½çš„è´§å¸æ›´æœ‰å¸å¼•åŠ›ï¼Œä»è€Œå¸å¼•æ›´å¤šçš„å¤–å›½æŠ•èµ„è€…å°†èµ„é‡‘æµå…¥è¯¥å›½ã€‚è¿™ç§å¤–å›½èµ„æœ¬æµå…¥ä¼šå¢åŠ è¯¥å›½çš„éœ€æ±‚ï¼Œå¯¼è‡´è¯¥å›½çš„è´§å¸å‡å€¼ã€‚ è´§å¸å‡å€¼å¯¹å‡ºå£ä¼ä¸šé€ æˆå‹åŠ›çš„åŸå› åœ¨äºï¼Œå½“å›½å®¶çš„è´§å¸å‡å€¼æ—¶ï¼Œè¯¥å›½çš„å‡ºå£å•†å“ä»·æ ¼åœ¨å›½é™…å¸‚åœºä¸Šå˜å¾—æ›´æ˜‚è´µã€‚è¿™å¯èƒ½å¯¼è‡´å‡ºå£ä¼ä¸šåœ¨ç«äº‰ä¸­å¤±å»ä»·æ ¼ç«äº‰åŠ›ï¼Œå‡å°‘å¯¹å¤–è´¸æ˜“çš„éœ€æ±‚ï¼Œè¿›è€Œå¯èƒ½å‡å°‘è¯¥å›½çš„å‡ºå£é¢åº¦ã€‚å› æ­¤ï¼Œè¿™å¯èƒ½å¯¼è‡´è¯¥å›½çš„è´¸æ˜“é¡ºå·®å‡å°‘æˆ–è´¸æ˜“é€†å·®å¢åŠ ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾å›½å®¶Açš„å¤®è¡Œå†³å®šæé«˜åˆ©ç‡ï¼Œè¿™ä¼šä½¿å¾—å›½å®¶Açš„è´§å¸æ›´æœ‰å¸å¼•åŠ›ã€‚å¤–å›½æŠ•èµ„è€…å¯èƒ½ä¼šå°†èµ„é‡‘æµå…¥å›½å®¶Aï¼Œå› ä¸ºä»–ä»¬å¯ä»¥è·å¾—æ›´é«˜çš„å›æŠ¥ç‡ã€‚è¿™ç§èµ„æœ¬æµå…¥ä¼šå¯¼è‡´å›½å®¶Açš„è´§å¸å‡å€¼ã€‚ ç”±äºè´§å¸å‡å€¼ï¼Œå›½å®¶ A çš„å‡ºå£å•†å“çš„ä»·æ ¼åœ¨å›½é™…å¸‚åœºä¸Šå˜å¾—æ›´æ˜‚è´µã€‚å‡è®¾å›½å®¶Aæ˜¯ä¸€ä¸ªå‡ºå£å¯¼å‘å‹ç»æµä½“ï¼Œä¸»è¦ä¾èµ–å‡ºå£æ¥å®ç°ç»æµå¢é•¿ã€‚ç„¶è€Œï¼Œç”±äºè´§å¸å‡å€¼ï¼Œå›½å®¶ A çš„å‡ºå£å•†å“ç›¸å¯¹äºå…¶ä»–å›½å®¶å˜å¾—æ›´æ˜‚è´µï¼Œè¿™å¯èƒ½å¯¼è‡´å…¶ä»–å›½å®¶è´­ä¹°å›½å®¶ A çš„å•†å“å‡å°‘ã€‚è¿™å¯èƒ½å‡å°‘äº†å›½å®¶ A çš„å‡ºå£é¢åº¦ï¼Œå¯èƒ½å¯¼è‡´è´¸æ˜“é¡ºå·®å‡å°‘æˆ–è´¸æ˜“é€†å·®å¢åŠ ã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:2:1","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#åŠ æ¯"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" å‡æ¯å‡æ¯æŒ‡å¤®è¡Œé™ä½åŸºå‡†åˆ©ç‡æˆ–æ”¿ç­–åˆ©ç‡çš„è¡Œä¸ºã€‚å¤®è¡Œé€šè¿‡é™æ¯æ¥åˆºæ¿€ç»æµå¢é•¿å’ŒææŒ¯é€šèƒ€æ°´å¹³ã€‚å½“å¤®è¡Œè®¤ä¸ºç»æµå¢é•¿ç¼“æ…¢æˆ–é€šç¼©é£é™©å¢åŠ æ—¶ï¼Œå®ƒå¯èƒ½ä¼šé™æ¯ä»¥åˆºæ¿€æ¶ˆè´¹å’ŒæŠ•èµ„éœ€æ±‚ï¼Œä¿ƒè¿›ç»æµæ´»åŠ¨ã€‚ å‡æ¯çš„å½±å“åŒ…æ‹¬ï¼š è´·æ¬¾æˆæœ¬ä¸‹é™ï¼šé™æ¯ä½¿å¾—å•†ä¸šé“¶è¡Œå€Ÿæ¬¾æˆæœ¬ä¸‹é™ï¼Œæ¨åŠ¨è´·æ¬¾åˆ©ç‡çš„ä¸‹é™ã€‚è¿™å¯ä»¥ä¿ƒè¿›æ¶ˆè´¹å’ŒæŠ•èµ„æ”¯å‡ºï¼Œåˆºæ¿€ç»æµå¢é•¿ã€‚ æŠ•èµ„å›æŠ¥å¢åŠ ï¼šä½åˆ©ç‡ä½¿å¾—è‚¡ç¥¨å¸‚åœºå’Œé£é™©èµ„äº§æ›´å…·å¸å¼•åŠ›ï¼Œå¯èƒ½æ¨åŠ¨è‚¡å¸‚å›æŠ¥ç‡ä¸Šå‡ã€‚ è´§å¸è´¬å€¼ï¼šé™æ¯å¯èƒ½å¯¼è‡´èµ„æœ¬å¤–æµï¼Œä½¿è´§å¸è´¬å€¼ï¼Œå¯¹å‡ºå£ä¼ä¸šæœ‰åˆ©ï¼Œå¯èƒ½æé«˜è´¸æ˜“é¡ºå·®ã€‚ å½“å¤®è¡Œé™ä½åˆ©ç‡æ—¶ï¼Œé“¶è¡Œçš„å€Ÿè´·æˆæœ¬ä¸‹é™ï¼Œè¿™æ„å‘³ç€ä¼ä¸šå’Œä¸ªäººå¯ä»¥ä»¥æ›´ä½çš„æˆæœ¬å€Ÿæ¬¾ã€‚è¾ƒä½çš„å€Ÿè´·æˆæœ¬é€šå¸¸ä¼šåˆºæ¿€æŠ•èµ„è€…å¯»æ±‚æ›´é«˜çš„å›æŠ¥ç‡ï¼Œå› ä¸ºä»–ä»¬å¯ä»¥ä»¥æ›´ä½çš„æˆæœ¬è¿›è¡Œå€Ÿè´·å’ŒæŠ•èµ„ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè‚¡ç¥¨å¸‚åœºå’Œå…¶ä»–é£é™©èµ„äº§ï¼Œå¦‚è‚¡ç¥¨åŸºé‡‘æˆ–æˆ¿åœ°äº§æŠ•èµ„ä¿¡æ‰˜ï¼ˆREITsï¼‰ç­‰ï¼Œå¾€å¾€æ›´å…·å¸å¼•åŠ›ã€‚æŠ•èµ„è€…å¯èƒ½å€¾å‘äºå°†èµ„é‡‘æŠ•å…¥åˆ°è¿™äº›é£é™©èµ„äº§ä¸­ï¼Œä»¥è¿½æ±‚æ›´é«˜çš„å›æŠ¥ã€‚è¿™ç§æŠ•èµ„éœ€æ±‚å¯èƒ½æ¨åŠ¨è‚¡ç¥¨å¸‚åœºçš„å›æŠ¥ç‡ä¸Šå‡ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æŸå›½å¤®è¡Œå†³å®šé™ä½åˆ©ç‡ï¼Œè¿™å¯¼è‡´é“¶è¡Œå‘ä¼ä¸šå’Œä¸ªäººæä¾›æ›´ä¾¿å®œçš„è´·æ¬¾ã€‚ä¼ä¸šå’Œä¸ªäººå¯ä»¥ä»¥æ›´ä½çš„åˆ©ç‡å€Ÿæ¬¾æ¥æ‰©å¤§ä¸šåŠ¡æˆ–è¿›è¡ŒæŠ•èµ„ã€‚è¿™å¯èƒ½ä¿ƒä½¿ä¸€äº›æŠ•èµ„è€…å°†èµ„é‡‘æŠ•å…¥åˆ°è‚¡ç¥¨å¸‚åœºï¼Œè´­ä¹°è‚¡ç¥¨ã€‚å½“æŠ•èµ„è€…éœ€æ±‚å¢åŠ æ—¶ï¼Œè‚¡ç¥¨å¸‚åœºçš„è‚¡ç¥¨ä»·æ ¼å¯èƒ½ä¸Šæ¶¨ï¼Œå¹¶ä¸”æŠ•èµ„è€…å¯èƒ½é€šè¿‡è‚¡æ¯æˆ–è‚¡ä»·ä¸Šæ¶¨è·å¾—æ›´é«˜çš„å›æŠ¥ç‡ã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:2:2","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#å‡æ¯"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ç“¦è§£å¸ƒé›·é¡¿æ£®æ—ä½“ç³»åœ¨ 20 ä¸–çºª 70 å¹´ä»£é¢ä¸´äº†ä¸€ç³»åˆ—æŒ‘æˆ˜ï¼Œæœ€ç»ˆå¯¼è‡´äº†å…¶ç“¦è§£ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯¼è‡´å¸ƒé›·é¡¿æ£®æ—ä½“ç³»ç“¦è§£çš„ä¸»è¦åŸå› ï¼š ç¾å…ƒè¶…å‘ï¼šç”±äºç¾å›½åœ¨äºŒæˆ˜åæ˜¯å…¨çƒæœ€å¤§çš„ç»æµä½“ï¼Œå¹¶æ‹¥æœ‰æœ€å¤šçš„é»„é‡‘å‚¨å¤‡ï¼Œç¾å…ƒæˆä¸ºå…¶ä»–å›½å®¶çš„ä¸»è¦å‚¨å¤‡è´§å¸ã€‚ç„¶è€Œï¼Œç¾å›½çš„å¤§è§„æ¨¡è´¸æ˜“èµ¤å­—å’Œé‡‘èæ”¿ç­–çš„å®½æ¾å¯¼è‡´äº†ç¾å…ƒçš„è¶…å‘ï¼Œè¿›è€Œå‰Šå¼±äº†ç¾å…ƒçš„ä»·å€¼å’Œå›½é™…ä¿¡èª‰ã€‚ é»„é‡‘ä¾›åº”é—®é¢˜ï¼šéšç€å›½é™…è´¸æ˜“çš„å¢é•¿å’Œç¾å…ƒè¶…å‘ï¼Œå…¶ä»–å›½å®¶å¼€å§‹å°†ç¾å…ƒå…‘æ¢æˆé»„é‡‘ï¼Œä½¿ç¾å›½é»„é‡‘å‚¨å¤‡å‡å°‘ã€‚è¿™å¼•å‘äº†å¯¹é»„é‡‘ä¾›åº”çš„æ‹…å¿§ï¼Œä½¿å¾—ç¾å…ƒä¸é»„é‡‘çš„å›ºå®šå…‘æ¢æ¯”ç‡éš¾ä»¥ç»´æŒã€‚ æ±‡ç‡å›ºå®šçš„ä¸å¯æŒç»­æ€§ï¼šç”±äºå…¨çƒç»æµå‘å±•ä¸å‡è¡¡å’Œå›½å®¶ä¹‹é—´çš„ç»æµå·®å¼‚ï¼Œä¿æŒæ±‡ç‡å›ºå®šå˜å¾—è¶Šæ¥è¶Šå›°éš¾ã€‚ä¸€äº›å›½å®¶é¢ä¸´ç»æµå›°éš¾æ—¶ï¼Œæ— æ³•é€šè¿‡è°ƒæ•´æ±‡ç‡æ¥æ¢å¤ç«äº‰åŠ›ï¼Œè€Œåªèƒ½å®æ–½ç´§ç¼©æ”¿ç­–ï¼Œå¯¼è‡´ç»æµè¡°é€€å’Œé«˜å¤±ä¸šç‡ã€‚ å¤–æ±‡å¸‚åœºçš„è‡ªç”±åŒ–ï¼š1971 å¹´ï¼Œç¾å›½æ€»ç»Ÿå°¼å…‹æ¾å®£å¸ƒå–æ¶ˆç¾å…ƒä¸é»„é‡‘çš„ç›´æ¥å…‘æ¢ï¼Œä½¿ç¾å…ƒè„±ç¦»äº†é»„é‡‘æ ‡å‡†ã€‚è¿™å¯¼è‡´äº†å¤–æ±‡å¸‚åœºçš„è‡ªç”±åŒ–å’Œæµ®åŠ¨æ±‡ç‡åˆ¶åº¦çš„å´›èµ·ï¼Œä½¿å¾—å›ºå®šæ±‡ç‡åˆ¶åº¦å¤±å»äº†åŸºç¡€ã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:3:0","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#ç“¦è§£"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" åè¯è§£é‡Š","date":"2023-07-07","objectID":"/bretton-woods-system/:4:0","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#åè¯è§£é‡Š"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" èµ¤å­—èµ¤å­—ï¼ˆDeficitï¼‰æ˜¯æŒ‡åœ¨è´¢æ”¿ä¸Šæ”¯å‡ºè¶…è¿‡æ”¶å…¥çš„æƒ…å†µã€‚åœ¨æ”¿åºœè´¢æ”¿é¢†åŸŸï¼Œèµ¤å­—é€šå¸¸æ˜¯æŒ‡æ”¿åºœçš„è´¢æ”¿èµ¤å­—ï¼Œå³æ”¿åºœæ”¯å‡ºè¶…è¿‡æ”¿åºœæ”¶å…¥çš„æƒ…å†µã€‚ æ”¿åºœçš„æ”¶å…¥ä¸»è¦æ¥è‡ªç¨æ”¶ã€å…³ç¨ã€å›½æœ‰ä¼ä¸šåˆ©æ¶¦ç­‰ï¼Œè€Œæ”¯å‡ºåŒ…æ‹¬å…¬å…±æœåŠ¡ã€åŸºç¡€è®¾æ–½å»ºè®¾ã€ç¤¾ä¼šç¦åˆ©ã€å›½é˜²å¼€æ”¯ç­‰ã€‚å½“æ”¿åºœçš„æ”¯å‡ºè¶…è¿‡å…¶æ”¶å…¥æ—¶ï¼Œå°±ä¼šå‡ºç°è´¢æ”¿èµ¤å­—ã€‚ è´¢æ”¿èµ¤å­—é€šå¸¸éœ€è¦é€šè¿‡å€Ÿæ¬¾æ¥å¼¥è¡¥ï¼Œæ”¿åºœå‘è¡Œå€ºåˆ¸ä»¥å¸å¼•å€Ÿæ¬¾è€…è´­ä¹°ï¼Œä»è€Œç­¹é›†é¢å¤–çš„èµ„é‡‘æ¥å¡«è¡¥è´¢æ”¿èµ¤å­—ã€‚è¿™äº›å€ºåˆ¸é€šå¸¸ç”±æ”¿åºœæ‰¿è¯ºåœ¨æœªæ¥å¿è¿˜ï¼Œå¹¶æ”¯ä»˜ä¸€å®šçš„åˆ©æ¯ã€‚ èµ¤å­—å¹¶ä¸ä¸€å®šæ˜¯è´Ÿé¢çš„ï¼Œæ”¿åºœå¯èƒ½å‡ºäºæŸç§ç»æµæˆ–æ”¿ç­–è€ƒè™‘æœ‰æ„é€‰æ‹©å®æ–½è´¢æ”¿èµ¤å­—ã€‚ä¾‹å¦‚ï¼Œåœ¨ç»æµè¡°é€€æ—¶ï¼Œæ”¿åºœå¯èƒ½å¢åŠ æ”¯å‡ºæ¥åˆºæ¿€ç»æµå¢é•¿ï¼Œå³é‡‡å–è´¢æ”¿åˆºæ¿€æ”¿ç­–ã€‚ç„¶è€Œï¼Œé•¿æœŸæŒç»­çš„èµ¤å­—å¯èƒ½ä¼šå¯¼è‡´å€ºåŠ¡ç´¯ç§¯å’Œè´¢æ”¿å¯æŒç»­æ€§é—®é¢˜ï¼Œéœ€è¦æ”¿åºœé‡‡å–é€‚å½“çš„æªæ–½æ¥å¹³è¡¡æ”¶æ”¯ï¼Œä»¥ç¡®ä¿è´¢æ”¿ç¨³å®šå’Œå¯æŒç»­å‘å±•ã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:4:1","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#èµ¤å­—"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ç´§ç¼©æ”¿ç­–ç´§ç¼©æ”¿ç­–ï¼ˆAusterity Policyï¼‰æ˜¯æŒ‡æ”¿åºœé‡‡å–çš„ä¸€ç³»åˆ—ç»æµæ”¿ç­–å’Œè´¢æ”¿æªæ–½ï¼Œæ—¨åœ¨å‰Šå‡æ”¿åºœæ”¯å‡ºã€å‡å°‘è´¢æ”¿èµ¤å­—ã€æ§åˆ¶é€šèƒ€å’Œé™ä½å€ºåŠ¡æ°´å¹³ã€‚ç´§ç¼©æ”¿ç­–é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹æ–¹é¢ï¼š è´¢æ”¿æ”¯å‡ºå‰Šå‡ï¼šæ”¿åºœå‰Šå‡å„ä¸ªé¢†åŸŸçš„å¼€æ”¯ï¼ŒåŒ…æ‹¬å…¬å…±æœåŠ¡ã€åŸºç¡€è®¾æ–½ã€æ•™è‚²ã€åŒ»ç–—ä¿å¥ç­‰ï¼Œä»¥é™ä½è´¢æ”¿èµ¤å­—å’Œå€ºåŠ¡æ°´å¹³ã€‚ ç¨æ”¶å¢åŠ ï¼šæ”¿åºœå¯èƒ½å¢åŠ ç¨æ”¶ï¼ŒåŒ…æ‹¬æé«˜ç¨ç‡ã€æ‰©å¤§ç¨åŸºæˆ–å¼•å…¥æ–°çš„ç¨ç§ï¼Œä»¥å¢åŠ è´¢æ”¿æ”¶å…¥ã€‚ ç¤¾ä¼šç¦åˆ©å‰Šå‡ï¼šæ”¿åºœå¯èƒ½å‡å°‘ç¤¾ä¼šç¦åˆ©å¼€æ”¯ï¼ŒåŒ…æ‹¬å‡å°‘å¤±ä¸šæ•‘æµé‡‘ã€å…»è€é‡‘ã€åŒ»ç–—ä¿é™©ç­‰ç¦åˆ©é¡¹ç›®ï¼Œä»¥å‡å°‘è´¢æ”¿è´Ÿæ‹…ã€‚ å…¬å…±éƒ¨é—¨è£å‘˜ï¼šæ”¿åºœå¯èƒ½å‰Šå‡å…¬å…±éƒ¨é—¨çš„äººå‘˜ç¼–åˆ¶ï¼Œä»¥é™ä½äººåŠ›æˆæœ¬å’Œè´¢æ”¿æ”¯å‡ºã€‚ è´§å¸ç´§ç¼©ï¼šå¤®è¡Œå¯èƒ½é‡‡å–ç´§ç¼©çš„è´§å¸æ”¿ç­–ï¼Œé€šè¿‡åŠ æ¯ã€æ”¶ç´§ä¿¡è´·ç­‰æ‰‹æ®µæ¥æ§åˆ¶é€šèƒ€å’ŒæŠ‘åˆ¶æ¶ˆè´¹æ”¯å‡ºã€‚ ç´§ç¼©æ”¿ç­–é€šå¸¸åœ¨ç»æµè¡°é€€ã€é«˜é€šèƒ€ã€å€ºåŠ¡å±æœºç­‰æƒ…å†µä¸‹å®æ–½ã€‚å®ƒçš„ç›®æ ‡æ˜¯é€šè¿‡å‰Šå‡æ”¯å‡ºã€å¢åŠ æ”¶å…¥å’Œæé«˜è´¢æ”¿çºªå¾‹ï¼Œä½¿æ”¿åºœçš„è´¢æ”¿çŠ¶å†µå¾—åˆ°æ”¹å–„ï¼Œå¹¶æ¢å¤ç»æµçš„å¯æŒç»­å¢é•¿ã€‚ç„¶è€Œï¼Œç´§ç¼©æ”¿ç­–ä¹Ÿå¯èƒ½å¯¼è‡´ç»æµæ´»åŠ¨å‡ç¼“ã€å¤±ä¸šç‡ä¸Šå‡ã€ç¤¾ä¼šç¦åˆ©ä¸‹é™ç­‰é—®é¢˜ã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:4:2","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#ç´§ç¼©æ”¿ç­–"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" é«˜é€šèƒ€é«˜é€šèƒ€ï¼ˆHigh inflationï¼‰æ˜¯æŒ‡ç‰©ä»·æŒç»­ä¸Šæ¶¨çš„é€Ÿåº¦è¾ƒé«˜çš„æƒ…å†µã€‚åœ¨é«˜é€šèƒ€ç¯å¢ƒä¸‹ï¼Œè´§å¸è´­ä¹°åŠ›é€æ¸ä¸‹é™ï¼Œäººä»¬éœ€è¦æ”¯ä»˜æ›´å¤šçš„è´§å¸æ¥è´­ä¹°ç›¸åŒæ•°é‡çš„å•†å“å’ŒæœåŠ¡ã€‚é«˜é€šèƒ€é€šå¸¸è¢«è®¤ä¸ºæ˜¯ä¸€ç§ç»æµä¸ç¨³å®šçš„ç°è±¡ï¼Œå¯èƒ½å¯¹ç»æµå’Œç¤¾ä¼šé€ æˆä¸€ç³»åˆ—å½±å“ã€‚ é«˜é€šèƒ€é€šå¸¸ç”±ä¾›æ±‚å¤±è¡¡ã€è´§å¸ä¾›åº”è¿‡å‰©ã€æˆæœ¬æ¨åŠ¨æˆ–éœ€æ±‚æ¨åŠ¨ç­‰å› ç´ å¼•èµ·ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„åŸå› ï¼š è´§å¸ä¾›åº”è¿‡å‰©ï¼šå½“è´§å¸ä¾›åº”å¢é•¿é€Ÿåº¦è¶…è¿‡ç»æµå¢é•¿é€Ÿåº¦æ—¶ï¼Œä¼šå¯¼è‡´è´§å¸ä¾›åº”è¿‡å‰©ï¼Œä»è€Œæ¨åŠ¨ç‰©ä»·ä¸Šæ¶¨ã€‚ æˆæœ¬æ¨åŠ¨ï¼šæˆæœ¬ä¸Šæ¶¨ï¼Œå¦‚åŠ³åŠ¨åŠ›æˆæœ¬ã€åŸææ–™æˆæœ¬ç­‰çš„å¢åŠ ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç”Ÿäº§æˆæœ¬ä¸Šå‡ï¼Œä¼ä¸šä¸ºäº†ç»´æŒåˆ©æ¶¦ç‡ï¼Œå°†æˆæœ¬ä¸Šæ¶¨è½¬å«åˆ°äº§å“ä»·æ ¼ä¸Šï¼Œæ¨åŠ¨ç‰©ä»·ä¸Šæ¶¨ã€‚ éœ€æ±‚æ¨åŠ¨ï¼šå½“éœ€æ±‚è¶…è¿‡ä¾›åº”æ—¶ï¼Œä¾›åº”ä¸èƒ½æ»¡è¶³å¸‚åœºéœ€æ±‚ï¼Œå•†å“å’ŒæœåŠ¡çš„ä»·æ ¼ä¸Šæ¶¨ã€‚è¿™å¯èƒ½æ˜¯ç”±äºäººå£å¢é•¿ã€æ¶ˆè´¹éœ€æ±‚å¢åŠ ã€æŠ•èµ„å¢åŠ ç­‰å¼•èµ·çš„ã€‚ é«˜é€šèƒ€å¯èƒ½ä¼šå¸¦æ¥ä¸€ç³»åˆ—çš„ç»æµå’Œç¤¾ä¼šé—®é¢˜ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š è´¢åŠ¡ä¸ç¨³å®šï¼šé«˜é€šèƒ€ä¼šå‰Šå¼±è´§å¸çš„è´­ä¹°åŠ›ï¼Œå¯¹ä¸ªäººã€å®¶åº­å’Œä¼ä¸šçš„è´¢åŠ¡çŠ¶å†µé€ æˆä¸åˆ©å½±å“ï¼Œå°¤å…¶æ˜¯å›ºå®šæ”¶å…¥è€…å’ŒæŒæœ‰ç°é‡‘çš„äººã€‚ æ¶ˆè´¹å‡å¼±ï¼šç”±äºç‰©ä»·ä¸Šæ¶¨ï¼Œæ¶ˆè´¹è€…è´­ä¹°åŠ›ä¸‹é™ï¼Œå¯¼è‡´æ¶ˆè´¹å‡å°‘ï¼Œå¯¹ç»æµå¢é•¿äº§ç”Ÿè´Ÿé¢å½±å“ã€‚ æŠ•èµ„ä¸ç¡®å®šæ€§ï¼šé«˜é€šèƒ€ç¯å¢ƒä¸‹ï¼Œä»·æ ¼ä¸ç¨³å®šï¼Œå¢åŠ äº†æŠ•èµ„å†³ç­–çš„ä¸ç¡®å®šæ€§ï¼Œå¯èƒ½æŠ‘åˆ¶æŠ•èµ„æ´»åŠ¨ã€‚ ç¤¾ä¼šä¸ç¨³å®šï¼šé«˜é€šèƒ€å¯èƒ½å¼•å‘ç¤¾ä¼šä¸æ»¡å’Œä¸å¹³ç­‰åŠ å‰§ï¼Œå¯¹ç¤¾ä¼šç¨³å®šé€ æˆå¨èƒã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:4:3","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#é«˜é€šèƒ€"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ç»å¸¸è´¦æˆ·ç»å¸¸è´¦æˆ·ï¼ˆCurrent Accountï¼‰æ˜¯å›½é™…æ”¶æ”¯è¡¨ä¸­çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ï¼Œç”¨äºè®°å½•ä¸€ä¸ªå›½å®¶ä¸å…¶ä»–å›½å®¶ä¹‹é—´çš„è´§ç‰©ã€æœåŠ¡ã€æ”¶å…¥å’Œè½¬ç§»çš„äº¤æ˜“ã€‚ ç»å¸¸è´¦æˆ·åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªä¸»è¦ç»„æˆéƒ¨åˆ†ï¼š è´§ç‰©è´¸æ˜“ï¼šè´§ç‰©è´¸æ˜“æ˜¯æŒ‡ä¸€ä¸ªå›½å®¶çš„å‡ºå£å’Œè¿›å£ç‰©å“çš„ä»·å€¼ã€‚å‡ºå£ç‰©å“çš„ä»·å€¼å¢åŠ äº†ç»å¸¸è´¦æˆ·çš„å€Ÿé¡¹ï¼ˆæ”¶å…¥ï¼‰ï¼Œè€Œè¿›å£ç‰©å“çš„ä»·å€¼å¢åŠ äº†ç»å¸¸è´¦æˆ·çš„è´·é¡¹ï¼ˆæ”¯å‡ºï¼‰ã€‚è´§ç‰©è´¸æ˜“é€šå¸¸å æ®ç»å¸¸è´¦æˆ·æœ€å¤§çš„éƒ¨åˆ†ã€‚ æœåŠ¡è´¸æ˜“ï¼šæœåŠ¡è´¸æ˜“æ˜¯æŒ‡ä¸€ä¸ªå›½å®¶çš„å‡ºå£å’Œè¿›å£æœåŠ¡çš„ä»·å€¼ï¼Œå¦‚æ—…æ¸¸ã€è¿è¾“ã€ä¿é™©ã€é‡‘èã€å’¨è¯¢ç­‰ã€‚å‡ºå£æœåŠ¡å¢åŠ äº†ç»å¸¸è´¦æˆ·çš„å€Ÿé¡¹ï¼Œè€Œè¿›å£æœåŠ¡å¢åŠ äº†ç»å¸¸è´¦æˆ·çš„è´·é¡¹ã€‚ æ”¶å…¥ï¼šæ”¶å…¥éƒ¨åˆ†è®°å½•äº†ä¸€ä¸ªå›½å®¶ä»æµ·å¤–è·å¾—çš„æ”¶å…¥ï¼ŒåŒ…æ‹¬å·¥èµ„ã€åˆ©æ¯ã€è‚¡æ¯ã€åˆ©æ¶¦ç­‰ã€‚æ”¶å…¥çš„å€Ÿé¡¹è¡¨ç¤ºä»æµ·å¤–è·å¾—çš„æ”¶å…¥ï¼Œè€Œè´·é¡¹è¡¨ç¤ºå›½å†…å‘æµ·å¤–æ”¯ä»˜çš„æ”¶å…¥ã€‚ è½¬ç§»æ”¯ä»˜ï¼šè½¬ç§»æ”¯ä»˜æ˜¯æŒ‡ä¸€ä¸ªå›½å®¶ä¸å…¶ä»–å›½å®¶ä¹‹é—´çš„æ— å¯¹ä»·çš„è½¬ç§»ï¼Œå¦‚å›½é™…æ´åŠ©ã€ç§»æ°‘æ±‡æ¬¾ã€èµ æ¬¾ç­‰ã€‚è½¬ç§»æ”¯ä»˜çš„å€Ÿé¡¹è¡¨ç¤ºä»æµ·å¤–è·å¾—çš„è½¬ç§»æ”¯ä»˜ï¼Œè€Œè´·é¡¹è¡¨ç¤ºå›½å†…å‘æµ·å¤–æ”¯ä»˜çš„è½¬ç§»æ”¯ä»˜ã€‚ ç»å¸¸è´¦æˆ·çš„ç»“ä½™ï¼ˆé¡ºå·®ï¼‰æˆ–é€†å·®åæ˜ äº†ä¸€ä¸ªå›½å®¶ä¸å…¶ä»–å›½å®¶ä¹‹é—´çš„å‡€è´¸æ˜“çŠ¶å†µã€‚ç»å¸¸è´¦æˆ·é¡ºå·®è¡¨ç¤ºå›½å®¶çš„æ”¶å…¥è¶…è¿‡æ”¯å‡ºï¼Œè€Œé€†å·®è¡¨ç¤ºæ”¯å‡ºè¶…è¿‡æ”¶å…¥ã€‚ ç»å¸¸è´¦æˆ·æ˜¯å›½é™…æ”¶æ”¯è¡¨çš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ï¼Œå®ƒåæ˜ äº†ä¸€ä¸ªå›½å®¶ä¸ä¸–ç•Œå…¶ä»–å›½å®¶ä¹‹é—´çš„ç»æµå…³ç³»å’Œäº¤æµã€‚ç»å¸¸è´¦æˆ·çš„å˜åŠ¨å¯ä»¥å—åˆ°å¤šç§å› ç´ çš„å½±å“ï¼Œå¦‚è´¸æ˜“æ”¿ç­–ã€ç»æµå¢é•¿ã€æ±‡ç‡å˜åŠ¨ã€å›½é™…æŠ•èµ„ç­‰ã€‚å¯¹ç»å¸¸è´¦æˆ·çš„ç›‘æµ‹å’Œç®¡ç†æœ‰åŠ©äºäº†è§£ä¸€ä¸ªå›½å®¶çš„å›½é™…ç»æµçŠ¶å†µï¼Œå¹¶å¯ä»¥å¸®åŠ©æ”¿ç­–åˆ¶å®šè€…é‡‡å–é€‚å½“çš„æªæ–½æ¥å¹³è¡¡å›½é™…æ”¶æ”¯å’Œç»´æŠ¤ç»æµç¨³å®šã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:4:4","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#ç»å¸¸è´¦æˆ·"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" è´¸æ˜“é€†å·®å’Œè´¸æ˜“é¡ºå·®è´¸æ˜“é€†å·®ï¼ˆTrade deficitï¼‰å’Œè´¸æ˜“é¡ºå·®ï¼ˆTrade surplusï¼‰æ˜¯å›½é™…è´¸æ˜“ä¸­ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œç”¨äºæè¿°ä¸€ä¸ªå›½å®¶çš„å‡ºå£å’Œè¿›å£ä¹‹é—´çš„å·®é¢ã€‚ è´¸æ˜“é¡ºå·®ï¼šè´¸æ˜“é¡ºå·®æŒ‡ä¸€ä¸ªå›½å®¶åœ¨ä¸€å®šæ—¶é—´å†…çš„å‡ºå£æ€»å€¼è¶…è¿‡å…¶è¿›å£æ€»å€¼çš„æƒ…å†µã€‚æ¢å¥è¯è¯´ï¼Œè´¸æ˜“é¡ºå·®è¡¨ç¤ºè¯¥å›½çš„å‡ºå£æ”¶å…¥å¤§äºå…¶è¿›å£æ”¯å‡ºã€‚è´¸æ˜“é¡ºå·®æ˜¯ä¸€ä¸ªå›½å®¶ç»æµçš„ä¸€ç§æ­£é¢æŒ‡æ ‡ï¼Œæ„å‘³ç€è¯¥å›½åœ¨å›½é™…è´¸æ˜“ä¸­å‡€è·å¾—äº†ç»æµä»·å€¼ã€‚ è´¸æ˜“é¡ºå·®å¯èƒ½ä¼šå¸¦æ¥ä»¥ä¸‹å½±å“ï¼š å¢åŠ å¤–æ±‡å‚¨å¤‡ï¼šè´¸æ˜“é¡ºå·®æ„å‘³ç€è¯¥å›½è·å¾—äº†å¤–å¸æ”¶å…¥ï¼Œå¢åŠ äº†å…¶å¤–æ±‡å‚¨å¤‡ï¼Œä½¿å…¶åœ¨å›½é™…æ”¯ä»˜å’Œåº”å¯¹å¤–éƒ¨ç»æµå†²å‡»æ—¶æ›´å…·å¼¹æ€§ã€‚ åˆºæ¿€å°±ä¸šå’Œç»æµå¢é•¿ï¼šè´¸æ˜“é¡ºå·®å¯ä»¥ä¿ƒè¿›å›½å†…äº§ä¸šå’Œå‡ºå£ç›¸å…³è¡Œä¸šçš„å‘å±•ï¼Œåˆºæ¿€å°±ä¸šå’Œç»æµå¢é•¿ã€‚ æ”¹å–„ç»å¸¸è´¦æˆ·ï¼šè´¸æ˜“é¡ºå·®å¯¹ç»å¸¸è´¦æˆ·æœ‰ç§¯æçš„å½±å“ï¼Œå› ä¸ºå®ƒè¡¨ç¤ºå›½å®¶åœ¨å•†å“å’ŒæœåŠ¡è´¸æ˜“æ–¹é¢çš„å‡€æ”¶å…¥ã€‚ è´¸æ˜“é€†å·®ï¼šè´¸æ˜“é€†å·®æŒ‡ä¸€ä¸ªå›½å®¶åœ¨ä¸€å®šæ—¶é—´å†…çš„è¿›å£æ€»å€¼è¶…è¿‡å…¶å‡ºå£æ€»å€¼çš„æƒ…å†µã€‚è´¸æ˜“é€†å·®è¡¨ç¤ºè¯¥å›½çš„è¿›å£æ”¯å‡ºè¶…è¿‡äº†å…¶å‡ºå£æ”¶å…¥ã€‚è´¸æ˜“é€†å·®é€šå¸¸è¢«è§†ä¸ºä¸€ä¸ªå›½å®¶ç»æµçš„æŒ‘æˆ˜ï¼Œå› ä¸ºå®ƒæ„å‘³ç€è¯¥å›½éœ€è¦ä¾èµ–å¤–å›½ä¾›åº”æ¥æ»¡è¶³å›½å†…éœ€æ±‚ã€‚ è´¸æ˜“é€†å·®å¯èƒ½ä¼šå¸¦æ¥ä»¥ä¸‹å½±å“ï¼š å‡å°‘å¤–æ±‡å‚¨å¤‡ï¼šè´¸æ˜“é€†å·®æ„å‘³ç€è¯¥å›½éœ€è¦æ”¯ä»˜æ›´å¤šçš„å¤–æ±‡æ¥è´­ä¹°è¿›å£å•†å“ï¼Œå¯èƒ½ä¼šå‡å°‘å…¶å¤–æ±‡å‚¨å¤‡ï¼Œä½¿å…¶åœ¨å›½é™…æ”¯ä»˜æ–¹é¢é¢ä¸´æŒ‘æˆ˜ã€‚ æ½œåœ¨çš„å¤±ä¸šé£é™©ï¼šè´¸æ˜“é€†å·®å¯èƒ½ä¼šå¯¼è‡´å›½å†…äº§ä¸šçš„ç«äº‰åŠ›ä¸‹é™ï¼Œè¿›è€Œå¯¹å°±ä¸šäº§ç”Ÿè´Ÿé¢å½±å“ã€‚ ç»å¸¸è´¦æˆ·å‹åŠ›ï¼šè´¸æ˜“é€†å·®å¯¹ç»å¸¸è´¦æˆ·äº§ç”Ÿè´Ÿé¢å½±å“ï¼Œå› ä¸ºå®ƒè¡¨ç¤ºå›½å®¶åœ¨å•†å“å’ŒæœåŠ¡è´¸æ˜“æ–¹é¢çš„å‡€æ”¯å‡ºã€‚ ","date":"2023-07-07","objectID":"/bretton-woods-system/:5:0","series":[],"tags":["ç»æµ"],"title":"å¸ƒé›·é¡¿æ£®æ—ä½“ç³»","uri":"/bretton-woods-system/#è´¸æ˜“é€†å·®å’Œè´¸æ˜“é¡ºå·®"},{"categories":["python"],"content":"xiaobinqt,virtualenvwrapper-win,python,virtualenvwrapper","date":"2023-05-26","objectID":"/virtualenvwrapper-win/","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/"},{"categories":["python"],"content":" Virtualenvwrapper æ˜¯ä¸€ä¸ªç”¨äºç®¡ç† Python è™šæ‹Ÿç¯å¢ƒçš„å·¥å…·ï¼Œå®ƒä¸ºåˆ›å»ºã€åˆ‡æ¢å’Œåˆ é™¤è™šæ‹Ÿç¯å¢ƒæä¾›äº†ä¸€ç»„æ–¹ä¾¿çš„å‘½ä»¤ï¼Œå¹¶é€šè¿‡ç®€åŒ–ç®¡ç†å¤šä¸ªè™šæ‹Ÿç¯å¢ƒçš„è¿‡ç¨‹æ¥æé«˜å¼€å‘æ•ˆç‡ã€‚ ","date":"2023-05-26","objectID":"/virtualenvwrapper-win/:0:0","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/#"},{"categories":["python"],"content":" å®‰è£…å¯ä»¥ä½¿ç”¨ pip å®‰è£… Virtualenvwrapperï¼š pip install virtualenvwrapper-win å®‰è£…å®Œæˆåï¼Œéœ€è¦è®¾ç½®ä¸€äº›ç¯å¢ƒå˜é‡ã€‚åˆ›å»ºä¸€ä¸ªåä¸ºWORKON_HOMEçš„ç¯å¢ƒå˜é‡ï¼Œç”¨äºæŒ‡å®šè™šæ‹Ÿç¯å¢ƒçš„å­˜å‚¨ä½ç½®ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†å…¶è®¾ç½®ä¸ºD:\\python\\venvã€‚ WORKON_HOME åœ¨å®‰è£…å¹¶é…ç½®å¥½ Virtualenvwrapper åï¼Œæ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œçª—å£ï¼Œä»¥ä¾¿æ–°çš„ç¯å¢ƒå˜é‡ç”Ÿæ•ˆã€‚ ","date":"2023-05-26","objectID":"/virtualenvwrapper-win/:1:0","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/#å®‰è£…"},{"categories":["python"],"content":" åˆ›å»ºè™šæ‹Ÿç¯å¢ƒä½¿ç”¨ mkvirtualenv å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„è™šæ‹Ÿç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œè¦åˆ›å»ºä¸€ä¸ªåä¸º go.src çš„è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š mkvirtualenv ","date":"2023-05-26","objectID":"/virtualenvwrapper-win/:2:0","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/#åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ"},{"categories":["python"],"content":" æŸ¥çœ‹æ‰€æœ‰è™šæ‹Ÿç¯å¢ƒè¦åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ workon å‘½ä»¤ï¼Œä¸å¸¦ä»»ä½•å‚æ•°è¿è¡Œå®ƒï¼š workon ","date":"2023-05-26","objectID":"/virtualenvwrapper-win/:3:0","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/#æŸ¥çœ‹æ‰€æœ‰è™šæ‹Ÿç¯å¢ƒ"},{"categories":["python"],"content":" æ¿€æ´»è™šæ‹Ÿç¯å¢ƒåˆ›å»ºè™šæ‹Ÿç¯å¢ƒåï¼Œå¯ä»¥ä½¿ç”¨ workon å‘½ä»¤æ¥æ¿€æ´»è¯¥ç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œè¦æ¿€æ´»åä¸º go.src çš„è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ ","date":"2023-05-26","objectID":"/virtualenvwrapper-win/:4:0","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/#æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ"},{"categories":["python"],"content":" åˆ é™¤è™šæ‹Ÿç¯å¢ƒå¦‚æœè¦åˆ é™¤ä¸å†éœ€è¦çš„è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ rmvirtualenv å‘½ä»¤ï¼Œåè·Ÿè¦åˆ é™¤çš„è™šæ‹Ÿç¯å¢ƒçš„åç§°ã€‚ä¾‹å¦‚ï¼Œè¦åˆ é™¤åä¸º myenv çš„è™šæ‹Ÿç¯å¢ƒï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š rmvirtualenv myenv ","date":"2023-05-26","objectID":"/virtualenvwrapper-win/:5:0","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/#åˆ é™¤è™šæ‹Ÿç¯å¢ƒ"},{"categories":["python"],"content":" é€€å‡ºè™šæ‹Ÿç¯å¢ƒå¯ä»¥ä½¿ç”¨ deactivate å‘½ä»¤é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼š é€€å‡ºè™šæ‹Ÿç¯å¢ƒ ","date":"2023-05-26","objectID":"/virtualenvwrapper-win/:6:0","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/#é€€å‡ºè™šæ‹Ÿç¯å¢ƒ"},{"categories":["python"],"content":" pycharm é…ç½® ","date":"2023-05-26","objectID":"/virtualenvwrapper-win/:7:0","series":[],"tags":["python"],"title":"windows ä¸‹ python virtualenvwrapper-win ä½¿ç”¨","uri":"/virtualenvwrapper-win/#pycharm-é…ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,dnsmasq,powerdns","date":"2023-05-24","objectID":"/docker-net-custom-dns/","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸è§ DNS è®°å½•ç±»å‹ A è®°å½•ï¼ˆAddress Recordï¼‰ è®°å½•æ ¼å¼ï¼šexample.com. IN A 192.0.2.1ï¼Œå°†åŸŸåæ˜ å°„åˆ° IPv4 åœ°å€ï¼Œä¸åŒ…å«ç«¯å£ä¿¡æ¯ã€‚ AAAA è®°å½•ï¼ˆIPv6 Address Recordï¼‰ è®°å½•æ ¼å¼ï¼šexample.com. IN AAAA 2001:db8::1ï¼Œå°†åŸŸåæ˜ å°„åˆ° IPv6 åœ°å€ã€‚ CNAME è®°å½•ï¼ˆCanonical Name Recordï¼‰ è®°å½•æ ¼å¼ï¼šwww.example.com. IN CNAME example.com.ï¼Œå°†ä¸€ä¸ªåŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸåï¼Œå®ç°åŸŸåçš„åˆ«åæˆ–é‡å®šå‘ã€‚ TXT è®°å½•ï¼ˆText Recordï¼‰ è®°å½•æ ¼å¼ï¼šexample.com. IN TXT \"Some text here\"ï¼Œå­˜å‚¨ä¸åŸŸåç›¸å…³çš„æ–‡æœ¬ä¿¡æ¯ï¼Œå¸¸ç”¨äºéªŒè¯åŸŸåæ‰€æœ‰æƒã€é˜²æ­¢ç”µå­é‚®ä»¶æ¬ºè¯ˆç­‰ã€‚ SRV è®°å½•ï¼ˆService Recordï¼‰ è®°å½•æ ¼å¼ï¼š_service._proto.name. IN SRV priority weight port targetã€‚priorityè¡¨ç¤ºä¼˜å…ˆçº§ï¼Œç”¨äºæŒ‡å®šå¤‡ç”¨æœåŠ¡å™¨çš„é¡ºåºã€‚å€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚weightè¡¨ç¤ºæƒé‡ï¼Œç”¨äºåœ¨å…·æœ‰ç›¸åŒä¼˜å…ˆçº§çš„è®°å½•ä¹‹é—´è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚å€¼è¶Šå¤§ï¼Œæƒé‡è¶Šé«˜ã€‚portè¡¨ç¤ºæœåŠ¡çš„ç«¯å£å·ã€‚targetè¡¨ç¤ºæä¾›è¯¥æœåŠ¡çš„ç›®æ ‡ä¸»æœºçš„åŸŸåã€‚ SRV ç”¨äºæŒ‡å®šç‰¹å®šæœåŠ¡çš„åŸŸåã€ç«¯å£å’Œä¼˜å…ˆçº§ç­‰ä¿¡æ¯ï¼Œå®ƒç”¨äºåœ¨ DNS ä¸­æä¾›æœåŠ¡å‘ç°çš„åŠŸèƒ½ï¼Œè®©å®¢æˆ·ç«¯èƒ½å¤Ÿé€šè¿‡åŸŸåæŸ¥æ‰¾åˆ°æä¾›ç‰¹å®šæœåŠ¡çš„ç›®æ ‡ä¸»æœºå’Œç«¯å£ã€‚ PTR è®°å½•ï¼ˆPointer Recordï¼‰ è®°å½•æ ¼å¼ï¼š1.2.0.192.in-addr.arpa. IN PTR example.com.ï¼Œç”¨äºè¿›è¡Œåå‘ DNS æŸ¥æ‰¾ï¼Œå°† IP åœ°å€è§£æä¸ºåŸŸåã€‚ INï¼ˆè¡¨ç¤ºInternetï¼‰åœ¨ DNS è®°å½•ä¸­æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥çœç•¥ã€‚å½“çœç•¥ IN æ—¶ï¼Œé»˜è®¤ä¸º INï¼Œå› ä¸ºå¤§å¤šæ•° DNS è®°å½•éƒ½æ˜¯é’ˆå¯¹äº’è”ç½‘çš„ã€‚ ","date":"2023-05-24","objectID":"/docker-net-custom-dns/:1:0","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/#å¸¸è§-dns-è®°å½•ç±»å‹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" resolv.conf é…ç½®æ–‡ä»¶resolv.conf é…ç½®æ–‡ä»¶ï¼Œå­˜å‚¨äº†ç”¨äºè§£æåŸŸåçš„ DNS æœåŠ¡å™¨çš„ç›¸å…³ä¿¡æ¯ï¼Œç”¨äºæŒ‡å®šç³»ç»Ÿçš„ DNS è§£æé…ç½®ã€‚ resolv.conf æ–‡ä»¶é€šå¸¸ä½äº Linux ç³»ç»Ÿä¸­çš„ /etc/resolv.confã€‚æ¯è¡ŒåŒ…å«ä¸€ä¸ªé…ç½®é¡¹ï¼Œé…ç½®é¡¹ç”±å…³é”®å­—å’Œå¯¹åº”çš„å€¼ç»„æˆï¼Œä»¥ç©ºæ ¼æˆ–åˆ¶è¡¨ç¬¦åˆ†éš”ã€‚å¸¸è§çš„é…ç½®é¡¹åŒ…æ‹¬ï¼š nameserverï¼šæŒ‡å®š DNS æœåŠ¡å™¨çš„ IP åœ°å€ã€‚å¯ä»¥æœ‰å¤šä¸ª nameserver è¡Œï¼ŒæŒ‰ç…§ä¼˜å…ˆçº§ä»ä¸Šåˆ°ä¸‹è¿›è¡Œè§£æã€‚ searchï¼šæŒ‡å®šé»˜è®¤çš„æœç´¢åŸŸååˆ—è¡¨ã€‚å½“ä½¿ç”¨ä¸å®Œå…¨é™å®šçš„åŸŸåæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°è¯•é™„åŠ è¿™äº›åŸŸåæ¥è¿›è¡Œè§£æã€‚ domainï¼šæŒ‡å®šç³»ç»Ÿçš„é»˜è®¤åŸŸåã€‚å½“ä½¿ç”¨ä¸å®Œå…¨é™å®šçš„ä¸»æœºåæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°è¯•é™„åŠ é»˜è®¤åŸŸåæ¥è¿›è¡Œè§£æã€‚ optionsï¼šæŒ‡å®šå…¶ä»–çš„è§£æé€‰é¡¹ï¼Œå¦‚è¶…æ—¶æ—¶é—´ã€è½¬å‘ç­‰ã€‚ nameserver 8.8.8.8 nameserver 8.8.4.4 search example.com æ¯”å¦‚ä»¥ä¸‹çš„è¿™ä¸ªé…ç½® resolv.conf search xae-zcbus-20230523.28e5df10.csphere.local csphere.local è¿™æ¡ search é…ç½®è¡¨ç¤ºç³»ç»Ÿé»˜è®¤çš„æœç´¢åŸŸååˆ—è¡¨åŒ…æ‹¬ä¸¤ä¸ªåŸŸåï¼šxae-zcbus-20230523.28e5df10.csphere.local å’Œ csphere.localã€‚ å½“è¿›è¡Œ DNS è§£ææ—¶ï¼Œå¦‚æœä½¿ç”¨ä¸€ä¸ªä¸å®Œå…¨é™å®šçš„åŸŸåï¼ˆæ²¡æœ‰åŒ…å«ç‚¹å·ï¼‰ï¼Œç³»ç»Ÿä¼šæŒ‰ç…§ search é…ç½®ä¸­çš„é¡ºåºå°è¯•é€ä¸ªé™„åŠ è¿™äº›æœç´¢åŸŸåï¼Œä»¥å°è¯•è§£æåŸŸåã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¦è§£æçš„åŸŸåæ˜¯ exampleï¼Œç³»ç»Ÿä¼šä¾æ¬¡å°è¯•è§£æ example.xae-zcbus-20230523.28e5df10.csphere.local å’Œ example.csphere.localã€‚ è¿™æ ·é…ç½®æœç´¢åŸŸååˆ—è¡¨å¯ä»¥ç®€åŒ– DNS æŸ¥è¯¢è¿‡ç¨‹ï¼Œç‰¹åˆ«æ˜¯åœ¨æœ¬åœ°ç½‘ç»œå†…éƒ¨ä½¿ç”¨å†…éƒ¨åŸŸåæ—¶ï¼Œé€šè¿‡è®¾ç½®åˆé€‚çš„æœç´¢åŸŸåï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ä¸å®Œå…¨é™å®šçš„ä¸»æœºåè¿›è¡Œè§£æï¼Œè€Œæ— éœ€æ¯æ¬¡éƒ½è¾“å…¥å®Œæ•´çš„åŸŸåã€‚ ndots å‚æ•°æ§åˆ¶ç€ç³»ç»Ÿåœ¨è¿›è¡Œ DNS è§£ææ—¶æ˜¯å¦è‡ªåŠ¨è¿½åŠ æœç´¢åŸŸåã€‚å®ƒæŒ‡å®šäº†ä¸€ä¸ªåŸŸåä¸­è‡³å°‘è¦åŒ…å«çš„ç‚¹å·.çš„æ•°é‡ã€‚ç‚¹å·åœ¨åŸŸåä¸­çš„æ•°é‡è¡¨ç¤ºåŸŸåçš„å±‚çº§ç»“æ„ï¼Œä¾‹å¦‚example.comæœ‰ä¸€ä¸ªç‚¹å·ï¼Œè€Œwww.example.comæœ‰ä¸¤ä¸ªç‚¹å·ã€‚å½“ä¸€ä¸ªåŸŸåçš„å±‚çº§ç»“æ„ä¸­ç‚¹å·çš„æ•°é‡è¾¾åˆ°æˆ–è¶…è¿‡ ndots å‚æ•°æŒ‡å®šçš„å€¼æ—¶ï¼Œç³»ç»Ÿå°†ä¸å†è¿½åŠ æœç´¢åŸŸåã€‚ å¦‚ä¸Šçš„é…ç½®options ndots:2ï¼Œè¡¨ç¤ºå½“è¿›è¡Œ DNS è§£ææ—¶ï¼Œå¦‚æœåŸŸåä¸­åŒ…å«è‡³å°‘ä¸¤ä¸ªç‚¹å·ï¼ˆå±‚çº§ç»“æ„è‡³å°‘ä¸ºä¸‰çº§ï¼‰ï¼Œç³»ç»Ÿå°†ä¸ä¼šè‡ªåŠ¨è¿½åŠ æœç´¢åŸŸåã€‚å¦‚æœåŸŸåçš„å±‚çº§ç»“æ„ä¸è¶³ä¸‰çº§ï¼ˆç‚¹å·å°‘äºä¸¤ä¸ªï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°è¯•ä½¿ç”¨ /etc/resolv.conf ä¸­æŒ‡å®šçš„æœç´¢åŸŸååˆ—è¡¨è¿›è¡Œè§£æã€‚ nameserver 172.17.0.1ç”¨äºæŒ‡å®š DNS è§£ææ—¶è¦ä½¿ç”¨çš„ DNS æœåŠ¡å™¨çš„ IP åœ°å€ã€‚è¿™é‡Œçš„172.17.0.1æ˜¯ Docker bridge ç½‘ç»œä¸‹è™šæ‹Ÿç½‘æ¡¥ docker0 çš„ IP åœ°å€ã€‚ å› ä¸ºå®¹å™¨ä¸­æ²¡æœ‰ dns è§£ææœåŠ¡ï¼Œä¸ç®¡æ˜¯ dnsmasq è¿˜æ˜¯ pdns éƒ½æ˜¯è£…åœ¨å®¿ä¸»æœºä¸Šçš„ï¼Œæ‰€ä»¥æœ€åè‚¯å®šæ˜¯åˆ°å®¿ä¸»æœºä¸Šæ¥è§£æçš„åŸŸåï¼Œä½†æ˜¯è¿™é‡Œå¦‚æœç›´æ¥å†™å®¿ä¸»æœº IP ä¼šå½±å“æ•ˆç‡ã€ŒTODO å¾…è¡¥å……ã€ã€‚ ","date":"2023-05-24","objectID":"/docker-net-custom-dns/:2:0","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/#resolvconf-é…ç½®æ–‡ä»¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" /etc/hosts é…ç½®æ–‡ä»¶/etc/hosts æ˜¯æœ¬åœ°çš„ä¸»æœºåè§£ææ–‡ä»¶ï¼Œç”¨äºå°†ä¸»æœºåæ˜ å°„åˆ°å¯¹åº”çš„ IP åœ°å€ã€‚/etc/hosts æ–‡ä»¶åŒ…å«äº†ä¸»æœºåå’Œå¯¹åº” IP åœ°å€çš„æ˜ å°„å…³ç³»ã€‚æ¯è¡Œçš„æ ¼å¼ä¸º \u003cIP åœ°å€\u003e \u003cä¸»æœºå\u003e æˆ–è€… \u003cIP åœ°å€\u003e \u003cä¸»æœºåˆ«å\u003e \u003cä¸»æœºå\u003eã€‚ /etc/hosts æ–‡ä»¶ä¸­çš„æ¡ç›®ä¼˜å…ˆäº DNSï¼ˆDomain Name Systemï¼‰è§£æï¼Œå½“ç³»ç»Ÿéœ€è¦è§£æä¸»æœºåæ—¶ï¼Œä¼šé¦–å…ˆæŸ¥çœ‹ /etc/hosts æ–‡ä»¶ï¼Œå¦‚æœæ‰¾åˆ°åŒ¹é…çš„ä¸»æœºåï¼Œåˆ™ç›´æ¥ä½¿ç”¨å¯¹åº”çš„ IP åœ°å€è¿›è¡Œé€šä¿¡ï¼Œæ— éœ€è¿›è¡Œ DNS æŸ¥è¯¢ã€‚ hosts ","date":"2023-05-24","objectID":"/docker-net-custom-dns/:3:0","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/#etchosts-é…ç½®æ–‡ä»¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" PDNSPDNS æ˜¯ PowerDNS çš„ç®€ç§°ï¼Œå®ƒæ˜¯ä¸€æ¬¾å¼€æºçš„åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰æœåŠ¡å™¨è½¯ä»¶ã€‚ # å®‰è£… pdns yum install pdns pdns-backend-pipe -y # pdns å¯åŠ¨,åœæ­¢å’ŒæŸ¥çœ‹æ˜¯å¦è¿è¡Œæ­£å¸¸ systemctl start/stop/status pdns æŸ¥çœ‹ dnsmasq æ˜¯å¦æ­£å¸¸ å¦‚æœæœ‰é—®é¢˜éœ€è¦æ’æŸ¥ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤è®© pdns åœ¨å‰å°è¿è¡Œ /usr/sbin/pdns_server --guardian=no --daemon=no --disable-syslog --log-timestamp=no --write-pid=no å‰å°è¿è¡Œæ¨¡å¼ --guardian=no: ç¦ç”¨ Guardian æ¨¡å¼ã€‚Guardian æ¨¡å¼æ˜¯ PowerDNS çš„å®ˆæŠ¤è¿›ç¨‹ç®¡ç†æœºåˆ¶ï¼Œå®ƒè´Ÿè´£ç›‘æ§å’Œé‡å¯ PowerDNS è¿›ç¨‹ã€‚é€šè¿‡å°†æ­¤å‚æ•°è®¾ç½®ä¸º noï¼Œç¦ç”¨äº† Guardian æ¨¡å¼ã€‚ --daemon=no: ç¦ç”¨å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒPowerDNS ä»¥å®ˆæŠ¤è¿›ç¨‹çš„å½¢å¼è¿è¡Œï¼Œå³åœ¨åå°ä½œä¸ºç³»ç»ŸæœåŠ¡è¿è¡Œã€‚é€šè¿‡å°†æ­¤å‚æ•°è®¾ç½®ä¸º noï¼ŒPowerDNS å°†åœ¨å‰å°è¿è¡Œï¼Œè¾“å‡ºæ—¥å¿—å’Œè°ƒè¯•ä¿¡æ¯åˆ°ç»ˆç«¯ã€‚ --disable-syslog: ç¦ç”¨ä½¿ç”¨ç³»ç»Ÿæ—¥å¿—ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒPowerDNS ä¼šå°†æ—¥å¿—ä¿¡æ¯å†™å…¥ç³»ç»Ÿæ—¥å¿—ã€‚é€šè¿‡ä½¿ç”¨æ­¤å‚æ•°ï¼Œç¦ç”¨äº†å°†æ—¥å¿—å†™å…¥ç³»ç»Ÿæ—¥å¿—çš„åŠŸèƒ½ã€‚ --log-timestamp=no: ç¦ç”¨æ—¥å¿—æ—¶é—´æˆ³ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒPowerDNS åœ¨æ—¥å¿—ä¸­æ·»åŠ æ—¶é—´æˆ³ä»¥æŒ‡ç¤ºæ¯ä¸ªæ—¥å¿—æ¡ç›®çš„æ—¶é—´ã€‚é€šè¿‡å°†æ­¤å‚æ•°è®¾ç½®ä¸º noï¼Œç¦ç”¨äº†æ—¶é—´æˆ³çš„æ·»åŠ ã€‚ --write-pid=no: ç¦ç”¨å†™å…¥ PID æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒPowerDNS ä¼šå°†å…¶è¿›ç¨‹ ID å†™å…¥ PID æ–‡ä»¶ã€‚é€šè¿‡å°†æ­¤å‚æ•°è®¾ç½®ä¸º noï¼Œç¦ç”¨äº† PID æ–‡ä»¶çš„å†™å…¥ã€‚ ","date":"2023-05-24","objectID":"/docker-net-custom-dns/:4:0","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/#pdns"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" pipe backendåœ¨ PowerDNS ä¸­ï¼Œpipe æ˜¯ä¸€ç§åç«¯ï¼ˆBackendï¼‰ç±»å‹ï¼Œç”¨äºå°† DNS æŸ¥è¯¢é€šè¿‡ç®¡é“ï¼ˆPipeï¼‰æ–¹å¼ä¼ é€’ç»™å¤–éƒ¨ç¨‹åºè¿›è¡Œå¤„ç†ã€‚è¿™ç§åç«¯ç±»å‹è¢«ç§°ä¸º â€œpipe backendâ€ã€‚ ä½¿ç”¨ pipe backendï¼ŒPowerDNS å¯ä»¥å°†æ¥æ”¶åˆ°çš„ DNS æŸ¥è¯¢é€šè¿‡ç®¡é“å‘é€ç»™ä¸€ä¸ªå¤–éƒ¨çš„è‡ªå®šä¹‰è„šæœ¬æˆ–ç¨‹åºï¼Œç„¶åç”±è¯¥è„šæœ¬æˆ–ç¨‹åºå¤„ç†æŸ¥è¯¢å¹¶è¿”å›ç»“æœç»™ PowerDNSã€‚è¿™ç§æ–¹å¼å…è®¸ç”¨æˆ·æ ¹æ®è‡ªå·±çš„éœ€æ±‚ç¼–å†™è‡ªå®šä¹‰é€»è¾‘æ¥å¤„ç† DNS æŸ¥è¯¢ï¼Œä»è€Œå®ç°æ›´çµæ´»çš„åŠŸèƒ½ã€‚ åœ¨ PowerDNS ä¸­é…ç½® pipe backend éœ€è¦ä»¥ä¸‹æ­¥éª¤ï¼š ç¼–å†™è‡ªå®šä¹‰è„šæœ¬æˆ–ç¨‹åºï¼šæ ¹æ®éœ€æ±‚ï¼Œç¼–å†™ä¸€ä¸ªèƒ½å¤Ÿæ¥æ”¶ DNS æŸ¥è¯¢å¹¶è¿”å›ç»“æœçš„è„šæœ¬æˆ–ç¨‹åºã€‚è¯¥è„šæœ¬æˆ–ç¨‹åºå¯ä»¥ä½¿ç”¨ä»»ä½•ç¼–ç¨‹è¯­è¨€æ¥å®ç°ï¼Œä¾‹å¦‚ Pythonã€Perlã€Shell ç­‰ã€‚ é…ç½® PowerDNSï¼šåœ¨ PowerDNS çš„é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä½¿ç”¨ pipe backendï¼Œå¹¶è®¾ç½®è¦æ‰§è¡Œçš„è„šæœ¬æˆ–ç¨‹åºçš„è·¯å¾„ã€‚é€šå¸¸éœ€è¦ä¿®æ”¹ PowerDNS çš„é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ pdns.confï¼‰æ¥è¿›è¡Œé…ç½®ã€‚ launch=pipe pipe-command=/path/to/your/script.py ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œpipe-command æŒ‡å®šäº†è‡ªå®šä¹‰è„šæœ¬æˆ–ç¨‹åºçš„è·¯å¾„ã€‚åœ¨ä¿®æ”¹å®Œé…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡æ–°å¯åŠ¨ PowerDNS æœåŠ¡ï¼Œä½¿é…ç½®ç”Ÿæ•ˆã€‚ å½“ PowerDNS æ¥æ”¶åˆ° DNS æŸ¥è¯¢æ—¶ï¼Œå®ƒå°†ä¼šå°†æŸ¥è¯¢æ•°æ®é€šè¿‡ç®¡é“ä¼ é€’ç»™æŒ‡å®šçš„è„šæœ¬æˆ–ç¨‹åºã€‚è„šæœ¬æˆ–ç¨‹åºå¯ä»¥å¤„ç†æŸ¥è¯¢å¹¶è¿”å›ç»“æœç»™ PowerDNSï¼Œç„¶åç”± PowerDNS å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ é€šè¿‡é…ç½® pipe backendï¼Œå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚ç¼–å†™è‡ªå®šä¹‰çš„é€»è¾‘æ¥å¤„ç† DNS æŸ¥è¯¢ï¼Œä¾‹å¦‚åŸºäºå¤–éƒ¨æ•°æ®æºã€è‡ªå®šä¹‰ç­–ç•¥ã€è¿‡æ»¤ç­‰æ“ä½œã€‚ ","date":"2023-05-24","objectID":"/docker-net-custom-dns/:4:1","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/#pipe-backend"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" dnsmasq # å®‰è£… dnsmasq yum install dnsmasq # ä¸€äº›çŠ¶æ€å‘½ä»¤ systemctl start/stop/restart/status dnsmasq # æ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•æ˜¯å¦æ­£ç¡® dnsmasq --test dnsmasq å‘½ä»¤ Dnsmasq æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ DNS å’Œ DHCP æœåŠ¡å™¨è½¯ä»¶ï¼Œç”¨äºæä¾›æœ¬åœ°åŸŸåè§£æå’Œç½‘ç»œåœ°å€åˆ†é…åŠŸèƒ½ï¼Œé…ç½®æ–‡ä»¶é€šå¸¸ä½äº /etc/dnsmasq.confã€‚ä¸‹é¢æ˜¯ä¸€äº›å¸¸ç”¨çš„é…ç½®æ–‡ä»¶å­—æ®µè¯´æ˜ï¼š portï¼ˆç«¯å£ï¼‰ï¼šæŒ‡å®š Dnsmasq ç›‘å¬çš„ DNS æŸ¥è¯¢ç«¯å£ã€‚é»˜è®¤ä¸º 53ï¼Œä½†å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ›´æ”¹ã€‚ cache-sizeï¼ˆç¼“å­˜å¤§å°ï¼‰ï¼šæŒ‡å®šDNSç¼“å­˜çš„æœ€å¤§å¤§å°ï¼ˆä»¥æ¡ç›®æ•°é‡è¡¨ç¤ºï¼‰ã€‚ç¼“å­˜å¯ä»¥æé«˜è§£ææ€§èƒ½ï¼Œå‡å°‘å¯¹ä¸Šæ¸¸ DNS æœåŠ¡å™¨çš„æŸ¥è¯¢æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼Œcache-size=1000 è¡¨ç¤ºæœ€å¤šç¼“å­˜ 1000 æ¡ DNS è§£æè®°å½•ã€‚ serverï¼ˆæœåŠ¡å™¨ï¼‰ï¼šç”¨äºæŒ‡å®šè¦ä½¿ç”¨çš„ä¸Šæ¸¸ DNS æœåŠ¡å™¨ã€‚å¯ä»¥é…ç½®å¤šä¸ª server å­—æ®µï¼Œæ¯ä¸ªå­—æ®µåé¢è·Ÿéšä¸€ä¸ªæœ‰æ•ˆçš„ DNS æœåŠ¡å™¨åœ°å€ã€‚Dnsmasq ä¼šæŒ‰é¡ºåºå‘è¿™äº›æœåŠ¡å™¨å‘é€ DNS æŸ¥è¯¢è¯·æ±‚ã€‚ server=8.8.8.8 server=8.8.4.4 server çš„å¦ä¸€ç§å†™æ³•æ˜¯ç”¨æ¥æŒ‡å®šç‰¹å®šåŸŸåçš„ DNS æœåŠ¡å™¨æ˜ å°„ã€‚æ¯”å¦‚ï¼š server=/domain.org/192.168.14.5 è¿™ä¸ªé…ç½®è¡¨ç¤ºå°†åŸŸå domain.org è§£æåˆ° IP åœ°å€ 192.168.14.5 ä¸Šã€‚å½“ Dnsmasq æ”¶åˆ°å¯¹domain.orgåŸŸåçš„è§£æè¯·æ±‚æ—¶ï¼Œå®ƒå°†ä½¿ç”¨æŒ‡å®šçš„ IP åœ°å€ä½œä¸ºå“åº”ã€‚è¿™åœ¨æœ¬åœ°ç½‘ç»œä¸­åˆ›å»ºè‡ªå®šä¹‰çš„åŸŸåè§£æè§„åˆ™éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç”¨äºå†…éƒ¨åŸŸåè§£ææˆ–é‡å®šå‘ç‰¹å®šåŸŸååˆ°ç‰¹å®š IP åœ°å€ã€‚ address å‚æ•°ç”¨äºæŒ‡å®šåŸŸåè§£æçš„é™æ€æ˜ å°„ï¼Œå°†ç‰¹å®šåŸŸåè§£æåˆ°æŒ‡å®šçš„IPåœ°å€ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š address=/åŸŸå/IPåœ°å€ address=/example.com/192.168.1.100 è¿™ä¸ªé…ç½®å°†åŸŸå example.com è§£æä¸º IP åœ°å€ 192.168.1.100ã€‚å½“ Dnsmasq æ¥æ”¶åˆ°å…³äº example.com çš„è§£æè¯·æ±‚æ—¶ï¼Œå®ƒå°†ä½¿ç”¨æŒ‡å®šçš„ IP åœ°å€è¿›è¡Œè§£æï¼Œè€Œä¸ä¼šå‘ä¸Šæ¸¸ DNS æœåŠ¡å™¨å‘é€æŸ¥è¯¢è¯·æ±‚ã€‚ ","date":"2023-05-24","objectID":"/docker-net-custom-dns/:5:0","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/#dnsmasq"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ¼”ç»ƒç°åœ¨æœ‰ 2 å°æœºå™¨ï¼Œåˆ†åˆ«æ˜¯192.168.14.103ç”¨æ¥åšæ§åˆ¶å™¨ï¼Œå®‰è£…æœ‰ powerDNSï¼Œä½œä¸ºä¸Šæ¸¸ DNSï¼Œç”¨æ¥æœ€åè§£æ DNSï¼Œ192.168.14.100ç”¨æ¥åš agentï¼Œå®‰è£…æœ‰ dnsmasq è§£ææœ¬åœ° DNSï¼Œé€šè¿‡é…ç½® server å‚æ•°ï¼Œå°†åŸŸåäº¤ç»™ä¸Šæ¸¸ DNS æœåŠ¡å™¨è§£æï¼Œä¹Ÿå°±æ˜¯äº¤ç»™192.168.14.103è§£æå¤„ç†ã€‚ pdns é€šè¿‡ pipe backend çš„ python è„šæœ¬ï¼Œå¯¹æ‰€æœ‰çš„ä»¥domain.orgç»“å°¾çš„åŸŸåè¯·æ±‚éƒ½è¿”å›192.168.40.223çš„ IPï¼Œä»¥ä¸‹æ˜¯ backend.py çš„ python è„šæœ¬ï¼Œpython ç‰ˆæœ¬æ˜¯ python 3.6.8ã€‚ #!/usr/bin/env python # -*- coding: utf-8 -*- import os import random import sys import time class DNSLookup(object): \"\"\"Handle PowerDNS pipe-backend domain name lookups.\"\"\" ttl = 30 def __init__(self, query): \"\"\"parse DNS query and produce lookup result. query: a sequence containing the DNS query as per PowerDNS manual appendix A: http://downloads.powerdns.com/documentation/html/backends-detail.html#PIPEBACKEND-PROTOCOL \"\"\" (_type, qname, qclass, qtype, _id, ip) = query self.has_result = False # has a DNS query response qname_lower = qname.lower() \"\"\"List of servers to round-robin\"\"\" servers = ['192.168.40.223'] server = random.choice(servers) self.results = [] # if (qtype == 'A' or qtype == 'ANY') and qname_lower.endswith('domain.org'): if qtype == 'ANY' and qname_lower.endswith('domain.org'): self.results.append('DATA\\t%s\\t%s\\tA\\t%d\\t-1\\t%s' % (qname, qclass, DNSLookup.ttl, server)) self.has_result = True elif qtype == 'SOA': self.results.append( 'DATA\\t%s\\t%s\\t%s\\t3600\\t-1\\tns1.test.soa\\tadmin.test.soa\\t2014032110\\t10800\\t3600\\t604800\\t3600' % (qname, qclass, qtype)) self.has_result = True def str_result(self): \"\"\"return string result suitable for pipe-backend output to PowerDNS.\"\"\" if self.has_result: return '\\n'.join(self.results) else: return '' class Logger(object): def __init__(self): pid = os.getpid() self.logfile = '/tmp/backend.log' \"\"\"self.logfile = '/tmp/backend-%d.log' % pid\"\"\" def write(self, msg): logline = '%s|%s\\n' % (time.asctime(), msg) f = open(self.logfile, 'a') f.write(logline) f.close() def debug_log(msg): logger.write(msg) class PowerDNSbackend(object): \"\"\"The main PowerDNS pipe backend process.\"\"\" def __init__(self, filein, fileout): \"\"\"initialise and run PowerDNS pipe backend process.\"\"\" self.filein = filein self.fileout = fileout self._process_requests() # main program loop def _process_requests(self): \"\"\"main program loop\"\"\" first_time = True while 1: rawline = self.filein.readline() if rawline == '': debug_log('EOF') return # EOF detected line = rawline.rstrip() debug_log('received from pdns:%s' % line) if first_time: if line == 'HELO\\t1': self._fprint('OK\\tPython backend firing up') else: self._fprint('FAIL') debug_log('HELO input not received - execution aborted') rawline = self.filein.readline() # as per docs - read another line before aborting debug_log('calling sys.exit()') sys.exit(1) first_time = False else: query = line.split('\\t') if len(query) != 6: self._fprint('LOG\\tPowerDNS sent unparseable line') self._fprint('FAIL') else: debug_log('Performing DNSLookup(%s)' % repr(query)) lookup = DNSLookup(query) if lookup.has_result: pdns_result = lookup.str_result() self._fprint(pdns_result) debug_log('DNSLookup result(%s)' % pdns_result) self._fprint('END') def _fprint(self, message): \"\"\"Print the given message with newline and flushing.\"\"\" self.fileout.write(message + '\\n') self.fileout.flush() debug_log('sent to pdns:%s' % message) if __name__ == '__main__': logger = Logger() infile = sys.stdin # sys.stdout.close() # outfile = os.fdopen(1, 'w', 1) outfile = sys.stdout try: PowerDNSbackend(infile, outfile) except: debug_log('execution failure:' + str(sys.exc_info()[0])) raise pipe backend dig è§£ææ­£å¸¸ ç°åœ¨åœ¨ agent æœºå™¨ä¹Ÿå°±æ˜¯192.168.14.100ä¸Šé€šè¿‡ xiaobinqt/redis:7-ping é•œåƒå¯åŠ¨ä¸€ä¸ª redis å®¹å™¨ï¼Œå®¹å™¨åä¸º c-redisï¼š docker run --name c-redis --dns 172.17.0.1 --dns-search domain.org --dns-opt \"ndots:2\" -d xiaobinqt/redis:7-ping æ¯”å¦‚ï¼Œå½“åœ¨å®¹å™¨ä¸­æ‰§è¡Œ ping abddæ—¶ï¼Œæ­£å¸¸ä¼šå…ˆèµ° hosts ä½†æ˜¯è¿™é‡Œçš„ hosts éƒ½æ²¡æœ‰å¯¹åº”çš„åŸŸåï¼Œæ‰€ä»¥ hosts å¤±æ•ˆï¼Œå†å» nameserver æŒ‡å®šçš„ DNS æœåŠ¡å™¨è§£æåŸŸåï¼Œç”±äºé…ç½®äº† ndots:2 ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿½åŠ æœç´¢åŸŸådomain.orgï¼Œæ‰€ä»¥ä¼šå» 172.17.0.1 DNS æœåŠ¡å™¨æœç´¢åŸŸå abdd.domain.orgï¼Œ172.17.0.1 å¯¹åº”çš„æ˜¯å®¿ä¸»æœºçš„ docker0 è™šæ‹Ÿç½‘æ¡¥ï¼Œæœ€åä¼šèµ°åˆ°å®¿ä¸»æœºçš„ dns æœåŠ¡ï¼Œä¹Ÿå°±æ˜¯192.168.14.100 çš„ dnsmasq æœåŠ¡ï¼Œå¯¹åº”çš„ç«¯å£æ˜¯ 53ã€‚ è°ƒè¯•ç»“æœ ","date":"2023-05-24","objectID":"/docker-net-custom-dns/:6:0","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/#æ¼”ç»ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ pdns-pipebackend.py PowerDNS : libpipebackend.so no such file or directory Installing DNS Server on CentOS/RHEL using dnsmasq | Zimbra ","date":"2023-05-24","objectID":"/docker-net-custom-dns/:7:0","series":[],"tags":["dns","docker"],"title":"Docker bridge ç½‘ç»œä¸è‡ªå®šä¹‰ DNS è§£æ","uri":"/docker-net-custom-dns/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,Permission denied (publickey). fatal: Could not read from remote repository.","date":"2023-03-25","objectID":"/ssh-permissions-are-too-open/","series":[],"tags":["git"],"title":"SSH error: permissions are too open","uri":"/ssh-permissions-are-too-open/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é—®é¢˜æè¿°æˆ‘çš„ git ç‰ˆæœ¬åœ¨ 1.8.3.1 çš„æ—¶å€™æäº¤ push ä»£ç æ—¶ä¸€ç›´æŠ¥é”™ git ç‰ˆæœ¬ Permission denied (publickey) Permission denied (publickey). fatal: Could not read from remote repository. Please make sure you have the correct access rights and the repository exists. æ’æŸ¥äº†å‡ ä¸ªå°æ—¶ï¼Œä¸€ç›´æ²¡è§£å†³ï¼Œä¹‹å‰ä¹Ÿä¸€ç›´æ˜¯è¿™ä¹ˆç”¨çš„ï¼Œä¹Ÿæ²¡å‡ºç°è¿‡é—®é¢˜ã€‚åæ¥æ²¡åŠæ³•ï¼Œæˆ‘å°è¯•æ›´æ–°äº†ä¸‹ git ç‰ˆæœ¬åˆ° 2.39.2ï¼Œå‘ç°é”™è¯¯æç¤ºä¸ä¸€æ ·äº†ğŸ˜¢ Permissions are too open Warning: Permanently added '192.168.40.233' (ECDSA) to the list of known hosts. @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @ WARNING: UNPROTECTED PRIVATE KEY FILE! @ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Permissions 0755 for '/tmp/tmp.LGAlGyMvNs/id_rsa' are too open. It is required that your private key files are NOT accessible by others. This private key will be ignored. Load key \"/tmp/tmp.LGAlGyMvNs/id_rsa\": bad permissions Permission denied (publickey). è‡´å‘½é”™è¯¯ï¼šæ— æ³•è¯»å–è¿œç¨‹ä»“åº“ã€‚ è¯·ç¡®è®¤æ‚¨æœ‰æ­£ç¡®çš„è®¿é—®æƒé™å¹¶ä¸”ä»“åº“å­˜åœ¨ã€‚ æˆ‘æ ¹æ®Permissions 0755 for '/tmp/tmp.LGAlGyMvNs/id_rsa' are too open. google äº†ä¸‹ï¼ŒåŸæ¥æ˜¯ isa æ–‡ä»¶æƒé™ç»™çš„å¤ªé«˜äº†ï¼Œæ”¹æˆ 400 æˆ–æ˜¯ 600 å°±å¯ä»¥äº†ã€‚ é—®é¢˜è§£å†³ ","date":"2023-03-25","objectID":"/ssh-permissions-are-too-open/:1:0","series":[],"tags":["git"],"title":"SSH error: permissions are too open","uri":"/ssh-permissions-are-too-open/#é—®é¢˜æè¿°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ SSH error: permissions are too open CentOS 7 å‡çº§ git ç‰ˆæœ¬åˆ° 2.x ","date":"2023-03-25","objectID":"/ssh-permissions-are-too-open/:2:0","series":[],"tags":["git"],"title":"SSH error: permissions are too open","uri":"/ssh-permissions-are-too-open/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,","date":"2023-02-22","objectID":"/windows-wsl/","series":[],"tags":["wsl","windows"],"title":"Windows 10 ä¸“ä¸šç‰ˆä½¿ç”¨ WSL","uri":"/windows-wsl/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä»€ä¹ˆæ˜¯ wslWindows Subsystem for Linuxï¼ˆWSLï¼‰æ˜¯ä¸€ä¸ªåœ¨ Windows 10+ ä¸Šèƒ½å¤Ÿè¿è¡ŒåŸç”Ÿ Linux äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶çš„å…¼å®¹å±‚ã€‚ ä¸ WSL1 ç›¸æ¯”ï¼ŒWSL 2 ä½¿ç”¨æ›´æ–°ã€æ›´å¼ºå¤§çš„è™šæ‹ŸåŒ–æŠ€æœ¯åœ¨è½»é‡çº§å®ç”¨å·¥å…·è™šæ‹Ÿæœº (VM) ä¸­è¿è¡Œ Linux å†…æ ¸ã€‚ ","date":"2023-02-22","objectID":"/windows-wsl/:1:0","series":[],"tags":["wsl","windows"],"title":"Windows 10 ä¸“ä¸šç‰ˆä½¿ç”¨ WSL","uri":"/windows-wsl/#ä»€ä¹ˆæ˜¯-wsl"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£…æˆ‘æ˜¯ win10 ä¸“ä¸šç‰ˆï¼Œå…¶ä»–ç‰ˆæœ¬çš„ win10 ä¹Ÿç±»ä¼¼ï¼Œä¸è¿‡æ¨èä½¿ç”¨ä¸“ä¸šç‰ˆã€‚ ç”µè„‘ç‰ˆæœ¬ è¿›å…¥ windows ç»ˆç«¯ wsl -l -oæŸ¥çœ‹å¯å®‰è£…çš„å‘è¡Œç‰ˆ æ‰§è¡Œwsl --set-default-version 2å°† WSL é»˜è®¤ç‰ˆæœ¬è°ƒæ•´ä¸º WSL2 wsl --install --d NAMEå³å¯å®‰è£…ã€‚å¦‚ï¼š wsl --install --d ubuntu-20.04å¯å®‰è£… ubuntu20.04 wsl -l -vå¯æŸ¥çœ‹å®‰è£…çš„å‘è¡Œç‰ˆçš„ WSL ç‰ˆæœ¬ æ³¨é”€ï¼ˆå¸è½½ï¼‰å½“å‰å®‰è£…çš„ Linux çš„ Windows å­ç³»ç»Ÿå¯ä»¥ä½¿ç”¨ï¼š wsl --unregister åç§° å¸è½½ wsl å¯¹äºå·²å®‰è£…çš„ wsl ç‰ˆæœ¬ï¼Œä» wsl1 åˆ‡æ¢åˆ° wsl2 å¯ä»¥ä½¿ç”¨ï¼š wsl --set-version åç§° 2 åˆ‡æ¢ wsl2 ","date":"2023-02-22","objectID":"/windows-wsl/:2:0","series":[],"tags":["wsl","windows"],"title":"Windows 10 ä¸“ä¸šç‰ˆä½¿ç”¨ WSL","uri":"/windows-wsl/#å®‰è£…"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" no_proxy è®¾ç½®win10 çš„ no_proxy å¯ä»¥ç›´æ¥æ·»åŠ ç³»ç»Ÿç¯å¢ƒå˜é‡ï¼š win10 no_proxy WSL no_proxy ä¹Ÿå¯ä»¥é€šè¿‡æ·»åŠ ç¯å¢ƒå˜é‡æ–¹å¼ï¼š wsl no_proxy ","date":"2023-02-22","objectID":"/windows-wsl/:3:0","series":[],"tags":["wsl","windows"],"title":"Windows 10 ä¸“ä¸šç‰ˆä½¿ç”¨ WSL","uri":"/windows-wsl/#no_proxy-è®¾ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ WSL çš„åŸºæœ¬å‘½ä»¤ å¦‚ä½•åœ¨ Windows 11 ä¸­å®‰è£… Windows Subsystem for Linuxï¼ˆWSLï¼‰ windows clash è®¾ç½®ä»£ç† windows çš„cmdè®¾ç½®ä»£ç†æ–¹æ³• Windows 10/11 å®‰è£… WSL2 çš„ç®€å•æ–¹æ³• Win11å¸è½½WSLï¼Œå¸è½½Windowså­ç³»ç»Ÿ ","date":"2023-02-22","objectID":"/windows-wsl/:4:0","series":[],"tags":["wsl","windows"],"title":"Windows 10 ä¸“ä¸šç‰ˆä½¿ç”¨ WSL","uri":"/windows-wsl/#å‚è€ƒ"},{"categories":null,"content":" Linux å°å†Œ æ¢ç´¢ Linux - å¸¸ç”¨å‘½ä»¤ä¸å¸¸è§é—®é¢˜ç¬”è®° é˜…è¯»å…¨æ–‡ HTTP å­¦ä¹ å°å†Œ å­¦è€Œä¸æ€åˆ™ç½”ï¼Œæ€è€Œä¸å­¦åˆ™æ®† é˜…è¯»å…¨æ–‡ Kubernetes å­¦ä¹ å°å†Œ å¾ç”Ÿä¹Ÿæœ‰æ¶¯ï¼Œè€ŒçŸ¥ä¹Ÿæ— æ¶¯ é˜…è¯»å…¨æ–‡ ","date":"2023-01-31","objectID":"/showcase/:0:0","series":null,"tags":null,"title":"å°å†Œ","uri":"/showcase/#"},{"categories":["golang"],"content":"xiaobinqt,ç¼–è¯‘æ ‡ç­¾ï¼Œbuild tag","date":"2023-01-28","objectID":"/go-build-tag/","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/"},{"categories":["golang"],"content":" ç®€ä»‹åœ¨ Go ä¸­ï¼Œbuild tag æ˜¯æ·»åŠ åˆ°ä»£ç ä¸­ç¬¬ä¸€è¡Œï¼Œæ¥æ ‡è¯†ç¼–è¯‘ç›¸å…³ä¿¡æ¯çš„ï¼Œbuild tag å†³å®šäº†å½“å‰æ–‡ä»¶æ˜¯å¦ä¼šè¢«å½“å‰ package æ‰€åŒ…å«ï¼Œç”¨äºé™åˆ¶ä¸€æ•´ä¸ªæ–‡ä»¶æ˜¯å¦åº”è¯¥è¢«ç¼–è¯‘å…¥æœ€ç»ˆçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¸­çš„éƒ¨åˆ†ä»£ç ç‰‡æ®µã€‚ Go ç¼–è¯‘æ ‡ç­¾build tagè¯­æ³•å¦‚ä¸‹ï¼š // +build [tag] build tags æ–‡ä»¶é¡¶éƒ¨é™„è¿‘ï¼Œå‰é¢åªèƒ½æœ‰ç©ºè¡Œå’Œå…¶ä»–è¡Œæ³¨é‡Šã€‚ ç¼–è¯‘æ ‡è®°å¿…é¡»å‡ºç°åœ¨ package å­å¥ä¹‹å‰ï¼Œå¹¶ä¸”ä¸ºäº†ä¸åŒ…æ–‡æ¡£åŒºåˆ†å¼€æ¥ï¼Œå®ƒå¿…é¡»åè·Ÿä¸€ä¸ªç©ºè¡Œã€‚ ","date":"2023-01-28","objectID":"/go-build-tag/:1:0","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#ç®€ä»‹"},{"categories":["golang"],"content":" ç¼–è¯‘æ ‡ç­¾çš„é€»è¾‘å½“åœ¨ä¸€ä¸ªåŒ…ä¸­ä½¿ç”¨å¤šä¸ªæ ‡ç­¾æ—¶ä¼šä½¿ç”¨ bool é€»è¾‘è¿›è¡Œäº¤äº’ï¼Œå…·ä½“å–å†³äºæˆ‘ä»¬å¦‚ä½•è¿›è¡Œå£°æ˜çš„ã€‚ Build tags éµå¾ªä»¥ä¸‹ä¸‰ä¸ªè§„åˆ™ï¼š ä»¥ç©ºæ ¼åˆ†éš”çš„æ ‡ç­¾å°†åœ¨ORé€»è¾‘ä¸‹è¿›è¡Œè§£é‡Šã€‚ é€—å·åˆ†éš”çš„æ ‡ç­¾å°†åœ¨ANDé€»è¾‘ä¸‹è¿›è¡Œè§£é‡Šã€‚ æ¯ä¸ªæœ¯è¯­éƒ½æ˜¯ä¸€ä¸ªå­—æ¯æ•°å­—å•è¯ï¼Œå¦‚æœå‰é¢æœ‰!å®ƒæ„å‘³ç€å®ƒè¢«å¦å®šã€‚ ","date":"2023-01-28","objectID":"/go-build-tag/:2:0","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#ç¼–è¯‘æ ‡ç­¾çš„é€»è¾‘"},{"categories":["golang"],"content":" or æ ‡ç­¾é€»è¾‘ç»™å®šæ ‡ç­¾ï¼š // +build tag1 tag2 OR è§£é‡Šæ˜¯ï¼Œå¦‚æœåœ¨æ‰§è¡Œ build æ„å»ºå‘½ä»¤æ—¶å­˜åœ¨ tag1 æˆ– tag2ï¼Œåˆ™å°†åŒ…å«æ­¤æ–‡ä»¶ã€‚ ","date":"2023-01-28","objectID":"/go-build-tag/:2:1","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#or-æ ‡ç­¾é€»è¾‘"},{"categories":["golang"],"content":" and æ ‡ç­¾é€»è¾‘å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ ‡ç­¾ï¼š // +build tag1, tag2 è§£é‡Šæ˜¯ tag1 ä¸”ï¼ˆANDï¼‰ tag2 å¿…é¡»å­˜åœ¨äº build æ„å»ºå‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬çš„æ–‡ä»¶æ‰èƒ½åŒ…å«åœ¨ç¼–è¯‘ä¸­ã€‚ ","date":"2023-01-28","objectID":"/go-build-tag/:2:2","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#and-æ ‡ç­¾é€»è¾‘"},{"categories":["golang"],"content":" ï¼éæ ‡ç­¾é€»è¾‘å¦‚æœæˆ‘ä»¬ä½¿ç”¨æ ‡ç­¾ // +build !tag1 è§£é‡Šæ˜¯ï¼Œé tag1ï¼Œæˆ‘ä»¬çš„æ–‡ä»¶æ‰ä¼š build ç¼–è¯‘ ","date":"2023-01-28","objectID":"/go-build-tag/:2:3","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#éæ ‡ç­¾é€»è¾‘"},{"categories":["golang"],"content":" å¦‚ä½•ä½¿ç”¨","date":"2023-01-28","objectID":"/go-build-tag/:3:0","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#å¦‚ä½•ä½¿ç”¨"},{"categories":["golang"],"content":" æ–°å»º build tagæˆ‘ä»¬æ–°å»ºä¸€ä¸ª buildtag æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨æ–‡ä»¶å¤¹ä¸‹æ–°å»ºå¦‚ä¸‹4ä¸ªç©ºæ–‡ä»¶ï¼Œå¦‚ä¸‹ï¼š . â”œâ”€â”€ dev.go â”œâ”€â”€ main.go â”œâ”€â”€ prod.go â”œâ”€â”€ test.go â””â”€â”€ without.go æˆ‘ä»¬æ‰“å¼€ main.go è¾“å…¥ä»£ç å¦‚ä¸‹ï¼š package main import \"fmt\" var configArr []string func main() { for _, conf := range configArr { fmt.Println(conf) } } æˆ‘ä»¬æ‰“å¼€ dev.go è¾“å…¥ä»£ç å¦‚ä¸‹ï¼š // +build dev package main func init() { configArr = append(configArr, \"mysql dev\") } æˆ‘ä»¬æ‰“å¼€ prod.go è¾“å…¥ä»£ç å¦‚ä¸‹ï¼š // +build prod package main func init() { configArr = append(configArr, \"mysql prod\") } æˆ‘ä»¬æ‰“å¼€ test.go è¾“å…¥ä»£ç å¦‚ä¸‹ï¼š // +build test1 package main func init() { configArr = append(configArr, \"mysql test\") } æˆ‘ä»¬æ‰“å¼€ without.go è¾“å…¥ä»£ç å¦‚ä¸‹ï¼š // +build !without package main func init() { configArr = append(configArr, \"mysql without\") } ","date":"2023-01-28","objectID":"/go-build-tag/:3:1","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#æ–°å»º-build-tag"},{"categories":["golang"],"content":" ä½¿ç”¨ tags ç¼–è¯‘ 1. æ²¡æœ‰tagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql without 2. å•ä¸ªtagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build -tags \"dev\" åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql dev 3. å¤šä¸ªtagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build -tags \"dev prod\" åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql dev mysql prod ","date":"2023-01-28","objectID":"/go-build-tag/:3:2","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#ä½¿ç”¨-tags-ç¼–è¯‘"},{"categories":["golang"],"content":" ä½¿ç”¨ tags ç¼–è¯‘ 1. æ²¡æœ‰tagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql without 2. å•ä¸ªtagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build -tags \"dev\" åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql dev 3. å¤šä¸ªtagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build -tags \"dev prod\" åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql dev mysql prod ","date":"2023-01-28","objectID":"/go-build-tag/:3:2","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#1-æ²¡æœ‰tagç¼–è¯‘"},{"categories":["golang"],"content":" ä½¿ç”¨ tags ç¼–è¯‘ 1. æ²¡æœ‰tagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql without 2. å•ä¸ªtagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build -tags \"dev\" åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql dev 3. å¤šä¸ªtagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build -tags \"dev prod\" åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql dev mysql prod ","date":"2023-01-28","objectID":"/go-build-tag/:3:2","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#2-å•ä¸ªtagç¼–è¯‘"},{"categories":["golang"],"content":" ä½¿ç”¨ tags ç¼–è¯‘ 1. æ²¡æœ‰tagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql without 2. å•ä¸ªtagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build -tags \"dev\" åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql dev 3. å¤šä¸ªtagç¼–è¯‘æˆ‘ä»¬ä½¿ç”¨ go build -tags \"dev prod\" åœ¨æ–‡ä»¶å¤¹é‡Œç”Ÿæˆäº†äºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶ buildtagï¼Œæˆ‘ä»¬æ‰§è¡Œä¸€ä¸‹ï¼š âœ ./buildtag è¾“å‡ºï¼š mysql dev mysql prod ","date":"2023-01-28","objectID":"/go-build-tag/:3:2","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#3-å¤šä¸ªtagç¼–è¯‘"},{"categories":["golang"],"content":" go:build ä¸ +build çš„åŒºåˆ« //go:build â˜ï¸æ˜¯ Go 1.17 ä¸­å¼•å…¥çš„æ–°æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤æ ¼å¼ã€‚å®ƒæ—¨åœ¨æ›¿æ¢ // +build æŒ‡ä»¤ã€‚é‚£ä¹ˆä¸ºä½•è¦é‡‡ç”¨æ–°çš„æ ¼å¼å‘¢ï¼Ÿå¯¹æ¯”ä¸€ä¸‹æ–°æ—§æ ¼å¼çš„åŒºåˆ«å°±çŸ¥é“äº†ğŸ‘‡ // go:build linux \u0026\u0026 amd64 || darwin // +build linux,amd64 darwin go:buildè¿™ç§æ ¼å¼ï¼Œå¯¹ coder æ¥è¯´ï¼Œæ›´å®¹æ˜“ç†è§£å…¶é€»è¾‘ç»„åˆï¼Œä¸//go:embedå’Œ//go:generateè¿™äº›å‘½ä»¤ç›¸æ¯”è¾ƒï¼Œæ ¼å¼ä¸Šè¿›è¡Œäº†ç»Ÿä¸€ã€‚ ","date":"2023-01-28","objectID":"/go-build-tag/:4:0","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#gobuild-ä¸-build-çš„åŒºåˆ«"},{"categories":["golang"],"content":" å‚è€ƒ ä»£ç åœ°å€ go ç¼–è¯‘æ ‡ç­¾( build tag)-æ³¨é‡Šé‡Œçš„ç¼–è¯‘è¯­æ³• golang: netgo vs cgo ","date":"2023-01-28","objectID":"/go-build-tag/:5:0","series":[],"tags":["golang"],"title":"Go ç¼–è¯‘æ ‡ç­¾ build tag","uri":"/go-build-tag/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,Peer's Certificate has expired","date":"2023-01-17","objectID":"/curl-ertificate-has-expired/","series":[],"tags":["linux"],"title":"curl: (60) Peer's Certificate has expired é—®é¢˜è§£å†³","uri":"/curl-ertificate-has-expired/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆšæ‰§è¡Œ curl å‘½ä»¤æ—¶å‘ç°ä¸€ä¸ªé—®é¢˜ Certificate has expired å¯ä»¥å…ˆæ›´æ–°è¯ä¹¦è¯•è¯• update-ca-trust æ›´æ–°è¯ä¹¦åå¦‚æœé—®é¢˜æ²¡æœ‰è§£å†³ï¼Œç»§ç»­çœ‹æ˜¯ä¸æ˜¯ç”±äºæ—¶é—´è¿‡æœŸå¼•èµ·çš„é—®é¢˜ date å¦‚æœå‘ç°æœºå™¨æ—¶é—´ä¸å¯¹å°±éœ€è¦åŒæ­¥æ—¶é—´ ntpdate pool.ntp.org é—®é¢˜è§£å†³ ","date":"2023-01-17","objectID":"/curl-ertificate-has-expired/:0:0","series":[],"tags":["linux"],"title":"curl: (60) Peer's Certificate has expired é—®é¢˜è§£å†³","uri":"/curl-ertificate-has-expired/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,minikube å®‰è£…ä½¿ç”¨ï¼Œå¦‚ä½•ä½¿ç”¨ minikube å®‰è£… k8s ç¯å¢ƒ,debian11 å®‰è£… Docker","date":"2022-12-31","objectID":"/minikube-usage/","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç®€ä»‹Kubernetes æ˜¯ä¸€ä¸ªç”Ÿäº§çº§åˆ«çš„å®¹å™¨ç¼–æ’å¹³å°å’Œé›†ç¾¤ç®¡ç†ç³»ç»Ÿï¼Œä¸ä»…èƒ½å¤Ÿåˆ›å»ºã€è°ƒåº¦å®¹å™¨ï¼Œè¿˜èƒ½å¤Ÿç›‘æ§ã€ç®¡ç†æœåŠ¡å™¨ï¼Œå®ƒå‡èšäº† Google ç­‰å¤§å…¬å¸å’Œå¼€æºç¤¾åŒºçš„é›†ä½“æ™ºæ…§ï¼Œä»è€Œè®©ä¸­å°å‹å…¬å¸ä¹Ÿå¯ä»¥å…·å¤‡è½»æ¾è¿ç»´æµ·é‡è®¡ç®—èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ â€œäº‘è®¡ç®—â€ çš„èƒ½åŠ›ã€‚ minikube æ˜¯ä¸€ä¸ª â€œè¿·ä½ â€ ç‰ˆæœ¬çš„ Kubernetesï¼Œè‡ªä» 2016 å¹´å‘å¸ƒä»¥æ¥ä¸€ç›´åœ¨ç§¯æåœ°å¼€å‘ç»´æŠ¤ï¼Œç´§è·Ÿ Kubernetes çš„ç‰ˆæœ¬æ›´æ–°ï¼ŒåŒæ—¶ä¹Ÿå…¼å®¹è¾ƒæ—§çš„ç‰ˆæœ¬ï¼ˆæœ€å¤šå¯ä»¥åˆ°ä¹‹å‰çš„ 6 ä¸ªå°ç‰ˆæœ¬ï¼‰ã€‚ minikube æœ€å¤§ç‰¹ç‚¹å°±æ˜¯ â€œå°è€Œç¾â€ï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä»…æœ‰ä¸åˆ° 100MBï¼Œè¿è¡Œé•œåƒä¹Ÿä¸è¿‡ 1GBã€‚minikube é›†æˆäº† Kubernetes çš„ç»å¤§å¤šæ•°åŠŸèƒ½ç‰¹æ€§ï¼Œä¸ä»…æœ‰æ ¸å¿ƒçš„å®¹å™¨ç¼–æ’åŠŸèƒ½ï¼Œè¿˜æœ‰ä¸°å¯Œçš„æ’ä»¶ï¼Œä¾‹å¦‚ Dashboardã€GPUã€Ingressã€Istioã€Kongã€Registry ç­‰ã€‚ ","date":"2022-12-31","objectID":"/minikube-usage/:1:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#ç®€ä»‹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£… Dockeræˆ‘çš„ç³»ç»Ÿæ˜¯ debian 11ï¼Œæœ¬æ–‡æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯åœ¨ debian 11 çš„ç¯å¢ƒä¸‹è¿›è¡Œã€‚ ç³»ç»Ÿç‰ˆæœ¬ Docker çš„å®‰è£…å¯ä»¥å‚è€ƒå®˜ç½‘ Install Docker Engine on Debianï¼Œå…¶ä»–ç³»ç»Ÿçš„å®‰è£…æ–¹å¼éƒ½å¯ä»¥åœ¨å®˜ç½‘æ‰¾åˆ°ã€‚debian 11 çš„å®‰è£…æ­¥éª¤å¤§è‡´å¦‚ä¸‹ã€‚ apt-get remove docker docker-engine docker.io containerd runc # å¸è½½æ—§ç‰ˆæœ¬ apt-get update apt-get install \\ ca-certificates \\ curl \\ gnupg \\ lsb-release mkdir -p /etc/apt/keyrings curl -fsSL https://download.docker.com/linux/debian/gpg | gpg --dearmor -o /etc/apt/keyrings/docker.gpg echo \\ \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/debian \\ $(lsb_release -cs) stable\" | tee /etc/apt/sources.list.d/docker.list \u003e/dev/null apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin ","date":"2022-12-31","objectID":"/minikube-usage/:2:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#å®‰è£…-docker"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£… minikubeå¯ä»¥å»å®˜ç½‘ https://minikube.sigs.k8s.io/docs/start/ ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ã€‚ ä¸‹è½½åœ°å€ curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 install minikube-linux-amd64 /usr/local/bin/minikube ä¸‹è½½å¹¶å®‰è£… minikube ","date":"2022-12-31","objectID":"/minikube-usage/:3:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#å®‰è£…-minikube"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£… kubectlminikube åªèƒ½å¤Ÿæ­å»º Kubernetes ç¯å¢ƒï¼Œè¦æ“ä½œ Kubernetesï¼Œè¿˜éœ€è¦å¦ä¸€ä¸ªä¸“é—¨çš„å®¢æˆ·ç«¯å·¥å…· kubectlã€‚ kubectl æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œé€šè¿‡å®ƒå¯ä»¥ä¸ Kubernetes åå°æœåŠ¡é€šä¿¡ï¼ŒæŠŠæˆ‘ä»¬çš„å‘½ä»¤è½¬å‘ç»™ Kubernetesï¼Œå®ç°å®¹å™¨å’Œé›†ç¾¤çš„ç®¡ç†åŠŸèƒ½ã€‚ kubectl æ˜¯ä¸€ä¸ªä¸ Kubernetesã€minikube å½¼æ­¤ç‹¬ç«‹çš„é¡¹ç›®ï¼Œä¸åŒ…å«åœ¨ minikube é‡Œï¼Œä½† minikube æä¾›äº†å®‰è£…å®ƒçš„ç®€åŒ–æ–¹å¼ï¼Œåªéœ€æ‰§è¡Œä¸‹é¢çš„è¿™æ¡å‘½ä»¤ï¼š minikube kubectl ä¸‹è½½ kubectl ä»¥ä¸Šè¿™æ¡å‘½ä»¤ä¼šæŠŠä¸å½“å‰ Kubernetes ç‰ˆæœ¬åŒ¹é…çš„ kubectl ä¸‹è½½ä¸‹æ¥ï¼Œå­˜æ”¾åœ¨å†…éƒ¨ç›®å½•ï¼ˆä¾‹å¦‚.minikube/cache/linux/amd64/v1.23.3ï¼‰ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨å®ƒæ¥æ“ä½œ Kubernetes äº†ã€‚ åœ¨ minikube ç¯å¢ƒé‡Œä¼šç”¨åˆ°ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼Œminikube ç®¡ç† Kubernetes é›†ç¾¤ç¯å¢ƒï¼Œkubectl æ“ä½œå®é™…çš„ Kubernetes åŠŸèƒ½ã€‚ ","date":"2022-12-31","objectID":"/minikube-usage/:4:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#å®‰è£…-kubectl"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¯åŠ¨ç¯å¢ƒå®‰è£…äº† minikube å’Œ kubectl å°±å¯ä»¥åœ¨æœ¬æœºä¸Šè¿è¡Œ minikubeï¼Œåˆ›å»º Kubernetes å®éªŒç¯å¢ƒäº†ã€‚ æœ€å¥½å…ˆå…³é—­ swap åˆ†åŒºï¼Œä¸ç„¶ä¼š WARNING æç¤ºï¼š swap is enabled; production deployments should disable swap unless testing the NodeSwap feature gate of the kubelet # å…³é—­ swapåˆ†åŒº swapoff -a ä½¿ç”¨å‘½ä»¤ minikube start ä¼šä» Docker Hub ä¸Šæ‹‰å–é•œåƒï¼Œä»¥å½“å‰æœ€æ–°ç‰ˆæœ¬çš„ Kubernetes å¯åŠ¨é›†ç¾¤ï¼Œä¹Ÿå¯ä»¥åœ¨åé¢å†åŠ ä¸Šä¸€ä¸ªå‚æ•°--kubernetes-version æ˜ç¡®æŒ‡å®šè¦ä½¿ç”¨ Kubernetes ç‰ˆæœ¬ã€‚è¿™é‡Œä½¿ç”¨ â€œ1.23.3â€ï¼Œå¯åŠ¨å‘½ä»¤æ˜¯ï¼š minikube start --kubernetes-version=v1.23.3 å¦‚æœå‡ºç°ç±»ä¼¼ä»¥ä¸‹çš„é—®é¢˜ï¼š * minikube v1.28.0 on Centos 7.9.2009 (lxc/amd64) * Automatically selected the docker driver. Other choices: none, ssh * The \"docker\" driver should not be used with root privileges. If you wish to continue as root, use --force. * If you are running minikube within a VM, consider using --driver=none: * https://minikube.sigs.k8s.io/docs/reference/drivers/none/ X Exiting due to DRV_AS_ROOT: The \"docker\" driver should not be used with root privileges. å¯ä»¥ä½¿ç”¨åŠ ä¸Š --force minikube start --kubernetes-version=v1.23.3 --force å›½å†…ç½‘ç»œç¯å¢ƒå¤æ‚ï¼Œä¸€èˆ¬è®¿é—®å¤–ç½‘æ¯”è¾ƒæ…¢ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨åŠ ä¸Š--image-mirror-country='cn'å‚æ•°ï¼š minikube start --image-mirror-country='cn' --kubernetes-version=v1.23.3 --force minikube start ","date":"2022-12-31","objectID":"/minikube-usage/:5:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#å¯åŠ¨ç¯å¢ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç®€å•ä½¿ç”¨minikube è‡ªå¸¦çš„ kubectl æœ‰ä¸€ç‚¹é™åˆ¶ï¼Œå¿…é¡»è¦åœ¨å‰é¢åŠ ä¸Š minikube çš„å‰ç¼€ï¼Œåé¢å†åŠ ä¸Š -- æ‰èƒ½ä½¿ç”¨ï¼Œåƒè¿™æ ·ï¼š minikube kubectl -- version kubectl version æˆ‘ä»¬åœ¨ Kubernetes é‡Œè¿è¡Œä¸€ä¸ª Nginx åº”ç”¨ï¼Œå‘½ä»¤ä¸ Docker ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ runï¼Œä½†æ˜¯éœ€è¦ç”¨--imageæŒ‡å®šé•œåƒï¼Œç„¶å Kubernetes ä¼šè‡ªåŠ¨æ‹‰å–é•œåƒå¹¶è¿è¡Œï¼š minikube kubectl -- run ngx --image=nginx:alpine è¿è¡Œåº”ç”¨ å‘½ä»¤æ‰§è¡Œä¹‹åå¯ä»¥çœ‹åˆ°ï¼Œåœ¨ Kubernetes é›†ç¾¤é‡Œå°±æœ‰äº†ä¸€ä¸ªåå­—å« ngx çš„ Pod æ­£åœ¨è¿è¡Œï¼Œè¡¨ç¤ºè¿™ä¸ªå•èŠ‚ç‚¹ minikube ç¯å¢ƒå·²ç»æ­å»ºæˆåŠŸã€‚ ","date":"2022-12-31","objectID":"/minikube-usage/:6:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#ç®€å•ä½¿ç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä»€ä¹ˆæ˜¯å®¹å™¨ç¼–æ’å®¹å™¨ï¼Œæ˜¯ç°ä»£ç¨‹åºçš„è¿è¡Œæ–¹å¼ã€‚ç¼–æ’å°±æ˜¯éƒ¨ç½²ã€ç®¡ç†åº”ç”¨ç¨‹åºçš„ç³»ç»Ÿï¼Œèƒ½åŠ¨æ€åœ°å“åº”å˜åŒ–ï¼Œå¦‚ï¼šå›æ»šã€æ»šåŠ¨å‡çº§ã€æ•…éšœè‡ªæ„ˆã€è‡ªåŠ¨æ‰©ç¼©å®¹ã€‚è‡ªåŠ¨å®Œæˆè¿™äº›æ‰€æœ‰ä»»åŠ¡ï¼Œéœ€è¦äººå·¥æœ€åˆè¿›è¡Œä¸€äº›é…ç½®ï¼Œå°±å¯ä»¥ä¸€åŠ³æ°¸é€¸ã€‚æ‰€ä»¥ï¼Œè¿è¡Œå®¹å™¨å½¢å¼çš„åº”ç”¨ç¨‹åºï¼Œè¿™äº›åº”ç”¨ç¨‹åºçš„æ„å»ºæ–¹å¼ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿå®ç°å›æ»šã€æ»šåŠ¨å‡çº§ã€æ•…éšœè‡ªæ„ˆã€è‡ªåŠ¨æ‰©ç¼©å®¹ç­‰å°±æ˜¯å®¹å™¨ç¼–æ’ã€‚ ","date":"2022-12-31","objectID":"/minikube-usage/:7:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#ä»€ä¹ˆæ˜¯å®¹å™¨ç¼–æ’"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" K8s å’Œ Docker çš„åŒºåˆ«Docker åº”ç”¨æ‰“åŒ…ã€æµ‹è¯•ã€äº¤ä»˜ï¼ŒKubernetes æ˜¯åŸºäº Docker çš„äº§ç‰©ï¼Œè¿›è¡Œç¼–æ’ã€è¿è¡Œã€‚ä¾‹å¦‚æœ‰ 1 ä¸ªé›†ç¾¤ï¼Œ3 ä¸ªèŠ‚ç‚¹ã€‚è¿™äº›èŠ‚ç‚¹ï¼Œéƒ½ä»¥ Docker ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ï¼ŒDocker æ˜¯æ›´åå‘åº•å±‚çš„æŠ€æœ¯ã€‚Kubernetes æ›´åå‘ä¸Šå±‚çš„æŠ€æœ¯ ï¼Œå®ƒå®ç°äº†å¯¹å®¹å™¨è¿è¡Œæ—¶çš„æŠ½è±¡ï¼ŒæŠ½è±¡çš„ç›®çš„æ˜¯å…¼å®¹åº•å±‚å®¹å™¨è¿è¡Œæ—¶ï¼ˆå®¹å™¨è¿›è¡Œæ—¶æŠ€æœ¯ä¸ä»…æœ‰ Dockerï¼Œè¿˜æœ‰ containerdã€kata ç­‰ï¼Œæ— è®ºå“ªç§å®¹å™¨è¿è¡Œæ—¶ï¼ŒKubernetes å±‚é¢çš„æ“ä½œéƒ½æ˜¯ä¸€æ ·çš„ï¼‰ä»¥åŠè§£è€¦ï¼ŒåŒæ—¶è¿˜æä¾›äº†ä¸€å¥—å®¹å™¨è¿è¡Œæ—¶çš„æ ‡å‡†ã€‚æŠ½è±¡çš„äº§ç‰©æ˜¯å®¹å™¨è¿è¡Œæ—¶æ¥å£ CRIï¼ˆContainer Runtime Interfaceï¼‰ã€‚ ","date":"2022-12-31","objectID":"/minikube-usage/:8:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#k8s-å’Œ-docker-çš„åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ minikube start docker docs ","date":"2022-12-31","objectID":"/minikube-usage/:9:0","series":[],"tags":["k8s"],"title":"minikube å®‰è£…ä½¿ç”¨","uri":"/minikube-usage/#å‚è€ƒ"},{"categories":[""],"content":"xiaobinqtçš„ä¸ªäººç®€å†,è§åä¸€éƒçš„ä¸ªäººç®€å†,ç®€å†","date":"2022-11-06","objectID":"/resume/","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/"},{"categories":[""],"content":" ä¸ªäººä¿¡æ¯ å«å½¬/ç”·/1994 æ‰‹æœº/å¾®ä¿¡ï¼š15209272743 Githubï¼šhttps://github.com/xiaobinqt DockerHubï¼šhttps://hub.docker.com/u/xiaobinqt ä¸ªäººç½‘ç«™ï¼šhttps://www.xiaobinqt.cn Emailï¼šxiaobinqt@163.com å¼€æºé¡¹ç›®ï¼šGoå¾®ä¿¡æœºå™¨äºº / è±†å¥¶ç­¾åˆ° ","date":"2022-11-06","objectID":"/resume/:1:0","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#ä¸ªäººä¿¡æ¯"},{"categories":[""],"content":" æ•™è‚²ç»å†è¥¿å®‰åŸ¹åå­¦é™¢ é€šä¿¡å·¥ç¨‹ æœ¬ç§‘ 2012 - 2016 ","date":"2022-11-06","objectID":"/resume/:2:0","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#æ•™è‚²ç»å†"},{"categories":[""],"content":" ä¸ªäººæŠ€èƒ½ ç†Ÿæ‚‰ Go è¯­æ³•ï¼Œå¹¶å‘ç¼–ç¨‹ï¼Œåç¨‹ï¼Œç®¡é“çš„ä½¿ç”¨ï¼Œç†Ÿæ‚‰ Go GCï¼ŒGMP æ¨¡å‹ã€‚å¯ç†Ÿç»ƒä½¿ç”¨ gin æ¡†æ¶å¼€å‘ã€‚ ç†Ÿæ‚‰ php çš„ Laravelï¼ŒThinkphpï¼ŒCI æ¡†æ¶ï¼Œå¯ç†Ÿç»ƒä½¿ç”¨ã€‚ç†Ÿæ‚‰å¾®ä¿¡å°ç¨‹åºå¼€å‘ã€‚ ç†Ÿç»ƒä½¿ç”¨ MySQL æ•°æ®åº“ï¼Œäº†è§£ MySQL ç´¢å¼•ï¼Œäº‹åŠ¡ï¼Œé”æœºåˆ¶ç­‰ã€‚ ç†Ÿæ‚‰ Docker çš„ä½¿ç”¨ï¼Œå·¥ä½œä¸­å¯ç†Ÿç»ƒç¼–å†™ Dockerfileã€‚äº†è§£ Linux å¸¸ç”¨å‘½ä»¤å’Œ Shell è„šæœ¬çš„ç¼–å†™ã€‚ ç†Ÿæ‚‰ Git ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ï¼Œå…·æœ‰è‰¯å¥½çš„ç¼–ç é£æ ¼å’Œä¹ æƒ¯ï¼Œçƒ­çˆ±å¼€æºã€‚ ç†Ÿæ‚‰ Python çš„ä½¿ç”¨ï¼Œå¯ä½¿ç”¨ Python è¿›è¡Œå¸¸ç”¨è„šæœ¬çš„ç¼–å†™ã€‚ ç†Ÿæ‚‰ Redis çš„æ•°æ®ç»“æ„å’Œé«˜å¹¶å‘ä½¿ç”¨åœºæ™¯ï¼Œæ¯”å¦‚ç¼“å­˜é›ªå´©ï¼Œç¼“å­˜ç©¿é€ï¼Œç¼“å­˜å‡»ç©¿ç­‰ã€‚ äº†è§£ Kubernetes çš„åŸºæœ¬ä½¿ç”¨ã€‚ äº†è§£ JSã€Nodeã€npmã€jQueryã€CSS+DIV ç›’æ¨¡å‹ç­‰ web å‰ç«¯æŠ€æœ¯ã€‚ äº†è§£ wordpress çš„åŸºæœ¬ä½¿ç”¨ã€‚äº†è§£å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚ ","date":"2022-11-06","objectID":"/resume/:3:0","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#ä¸ªäººæŠ€èƒ½"},{"categories":[""],"content":" è‡ªæˆ‘è¯„ä»· çƒ­çˆ±ä»£ç ï¼Œå¯¹å¼€æºæŠ±æœ‰æå¤§çš„çƒ­æƒ…ï¼Œæ›¾ç»™å¤šä¸ªå¼€æºé¡¹ç›®è´¡çŒ®ä»£ç ã€‚æœ‰åšæŒåšä¸€ä»¶äº‹çš„æ¯…åŠ›å’Œå†³å¿ƒã€‚ è‰¯å¥½çš„æ²Ÿé€šèƒ½åŠ›ï¼Œå­¦ä¹ èƒ½åŠ›ï¼Œé€‚åº”èƒ½åŠ›å¼ºåŠå›¢é˜Ÿåä½œæ„è¯†ï¼Œå…·æœ‰ä¸»äººç¿æ„è¯†ã€‚ ","date":"2022-11-06","objectID":"/resume/:4:0","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#è‡ªæˆ‘è¯„ä»·"},{"categories":[""],"content":" æœŸæœ›èŒä½ æœŸæœ›èŒä½ï¼šGolang å¼€å‘ / PHP å¼€å‘ æœŸæœ›åŸå¸‚ï¼šåŒ—äº¬ ","date":"2022-11-06","objectID":"/resume/:5:0","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#æœŸæœ›èŒä½"},{"categories":[""],"content":" å·¥ä½œç»å†","date":"2022-11-06","objectID":"/resume/:6:0","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#å·¥ä½œç»å†"},{"categories":[""],"content":" å¸Œäº‘ç§‘æŠ€ï¼ˆåŒ—äº¬ï¼‰æœ‰é™å…¬å¸ ï¼ˆ 2021/4 ~ 2023/11ï¼‰åœ¨å…¬å¸æ‹…ä»» Go å¼€å‘ï¼Œå‚ä¸ç ”å‘äº† æŸ”æ€§å¼€å‘ä»¿çœŸä¸€ä½“åŒ–é¡¹ç›® å’Œ xae é¡¹ç›®ã€‚ç›®å‰æŸ”æ€§å¼€å‘ä»¿çœŸä¸€ä½“åŒ–é¡¹ç›®å·²ä¸Šçº¿ï¼ŒæœåŠ¡äºå›½å®¶ç”µç½‘ï¼Œè¯¥é¡¹ç›®æ˜¯ç»„æ€åŒ–å¾®åº”ç”¨å¼€å‘ä»¿çœŸå‘å¸ƒä¸€ä½“åŒ–äº‘å¹³å°ï¼Œå¯ä»¥å¸®åŠ©å®¢æˆ·å¿«é€Ÿå¼€å‘åº”ç”¨å¹¶éƒ¨ç½²ã€‚xae æ˜¯ä¿¡åˆ›é¡¹ç›®ï¼Œç›®çš„æ˜¯èµ‹èƒ½ä¼ä¸šæ•°å­—åŒ–è½¬å‹ï¼Œå¿«é€Ÿæ­å»ºè¿å¾™é€‚é…æµ‹è¯•å¹³å°ã€‚ ","date":"2022-11-06","objectID":"/resume/:6:1","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#å¸Œäº‘ç§‘æŠ€åŒ—äº¬æœ‰é™å…¬å¸httpxiicloud--20214---202311"},{"categories":[""],"content":" æ³•æœ¬ä¿¡æ¯æŠ€æœ¯è‚¡ä»½æœ‰é™å…¬å¸å¤–æ´¾è…¾è®¯ ï¼ˆ 2019/4 ~ 2021/4 ï¼‰åœ¨åŒ—äº¬è…¾è®¯æ€»éƒ¨å‚ä¸äº†æ˜Ÿç›˜æ•°æ®å¹³å°å’Œçƒ½ç«ç»Ÿä¸€ PUSH å¹³å°çš„å¼€å‘ã€‚æ˜Ÿç›˜æ•°æ®å¹³å°ä½¿ç”¨ php å¼€å‘ã€‚PUSH å¹³å°ä½¿ç”¨ Go å¼€å‘ï¼Œä¸»è¦ä½¿ç”¨äº† Go åç¨‹ï¼Œchannel ç­‰æé«˜ç³»ç»Ÿæ•´ä½“æ€§èƒ½å’Œå¹¶å‘ã€‚ ","date":"2022-11-06","objectID":"/resume/:6:2","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#æ³•æœ¬ä¿¡æ¯æŠ€æœ¯è‚¡ä»½æœ‰é™å…¬å¸å¤–æ´¾è…¾è®¯--20194--20214-"},{"categories":[""],"content":" è¥¿å®‰ç»´å®¢è½¯ä»¶ç§‘æŠ€æœ‰é™å…¬å¸ ï¼ˆ 2017/4 ~ 2019/3 ï¼‰åœ¨å…¬å¸æ‹…ä»» PHP å¼€å‘å¹¶åœ¨é¡¹ç›®ä¸­æ¥è§¦åˆ° Goï¼Œä¸»åŠ¨å­¦ä¹ å¹¶ä½¿ç”¨ Go å¼€å‘ä¸€äº›å°åŠŸèƒ½ã€‚ä¸»è¦åœ¨å…¬å¸å‚ä¸äº† pop å•†åŸï¼ŒåŒ»ç–—å™¨æ¢°ç§Ÿèµé¡¹ç›®ï¼Œå°ç¨‹åºå’Œä¸€äº› wordpress é¡¹ç›®çš„å¼€å‘ï¼Œå¦‚ è¥¿ç­ç‰™æ—…æ¸¸ç½‘ç«™ã€‚ ","date":"2022-11-06","objectID":"/resume/:6:3","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#è¥¿å®‰ç»´å®¢è½¯ä»¶ç§‘æŠ€æœ‰é™å…¬å¸httpswwwvicttechcom--20174--20193-"},{"categories":[""],"content":" é¡¹ç›®ç»éªŒ","date":"2022-11-06","objectID":"/resume/:7:0","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#é¡¹ç›®ç»éªŒ"},{"categories":[""],"content":" æŸ”æ€§äº‘é¡¹ç›®æè¿° æŸ”æ€§äº‘æ˜¯ç»„æ€åŒ–å¾®åº”ç”¨å¼€å‘ä»¿çœŸå‘å¸ƒä¸€ä½“åŒ–äº‘å¹³å°ï¼Œé€šè¿‡ Go è¯­è¨€å¼€å‘ï¼Œæ—¨åœ¨å¸®åŠ©å›½å®¶ç”µç½‘å¼€å‘äººå‘˜é€šè¿‡ä½ä»£ç ï¼Œç»„ä»¶åŒ–å¿«é€Ÿæ„å»ºå¾®åº”ç”¨ï¼Œæµ‹è¯•å¹¶å‘å¸ƒã€‚ç”¨æˆ·æ³¨å†ŒæˆåŠŸåç”Ÿæˆç‹¬ç«‹çš„å¼€å‘ç›˜å’Œè™šæ‹Ÿæœºï¼Œé€šè¿‡å®¹å™¨è‡ªåŠ¨éƒ¨ç½² Node-RED ä½ä»£ç å¹³å°å’Œåœ¨çº¿ IDE code-server ç¯å¢ƒï¼Œç”¨æˆ·å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒå¼€å‘èŠ‚ç‚¹å’Œæµ‹è¯•ã€‚ç”¨æˆ·æµ‹è¯•æˆåŠŸçš„èŠ‚ç‚¹åŒ…å¯ä»¥å‘å¸ƒåˆ°ä¸­å¿ƒçš„ npm ä»“åº“ã€‚ é¡¹ç›®èŒè´£ è´Ÿè´£é¡¹ç›®æ•´ä½“çš„æ­å»ºå’Œç ”å‘ï¼Œswagger æ–‡æ¡£çš„è¾“å‡ºï¼Œæ—¥å¸¸é—®é¢˜çš„è§£å†³ã€‚ è´Ÿè´£ä½ä»£ç å¹³å° node-red åŸºäºæºç é—®é¢˜çš„ä¿®æ”¹ã€‚ è´Ÿè´£é¡¹ç›®ä¸Šçº¿åå®¢æˆ·é—®é¢˜çš„å®æ—¶è§£å†³ã€‚ é¡¹ç›®æˆæœ æ”¯æŒä¸šåŠ¡å¿«é€Ÿè¿­ä»£ï¼Œå®¢æˆ·åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ç³»ç»Ÿç¨³å®šè¿è¡Œã€‚ è·å¾—åå‘ä»£ç†ï¼Œå¤šè·¯å¤ç”¨å’Œ nodeï¼Œnpmï¼Œdocker ç­‰ä½¿ç”¨ç»éªŒã€‚ å‚ä¸å¼€æºå¹¶è´¡çŒ®ä»£ç  mojocn/base64Captcha#7c33ebb7ï¼Œnode-red/node-red#380a0824ï¼Œnode-red/node-red#fd42becbã€‚ ","date":"2022-11-06","objectID":"/resume/:7:1","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#æŸ”æ€§äº‘"},{"categories":[""],"content":" xaeé¡¹ç›®æè¿° ä½¿ç”¨ Go å¼€å‘çš„ä¿¡åˆ›é¡¹ç›®ï¼Œä»¥æ•°å­—åŒ–å¼•é¢†ä¿¡åˆ›æŠ€æœ¯ï¼Œä»¥ä¿¡åˆ›ç­‘ç‰¢æ•°å­—åŒ–å»ºè®¾ã€‚å¯ä»¥é€šè¿‡ xae å¹³å°ç»™å…¬å¸èµ‹èƒ½ï¼Œå¿«é€Ÿæ­å»ºè¿å¾™é€‚é…æµ‹è¯•å¹³å°ã€‚xae å¹³å°åŒ…æ‹¬å‚å•†ç®¡ç†ï¼Œäº§å“ç®¡ç†ï¼Œé€‚é…æµ‹è¯•ï¼Œæ•°æ®è¿å¾™ï¼ŒCI/CDï¼ŒçŸ¥è¯†åº“ï¼Œè¯ä¹¦ç®¡ç†ï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½²ç­‰åŠŸèƒ½ã€‚ é¡¹ç›®èŒè´£ éœ€æ±‚åˆ†æè¯„å®¡ï¼Œä¸šåŠ¡æ•´ç†ä¸åŠŸèƒ½çš„å¼€å‘ç»´æŠ¤ã€‚ è·Ÿåˆä½œä¼™ä¼´åšç¿å…±åŒæ¨è¿›é¡¹ç›®ï¼Œå°†åšç¿çš„äº§å“ ZCBUS åµŒå…¥ xae ç³»ç»Ÿã€‚ é¡¹ç›®æˆæœ ä¸€æœŸç›®å‰å·²é€šè¿‡å¤ªææ¼”ç¤ºï¼Œæ­£åœ¨å¤ªæå†…ç½‘è¯•è¿è¡Œã€‚å¤§å”ï¼ŒåŒ—æ§å·²ç»ä¸Šçº¿ä½¿ç”¨ã€‚ ","date":"2022-11-06","objectID":"/resume/:7:2","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#xae"},{"categories":[""],"content":" çƒ½ç«ç»Ÿä¸€ PUSH å¹³å°é¡¹ç›®æè¿° æœ¬é¡¹ç›®æ˜¯çœ‹ç‚¹å¿«æŠ¥å’Œ QQ æµè§ˆå™¨çš„è¿è¥åå°ã€‚é¡¹ç›®ä½¿ç”¨ Go å¼€å‘ã€‚æ¥å…¥è…¾è®¯è§†é¢‘ï¼Œæ–°é—»æ–‡ç« ç­‰ï¼Œå¸®åŠ©ç¼–è¾‘å¿«é€Ÿå®¡æ ¸æ–‡ç« ï¼Œå°†ä¼˜è´¨æ–‡ç« å¿«é€Ÿ push ç»™ç§»åŠ¨ç«¯ç”¨æˆ·ã€‚æ¥å…¥ç›‘æ§å¹³å°ï¼Œå®æ—¶è§‚æµ‹æ¥å£è°ƒç”¨è€—æ—¶ç­‰æƒ…å†µã€‚ é¡¹ç›®èŒè´£ æ–‡ç« è‡ªåŠ¨åŒ–æ¥å…¥ï¼Œæ—¥å¸¸éœ€æ±‚å¼€å‘å’Œç»´æŠ¤ã€‚ è…¾è®¯ 007 ç›‘æ§å¹³å°ï¼Œpolarisï¼Œtrpc-go ç­‰å¹³å°å’ŒæŠ€æœ¯çš„è°ƒç ”å’Œä½¿ç”¨ã€‚ é¡¹ç›®æˆæœ è…¾è®¯å¹´åº¦ä¸šåŠ¡çªç ´å¥–ã€‚ PHP è¿å¾™åˆ° Go çš„é¡¹ç›®ï¼Œç†Ÿæ‚‰äº† Go è¯­æ³•ï¼ŒGo ä¸­ channelï¼Œåç¨‹å’Œå¹¶å‘ç¼–ç¨‹çš„ä½¿ç”¨ï¼Œè·å¾—äº† Go é¡¹ç›®çš„å®æˆ˜ç»éªŒã€‚ ç†Ÿæ‚‰è…¾è®¯çš„å¼€å‘è§„èŒƒï¼Œå†…éƒ¨ trpc-go æ¡†æ¶çš„ä½¿ç”¨ã€‚ ","date":"2022-11-06","objectID":"/resume/:7:3","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#çƒ½ç«ç»Ÿä¸€-push-å¹³å°"},{"categories":[""],"content":" æ˜Ÿç›˜æ•°æ®å¹³å°é¡¹ç›®æè¿° æ˜Ÿç›˜æ˜¯ç”± PCG å…´è¶£é˜…è¯»äº§å“éƒ¨è®¾è®¡å¹¶ç ”å‘çš„ç»¼åˆå‹æ•°æ®å¹³å°ï¼Œé¢å‘äº§å“ï¼Œè¿è¥ï¼Œä¸šåŠ¡ç ”å‘å’Œæ•°æ®å‘ç­‰å„ç±»éœ€æ±‚æ–¹ï¼Œæä¾›æ•°æ®ç”Ÿäº§æ¶ˆè´¹å„ä¸ªç¯èŠ‚çš„ç›¸å…³æœåŠ¡ã€‚å¹³å°ä¸»è¦åŠŸèƒ½æœ‰æ•°æ®åˆ†æï¼Œæ•°æ®ç®¡ç†å’Œä¸“é¢˜å·¥å…·å‡ å¤§ç±»ã€‚ä¸»è¦åŠŸèƒ½æœ‰ä»ªè¡¨ç›˜ã€å®æ—¶æ•°æ®ï¼Œå…ƒæ•°æ®ï¼Œæ•°æ®æ¨¡å‹å’Œæƒé™ç­‰åŠŸèƒ½ã€‚ é¡¹ç›®æˆæœ è…¾è®¯å¹´åº¦æŠ€æœ¯çªç ´å¥– ","date":"2022-11-06","objectID":"/resume/:7:4","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#æ˜Ÿç›˜æ•°æ®å¹³å°"},{"categories":[""],"content":" èšç¾åŒ»åå°é¡¹ç›®æè¿° é¡¹ç›®ç”± php å¼€å‘ï¼Œæ˜¯ä¸€ä¸ªåŒ»å­¦å™¨æç§Ÿå€Ÿç®¡ç†ç³»ç»Ÿã€‚é‡‡ç”¨å‰åç«¯åˆ†ç¦»ï¼Œåç«¯åˆ©ç”¨ Lumen æ¡†æ¶æä¾› API æ”¯æŒã€‚é¡¹ç›®å·¥ä½œæµä¸ºå•†åŠ¡éƒ¨æ–°å»ºåˆåŒï¼ŒåˆåŒè½¬åˆ°è´¢åŠ¡äº¤ç§Ÿï¼Œäº¤ç§ŸæˆåŠŸåä»“å‚¨éƒ¨å‘è´§ï¼Œè¿è¥è´Ÿè´£æ•°æ®çš„æŠ¥è¡¨ç®¡ç†ã€‚ é¡¹ç›®èŒè´£ æ—¥å¸¸éœ€æ±‚çš„å¼€å‘ä¸ç»´æŠ¤ï¼Œè·Ÿéœ€æ±‚æ–¹çš„æ—¥å¸¸æ²Ÿé€šã€‚ å¾®ä¿¡æœåŠ¡çš„ç›¸å…³è°ƒç ”ä¸å¼€å‘ï¼Œå¦‚å…¬ä¼—å·/å°ç¨‹åºæ¨é€ã€‚ä¸ƒç‰›äº‘æœåŠ¡çš„ç›¸å…³ä½¿ç”¨ã€‚ é¡¹ç›®æˆæœ æ”¯æŒä¸šåŠ¡çš„å¼€åº¦æ›´è¿­å’Œç¨³å®šè¿è¡Œã€‚ è·å– dockerï¼Œå¾®ä¿¡SDK EasyWeChat å’Œä¸ƒç‰›äº‘æœåŠ¡çš„ç›¸å…³ä½¿ç”¨ç»éªŒã€‚ å‚ä¸å¼€æºå¹¶è´¡çŒ®ä»£ç  SocialiteProviders/Weixin#44bc75b7ã€‚ ","date":"2022-11-06","objectID":"/resume/:7:5","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#èšç¾åŒ»åå°"},{"categories":[""],"content":" æ½˜å¸•æ–¯ pop å•†åŸé¡¹ç›®æè¿° ä½¿ç”¨ php è¿›è¡Œå¼€å‘ï¼Œç½‘ä¸Šå•†åŸåŠŸèƒ½åŒ…æ‹¬ç”¨æˆ·ç®¡ç†ï¼Œå•†å“åˆ†ç±»ï¼Œå•†å“æœç´¢ï¼Œè´­ç‰©è½¦åŠŸèƒ½ã€‚å¹³å°ç«¯å¯ä»¥ç®¡ç†å¥èº«æˆ¿å’Œæ•™ç»ƒï¼ŒæŸ¥çœ‹æ•™ç»ƒçš„é”€å”®ä¸šç»©å’Œé”€å”®ææˆï¼Œä¾›åº”å•†ç«¯å¯ä»¥å¯¹å¹³å°ç«¯çš„è®¢å•è¿›è¡Œç®¡ç†å’Œå‘è´§ï¼Œå¯¹å•†å“è¿›è¡Œç®¡ç†æ“ä½œã€‚ é¡¹ç›®æˆæœ ç†Ÿæ‚‰ Laravel5.5 æ¡†æ¶å’Œ composer åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨ã€‚ è·å¾—ä¼ä¸šå¾®ä¿¡å¼€å‘ç»éªŒï¼Œå¾®ä¿¡æ”¯ä»˜å’Œ Redis ç›¸å…³ä½¿ç”¨ç»éªŒã€‚ å‚ä¸ Laravel ç¤¾åŒº çš„ Laravel 5.8 ä¸­æ–‡æ–‡æ¡£ ç¿»è¯‘ã€‚ ","date":"2022-11-06","objectID":"/resume/:7:6","series":null,"tags":[""],"title":"ä¸ªäººç®€å†","uri":"/resume/#æ½˜å¸•æ–¯-pop-å•†åŸ"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":"xiaobinqt,è¿‘è§†çœ¼æ‰‹æœ¯ï¼Œè¿‘è§†æ¿€å…‰æ‰‹æœ¯ï¼Œè¿‘è§†ï¼Œé£ç§’ï¼ŒåŠé£ç§’ï¼Œå…¨é£ç§’ï¼Œæ™¶ä½“æ¤å…¥","date":"2022-11-03","objectID":"/surgery-for-myopia/","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" è‹±æ–‡ç®€ç§° è‹±æ–‡ç®€ç§° ä¸­æ–‡ SMILE å…¨é£ç§’æ¿€å…‰ FS-LASIK åŠé£ç§’æ¿€å…‰ ICL æ™¶ä½“æ¤å…¥ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:1:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#è‹±æ–‡ç®€ç§°"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" è¿‘è§†åº¦æ•°åˆ’åˆ† 300 åº¦ä»¥ä¸‹å±äºä½åº¦è¿‘è§†ï¼ˆ25-275åº¦ï¼‰ 300 åº¦ä»¥ä¸Š600åº¦ä»¥ä¸‹å±äºä¸­åº¦è¿‘è§†ï¼ˆ300-575åº¦ï¼‰ 600 åº¦ä»¥ä¸Š900ä»¥ä¸‹å±äºé«˜åº¦è¿‘è§†ï¼ˆ600-875åº¦ï¼‰ 900 åº¦ä»¥ä¸Šå±äºè¶…é«˜åº¦è¿‘è§†ï¼ˆ900-âˆåº¦ï¼‰ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:2:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#è¿‘è§†åº¦æ•°åˆ’åˆ†"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" éªŒå…‰å•æ€ä¹ˆçœ‹æƒ³çœ‹æ˜ç™½è§†åŠ›éªŒå…‰å•ï¼Œéœ€è¦äº†è§£éªŒå…‰å•ä¸Šçš„ODã€OSã€DSã€DCè‹±æ–‡ç¼©å†™ä»¥åŠ+ã€-å„ä»£è¡¨ç€ä»€ä¹ˆæ„ä¹‰â“ éªŒå…‰å•ä¸Šçš„ODè¡¨ç¤ºè¡¨ç¤ºå³çœ¼ï¼ŒOSè¡¨ç¤ºå·¦çœ¼ã€‚ +è¡¨ç¤ºå‡¸é€é•œç‰‡ï¼ˆè¿œè§†çœ¼ç”¨ï¼‰ï¼Œ-è¡¨ç¤ºå‡¹é€é•œç‰‡ï¼ˆè¿‘è§†çœ¼ç”¨ï¼‰ã€‚ DSè¡¨ç¤ºçƒé•œï¼ˆè¿‘è§†å’Œè¿œè§†ç”¨ï¼‰ï¼ŒDCè¡¨ç¤ºæŸ±é•œï¼ˆæ•£å…‰ç”¨ï¼‰ã€‚è€Œ+æˆ–-ä¹‹åçš„æ•°å€¼åˆ™è¡¨ç¤ºæˆ‘ä»¬é•œç‰‡çš„å±ˆå…‰åº¦ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œå±ˆå…‰åº¦çš„æ•°å€¼å¸¸å¸¸å’Œæˆ‘ä»¬æ‰€è¯´çš„è¿‘è§†æˆ–è¿œè§†åº¦å·®100å€ã€‚ä¾‹å¦‚éªŒå…‰æŠ¥å‘Šä¸Šçš„â€”2.00å°±ç›¸å½“äºæˆ‘ä»¬å¸¸è¯´çš„è¿‘è§† 200 åº¦ã€‚ ä»¥ODï¼š-3.00DS/-2.00DCÃ—80Â°çš„éªŒå…‰æŠ¥å‘Šä¸ºä¾‹ï¼Œå…¶è¡¨ç¤ºå³çœ¼ 300 åº¦çš„è¿‘è§†é•œè”åˆ 200 åº¦çš„æ•£å…‰é•œï¼Œæ•£å…‰çš„è½´åº¦æ˜¯ 80 åº¦ã€‚ PDä¸€èˆ¬æ˜¯æŒ‡ç³å­”è·ç¦»ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ç³è·ã€‚ éªŒå…‰å• ","date":"2022-11-03","objectID":"/surgery-for-myopia/:3:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#éªŒå…‰å•æ€ä¹ˆçœ‹"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" è¿‘è§†åŸç† è¿‘è§†å±ˆå…‰ å½“é•¿æ—¶é—´è¿‘è·ç¦»ç”¨çœ¼ï¼Œå¯¼è‡´ç«çŠ¶è‚Œç»å¸¸å¤„äºæ”¶ç¼©çš„çŠ¶æ€ï¼Œå¯¼è‡´è°ƒèŠ‚ç´§å¼ æˆ–è°ƒèŠ‚ç—‰æŒ›ã€‚æ™¶çŠ¶ä½“å¤±å»ç«çŠ¶è‚Œçš„ç‰µå¼•å°±ä¼šå¢åšå˜å‡¸ã€‚â˜ï¸ å¦‚ä¸Šå›¾ï¼Œå½“å…‰çº¿è¿›å…¥åˆ°çœ¼ç›ä»¥åèšç„¦åœ¨ D ç‚¹ï¼Œè·ç¦»è§†ç½‘è†œ C ç‚¹å‡ºç°äº†ä¸€æ®µè·ç¦»ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±çœ‹ä¸æ¸…æ¥šäº†ã€‚æœ€çœŸå®çš„è¡¨ç°æ˜¯çœ‹è¿œå¤„çš„ç‰©ä½“å˜å¤§æ¨¡ç³Šã€‚ ç‰µå¼•æ™¶çŠ¶ä½“çš„çº¢è‰²éƒ¨åˆ†ä¸ºç«çŠ¶è‚Œã€‚æ­£å¸¸æ—¶å€™ï¼Œæˆ‘ä»¬çš„çœ¼ç›çœ‹è¿œå¤„çš„æ—¶å€™ï¼Œç«çŠ¶è‚Œæ”¾æ¾ï¼Œæ™¶çŠ¶ä½“å˜è–„ï¼Œçœ‹è¿‘å¤„çš„æ—¶å€™ï¼Œç«çŠ¶è‚Œæ”¶ç¼©ï¼Œæ™¶çŠ¶ä½“å˜åšå˜å‡¸ã€‚ è¿‘è§†æ˜¯å› ä¸ºé•¿æ—¶é—´çœ‹è¾ƒè¿‘çš„ç‰©ä½“ï¼Œå¯¼è‡´ç«çŠ¶è‚Œç—‰æŒ›ï¼Œä¸èƒ½æœ‰æ•ˆçš„è°ƒèŠ‚ç‰µå¼•æ™¶çŠ¶ä½“ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™å°±å‡ºç°äº†å‡æ€§è¿‘è§†ã€‚å‡æ€§è¿‘è§†æ‚£è€…çš„çœ¼è½´æ²¡æœ‰å‘ç”Ÿæ ¹æœ¬çš„æ”¹å˜ï¼Œé€‚å½“çš„ä¼‘æ¯å’Œé”»ç‚¼æ˜¯å¯ä»¥æ¢å¤è¿‡æ¥ã€‚ å½“å‡ºç°å‡æ€§è¿‘è§†çš„æƒ…å†µæ²¡æœ‰é‡‡å–åˆé€‚çš„æ²»ç–—æ‰‹æ®µå°±ä¼šå‘ç”Ÿä»¥ä¸Šç—…å˜çš„è¿‡ç¨‹ã€‚æ™¶çŠ¶ä½“æ”¶ç¼©å˜åšå¯ä»¥å¯¹çœ¼ç›äº§ç”Ÿä¸¤ç§åŠ›ã€‚ä¸€ç§åŠ›æ˜¯è½´å‘ä¸Šç”±äºæ™¶çŠ¶ä½“å˜åšäº§ç”Ÿçš„å‹åŠ›ï¼Œè¿™ä¸ªå‹åŠ›å¯ä»¥å‹åˆ°ç»ç’ƒä½“ï¼Œè¿›è€ŒæŠŠçœ¼è½´æ’‘é•¿ã€‚å¦ä¸€ç§åŠ›æ˜¯å‚ç›´äºè½´å‘çš„æ‹‰åŠ›ï¼Œç›¸å½“äºæ™¶çŠ¶ä½“è¿™å—è‚Œè‚‰æ”¶ç¼©æ—¶çš„æ‹‰åŠ›ï¼Œè¿™ä¸ªæ‹‰åŠ›å¯ä»¥æŠŠçœ¼çƒæ‹‰æ‰ï¼Œä»è€Œé—´æ¥ä½¿çœ¼è½´å˜é•¿ã€‚è¿™ä¸¤ç§åŠ›å…±åŒä½œç”¨æŠŠçœ¼ç›ä»åœ†çƒå½¢å˜æˆæ©„æ¦„å½¢ï¼Œè¿™å°±æ˜¯æ™¶çŠ¶ä½“çš„è°ƒèŠ‚åŠ›é€ æˆçš„è¿‘è§†çœ¼å˜å½¢ã€‚ æ‰€è°“çœŸæ€§è¿‘è§†å°±æ˜¯é•¿æœŸçš„ä½œç”¨åŠ›å¯¼è‡´çœ¼è½´å¢é•¿ï¼Œçœ¼ç›å˜å½¢åˆ°éš¾ä»¥æ¢å¤åˆ°åœ†çƒå½¢çš„åœ°æ­¥äº†ã€‚è¿‘è§†åº¦æ•°è¶Šé«˜çš„äººï¼Œå…¶æ™¶çŠ¶ä½“æ”¶ç¼©çš„è¶Šå‰å®³ï¼ŒåŠ›é‡ä¹Ÿè¶Šå¤§ï¼Œè¶³ä»¥æ”¹å˜çœ¼çƒå½¢çŠ¶å¹¶äº§ç”Ÿç ´åæ€§ï¼Œè¿™ä¸ªæ—¶å€™å°±å½¢æˆäº†çœŸæ€§è¿‘è§†ã€‚ çœ¼è½´ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:4:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#è¿‘è§†åŸç†"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ä»€ä¹ˆæ˜¯æš—ç³æš—ç³å°±æ˜¯æ™šä¸Šç³å­”ï¼ˆç³å­”çš„å¤§å°æ˜¯å¤©ç”Ÿçš„ï¼‰æ”¾å¤§çš„å¤§å°ã€‚å› ä¸ºæ™šä¸Šå…‰çº¿å¼±ï¼Œç³å­”ä¼šç”Ÿç†æ€§æ”¾å¤§ã€‚ æœ‰äº›äººæ”¾çš„å¤§ï¼Œæ¯”å¦‚ 7.5mmï¼Œæœ‰äº›äººæ”¾çš„å°ï¼Œæ¯”å¦‚ 6mmï¼Œè¿‘è§†æ‰‹æœ¯çš„å…‰å­¦æ²»ç–—åŒºä¸€èˆ¬åœ¨ 6.5mm å·¦å³ï¼Œè¿‡å¤§çš„ç³å­”ä¼šè¶…è¿‡å…‰å­¦æ²»ç–—åŒºï¼Œå› è€Œä¼šæœ‰çœ©å…‰ç°è±¡ã€‚è¿™ä¸ªé—®é¢˜åœ¨æ‰‹æœ¯å‰æ˜¯éœ€è¦æŸ¥çš„ã€‚ æš—ç³è¶Šå¤§åˆ‡å‰Šè§’è†œåšåº¦ä¹Ÿå°±è¶Šå¤šï¼Œé’ˆå¯¹è§’è†œå¤§çš„äººæœ€å¥½é€‰æ‹©åŠé£ç§’ã€ä¸ªæ€§åŒ–åŠé£ç§’ï¼Œæˆ–è€…ä¸è€ƒè™‘æ‰‹æœ¯ã€‚ æ¯”å¦‚æš—ç³ä¸º 7.5mmï¼Œå…‰åŒºåˆ‡å‰Šä¸º 7.0mmï¼Œå…¶ä¸­çš„ 0.5mm å› ä¸ºè¿˜æ˜¯è¿‘è§†çŠ¶æ€ï¼Œå°±ä¼šå‡ºç°çœ©å…‰ã€‚ æœ‰äº›äººè¯´è¿‘è§†æ‰‹æœ¯åç»™è‡ªå·±å¸¦æ¥äº†åé—ç—‡ï¼Œå‡ºç°äº†ä»¥ä¸Šæƒ…å†µå¯èƒ½è·Ÿè‡ªèº«æƒ…å†µæœ‰å…³ç³»æˆ–è€…è·Ÿè‡ªå·±é€‰æ‹©çš„æ‰‹æœ¯æ–¹å¼æœ‰å…³ï¼Œä¸æ˜¯è¿‘è§†æ‰‹æœ¯çš„é—®é¢˜ã€‚ å¦‚æœç³å­”è¿‡å¤§ï¼Œæ™¶ä½“æˆ–æ˜¯æ¿€å…‰åˆ‡å‰Šçš„å…‰å­¦åŒºä¸èƒ½å®Œå…¨è¦†ç›–ç³å­”ï¼Œå°±å¯èƒ½ä¼šâ€æ¼å…‰â€œï¼Œè¿™éƒ¨åˆ†æ¼è¿‡å»çš„å…‰çº¿ï¼Œæ˜¯æ— æ³•èšç„¦åˆ°è§†ç½‘è†œä¸Šçš„ï¼Œç›¸å½“äºè¿˜æ˜¯è¿‘è§†çš„æœ¦èƒ§çš„æˆåƒï¼Œæ¸…æ™°çš„å’Œè¿‘è§†çš„ä¸¤ç§å½±åƒæ··åˆåœ¨ä¸€èµ·ï¼Œå°±å½¢æˆäº†ç‹¬ç‰¹çš„æ•£å…‰æ•ˆæœï¼Œä¹Ÿå°±æ˜¯é‡å½±è™šå½±ï¼Œè¿™åœ¨å‘å…‰ç‰©ä½“ä¸Šå°¤å…¶æ˜æ˜¾ã€‚ å¦‚æœæš—ç³å¤§ï¼Œè§’è†œåšåº¦ç†æƒ³ï¼Œåº¦æ•°ä¸é«˜çš„æ¡ä»¶ä¸‹å¯ä»¥ç›¸å¯¹çš„æ‰©å¤§ä¸€ç‚¹å…‰åŒºã€‚ä½†æ˜¯å¦‚æœè§’è†œåè–„ï¼Œåº¦æ•°åˆé«˜çš„äººå…‰åŒºä¸å»ºè®®è®¾è®¡å¤ªå¤§ï¼Œå› ä¸ºæœ¬èº«åº¦æ•°é«˜ï¼Œè§’è†œç»„ç»‡å°±åˆ‡å‰Šçš„å¤šï¼Œå…‰åŒºå†å¤§è§’è†œå°±ä¼šä¸¢å¤±æ›´å¤šï¼Œè§’è†œçš„å‰©ä½™åŠ›å­¦å®‰å…¨æ€§å°±ä¼šå·®ã€‚ ä¸€èˆ¬å¤§äº 7 æ¯«ç±³ï¼ŒåŸºæœ¬ä¸Šå°±ç®—å¤§ï¼Œ7.5 ä»¥ä¸Šç”šè‡³ 8 æ¯«ç±³çš„å°±æ˜¯å¾ˆå¤§çš„ç³å­”äº†ï¼Œ7 ä»¥ä¸Šå…¶å®å°±è¦è€ƒè™‘åˆ°åº•è¦ä¸è¦åšæ‰‹æœ¯äº†ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:5:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#ä»€ä¹ˆæ˜¯æš—ç³"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ä»€ä¹ˆæ˜¯å…‰å­¦åŒºå…‰å­¦åŒºæˆ–è€…å«å…‰å­¦æ²»ç–—åŒºã€‚ è¿‘è§†æ‰‹æœ¯ï¼Œæ— è®ºæ˜¯æ¿€å…‰ç±»æ‰‹æœ¯æ¯”å¦‚åŠé£ç§’ï¼Œè¿˜æ˜¯ ICL æ™¶ä½“æ¤å…¥ç±»æ‰‹æœ¯ï¼Œéƒ½æœ‰ä¸€ä¸ªä½œç”¨çš„å…‰å­¦åŒºï¼Œå½“å…‰å­¦åŒºå®Œå…¨è¦†ç›–ç³å­”æœ€å¤§é¢ç§¯çš„æƒ…å†µä¸‹è§†åŠ›æ•ˆæœæ‰ä¼šå¥½ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:6:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#ä»€ä¹ˆæ˜¯å…‰å­¦åŒº"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" å…‰å­¦åŒºçš„å®šä¹‰è§’è†œæ¿€å…‰æ‰‹æœ¯åˆ©ç”¨æ³¢é•¿ä¸º 193nm çš„æ¿€å…‰å¯¹è§’è†œè¿›è¡Œåˆ‡å‰Šï¼ˆæ¶ˆèï¼‰ï¼Œä»¥æ”¹å˜è§’è†œçš„æŠ˜å…‰èƒ½åŠ›ï¼Œä½¿å¾—å¹³è¡Œå…‰çº¿è¿›å…¥çœ¼å±ˆå…‰ç³»ç»Ÿåèƒ½å‡†ç¡®çš„èšé›†åœ¨è§†ç½‘è†œä¸Šã€‚æ‰‹æœ¯åŒ»ç”Ÿå¯ä»¥çœ‹åˆ°æ¿€å…‰æ¶ˆèçš„èŒƒå›´ï¼Œè¿™ä¸ªæ¶ˆèåŒºå°±æ˜¯åˆ‡å‰ŠåŒºï¼Œå…¶å¤§å°ç”¨ç›´å¾„è¡¨ç¤ºã€‚ ä¸ºç¡®ä¿æ¿€å…‰åˆ‡å‰Šåçš„è§’è†œæœ‰å…‰æ»‘çš„è¡¨é¢ï¼Œåˆ‡å‰ŠåŒºåŸŸåˆ†ä¸ºå…‰å­¦åŒºå’Œè¿‡æ¸¡åŒºä¸¤éƒ¨åˆ†ã€‚å…¶ä¸­å…‰å­¦åŒºæ˜¯ç”¨æ¥è¿›è¡Œå±ˆå…‰çŸ«æ­£çš„åŒºåŸŸï¼Œä¸»è¦èµ·å…‰å­¦æˆåƒä½œç”¨ï¼Œè¿‡æ¸¡åŒºèµ·åˆ°å…‰å­¦åŒºä¸éå…‰å­¦åŒºä¹‹é—´çš„å…‰æ»‘è¿‡åº¦ä½œç”¨ï¼Œå¯ä»¥é™ä½å…‰å­¦åŒºè¾¹ç¼˜æ›²ç‡çªç„¶æ”¹å˜çš„å‡ ç‡ï¼Œæœ‰æ•ˆé™ä½æœ¯åçƒå·®ï¼ˆè§’è†œQå€¼ä¸çƒå·®ï¼‰çš„å¢åŠ ï¼Œå‡å°‘æœ¯åè§’è†œä¸Šçš®çš„å¢ç”Ÿå’Œæš—ç¯å¢ƒä¸‹çš„çœ©å…‰é—®é¢˜ã€‚ å…‰å­¦åŒºåœ¨ä¸´åºŠä¸Šæ˜¯å¯ä»¥è°ƒæ•´çš„ï¼Œæ˜¯æ§åˆ¶æœ¯åè§†è§‰è´¨é‡çš„å‚æ•°ã€‚æ­£å¸¸æˆå¹´äººçš„è§’è†œæ¨ªå¾„ä¸º 11.5-12mmï¼Œå‚ç›´å¾„ä¸º 10.5-11mmã€‚åœ¨è§’è†œå±ˆå…‰æ‰‹æœ¯çš„ä¸´åºŠè®¾è®¡ä¸­ï¼Œå…‰å­¦åŒºå¤§å°ä¸€èˆ¬è®¾å®šåœ¨ 6ï½7mm å·¦å³ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå½“æš—ç³å¤§ä¸ 7mm æ—¶ï¼Œè¦ç»¼åˆè€ƒè™‘æ‰‹æœ¯æˆ–æ˜¯å¦è¿›è¡Œæ‰‹æœ¯çš„åŸå› ã€‚ å…‰å­¦åŒºçš„å¤§å°æ˜¯ç»¼åˆè¿‘è§†åŒå­¦çš„è§’è†œç›´å¾„ã€è§’è†œåšåº¦ã€ç³å­”ç›´å¾„ã€è§’è†œæ›²ç‡åŠè¿‘è§†æ•£å…‰åº¦æ•°ç­‰å› ç´ ç»¼åˆè®¾è®¡ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:6:1","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#å…‰å­¦åŒºçš„å®šä¹‰"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ä¸»æµè¿‘è§†æ‰‹æœ¯çš„å…‰å­¦åŒºèŒƒå›´ æ‰‹æœ¯ç±»å‹ æœ€å¤§å…‰åŒº å…¨é£ç§’ 7.0mm åŠé£ç§’æ¿€ 6.5mm æ™¶ä½“æ¤å…¥ 7.3mm å…¶å®ï¼Œæ‰‹æœ¯åˆ‡å‰ŠåŒºåŸŸä¹Ÿå—åˆ°æ‰‹æœ¯è®¾å¤‡çš„å½±å“è€Œæœ‰æ‰€å·®å¼‚ã€‚ æ¯”å¦‚ï¼ŒåŒæ ·æ˜¯ 450 åº¦è¿‘è§†åŠ  100 åº¦æ•£å…‰ï¼Œé¹°è§†çš„åˆ‡å‰ŠåŒºä¸º 9mmï¼Œé˜¿ç›ä»•çš„åˆ‡å‰ŠåŒºä¸º 7.45mmï¼Œè”¡å¸çš„åˆ‡å‰ŠåŒºåŸŸä¸º 6.50mmï¼Œæ‰€ä»¥ï¼Œæœ‰æ—¶æ‰‹æœ¯è®¾å¤‡é€‰æ‹©ä¹Ÿå¾ˆé‡è¦ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:6:2","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#ä¸»æµè¿‘è§†æ‰‹æœ¯çš„å…‰å­¦åŒºèŒƒå›´"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" å…‰å­¦åŒºä¸æš—ç³çš„å…³ç³»æ­£å¸¸äººç™½å¤©äº®ç¯å¢ƒç³å­”ç›´å¾„çº¦ 3mmï¼Œæš—ç¯å¢ƒä¸‹ï¼Œç³å­”ä¼šä¸ç”±è‡ªä¸»çš„æ”¾å¤§ï¼Œä¹Ÿå°±æ˜¯ç”Ÿç†æ€§æ”¾å¤§ï¼›å¯¹äºä¸­ä½åº¦è¿‘è§†çš„åŒå­¦ï¼Œå¦‚æœå…‰å­¦åŒºåŸŸåšçš„è¾ƒå¤§ï¼Œå¾ˆå°‘ä¼šå‡ºç°çœ©å…‰çš„æƒ…å†µï¼›å¯¹äºé«˜åº¦è¿‘è§†çš„æœ‹å‹ï¼Œå› ä¸ºåº¦æ•°è¾ƒé«˜ï¼Œéœ€è¦åˆ‡å‰Šæ‰çš„ç»„ç»‡è¾ƒå¤šï¼Œåˆä¸å¯èƒ½æŠŠå…‰å­¦åŒºåŸŸåšçš„é‚£ä¹ˆå¤§ï¼Œæ‰€ä»¥åˆ°äº†æ™šä¸Šå…‰çº¿å˜æš—ï¼Œç³å­”æ”¾å¤§çš„æ—¶å€™å°±å¯èƒ½ä¼šå‡ºç°çœ©å…‰çš„é—®é¢˜ã€‚ å…‰å­¦åŒºä¸æš—ç³çš„å…³ç³» å¦‚ä¸Šâ˜ï¸ æš—ç³ç›´å¾„å¤§äºè¿‘è§†æ‰‹æœ¯å…‰å­¦åŒºç›´å¾„ï¼Œåˆ™ä¼šå‘ç”Ÿçœ©å…‰çš„ç—‡çŠ¶ã€‚ è‹¥æš—ç³è¶…è¿‡æ‰‹æœ¯å…‰å­¦åŒºçš„å€¼è¿‡å¤§ï¼Œä¸ºé¿å…å‡ºç°ä¸¥é‡çœ©å…‰çš„é—®é¢˜ï¼Œå»ºè®®è¿›è¡Œä¿å®ˆçš„çŸ«æ­£æ–¹æ³•ï¼Œé‡‡å–ä½©æˆ´çœ¼é•œæˆ–æ˜¯éšå½¢çœ¼é•œæ¥æ»¡è¶³æ—¥å¸¸ç”¨çœ¼éœ€æ±‚ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:7:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#å…‰å­¦åŒºä¸æš—ç³çš„å…³ç³»"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ä»€ä¹ˆæ˜¯è§’è†œåˆ¶ç“£è¿‘è§†çœ¼å¾€å¾€ä¼´éšç€è§’è†œè¿‡å‡¸ï¼Œè¿‘è§†æ¿€å…‰æ‰‹æœ¯é€šè¿‡åˆ‡å‰Šè§’è†œç»„ç»‡ï¼Œå°†è§’è†œå‰è¡¨é¢çš„å¼§åº¦å‰Šå¹³ï¼Œé™ä½è§’è†œçš„æŠ˜å…‰åŠ›ï¼Œä»è€ŒçŸ«æ­£è¿‘è§†å±ˆå…‰ï¼Œæé«˜è§†åŠ›ã€‚ çœ¼ç›çš„ç»“æ„ è§’è†œåˆ†ä¸ºäº”å±‚ï¼Œç”±å‰å‘åä¾æ¬¡ä¸ºä¸Šçš®ç»†èƒå±‚ã€å‰å¼¹åŠ›å±‚ã€åŸºè´¨å±‚ã€åå¼¹åŠ›å±‚ã€å†…çš®ç»†èƒå±‚ã€‚è§’è†œä¸­åŸºè´¨å±‚åšåº¦å åˆ°æ•´ä½“åšåº¦çš„ 90%ï¼Œæ–¹ä¾¿åˆ‡å‰Šï¼Œæ‰‹æœ¯ä¸»è¦åœ¨åŸºè´¨å±‚å®Œæˆã€‚ è§’è†œç“£æ˜¯è§’è†œçš„ä¸€éƒ¨åˆ†ï¼Œæ˜¯æ‰‹æœ¯è¿‡ç¨‹åˆ‡å¼€çš„ä¸€å±‚è–„è–„çš„è§’è†œç»„ç»‡ã€‚ å¦‚æœè¦åœ¨åŸºè´¨å±‚å®Œæˆæ‰‹æœ¯ï¼Œæ­¤æ—¶å¿…é¡»è¦æ€å¼€ä¸Šçš®ç»†èƒå±‚å’Œå‰å¼¹åŠ›å±‚ï¼Œå°±éœ€è¦åˆ¶ä½œè§’è†œç“£ï¼Œæ‰€ä»¥ä¸ºäº†è¾¾åˆ°åŸºè´¨å±‚è€Œè¿›è¡Œæ‰‹æœ¯éœ€è¦æ€å¼€çš„éƒ¨åˆ†å°±æ˜¯è§’è†œç“£ã€‚ å¦‚æœå°†è§’è†œç»„ç»‡æ¯”å¦‚æˆä¸€ä¸ªè¥¿ç“œï¼Œè§’è†œç“£ç›¸å½“äºæ€èµ·çš„ä¸€å—è¥¿ç“œçš®ï¼Œé‡Œé¢çš„è¥¿ç“œç“¤å°±æ˜¯è§’è†œåŸºè´¨å±‚ã€‚æ‰‹æœ¯è¿‡ç¨‹ä¸­ï¼Œå…ˆå°†è§’è†œç“£æ€å¼€ç¿»åœ¨ä¸€è¾¹ï¼Œç„¶åç”¨å‡†åˆ†å­æ¿€å…‰åœ¨åŸºè´¨å±‚ä¸Šè¿›è¡Œåˆ‡å‰Šï¼Œåˆ‡å‰Šå®Œæ¯•åï¼Œå†å°†è§’è†œç“£ç¿»å›æ¥ç›–åœ¨åŸå¤„ï¼Œæ‰‹æœ¯å°±å®Œæˆäº†ã€‚å› ä¸ºè§’è†œåšåº¦å’Œå½¢çŠ¶å‘ç”Ÿæ”¹å˜ï¼Œæˆåƒå°±ä¼šå‡†ç¡®è½åˆ°è§†ç½‘è†œä¸Šï¼Œä»¥æ­¤è¾¾åˆ°çŸ«æ­£ç¤ºä¾‹çš„ç›®çš„ã€‚ å¦‚æœåªæ‹¿åŠé£ç§’å’Œå…¨é£ç§’æ¥ä¸¾ä¾‹çš„è¯ï¼Œå…¶å®å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œåªæœ‰åœ¨åŠé£ç§’ä¸­æ‰ä¼šæœ‰è§’è†œç“£ï¼Œå…¨é£ç§’æ˜¯ä¸ä¼šæœ‰è§’è†œç“£çš„ï¼Œå› ä¸ºç°åœ¨æ¿€å…‰å¯ä»¥èšç„¦åœ¨è§’è†œçš„ä¸€å®šæ·±åº¦å»å¤„ç†çš„ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥åœ¨åŸºè´¨å±‚ä¸Šè¿›è¡Œåˆ‡å‰Šï¼Œä¸éœ€è¦æ€å¼€è§’è†œç“£ï¼Œæ¿€å…‰ç›´æ¥å¯¹åŸºè´¨å±‚è¿›è¡Œåˆ‡å‰Šå®Œæˆåï¼Œåœ¨è§’è†œè¾¹ç¼˜åˆ‡å‰²ä¸€ä¸ª 2-4mm çš„å°å£ï¼Œå°†åˆ‡å‰²çš„åŸºè´¨å±‚å–å‡ºï¼Œæ‰‹æœ¯å°±å®Œæˆäº†ã€‚ æ‰€ä»¥ï¼ŒåŠé£ç§’éœ€è¦æ€å¼€è§’è†œç“£ï¼Œå…¨é£ç§’ä¸éœ€è¦æ€å¼€è§’è†œç“£ï¼Œåœ¨æ‰‹æœ¯éƒ½æˆåŠŸçš„æƒ…å†µä¸‹ï¼Œå…¨é£ç§’å¯¹äºè§’è†œçš„åˆ›ä¼¤ä¼šæ›´å°ã€‚å½“ç„¶é€‰æ‹©é‚£ç§æ‰‹æœ¯æ–¹å¼ï¼Œéœ€è¦æ›´è¿‡åŒ»ç”Ÿçš„ç»¼åˆè€ƒé‡ï¼Œè¿™é‡Œåªåšç†è®ºåˆ†æã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:8:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#ä»€ä¹ˆæ˜¯è§’è†œåˆ¶ç“£"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" æœ¯åçœ©å…‰ç—‡çš„å¯èƒ½åŸå›  ç‚«å…‰ æš—å…‰ä¸‹ç³å­”ç›´å¾„å¤§ å³ä½¿é‡‡ç”¨å¤§å…‰åŒºçŸ«æ­£è¿‘è§†éš¾ä»¥å®Œå…¨è¦†ç›–æš—å…‰ä¸‹çš„ç³å­”ï¼Œå½¢æˆçœ©å…‰ï¼Œæ­¤ç±»äººç¾¤ä¸å®œè¿›è¡Œè¿‘è§†æ‰‹æœ¯ã€‚ è¿‘è§†åº¦æ•°è¿‡é«˜ è¿‘è§†åº¦æ•°è¿‡é«˜ï¼Œè‹¥é‡‡ç”¨æ¿€å…‰çŸ«æ²»è¿‘è§†ï¼Œåˆ‡å‰Šçš„è§’è†œå°±è¶Šå¤šï¼Œæ¿€å…‰åœ¨è§’è†œè¡¨é¢å½¢æˆçš„â€œå‡¹é™·â€ä¹Ÿå°±è¶Šæ·±ï¼Œå…¶æ–œç‡ä¹Ÿè¶Šå¤§ã€‚ æ‰‹æœ¯è¿‡ç¨‹ä¸­å¤ªè¿‡äºç´§å¼  æ‰‹æœ¯è€…é…åˆåº¦è¾ƒå·®ï¼Œé€ æˆåä¸­å¿ƒåˆ‡å‰Šã€‚ è¿‡åº¦å…³æ³¨å¼•èµ·çš„å¿ƒç†â€œå‡è±¡â€ æœ‰ä¸€å°éƒ¨åˆ†äººç¾¤å¯èƒ½æœ¯å‰å°±æœ‰ä¸€å®šçš„â€œçœ©å…‰â€ï¼Œåªæ˜¯æ²¡æœ‰åœ¨æ„ï¼Œè€Œæœ¯åå¯¹è§†è§‰è´¨é‡çš„å…³æ³¨åº¦æ˜æ˜¾æé«˜ï¼Œå¾€å¾€è®¤ä¸ºæ˜¯æ‰‹æœ¯å¯¼è‡´çš„çœ©å…‰ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:9:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#æœ¯åçœ©å…‰ç—‡çš„å¯èƒ½åŸå› "},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" å¤œè§†åŠ›ä¸‹é™é—®é¢˜å¤§éƒ¨åˆ†äººé»‘ä¹Œç çš„è§’è†œç›´å¾„æ˜¯åœ¨ 11~12 æ¯«ç±³å¤§å°ï¼Œåšæ¿€å…‰æ‰‹æœ¯æ—¶æ˜¯åœ¨è§’è†œçš„ä¸­å¿ƒï¼Œå¤§çº¦ 6~7 ä¸ªæ¯«ç±³çš„ä¸­é—´è¿›è¡Œï¼Œå¹³å‡æ˜¯åœ¨å¤§çº¦ 6.5 æ¯«ç±³çš„åŒºåŸŸå½“ä¸­åšã€‚ç”±äºç™½å¤©çš„ç³å­”åªæœ‰ 2~3 ä¸ªæ¯«ç±³ï¼Œéƒ½åœ¨ 6.5 æ¯«ç±³çš„è¦†ç›–èŒƒå›´ä¹‹å†…ï¼Œæ‰€ä»¥æœ¯åç™½å¤©è§†åŠ›éƒ½æ˜¯å¥½çš„ï¼›åˆ°äº†æ™šä¸Šï¼Œäººçš„ç³å­”ä¼šæ…¢æ…¢æ”¾å¤§ï¼Œæœ‰çš„äººå¯èƒ½æ”¾å¤§åˆ° 6.7ã€6.5 æ¯«ç±³ï¼Œè¿™ç§äººç™½å¤©å’Œæ™šä¸Šçš„è§†è§‰è´¨é‡è·Ÿæ‰‹æœ¯ä¹‹å‰å·®åˆ«ä¸€èˆ¬ä¸ä¼šå¾ˆå¤§ã€‚ä½†æ˜¯æœ‰çš„äººç³å­”ä¼šæ”¾å¤§åˆ°å¾ˆå¤§ï¼Œæ¯”å¦‚åˆ° 7ç‚¹å‡ ã€8.0 æ¯«ç±³ä»¥ä¸Šï¼Œè¿™æ—¶å€™ä¸éš¾æƒ³è±¡ï¼Œå½“8.0æ¯«ç±³çš„ç³å­”å¤§å°èŒƒå›´ä¹‹å†…ï¼Œä¸­é—´éƒ¨åˆ† 6.5 æ¯«ç±³çš„èŒƒå›´æ˜¯åšè¿‡æ¿€å…‰æ‰‹æœ¯çš„ï¼Œè€Œè¾¹ä¸Šçš„è¿™ä¸€åœˆè¿˜æ˜¯æ²¡æœ‰åšè¿‡æ¿€å…‰æ‰‹æœ¯ä¹‹å‰çš„è¿‘è§†çŠ¶æ€çš„è§’è†œï¼Œæ™šä¸Šçœ‹ä¸œè¥¿çš„æ—¶å€™å°±ä¼šæœ‰ä¸¤ä¸ªå±ˆå…‰ç•Œé¢çš„å›¾åƒæŠ•å°„åˆ°ä»–çš„è§†ç½‘è†œä¸Šï¼Œè¿™æ—¶å€™ä»–çš„å¤§è„‘ä¼šæ„Ÿå—åˆ°ä¸¤å¥—æ¸…æ™°åº¦ä¸ä¸€æ ·çš„å›¾åƒï¼Œä»è€Œå¯¹è§†è§‰äº§ç”Ÿå¹²æ‰°ï¼Œä¼šè§‰å¾—æœ‰ç‚¹å…‰æ™•ã€å…‰åœˆã€‚ æ‰€ä»¥åšäº†æ¿€å…‰æ‰‹æœ¯ä»¥åï¼Œä¸€éƒ¨åˆ†äººä¸€å¼€å§‹å¯èƒ½ä¼šæœ‰å¤œé—´è§†è§‰è´¨é‡ç‚¹ä¸‹é™çš„æ„Ÿè§‰ã€‚éšç€æ—¶é—´æ…¢æ…¢çš„å»¶é•¿ï¼Œäººæ™šä¸Šçš„ç³å­”å¤§å°ï¼Œä¹Ÿå°±æ˜¯æš—ç³çš„ç›´å¾„ï¼Œä¼šé€æ¸ç¼©å°ã€‚å› ä¸ºæš—ç³ç›´å¾„æ˜¯å—äººä½“çš„äº¤æ„Ÿç¥ç»å’Œå‰¯äº¤æ„Ÿç¥ç»æ§åˆ¶ï¼Œå½“äº¤æ„Ÿç¥ç»å…´å¥‹çš„æ—¶å€™ï¼Œç³å­”å°±ä¼šå˜å¤§ï¼›å½“å‰¯äº¤æ„Ÿç¥ç»å…´å¥‹çš„æ—¶å€™ï¼Œç³å­”å°±ä¼šå˜å°ã€‚æ‰€ä»¥æ¿€å…‰æ‰‹æœ¯åï¼Œå½“æ™šä¸Šæœ‰çœ©å…‰æ—¶ï¼Œå‰¯äº¤æ„Ÿç¥ç»å°±ä¼šæ…¢æ…¢å…´å¥‹èµ·æ¥ï¼Œä»–çš„ç³å­”å°±ä¼šé€æ¸ç¼©å°ï¼Œç¼©å°åˆ°ä¸€å®šç¨‹åº¦ä»¥åï¼Œå¤œé—´çœ©å…‰çš„ç°è±¡å°±ä¼šæ¶ˆå¤±ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:10:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#å¤œè§†åŠ›ä¸‹é™é—®é¢˜"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹²çœ¼æˆ‘ä»¬çš„çœ¼ç›æœ€è¡¨é¢æœ‰ä¸€å±‚æ³ªè†œï¼Œæ¥ç»´æŒçœ¼è¡¨é¢çš„æ¹¿æ¶¦ã€‚æ³ªè†œæ˜¯ç”±çœ¼ç›è¡¨é¢çš„ç‘æ¿è…ºã€æ³ªè…ºã€å‰¯æ³ªè…ºåˆ†æ³Œå‡ºæ¥çš„ï¼Œè¿™äº›è…ºä½“åˆ†æ³Œçš„æ³ªæ¶²ç”±è§’è†œè¡¨é¢çš„ç¥ç»åé¦ˆæ‰€æ§åˆ¶ã€‚ å½“åšäº†æ¿€å…‰æ‰‹æœ¯ä»¥åï¼Œä¼šæŸä¼¤ä¸€éƒ¨åˆ†è§’è†œè¡¨é¢çš„ç¥ç»ï¼Œä½¿å¾—åé¦ˆçš„æœºåˆ¶å‡å¼±ï¼Œæ³ªè…ºåˆ†æ³Œçš„æ³ªæ¶²é‡å°±ä¼šå‡å°‘ã€‚ åšäº†è¿‘è§†æ¿€å…‰æ‰‹æœ¯ä¹‹åï¼Œéƒ½ä¼šæˆ–å¤šæˆ–å°‘çš„æœ‰ä¸€ç‚¹å¹²çœ¼ç—‡ã€‚ä½†æ˜¯éšç€æœ¯åçš„æ¢å¤ï¼Œå¤§éƒ¨åˆ†äººåœ¨æœ¯å 6 ä¸ªæœˆçš„æ—¶å€™ï¼Œè§’è†œè¡¨é¢ç¥ç»çš„åŠŸèƒ½ä¼šé€æ­¥æ¢å¤èµ·æ¥ï¼Œå¹²çœ¼ç—‡ä¹Ÿä¼šé€æ­¥å‡è½»ã€‚ ä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œä½†æ˜¯ï¼Œæˆ‘è§‰å¾—å¹²çœ¼å¯èƒ½è·ŸåŒ»ç”Ÿçš„æ°´å¹³å’Œè®¾å¤‡æœ‰å…³ï¼Œå¾ˆå¤šéƒ½åªæ˜¯ç†è®ºä¸Šæ²¡é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘è€è¡¨å¾ˆæ—©ä¹‹å‰åœ¨æˆ‘ä»¬å¸‚é‡Œåšçš„æ‰‹æœ¯ï¼Œåˆ°ç°åœ¨äº†è¿˜ä¸€ç›´å¹²çœ¼ğŸ‘‡ å› ä¸ºå…¨é£ç§’çš„å¯¹è§’è†œçš„æŸä¼¤æ˜¯éå¸¸å°çš„ï¼Œæ‰€ä»¥å¯¹è§’è†œçš„ç¥ç»çš„æŸä¼¤ä¹Ÿæ˜¯éå¸¸å°çš„ï¼Œç›¸å¯¹è€Œè¨€ï¼Œå…¨é£ç§’å¯¹å¹²çœ¼çš„ç—‡çŠ¶ç†è®ºä¸Šä¼šå°å¾ˆå¤šã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:11:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#ä¸ºä»€ä¹ˆä¼šå‡ºç°å¹²çœ¼"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" é£èšŠç—‡åœ¨æˆ‘æŸ¥è¿‘è§†æ‰‹æœ¯åé—ç—‡æ—¶ï¼Œå¾ˆå¤šäººå‘å¸–è¯´åœ¨æœ¯æ‰‹ä¼šå‡ºç°é£èšŠç—‡ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:12:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#é£èšŠç—‡"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" é£èšŠè¡¨ç° è§†é‡ä¸­å‡ºç°ä¸€äº›å°å›¾å½¢ï¼Œå¯ä»¥è¡¨ç°ä¸ºè‰²æš—çš„æ–‘ç‚¹æˆ–åœ†çƒã€é€æ˜çš„çº¿çŠ¶æ¼‚æµ®ç‰© è½¬åŠ¨çœ¼çƒæ—¶ï¼Œè¿™äº›æ–‘ç‚¹ä¼šç§»åŠ¨ï¼Œä½†æ˜¯å½“ä½ æƒ³è¦çœ‹æ¸…æ–‘ç‚¹æ—¶ï¼Œå®ƒä»¬åˆè¿…é€Ÿä»æ‚¨çš„è§†é‡ä¸­æ¶ˆå¤± åœ¨ä½ çœ‹ç€æ˜äº®çš„èƒŒæ™¯ï¼ˆä¾‹å¦‚è“å¤©æˆ–ç™½å¢™ï¼‰æ—¶ï¼Œè¿™äº›æ–‘ç‚¹æœ€æ˜æ˜¾ å°å›¾å½¢æˆ–çº¿çŠ¶ç‰©æœ€ç»ˆä¼šä¸‹é™å¹¶æ¼‚å‡ºæ‚¨çš„è§†çº¿ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:12:1","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#é£èšŠè¡¨ç°"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" å‡ºç°åŸå›  ä¸å¹´é¾„æœ‰å…³çš„çœ¼éƒ¨å˜åŒ–ã€‚ éšç€å¹´é¾„çš„å¢é•¿ï¼Œå……æ»¡çœ¼çƒå¹¶å¸®åŠ©å…¶ä¿æŒåœ†å½¢çš„ç»ç’ƒä½“æˆ–èƒ¶çŠ¶ç‰©è´¨ä¼šå‘ç”Ÿå˜åŒ–ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç»ç’ƒä½“éƒ¨åˆ†æ¶²åŒ–ï¼Œè¿™ä¸€è¿‡ç¨‹å¯¼è‡´å…¶è„±ç¦»çœ¼çƒå†…è¡¨é¢ã€‚å½“ç»ç’ƒä½“æ”¶ç¼©å’Œä¸‹å‚æ—¶ï¼Œå®ƒä¼šç»“å—å¹¶å˜å¾—é»ç¨ ã€‚è¿™äº›ç»“å—ç¢ç‰‡é˜»æŒ¡äº†ä¸€äº›é€šè¿‡çœ¼ç›çš„å…‰çº¿ï¼Œåœ¨æ‚¨çš„è§†ç½‘è†œä¸ŠæŠ•å°„å‡ºå¾®å°çš„é˜´å½±ï¼Œè¢«è§†ä¸ºæ¼‚æµ®ç‰©ã€‚ çœ¼ç›åéƒ¨å‘ç‚ã€‚åè‘¡è„è†œç‚æ˜¯çœ¼ç›åéƒ¨è‘¡è„è†œå±‚çš„ç‚ç—‡ã€‚è¿™ç§ç—…ç—‡ä¼šå¯¼è‡´ç‚ç—‡ç¢ç‰‡é‡Šæ”¾åˆ°ç»ç’ƒä½“ä¸­è€Œè¢«è§†ä¸ºæ¼‚æµ®ç‰©ã€‚åè‘¡è„è†œç‚å¯èƒ½æ—¶ç”±äºæ„ŸæŸ“ã€ç‚ç—‡æ€§ç–¾ç—…æˆ–å…¶ä»–åŸå› æ‰€è‡´ã€‚ çœ¼ç›å‡ºè¡€ã€‚ç»ç’ƒä½“å‡ºè¡€æœ‰å¾ˆå¤šåŸå› ï¼ŒåŒ…æ‹¬ç³–å°¿ç—…ã€é«˜è¡€å‹ã€è¡€ç®¡é˜»å¡å’ŒæŸä¼¤ã€‚è¡€ç»†èƒè¢«è§†ä¸ºæ¼‚æµ®ç‰©ã€‚ è§†ç½‘è†œæ’•è£‚ã€‚å½“ä¸‹å‚çš„ç»ç’ƒä½“äº§ç”Ÿè¶³å¤Ÿçš„åŠ›æ‹‰æ‰¯è§†ç½‘è†œæ—¶ï¼Œå°±ä¼šå‘ç”Ÿè§†ç½‘è†œæ’•è£‚ã€‚å¦‚æœä¸æ²»ç–—ï¼Œè§†ç½‘è†œæ’•è£‚å¯èƒ½å¯¼è‡´è§†ç½‘è†œè„±ç¦»ï¼Œä¹Ÿå°±æ˜¯è§†ç½‘è†œåé¢çš„æ¶²ä½“ç§¯èšï¼Œå¯¼è‡´è§†ç½‘è†œä»æ‚¨çœ¼ç›åæ–¹è„±ç¦»ã€‚è§†ç½‘è†œè„±ç¦»ä¸ç»æ²»ç–—å¯å¯¼è‡´æ°¸ä¹…æ€§è§†åŠ›ä¸§å¤±ã€‚ çœ¼ç§‘æ‰‹æœ¯å’Œçœ¼ç§‘è¯ç‰©ã€‚æŸäº›è¯ç‰©æ³¨å…¥ç»ç’ƒä½“ä¼šå¯¼è‡´æ°”æ³¡å½¢æˆã€‚è¿™äº›æ°”æ³¡ä¼šè¢«è§†ä¸ºé˜´å½±ï¼Œç›´è‡³æ‚¨çš„çœ¼ç›å°†å…¶å¸æ”¶ã€‚æŸäº›ç»ç’ƒä½“è§†ç½‘è†œæ‰‹æœ¯ä¼šåœ¨ç»ç’ƒä½“ä¸­åŠ å…¥ç¡…æ²¹ï¼Œè¿™ä¹Ÿå¯èƒ½è¢«çœ‹ä½œæ˜¯æ¼‚æµ®ç‰©ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:12:2","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#å‡ºç°åŸå› "},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" è¿‘è§†æ‰‹æœ¯æ˜¯å¦ä¼šå¯¼è‡´é£èšŠ åœ¨çŸ¥ä¹å¾ˆå¤šè¿™æ ·çš„å›ç­”ä¸­ï¼Œå‡ºç°äº† 2 ä¸ªæ¯”è¾ƒé«˜èµçš„è§‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯æ‰‹æœ¯è¿‡ç¨‹æŸä¼¤äº†ç»ç’ƒä½“ï¼Œå¯¼è‡´äº†é£èšŠç°è±¡ï¼Œæ¯”å¦‚è¿™ä¸ªğŸ‘‡ è¿‘è§†æ‰‹æœ¯æ˜¯åœ¨è§’è†œä¸Šè¿›è¡Œçš„æ‰‹æœ¯ï¼Œç”±ã€ç»ç’ƒä½“å›¾ã€‘å¯çŸ¥ï¼Œè§’è†œå’Œç»ç’ƒä½“ä¹‹é—´è¿˜éš”äº†ä¸€ä¸ªæ°´æ™¶ä½“æˆ–æ˜¯å«æ™¶çŠ¶ä½“ï¼Œåœ¨æ‰‹æœ¯è¿‡ç¨‹ä¸­æ ¹æœ¬ä¸ä¼šæ¥è§¦åˆ°ç»ç’ƒä½“ï¼Œæ‰€ä»¥è¿‘è§†æ‰‹æœ¯ç ´åæ™¶çŠ¶ä½“çš„ä¸€äº›å›ç­”åº”è¯¥æ˜¯ä¸å¯é çš„ã€‚è¿™ä¸ªå›ç­”è¿˜è¯´äº†ä¼šå¯¼è‡´å¤œç›²ç—‡ï¼Œè¿™é‡Œçš„å¤œç›²åº”è¯¥æ˜¯å¤œè§†åŠ›ä¸‹é™ï¼Œè€Œå¤œè§†åŠ›ä¸‹é™æ˜¯å…‰å­¦åŒºå’Œæš—ç³ä¸ä¸€å®šå¯¼è‡´çš„ï¼Œå…·ä½“å¯ä»¥çœ‹å…‰å­¦åŒºå’Œæš—ç³çš„å…³ç³»ã€‚å½“ç„¶è¿™åªæ˜¯æˆ‘çš„ä¸ªäººåˆ†æã€‚ è¿˜æœ‰ä¸€ä¸ªå¯¼è‡´é£èšŠçš„è§‚ç‚¹æ˜¯è´Ÿå‹å¸å¼•å¯¼è‡´çš„ï¼Œæ¯”å¦‚è¿™ä¸ªå›ç­”ï¼š è´Ÿå‹æ˜¯æ‰‹æœ¯è¿‡ç¨‹ä¸­ï¼Œè´Ÿå‹ç¯å¯¹çœ¼çƒäº§ç”Ÿçš„å‹åŠ›ã€‚è´Ÿå‹é«˜ï¼Œä¼šå¯¼è‡´çœ¼å‹å‡é«˜ï¼Œè§†ç¥ç»å’Œè§†ç½‘è†œå—åˆ°å‹è¿«ï¼Œæœ¯ä¸­å‡ºç°çŸ­æš‚çš„é»‘æœ¦æƒ…å†µã€‚æˆ‘æŸ¥åˆ°çš„èµ„æ–™æ˜¯ï¼Œè”¡å¸çš„æœºå™¨ï¼ŒåŠé£ç§’è´Ÿå‹æä½ï¼Œæœ¯ä¸­ä¸ä¼šå‡ºç°çœ¼å‹å‡é«˜ï¼Œå…¨ç¨‹å¯è§†ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—è¿™ä¸ªå¯èƒ½è·Ÿæœºå™¨æœ‰å…³ç³»ï¼Œè·Ÿæ‰‹æœ¯æœ¬èº«å…³ç³»ä¸å¤§ã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:12:3","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#è¿‘è§†æ‰‹æœ¯æ˜¯å¦ä¼šå¯¼è‡´é£èšŠ"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" æ‰‹æœ¯å¤±è´¥çœ¼ä¼šçå—é£ç§’å’Œå…¨é£ç§’è¿‘è§†æ‰‹æœ¯æ˜¯åœ¨çœ¼è§’è†œçš„åŸºè´¨å±‚ä¸Šè¿›è¡Œçš„ï¼Œå¯¹çœ¼å†…ç»„ç»‡æ²¡æœ‰å½±å“ï¼Œç›´æ¥ä¸ŠåŒ»ç”Ÿçš„ç§‘æ™®ï¼š ä½†æ˜¯è¦æ³¨æ„æœ¯åæ„ŸæŸ“ï¼Œæ¯”å¦‚è¿™ä¸ªè§†é¢‘ï¼š ","date":"2022-11-03","objectID":"/surgery-for-myopia/:13:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#æ‰‹æœ¯å¤±è´¥çœ¼ä¼šçå—"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" æ˜¯å¦å¯ä»¥é€šè¿‡è®­ç»ƒé€†è½¬è¿‘è§†è¿‘è§†ï¼Œä¸€ä¸ªå¯ä»¥é€†è½¬çš„ç°ä»£ç–¾ç—…ï¼ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:14:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#æ˜¯å¦å¯ä»¥é€šè¿‡è®­ç»ƒé€†è½¬è¿‘è§†"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" ç›¸å…³è§†é¢‘ æˆ‘ä¸åšè¿‘è¦–é›·å°„æ‰‹è¡“çš„åŸå› ? è©²æ“”å¿ƒå¾Œéºç—‡å—? Smileå…¨é£›ç§’æ˜¯ä»€éº¼? | è’¼è—é´¿èŠé†«å­¸EP179 çœ¼ç›è£¡é¢æ˜¯ä»€éº¼æ¨£çš„å‘¢ æ¿€å…‰è¿‘è§†æœ¯ååå¹´å›é¡¾ï¼æœ¬äººé­é‡æ— æ³•é¿å…çš„åé—ç—‡å¹¶å‘ç—‡å¤§ç›˜ç‚¹ï¼ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:15:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#ç›¸å…³è§†é¢‘"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" å…³äºæˆ‘æˆ‘è§‰å¾—æˆ‘å¯ä»¥ä¸ç”¨è€ƒè™‘æ‰‹æœ¯äº†ğŸ˜¢ï¼Œæ¯•ç«Ÿæˆ‘æš—ç³å·²ç»å¤§ä¸ 7mm äº†ã€‚ä»¥ä¸‹æ˜¯æˆ‘åœ¨åŒä»åŒ»é™¢çš„æŒ‚å·åŒ»ç”Ÿè·Ÿæˆ‘è¯´çš„æˆ‘çš„æš—ç³ã€‚ è€Œä¸”æˆ‘çœ¼åº•ä¹Ÿæœ‰é—®é¢˜ï¼Œåšè¿‡æ¬¡å…¨è§†ç½‘è†œå‡å…‰æœ¯ã€‚ è¿™å‡ å¤©æŸ¥äº†ä¸€äº›èµ„æ–™ï¼ŒåŒ…æ‹¬è·Ÿæœ‹å‹çš„äº¤æµï¼Œæˆ‘å¯¹åšæ‰‹æœ¯çš„æ¬²æœ›å·²ç»ä¸æ˜¯å¾ˆå¤§äº†ï¼Œä½†æ˜¯ï¼Œä¸ªäººè§‰å¾—å¯ä»¥é€šè¿‡ä¸€äº›é”»ç‚¼æ¥æ¢å¤è‡ªå·±çš„è§†åŠ›ğŸ˜‚ğŸ™ˆã€‚ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:16:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#å…³äºæˆ‘"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" å‚è€ƒ äººæ°‘ç½‘-ç§‘æ™®ä¸­å›½-è¿‘è§†æ¿€å…‰æ‰‹æœ¯å®‰å…¨å—ï¼Ÿåä¸ªé—®é¢˜äº†è§£è¿‘è§†æ¿€å…‰æ‰‹æœ¯ æƒ³åšè¿‘è§†æ‰‹æœ¯ï¼Œå´è¢«å„ç§å¹¶å‘ç—‡â€œåŠé€€â€ï¼Ÿçœ¼ç§‘ä¸“å®¶ç ´è§£äº”å¤§ä¼ è¨€ è¿‘è§†æˆå› å’Œæ¢å¤è§†åŠ›åŸç†åŠæ“ä½œæ–¹æ³•ï¼ æš—ç³å¤§åšè¿‘è§†æ‰‹æœ¯ä¼šæœ‰ä»€ä¹ˆåé—ç—‡ï¼Ÿ - çœ¼ç§‘åŒ»ç”Ÿé™ˆé¼çš„å›ç­” - çŸ¥ä¹ è¯¦è§£è¿‘è§†æ‰‹æœ¯ä¸­æ‰‹æœ¯å…‰å­¦åŒºé—®é¢˜ è¿‘è§†æ‰‹æœ¯é è°±å—ï¼Ÿåªæ˜¯èƒ½çŸ«æ­£ï¼Œä½†æ— æ³•æ ¹æ²»è¿‘è§† è¿‘è§†æ‰‹æœ¯ä¸­çš„è§’è†œç“£æ˜¯ä»€ä¹ˆ é£èšŠç—‡ è¿‘è§†çœŸçš„å¯ä»¥è‡ªæ„ˆå—ï¼Ÿ éªŒå…‰å•æ€ä¹ˆçœ‹ï¼Ÿå²ä¸Šæœ€å…¨éªŒå…‰å•æ ·å¼åŠå‚æ•°è¯¦è§£ ","date":"2022-11-03","objectID":"/surgery-for-myopia/:17:0","series":null,"tags":["è¿‘è§†æ¿€å…‰æ‰‹æœ¯","åŠé£ç§’","å…¨é£ç§’"],"title":"è¿‘è§†æ‰‹æœ¯è°ƒç ”ç¬”è®°","uri":"/surgery-for-myopia/#å‚è€ƒ"},{"categories":["golang"],"content":"xiaobinqt,Go sync.Map è§£è¯»,golang sync.map æºç è§£æ,golang sync.map å¹¶å‘ map çš„ä½¿ç”¨","date":"2022-09-14","objectID":"/go-sync-map/","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/"},{"categories":["golang"],"content":" èƒŒæ™¯é¡¹ç›®ä¸­é‡åˆ°äº†éœ€è¦ä½¿ç”¨é«˜å¹¶å‘çš„ map çš„åœºæ™¯ï¼Œä¼—æ‰€å‘¨çŸ¥ Go å®˜æ–¹çš„åŸç”Ÿ map æ˜¯ä¸æ”¯æŒå¹¶å‘è¯»å†™çš„ï¼Œç›´æ¥å¹¶å‘çš„è¯»å†™å¾ˆå®¹æ˜“è§¦å‘ panicã€‚ è§£å†³çš„åŠæ³•æœ‰ä¸¤ä¸ªï¼š è‡ªå·±é…ä¸€æŠŠé” sync.Mutex æˆ–è€…æ›´åŠ è€ƒç©¶ä¸€ç‚¹é…ä¸€æŠŠè¯»å†™é” sync.RWMutexã€‚è¿™ç§æ–¹æ¡ˆç®€çº¦ç›´æ¥ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜æ˜¾ï¼Œå°±æ˜¯æ€§èƒ½ä¸ä¼šå¤ªé«˜ã€‚ ä½¿ç”¨ Go è¯­è¨€åœ¨ 2017 å¹´å‘å¸ƒçš„ Go 1.9 ä¸­æ­£å¼åŠ å…¥äº†å¹¶å‘å®‰å…¨çš„å­—å…¸ç±»å‹ sync.Mapã€‚ å¾ˆæ˜¾ç„¶ï¼Œæ–¹æ¡ˆ 2 æ˜¯ä¼˜é›…ä¸”å®ç”¨çš„ã€‚ä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆå®˜æ–¹çš„ sync.Map èƒ½å¤Ÿåœ¨ lock freeæ— é”å¹¶å‘ çš„å‰æä¸‹ï¼Œä¿è¯è¶³å¤Ÿé«˜çš„æ€§èƒ½â“æœ¬æ–‡ç»“åˆ golang 1.18 æºç è¿›è¡Œç®€å•çš„åˆ†æã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:1:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#èƒŒæ™¯"},{"categories":["golang"],"content":" æ ¸å¿ƒæ€æƒ³å¦‚æœè¦ä¿è¯å¹¶å‘çš„å®‰å…¨ï¼Œæœ€æœ´ç´ çš„æƒ³æ³•å°±æ˜¯ä½¿ç”¨é”ï¼Œä½†æ˜¯è¿™æ„å‘³ç€è¦æŠŠä¸€äº›å¹¶å‘çš„æ“ä½œå¼ºåˆ¶ä¸²è¡ŒåŒ–ï¼Œæ€§èƒ½è‡ªç„¶å°±ä¼šä¸‹é™ã€‚ äº‹å®ä¸Šï¼Œé™¤äº†ä½¿ç”¨é”ï¼Œè¿˜æœ‰ä¸€ä¸ªåŠæ³•ä¹Ÿå¯ä»¥è¾¾åˆ°ç±»ä¼¼å¹¶å‘å®‰å…¨çš„ç›®çš„ï¼Œå°±æ˜¯ atomic åŸå­æ“ä½œã€‚sync.Map çš„è®¾è®¡éå¸¸å·§å¦™ï¼Œå……åˆ†åˆ©ç”¨äº† atmoic å’Œ mutex äº’æ–¥é”çš„é…åˆã€‚ read map ç”±äºæ˜¯åŸå­åŒ…æ‰˜ç®¡ï¼Œä¸»è¦è´Ÿè´£é«˜æ€§èƒ½ï¼Œä½†æ˜¯æ— æ³•ä¿è¯æ‹¥æœ‰å…¨é‡çš„ keyï¼Œå› ä¸ºå¯¹äºæ–°å¢ keyï¼Œä¼šé¦–å…ˆåŠ åˆ° dirty ä¸­ï¼Œæ‰€ä»¥ read æŸç§ç¨‹åº¦ä¸Šï¼Œç±»ä¼¼äºä¸€ä¸ª key çš„å¿«ç…§ï¼Œè¿™ä¸ªå¿«ç…§åœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½æ˜¯å…¨é‡å¿«ç…§ã€‚ dirty map æ‹¥æœ‰å…¨é‡çš„ keyï¼Œå½“ Store æ“ä½œè¦æ–°å¢ä¸€ä¸ªä¹‹å‰ä¸å­˜åœ¨çš„ key çš„æ—¶å€™ï¼Œä¼šå…ˆå¢åŠ åˆ° dirty ä¸­çš„ã€‚ åœ¨æŸ¥æ‰¾æŒ‡å®šçš„ key çš„æ—¶å€™ï¼Œæ€»ä¼šå…ˆå» read map ä¸­å¯»æ‰¾ï¼Œå¹¶ä¸éœ€è¦é”å®šäº’æ–¥é”ã€‚åªæœ‰å½“ read ä¸­æ²¡æœ‰ï¼Œä½† dirty ä¸­å¯èƒ½ä¼šæœ‰è¿™ä¸ª key çš„æ—¶å€™ï¼Œæ‰ä¼šåœ¨é”çš„ä¿æŠ¤ä¸‹å»è®¿é—® dirtyã€‚ åœ¨å­˜å‚¨é”®å€¼å¯¹çš„æ—¶å€™ï¼Œåªè¦ read ä¸­å·²å­˜æœ‰è¿™ä¸ª keyï¼Œå¹¶ä¸”è¯¥é”®å€¼å¯¹æœªè¢«æ ‡è®°ä¸º expungedï¼Œå°±ä¼šæŠŠæ–°å€¼å­˜åˆ°é‡Œé¢å¹¶ç›´æ¥è¿”å›ï¼Œè¿™ç§æƒ…å†µä¸‹ä¹Ÿä¸éœ€è¦ç”¨åˆ°é”ã€‚ read å’Œ dirty ä¹‹é—´æ˜¯ä¼šäº’ç›¸è½¬æ¢çš„ï¼Œåœ¨ dirty ä¸­æŸ¥æ‰¾ key å¯¹æ¬¡æ•°è¶³å¤Ÿå¤šçš„æ—¶å€™ï¼Œsync.Map ä¼šæŠŠ dirty ç›´æ¥ä½œä¸º readï¼Œå³è§¦å‘ dirty-\u003eread çš„è½¬å˜ï¼Œæ­¤æ—¶ read ä¸­æ‹¥æœ‰å…¨é‡çš„ keyã€‚åŒæ—¶åœ¨æŸäº›æƒ…å†µï¼Œä¹Ÿä¼šå‡ºç° read-\u003edirty çš„è½¬å˜ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:2:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#æ ¸å¿ƒæ€æƒ³"},{"categories":["golang"],"content":" æ•°æ®ç»“æ„å°½é‡ä½¿ç”¨åŸå­æ“ä½œï¼Œæœ€å¤§ç¨‹åº¦ä¸Šå‡å°‘äº†é”çš„ä½¿ç”¨ï¼Œä»è€Œæ¥è¿‘äº† lock free çš„æ•ˆæœã€‚ æ•°æ®ç»“æ„ sync.Map ç±»å‹çš„åº•å±‚æ•°æ®ç»“æ„å¦‚ä¸‹ğŸ‘‡ type Map struct { mu Mutex read atomic.Value // readOnly dirty map[any]*entry misses int } // Map.read å±æ€§å®é™…å­˜å‚¨çš„æ˜¯ readOnlyã€‚ type readOnly struct { m map[any]*entry amended bool } muï¼šäº’æ–¥é”ï¼Œç”¨äºä¿æŠ¤ read å’Œ dirtyã€‚ readï¼šåªè¯»æ•°æ®ï¼Œæ”¯æŒå¹¶å‘è¯»å–ï¼ˆatomic.Valueï¼‰ã€‚å¦‚æœæ¶‰åŠåˆ°æ›´æ–°æ“ä½œï¼Œåˆ™åªéœ€è¦åŠ é”æ¥ä¿è¯æ•°æ®å®‰å…¨ã€‚ read å®é™…å­˜å‚¨çš„æ˜¯ readOnly ç»“æ„ä½“ï¼Œå†…éƒ¨ä¹Ÿæ˜¯ä¸€ä¸ªåŸç”Ÿ mapï¼Œamended å±æ€§ç”¨äºæ ‡è®° read å’Œ dirty çš„æ•°æ®æ˜¯å¦ä¸€è‡´ï¼Œå½“ dirty ä¸­å­˜åœ¨ read ä¸­ä¸å­˜åœ¨çš„ key æ—¶ï¼Œamended ä¸º trueã€‚ dirtyï¼šè¯»å†™æ•°æ®ï¼Œæ˜¯ä¸€ä¸ªåŸç”Ÿ mapï¼Œä¹Ÿå°±æ˜¯éçº¿ç¨‹å®‰å…¨ã€‚æ“ä½œ dirty éœ€è¦åŠ é”æ¥ä¿è¯æ•°æ®å®‰å…¨ã€‚ missesï¼šç»Ÿè®¡æœ‰å¤šå°‘æ¬¡è¯»å– read æ²¡æœ‰å‘½ä¸­ã€‚æ¯æ¬¡ read ä¸­è¯»å–å¤±è´¥åï¼Œmisses çš„è®¡æ•°å€¼éƒ½ä¼šåŠ  1ã€‚ åœ¨ read å’Œ dirty ä¸­ï¼Œéƒ½æœ‰æ¶‰åŠåˆ°çš„ç»“æ„ä½“ï¼š type entry struct { p unsafe.Pointer // *any } å…¶åŒ…å«ä¸€ä¸ªæŒ‡é’ˆ p, ç”¨äºæŒ‡å‘ç”¨æˆ·å­˜å‚¨çš„å…ƒç´ ï¼ˆkeyï¼‰æ‰€æŒ‡å‘çš„ value å€¼ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:3:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#æ•°æ®ç»“æ„"},{"categories":["golang"],"content":" atomic.Valueå½“éœ€è¦åœ¨ Go ä¸­è¿›è¡Œå¹¶å‘å®‰å…¨çš„å€¼å­˜å‚¨å’Œè¯»å–æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ sync/atomic åŒ…ä¸­çš„ atomic.Value ç±»å‹ã€‚atomic.Value æä¾›äº†ä¸€ç§åŸå­æ“ä½œçš„æ–¹å¼æ¥å­˜å‚¨å’Œè¯»å–å€¼ï¼Œä»¥ç¡®ä¿åœ¨å¹¶å‘ç¯å¢ƒä¸‹ä¸ä¼šå‡ºç°æ•°æ®ç«äº‰ã€‚ ä»¥ä¸‹æ˜¯å…³äº atomic.Value çš„è¯¦ç»†è¯´æ˜ï¼š åˆ›å»º atomic.Valueï¼š è¦åˆ›å»ºä¸€ä¸ª atomic.Valueï¼Œå¯ä»¥ä½¿ç”¨ sync/atomic åŒ…ä¸­çš„ atomic.Value ç±»å‹çš„é›¶å€¼ã€‚ä¾‹å¦‚ï¼š var v atomic.Value å­˜å‚¨å€¼ï¼š ä½¿ç”¨ Store æ–¹æ³•æ¥å­˜å‚¨ä¸€ä¸ªå€¼åˆ° atomic.Value ä¸­ã€‚è¿™ä¸ªæ“ä½œæ˜¯åŸå­çš„ï¼Œä¸ä¼šå‡ºç°æ•°æ®ç«äº‰ã€‚ v.Store(\"Hello, World!\") è¯»å–å€¼ï¼š ä½¿ç”¨ Load æ–¹æ³•æ¥ä» atomic.Value ä¸­è¯»å–å€¼ã€‚è¿™ä¸ªæ“ä½œä¹Ÿæ˜¯åŸå­çš„ã€‚ value := v.Load() å¹¶å‘å®‰å…¨ï¼š atomic.Value ä¿è¯äº†å­˜å‚¨å’Œè¯»å–çš„æ“ä½œæ˜¯å¹¶å‘å®‰å…¨çš„ï¼Œä¸éœ€è¦é¢å¤–çš„é”æˆ–äº’æ–¥ä½“ã€‚è¿™å¯¹äºåœ¨å¤šä¸ª goroutine ä¹‹é—´å…±äº«æ•°æ®éå¸¸æœ‰ç”¨ã€‚ å€¼çš„ç±»å‹ï¼š atomic.Value å¯ä»¥å­˜å‚¨ä»»ä½•ç±»å‹çš„å€¼ã€‚è¿™æ„å‘³ç€å®ƒå¯ä»¥ç”¨äºå­˜å‚¨å­—ç¬¦ä¸²ã€æ•´æ•°ã€ç»“æ„ä½“ã€åˆ‡ç‰‡ã€æ¥å£ç­‰ä»»ä½• Go ç±»å‹ã€‚ æ³¨æ„äº‹é¡¹ï¼š è™½ç„¶ atomic.Value æä¾›äº†å¹¶å‘å®‰å…¨çš„å­˜å‚¨å’Œè¯»å–ï¼Œä½†å®ƒå¹¶ä¸é€‚ç”¨äºå¤æ‚çš„æ•°æ®ç»“æ„ã€‚å¦‚æœéœ€è¦å¯¹å¤æ‚æ•°æ®ç»“æ„è¿›è¡Œå¹¶å‘è®¿é—®å’Œä¿®æ”¹ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨å…¶ä»–åŒæ­¥æœºåˆ¶ï¼Œå¦‚äº’æ–¥é”ã€‚ å½“ä» atomic.Value ä¸­è¯»å–å€¼æ—¶ï¼Œéœ€è¦è¿›è¡Œç±»å‹æ–­è¨€ï¼Œä»¥å°†æ¥å£ç±»å‹è½¬æ¢ä¸ºå®é™…çš„å€¼ç±»å‹ã€‚è¿™éœ€è¦è°¨æ…å¤„ç†ï¼Œä»¥ç¡®ä¿ç±»å‹å®‰å…¨ã€‚ atomic.Value æ˜¯ Go è¯­è¨€ä¸­ç”¨äºå¹¶å‘å®‰å…¨å€¼å­˜å‚¨å’Œè¯»å–çš„æœ‰ç”¨å·¥å…·ã€‚å®ƒåœ¨ç®€å•çš„å€¼å­˜å‚¨å’Œè¯»å–åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥å¸®åŠ©é¿å…æ•°æ®ç«äº‰é—®é¢˜ã€‚ä½†åœ¨å¤„ç†å¤æ‚æ•°æ®ç»“æ„æˆ–éœ€è¦æ›´å¤æ‚åŒæ­¥çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»–å¹¶å‘æ§åˆ¶æœºåˆ¶ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:4:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#atomicvalue"},{"categories":["golang"],"content":" entry çš„ p å¯èƒ½çŠ¶æ€ p çš„çŠ¶æ€ ","date":"2022-09-14","objectID":"/go-sync-map/:5:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#entry-çš„-p-å¯èƒ½çŠ¶æ€"},{"categories":["golang"],"content":" nilå½“åˆ é™¤ä¸€ä¸ª key æ—¶ï¼Œå¦‚æœ read ä¸­å­˜åœ¨ä¼šæŠŠè¿™ä¸ª key çš„ value ä¹Ÿå°±æ˜¯ e.p æ ‡è®°ä¸º nilã€‚è¿™æ ·åœ¨ä¸‹æ¬¡æŸ¥æ‰¾çš„æ—¶å€™è¿˜ä¼šåœ¨ read ä¸­æ‰¾ä¸ªè¿™ä¸ª keyï¼Œè¿™æ—¶éœ€è¦å»åˆ¤æ–­ä¸‹ e.p æ˜¯å¦æ˜¯ nilï¼Œå¦‚æœæ˜¯ nil å°±è¡¨ç¤ºè¿™ä¸ª key æ˜¯å·²ç»åˆ é™¤çš„ã€‚ å¦‚æœ read ä¸­ä¸å­˜åœ¨ä½†æ˜¯ dirty ä¸­å­˜åœ¨ï¼Œä¼šå…ˆä» dirty ä¸­æŠŠè¿™ä¸ª key åˆ é™¤ï¼Œç„¶åæŠŠè¿™ä¸ª key å¯¹åº”çš„ value ä¹Ÿå°±æ˜¯ e.p æ ‡è®°ä¸º nilã€‚ e.p==nilï¼šentry å·²ç»è¢«æ ‡è®°åˆ é™¤ï¼Œä¸è¿‡æ­¤æ—¶è¿˜æœªç»è¿‡ read-\u003edirty é‡å¡‘ï¼Œæ­¤æ—¶å¯èƒ½ä»ç„¶å±äº dirtyï¼ˆå¦‚æœ dirty é nilï¼‰ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:5:1","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#nil"},{"categories":["golang"],"content":" expungedå½“ dirty-\u003eread å®Œæˆåï¼Œåˆæœ‰æ–° key å†™å…¥æ—¶ï¼Œæ­¤æ—¶ read ä¸­çš„ amended ä¸º falseï¼Œå°±ä¼šè°ƒç”¨ dirtyLocked() æ–¹æ³•ï¼Œæ­¤æ—¶ä¼šå‘ç”Ÿ read-\u003edirty çš„è½¬å˜ï¼Œæ­¤æ—¶ä¼šå¾ªç¯ read æ•°æ®ï¼Œå°† p ä¸ä¸º nil çš„å€¼å†™åˆ° dirty ä¸­ï¼Œå¦‚æœ p ä¸º nil åˆ™å°† nil è½¬ä¸º expungedï¼Œ func (m *Map) dirtyLocked() { if m.dirty != nil { return } read, _ := m.read.Load().(readOnly) m.dirty = make(map[any]*entry, len(read.m)) println(\"read-\u003edirty è½¬å˜\") for k, e := range read.m { // æŠŠ read ä¸­ value e.p ä¸æ˜¯ expunged çš„ key,value è½¬åˆ° dirty ä¸­ // è¿™é‡Œæ˜¯å¾ªç¯ï¼Œå¦‚æœæ•°æ®é‡å¤§å¯èƒ½ä¼šéå¸¸è€—æ—¶ if !e.tryExpungeLocked() { m.dirty[k] = e } } } func (e *entry) tryExpungeLocked() (isExpunged bool) { p := atomic.LoadPointer(\u0026e.p) for p == nil { // å°† e.p çš„ nil è½¬æˆ expunged if atomic.CompareAndSwapPointer(\u0026e.p, nil, expunged) { return true } p = atomic.LoadPointer(\u0026e.p) } return p == expunged } åœ¨ä» read-\u003edirty çš„è½¬å˜ä¸­ï¼Œè™½ç„¶ read ä¸­è¿˜ä¼šå­˜åœ¨ expunged çš„å†…å®¹ï¼ˆexpunged æ˜¯ read ç‹¬æœ‰çš„ï¼‰ï¼Œä½†æ˜¯ä¸å½±å“ sync.map çš„é«˜æ€§èƒ½ã€‚ç›¸åï¼Œå¦‚æœåœ¨ Delete æ—¶ç›´æ¥å»åˆ é™¤å…ƒç´ ï¼Œé‚£ä¹ˆå°±ä¼šå»åŠ é”æ“ä½œ dirtyï¼Œåªè¦æ¶‰åŠåˆ°é”ï¼Œå°±ä¼šå½±å“åˆ°æ€§èƒ½ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:5:2","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#expunged"},{"categories":["golang"],"content":" æ­£å¸¸æ­¤æ—¶ entry æ˜¯ä¸€ä¸ªæ™®é€šçš„å­˜åœ¨çŠ¶æ€ï¼Œå±äº readï¼Œå¦‚æœ dirty é nilï¼Œä¹Ÿå±äº dirtyã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:5:3","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#æ­£å¸¸"},{"categories":["golang"],"content":" Storeå†™å…¥è¿‡ç¨‹å…ˆæ¥çœ‹ expunged var expunged = unsafe.Pointer(new(any)) expunged æ˜¯ä¸€ä¸ªæŒ‡å‘ä»»æ„ç±»å‹çš„æŒ‡é’ˆï¼Œç”¨æ¥æ ‡è®°ä» dirty map ä¸­åˆ é™¤çš„ entryã€‚ sync.Map ç±»å‹çš„ Store æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯æ–°å¢æˆ–æ›´æ–°ä¸€ä¸ªå…ƒç´ ã€‚ func (m *Map) Store(key, value any) { read, _ := m.read.Load().(readOnly) if e, ok := read.m[key]; ok \u0026\u0026 e.tryStore(\u0026value) { return } ... } // tryStore stores a value if the entry has not been expunged. // // If the entry is expunged, tryStore returns false and leaves the entry // unchanged. func (e *entry) tryStore(i *any) bool { for { p := atomic.LoadPointer(\u0026e.p) if p == expunged { return false } if atomic.CompareAndSwapPointer(\u0026e.p, p, unsafe.Pointer(i)) { return true } } } è°ƒç”¨Loadæ–¹æ³•æ£€æŸ¥m.readä¸­æ˜¯å¦å­˜åœ¨è¿™ä¸ªå…ƒç´ ã€‚è‹¥å­˜åœ¨ï¼Œä¸”åœ¨ tryStore æ—¶ï¼Œåˆ¤æ–­æ²¡æœ‰è¢«æ ‡è®°ä¸º expunged åˆ é™¤çŠ¶æ€ï¼Œåˆ™å°è¯•å­˜å‚¨ã€‚ è‹¥è¯¥å…ƒç´ ä¸å­˜åœ¨æˆ–åœ¨ tryStore æ—¶åˆ¤æ–­æ—¶ï¼Œå·²ç»è¢«æ ‡è®°ä¸ºåˆ é™¤çŠ¶æ€ï¼Œåˆ™ç»§ç»­èµ°åˆ°ä¸‹é¢æµç¨‹ğŸ‘‡ func (m *Map) Store(key, value any) { ... m.mu.Lock() read, _ = m.read.Load().(readOnly) if e, ok := read.m[key]; ok { if e.unexpungeLocked() { // å¦‚æœ read map ä¸­å­˜åœ¨è¯¥ keyï¼Œä½† p == expungedï¼Œåˆ™è¯´æ˜åœ¨ read ä¸­å·²ç»è¢«åˆ é™¤äº†: // a. å°† p çš„çŠ¶æ€ç”±ä¸­é—´å€¼ expunged æ›´æ”¹ä¸º nil // b. dirty map æ’å…¥ key m.dirty[key] = e } // æ›´æ–° entry.p = value (read map å’Œ dirty map æŒ‡å‘åŒä¸€ä¸ª entry) e.storeLocked(\u0026value) } else if e, ok := m.dirty[key]; ok { // å¦‚æœ read map ä¸­ä¸å­˜åœ¨è¯¥ keyï¼Œä½† dirty map ä¸­å­˜åœ¨è¯¥ keyï¼Œç›´æ¥å†™å…¥æ›´æ–° entry(read map ä¸­ä»ç„¶æ²¡æœ‰è¿™ä¸ª key) e.storeLocked(\u0026value) } else { // å¦‚æœ read map å’Œ dirty map ä¸­éƒ½ä¸å­˜åœ¨è¯¥ keyï¼Œåˆ™ï¼š // a. å¦‚æœ dirty map ä¸ºç©ºï¼Œåˆ™éœ€è¦åˆ›å»º dirty mapï¼Œå¹¶ä» read map ä¸­æ‹·è´æœªåˆ é™¤çš„å…ƒç´ åˆ°æ–°åˆ›å»ºçš„ dirty map // b. æ›´æ–° amended å­—æ®µï¼Œæ ‡è¯† dirty map ä¸­å­˜åœ¨ read map ä¸­æ²¡æœ‰çš„ key // c. å°† kv å†™å…¥ dirty map ä¸­ï¼Œread ä¸å˜ if !read.amended { // åˆ°è¿™é‡Œå°±æ„å‘³ç€ï¼Œå½“å‰çš„ key æ˜¯ç¬¬ä¸€æ¬¡è¢«åŠ åˆ° dirty map ä¸­ã€‚ // store ä¹‹å‰å…ˆåˆ¤æ–­ä¸€ä¸‹ dirty map æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œå°±æŠŠ read map æµ…æ‹·è´ä¸€æ¬¡ã€‚ m.dirtyLocked() m.read.Store(readOnly{m: read.m, amended: true}) } // å†™å…¥æ–° keyï¼Œåœ¨ dirty ä¸­å­˜å‚¨ value m.dirty[key] = newEntry(value) } m.mu.Unlock() } func (m *Map) dirtyLocked() { if m.dirty != nil { return } read, _ := m.read.Load().(readOnly) m.dirty = make(map[any]*entry, len(read.m)) for k, e := range read.m { if !e.tryExpungeLocked() { m.dirty[k] = e } } } func (e *entry) tryExpungeLocked() (isExpunged bool) { p := atomic.LoadPointer(\u0026e.p) for p == nil { // å°†å·²ç»åˆ é™¤æ ‡è®°ä¸ºnilçš„æ•°æ®æ ‡è®°ä¸º expunged if atomic.CompareAndSwapPointer(\u0026e.p, nil, expunged) { return true } p = atomic.LoadPointer(\u0026e.p) } return p == expunged } è¿™é‡Œä½¿ç”¨äº†åŒæ£€æŸ¥çš„å¤„ç†ï¼Œå› ä¸ºåœ¨ä¸‹é¢çš„ä¸¤ä¸ªè¯­å¥ä¸­ï¼Œè¿™ä¸¤è¡Œè¯­å¥å¹¶ä¸æ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚ if !ok \u0026\u0026 read.amended { m.mu.Lock() è™½ç„¶ç¬¬ä¸€å¥æ‰§è¡Œçš„æ—¶å€™æ¡ä»¶æ»¡è¶³ï¼Œä½†æ˜¯åœ¨åŠ é”ä¹‹å‰ï¼Œm.dirty å¯èƒ½è¢«æå‡ä¸º m.readï¼Œæ‰€ä»¥åŠ é”åè¿˜å¾—å†æ£€æŸ¥ä¸€æ¬¡ m.readï¼Œåç»­çš„æ–¹æ³•ä¸­éƒ½ä½¿ç”¨äº†è¿™ä¸ªæ–¹æ³•ã€‚ ç”±äºå·²ç»èµ°åˆ°äº† dirty çš„æµç¨‹ï¼Œå› æ­¤å¼€å¤´å°±ç›´æ¥è°ƒç”¨äº† Lock æ–¹æ³•ä¸Šäº’æ–¥é”ï¼Œä¿è¯æ•°æ®å®‰å…¨ï¼Œä¹Ÿæ˜¯å‡¸æ˜¾æ€§èƒ½å˜å·®çš„ç¬¬ä¸€å¹•ã€‚ å†™å…¥è¿‡ç¨‹çš„æ•´ä½“æµç¨‹æ˜¯ğŸ‘‡ å¦‚æœåœ¨ read é‡Œèƒ½å¤Ÿæ‰¾åˆ°å¾…å­˜å‚¨çš„ keyï¼Œå¹¶ä¸”å¯¹åº”çš„ entry çš„ p å€¼ä¸ä¸º expungedï¼Œä¹Ÿå°±æ˜¯æ²¡è¢«åˆ é™¤æ—¶ï¼Œç›´æ¥æ›´æ–°å¯¹åº”çš„ entry å³å¯ã€‚ å¦‚æœç¬¬ä¸€æ­¥æ²¡æœ‰æˆåŠŸï¼Œè¦ä¹ˆ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œè¦ä¹ˆ key è¢«æ ‡è®°ä¸ºåˆ é™¤ã€‚åˆ™å…ˆåŠ é”ï¼Œå†è¿›è¡Œåç»­çš„æ“ä½œã€‚ å†æ¬¡åœ¨ read ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¿™ä¸ª keyï¼Œä¹Ÿå°±æ˜¯ double check åŒæ£€æŸ¥ä¸€ä¸‹ï¼Œè¿™æ˜¯ lock-free ç¼–ç¨‹çš„å¸¸è§å¥—è·¯ã€‚å¦‚æœ read ä¸­å­˜åœ¨è¯¥ keyï¼Œä½† p == expungedï¼Œè¯´æ˜ m.dirty != nilï¼ˆm.dirty æ˜¯è¢«åˆå§‹åŒ–è¿‡çš„ï¼‰å¹¶ä¸” m.dirty ä¸­ä¸å­˜åœ¨è¯¥ key å€¼ï¼ˆå› ä¸ºå·²ç»è¢«åˆ é™¤äº†ï¼Œdirty ä¸­çš„åˆ é™¤ç›´æ¥å°±åˆ é™¤äº†ï¼›read ä¸­çš„åˆ é™¤ï¼Œä¼šå…ˆæ ‡è®°ä¸º nilï¼Œread-\u003edirty é‡å¡‘æ—¶å†æ ‡è®°ä¸º expungedï¼‰ï¼Œæ­¤æ—¶ğŸ‘‡ å°† p çš„çŠ¶æ€ç”± expunged æ›´æ”¹ä¸º nil dirty map æ’å…¥ keyã€‚ç„¶åï¼Œç›´æ¥æ›´æ–°å¯¹åº”çš„ value å¦‚æœ read ä¸­æ²¡æœ‰æ­¤ keyï¼Œé‚£å°±æŸ¥çœ‹ dirty ä¸­æ˜¯å¦æœ‰æ­¤ keyï¼Œå¦‚æœæœ‰ï¼Œåˆ™ç›´æ¥æ›´æ–°å¯¹åº”çš„ valueï¼Œè¿™æ—¶ read ä¸­è¿˜æ˜¯æ²¡æœ‰æ­¤ keyã€‚ æœ€åä¸€æ­¥ï¼Œå¦‚æœ read å’Œ dirty ä¸­éƒ½ä¸å­˜åœ¨è¯¥ keyï¼Œåˆ™ğŸ‘‡ å¦‚æœ dirty ä¸ºç©ºï¼Œåˆ™éœ€è¦åˆ›å»º dirtyï¼Œå¹¶ä» read ä¸­æ‹·è´æœªè¢«åˆ é™¤çš„å…ƒç´  æ›´æ–° amended å­—æ®µä¸º trueï¼Œæ ‡è¯† dirty map ä¸­å­˜åœ¨ read map ä¸­æ²¡æœ‰çš„ key å°† k-v å†™å…¥ dirty map ä¸­ï¼Œread.m ä¸å˜ã€‚æœ€åï¼Œæ›´æ–°æ­¤ key å¯¹åº”çš„ valueã€‚ ä¸ºä»€ä¹ˆ read ä¸­å­˜åœ¨ keyï¼Œä½†æ˜¯ p == expunged æ—¶éœ€è¦æŠŠ p çš„çŠ¶æ€ç”± expunged æ›´æ”¹ä¸º nil â“ expunged çš„æ„ä¹‰æ˜¯åœ¨åˆ é™¤æ“ä½œåï¼Œé”®çš„å¯¹åº”å€¼è¢«æ ‡è®°ä¸º expungedï¼Œè€Œä¸æ˜¯ç®€å•åœ°è®¾ç½®ä¸º nilã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œnil å€¼å¯èƒ½æ˜¯é”®æœ¬èº«çš„æœ‰æ•ˆå€¼ï¼Œå› æ­¤æ— æ³•åŒºåˆ†é”®å·²è¢«åˆ é™¤å’Œé”®å¯¹åº”çš„å€¼ä¸º nil ä¸¤ç§æƒ…å†µã€‚é€šè¿‡ä½¿ç”¨ expunged æ ‡è®°ï¼Œsync.Map å¯ä»¥æ¸…æ¥šåœ°åŒºåˆ†é”®è¢«åˆ é™¤å’Œé”®å¯¹åº”çš„å€¼ä¸º nilã€‚ if e.unexpungeLocked() { // The entry was previously expunged, which implies that there is a // non-nil dirty map and this entry is not in it. m.dirty[key] = e } e.storeLocked(\u0026value) // storeLocked unconditionally stores a value to the entry. // // The entry must be known not to be expunged. func (e *entry) storeLocked(i *any) { atomic.StorePointer(\u0026e.p, unsafe.Pointer(i)) } Store å¯èƒ½ä¼šåœ¨æŸç§æƒ…å†µä¸‹ï¼ˆåˆå§‹åŒ–æˆ–è€… m.dirty åˆšè¢«æå‡åï¼Œæ­¤æ—¶ m.read ä¸­çš„æ•°æ®å’Œ m.dirty ä¸­çš„ç›¸ç­‰ï¼ŒreadOnly ä¸­çš„ amended ä¸º falseï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½å­˜åœ¨ä¸€ä¸ª keyï¼Œread ä¸­æ‰¾ä¸åˆ° dirty ä¸­ä¹Ÿæ‰¾ä¸åˆ°ï¼‰ä» m.read ä¸­å¤åˆ¶æ•°æ®ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ m.read ä¸­æ•°æ®é‡éå¸¸å¤§ï¼Œå¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚ ç»¼ä¸Šï¼Œsync.Map ç±»å‹ä¸é€‚åˆå†™å¤šçš„åœºæ™¯ï¼Œè¯»å¤šå†™å°‘æ˜¯æ¯”è¾ƒå¥½çš„ã€‚è‹¥æœ‰å¤§æ•°æ®é‡çš„åœºæ™¯ï¼Œåˆ™éœ€è¦è€ƒè™‘ read å¤åˆ¶æ•°æ®æ—¶çš„å¶ç„¶æ€§èƒ½æŠ–åŠ¨æ˜¯å¦èƒ½å¤Ÿæ¥å—ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:6:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#storeå†™å…¥è¿‡ç¨‹"},{"categories":["golang"],"content":" LoadæŸ¥æ‰¾è¿‡ç¨‹sync.Map ç±»å‹æœ¬è´¨ä¸Šæ˜¯æœ‰ä¸¤ä¸ª mapã€‚ä¸€ä¸ªå« readã€ä¸€ä¸ªå« dirtyï¼Œé•¿çš„ä¹Ÿå·®ä¸å¤šğŸ‘‡ sync.map å½“ä» sync.Map ç±»å‹ä¸­è¯»å–æ•°æ®æ—¶ï¼Œå…¶ä¼šå…ˆæŸ¥çœ‹ read ä¸­æ˜¯å¦åŒ…å«æ‰€éœ€çš„å…ƒç´ ï¼š è‹¥æœ‰ï¼Œåˆ™é€šè¿‡ atomic åŸå­æ“ä½œè¯»å–æ•°æ®å¹¶è¿”å›ã€‚ è‹¥æ— ï¼Œåˆ™ä¼šåˆ¤æ–­ read.readOnly ä¸­çš„ amended å±æ€§ï¼Œä»–ä¼šå‘Šè¯‰ç¨‹åºï¼Œdirty æ˜¯å¦åŒ…å« read.readOnly.m ä¸­æ²¡æœ‰çš„æ•°æ®ï¼›å¦‚æœå­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯ amended ä¸º trueï¼Œå°†ä¼šè¿› ä¸€æ­¥åˆ° dirty ä¸­æŸ¥æ‰¾æ•°æ®ã€‚ func (m *Map) Load(key any) (value any, ok bool) { // 1.é¦–å…ˆä» m.read ä¸­å¾—åˆ°åªè¯» readOnly,ä»å®ƒçš„ map ä¸­æŸ¥æ‰¾ï¼Œä¸éœ€è¦åŠ é” read, _ := m.read.Load().(readOnly) e, ok := read.m[key] // 2. å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå¹¶ä¸” m.dirty ä¸­æœ‰æ–°æ•°æ®ï¼Œéœ€è¦ä» m.dirty æŸ¥æ‰¾ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦åŠ é” if !ok \u0026\u0026 read.amended { m.mu.Lock() // åŒæ£€æŸ¥ï¼Œé¿å…åŠ é”çš„æ—¶å€™ m.dirty æå‡ä¸º m.read,è¿™ä¸ªæ—¶å€™ m.read å¯èƒ½è¢«æ›¿æ¢äº†ã€‚ read, _ = m.read.Load().(readOnly) e, ok = read.m[key] // å¦‚æœm.readä¸­è¿˜æ˜¯ä¸å­˜åœ¨ï¼Œå¹¶ä¸”m.dirtyä¸­æœ‰æ–°æ•°æ® if !ok \u0026\u0026 read.amended { // ä»m.dirtyæŸ¥æ‰¾ e, ok = m.dirty[key] // ä¸ç®¡ m.dirty ä¸­å­˜ä¸å­˜åœ¨ï¼Œéƒ½å°† misses è®¡æ•°åŠ ä¸€ // missLocked()ä¸­æ»¡è¶³æ¡ä»¶åå°±ä¼šæå‡ m.dirty m.missLocked() } m.mu.Unlock() } if !ok { return nil, false } return e.load() } å¤„ç†è·¯å¾„åˆ†ä¸º fast path å’Œ slow pathï¼Œæ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š é¦–å…ˆæ˜¯ fast pathï¼Œç›´æ¥åœ¨ read ä¸­æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°äº†ç›´æ¥è°ƒç”¨ entry çš„ load æ–¹æ³•ï¼Œå–å‡ºå…¶ä¸­çš„å€¼ã€‚ å¦‚æœ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œä¸” amended ä¸º falseï¼Œè¯´æ˜ dirty ä¸ºç©ºï¼Œé‚£ç›´æ¥è¿”å›ç©ºå’Œ falseã€‚ å¦‚æœ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œä¸” amended ä¸º trueï¼Œè¯´æ˜ dirty ä¸­å¯èƒ½å­˜åœ¨æˆ‘ä»¬è¦æ‰¾çš„ keyã€‚è¦å…ˆä¸Šé”ï¼Œå†å°è¯•å» dirty ä¸­æŸ¥æ‰¾ã€‚åœ¨è¿™ä¹‹å‰ï¼Œä»ç„¶æœ‰ä¸€ä¸ª double check çš„æ“ä½œã€‚è‹¥è¿˜æ˜¯æ²¡æœ‰åœ¨ read ä¸­æ‰¾åˆ°ï¼Œé‚£ä¹ˆå°±ä» dirty ä¸­æ‰¾ã€‚ä¸ç®¡ dirty ä¸­æœ‰æ²¡æœ‰æ‰¾åˆ°ï¼Œéƒ½è¦ â€œè®°ä¸€ç¬”â€ï¼Œå› ä¸ºåœ¨ dirty è¢«æå‡ä¸º read ä¹‹å‰ï¼Œéƒ½ä¼šè¿›å…¥è¿™æ¡è·¯å¾„ é‚£ä¹ˆ m.dirty æ˜¯å¦‚ä½•è¢«æå‡çš„â“ missLocked æ–¹æ³•ä¸­å¯èƒ½ä¼šå°† m.dirty æå‡ã€‚ func (m *Map) missLocked() { m.misses++ // ä¸ç®¡åœ¨ dirty ä¸­æ²¡æœ‰è¯»åˆ°ï¼Œmiss éƒ½æ‰§è¡Œ ++ æ“ä½œ if m.misses \u003c len(m.dirty) { return } // å¦‚æœ miss çš„å€¼ \u003e= len(dirty)ï¼Œå°† dirty èµ‹ç»™ read, dirty å’Œ miss é‡æ–°åˆå§‹åŒ– // æ­¤æ—¶ dirty å°±ä¸ºç©ºäº†ï¼Œè¯´æ˜ä» dirty å…¨éƒ¨è¿‡æ¸¡åˆ°äº† read, æ­¤æ—¶ read æ˜¯å…¨é‡çš„ m.read.Store(readOnly{m: m.dirty}) m.dirty = nil m.misses = 0 } ç›´æ¥å°† misses çš„å€¼åŠ  1ï¼Œè¡¨ç¤ºä¸€æ¬¡æœªå‘½ä¸­ï¼Œå¦‚æœ misses å€¼å°äº m.dirty çš„é•¿åº¦ï¼Œå°±ç›´æ¥è¿”å›ã€‚å¦åˆ™ï¼Œå°† m.dirty æ™‹å‡ä¸º readï¼Œå¹¶æ¸…ç©º dirtyï¼Œæ¸…ç©º misses è®¡æ•°å€¼ï¼Œå¹¶ä¸” m.read.amended ä¸º falseã€‚è¿™æ ·ï¼Œä¹‹å‰ä¸€æ®µæ—¶é—´æ–°åŠ å…¥çš„ key éƒ½ä¼šè¿›å…¥åˆ° read ä¸­ï¼Œä»è€Œèƒ½å¤Ÿæå‡ read çš„å‘½ä¸­ç‡ã€‚ å†æ¥çœ‹ä¸‹ entry çš„ load æ–¹æ³•ï¼š func (e *entry) load() (value any, ok bool) { p := atomic.LoadPointer(\u0026e.p) if p == nil || p == expunged { return nil, false } return *(*any)(p), true } å¯¹äº nil å’Œ expunged çŠ¶æ€çš„ entryï¼Œç›´æ¥è¿”å› ok=falseï¼›å¦åˆ™ï¼Œå°† p è½¬æˆ any è¿”å›ã€‚ sync.Map çš„è¯»æ“ä½œæ€§èƒ½å¦‚æ­¤ä¹‹é«˜çš„åŸå› ï¼Œå°±åœ¨äºå­˜åœ¨ read è¿™ä¸€å·§å¦™çš„è®¾è®¡ï¼Œå…¶ä½œä¸ºä¸€ä¸ªç¼“å­˜å±‚ï¼Œæä¾›äº†å¿«è·¯å¾„fast pathçš„æŸ¥æ‰¾ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:7:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#loadæŸ¥æ‰¾è¿‡ç¨‹"},{"categories":["golang"],"content":" Deleteåˆ é™¤è¿‡ç¨‹å†™å…¥è¿‡ç¨‹ï¼Œç†è®ºä¸Šå’Œåˆ é™¤ä¸ä¼šå·®å¤ªè¿œã€‚æ€ä¹ˆ sync.Map ç±»å‹çš„åˆ é™¤çš„æ€§èƒ½ä¼¼ä¹è¿˜è¡Œï¼Œé‚£è¿™é‡Œé¢åˆ°åº•æ˜¯å¦‚ä½•å®ç°çš„å‘¢â“ func (m *Map) Delete(key any) { read, _ := m.read.Load().(readOnly) e, ok := read.m[key] // å¦‚æœ read ä¸­æ²¡æœ‰è¿™ä¸ª keyï¼Œä¸” dirty map ä¸ä¸ºç©º if !ok \u0026\u0026 read.amended { m.mu.Lock() read, _ = m.read.Load().(readOnly) e, ok = read.m[key] if !ok \u0026\u0026 read.amended { delete(m.dirty, key) // ç›´æ¥ä» dirty ä¸­åˆ é™¤è¿™ä¸ª key } m.mu.Unlock() } if ok { e.delete() // å¦‚æœåœ¨ read ä¸­æ‰¾åˆ°äº†è¿™ä¸ª keyï¼Œå°† p ç½®ä¸º nil } } ç¬¬ä¸€ç§æƒ…å†µï¼šå¯ä»¥çœ‹åˆ°ï¼Œå…ˆä» read é‡ŒæŸ¥æ˜¯å¦æœ‰è¿™ä¸ª keyï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œ e.delete æ–¹æ³•ï¼Œå°† p ç½®ä¸º nilï¼Œè¿™æ · read å’Œ dirty éƒ½èƒ½çœ‹åˆ°è¿™ä¸ªå˜åŒ–ï¼Œå› ä¸ºå®ƒä»¬æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜åœ°å€ã€‚ æ•°æ®ç»“æ„ ä»¥ä¸‹æ˜¯entry.deleteæ–¹æ³•ï¼š func (e *entry) delete() (hadValue bool) { for { p := atomic.LoadPointer(\u0026e.p) if p == nil || p == expunged { return false } if atomic.CompareAndSwapPointer(\u0026e.p, p, nil) { return true } } } å®ƒçœŸæ­£åšçš„äº‹æƒ…æ˜¯å°†æ­£å¸¸çŠ¶æ€ï¼ˆæŒ‡å‘ä¸€ä¸ª anyï¼‰çš„ p è®¾ç½®æˆ nilã€‚æ²¡æœ‰è®¾ç½®æˆ expunged çš„åŸå› æ˜¯ï¼Œå½“ p ä¸º expunged æ—¶ï¼Œè¡¨ç¤ºå®ƒå·²ç»ä¸åœ¨ dirty ä¸­äº†ï¼Œè¿™æ˜¯ p çš„çŠ¶æ€å†³å®šçš„ï¼Œåœ¨ tryExpungeLocked å‡½æ•°ä¸­ï¼Œä¼šå°† nil åŸå­åœ°è®¾ç½®æˆ expungedã€‚ tryExpungeLocked æ˜¯åœ¨æ–°åˆ›å»º dirty æ—¶è°ƒç”¨çš„ï¼Œä¼šå°†å·²è¢«åˆ é™¤çš„ entry.p ä» nil æ”¹æˆ expungedï¼Œè¿™ä¸ª entry å°±ä¸ä¼šå†™å…¥ dirty äº†ã€‚ func (e *entry) tryExpungeLocked() (isExpunged bool) { p := atomic.LoadPointer(\u0026e.p) for p == nil { // å¦‚æœåŸæ¥æ˜¯ nilï¼Œè¯´æ˜åŸ key å·²è¢«åˆ é™¤ï¼Œåˆ™å°†å…¶è½¬ä¸º expungedã€‚ if atomic.CompareAndSwapPointer(\u0026e.p, nil, expunged) { return true } p = atomic.LoadPointer(\u0026e.p) } return p == expunged } ç¬¬äºŒç§æƒ…å†µï¼šå¦‚æœæ²¡åœ¨ read ä¸­æ‰¾åˆ°è¿™ä¸ª keyï¼Œå¹¶ä¸” dirty ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆå°±è¦æ“ä½œ dirty äº†ï¼Œæ“ä½œä¹‹å‰ï¼Œè¿˜æ˜¯è¦å…ˆä¸Šé”ã€‚ç„¶åè¿›è¡Œ double checkï¼Œå¦‚æœä»ç„¶æ²¡æœ‰åœ¨ read é‡Œæ‰¾åˆ°æ­¤ keyï¼Œåˆ™ä» dirty ä¸­åˆ æ‰è¿™ä¸ª keyã€‚ æ³¨æ„åˆ°å¦‚æœ key åŒæ—¶å­˜åœ¨äº read å’Œ dirty ä¸­æ—¶ï¼Œåˆ é™¤åªæ˜¯åšäº†ä¸€ä¸ªæ ‡è®°ï¼Œå°† p ç½®ä¸º nilï¼›è€Œå¦‚æœä»…åœ¨ dirty ä¸­å«æœ‰è¿™ä¸ª key æ—¶ï¼Œä¼šç›´æ¥åˆ é™¤è¿™ä¸ª keyã€‚åŸå› åœ¨äºï¼Œè‹¥ä¸¤è€…éƒ½å­˜åœ¨è¿™ä¸ª keyï¼Œä»…åšæ ‡è®°åˆ é™¤ï¼Œå¯ä»¥åœ¨ä¸‹æ¬¡æŸ¥æ‰¾è¿™ä¸ª key æ—¶ï¼Œå‘½ä¸­ readï¼Œæå‡æ•ˆç‡ã€‚è‹¥åªæœ‰åœ¨ dirty ä¸­å­˜åœ¨æ—¶ï¼Œread èµ·ä¸åˆ° â€œç¼“å­˜â€ çš„ä½œç”¨ï¼Œç›´æ¥åˆ é™¤ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:8:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#deleteåˆ é™¤è¿‡ç¨‹"},{"categories":["golang"],"content":" dirtyå’Œreadäº’è½¬ï¼Œåˆ†åˆ«åœ¨ä»€ä¹ˆæ ·çš„æ—¶æœºä¸‹è¿›è¡Œ dirty-\u003ereadï¼šéšç€ load çš„ miss ä¸æ–­è‡ªå¢ï¼Œè¾¾åˆ°é˜ˆå€¼ï¼ˆm.misses \u003e= len(m.dirty)ï¼‰åè§¦å‘å‡çº§è½¬å‚¨ã€‚ read-\u003edirtyï¼šå½“æœ‰ read ä¸­ä¸å­˜åœ¨çš„æ–° key éœ€è¦å¢åŠ ï¼Œä¸” read å’Œ dirty ä¸€è‡´çš„æ—¶å€™ï¼Œè§¦å‘é‡å¡‘ï¼Œä¸” read.amended è®¾ç½®ä¸º trueï¼Œç„¶åå†åœ¨ dirty ä¸­æ–°å¢ã€‚é‡å¡‘çš„è¿‡ç¨‹ï¼Œä¼šå°† nil çŠ¶æ€çš„ entryï¼Œå…¨éƒ¨è½¬æ¢ä¸º expunged çŠ¶æ€ä¸­ï¼ŒåŒæ—¶å°†é expunged çš„ entry æµ…æ‹·è´åˆ° dirty ä¸­ï¼Œè¿™æ ·å¯ä»¥é¿å… read çš„ key æ— é™çš„è†¨èƒ€ï¼ˆå­˜åœ¨å¤§é‡é€»è¾‘åˆ é™¤çš„ keyï¼‰ã€‚æœ€ç»ˆï¼Œåœ¨ dirty å†æ¬¡å‡çº§ä¸º read çš„æ—¶å€™ï¼Œè¿™äº›é€»è¾‘åˆ é™¤çš„ key å°±å¯ä»¥ä¸€æ¬¡æ€§ä¸¢å¼ƒé‡Šæ”¾ï¼ˆå› ä¸ºæ˜¯ç›´æ¥è¦†ç›–ä¸Šå»ï¼‰ã€‚ if !read.amended { // We're adding the first new key to the dirty map. // Make sure it is allocated and mark the read-only map as incomplete. m.dirtyLocked() m.read.Store(readOnly{m: read.m, amended: true}) } read-\u003edirty ","date":"2022-09-14","objectID":"/go-sync-map/:9:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#dirtyå’Œreadäº’è½¬åˆ†åˆ«åœ¨ä»€ä¹ˆæ ·çš„æ—¶æœºä¸‹è¿›è¡Œ"},{"categories":["golang"],"content":" readä»ä½•è€Œæ¥ï¼Œå­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ read æ˜¯ç”± dirty å‡çº§è€Œæ¥ï¼Œæ˜¯åˆ©ç”¨äº† atomic.Store ä¸€æ¬¡æ€§è¦†ç›–ï¼Œè€Œä¸æ˜¯ä¸€ç‚¹ç‚¹çš„ set æ“ä½œå‡ºæ¥çš„ã€‚æ‰€ä»¥ï¼Œread æ›´åƒæ˜¯ä¸€ä¸ªå¿«ç…§ï¼Œread ä¸­ key çš„é›†åˆä¸èƒ½è¢«æ”¹å˜ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œè¯´çš„ read çš„ key ä¸å¯æ”¹å˜ï¼Œä¸ä»£è¡¨æŒ‡å®šçš„ key çš„ value ä¸å¯æ”¹å˜ï¼Œvalue æ˜¯å¯ä»¥é€šè¿‡åŸå­ CAS æ¥è¿›è¡Œæ›´æ”¹çš„ï¼‰ï¼Œæ‰€ä»¥å…¶ä¸­çš„é”®çš„é›†åˆæœ‰æ—¶å€™å¯èƒ½æ˜¯ä¸å…¨çš„ã€‚ è„å­—å…¸ä¸­çš„é”®å€¼å¯¹é›†åˆæ€»æ˜¯å®Œå…¨çš„ï¼Œä½†æ˜¯å…¶ä¸­ä¸ä¼šåŒ…å« expunged çš„é”®å€¼å¯¹ã€‚ read çš„å­˜åœ¨ä»·å€¼ï¼Œåœ¨äºåŠ é€Ÿè¯»æ€§èƒ½ï¼ˆé€šè¿‡åŸå­æ“ä½œé¿å…äº†é”ï¼‰ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:10:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#readä»ä½•è€Œæ¥å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ"},{"categories":["golang"],"content":" dirtyä»€ä¹ˆæ—¶å€™æ˜¯nildirty æ•°æ®æå‡ä¸º read æ—¶ m.dirty ä¼šç½®ä¸º nilã€‚æ­¤æ—¶ï¼Œm.read å’Œ m.dirty ç›¸ç­‰ï¼Œm.amended ä¸º falseï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œread ä¸­æ‰¾ä¸åˆ°çš„æ•°æ®ï¼Œdirty ä¸­åŒæ ·æ‰¾ä¸åˆ°ã€‚ amended bool // true if the dirty map contains some key not in m. func (m *Map) missLocked() { m.misses++ if m.misses \u003c len(m.dirty) { return } m.read.Store(readOnly{m: m.dirty}) m.dirty = nil m.misses = 0 } ","date":"2022-09-14","objectID":"/go-sync-map/:11:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#dirtyä»€ä¹ˆæ—¶å€™æ˜¯nil"},{"categories":["golang"],"content":" åˆ é™¤æ—¶ e.p è®¾ç½®æˆäº† nil è¿˜æ˜¯ expunged func (m *Map) Delete(key any) { m.LoadAndDelete(key) } func (m *Map) LoadAndDelete(key any) (value any, loaded bool) { read, _ := m.read.Load().(readOnly) e, ok := read.m[key] // å¦‚æœ read ä¸­ä¸å­˜åœ¨è¿™ä¸ª key å¹¶ä¸” dirty map ä¸­å­˜åœ¨è¿™ä¸ª key if !ok \u0026\u0026 read.amended { m.mu.Lock() read, _ = m.read.Load().(readOnly) e, ok = read.m[key] if !ok \u0026\u0026 read.amended { e, ok = m.dirty[key] delete(m.dirty, key) // ç›´æ¥åˆ é™¤ dirty ä¸­çš„ keyï¼Œä¸ç®¡ dirty ä¸­å­˜ä¸å­˜åœ¨ // Regardless of whether the entry was present, record a miss: this key // will take the slow path until the dirty map is promoted to the read // map. m.missLocked() } m.mu.Unlock() } // read ä¸­å­˜åœ¨æˆ–æ˜¯ dirty ä¸­å­˜åœ¨éƒ½ä¼šèµ°åˆ°è¿™é‡Œ,æ‰§è¡Œ e.delete() if ok { return e.delete() } return nil, false } func (e *entry) delete() (value any, ok bool) { for { p := atomic.LoadPointer(\u0026e.p) if p == nil || p == expunged { return nil, false } // æŠŠ entry ä¸­çš„ p è½¬æˆ nilï¼Œè¡¨ç¤ºå·²ç»åˆ é™¤ if atomic.CompareAndSwapPointer(\u0026e.p, p, nil) { // *(*any)(p) çš„ä½œç”¨æ˜¯å°†æŒ‡é’ˆ p æŒ‡å‘çš„æ•°æ®è½¬æ¢ä¸º any ç±»å‹ï¼Œå¹¶ä¸”è§£å¼•ç”¨è¯¥æŒ‡é’ˆï¼Œä»¥ä¾¿è®¿é—® any ç±»å‹çš„å€¼ã€‚ return *(*any)(p), true } } } ç”±æºç å¯çŸ¥ï¼Œä¸ç®¡ key æ˜¯åœ¨ read ä¸­è¿˜æ˜¯ dirty ä¸­ï¼Œæœ€åéƒ½è°ƒç”¨äº† e.delete() æ–¹æ³•ï¼Œå°† e.p è®¾ç½®ä¸º nilã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:12:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#åˆ é™¤æ—¶-ep-è®¾ç½®æˆäº†-nil-è¿˜æ˜¯-expunged"},{"categories":["golang"],"content":" ä»€ä¹ˆæ—¶å€™ e.p ç”± nil å˜æˆ expunged read-\u003edirty é‡å¡‘çš„æ—¶å€™ï¼Œæ­¤æ—¶ read ä¸­ä»ç„¶æ˜¯ nil çš„ä¼šå˜æˆ expungedï¼Œè¡¨ç¤ºè¿™éƒ¨åˆ† key ç­‰å¾…è¢«æœ€ç»ˆä¸¢å¼ƒï¼ˆexpunged æ˜¯æœ€ç»ˆæ€ï¼Œç­‰å¾…è¢«ä¸¢å¼ƒï¼Œé™¤éåˆå‡ºç°äº†é‡æ–° Store çš„æƒ…å†µï¼‰ // åˆ¤æ–­ e.p æ˜¯ä¸æ˜¯ expunged, å¦‚æœæ˜¯ e.p æ˜¯ nil åˆ™è½¬ä¸º expunged func (e *entry) tryExpungeLocked() (isExpunged bool) { p := atomic.LoadPointer(\u0026e.p) for p == nil { // å°† e.p çš„ nil è½¬æˆ expunged if atomic.CompareAndSwapPointer(\u0026e.p, nil, expunged) { return true } p = atomic.LoadPointer(\u0026e.p) } return p == expunged } æœ€ç»ˆä¸¢å¼ƒçš„æ—¶æœºå°±æ˜¯ dirty-\u003eread å‡çº§çš„æ—¶å€™ï¼Œdirty çš„ç›´æ¥ç²—æš´è¦†ç›–ï¼Œä¼šä½¿å¾— read ä¸­çš„æ‰€æœ‰æˆå‘˜éƒ½è¢«ä¸¢å¼ƒï¼ŒåŒ…æ‹¬ expungedã€‚ func (m *Map) missLocked() { m.misses++ // ä¸ç®¡åœ¨ dirty ä¸­æ²¡æœ‰è¯»åˆ°ï¼Œmiss éƒ½æ‰§è¡Œ ++ æ“ä½œ if m.misses \u003c len(m.dirty) { return } // å¦‚æœ miss çš„å€¼ \u003e= len(dirty)ï¼Œå°† dirty èµ‹ç»™ read, dirty å’Œ miss é‡æ–°åˆå§‹åŒ– // æ­¤æ—¶ dirty å°±ä¸ºç©ºäº†ï¼Œè¯´æ˜ä» dirty å…¨éƒ¨è¿‡æ¸¡åˆ°äº† read, æ­¤æ—¶ read æ˜¯å…¨é‡çš„ m.read.Store(readOnly{m: m.dirty}) m.dirty = nil m.misses = 0 } ","date":"2022-09-14","objectID":"/go-sync-map/:13:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#ä»€ä¹ˆæ—¶å€™-ep-ç”±-nil-å˜æˆ-expunged"},{"categories":["golang"],"content":" æ—¢ç„¶ nil è¡¨ç¤ºæ ‡è®°åˆ é™¤ï¼Œexpunged çš„æ„ä¹‰æ˜¯ä»€ä¹ˆexpunged çš„æ„ä¹‰æ˜¯åœ¨åˆ é™¤æ“ä½œåï¼Œé”®å¯¹åº”å€¼è¢«æ ‡è®°ä¸º expungedï¼Œè€Œä¸æ˜¯ç®€å•åœ°è®¾ç½®ä¸º nilã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œnil å€¼å¯èƒ½æ˜¯é”®æœ¬èº«çš„æœ‰æ•ˆå€¼ï¼Œå› æ­¤æ— æ³•åŒºåˆ†é”®å·²è¢«åˆ é™¤å’Œé”®å¯¹åº”çš„å€¼ä¸º nil ä¸¤ç§æƒ…å†µã€‚é€šè¿‡ä½¿ç”¨ expunged æ ‡è®°ï¼Œsync.Map å¯ä»¥æ¸…æ¥šåœ°åŒºåˆ†é”®è¢«åˆ é™¤å’Œé”®å¯¹åº”çš„å€¼ä¸º nilã€‚ å…·ä½“æ¥è¯´ï¼Œå½“æ‰§è¡Œåˆ é™¤æ“ä½œæ—¶ï¼Œsync.Map å°†é”®å¯¹åº”çš„å€¼è®¾ç½®ä¸ºä¸€ä¸ªç‰¹æ®Šçš„å ä½ç¬¦ expungedï¼Œè¡¨ç¤ºè¯¥é”®å·²è¢«åˆ é™¤ã€‚åœ¨åç»­çš„æ“ä½œä¸­ï¼Œé€šè¿‡æ£€æŸ¥å€¼æ˜¯å¦ç­‰äº expungedï¼Œå¯ä»¥åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨ã€‚ è¿™ç§è®¾è®¡æœ‰ä»¥ä¸‹å¥½å¤„ï¼š é¿å…äº† nil å€¼å¯èƒ½å¸¦æ¥çš„æ­§ä¹‰ï¼šnil å€¼å¯èƒ½æ˜¯é”®çš„æœ‰æ•ˆå€¼ï¼Œå› æ­¤ä¸èƒ½ç®€å•åœ°ä¾é  nil å€¼æ¥åˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨æˆ–å·²è¢«åˆ é™¤ã€‚ æé«˜äº†åˆ é™¤æ“ä½œçš„æ•ˆç‡ï¼šç›´æ¥å°†å€¼æ ‡è®°ä¸º expungedï¼Œè€Œä¸æ˜¯åˆ é™¤é”®å€¼å¯¹ï¼Œå¯ä»¥é¿å…é‡æ–°åˆ†é…å†…å­˜æˆ–è¿›è¡Œå…¶ä»–å¤æ‚çš„æ“ä½œï¼Œä»è€Œæé«˜äº†åˆ é™¤æ“ä½œçš„æ•ˆç‡ã€‚ ä¿æŒäº†å¹¶å‘å®‰å…¨æ€§ï¼šé€šè¿‡å°†é”®çš„å¯¹åº”å€¼è®¾ç½®ä¸º expungedï¼Œsync.Map åœ¨å¹¶å‘ç¯å¢ƒä¸­ä»ç„¶èƒ½å¤Ÿä¿æŒæ­£ç¡®çš„çŠ¶æ€å’Œæ“ä½œä¸€è‡´æ€§ã€‚ ","date":"2022-09-14","objectID":"/go-sync-map/:14:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#æ—¢ç„¶-nil-è¡¨ç¤ºæ ‡è®°åˆ é™¤expunged-çš„æ„ä¹‰æ˜¯ä»€ä¹ˆ"},{"categories":["golang"],"content":" å‚è€ƒ ä¸å¾—ä¸çŸ¥é“çš„Golangä¹‹sync.Mapè§£è¯»ï¼ ä¸€å£æ°”ææ‡‚ Go sync.map æ‰€æœ‰çŸ¥è¯†ç‚¹ Go 1.9 sync.Mapæ­ç§˜ æ·±åº¦è§£å¯† Go è¯­è¨€ä¹‹ sync.map ","date":"2022-09-14","objectID":"/go-sync-map/:15:0","series":["go1.18"],"tags":["golang"],"title":"Go1.18 sync.Map è§£è¯»","uri":"/go-sync-map/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åŸæ–‡é“¾æ¥ï¼šhttps://segmentfault.com/a/1190000018626163 ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:0:0","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 0. ç›®å½•å’Œè¯´æ˜æ–‡ç« åœ¨ä»‹ç»ä¸€äº›åŸºæœ¬æ¦‚å¿µåï¼ŒæŒ‰ç…§ä»¥ä¸‹è¿‡ç¨‹é˜è¿°äº†æ•´ä¸ªæ¶æ„çš„æ¼”è¿›è¿‡ç¨‹ï¼š å•æœºæ¶æ„ ç¬¬ä¸€æ¬¡æ¼”è¿›ï¼šTomcat ä¸æ•°æ®åº“åˆ†å¼€éƒ¨ç½² ç¬¬äºŒæ¬¡æ¼”è¿›ï¼šå¼•å…¥æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜ ç¬¬ä¸‰æ¬¡æ¼”è¿›ï¼šå¼•å…¥åå‘ä»£ç†å®ç°è´Ÿè½½å‡è¡¡ ç¬¬å››æ¬¡æ¼”è¿›ï¼šæ•°æ®åº“è¯»å†™åˆ†ç¦» ç¬¬äº”æ¬¡æ¼”è¿›ï¼šæ•°æ®åº“æŒ‰ä¸šåŠ¡åˆ†åº“ ç¬¬å…­æ¬¡æ¼”è¿›ï¼šæŠŠå¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨ ç¬¬ä¸ƒæ¬¡æ¼”è¿›ï¼šä½¿ç”¨ LVS æˆ– F5 æ¥ä½¿å¤šä¸ª Nginx è´Ÿè½½å‡è¡¡ ç¬¬å…«æ¬¡æ¼”è¿›ï¼šé€šè¿‡ DNS è½®è¯¢å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡ ç¬¬ä¹æ¬¡æ¼”è¿›ï¼šå¼•å…¥ NoSQL æ•°æ®åº“å’Œæœç´¢å¼•æ“ç­‰æŠ€æœ¯ ç¬¬åæ¬¡æ¼”è¿›ï¼šå¤§åº”ç”¨æ‹†åˆ†ä¸ºå°åº”ç”¨ ç¬¬åä¸€æ¬¡æ¼”è¿›ï¼šå¤ç”¨çš„åŠŸèƒ½æŠ½ç¦»æˆå¾®æœåŠ¡ ç¬¬åäºŒæ¬¡æ¼”è¿›ï¼šå¼•å…¥ä¼ä¸šæœåŠ¡æ€»çº¿ ESB å±è”½æœåŠ¡æ¥å£çš„è®¿é—®å·®å¼‚ ç¬¬åä¸‰æ¬¡æ¼”è¿›ï¼šå¼•å…¥å®¹å™¨åŒ–æŠ€æœ¯å®ç°è¿è¡Œç¯å¢ƒéš”ç¦»ä¸åŠ¨æ€æœåŠ¡ç®¡ç† ç¬¬åå››æ¬¡æ¼”è¿›ï¼šä»¥äº‘å¹³å°æ‰¿è½½ç³»ç»Ÿ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:1:0","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#0-ç›®å½•å’Œè¯´æ˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 1. æ¦‚è¿°æœ¬æ–‡ä»¥æ·˜å®ä½œä¸ºä¾‹å­ï¼Œä»‹ç»ä»ä¸€ç™¾ä¸ªåˆ°åƒä¸‡çº§å¹¶å‘æƒ…å†µä¸‹æœåŠ¡ç«¯çš„æ¶æ„çš„æ¼”è¿›è¿‡ç¨‹ï¼ŒåŒæ—¶åˆ—ä¸¾å‡ºæ¯ä¸ªæ¼”è¿›é˜¶æ®µä¼šé‡åˆ°çš„ç›¸å…³æŠ€æœ¯ï¼Œè®©å¤§å®¶å¯¹æ¶æ„çš„æ¼”è¿›æœ‰ä¸€ä¸ªæ•´ä½“çš„è®¤çŸ¥ï¼Œæ–‡ç« æœ€åæ±‡æ€»äº†ä¸€äº›æ¶æ„è®¾è®¡çš„åŸåˆ™ã€‚ ç‰¹åˆ«è¯´æ˜ï¼šæœ¬æ–‡ä»¥æ·˜å®ä¸ºä¾‹ä»…ä»…æ˜¯ä¸ºäº†ä¾¿äºè¯´æ˜æ¼”è¿›è¿‡ç¨‹å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¹¶éæ˜¯æ·˜å®çœŸæ­£çš„æŠ€æœ¯æ¼”è¿›è·¯å¾„ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:2:0","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#1-æ¦‚è¿°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 2. åŸºæœ¬æ¦‚å¿µåœ¨ä»‹ç»æ¶æ„ä¹‹å‰ï¼Œä¸ºäº†é¿å…éƒ¨åˆ†è¯»è€…å¯¹æ¶æ„è®¾è®¡ä¸­çš„ä¸€äº›æ¦‚å¿µä¸äº†è§£ï¼Œä¸‹é¢å¯¹å‡ ä¸ªæœ€åŸºç¡€çš„æ¦‚å¿µè¿›è¡Œä»‹ç»ã€‚ åˆ†å¸ƒå¼ ç³»ç»Ÿä¸­çš„å¤šä¸ªæ¨¡å—åœ¨ä¸åŒæœåŠ¡å™¨ä¸Šéƒ¨ç½²ï¼Œå³å¯ç§°ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¦‚ Tomcat å’Œæ•°æ®åº“åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šï¼Œæˆ–ä¸¤ä¸ªç›¸åŒåŠŸèƒ½çš„ Tomcat åˆ†åˆ«éƒ¨ç½²åœ¨ä¸åŒæœåŠ¡å™¨ä¸Š é«˜å¯ç”¨ ç³»ç»Ÿä¸­éƒ¨åˆ†èŠ‚ç‚¹å¤±æ•ˆæ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹èƒ½å¤Ÿæ¥æ›¿å®ƒç»§ç»­æä¾›æœåŠ¡ï¼Œåˆ™å¯è®¤ä¸ºç³»ç»Ÿå…·æœ‰é«˜å¯ç”¨æ€§ é›†ç¾¤ ä¸€ä¸ªç‰¹å®šé¢†åŸŸçš„è½¯ä»¶éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šå¹¶ä½œä¸ºä¸€ä¸ªæ•´ä½“æä¾›ä¸€ç±»æœåŠ¡ï¼Œè¿™ä¸ªæ•´ä½“ç§°ä¸ºé›†ç¾¤ã€‚å¦‚ Zookeeper ä¸­çš„ Master å’Œ Slave åˆ†åˆ«éƒ¨ç½²åœ¨å¤šå°æœåŠ¡å™¨ä¸Šï¼Œå…±åŒç»„æˆä¸€ä¸ªæ•´ä½“æä¾›é›†ä¸­é…ç½®æœåŠ¡ã€‚åœ¨å¸¸è§çš„é›†ç¾¤ä¸­ï¼Œå®¢æˆ·ç«¯å¾€å¾€èƒ½å¤Ÿè¿æ¥ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹è·å¾—æœåŠ¡ï¼Œå¹¶ä¸”å½“é›†ç¾¤ä¸­ä¸€ä¸ªèŠ‚ç‚¹æ‰çº¿æ—¶ï¼Œå…¶ä»–èŠ‚ç‚¹å¾€å¾€èƒ½å¤Ÿè‡ªåŠ¨çš„æ¥æ›¿å®ƒç»§ç»­æä¾›æœåŠ¡ï¼Œè¿™æ—¶å€™è¯´æ˜é›†ç¾¤å…·æœ‰é«˜å¯ç”¨æ€§ è´Ÿè½½å‡è¡¡ è¯·æ±‚å‘é€åˆ°ç³»ç»Ÿæ—¶ï¼Œé€šè¿‡æŸäº›æ–¹å¼æŠŠè¯·æ±‚å‡åŒ€åˆ†å‘åˆ°å¤šä¸ªèŠ‚ç‚¹ä¸Šï¼Œä½¿ç³»ç»Ÿä¸­æ¯ä¸ªèŠ‚ç‚¹èƒ½å¤Ÿå‡åŒ€çš„å¤„ç†è¯·æ±‚è´Ÿè½½ï¼Œåˆ™å¯è®¤ä¸ºç³»ç»Ÿæ˜¯è´Ÿè½½å‡è¡¡çš„ æ­£å‘ä»£ç†å’Œåå‘ä»£ç† ç³»ç»Ÿå†…éƒ¨è¦è®¿é—®å¤–éƒ¨ç½‘ç»œæ—¶ï¼Œç»Ÿä¸€é€šè¿‡ä¸€ä¸ªä»£ç†æœåŠ¡å™¨æŠŠè¯·æ±‚è½¬å‘å‡ºå»ï¼Œåœ¨å¤–éƒ¨ç½‘ç»œçœ‹æ¥å°±æ˜¯ä»£ç†æœåŠ¡å™¨å‘èµ·çš„è®¿é—®ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å®ç°çš„æ˜¯æ­£å‘ä»£ç†ï¼›å½“å¤–éƒ¨è¯·æ±‚è¿›å…¥ç³»ç»Ÿæ—¶ï¼Œä»£ç†æœåŠ¡å™¨æŠŠè¯¥è¯·æ±‚è½¬å‘åˆ°ç³»ç»Ÿä¸­çš„æŸå°æœåŠ¡å™¨ä¸Šï¼Œå¯¹å¤–éƒ¨è¯·æ±‚æ¥è¯´ï¼Œä¸ä¹‹äº¤äº’çš„åªæœ‰ä»£ç†æœåŠ¡å™¨ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å®ç°çš„æ˜¯åå‘ä»£ç†ã€‚ç®€å•æ¥è¯´ï¼Œæ­£å‘ä»£ç†æ˜¯ä»£ç†æœåŠ¡å™¨ä»£æ›¿ç³»ç»Ÿå†…éƒ¨æ¥è®¿é—®å¤–éƒ¨ç½‘ç»œçš„è¿‡ç¨‹ï¼Œåå‘ä»£ç†æ˜¯å¤–éƒ¨è¯·æ±‚è®¿é—®ç³»ç»Ÿæ—¶é€šè¿‡ä»£ç†æœåŠ¡å™¨è½¬å‘åˆ°å†…éƒ¨æœåŠ¡å™¨çš„è¿‡ç¨‹ã€‚ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:3:0","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#2-åŸºæœ¬æ¦‚å¿µ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3. æ¶æ„æ¼”è¿›","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:0","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#3-æ¶æ„æ¼”è¿›"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.1 å•æœºæ¶æ„ å•æœºæ¶æ„ ä»¥æ·˜å®ä½œä¸ºä¾‹å­ã€‚åœ¨ç½‘ç«™æœ€åˆæ—¶ï¼Œåº”ç”¨æ•°é‡ä¸ç”¨æˆ·æ•°éƒ½è¾ƒå°‘ï¼Œå¯ä»¥æŠŠ Tomcat å’Œæ•°æ®åº“éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šã€‚æµè§ˆå™¨å¾€ www.taobao.com å‘èµ·è¯·æ±‚æ—¶ï¼Œé¦–å…ˆç»è¿‡ DNS æœåŠ¡å™¨ï¼ˆåŸŸåç³»ç»Ÿï¼‰æŠŠåŸŸåè½¬æ¢ä¸ºå®é™… IP åœ°å€ 10.102.4.1ï¼Œæµè§ˆå™¨è½¬è€Œè®¿é—®è¯¥ IP å¯¹åº”çš„ Tomcatã€‚ éšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼ŒTomcat å’Œæ•°æ®åº“ä¹‹é—´ç«äº‰èµ„æºï¼Œå•æœºæ€§èƒ½ä¸è¶³ä»¥æ”¯æ’‘ä¸šåŠ¡ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:1","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#31-å•æœºæ¶æ„"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.2 ç¬¬ä¸€æ¬¡æ¼”è¿›ï¼šTomcat ä¸æ•°æ®åº“åˆ†å¼€éƒ¨ç½² ç¬¬ä¸€æ¬¡æ¼”è¿› Tomcat å’Œæ•°æ®åº“åˆ†åˆ«ç‹¬å æœåŠ¡å™¨èµ„æºï¼Œæ˜¾è‘—æé«˜ä¸¤è€…å„è‡ªæ€§èƒ½ã€‚ éšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå¹¶å‘è¯»å†™æ•°æ®åº“æˆä¸ºç“¶é¢ˆ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:2","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#32-ç¬¬ä¸€æ¬¡æ¼”è¿›tomcat-ä¸æ•°æ®åº“åˆ†å¼€éƒ¨ç½²"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.3 ç¬¬äºŒæ¬¡æ¼”è¿›ï¼šå¼•å…¥æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜ ç¬¬äºŒæ¬¡æ¼”è¿› åœ¨ Tomcat åŒæœåŠ¡å™¨ä¸Šæˆ–åŒ JVM ä¸­å¢åŠ æœ¬åœ°ç¼“å­˜ï¼Œå¹¶åœ¨å¤–éƒ¨å¢åŠ åˆ†å¸ƒå¼ç¼“å­˜ï¼Œç¼“å­˜çƒ­é—¨å•†å“ä¿¡æ¯æˆ–çƒ­é—¨å•†å“çš„ html é¡µé¢ç­‰ã€‚é€šè¿‡ç¼“å­˜èƒ½æŠŠç»å¤§å¤šæ•°è¯·æ±‚åœ¨è¯»å†™æ•°æ®åº“å‰æ‹¦æˆªæ‰ï¼Œå¤§å¤§é™ä½æ•°æ®åº“å‹åŠ›ã€‚å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šä½¿ç”¨ memcached ä½œä¸ºæœ¬åœ°ç¼“å­˜ï¼Œä½¿ç”¨ Redis ä½œä¸ºåˆ†å¸ƒå¼ç¼“å­˜ï¼Œè¿˜ä¼šæ¶‰åŠç¼“å­˜ä¸€è‡´æ€§ã€ç¼“å­˜ç©¿é€/å‡»ç©¿ã€ç¼“å­˜é›ªå´©ã€çƒ­ç‚¹æ•°æ®é›†ä¸­å¤±æ•ˆç­‰é—®é¢˜ã€‚ ç¼“å­˜æŠ—ä½äº†å¤§éƒ¨åˆ†çš„è®¿é—®è¯·æ±‚ï¼Œéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå¹¶å‘å‹åŠ›ä¸»è¦è½åœ¨å•æœºçš„ Tomcat ä¸Šï¼Œå“åº”é€æ¸å˜æ…¢ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:3","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#33-ç¬¬äºŒæ¬¡æ¼”è¿›å¼•å…¥æœ¬åœ°ç¼“å­˜å’Œåˆ†å¸ƒå¼ç¼“å­˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.4 ç¬¬ä¸‰æ¬¡æ¼”è¿›ï¼šå¼•å…¥åå‘ä»£ç†å®ç°è´Ÿè½½å‡è¡¡ ç¬¬ä¸‰æ¬¡æ¼”è¿› åœ¨å¤šå°æœåŠ¡å™¨ä¸Šåˆ†åˆ«éƒ¨ç½² Tomcatï¼Œä½¿ç”¨åå‘ä»£ç†è½¯ä»¶ï¼ˆNginxï¼‰æŠŠè¯·æ±‚å‡åŒ€åˆ†å‘åˆ°æ¯ä¸ª Tomcat ä¸­ã€‚æ­¤å¤„å‡è®¾ Tomcat æœ€å¤šæ”¯æŒ 100 ä¸ªå¹¶å‘ï¼ŒNginx æœ€å¤šæ”¯æŒ 50000 ä¸ªå¹¶å‘ï¼Œé‚£ä¹ˆç†è®ºä¸Š Nginx æŠŠè¯·æ±‚åˆ†å‘åˆ° 500 ä¸ª Tomcat ä¸Šï¼Œå°±èƒ½æŠ—ä½ 50000 ä¸ªå¹¶å‘ã€‚å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šNginxã€HAProxyï¼Œä¸¤è€…éƒ½æ˜¯å·¥ä½œåœ¨ç½‘ç»œç¬¬ä¸ƒå±‚çš„åå‘ä»£ç†è½¯ä»¶ï¼Œä¸»è¦æ”¯æŒ http åè®®ï¼Œè¿˜ä¼šæ¶‰åŠ session å…±äº«ã€æ–‡ä»¶ä¸Šä¼ ä¸‹è½½çš„é—®é¢˜ã€‚ åå‘ä»£ç†ä½¿åº”ç”¨æœåŠ¡å™¨å¯æ”¯æŒçš„å¹¶å‘é‡å¤§å¤§å¢åŠ ï¼Œä½†å¹¶å‘é‡çš„å¢é•¿ä¹Ÿæ„å‘³ç€æ›´å¤šè¯·æ±‚ç©¿é€åˆ°æ•°æ®åº“ï¼Œå•æœºçš„æ•°æ®åº“æœ€ç»ˆæˆä¸ºç“¶é¢ˆ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:4","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#34-ç¬¬ä¸‰æ¬¡æ¼”è¿›å¼•å…¥åå‘ä»£ç†å®ç°è´Ÿè½½å‡è¡¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.5 ç¬¬å››æ¬¡æ¼”è¿›ï¼šæ•°æ®åº“è¯»å†™åˆ†ç¦» ç¬¬å››æ¬¡æ¼”è¿› æŠŠæ•°æ®åº“åˆ’åˆ†ä¸ºè¯»åº“å’Œå†™åº“ï¼Œè¯»åº“å¯ä»¥æœ‰å¤šä¸ªï¼Œé€šè¿‡åŒæ­¥æœºåˆ¶æŠŠå†™åº“çš„æ•°æ®åŒæ­¥åˆ°è¯»åº“ï¼Œå¯¹äºéœ€è¦æŸ¥è¯¢æœ€æ–°å†™å…¥æ•°æ®åœºæ™¯ï¼Œå¯é€šè¿‡åœ¨ç¼“å­˜ä¸­å¤šå†™ä¸€ä»½ï¼Œé€šè¿‡ç¼“å­˜è·å¾—æœ€æ–°æ•°æ®ã€‚å…¶ä¸­æ¶‰åŠçš„æŠ€æœ¯åŒ…æ‹¬ï¼šMycatï¼Œå®ƒæ˜¯æ•°æ®åº“ä¸­é—´ä»¶ï¼Œå¯é€šè¿‡å®ƒæ¥ç»„ç»‡æ•°æ®åº“çš„åˆ†ç¦»è¯»å†™å’Œåˆ†åº“åˆ†è¡¨ï¼Œå®¢æˆ·ç«¯é€šè¿‡å®ƒæ¥è®¿é—®ä¸‹å±‚æ•°æ®åº“ï¼Œè¿˜ä¼šæ¶‰åŠæ•°æ®åŒæ­¥ï¼Œæ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚ ä¸šåŠ¡é€æ¸å˜å¤šï¼Œä¸åŒä¸šåŠ¡ä¹‹é—´çš„è®¿é—®é‡å·®è·è¾ƒå¤§ï¼Œä¸åŒä¸šåŠ¡ç›´æ¥ç«äº‰æ•°æ®åº“ï¼Œç›¸äº’å½±å“æ€§èƒ½ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:5","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#35-ç¬¬å››æ¬¡æ¼”è¿›æ•°æ®åº“è¯»å†™åˆ†ç¦»"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.6 ç¬¬äº”æ¬¡æ¼”è¿›ï¼šæ•°æ®åº“æŒ‰ä¸šåŠ¡åˆ†åº“ ç¬¬äº”æ¬¡æ¼”è¿› æŠŠä¸åŒä¸šåŠ¡çš„æ•°æ®ä¿å­˜åˆ°ä¸åŒçš„æ•°æ®åº“ä¸­ï¼Œä½¿ä¸šåŠ¡ä¹‹é—´çš„èµ„æºç«äº‰é™ä½ï¼Œå¯¹äºè®¿é—®é‡å¤§çš„ä¸šåŠ¡ï¼Œå¯ä»¥éƒ¨ç½²æ›´å¤šçš„æœåŠ¡å™¨æ¥æ”¯æ’‘ã€‚è¿™æ ·åŒæ—¶å¯¼è‡´è·¨ä¸šåŠ¡çš„è¡¨æ— æ³•ç›´æ¥åšå…³è”åˆ†æï¼Œéœ€è¦é€šè¿‡å…¶ä»–é€”å¾„æ¥è§£å†³ï¼Œä½†è¿™ä¸æ˜¯æœ¬æ–‡è®¨è®ºçš„é‡ç‚¹ï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªè¡Œæœç´¢è§£å†³æ–¹æ¡ˆã€‚ éšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œå•æœºçš„å†™åº“ä¼šé€æ¸ä¼šè¾¾åˆ°æ€§èƒ½ç“¶é¢ˆ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:6","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#36-ç¬¬äº”æ¬¡æ¼”è¿›æ•°æ®åº“æŒ‰ä¸šåŠ¡åˆ†åº“"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.7 ç¬¬å…­æ¬¡æ¼”è¿›ï¼šæŠŠå¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨ ç¬¬å…­æ¬¡æ¼”è¿› æ¯”å¦‚é’ˆå¯¹è¯„è®ºæ•°æ®ï¼Œå¯æŒ‰ç…§å•†å“ ID è¿›è¡Œ hashï¼Œè·¯ç”±åˆ°å¯¹åº”çš„è¡¨ä¸­å­˜å‚¨ï¼›é’ˆå¯¹æ”¯ä»˜è®°å½•ï¼Œå¯æŒ‰ç…§å°æ—¶åˆ›å»ºè¡¨ï¼Œæ¯ä¸ªå°æ—¶è¡¨ç»§ç»­æ‹†åˆ†ä¸ºå°è¡¨ï¼Œä½¿ç”¨ç”¨æˆ· ID æˆ–è®°å½•ç¼–å·æ¥è·¯ç”±æ•°æ®ã€‚åªè¦å®æ—¶æ“ä½œçš„è¡¨æ•°æ®é‡è¶³å¤Ÿå°ï¼Œè¯·æ±‚èƒ½å¤Ÿè¶³å¤Ÿå‡åŒ€çš„åˆ†å‘åˆ°å¤šå°æœåŠ¡å™¨ä¸Šçš„å°è¡¨ï¼Œé‚£æ•°æ®åº“å°±èƒ½é€šè¿‡æ°´å¹³æ‰©å±•çš„æ–¹å¼æ¥æé«˜æ€§èƒ½ã€‚å…¶ä¸­å‰é¢æåˆ°çš„ Mycat ä¹Ÿæ”¯æŒåœ¨å¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨æƒ…å†µä¸‹çš„è®¿é—®æ§åˆ¶ã€‚ è¿™ç§åšæ³•æ˜¾è‘—çš„å¢åŠ äº†æ•°æ®åº“è¿ç»´çš„éš¾åº¦ï¼Œå¯¹ DBA çš„è¦æ±‚è¾ƒé«˜ã€‚æ•°æ®åº“è®¾è®¡åˆ°è¿™ç§ç»“æ„æ—¶ï¼Œå·²ç»å¯ä»¥ç§°ä¸ºåˆ†å¸ƒå¼æ•°æ®åº“ï¼Œä½†æ˜¯è¿™åªæ˜¯ä¸€ä¸ªé€»è¾‘çš„æ•°æ®åº“æ•´ä½“ï¼Œæ•°æ®åº“é‡Œä¸åŒçš„ç»„æˆéƒ¨åˆ†æ˜¯ç”±ä¸åŒçš„ç»„ä»¶å•ç‹¬æ¥å®ç°çš„ï¼Œå¦‚åˆ†åº“åˆ†è¡¨çš„ç®¡ç†å’Œè¯·æ±‚åˆ†å‘ï¼Œç”± Mycat å®ç°ï¼ŒSQL çš„è§£æç”±å•æœºçš„æ•°æ®åº“å®ç°ï¼Œè¯»å†™åˆ†ç¦»å¯èƒ½ç”±ç½‘å…³å’Œæ¶ˆæ¯é˜Ÿåˆ—æ¥å®ç°ï¼ŒæŸ¥è¯¢ç»“æœçš„æ±‡æ€»å¯èƒ½ç”±æ•°æ®åº“æ¥å£å±‚æ¥å®ç°ç­‰ç­‰ï¼Œè¿™ç§æ¶æ„å…¶å®æ˜¯ MPPMassively Parallel Processing ï¼ˆå¤§è§„æ¨¡å¹¶è¡Œå¤„ç†ï¼‰æ¶æ„çš„ä¸€ç±»å®ç°ã€‚ ç›®å‰å¼€æºå’Œå•†ç”¨éƒ½å·²ç»æœ‰ä¸å°‘ MPP æ•°æ®åº“ï¼Œå¼€æºä¸­æ¯”è¾ƒæµè¡Œçš„æœ‰ Greenplumã€TiDBã€Postgresql XCã€HAWQ ç­‰ï¼Œå•†ç”¨çš„å¦‚å—å¤§é€šç”¨çš„ GBaseã€ç¿å¸†ç§‘æŠ€çš„é›ªçƒ DBã€åä¸ºçš„ LibrA ç­‰ç­‰ï¼Œä¸åŒçš„ MPP æ•°æ®åº“çš„ä¾§é‡ç‚¹ä¹Ÿä¸ä¸€æ ·ï¼Œå¦‚ TiDB æ›´ä¾§é‡äºåˆ†å¸ƒå¼ OLTP åœºæ™¯ï¼ŒGreenplum æ›´ä¾§é‡äºåˆ†å¸ƒå¼ OLAP åœºæ™¯ï¼Œè¿™äº› MPP æ•°æ®åº“åŸºæœ¬éƒ½æä¾›äº†ç±»ä¼¼ Postgresqlã€Oracleã€MySQL é‚£æ ·çš„ SQL æ ‡å‡†æ”¯æŒèƒ½åŠ›ï¼Œèƒ½æŠŠä¸€ä¸ªæŸ¥è¯¢è§£æä¸ºåˆ†å¸ƒå¼çš„æ‰§è¡Œè®¡åˆ’åˆ†å‘åˆ°æ¯å°æœºå™¨ä¸Šå¹¶è¡Œæ‰§è¡Œï¼Œæœ€ç»ˆç”±æ•°æ®åº“æœ¬èº«æ±‡æ€»æ•°æ®è¿›è¡Œè¿”å›ï¼Œä¹Ÿæä¾›äº†è¯¸å¦‚æƒé™ç®¡ç†ã€åˆ†åº“åˆ†è¡¨ã€äº‹åŠ¡ã€æ•°æ®å‰¯æœ¬ç­‰èƒ½åŠ›ï¼Œå¹¶ä¸”å¤§å¤šèƒ½å¤Ÿæ”¯æŒ 100 ä¸ªèŠ‚ç‚¹ä»¥ä¸Šçš„é›†ç¾¤ï¼Œå¤§å¤§é™ä½äº†æ•°æ®åº“è¿ç»´çš„æˆæœ¬ï¼Œå¹¶ä¸”ä½¿æ•°æ®åº“ä¹Ÿèƒ½å¤Ÿå®ç°æ°´å¹³æ‰©å±•ã€‚ æ•°æ®åº“å’Œ Tomcat éƒ½èƒ½å¤Ÿæ°´å¹³æ‰©å±•ï¼Œå¯æ”¯æ’‘çš„å¹¶å‘å¤§å¹…æé«˜ï¼Œéšç€ç”¨æˆ·æ•°çš„å¢é•¿ï¼Œæœ€ç»ˆå•æœºçš„ Nginx ä¼šæˆä¸ºç“¶é¢ˆ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:7","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#37-ç¬¬å…­æ¬¡æ¼”è¿›æŠŠå¤§è¡¨æ‹†åˆ†ä¸ºå°è¡¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.8 ç¬¬ä¸ƒæ¬¡æ¼”è¿›ï¼šä½¿ç”¨ LVS æˆ– F5 æ¥ä½¿å¤šä¸ª Nginx è´Ÿè½½å‡è¡¡ ç¬¬ä¸ƒæ¬¡æ¼”è¿› ç”±äºç“¶é¢ˆåœ¨ Nginxï¼Œå› æ­¤æ— æ³•é€šè¿‡ä¸¤å±‚çš„ Nginx æ¥å®ç°å¤šä¸ª Nginx çš„è´Ÿè½½å‡è¡¡ã€‚å›¾ä¸­çš„ LVSLinux Virtual Server å’Œ F5 æ˜¯å·¥ä½œåœ¨ç½‘ç»œç¬¬å››å±‚çš„è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œå…¶ä¸­ LVS æ˜¯è½¯ä»¶ï¼Œè¿è¡Œåœ¨æ“ä½œç³»ç»Ÿå†…æ ¸æ€ï¼Œå¯å¯¹ TCP è¯·æ±‚æˆ–æ›´é«˜å±‚çº§çš„ç½‘ç»œåè®®è¿›è¡Œè½¬å‘ï¼Œå› æ­¤æ”¯æŒçš„åè®®æ›´ä¸°å¯Œï¼Œå¹¶ä¸”æ€§èƒ½ä¹Ÿè¿œé«˜äº Nginxï¼Œå¯å‡è®¾å•æœºçš„ LVS å¯æ”¯æŒå‡ åä¸‡ä¸ªå¹¶å‘çš„è¯·æ±‚è½¬å‘ï¼›F5 æ˜¯ä¸€ç§è´Ÿè½½å‡è¡¡ç¡¬ä»¶ï¼Œä¸ LVS æä¾›çš„èƒ½åŠ›ç±»ä¼¼ï¼Œæ€§èƒ½æ¯” LVS æ›´é«˜ï¼Œä½†ä»·æ ¼æ˜‚è´µã€‚ ç”±äº LVS æ˜¯å•æœºç‰ˆçš„è½¯ä»¶ï¼Œè‹¥ LVS æ‰€åœ¨æœåŠ¡å™¨å®•æœºåˆ™ä¼šå¯¼è‡´æ•´ä¸ªåç«¯ç³»ç»Ÿéƒ½æ— æ³•è®¿é—®ï¼Œå› æ­¤éœ€è¦æœ‰å¤‡ç”¨èŠ‚ç‚¹ã€‚å¯ä½¿ç”¨ keepalived è½¯ä»¶æ¨¡æ‹Ÿå‡ºè™šæ‹Ÿ IPï¼Œç„¶åæŠŠè™šæ‹Ÿ IP ç»‘å®šåˆ°å¤šå° LVS æœåŠ¡å™¨ä¸Šï¼Œæµè§ˆå™¨è®¿é—®è™šæ‹Ÿ IP æ—¶ï¼Œä¼šè¢«è·¯ç”±å™¨é‡å®šå‘åˆ°çœŸå®çš„ LVS æœåŠ¡å™¨ï¼Œå½“ä¸» LVS æœåŠ¡å™¨å®•æœºæ—¶ï¼Œkeepalived è½¯ä»¶ä¼šè‡ªåŠ¨æ›´æ–°è·¯ç”±å™¨ä¸­çš„è·¯ç”±è¡¨ï¼ŒæŠŠè™šæ‹Ÿ IP é‡å®šå‘åˆ°å¦å¤–ä¸€å°æ­£å¸¸çš„ LVS æœåŠ¡å™¨ï¼Œä»è€Œè¾¾åˆ° LVS æœåŠ¡å™¨é«˜å¯ç”¨çš„æ•ˆæœã€‚ æ­¤å¤„éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸Šå›¾ä¸­ä» Nginx å±‚åˆ° Tomcat å±‚è¿™æ ·ç”»å¹¶ä¸ä»£è¡¨å…¨éƒ¨ Nginx éƒ½è½¬å‘è¯·æ±‚åˆ°å…¨éƒ¨çš„ Tomcatï¼Œåœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œå¯èƒ½ä¼šæ˜¯å‡ ä¸ª Nginx ä¸‹é¢æ¥ä¸€éƒ¨åˆ†çš„ Tomcatï¼Œè¿™äº› Nginx ä¹‹é—´é€šè¿‡ keepalived å®ç°é«˜å¯ç”¨ï¼Œå…¶ä»–çš„ Nginx æ¥å¦å¤–çš„ Tomcatï¼Œè¿™æ ·å¯æ¥å…¥çš„ Tomcat æ•°é‡å°±èƒ½æˆå€çš„å¢åŠ ã€‚ ç”±äº LVS ä¹Ÿæ˜¯å•æœºçš„ï¼Œéšç€å¹¶å‘æ•°å¢é•¿åˆ°å‡ åä¸‡æ—¶ï¼ŒLVS æœåŠ¡å™¨æœ€ç»ˆä¼šè¾¾åˆ°ç“¶é¢ˆï¼Œæ­¤æ—¶ç”¨æˆ·æ•°è¾¾åˆ°åƒä¸‡ç”šè‡³ä¸Šäº¿çº§åˆ«ï¼Œç”¨æˆ·åˆ†å¸ƒåœ¨ä¸åŒçš„åœ°åŒºï¼Œä¸æœåŠ¡å™¨æœºæˆ¿è·ç¦»ä¸åŒï¼Œå¯¼è‡´äº†è®¿é—®çš„å»¶è¿Ÿä¼šæ˜æ˜¾ä¸åŒ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:8","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#38-ç¬¬ä¸ƒæ¬¡æ¼”è¿›ä½¿ç”¨-lvs-æˆ–-f5-æ¥ä½¿å¤šä¸ª-nginx-è´Ÿè½½å‡è¡¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.9 ç¬¬å…«æ¬¡æ¼”è¿›ï¼šé€šè¿‡ DNS è½®è¯¢å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡ ç¬¬å…«æ¬¡æ¼”è¿› åœ¨ DNS æœåŠ¡å™¨ä¸­å¯é…ç½®ä¸€ä¸ªåŸŸåå¯¹åº”å¤šä¸ª IP åœ°å€ï¼Œæ¯ä¸ª IP åœ°å€å¯¹åº”åˆ°ä¸åŒçš„æœºæˆ¿é‡Œçš„è™šæ‹Ÿ IPã€‚å½“ç”¨æˆ·è®¿é—® www.taobao.com æ—¶ï¼ŒDNS æœåŠ¡å™¨ä¼šä½¿ç”¨è½®è¯¢ç­–ç•¥æˆ–å…¶ä»–ç­–ç•¥ï¼Œæ¥é€‰æ‹©æŸä¸ª IP ä¾›ç”¨æˆ·è®¿é—®ã€‚æ­¤æ–¹å¼èƒ½å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡ï¼Œè‡³æ­¤ï¼Œç³»ç»Ÿå¯åšåˆ°æœºæˆ¿çº§åˆ«çš„æ°´å¹³æ‰©å±•ï¼Œåƒä¸‡çº§åˆ°äº¿çº§çš„å¹¶å‘é‡éƒ½å¯é€šè¿‡å¢åŠ æœºæˆ¿æ¥è§£å†³ï¼Œç³»ç»Ÿå…¥å£å¤„çš„è¯·æ±‚å¹¶å‘é‡ä¸å†æ˜¯é—®é¢˜ã€‚ éšç€æ•°æ®çš„ä¸°å¯Œç¨‹åº¦å’Œä¸šåŠ¡çš„å‘å±•ï¼Œæ£€ç´¢ã€åˆ†æç­‰éœ€æ±‚è¶Šæ¥è¶Šä¸°å¯Œï¼Œå•å•ä¾é æ•°æ®åº“æ— æ³•è§£å†³å¦‚æ­¤ä¸°å¯Œçš„éœ€æ±‚ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:9","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#39-ç¬¬å…«æ¬¡æ¼”è¿›é€šè¿‡-dns-è½®è¯¢å®ç°æœºæˆ¿é—´çš„è´Ÿè½½å‡è¡¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.10 ç¬¬ä¹æ¬¡æ¼”è¿›ï¼šå¼•å…¥ NoSQL æ•°æ®åº“å’Œæœç´¢å¼•æ“ç­‰æŠ€æœ¯ ç¬¬ä¹æ¬¡æ¼”è¿› å½“æ•°æ®åº“ä¸­çš„æ•°æ®å¤šåˆ°ä¸€å®šè§„æ¨¡æ—¶ï¼Œæ•°æ®åº“å°±ä¸é€‚ç”¨äºå¤æ‚çš„æŸ¥è¯¢äº†ï¼Œå¾€å¾€åªèƒ½æ»¡è¶³æ™®é€šæŸ¥è¯¢çš„åœºæ™¯ã€‚å¯¹äºç»Ÿè®¡æŠ¥è¡¨åœºæ™¯ï¼Œåœ¨æ•°æ®é‡å¤§æ—¶ä¸ä¸€å®šèƒ½è·‘å‡ºç»“æœï¼Œè€Œä¸”åœ¨è·‘å¤æ‚æŸ¥è¯¢æ—¶ä¼šå¯¼è‡´å…¶ä»–æŸ¥è¯¢å˜æ…¢ï¼Œå¯¹äºå…¨æ–‡æ£€ç´¢ã€å¯å˜æ•°æ®ç»“æ„ç­‰åœºæ™¯ï¼Œæ•°æ®åº“å¤©ç”Ÿä¸é€‚ç”¨ã€‚å› æ­¤éœ€è¦é’ˆå¯¹ç‰¹å®šçš„åœºæ™¯ï¼Œå¼•å…¥åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€‚å¦‚å¯¹äºæµ·é‡æ–‡ä»¶å­˜å‚¨ï¼Œå¯é€šè¿‡åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ HDFS è§£å†³ï¼Œå¯¹äº key value ç±»å‹çš„æ•°æ®ï¼Œå¯é€šè¿‡ HBase å’Œ Redis ç­‰æ–¹æ¡ˆè§£å†³ï¼Œå¯¹äºå…¨æ–‡æ£€ç´¢åœºæ™¯ï¼Œå¯é€šè¿‡æœç´¢å¼•æ“å¦‚ ElasticSearch è§£å†³ï¼Œå¯¹äºå¤šç»´åˆ†æåœºæ™¯ï¼Œå¯é€šè¿‡ Kylin æˆ– Druid ç­‰æ–¹æ¡ˆè§£å†³ã€‚ å½“ç„¶ï¼Œå¼•å…¥æ›´å¤šç»„ä»¶åŒæ—¶ä¼šæé«˜ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œä¸åŒçš„ç»„ä»¶ä¿å­˜çš„æ•°æ®éœ€è¦åŒæ­¥ï¼Œéœ€è¦è€ƒè™‘ä¸€è‡´æ€§çš„é—®é¢˜ï¼Œéœ€è¦æœ‰æ›´å¤šçš„è¿ç»´æ‰‹æ®µæ¥ç®¡ç†è¿™äº›ç»„ä»¶ç­‰ã€‚ å¼•å…¥æ›´å¤šç»„ä»¶è§£å†³äº†ä¸°å¯Œçš„éœ€æ±‚ï¼Œä¸šåŠ¡ç»´åº¦èƒ½å¤Ÿæå¤§æ‰©å……ï¼Œéšä¹‹è€Œæ¥çš„æ˜¯ä¸€ä¸ªåº”ç”¨ä¸­åŒ…å«äº†å¤ªå¤šçš„ä¸šåŠ¡ä»£ç ï¼Œä¸šåŠ¡çš„å‡çº§è¿­ä»£å˜å¾—å›°éš¾ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:10","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#310-ç¬¬ä¹æ¬¡æ¼”è¿›å¼•å…¥-nosql-æ•°æ®åº“å’Œæœç´¢å¼•æ“ç­‰æŠ€æœ¯"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.11 ç¬¬åæ¬¡æ¼”è¿›ï¼šå¤§åº”ç”¨æ‹†åˆ†ä¸ºå°åº”ç”¨ ç¬¬åæ¬¡æ¼”è¿› æŒ‰ç…§ä¸šåŠ¡æ¿å—æ¥åˆ’åˆ†åº”ç”¨ä»£ç ï¼Œä½¿å•ä¸ªåº”ç”¨çš„èŒè´£æ›´æ¸…æ™°ï¼Œç›¸äº’ä¹‹é—´å¯ä»¥åšåˆ°ç‹¬ç«‹å‡çº§è¿­ä»£ã€‚è¿™æ—¶å€™åº”ç”¨ä¹‹é—´å¯èƒ½ä¼šæ¶‰åŠåˆ°ä¸€äº›å…¬å…±é…ç½®ï¼Œå¯ä»¥é€šè¿‡åˆ†å¸ƒå¼é…ç½®ä¸­å¿ƒ Zookeeper æ¥è§£å†³ã€‚ ä¸åŒåº”ç”¨ä¹‹é—´å­˜åœ¨å…±ç”¨çš„æ¨¡å—ï¼Œç”±åº”ç”¨å•ç‹¬ç®¡ç†ä¼šå¯¼è‡´ç›¸åŒä»£ç å­˜åœ¨å¤šä»½ï¼Œå¯¼è‡´å…¬å…±åŠŸèƒ½å‡çº§æ—¶å…¨éƒ¨åº”ç”¨ä»£ç éƒ½è¦è·Ÿç€å‡çº§ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:11","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#311-ç¬¬åæ¬¡æ¼”è¿›å¤§åº”ç”¨æ‹†åˆ†ä¸ºå°åº”ç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.12 ç¬¬åä¸€æ¬¡æ¼”è¿›ï¼šå¤ç”¨çš„åŠŸèƒ½æŠ½ç¦»æˆå¾®æœåŠ¡ ç¬¬åä¸€æ¬¡æ¼”è¿› å¦‚ç”¨æˆ·ç®¡ç†ã€è®¢å•ã€æ”¯ä»˜ã€é‰´æƒç­‰åŠŸèƒ½åœ¨å¤šä¸ªåº”ç”¨ä¸­éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆå¯ä»¥æŠŠè¿™äº›åŠŸèƒ½çš„ä»£ç å•ç‹¬æŠ½å–å‡ºæ¥å½¢æˆä¸€ä¸ªå•ç‹¬çš„æœåŠ¡æ¥ç®¡ç†ï¼Œè¿™æ ·çš„æœåŠ¡å°±æ˜¯æ‰€è°“çš„å¾®æœåŠ¡ï¼Œåº”ç”¨å’ŒæœåŠ¡ä¹‹é—´é€šè¿‡ HTTPã€TCP æˆ– RPC è¯·æ±‚ç­‰å¤šç§æ–¹å¼æ¥è®¿é—®å…¬å…±æœåŠ¡ï¼Œæ¯ä¸ªå•ç‹¬çš„æœåŠ¡éƒ½å¯ä»¥ç”±å•ç‹¬çš„å›¢é˜Ÿæ¥ç®¡ç†ã€‚æ­¤å¤–ï¼Œå¯ä»¥é€šè¿‡ Dubboã€SpringCloud ç­‰æ¡†æ¶å®ç°æœåŠ¡æ²»ç†ã€é™æµã€ç†”æ–­ã€é™çº§ç­‰åŠŸèƒ½ï¼Œæé«˜æœåŠ¡çš„ç¨³å®šæ€§å’Œå¯ç”¨æ€§ã€‚ ä¸åŒæœåŠ¡çš„æ¥å£è®¿é—®æ–¹å¼ä¸åŒï¼Œåº”ç”¨ä»£ç éœ€è¦é€‚é…å¤šç§è®¿é—®æ–¹å¼æ‰èƒ½ä½¿ç”¨æœåŠ¡ï¼Œæ­¤å¤–ï¼Œåº”ç”¨è®¿é—®æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´ä¹Ÿå¯èƒ½ç›¸äº’è®¿é—®ï¼Œè°ƒç”¨é“¾å°†ä¼šå˜å¾—éå¸¸å¤æ‚ï¼Œé€»è¾‘å˜å¾—æ··ä¹± ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:12","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#312-ç¬¬åä¸€æ¬¡æ¼”è¿›å¤ç”¨çš„åŠŸèƒ½æŠ½ç¦»æˆå¾®æœåŠ¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.13 ç¬¬åäºŒæ¬¡æ¼”è¿›ï¼šå¼•å…¥ä¼ä¸šæœåŠ¡æ€»çº¿ ESB å±è”½æœåŠ¡æ¥å£çš„è®¿é—®å·®å¼‚ ç¬¬åäºŒæ¬¡æ¼”è¿› é€šè¿‡ ESB ç»Ÿä¸€è¿›è¡Œè®¿é—®åè®®è½¬æ¢ï¼Œåº”ç”¨ç»Ÿä¸€é€šè¿‡ ESB æ¥è®¿é—®åç«¯æœåŠ¡ï¼ŒæœåŠ¡ä¸æœåŠ¡ä¹‹é—´ä¹Ÿé€šè¿‡ ESB æ¥ç›¸äº’è°ƒç”¨ï¼Œä»¥æ­¤é™ä½ç³»ç»Ÿçš„è€¦åˆç¨‹åº¦ã€‚è¿™ç§å•ä¸ªåº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªåº”ç”¨ï¼Œå…¬å…±æœåŠ¡å•ç‹¬æŠ½å–å‡ºæ¥æ¥ç®¡ç†ï¼Œå¹¶ä½¿ç”¨ä¼ä¸šæ¶ˆæ¯æ€»çº¿æ¥è§£é™¤æœåŠ¡ä¹‹é—´è€¦åˆé—®é¢˜çš„æ¶æ„ï¼Œå°±æ˜¯æ‰€è°“çš„ SOAService-Oriented Architectureï¼ˆé¢å‘æœåŠ¡ï¼‰æ¶æ„ï¼Œè¿™ç§æ¶æ„ä¸å¾®æœåŠ¡æ¶æ„å®¹æ˜“æ··æ·†ï¼Œå› ä¸ºè¡¨ç°å½¢å¼ååˆ†ç›¸ä¼¼ã€‚ ä¸ªäººç†è§£ï¼Œå¾®æœåŠ¡æ¶æ„æ›´å¤šæ˜¯æŒ‡æŠŠç³»ç»Ÿé‡Œçš„å…¬å…±æœåŠ¡æŠ½å–å‡ºæ¥å•ç‹¬è¿ç»´ç®¡ç†çš„æ€æƒ³ï¼Œè€Œ SOA æ¶æ„åˆ™æ˜¯æŒ‡ä¸€ç§æ‹†åˆ†æœåŠ¡å¹¶ä½¿æœåŠ¡æ¥å£è®¿é—®å˜å¾—ç»Ÿä¸€çš„æ¶æ„æ€æƒ³ï¼ŒSOA æ¶æ„ä¸­åŒ…å«äº†å¾®æœåŠ¡çš„æ€æƒ³ã€‚ ä¸šåŠ¡ä¸æ–­å‘å±•ï¼Œåº”ç”¨å’ŒæœåŠ¡éƒ½ä¼šä¸æ–­å˜å¤šï¼Œåº”ç”¨å’ŒæœåŠ¡çš„éƒ¨ç½²å˜å¾—å¤æ‚ï¼ŒåŒä¸€å°æœåŠ¡å™¨ä¸Šéƒ¨ç½²å¤šä¸ªæœåŠ¡è¿˜è¦è§£å†³è¿è¡Œç¯å¢ƒå†²çªçš„é—®é¢˜ï¼Œ æ­¤å¤–ï¼Œå¯¹äºå¦‚å¤§ä¿ƒè¿™ç±»éœ€è¦åŠ¨æ€æ‰©ç¼©å®¹çš„åœºæ™¯ï¼Œéœ€è¦æ°´å¹³æ‰©å±•æœåŠ¡çš„æ€§èƒ½ï¼Œå°±éœ€è¦åœ¨æ–°å¢çš„æœåŠ¡ä¸Šå‡†å¤‡è¿è¡Œç¯å¢ƒï¼Œéƒ¨ç½²æœåŠ¡ç­‰ï¼Œè¿ç»´å°†å˜å¾—ååˆ†å›°éš¾ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:13","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#313-ç¬¬åäºŒæ¬¡æ¼”è¿›å¼•å…¥ä¼ä¸šæœåŠ¡æ€»çº¿-esb-å±è”½æœåŠ¡æ¥å£çš„è®¿é—®å·®å¼‚"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.14 ç¬¬åä¸‰æ¬¡æ¼”è¿›ï¼šå¼•å…¥å®¹å™¨åŒ–æŠ€æœ¯å®ç°è¿è¡Œç¯å¢ƒéš”ç¦»ä¸åŠ¨æ€æœåŠ¡ç®¡ç† ç¬¬åä¸‰æ¬¡æ¼”è¿› ç›®å‰æœ€æµè¡Œçš„å®¹å™¨åŒ–æŠ€æœ¯æ˜¯ Dockerï¼Œæœ€æµè¡Œçš„å®¹å™¨ç®¡ç†æœåŠ¡æ˜¯ Kubernetes(K8S)ï¼Œåº”ç”¨/æœåŠ¡å¯ä»¥æ‰“åŒ…ä¸º Docker é•œåƒï¼Œé€šè¿‡ K8S æ¥åŠ¨æ€åˆ†å‘å’Œéƒ¨ç½²é•œåƒã€‚Docker é•œåƒå¯ç†è§£ä¸ºä¸€ä¸ªèƒ½è¿è¡Œä½ çš„åº”ç”¨/æœåŠ¡çš„æœ€å°çš„æ“ä½œç³»ç»Ÿï¼Œé‡Œé¢æ”¾ç€åº”ç”¨/æœåŠ¡çš„è¿è¡Œä»£ç ï¼Œè¿è¡Œç¯å¢ƒæ ¹æ®å®é™…çš„éœ€è¦è®¾ç½®å¥½ã€‚æŠŠæ•´ä¸ªâ€œæ“ä½œç³»ç»Ÿâ€æ‰“åŒ…ä¸ºä¸€ä¸ªé•œåƒåï¼Œå°±å¯ä»¥åˆ†å‘åˆ°éœ€è¦éƒ¨ç½²ç›¸å…³æœåŠ¡çš„æœºå™¨ä¸Šï¼Œç›´æ¥å¯åŠ¨ Docker é•œåƒå°±å¯ä»¥æŠŠæœåŠ¡èµ·èµ·æ¥ï¼Œä½¿æœåŠ¡çš„éƒ¨ç½²å’Œè¿ç»´å˜å¾—ç®€å•ã€‚ åœ¨å¤§ä¿ƒçš„ä¹‹å‰ï¼Œå¯ä»¥åœ¨ç°æœ‰çš„æœºå™¨é›†ç¾¤ä¸Šåˆ’åˆ†å‡ºæœåŠ¡å™¨æ¥å¯åŠ¨ Docker é•œåƒï¼Œå¢å¼ºæœåŠ¡çš„æ€§èƒ½ï¼Œå¤§ä¿ƒè¿‡åå°±å¯ä»¥å…³é—­é•œåƒï¼Œå¯¹æœºå™¨ä¸Šçš„å…¶ä»–æœåŠ¡ä¸é€ æˆå½±å“ï¼ˆåœ¨ 3.14 èŠ‚ä¹‹å‰ï¼ŒæœåŠ¡è¿è¡Œåœ¨æ–°å¢æœºå™¨ä¸Šéœ€è¦ä¿®æ”¹ç³»ç»Ÿé…ç½®æ¥é€‚é…æœåŠ¡ï¼Œè¿™ä¼šå¯¼è‡´æœºå™¨ä¸Šå…¶ä»–æœåŠ¡éœ€è¦çš„è¿è¡Œç¯å¢ƒè¢«ç ´åï¼‰ã€‚ ä½¿ç”¨å®¹å™¨åŒ–æŠ€æœ¯åæœåŠ¡åŠ¨æ€æ‰©ç¼©å®¹é—®é¢˜å¾—ä»¥è§£å†³ï¼Œä½†æ˜¯æœºå™¨è¿˜æ˜¯éœ€è¦å…¬å¸è‡ªèº«æ¥ç®¡ç†ï¼Œåœ¨éå¤§ä¿ƒçš„æ—¶å€™ï¼Œè¿˜æ˜¯éœ€è¦é—²ç½®ç€å¤§é‡çš„æœºå™¨èµ„æºæ¥åº”å¯¹å¤§ä¿ƒï¼Œæœºå™¨è‡ªèº«æˆæœ¬å’Œè¿ç»´æˆæœ¬éƒ½æé«˜ï¼Œèµ„æºåˆ©ç”¨ç‡ä½ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:14","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#314-ç¬¬åä¸‰æ¬¡æ¼”è¿›å¼•å…¥å®¹å™¨åŒ–æŠ€æœ¯å®ç°è¿è¡Œç¯å¢ƒéš”ç¦»ä¸åŠ¨æ€æœåŠ¡ç®¡ç†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 3.15 ç¬¬åå››æ¬¡æ¼”è¿›ï¼šä»¥äº‘å¹³å°æ‰¿è½½ç³»ç»Ÿ ç¬¬åå››æ¬¡æ¼”è¿› ç³»ç»Ÿå¯éƒ¨ç½²åˆ°å…¬æœ‰äº‘ä¸Šï¼Œåˆ©ç”¨å…¬æœ‰äº‘çš„æµ·é‡æœºå™¨èµ„æºï¼Œè§£å†³åŠ¨æ€ç¡¬ä»¶èµ„æºçš„é—®é¢˜ï¼Œåœ¨å¤§ä¿ƒçš„æ—¶é—´æ®µé‡Œï¼Œåœ¨äº‘å¹³å°ä¸­ä¸´æ—¶ç”³è¯·æ›´å¤šçš„èµ„æºï¼Œç»“åˆ Docker å’Œ K8S æ¥å¿«é€Ÿéƒ¨ç½²æœåŠ¡ï¼Œåœ¨å¤§ä¿ƒç»“æŸåé‡Šæ”¾èµ„æºï¼ŒçœŸæ­£åšåˆ°æŒ‰éœ€ä»˜è´¹ï¼Œèµ„æºåˆ©ç”¨ç‡å¤§å¤§æé«˜ï¼ŒåŒæ—¶å¤§å¤§é™ä½äº†è¿ç»´æˆæœ¬ã€‚ æ‰€è°“çš„äº‘å¹³å°ï¼Œå°±æ˜¯æŠŠæµ·é‡æœºå™¨èµ„æºï¼Œé€šè¿‡ç»Ÿä¸€çš„èµ„æºç®¡ç†ï¼ŒæŠ½è±¡ä¸ºä¸€ä¸ªèµ„æºæ•´ä½“ï¼Œåœ¨ä¹‹ä¸Šå¯æŒ‰éœ€åŠ¨æ€ç”³è¯·ç¡¬ä»¶èµ„æºï¼ˆå¦‚ CPUã€å†…å­˜ã€ç½‘ç»œç­‰ï¼‰ï¼Œå¹¶ä¸”ä¹‹ä¸Šæä¾›é€šç”¨çš„æ“ä½œç³»ç»Ÿï¼Œæä¾›å¸¸ç”¨çš„æŠ€æœ¯ç»„ä»¶ï¼ˆå¦‚ Hadoop æŠ€æœ¯æ ˆï¼ŒMPP æ•°æ®åº“ç­‰ï¼‰ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œç”šè‡³æä¾›å¼€å‘å¥½çš„åº”ç”¨ï¼Œç”¨æˆ·ä¸éœ€è¦å…³ç³»åº”ç”¨å†…éƒ¨ä½¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯ï¼Œå°±èƒ½å¤Ÿè§£å†³éœ€æ±‚ï¼ˆå¦‚éŸ³è§†é¢‘è½¬ç æœåŠ¡ã€é‚®ä»¶æœåŠ¡ã€ä¸ªäººåšå®¢ç­‰ï¼‰ã€‚åœ¨äº‘å¹³å°ä¸­ä¼šæ¶‰åŠå¦‚ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š IaaSåŸºç¡€è®¾æ–½å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æœºå™¨èµ„æºç»Ÿä¸€ä¸ºèµ„æºæ•´ä½“ï¼Œå¯åŠ¨æ€ç”³è¯·ç¡¬ä»¶èµ„æºçš„å±‚é¢ï¼› PaaSå¹³å°å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æä¾›å¸¸ç”¨çš„æŠ€æœ¯ç»„ä»¶æ–¹ä¾¿ç³»ç»Ÿçš„å¼€å‘å’Œç»´æŠ¤ï¼› SaaSè½¯ä»¶å³æœåŠ¡ã€‚å¯¹åº”äºä¸Šé¢æ‰€è¯´çš„æä¾›å¼€å‘å¥½çš„åº”ç”¨æˆ–æœåŠ¡ï¼ŒæŒ‰åŠŸèƒ½æˆ–æ€§èƒ½è¦æ±‚ä»˜è´¹ã€‚ è‡³æ­¤ï¼Œä»¥ä¸Šæ‰€æåˆ°çš„ä»é«˜å¹¶å‘è®¿é—®é—®é¢˜ï¼Œåˆ°æœåŠ¡çš„æ¶æ„å’Œç³»ç»Ÿå®æ–½çš„å±‚é¢éƒ½æœ‰äº†å„è‡ªçš„è§£å†³æ–¹æ¡ˆï¼Œä½†åŒæ—¶ä¹Ÿåº”è¯¥æ„è¯†åˆ°ï¼Œåœ¨ä¸Šé¢çš„ä»‹ç»ä¸­ï¼Œå…¶å®æ˜¯æœ‰æ„å¿½ç•¥äº†è¯¸å¦‚è·¨æœºæˆ¿æ•°æ®åŒæ­¥ã€åˆ†å¸ƒå¼äº‹åŠ¡å®ç°ç­‰ç­‰çš„å®é™…é—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä»¥åæœ‰æœºä¼šå†æ‹¿å‡ºæ¥å•ç‹¬è®¨è®º ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:4:15","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#315-ç¬¬åå››æ¬¡æ¼”è¿›ä»¥äº‘å¹³å°æ‰¿è½½ç³»ç»Ÿ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" 4. æ¶æ„è®¾è®¡æ€»ç»“ æ¶æ„çš„è°ƒæ•´æ˜¯å¦å¿…é¡»æŒ‰ç…§ä¸Šè¿°æ¼”å˜è·¯å¾„è¿›è¡Œï¼Ÿ ä¸æ˜¯çš„ï¼Œä»¥ä¸Šæ‰€è¯´çš„æ¶æ„æ¼”å˜é¡ºåºåªæ˜¯é’ˆå¯¹æŸä¸ªä¾§é¢è¿›è¡Œå•ç‹¬çš„æ”¹è¿›ï¼Œåœ¨å®é™…åœºæ™¯ä¸­ï¼Œå¯èƒ½åŒä¸€æ—¶é—´ä¼šæœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼Œæˆ–è€…å¯èƒ½å…ˆè¾¾åˆ°ç“¶é¢ˆçš„æ˜¯å¦å¤–çš„æ–¹é¢ï¼Œè¿™æ—¶å€™å°±åº”è¯¥æŒ‰ç…§å®é™…é—®é¢˜å®é™…è§£å†³ã€‚å¦‚åœ¨æ”¿åºœç±»çš„å¹¶å‘é‡å¯èƒ½ä¸å¤§ï¼Œä½†ä¸šåŠ¡å¯èƒ½å¾ˆä¸°å¯Œçš„åœºæ™¯ï¼Œé«˜å¹¶å‘å°±ä¸æ˜¯é‡ç‚¹è§£å†³çš„é—®é¢˜ï¼Œæ­¤æ—¶ä¼˜å…ˆéœ€è¦çš„å¯èƒ½ä¼šæ˜¯ä¸°å¯Œéœ€æ±‚çš„è§£å†³æ–¹æ¡ˆã€‚ å¯¹äºå°†è¦å®æ–½çš„ç³»ç»Ÿï¼Œæ¶æ„åº”è¯¥è®¾è®¡åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ å¯¹äºå•æ¬¡å®æ–½å¹¶ä¸”æ€§èƒ½æŒ‡æ ‡æ˜ç¡®çš„ç³»ç»Ÿï¼Œæ¶æ„è®¾è®¡åˆ°èƒ½å¤Ÿæ”¯æŒç³»ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡è¦æ±‚å°±è¶³å¤Ÿäº†ï¼Œä½†è¦ç•™æœ‰æ‰©å±•æ¶æ„çš„æ¥å£ä»¥ä¾¿ä¸å¤‡ä¹‹éœ€ã€‚å¯¹äºä¸æ–­å‘å±•çš„ç³»ç»Ÿï¼Œå¦‚ç”µå•†å¹³å°ï¼Œåº”è®¾è®¡åˆ°èƒ½æ»¡è¶³ä¸‹ä¸€é˜¶æ®µç”¨æˆ·é‡å’Œæ€§èƒ½æŒ‡æ ‡è¦æ±‚çš„ç¨‹åº¦ï¼Œå¹¶æ ¹æ®ä¸šåŠ¡çš„å¢é•¿ä¸æ–­çš„è¿­ä»£å‡çº§æ¶æ„ï¼Œä»¥æ”¯æŒæ›´é«˜çš„å¹¶å‘å’Œæ›´ä¸°å¯Œçš„ä¸šåŠ¡ã€‚ æœåŠ¡ç«¯æ¶æ„å’Œå¤§æ•°æ®æ¶æ„æœ‰ä»€ä¹ˆåŒºåˆ«? æ‰€è°“çš„â€œå¤§æ•°æ®â€å…¶å®æ˜¯æµ·é‡æ•°æ®é‡‡é›†æ¸…æ´—è½¬æ¢ã€æ•°æ®å­˜å‚¨ã€æ•°æ®åˆ†æã€æ•°æ®æœåŠ¡ç­‰åœºæ™¯è§£å†³æ–¹æ¡ˆçš„ä¸€ä¸ªç»Ÿç§°ï¼Œåœ¨æ¯ä¸€ä¸ªåœºæ™¯éƒ½åŒ…å«äº†å¤šç§å¯é€‰çš„æŠ€æœ¯ï¼Œå¦‚æ•°æ®é‡‡é›†æœ‰ Flumeã€Sqoopã€Kettle ç­‰ï¼Œæ•°æ®å­˜å‚¨æœ‰åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ HDFSã€FastDFSï¼ŒNoSQL æ•°æ®åº“ HBaseã€MongoDB ç­‰ï¼Œæ•°æ®åˆ†ææœ‰ Spark æŠ€æœ¯æ ˆã€æœºå™¨å­¦ä¹ ç®—æ³•ç­‰ã€‚æ€»çš„æ¥è¯´å¤§æ•°æ®æ¶æ„å°±æ˜¯æ ¹æ®ä¸šåŠ¡çš„éœ€æ±‚ï¼Œæ•´åˆå„ç§å¤§æ•°æ®ç»„ä»¶ç»„åˆè€Œæˆçš„æ¶æ„ï¼Œä¸€èˆ¬ä¼šæä¾›åˆ†å¸ƒå¼å­˜å‚¨ã€åˆ†å¸ƒå¼è®¡ç®—ã€å¤šç»´åˆ†æã€æ•°æ®ä»“åº“ã€æœºå™¨å­¦ä¹ ç®—æ³•ç­‰èƒ½åŠ›ã€‚è€ŒæœåŠ¡ç«¯æ¶æ„æ›´å¤šæŒ‡çš„æ˜¯åº”ç”¨ç»„ç»‡å±‚é¢çš„æ¶æ„ï¼Œåº•å±‚èƒ½åŠ›å¾€å¾€æ˜¯ç”±å¤§æ•°æ®æ¶æ„æ¥æä¾›ã€‚ æœ‰æ²¡æœ‰ä¸€äº›æ¶æ„è®¾è®¡çš„åŸåˆ™ï¼Ÿ N+1 è®¾è®¡ã€‚ç³»ç»Ÿä¸­çš„æ¯ä¸ªç»„ä»¶éƒ½åº”åšåˆ°æ²¡æœ‰å•ç‚¹æ•…éšœï¼› å›æ»šè®¾è®¡ã€‚ç¡®ä¿ç³»ç»Ÿå¯ä»¥å‘å‰å…¼å®¹ï¼Œåœ¨ç³»ç»Ÿå‡çº§æ—¶åº”èƒ½æœ‰åŠæ³•å›æ»šç‰ˆæœ¬ï¼› ç¦ç”¨è®¾è®¡ã€‚åº”è¯¥æä¾›æ§åˆ¶å…·ä½“åŠŸèƒ½æ˜¯å¦å¯ç”¨çš„é…ç½®ï¼Œåœ¨ç³»ç»Ÿå‡ºç°æ•…éšœæ—¶èƒ½å¤Ÿå¿«é€Ÿä¸‹çº¿åŠŸèƒ½ï¼› ç›‘æ§è®¾è®¡ã€‚åœ¨è®¾è®¡é˜¶æ®µå°±è¦è€ƒè™‘ç›‘æ§çš„æ‰‹æ®µï¼› å¤šæ´»æ•°æ®ä¸­å¿ƒè®¾è®¡ã€‚è‹¥ç³»ç»Ÿéœ€è¦æé«˜çš„é«˜å¯ç”¨ï¼Œåº”è€ƒè™‘åœ¨å¤šåœ°å®æ–½æ•°æ®ä¸­å¿ƒè¿›è¡Œå¤šæ´»ï¼Œè‡³å°‘åœ¨ä¸€ä¸ªæœºæˆ¿æ–­ç”µçš„æƒ…å†µä¸‹ç³»ç»Ÿä¾ç„¶å¯ç”¨ï¼› é‡‡ç”¨æˆç†Ÿçš„æŠ€æœ¯ã€‚åˆšå¼€å‘çš„æˆ–å¼€æºçš„æŠ€æœ¯å¾€å¾€å­˜åœ¨å¾ˆå¤šéšè—çš„ bugï¼Œå‡ºäº†é—®é¢˜æ²¡æœ‰å•†ä¸šæ”¯æŒå¯èƒ½ä¼šæ˜¯ä¸€ä¸ªç¾éš¾ï¼› èµ„æºéš”ç¦»è®¾è®¡ã€‚åº”é¿å…å•ä¸€ä¸šåŠ¡å ç”¨å…¨éƒ¨èµ„æºï¼› æ¶æ„åº”èƒ½æ°´å¹³æ‰©å±•ã€‚ç³»ç»Ÿåªæœ‰åšåˆ°èƒ½æ°´å¹³æ‰©å±•ï¼Œæ‰èƒ½æœ‰æ•ˆé¿å…ç“¶é¢ˆé—®é¢˜ï¼› éæ ¸å¿ƒåˆ™è´­ä¹°ã€‚éæ ¸å¿ƒåŠŸèƒ½è‹¥éœ€è¦å ç”¨å¤§é‡çš„ç ”å‘èµ„æºæ‰èƒ½è§£å†³ï¼Œåˆ™è€ƒè™‘è´­ä¹°æˆç†Ÿçš„äº§å“ï¼› ä½¿ç”¨å•†ç”¨ç¡¬ä»¶ã€‚å•†ç”¨ç¡¬ä»¶èƒ½æœ‰æ•ˆé™ä½ç¡¬ä»¶æ•…éšœçš„æœºç‡ï¼› å¿«é€Ÿè¿­ä»£ã€‚ç³»ç»Ÿåº”è¯¥å¿«é€Ÿå¼€å‘å°åŠŸèƒ½æ¨¡å—ï¼Œå°½å¿«ä¸Šçº¿è¿›è¡ŒéªŒè¯ï¼Œæ—©æ—¥å‘ç°é—®é¢˜å¤§å¤§é™ä½ç³»ç»Ÿäº¤ä»˜çš„é£é™©ï¼› æ— çŠ¶æ€è®¾è®¡ã€‚æœåŠ¡æ¥å£åº”è¯¥åšæˆæ— çŠ¶æ€çš„ï¼Œå½“å‰æ¥å£çš„è®¿é—®ä¸ä¾èµ–äºæ¥å£ä¸Šæ¬¡è®¿é—®çš„çŠ¶æ€ã€‚ ","date":"2022-08-29","objectID":"/highly-concurrent-architecture-evolution/:5:0","series":["reproduce"],"tags":["é«˜å¹¶å‘"],"title":"é«˜å¹¶å‘åˆ†å¸ƒå¼æ¶æ„æ¼”è¿›","uri":"/highly-concurrent-architecture-evolution/#4-æ¶æ„è®¾è®¡æ€»ç»“"},{"categories":["mysql"],"content":"xiaobinqt,MySQLè¡¨é”å’Œè¡Œé”,MySQLå¸¸è§ç´¢å¼•,è„è¯»,å¹»è¯»,ä¸å¯é‡å¤è¯»,æ­»é”é—®é¢˜å‡ºç°çš„åŸå› ,æ­»é”è¯¥å¦‚ä½•é¿å…,è¦†ç›–ç´¢å¼•,ç´¢å¼•ä¸‹æ¨","date":"2022-07-11","objectID":"/mysql-faq-3/","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/"},{"categories":["mysql"],"content":" InnoDBã€MyISAMçš„åŒºåˆ« ç£ç›˜æ–‡ä»¶ä¸åŒï¼š MyISAM å¼•æ“çš„è¡¨ä¼šç”Ÿæˆä¸‰ä¸ªç£ç›˜æ–‡ä»¶ï¼š table_name.frm è¯¥æ–‡ä»¶ä¸­å­˜å‚¨è¡¨çš„ç»“æ„ä¿¡æ¯ã€‚table_name.MYD è¯¥æ–‡ä»¶ä¸­å­˜å‚¨è¡¨çš„è¡Œæ•°æ®ã€‚table_name.MYI è¯¥æ–‡ä»¶ä¸­å­˜å‚¨è¡¨çš„ç´¢å¼•æ•°æ®ã€‚ è€Œ InnoDB å¼•æ“çš„è¡¨åªä¼šç”Ÿæˆä¸¤ä¸ªç£ç›˜æ–‡ä»¶ï¼š table_name.frm è¯¥æ–‡ä»¶ä¸­å­˜å‚¨è¡¨çš„ç»“æ„ä¿¡æ¯ã€‚table_name.ibd è¯¥æ–‡ä»¶ä¸­å­˜å‚¨è¡¨çš„è¡Œæ•°æ®å’Œç´¢å¼•æ•°æ®ã€‚ InnoDB æ”¯æŒèšç°‡ç´¢å¼•ï¼Œè€Œ MyISAM åªæ”¯æŒéèšç°‡ç´¢å¼•ï¼Œå› ä¸º MyISAM ç´¢å¼•æ•°æ®å’Œè¡¨æ•°æ®æ˜¯åˆ†å¼€å­˜å‚¨çš„ã€‚ InnoDB åŸºäº Undo-log æ—¥å¿—å®ç°äº†äº‹åŠ¡æœºåˆ¶ï¼Œä½† MyISAM æ²¡æœ‰ï¼Œæ‰€ä»¥ MyISAM ä¸æ”¯æŒäº‹åŠ¡ã€‚ InnoDB åŸºäº Redo-log æ—¥å¿—å®ç°äº†æ•…éšœæ¢å¤æœºåˆ¶ï¼Œä½† MyISAM åˆ™åªèƒ½ä¾é  Bin-logï¼Œå› æ­¤ä¼šæœ‰ä¸¢å¤±æ•°æ®çš„é£é™©ã€‚ InnoDB å¯ä»¥åŸºäºèšç°‡ç´¢å¼•å®ç°è¡Œé”ï¼ŒåŒæ—¶è¿˜å…¼å®¹è¡¨é”ï¼Œä½† MyISAM ä»…æ”¯æŒè¡¨é”ã€‚ InnoDB å› ä¸ºæ”¯æŒè¡Œé”ä»¥åŠ MVCC æœºåˆ¶ï¼Œæ‰€ä»¥å¹¶å‘åœºæ™¯ä¸‹çš„æ€§èƒ½ä¼šè¿œè¶… MyISAM å¼•æ“ã€‚ InnoDB ç”±äºè®¾è®¡äº† BufferPool ç¼“å†²æ± ï¼Œæ‰€ä»¥å†…å­˜åˆ©ç”¨åº¦ä¼šè¿œè¶… MyISAM å¼•æ“ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:1:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#innodbmyisamçš„åŒºåˆ«"},{"categories":["mysql"],"content":" è¡Œé”å’Œè¡¨é”çš„åŒºåˆ«ä¸»è¦æ˜¯ç²’åº¦ä¸åŒï¼Œè¡¨é”æ˜¯æŒ‡å¯¹ä¸€æ•´å¼ è¡¨åŠ é”ï¼Œå½“åŠ é”åï¼Œå…¶ä»–æ¥è®¿é—®è¯¥è¡¨çš„äº‹åŠ¡éƒ½ä¼šè¢«é˜»å¡ï¼Œè€Œè¡Œé”çš„ç²’åº¦åˆ™å°å¾ˆå¤šï¼Œæ˜¯æŒ‡é’ˆå¯¹äºä¸€æ¡/å¤šæ¡æ•°æ®åŠ é”ï¼Œå¹¶ä¸ä¼šé˜»å¡æ“ä½œåŒä¸€è¡¨çš„äº‹åŠ¡ï¼Œè€Œä»…ä»…åªä¼šé˜»å¡æ“ä½œç›¸åŒè¡Œæ•°æ®çš„äº‹åŠ¡ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:2:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#è¡Œé”å’Œè¡¨é”çš„åŒºåˆ«"},{"categories":["mysql"],"content":" å…±äº«é”å’Œæ’ä»–é”çš„åŒºåˆ«å…±äº«é”å…è®¸å¤šä¸ªäº‹åŠ¡ä¸€èµ·æŒæœ‰ï¼Œè€Œæ’ä»–é”åœ¨åŒä¸€æ—¶é—´å†…åªèƒ½å…è®¸ä¸€ä¸ªäº‹åŠ¡æŒæœ‰ï¼Œä¹Ÿå°±æ˜¯ä½†å‡¡å‡ºç°æ’ä»–é”çš„åœºæ™¯ï¼Œå…¶ä»–äº‹åŠ¡éƒ½éœ€è¦é˜»å¡ç­‰å¾…ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:3:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#å…±äº«é”å’Œæ’ä»–é”çš„åŒºåˆ«"},{"categories":["mysql"],"content":" è¡¨é”ã€è¡Œé”æœ‰å“ªäº›è¡¨é”æœ‰å…ƒæ•°æ®é”ã€æ„å‘é”ã€è‡ªå¢é”ã€å…¨å±€é”è¿™å››ç§ï¼Œè¡Œé”æœ‰è®°å½•é”ã€é—´éš™é”ã€ä¸´é”®é”ã€æ’å…¥æ„å‘é”è¿™å››ç±»ï¼Œè¡Œé”åœ¨ MySQL ä¸­æ˜¯ InnoDB å¼•æ“ç‹¬æœ‰çš„ï¼Œå¹¶ä¸” InnoDB çš„è¡Œé”å’Œè¡¨é”ä¹‹é—´ï¼Œæ˜¯ç›¸äº’å…¼å®¹çš„ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:4:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#è¡¨é”è¡Œé”æœ‰å“ªäº›"},{"categories":["mysql"],"content":" è®°å½•é”ã€é—´éš™é”ã€ä¸´é”®é”è¿™ä¸‰ç§è¡Œé”æœ‰ä»€ä¹ˆåŒºåˆ«è®°å½•é”æ˜¯æŒ‡å¯¹ä¸€æ¡æ•°æ®ä¸Šé”ã€å½“æˆ‘ä»¬é’ˆå¯¹ä¸»é”®æˆ–è€…å”¯ä¸€ç´¢å¼•åŠ é”çš„æ—¶å€™ï¼Œ MySQL é»˜è®¤ä¼šå¯¹æŸ¥è¯¢çš„è¿™ä¸€è¡Œæ•°æ®åŠ è¡Œé”ï¼Œé¿å…å…¶ä»–äº‹åŠ¡å¯¹è¿™ä¸€è¡Œæ•°æ®è¿›è¡Œä¿®æ”¹ã€‚ é—´éš™é”ï¼Œå°±æ˜¯é”å®šä¸€ä¸ªç´¢å¼•åŒºé—´ã€‚åœ¨æ™®é€šç´¢å¼•æˆ–è€…å”¯ä¸€ç´¢å¼•åˆ—ä¸Šï¼Œç”±äºç´¢å¼•æ˜¯åŸºäº B+ æ ‘çš„ç»“æ„å­˜å‚¨ï¼Œæ‰€ä»¥é»˜è®¤ä¼šå­˜åœ¨ä¸€ä¸ªç´¢å¼•åŒºé—´ã€‚è€Œé—´éš™é”ï¼Œå°±æ˜¯æŸä¸ªäº‹åŠ¡å¯¹ç´¢å¼•åˆ—åŠ é”çš„æ—¶å€™ï¼Œé»˜è®¤é”å®šå¯¹åº”ç´¢å¼•çš„å·¦å³å¼€åŒºé—´èŒƒå›´ã€‚åœ¨åŸºäºç´¢å¼•åˆ—çš„èŒƒå›´æŸ¥è¯¢ï¼Œæ— è®ºæ˜¯å¦æ˜¯å”¯ä¸€ç´¢å¼•ï¼Œéƒ½ä¼šè‡ªåŠ¨è§¦å‘é—´éš™é”ã€‚æ¯”å¦‚åŸºäºbetweençš„èŒƒå›´æŸ¥è¯¢ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªå·¦å³å¼€åŒºé—´çš„é—´éš™é”ã€‚ ä¸´é”®é”ï¼Œå®ƒç›¸å½“äºã€Œè¡Œé”+é—´éš™é”ã€çš„ç»„åˆï¼Œä¹Ÿå°±æ˜¯å®ƒçš„é”å®šèŒƒå›´æ—¢åŒ…å«äº†ç´¢å¼•è®°å½•ï¼Œä¹ŸåŒ…å«äº†ç´¢å¼•åŒºé—´ï¼Œå®ƒä¼šé”å®šä¸€ä¸ªå·¦å¼€å³é—­åŒºé—´çš„æ•°æ®èŒƒå›´ã€‚æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨éå”¯ä¸€ç´¢å¼•åˆ—è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šåŠ ä¸€ä¸ªä¸´é”®é”ï¼Œé”å®šä¸€ä¸ªå·¦å¼€å³é—­åŒºé—´çš„èŒƒå›´ã€‚ æ€»çš„æ¥è¯´ï¼Œè®°å½•é”ã€ä¸´é”®é”ã€é—´éš™é”åªæ˜¯è¡¨ç¤ºé”å®šæ•°æ®çš„èŒƒå›´ï¼Œæœ€ç»ˆç›®çš„æ˜¯ä¸ºäº†è§£å†³å¹»è¯»çš„é—®é¢˜ã€‚è€Œä¸´é”®é”ç›¸å½“äºã€Œè¡Œé”+é—´éš™é”ã€ï¼Œå› æ­¤å½“æˆ‘ä»¬ä½¿ç”¨éå”¯ä¸€ç´¢å¼•è¿›è¡Œç²¾å‡†åŒ¹é…çš„æ—¶å€™ï¼Œä¼šé»˜è®¤åŠ ä¸´é”®é”ï¼Œå› ä¸ºå®ƒéœ€è¦é”å®šåŒ¹é…çš„è¿™ä¸€è¡Œæ•°æ®ï¼Œè¿˜éœ€è¦é”å®šè¿™ä¸€è¡Œæ•°æ®å¯¹åº”çš„å·¦å¼€å³é—­åŒºé—´ã€‚å› æ­¤åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå°½å¯èƒ½ä½¿ç”¨å”¯ä¸€ç´¢å¼•æˆ–è€…ä¸»é”®ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ï¼Œé¿å…å¤§é¢ç§¯çš„é”å®šé€ æˆæ€§èƒ½å½±å“ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:5:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#è®°å½•é”é—´éš™é”ä¸´é”®é”è¿™ä¸‰ç§è¡Œé”æœ‰ä»€ä¹ˆåŒºåˆ«"},{"categories":["mysql"],"content":" éšå¼é”æˆ–æ‰‹åŠ¨åŠ é”åï¼Œä»€ä¹ˆæ—¶å€™é‡Šæ”¾é”å‡ ä¹æ‰€æœ‰é‡Šæ”¾é”çš„å·¥ä½œéƒ½æ˜¯ MySQL è‡ªåŠ¨å®Œæˆçš„ï¼Œä½†ä¸åŒäº‹åŠ¡éš”ç¦»çº§åˆ«ä¸­ï¼Œé‡Šæ”¾é”çš„æ—¶æœºä¹Ÿä¸åŒï¼Œå¦‚æœç›®å‰æ˜¯è¯»æœªæäº¤çº§åˆ«ï¼ŒMySQL æ‰§è¡Œå®Œä¸€æ¡è¯­å¥åå°±ä¼šç«‹é©¬é‡Šæ”¾é”ã€‚å¦‚æœæ˜¯å…¶ä»–çº§åˆ«ä¸­ï¼ŒåŸºæœ¬ä¸Šéƒ½éœ€è¦ç­‰å¾…æŒæœ‰é”çš„äº‹åŠ¡ç»“æŸï¼ˆcommit/rollbackï¼‰åæ‰ä¼šé‡Šæ”¾ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:6:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#éšå¼é”æˆ–æ‰‹åŠ¨åŠ é”åä»€ä¹ˆæ—¶å€™é‡Šæ”¾é”"},{"categories":["mysql"],"content":" MySQL5.7çš„å…±äº«æ’ä»–é”æ˜¯ä»€ä¹ˆå› ä¸ºç´¢å¼•æ ‘çš„ç»“æ„ä¼šå‘ç”Ÿå˜æ›´ï¼Œæ¯”å¦‚ä¸€ä¸ªæ— åºæ•°æ®æ’å…¥æ—¶ï¼Œå°±ä¼šå¯¼è‡´æ ‘èŠ‚ç‚¹çš„åˆ†è£‚ï¼Œè¿™æ—¶éœ€è¦æŒªåŠ¨æ ‘ä¸­çš„ä¸€äº›èŠ‚ç‚¹ä½ç½®ï¼Œä¸ºäº†é˜²æ­¢å…¶ä»–äº‹åŠ¡å†æ¬¡ç ´åæ ‘ç»“æ„ï¼Œæˆ–ä»ç´¢å¼•æ ‘ä¸­è¯»åˆ°ä¸å¯¹çš„æ•°æ®ï¼Œæ‰€ä»¥ä¼šå¯¹æ•´æ£µæ ‘ä¸Šé”ï¼Œè¿™ä¸ªé—®é¢˜è¢«ç§°ä¸ºSMOé—®é¢˜ï¼Œå…±äº«æ’ä»–é”ä¸»è¦å°±æ˜¯ç”¨æ¥è§£å†³SMOé—®é¢˜ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:7:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#mysql57çš„å…±äº«æ’ä»–é”æ˜¯ä»€ä¹ˆ"},{"categories":["mysql"],"content":" æ­»é”å‘ç”Ÿçš„åŸå› ï¼Œè¯¥å¦‚ä½•é¿å…æ­»é”ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¸¤ä¸ªæˆ–è€…ä¸¤ä¸ªä»¥ä¸Šçš„çº¿ç¨‹åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œäº‰å¤ºåŒä¸€ä¸ªå…±äº«èµ„æºé€ æˆçš„ç›¸äº’ç­‰å¾…çš„ç°è±¡ã€‚ å¦‚æœæ²¡æœ‰å¤–éƒ¨å¹²é¢„ï¼Œçº¿ç¨‹ä¼šä¸€ç›´é˜»å¡æ— æ³•å¾€ä¸‹æ‰§è¡Œï¼Œè¿™äº›ä¸€ç›´å¤„äºç›¸äº’ç­‰å¾…èµ„æºçš„çº¿ç¨‹å°±ç§°ä¸ºæ­»é”çº¿ç¨‹ã€‚ å¯¼è‡´æ­»é”çš„æ¡ä»¶æœ‰å››ä¸ªï¼Œä¹Ÿå°±æ˜¯è¿™å››ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³å°±ä¼šäº§ç”Ÿæ­»é”ğŸ‘‡ äº’æ–¥æ¡ä»¶ï¼Œå…±äº«èµ„æº X å’Œ Y åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹å ç”¨ è¯·æ±‚å’Œä¿æŒæ¡ä»¶ï¼Œçº¿ç¨‹ T1 å·²ç»å–å¾—å…±äº«èµ„æº Xï¼Œåœ¨ç­‰å¾…å…±äº«èµ„æº Y çš„æ—¶å€™ï¼Œä¸é‡Šæ”¾å…±äº«èµ„æº X ä¸å¯æŠ¢å æ¡ä»¶ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å¼ºè¡ŒæŠ¢å çº¿ç¨‹ T1 å æœ‰çš„èµ„æº å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œçº¿ç¨‹ T1 ç­‰å¾…çº¿ç¨‹ T2 å æœ‰çš„èµ„æºï¼Œçº¿ç¨‹ T2 ç­‰å¾…çº¿ç¨‹ T1 å æœ‰çš„èµ„æºï¼Œå°±æ˜¯å¾ªç¯ç­‰å¾… å¯¼è‡´æ­»é”ä¹‹åï¼Œåªèƒ½é€šè¿‡äººå·¥å¹²é¢„æ¥è§£å†³ï¼Œæ¯”å¦‚é‡å¯æœåŠ¡ï¼Œæˆ–è€…æ€æ‰æŸä¸ªçº¿ç¨‹ã€‚æ‰€ä»¥ï¼Œåªèƒ½åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œå»è§„é¿å¯èƒ½å‡ºç°çš„æ­»é”é—®é¢˜ã€‚ æŒ‰ç…§æ­»é”å‘ç”Ÿçš„å››ä¸ªæ¡ä»¶ï¼Œåªéœ€è¦ç ´åå…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªï¼Œå°±å¯ä»¥è§£å†³ï¼Œä½†æ˜¯ï¼Œäº’æ–¥æ¡ä»¶æ˜¯æ²¡åŠæ³•ç ´åçš„ï¼Œå› ä¸ºè¿™æ˜¯äº’æ–¥é”çš„åŸºæœ¬çº¦æŸï¼Œå…¶ä»–ä¸‰æ–¹æ¡ä»¶éƒ½æœ‰åŠæ³•æ¥ç ´åï¼š å¯¹äºâ€œè¯·æ±‚å’Œä¿æŒâ€è¿™ä¸ªæ¡ä»¶ï¼Œå¯ä»¥ä¸€æ¬¡æ€§ç”³è¯·æ‰€æœ‰çš„èµ„æºï¼Œè¿™æ ·å°±ä¸å­˜åœ¨ç­‰å¾…äº†ã€‚ å¯¹äºâ€œä¸å¯æŠ¢å â€è¿™ä¸ªæ¡ä»¶ï¼Œå ç”¨éƒ¨åˆ†èµ„æºçš„çº¿ç¨‹è¿›ä¸€æ­¥ç”³è¯·å…¶ä»–èµ„æºæ—¶ï¼Œå¦‚æœç”³è¯·ä¸åˆ°ï¼Œå¯ä»¥ä¸»åŠ¨é‡Šæ”¾å®ƒå æœ‰çš„èµ„æºï¼Œè¿™æ ·ä¸å¯æŠ¢å è¿™ä¸ªæ¡ä»¶å°±ç ´åæ‰äº†ã€‚ å¯¹äºâ€œå¾ªç¯ç­‰å¾…â€è¿™ä¸ªæ¡ä»¶ï¼Œå¯ä»¥é æŒ‰åºç”³è¯·èµ„æºæ¥é¢„é˜²ã€‚æ‰€è°“æŒ‰åºç”³è¯·ï¼Œæ˜¯æŒ‡èµ„æºæ˜¯æœ‰çº¿æ€§é¡ºåºçš„ï¼Œç”³è¯·çš„æ—¶å€™å¯ä»¥å…ˆç”³è¯·èµ„æºåºå·å°çš„ï¼Œå†ç”³è¯·èµ„æºåºå·å¤§çš„ï¼Œè¿™æ ·çº¿æ€§åŒ–åè‡ªç„¶å°±ä¸å­˜åœ¨å¾ªç¯äº†ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:8:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#æ­»é”å‘ç”Ÿçš„åŸå› è¯¥å¦‚ä½•é¿å…"},{"categories":["mysql"],"content":" æœ‰å“ªäº›å¸¸è§ç´¢å¼•èšç°‡ç´¢å¼•ï¼Œåœ¨èšç°‡ç´¢å¼•ä¸­ï¼Œç´¢å¼•æ•°æ®å’Œè¡¨æ•°æ®åœ¨ç£ç›˜ä¸­çš„ä½ç½®æ˜¯ä¸€èµ·çš„ã€‚èšç°‡ç´¢å¼•å­˜çš„æ˜¯ä¸»é”®å’Œå½“å‰è¡Œçš„æ•°æ®ï¼Œä¸€å¼ è¡¨ä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œä¸€èˆ¬éƒ½ä¼šé€‰ç”¨ä¸»é”®ä½œä¸ºèšç°‡ç´¢å¼•ã€‚ä¸€èˆ¬èšç°‡ç´¢å¼•è¦æ±‚ç´¢å¼•å¿…é¡»æ˜¯éç©ºå”¯ä¸€ç´¢å¼•æ‰è¡Œã€‚ å”¯ä¸€ç´¢å¼•ï¼Œç´¢å¼•ä¸­çš„ç´¢å¼•èŠ‚ç‚¹å€¼ä¸å…è®¸é‡å¤ï¼Œä¸€èˆ¬é…åˆå”¯ä¸€çº¦æŸä½¿ç”¨ã€‚ ä¸»é”®ç´¢å¼•ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„å”¯ä¸€ç´¢å¼•ï¼Œå’Œæ™®é€šå”¯ä¸€ç´¢å¼•çš„åŒºåˆ«åœ¨äºä¸å…è®¸æœ‰ç©ºå€¼ã€‚ æ™®é€šç´¢å¼•ï¼Œé€šè¿‡KEYã€INDEXå…³é”®å­—åˆ›å»ºçš„ç´¢å¼•å°±æ˜¯è¿™ä¸ªç±»å‹ï¼Œæ²¡ä»€ä¹ˆé™åˆ¶ï¼Œå°±æ˜¯å•çº¯çš„å¯ä»¥è®©æŸ¥è¯¢å¿«ä¸€ç‚¹ã€‚ å…¨æ–‡ç´¢å¼•åœ¨ 5.7 ç‰ˆæœ¬ä¹‹å‰ï¼Œåªæœ‰ MyISAM å¼•æ“æ”¯æŒã€‚å…¨æ–‡ç´¢å¼•åªèƒ½åˆ›å»ºåœ¨CHARã€VARCHARã€TEXTç­‰è¿™äº›æ–‡æœ¬ç±»å‹å­—æ®µä¸Šï¼Œè€Œä¸”ä½¿ç”¨å…¨æ–‡ç´¢å¼•æŸ¥è¯¢æ—¶ï¼Œæ¡ä»¶å­—ç¬¦æ•°é‡å¿…é¡»å¤§äº 3 æ‰ç”Ÿæ•ˆã€‚å¦‚æœæƒ³è¦åˆ›å»ºå‡ºçš„å…¨æ–‡ç´¢å¼•æ”¯æŒä¸­æ–‡ï¼Œéœ€è¦åœ¨æœ€åæŒ‡å®šè§£æå™¨with parser ngramã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:9:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#æœ‰å“ªäº›å¸¸è§ç´¢å¼•"},{"categories":["mysql"],"content":" ä»€ä¹ˆæ˜¯ç´¢å¼•è¦†ç›–å’Œç´¢å¼•ä¸‹æ¨è¦†ç›–ç´¢å¼• æ¯”å¦‚æœ‰ä¸ªè”åˆç´¢å¼•ä¸ºuser_nameã€user_sexã€passwordï¼Œé‚£ä¹ˆ SQL: EXPLAIN SELECT `user_name`,`user_sex` FROM `zz_users` WHERE `password` = \"1234\" AND `user_sex` = \"ç”·\"; è™½ç„¶ä¸ç¬¦åˆè”åˆç´¢å¼•çš„æœ€å·¦å‰ç¼€åŒ¹é…åŸåˆ™çš„ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥ç”¨åˆ°ç´¢å¼•ï¼Œè¿™å°±æ˜¯ç´¢å¼•è¦†ç›–ã€‚ä¹Ÿå°±æ˜¯ï¼šæŸ¥è¯¢çš„åˆ—ï¼Œåœ¨ä½¿ç”¨çš„ç´¢å¼•ä¸­å·²ç»åŒ…å«ï¼Œè¢«æ‰€ä½¿ç”¨çš„ç´¢å¼•è¦†ç›–ï¼Œè¿™ç§æƒ…å†µç§°ä¹‹ä¸ºç´¢å¼•è¦†ç›–ã€‚ ç´¢å¼•ä¸‹æ¨ { [\"ç†ŠçŒ«\",\"å¥³\",\"6666\"] : 1, [\"ç«¹å­\",\"ç”·\",\"1234\"] : 2, [\"å­ç«¹\",\"ç”·\",\"4321\"] : 3, [\"1111\",\"ç”·\",\"4321\"] : 4, [\"ç«¹ç«¹\",\"å¥³\",\"8888\"] : 5 } æ¯”å¦‚ zz_users è¡¨ä¸­æœ‰æ•°æ®â˜ï¸ï¼Œç´¢å¼•user_nameã€user_sexã€passwordï¼ŒæŸ¥è¯¢ SQLï¼š SELECT * FROM `zz_users` WHERE `user_name` LIKE \"ç«¹%\" AND `user_sex`=\"ç”·\"; ç”±äºä½¿ç”¨äº†æ¨¡ç³ŠæŸ¥è¯¢ï¼Œä½†%åœ¨ç»“å°¾ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ç«¹è¿™ä¸ªå­—ä½œä¸ºæ¡ä»¶åœ¨è”åˆç´¢å¼•ä¸­æŸ¥è¯¢ï¼Œæ•´ä¸ªæŸ¥è¯¢è¿‡ç¨‹å¦‚ä¸‹ï¼š â‘  åˆ©ç”¨è”åˆç´¢å¼•ä¸­çš„user_nameå­—æ®µæ‰¾å‡ºã€Œç«¹å­ã€ç«¹ç«¹ã€ä¸¤ä¸ªç´¢å¼•èŠ‚ç‚¹ã€‚ â‘¡ è¿”å›ç´¢å¼•èŠ‚ç‚¹å­˜å‚¨çš„å€¼ã€Œ2ã€5ã€ç»™Serverå±‚ï¼Œç„¶åå»é€ä¸€åšå›è¡¨æ‰«æã€‚ â‘¢ åœ¨Serverå±‚ä¸­æ ¹æ®user_sex=\"ç”·\"è¿™ä¸ªæ¡ä»¶é€æ¡åˆ¤æ–­ï¼Œæœ€ç»ˆç­›é€‰åˆ°ã€Œç«¹å­ã€è¿™æ¡æ•°æ®ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆuser_sex=\"ç”·\"è¿™ä¸ªæ¡ä»¶ä¸åœ¨è”åˆç´¢å¼•ä¸­å¤„ç†å‘¢ï¼Ÿå› ä¸ºå‰é¢æ˜¯æ¨¡ç³ŠæŸ¥è¯¢ï¼Œæ‰€ä»¥æ‹¼æ¥èµ·æ¥æ˜¯è¿™æ ·çš„ç«¹Xç”·ï¼Œç”±äºè¿™ä¸ªXæ˜¯æœªçŸ¥çš„ï¼Œå› æ­¤æ— æ³•æ ¹æ®æœ€å·¦å‰ç¼€åŸåˆ™å»åŒ¹é…æ•°æ®ï¼Œæœ€ç»ˆè¿™é‡Œåªèƒ½ä½¿ç”¨è”åˆç´¢å¼•ä¸­user_nameå­—æ®µçš„ä¸€éƒ¨åˆ†ï¼Œåç»­çš„user_sex=\"ç”·\"è¿˜éœ€è¦å›åˆ°Serverå±‚å¤„ç†ã€‚ æ‰€è°“çš„ç´¢å¼•ä¸‹æ¨ï¼Œå°±æ˜¯å°†Serverå±‚ç­›é€‰æ•°æ®çš„å·¥ä½œï¼Œä¸‹æ¨åˆ°å¼•æ“å±‚å¤„ç†ã€‚ MySQL5.6 ååŠ å…¥ç´¢å¼•ä¸‹æ¨æœºåˆ¶åï¼Œå…¶æ‰§è¡Œè¿‡ç¨‹å°±æ˜¯ä¸‹é¢çš„é¡ºåºï¼š â‘  åˆ©ç”¨è”åˆç´¢å¼•ä¸­çš„user_nameå­—æ®µæ‰¾å‡ºã€Œç«¹å­ã€ç«¹ç«¹ã€ä¸¤ä¸ªç´¢å¼•èŠ‚ç‚¹ã€‚ â‘¡ æ ¹æ®user_sex=\"ç”·\"è¿™ä¸ªæ¡ä»¶åœ¨ç´¢å¼•èŠ‚ç‚¹ä¸­é€ä¸ªåˆ¤æ–­ï¼Œä»è€Œå¾—åˆ°ã€Œç«¹å­ã€è¿™ä¸ªèŠ‚ç‚¹ã€‚ â‘¢ æœ€ç»ˆå°†ã€Œç«¹å­ã€è¿™ä¸ªèŠ‚ç‚¹å¯¹åº”çš„ã€Œ2ã€è¿”å›ç»™Serverå±‚ï¼Œç„¶åèšç°‡ç´¢å¼•ä¸­å›è¡¨æ‹¿æ•°æ®ã€‚ ç›¸è¾ƒäºæ²¡æœ‰ç´¢å¼•ä¸‹æ¨ä¹‹å‰ï¼ŒåŸæœ¬éœ€è¦åšã€Œ2ã€5ã€ä¸¤æ¬¡å›è¡¨æŸ¥è¯¢ï¼Œä½†åœ¨æ‹¥æœ‰ç´¢å¼•ä¸‹æ¨ä¹‹åï¼Œä»…éœ€åšã€Œ2ã€ä¸€æ¬¡å›è¡¨æŸ¥è¯¢ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:10:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#ä»€ä¹ˆæ˜¯ç´¢å¼•è¦†ç›–å’Œç´¢å¼•ä¸‹æ¨"},{"categories":["mysql"],"content":" ä»€ä¹ˆæ˜¯è„è¯»ã€å¹»è¯»ã€ä¸å¯é‡å¤è¯»è„è¯»ï¼šæŒ‡ä¸€ä¸ªäº‹åŠ¡è¯»åˆ°äº†å…¶ä»–äº‹åŠ¡è¿˜æœªæäº¤çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å½“å‰äº‹åŠ¡è¯»åˆ°çš„æ•°æ®ï¼Œç”±äºè¿˜æœªæäº¤ï¼Œå› æ­¤æœ‰å¯èƒ½ä¼šå›æ»šã€‚ å¹»è¯»ï¼šå¦å¤–ä¸€ä¸ªäº‹åŠ¡åœ¨ç¬¬ä¸€ä¸ªäº‹åŠ¡è¦å¤„ç†çš„ç›®æ ‡æ•°æ®èŒƒå›´ä¹‹å†…æ–°å¢äº†æ•°æ®ï¼Œç„¶åå…ˆäºç¬¬ä¸€ä¸ªäº‹åŠ¡æäº¤é€ æˆçš„é—®é¢˜ã€‚å¹»è¯»ä»…ä¸“æŒ‡ â€œæ–°æ’å…¥çš„è¡Œâ€ã€‚ å¹»è¯»æ˜¯å¯¹è‡ªå·±æ¥è¯´çš„ï¼Œæ¯”å¦‚ï¼Œäº‹åŠ¡ A åœ¨å¯¹è¡¨ä¸­å¤šè¡Œæ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå°†æ€§åˆ«ã€Œç”·ã€å¥³ã€æ”¹ä¸ºã€Œ0ã€1ã€ï¼Œæ­¤æ—¶äº‹åŠ¡ B åˆæ’å…¥äº†ä¸€æ¡æ€§åˆ«ä¸ºç”·çš„æ•°æ®ï¼Œå½“äº‹åŠ¡ A æäº¤åï¼Œå†æ¬¡æŸ¥è¯¢è¡¨æ—¶ï¼Œä¼šå‘ç°è¡¨ä¸­ä¾æ—§å­˜åœ¨ä¸€æ¡æ€§åˆ«ä¸ºç”·çš„æ•°æ®ã€‚ ä¸å¯é‡å¤è¯»ï¼šæŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¤šæ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œå…ˆåè¯»å–åˆ°çš„æ•°æ®ä¸ä¸€è‡´ã€‚ äº‹åŠ¡ A æ‰§è¡Œä¸‹å•ä¸šåŠ¡æ—¶ï¼Œå› ä¸ºæ·»åŠ ç‰©æµä¿¡æ¯çš„æ—¶å€™å‡ºé”™äº†ï¼Œå¯¼è‡´æ•´ä¸ªäº‹åŠ¡å›æ»šï¼Œäº‹åŠ¡å›æ»šå®Œæˆåï¼Œäº‹åŠ¡ A å°±ç»“æŸäº†ã€‚ä½†äº‹åŠ¡ B å´å¹¶æœªç»“æŸï¼Œåœ¨äº‹åŠ¡ B ä¸­ï¼Œåœ¨äº‹åŠ¡ A æ‰§è¡Œæ—¶è¯»å–äº†ä¸€æ¬¡å‰©ä½™åº“å­˜ï¼Œç„¶ååœ¨äº‹åŠ¡ A å›æ»šååˆè¯»å–äº†ä¸€æ¬¡å‰©ä½™åº“å­˜ï¼Œä»”ç»†æƒ³æƒ³ï¼šB äº‹åŠ¡ç¬¬ä¸€æ¬¡è¯»åˆ°çš„å‰©ä½™åº“å­˜æ˜¯æ‰£å‡ä¹‹åçš„ï¼Œç¬¬äºŒæ¬¡è¯»åˆ°çš„å‰©ä½™åº“å­˜åˆ™æ˜¯æ‰£å‡ä¹‹å‰çš„ï¼ˆå› ä¸º A äº‹åŠ¡å›æ»šåˆåŠ å›å»äº†ï¼‰ï¼Œå¯¼è‡´ä¸¤æ¬¡è¯»å–çš„æ•°æ®ä¸ä¸€è‡´ï¼Œè¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:11:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#ä»€ä¹ˆæ˜¯è„è¯»å¹»è¯»ä¸å¯é‡å¤è¯»"},{"categories":["mysql"],"content":" ä»€ä¹ˆæ˜¯è„å†™å¤šä¸ªäº‹åŠ¡ä¸€èµ·æ“ä½œåŒä¸€æ¡æ•°æ®ï¼Œä¾‹å¦‚ä¸¤ä¸ªäº‹åŠ¡åŒæ—¶å‘è¡¨ä¸­æ·»åŠ ä¸€æ¡ID=88çš„æ•°æ®ï¼Œæ­¤æ—¶å°±ä¼šé€ æˆæ•°æ®è¦†ç›–ï¼Œæˆ–è€…ä¸»é”®å†²çªçš„é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿè¢«ç§°ä¹‹ä¸ºæ›´æ–°ä¸¢å¤±é—®é¢˜ã€‚ ","date":"2022-07-11","objectID":"/mysql-faq-3/:12:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#ä»€ä¹ˆæ˜¯è„å†™"},{"categories":["mysql"],"content":" å‚è€ƒ å»ºç«‹ç´¢å¼•çš„æ­£ç¡®å§¿åŠ¿ä¸ä½¿ç”¨ç´¢å¼•çš„æœ€ä½³æŒ‡å—ï¼ ACIDåŸåˆ™ã€äº‹åŠ¡éš”ç¦»çº§åˆ«åŠäº‹åŠ¡æœºåˆ¶åŸç†å‰–æ å…¨è§£MySQLä¹‹æ­»é”é—®é¢˜åˆ†æã€äº‹åŠ¡éš”ç¦»ä¸é”æœºåˆ¶çš„åº•å±‚åŸç†å‰–æ ","date":"2022-07-11","objectID":"/mysql-faq-3/:13:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸‰ï¼‰","uri":"/mysql-faq-3/#å‚è€ƒ"},{"categories":["web"],"content":"xiaobinqt,session,cookie,token çš„åŒºåˆ«,jwt token,JWT,token","date":"2022-06-11","objectID":"/session-cookie-token-difference/","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/"},{"categories":["web"],"content":" Cookie å’Œ SessionHTTP åè®®æ˜¯ä¸€ç§æ— çŠ¶æ€åè®®ï¼Œå³æ¯æ¬¡æœåŠ¡ç«¯æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯·æ±‚æ—¶ï¼Œéƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¹¶ä¸çŸ¥é“å®¢æˆ·ç«¯çš„å†å²è¯·æ±‚è®°å½•ï¼›Session å’Œ Cookie çš„ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†å¼¥è¡¥ HTTP çš„æ— çŠ¶æ€ç‰¹æ€§ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:0","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#cookie-å’Œ-session"},{"categories":["web"],"content":" Session æ˜¯ä»€ä¹ˆå®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯ä¼šä¸ºè¿™æ¬¡è¯·æ±‚å¼€è¾Ÿä¸€å—å†…å­˜ç©ºé—´ï¼Œè¿™ä¸ªå¯¹è±¡ä¾¿æ˜¯ Session å¯¹è±¡ï¼Œå­˜å‚¨ç»“æ„ä¸º ConcurrentHashMapã€‚Session å¼¥è¡¥äº† HTTP æ— çŠ¶æ€ç‰¹æ€§ï¼ŒæœåŠ¡å™¨å¯ä»¥åˆ©ç”¨ Session å­˜å‚¨å®¢æˆ·ç«¯åœ¨åŒä¸€ä¸ªä¼šè¯æœŸé—´çš„ä¸€äº›æ“ä½œè®°å½•ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:1","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#session-æ˜¯ä»€ä¹ˆ"},{"categories":["web"],"content":" Session å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¼šè¯æœåŠ¡å™¨ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œå¼€è¾Ÿäº†ä¸€å— Session ç©ºé—´ï¼ˆåˆ›å»ºäº†Sessionå¯¹è±¡ï¼‰ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä¸ª sessionId ï¼Œå¹¶é€šè¿‡å“åº”å¤´çš„ Set-Cookieï¼šJSESSIONID=XXXXXXX å‘½ä»¤ï¼Œå‘å®¢æˆ·ç«¯å‘é€è¦æ±‚è®¾ç½® Cookie çš„å“åº”ï¼›å®¢æˆ·ç«¯æ”¶åˆ°å“åº”åï¼Œåœ¨æœ¬æœºå®¢æˆ·ç«¯è®¾ç½®äº†ä¸€ä¸ª JSESSIONID=XXXXXXX çš„ Cookie ä¿¡æ¯ï¼Œè¯¥ Cookie çš„è¿‡æœŸæ—¶é—´ä¸ºæµè§ˆå™¨ä¼šè¯ç»“æŸã€‚ ä¼šè¯ æ¥ä¸‹æ¥å®¢æˆ·ç«¯æ¯æ¬¡å‘åŒä¸€ä¸ªç½‘ç«™å‘é€è¯·æ±‚æ—¶ï¼Œè¯·æ±‚å¤´éƒ½ä¼šå¸¦ä¸Šè¯¥ Cookie ä¿¡æ¯ï¼ˆåŒ…å« sessionId ï¼‰ï¼Œç„¶åï¼ŒæœåŠ¡å™¨é€šè¿‡è¯»å–è¯·æ±‚å¤´ä¸­çš„ Cookie ä¿¡æ¯ï¼Œè·å–åç§°ä¸º JSESSIONID çš„å€¼ï¼Œå¾—åˆ°æ­¤æ¬¡è¯·æ±‚çš„ sessionIdã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:2","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#session-å¦‚ä½•åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¼šè¯"},{"categories":["web"],"content":" Session çš„ç¼ºç‚¹Session æœºåˆ¶æœ‰ä¸ªç¼ºç‚¹ï¼Œæ¯”å¦‚ A æœåŠ¡å™¨å­˜å‚¨äº† Sessionï¼Œå°±æ˜¯åšäº†è´Ÿè½½å‡è¡¡åï¼Œå‡å¦‚ä¸€æ®µæ—¶é—´å†… A çš„è®¿é—®é‡æ¿€å¢ï¼Œä¼šè½¬å‘åˆ° B è¿›è¡Œè®¿é—®ï¼Œä½†æ˜¯ B æœåŠ¡å™¨å¹¶æ²¡æœ‰å­˜å‚¨ A çš„ Sessionï¼Œä¼šå¯¼è‡´ Session çš„å¤±æ•ˆã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:3","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#session-çš„ç¼ºç‚¹"},{"categories":["web"],"content":" Cookies æ˜¯ä»€ä¹ˆHTTP åè®®ä¸­çš„ Cookie åŒ…æ‹¬ Web Cookie å’Œæµè§ˆå™¨ Cookieï¼Œå®ƒæ˜¯æœåŠ¡å™¨å‘é€åˆ° Web æµè§ˆå™¨çš„ä¸€å°å—æ•°æ®ã€‚æœåŠ¡å™¨å‘é€åˆ°æµè§ˆå™¨çš„ Cookieï¼Œæµè§ˆå™¨ä¼šè¿›è¡Œå­˜å‚¨ï¼Œå¹¶ä¸ä¸‹ä¸€ä¸ªè¯·æ±‚ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨ã€‚é€šå¸¸ï¼Œå®ƒç”¨äºåˆ¤æ–­ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€ä¸ªæµè§ˆå™¨ï¼Œä¾‹å¦‚ç”¨æˆ·ä¿æŒç™»å½•çŠ¶æ€ã€‚ HTTP Cookie æœºåˆ¶æ˜¯ HTTP åè®®æ— çŠ¶æ€çš„ä¸€ç§è¡¥å……å’Œæ”¹è‰¯ Cookie ä¸»è¦ç”¨äºä¸‹é¢ä¸‰ä¸ªç›®çš„ ä¼šè¯ç®¡ç† ç™»é™†ã€è´­ç‰©è½¦ã€æ¸¸æˆå¾—åˆ†æˆ–è€…æœåŠ¡å™¨åº”è¯¥è®°ä½çš„å…¶ä»–å†…å®¹ ä¸ªæ€§åŒ– ç”¨æˆ·åå¥½ã€ä¸»é¢˜æˆ–è€…å…¶ä»–è®¾ç½® è¿½è¸ª è®°å½•å’Œåˆ†æç”¨æˆ·è¡Œä¸º Cookie æ›¾ç»ç”¨äºä¸€èˆ¬çš„å®¢æˆ·ç«¯å­˜å‚¨ã€‚è™½ç„¶è¿™æ˜¯åˆæ³•çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯åœ¨å®¢æˆ·ç«¯ä¸Šå­˜å‚¨æ•°æ®çš„å”¯ä¸€æ–¹æ³•ï¼Œä½†å¦‚ä»Šå»ºè®®ä½¿ç”¨ç°ä»£å­˜å‚¨ APIã€‚Cookie éšæ¯ä¸ªè¯·æ±‚ä¸€èµ·å‘é€ï¼Œå› æ­¤å®ƒä»¬å¯èƒ½ä¼šé™ä½æ€§èƒ½ï¼ˆå°¤å…¶æ˜¯å¯¹äºç§»åŠ¨æ•°æ®è¿æ¥è€Œè¨€ï¼‰ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:4","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#cookies-æ˜¯ä»€ä¹ˆ"},{"categories":["web"],"content":" åˆ›å»º Cookieå½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘é€å¸¦æœ‰å“åº”çš„ Set-Cookie æ ‡å¤´ï¼ŒCookie é€šå¸¸ç”±æµè§ˆå™¨å­˜å‚¨ï¼Œç„¶åå°† Cookie ä¸ HTTP æ ‡å¤´ä¸€åŒå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚ å‚æ•°å ä½œç”¨ Max-Age è®¾ç½® cookie çš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ Domain æŒ‡å®šäº† Cookie æ‰€å±çš„åŸŸå Path æŒ‡å®šäº† Cookie æ‰€å±çš„è·¯å¾„ HttpOnly å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½é æµè§ˆå™¨ Http åè®®ä¼ è¾“,ç¦æ­¢å…¶ä»–æ–¹å¼è®¿é—® Secure å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½åœ¨ Https å®‰å…¨åè®®ä¸­ä¼ è¾“,å¦‚æœæ˜¯ Http åˆ™ç¦æ­¢ä¼ è¾“ Set-Cookie å’Œ Cookie æ ‡å¤´Set-Cookie HTTP å“åº”æ ‡å¤´å°† cookie ä»æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·ä»£ç†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘é€ Cookie çš„ä¾‹å­ æ­¤æ ‡å¤´å‘Šè¯‰å®¢æˆ·ç«¯å­˜å‚¨ Cookie ç°åœ¨ï¼Œéšç€å¯¹æœåŠ¡å™¨çš„æ¯ä¸ªæ–°è¯·æ±‚ï¼Œæµè§ˆå™¨å°†ä½¿ç”¨ Cookie å¤´å°†æ‰€æœ‰ä»¥å‰å­˜å‚¨çš„ Cookie å‘é€å›æœåŠ¡å™¨ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„ Cookiesï¼Œä¸€ç§æ˜¯ Session Cookiesä¼šè¯ cookieï¼Œä¸€ç§æ˜¯ Persistent Cookiesæ°¸ä¹… cookieï¼Œå¦‚æœ Cookie ä¸åŒ…å«åˆ°æœŸæ—¥æœŸï¼Œåˆ™å°†å…¶è§†ä¸ºä¼šè¯ Cookieã€‚ä¼šè¯ Cookie å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ°¸è¿œä¸ä¼šå†™å…¥ç£ç›˜ï¼Œå½“æµè§ˆå™¨å…³é—­æ—¶ï¼Œæ­¤å Cookie å°†æ°¸ä¹…ä¸¢å¤±ã€‚å¦‚æœ Cookie åŒ…å«æœ‰æ•ˆæœŸ ï¼Œåˆ™å°†å…¶è§†ä¸ºæŒä¹…æ€§ Cookieã€‚åœ¨åˆ°æœŸæŒ‡å®šçš„æ—¥æœŸï¼ŒCookie å°†ä»ç£ç›˜ä¸­åˆ é™¤ã€‚ è¿˜æœ‰ä¸€ç§æ˜¯ Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°ã€‚ ä¼šè¯ Cookiesä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºçš„æ˜¯ä¼šè¯ Cookie ï¼Œä¼šè¯ Cookie æœ‰ä¸ªç‰¹å¾ï¼Œå®¢æˆ·ç«¯å…³é—­æ—¶ Cookie ä¼šåˆ é™¤ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æŒ‡å®šExpiresæˆ– Max-Age æŒ‡ä»¤ã€‚ ä½†æ˜¯ï¼ŒWeb æµè§ˆå™¨å¯èƒ½ä¼šä½¿ç”¨ä¼šè¯è¿˜åŸï¼Œè¿™ä¼šä½¿å¤§å¤šæ•°ä¼šè¯ Cookie ä¿æŒæ°¸ä¹…çŠ¶æ€ï¼Œå°±åƒä»æœªå…³é—­è¿‡æµè§ˆå™¨ä¸€æ ·ã€‚ æ°¸ä¹…æ€§ Cookiesæ°¸ä¹…æ€§ Cookie ä¸ä¼šåœ¨å®¢æˆ·ç«¯å…³é—­æ—¶è¿‡æœŸï¼Œè€Œæ˜¯åœ¨ç‰¹å®šæ—¥æœŸï¼ˆExpiresï¼‰æˆ–ç‰¹å®šæ—¶é—´é•¿åº¦ï¼ˆMax-Ageï¼‰å¤–è¿‡æœŸã€‚ä¾‹å¦‚ Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°å®‰å…¨çš„ Cookie éœ€è¦ç»è¿‡ HTTPS åè®®é€šè¿‡åŠ å¯†çš„æ–¹å¼å‘é€åˆ°æœåŠ¡å™¨ã€‚å³ä½¿æ˜¯å®‰å…¨çš„ï¼Œä¹Ÿä¸åº”è¯¥å°†æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨cookie ä¸­ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”æ­¤æ ‡å¿—ä¸èƒ½æä¾›çœŸæ­£çš„ä¿æŠ¤ã€‚ HttpOnly çš„ä½œç”¨ ä¼šè¯ Cookie ä¸­ç¼ºå°‘ HttpOnly å±æ€§ä¼šå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ç¨‹åº( JS è„šæœ¬ã€Applet ç­‰)è·å–åˆ°ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œé€ æˆç”¨æˆ· Cookie ä¿¡æ¯æ³„éœ²ï¼Œå¢åŠ æ”»å‡»è€…çš„è·¨ç«™è„šæœ¬æ”»å‡»å¨èƒã€‚ HttpOnly æ˜¯å¾®è½¯å¯¹ Cookie åšçš„æ‰©å±•ï¼Œè¯¥å€¼æŒ‡å®š Cookie æ˜¯å¦å¯é€šè¿‡å®¢æˆ·ç«¯è„šæœ¬è®¿é—®ã€‚ å¦‚æœåœ¨ Cookie ä¸­æ²¡æœ‰è®¾ç½® HttpOnly å±æ€§ä¸º trueï¼Œå¯èƒ½å¯¼è‡´ Cookie è¢«çªƒå–ã€‚çªƒå–çš„ Cookie å¯ä»¥åŒ…å«æ ‡è¯†ç«™ç‚¹ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ ASP.NET ä¼šè¯ ID æˆ– Forms èº«ä»½éªŒè¯ç¥¨è¯ï¼Œæ”»å‡»è€…å¯ä»¥é‡æ’­çªƒå–çš„ Cookieï¼Œä»¥ä¾¿ä¼ªè£…æˆç”¨æˆ·æˆ–è·å–æ•æ„Ÿä¿¡æ¯ï¼Œè¿›è¡Œè·¨ç«™è„šæœ¬æ”»å‡»ç­‰ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:5","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#åˆ›å»º-cookie"},{"categories":["web"],"content":" åˆ›å»º Cookieå½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘é€å¸¦æœ‰å“åº”çš„ Set-Cookie æ ‡å¤´ï¼ŒCookie é€šå¸¸ç”±æµè§ˆå™¨å­˜å‚¨ï¼Œç„¶åå°† Cookie ä¸ HTTP æ ‡å¤´ä¸€åŒå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚ å‚æ•°å ä½œç”¨ Max-Age è®¾ç½® cookie çš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ Domain æŒ‡å®šäº† Cookie æ‰€å±çš„åŸŸå Path æŒ‡å®šäº† Cookie æ‰€å±çš„è·¯å¾„ HttpOnly å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½é æµè§ˆå™¨ Http åè®®ä¼ è¾“,ç¦æ­¢å…¶ä»–æ–¹å¼è®¿é—® Secure å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½åœ¨ Https å®‰å…¨åè®®ä¸­ä¼ è¾“,å¦‚æœæ˜¯ Http åˆ™ç¦æ­¢ä¼ è¾“ Set-Cookie å’Œ Cookie æ ‡å¤´Set-Cookie HTTP å“åº”æ ‡å¤´å°† cookie ä»æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·ä»£ç†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘é€ Cookie çš„ä¾‹å­ æ­¤æ ‡å¤´å‘Šè¯‰å®¢æˆ·ç«¯å­˜å‚¨ Cookie ç°åœ¨ï¼Œéšç€å¯¹æœåŠ¡å™¨çš„æ¯ä¸ªæ–°è¯·æ±‚ï¼Œæµè§ˆå™¨å°†ä½¿ç”¨ Cookie å¤´å°†æ‰€æœ‰ä»¥å‰å­˜å‚¨çš„ Cookie å‘é€å›æœåŠ¡å™¨ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„ Cookiesï¼Œä¸€ç§æ˜¯ Session Cookiesä¼šè¯ cookieï¼Œä¸€ç§æ˜¯ Persistent Cookiesæ°¸ä¹… cookieï¼Œå¦‚æœ Cookie ä¸åŒ…å«åˆ°æœŸæ—¥æœŸï¼Œåˆ™å°†å…¶è§†ä¸ºä¼šè¯ Cookieã€‚ä¼šè¯ Cookie å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ°¸è¿œä¸ä¼šå†™å…¥ç£ç›˜ï¼Œå½“æµè§ˆå™¨å…³é—­æ—¶ï¼Œæ­¤å Cookie å°†æ°¸ä¹…ä¸¢å¤±ã€‚å¦‚æœ Cookie åŒ…å«æœ‰æ•ˆæœŸ ï¼Œåˆ™å°†å…¶è§†ä¸ºæŒä¹…æ€§ Cookieã€‚åœ¨åˆ°æœŸæŒ‡å®šçš„æ—¥æœŸï¼ŒCookie å°†ä»ç£ç›˜ä¸­åˆ é™¤ã€‚ è¿˜æœ‰ä¸€ç§æ˜¯ Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°ã€‚ ä¼šè¯ Cookiesä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºçš„æ˜¯ä¼šè¯ Cookie ï¼Œä¼šè¯ Cookie æœ‰ä¸ªç‰¹å¾ï¼Œå®¢æˆ·ç«¯å…³é—­æ—¶ Cookie ä¼šåˆ é™¤ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æŒ‡å®šExpiresæˆ– Max-Age æŒ‡ä»¤ã€‚ ä½†æ˜¯ï¼ŒWeb æµè§ˆå™¨å¯èƒ½ä¼šä½¿ç”¨ä¼šè¯è¿˜åŸï¼Œè¿™ä¼šä½¿å¤§å¤šæ•°ä¼šè¯ Cookie ä¿æŒæ°¸ä¹…çŠ¶æ€ï¼Œå°±åƒä»æœªå…³é—­è¿‡æµè§ˆå™¨ä¸€æ ·ã€‚ æ°¸ä¹…æ€§ Cookiesæ°¸ä¹…æ€§ Cookie ä¸ä¼šåœ¨å®¢æˆ·ç«¯å…³é—­æ—¶è¿‡æœŸï¼Œè€Œæ˜¯åœ¨ç‰¹å®šæ—¥æœŸï¼ˆExpiresï¼‰æˆ–ç‰¹å®šæ—¶é—´é•¿åº¦ï¼ˆMax-Ageï¼‰å¤–è¿‡æœŸã€‚ä¾‹å¦‚ Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°å®‰å…¨çš„ Cookie éœ€è¦ç»è¿‡ HTTPS åè®®é€šè¿‡åŠ å¯†çš„æ–¹å¼å‘é€åˆ°æœåŠ¡å™¨ã€‚å³ä½¿æ˜¯å®‰å…¨çš„ï¼Œä¹Ÿä¸åº”è¯¥å°†æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨cookie ä¸­ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”æ­¤æ ‡å¿—ä¸èƒ½æä¾›çœŸæ­£çš„ä¿æŠ¤ã€‚ HttpOnly çš„ä½œç”¨ ä¼šè¯ Cookie ä¸­ç¼ºå°‘ HttpOnly å±æ€§ä¼šå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ç¨‹åº( JS è„šæœ¬ã€Applet ç­‰)è·å–åˆ°ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œé€ æˆç”¨æˆ· Cookie ä¿¡æ¯æ³„éœ²ï¼Œå¢åŠ æ”»å‡»è€…çš„è·¨ç«™è„šæœ¬æ”»å‡»å¨èƒã€‚ HttpOnly æ˜¯å¾®è½¯å¯¹ Cookie åšçš„æ‰©å±•ï¼Œè¯¥å€¼æŒ‡å®š Cookie æ˜¯å¦å¯é€šè¿‡å®¢æˆ·ç«¯è„šæœ¬è®¿é—®ã€‚ å¦‚æœåœ¨ Cookie ä¸­æ²¡æœ‰è®¾ç½® HttpOnly å±æ€§ä¸º trueï¼Œå¯èƒ½å¯¼è‡´ Cookie è¢«çªƒå–ã€‚çªƒå–çš„ Cookie å¯ä»¥åŒ…å«æ ‡è¯†ç«™ç‚¹ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ ASP.NET ä¼šè¯ ID æˆ– Forms èº«ä»½éªŒè¯ç¥¨è¯ï¼Œæ”»å‡»è€…å¯ä»¥é‡æ’­çªƒå–çš„ Cookieï¼Œä»¥ä¾¿ä¼ªè£…æˆç”¨æˆ·æˆ–è·å–æ•æ„Ÿä¿¡æ¯ï¼Œè¿›è¡Œè·¨ç«™è„šæœ¬æ”»å‡»ç­‰ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:5","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#set-cookie-å’Œ-cookie-æ ‡å¤´"},{"categories":["web"],"content":" åˆ›å»º Cookieå½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘é€å¸¦æœ‰å“åº”çš„ Set-Cookie æ ‡å¤´ï¼ŒCookie é€šå¸¸ç”±æµè§ˆå™¨å­˜å‚¨ï¼Œç„¶åå°† Cookie ä¸ HTTP æ ‡å¤´ä¸€åŒå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚ å‚æ•°å ä½œç”¨ Max-Age è®¾ç½® cookie çš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ Domain æŒ‡å®šäº† Cookie æ‰€å±çš„åŸŸå Path æŒ‡å®šäº† Cookie æ‰€å±çš„è·¯å¾„ HttpOnly å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½é æµè§ˆå™¨ Http åè®®ä¼ è¾“,ç¦æ­¢å…¶ä»–æ–¹å¼è®¿é—® Secure å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½åœ¨ Https å®‰å…¨åè®®ä¸­ä¼ è¾“,å¦‚æœæ˜¯ Http åˆ™ç¦æ­¢ä¼ è¾“ Set-Cookie å’Œ Cookie æ ‡å¤´Set-Cookie HTTP å“åº”æ ‡å¤´å°† cookie ä»æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·ä»£ç†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘é€ Cookie çš„ä¾‹å­ æ­¤æ ‡å¤´å‘Šè¯‰å®¢æˆ·ç«¯å­˜å‚¨ Cookie ç°åœ¨ï¼Œéšç€å¯¹æœåŠ¡å™¨çš„æ¯ä¸ªæ–°è¯·æ±‚ï¼Œæµè§ˆå™¨å°†ä½¿ç”¨ Cookie å¤´å°†æ‰€æœ‰ä»¥å‰å­˜å‚¨çš„ Cookie å‘é€å›æœåŠ¡å™¨ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„ Cookiesï¼Œä¸€ç§æ˜¯ Session Cookiesä¼šè¯ cookieï¼Œä¸€ç§æ˜¯ Persistent Cookiesæ°¸ä¹… cookieï¼Œå¦‚æœ Cookie ä¸åŒ…å«åˆ°æœŸæ—¥æœŸï¼Œåˆ™å°†å…¶è§†ä¸ºä¼šè¯ Cookieã€‚ä¼šè¯ Cookie å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ°¸è¿œä¸ä¼šå†™å…¥ç£ç›˜ï¼Œå½“æµè§ˆå™¨å…³é—­æ—¶ï¼Œæ­¤å Cookie å°†æ°¸ä¹…ä¸¢å¤±ã€‚å¦‚æœ Cookie åŒ…å«æœ‰æ•ˆæœŸ ï¼Œåˆ™å°†å…¶è§†ä¸ºæŒä¹…æ€§ Cookieã€‚åœ¨åˆ°æœŸæŒ‡å®šçš„æ—¥æœŸï¼ŒCookie å°†ä»ç£ç›˜ä¸­åˆ é™¤ã€‚ è¿˜æœ‰ä¸€ç§æ˜¯ Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°ã€‚ ä¼šè¯ Cookiesä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºçš„æ˜¯ä¼šè¯ Cookie ï¼Œä¼šè¯ Cookie æœ‰ä¸ªç‰¹å¾ï¼Œå®¢æˆ·ç«¯å…³é—­æ—¶ Cookie ä¼šåˆ é™¤ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æŒ‡å®šExpiresæˆ– Max-Age æŒ‡ä»¤ã€‚ ä½†æ˜¯ï¼ŒWeb æµè§ˆå™¨å¯èƒ½ä¼šä½¿ç”¨ä¼šè¯è¿˜åŸï¼Œè¿™ä¼šä½¿å¤§å¤šæ•°ä¼šè¯ Cookie ä¿æŒæ°¸ä¹…çŠ¶æ€ï¼Œå°±åƒä»æœªå…³é—­è¿‡æµè§ˆå™¨ä¸€æ ·ã€‚ æ°¸ä¹…æ€§ Cookiesæ°¸ä¹…æ€§ Cookie ä¸ä¼šåœ¨å®¢æˆ·ç«¯å…³é—­æ—¶è¿‡æœŸï¼Œè€Œæ˜¯åœ¨ç‰¹å®šæ—¥æœŸï¼ˆExpiresï¼‰æˆ–ç‰¹å®šæ—¶é—´é•¿åº¦ï¼ˆMax-Ageï¼‰å¤–è¿‡æœŸã€‚ä¾‹å¦‚ Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°å®‰å…¨çš„ Cookie éœ€è¦ç»è¿‡ HTTPS åè®®é€šè¿‡åŠ å¯†çš„æ–¹å¼å‘é€åˆ°æœåŠ¡å™¨ã€‚å³ä½¿æ˜¯å®‰å…¨çš„ï¼Œä¹Ÿä¸åº”è¯¥å°†æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨cookie ä¸­ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”æ­¤æ ‡å¿—ä¸èƒ½æä¾›çœŸæ­£çš„ä¿æŠ¤ã€‚ HttpOnly çš„ä½œç”¨ ä¼šè¯ Cookie ä¸­ç¼ºå°‘ HttpOnly å±æ€§ä¼šå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ç¨‹åº( JS è„šæœ¬ã€Applet ç­‰)è·å–åˆ°ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œé€ æˆç”¨æˆ· Cookie ä¿¡æ¯æ³„éœ²ï¼Œå¢åŠ æ”»å‡»è€…çš„è·¨ç«™è„šæœ¬æ”»å‡»å¨èƒã€‚ HttpOnly æ˜¯å¾®è½¯å¯¹ Cookie åšçš„æ‰©å±•ï¼Œè¯¥å€¼æŒ‡å®š Cookie æ˜¯å¦å¯é€šè¿‡å®¢æˆ·ç«¯è„šæœ¬è®¿é—®ã€‚ å¦‚æœåœ¨ Cookie ä¸­æ²¡æœ‰è®¾ç½® HttpOnly å±æ€§ä¸º trueï¼Œå¯èƒ½å¯¼è‡´ Cookie è¢«çªƒå–ã€‚çªƒå–çš„ Cookie å¯ä»¥åŒ…å«æ ‡è¯†ç«™ç‚¹ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ ASP.NET ä¼šè¯ ID æˆ– Forms èº«ä»½éªŒè¯ç¥¨è¯ï¼Œæ”»å‡»è€…å¯ä»¥é‡æ’­çªƒå–çš„ Cookieï¼Œä»¥ä¾¿ä¼ªè£…æˆç”¨æˆ·æˆ–è·å–æ•æ„Ÿä¿¡æ¯ï¼Œè¿›è¡Œè·¨ç«™è„šæœ¬æ”»å‡»ç­‰ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:5","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#ä¼šè¯-cookies"},{"categories":["web"],"content":" åˆ›å»º Cookieå½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘é€å¸¦æœ‰å“åº”çš„ Set-Cookie æ ‡å¤´ï¼ŒCookie é€šå¸¸ç”±æµè§ˆå™¨å­˜å‚¨ï¼Œç„¶åå°† Cookie ä¸ HTTP æ ‡å¤´ä¸€åŒå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚ å‚æ•°å ä½œç”¨ Max-Age è®¾ç½® cookie çš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ Domain æŒ‡å®šäº† Cookie æ‰€å±çš„åŸŸå Path æŒ‡å®šäº† Cookie æ‰€å±çš„è·¯å¾„ HttpOnly å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½é æµè§ˆå™¨ Http åè®®ä¼ è¾“,ç¦æ­¢å…¶ä»–æ–¹å¼è®¿é—® Secure å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½åœ¨ Https å®‰å…¨åè®®ä¸­ä¼ è¾“,å¦‚æœæ˜¯ Http åˆ™ç¦æ­¢ä¼ è¾“ Set-Cookie å’Œ Cookie æ ‡å¤´Set-Cookie HTTP å“åº”æ ‡å¤´å°† cookie ä»æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·ä»£ç†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘é€ Cookie çš„ä¾‹å­ æ­¤æ ‡å¤´å‘Šè¯‰å®¢æˆ·ç«¯å­˜å‚¨ Cookie ç°åœ¨ï¼Œéšç€å¯¹æœåŠ¡å™¨çš„æ¯ä¸ªæ–°è¯·æ±‚ï¼Œæµè§ˆå™¨å°†ä½¿ç”¨ Cookie å¤´å°†æ‰€æœ‰ä»¥å‰å­˜å‚¨çš„ Cookie å‘é€å›æœåŠ¡å™¨ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„ Cookiesï¼Œä¸€ç§æ˜¯ Session Cookiesä¼šè¯ cookieï¼Œä¸€ç§æ˜¯ Persistent Cookiesæ°¸ä¹… cookieï¼Œå¦‚æœ Cookie ä¸åŒ…å«åˆ°æœŸæ—¥æœŸï¼Œåˆ™å°†å…¶è§†ä¸ºä¼šè¯ Cookieã€‚ä¼šè¯ Cookie å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ°¸è¿œä¸ä¼šå†™å…¥ç£ç›˜ï¼Œå½“æµè§ˆå™¨å…³é—­æ—¶ï¼Œæ­¤å Cookie å°†æ°¸ä¹…ä¸¢å¤±ã€‚å¦‚æœ Cookie åŒ…å«æœ‰æ•ˆæœŸ ï¼Œåˆ™å°†å…¶è§†ä¸ºæŒä¹…æ€§ Cookieã€‚åœ¨åˆ°æœŸæŒ‡å®šçš„æ—¥æœŸï¼ŒCookie å°†ä»ç£ç›˜ä¸­åˆ é™¤ã€‚ è¿˜æœ‰ä¸€ç§æ˜¯ Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°ã€‚ ä¼šè¯ Cookiesä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºçš„æ˜¯ä¼šè¯ Cookie ï¼Œä¼šè¯ Cookie æœ‰ä¸ªç‰¹å¾ï¼Œå®¢æˆ·ç«¯å…³é—­æ—¶ Cookie ä¼šåˆ é™¤ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æŒ‡å®šExpiresæˆ– Max-Age æŒ‡ä»¤ã€‚ ä½†æ˜¯ï¼ŒWeb æµè§ˆå™¨å¯èƒ½ä¼šä½¿ç”¨ä¼šè¯è¿˜åŸï¼Œè¿™ä¼šä½¿å¤§å¤šæ•°ä¼šè¯ Cookie ä¿æŒæ°¸ä¹…çŠ¶æ€ï¼Œå°±åƒä»æœªå…³é—­è¿‡æµè§ˆå™¨ä¸€æ ·ã€‚ æ°¸ä¹…æ€§ Cookiesæ°¸ä¹…æ€§ Cookie ä¸ä¼šåœ¨å®¢æˆ·ç«¯å…³é—­æ—¶è¿‡æœŸï¼Œè€Œæ˜¯åœ¨ç‰¹å®šæ—¥æœŸï¼ˆExpiresï¼‰æˆ–ç‰¹å®šæ—¶é—´é•¿åº¦ï¼ˆMax-Ageï¼‰å¤–è¿‡æœŸã€‚ä¾‹å¦‚ Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°å®‰å…¨çš„ Cookie éœ€è¦ç»è¿‡ HTTPS åè®®é€šè¿‡åŠ å¯†çš„æ–¹å¼å‘é€åˆ°æœåŠ¡å™¨ã€‚å³ä½¿æ˜¯å®‰å…¨çš„ï¼Œä¹Ÿä¸åº”è¯¥å°†æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨cookie ä¸­ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”æ­¤æ ‡å¿—ä¸èƒ½æä¾›çœŸæ­£çš„ä¿æŠ¤ã€‚ HttpOnly çš„ä½œç”¨ ä¼šè¯ Cookie ä¸­ç¼ºå°‘ HttpOnly å±æ€§ä¼šå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ç¨‹åº( JS è„šæœ¬ã€Applet ç­‰)è·å–åˆ°ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œé€ æˆç”¨æˆ· Cookie ä¿¡æ¯æ³„éœ²ï¼Œå¢åŠ æ”»å‡»è€…çš„è·¨ç«™è„šæœ¬æ”»å‡»å¨èƒã€‚ HttpOnly æ˜¯å¾®è½¯å¯¹ Cookie åšçš„æ‰©å±•ï¼Œè¯¥å€¼æŒ‡å®š Cookie æ˜¯å¦å¯é€šè¿‡å®¢æˆ·ç«¯è„šæœ¬è®¿é—®ã€‚ å¦‚æœåœ¨ Cookie ä¸­æ²¡æœ‰è®¾ç½® HttpOnly å±æ€§ä¸º trueï¼Œå¯èƒ½å¯¼è‡´ Cookie è¢«çªƒå–ã€‚çªƒå–çš„ Cookie å¯ä»¥åŒ…å«æ ‡è¯†ç«™ç‚¹ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ ASP.NET ä¼šè¯ ID æˆ– Forms èº«ä»½éªŒè¯ç¥¨è¯ï¼Œæ”»å‡»è€…å¯ä»¥é‡æ’­çªƒå–çš„ Cookieï¼Œä»¥ä¾¿ä¼ªè£…æˆç”¨æˆ·æˆ–è·å–æ•æ„Ÿä¿¡æ¯ï¼Œè¿›è¡Œè·¨ç«™è„šæœ¬æ”»å‡»ç­‰ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:5","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#æ°¸ä¹…æ€§-cookies"},{"categories":["web"],"content":" åˆ›å»º Cookieå½“æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨å¯ä»¥å‘é€å¸¦æœ‰å“åº”çš„ Set-Cookie æ ‡å¤´ï¼ŒCookie é€šå¸¸ç”±æµè§ˆå™¨å­˜å‚¨ï¼Œç„¶åå°† Cookie ä¸ HTTP æ ‡å¤´ä¸€åŒå‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ã€‚ å‚æ•°å ä½œç”¨ Max-Age è®¾ç½® cookie çš„è¿‡æœŸæ—¶é—´ï¼Œå•ä½ä¸ºç§’ Domain æŒ‡å®šäº† Cookie æ‰€å±çš„åŸŸå Path æŒ‡å®šäº† Cookie æ‰€å±çš„è·¯å¾„ HttpOnly å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½é æµè§ˆå™¨ Http åè®®ä¼ è¾“,ç¦æ­¢å…¶ä»–æ–¹å¼è®¿é—® Secure å‘Šè¯‰æµè§ˆå™¨æ­¤ Cookie åªèƒ½åœ¨ Https å®‰å…¨åè®®ä¸­ä¼ è¾“,å¦‚æœæ˜¯ Http åˆ™ç¦æ­¢ä¼ è¾“ Set-Cookie å’Œ Cookie æ ‡å¤´Set-Cookie HTTP å“åº”æ ‡å¤´å°† cookie ä»æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·ä»£ç†ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªå‘é€ Cookie çš„ä¾‹å­ æ­¤æ ‡å¤´å‘Šè¯‰å®¢æˆ·ç«¯å­˜å‚¨ Cookie ç°åœ¨ï¼Œéšç€å¯¹æœåŠ¡å™¨çš„æ¯ä¸ªæ–°è¯·æ±‚ï¼Œæµè§ˆå™¨å°†ä½¿ç”¨ Cookie å¤´å°†æ‰€æœ‰ä»¥å‰å­˜å‚¨çš„ Cookie å‘é€å›æœåŠ¡å™¨ã€‚ æœ‰ä¸¤ç§ç±»å‹çš„ Cookiesï¼Œä¸€ç§æ˜¯ Session Cookiesä¼šè¯ cookieï¼Œä¸€ç§æ˜¯ Persistent Cookiesæ°¸ä¹… cookieï¼Œå¦‚æœ Cookie ä¸åŒ…å«åˆ°æœŸæ—¥æœŸï¼Œåˆ™å°†å…¶è§†ä¸ºä¼šè¯ Cookieã€‚ä¼šè¯ Cookie å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œæ°¸è¿œä¸ä¼šå†™å…¥ç£ç›˜ï¼Œå½“æµè§ˆå™¨å…³é—­æ—¶ï¼Œæ­¤å Cookie å°†æ°¸ä¹…ä¸¢å¤±ã€‚å¦‚æœ Cookie åŒ…å«æœ‰æ•ˆæœŸ ï¼Œåˆ™å°†å…¶è§†ä¸ºæŒä¹…æ€§ Cookieã€‚åœ¨åˆ°æœŸæŒ‡å®šçš„æ—¥æœŸï¼ŒCookie å°†ä»ç£ç›˜ä¸­åˆ é™¤ã€‚ è¿˜æœ‰ä¸€ç§æ˜¯ Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°ã€‚ ä¼šè¯ Cookiesä¸Šé¢çš„ç¤ºä¾‹åˆ›å»ºçš„æ˜¯ä¼šè¯ Cookie ï¼Œä¼šè¯ Cookie æœ‰ä¸ªç‰¹å¾ï¼Œå®¢æˆ·ç«¯å…³é—­æ—¶ Cookie ä¼šåˆ é™¤ï¼Œå› ä¸ºå®ƒæ²¡æœ‰æŒ‡å®šExpiresæˆ– Max-Age æŒ‡ä»¤ã€‚ ä½†æ˜¯ï¼ŒWeb æµè§ˆå™¨å¯èƒ½ä¼šä½¿ç”¨ä¼šè¯è¿˜åŸï¼Œè¿™ä¼šä½¿å¤§å¤šæ•°ä¼šè¯ Cookie ä¿æŒæ°¸ä¹…çŠ¶æ€ï¼Œå°±åƒä»æœªå…³é—­è¿‡æµè§ˆå™¨ä¸€æ ·ã€‚ æ°¸ä¹…æ€§ Cookiesæ°¸ä¹…æ€§ Cookie ä¸ä¼šåœ¨å®¢æˆ·ç«¯å…³é—­æ—¶è¿‡æœŸï¼Œè€Œæ˜¯åœ¨ç‰¹å®šæ—¥æœŸï¼ˆExpiresï¼‰æˆ–ç‰¹å®šæ—¶é—´é•¿åº¦ï¼ˆMax-Ageï¼‰å¤–è¿‡æœŸã€‚ä¾‹å¦‚ Set-Cookie: id=a3fWa; Expires=Wed, 21 Oct 2015 07:28:00 GMT; Cookie çš„ Secure å’Œ HttpOnly æ ‡è®°å®‰å…¨çš„ Cookie éœ€è¦ç»è¿‡ HTTPS åè®®é€šè¿‡åŠ å¯†çš„æ–¹å¼å‘é€åˆ°æœåŠ¡å™¨ã€‚å³ä½¿æ˜¯å®‰å…¨çš„ï¼Œä¹Ÿä¸åº”è¯¥å°†æ•æ„Ÿä¿¡æ¯å­˜å‚¨åœ¨cookie ä¸­ï¼Œå› ä¸ºå®ƒä»¬æœ¬è´¨ä¸Šæ˜¯ä¸å®‰å…¨çš„ï¼Œå¹¶ä¸”æ­¤æ ‡å¿—ä¸èƒ½æä¾›çœŸæ­£çš„ä¿æŠ¤ã€‚ HttpOnly çš„ä½œç”¨ ä¼šè¯ Cookie ä¸­ç¼ºå°‘ HttpOnly å±æ€§ä¼šå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ç¨‹åº( JS è„šæœ¬ã€Applet ç­‰)è·å–åˆ°ç”¨æˆ·çš„ Cookie ä¿¡æ¯ï¼Œé€ æˆç”¨æˆ· Cookie ä¿¡æ¯æ³„éœ²ï¼Œå¢åŠ æ”»å‡»è€…çš„è·¨ç«™è„šæœ¬æ”»å‡»å¨èƒã€‚ HttpOnly æ˜¯å¾®è½¯å¯¹ Cookie åšçš„æ‰©å±•ï¼Œè¯¥å€¼æŒ‡å®š Cookie æ˜¯å¦å¯é€šè¿‡å®¢æˆ·ç«¯è„šæœ¬è®¿é—®ã€‚ å¦‚æœåœ¨ Cookie ä¸­æ²¡æœ‰è®¾ç½® HttpOnly å±æ€§ä¸º trueï¼Œå¯èƒ½å¯¼è‡´ Cookie è¢«çªƒå–ã€‚çªƒå–çš„ Cookie å¯ä»¥åŒ…å«æ ‡è¯†ç«™ç‚¹ç”¨æˆ·çš„æ•æ„Ÿä¿¡æ¯ï¼Œå¦‚ ASP.NET ä¼šè¯ ID æˆ– Forms èº«ä»½éªŒè¯ç¥¨è¯ï¼Œæ”»å‡»è€…å¯ä»¥é‡æ’­çªƒå–çš„ Cookieï¼Œä»¥ä¾¿ä¼ªè£…æˆç”¨æˆ·æˆ–è·å–æ•æ„Ÿä¿¡æ¯ï¼Œè¿›è¡Œè·¨ç«™è„šæœ¬æ”»å‡»ç­‰ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:5","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#cookie-çš„-secure-å’Œ-httponly-æ ‡è®°"},{"categories":["web"],"content":" Cookie çš„ä½œç”¨åŸŸDomain å’Œ Path æ ‡è¯†å®šä¹‰äº† Cookie çš„ä½œç”¨åŸŸï¼šå³ Cookie åº”è¯¥å‘é€ç»™å“ªäº› URLã€‚ Domain æ ‡è¯†æŒ‡å®šäº†å“ªäº›ä¸»æœºå¯ä»¥æ¥å— Cookieã€‚å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸ºå½“å‰ä¸»æœº(ä¸åŒ…å«å­åŸŸåï¼‰ã€‚å¦‚æœæŒ‡å®šäº†Domainï¼Œåˆ™ä¸€èˆ¬åŒ…å«å­åŸŸåã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè®¾ç½® Domain=mozilla.orgï¼Œåˆ™ Cookie ä¹ŸåŒ…å«åœ¨å­åŸŸåä¸­ï¼ˆå¦‚developer.mozilla.orgï¼‰ã€‚ ä¾‹å¦‚ï¼Œè®¾ç½® Path=/docsï¼Œåˆ™ä»¥ä¸‹åœ°å€éƒ½ä¼šåŒ¹é…ï¼š /docs /docs/Web/ /docs/Web/HTTP ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:1:6","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#cookie-çš„ä½œç”¨åŸŸ"},{"categories":["web"],"content":" JSON Web Token å’Œ Session Cookies çš„å¯¹æ¯”JSON Web Tokenï¼Œç®€ç§° JWTï¼Œå®ƒå’Œ Sessionéƒ½å¯ä»¥ä¸ºç½‘ç«™æä¾›ç”¨æˆ·çš„èº«ä»½è®¤è¯ï¼Œä½†æ˜¯å®ƒä»¬ä¸æ˜¯ä¸€å›äº‹ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:0","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#json-web-token-å’Œ-session-cookies-çš„å¯¹æ¯”"},{"categories":["web"],"content":" JWT å’Œ Session Cookies çš„ç›¸åŒä¹‹å¤„åœ¨æ¢è®¨ JWT å’Œ Session Cookies ä¹‹å‰ï¼Œæœ‰å¿…è¦éœ€è¦å…ˆå»ç†è§£ä¸€ä¸‹å®ƒä»¬çš„ç›¸åŒä¹‹å¤„ã€‚ å®ƒä»¬æ—¢å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åœ¨ç”¨æˆ·å•å‡»è¿›å…¥ä¸åŒé¡µé¢æ—¶ä»¥åŠç™»é™†ç½‘ç«™æˆ–åº”ç”¨ç¨‹åºåè¿›è¡Œèº«ä»½éªŒè¯ã€‚ å¦‚æœæ²¡æœ‰è¿™ä¸¤è€…ï¼Œé‚£ä½ å¯èƒ½éœ€è¦åœ¨æ¯ä¸ªé¡µé¢åˆ‡æ¢æ—¶éƒ½éœ€è¦è¿›è¡Œç™»å½•äº†ã€‚å› ä¸º HTTP æ˜¯ä¸€ä¸ªæ— çŠ¶æ€çš„åè®®ã€‚è¿™ä¹Ÿå°±æ„å‘³ç€å½“ä½ è®¿é—®æŸä¸ªç½‘é¡µï¼Œç„¶åå•å‡»åŒä¸€ç«™ç‚¹ä¸Šçš„å¦ä¸€ä¸ªé¡µé¢æ—¶ï¼ŒæœåŠ¡å™¨çš„å†…å­˜ä¸­å°†ä¸ä¼šè®°ä½ä½ ä¹‹å‰çš„æ“ä½œã€‚ å› æ­¤ï¼Œå¦‚æœä½ ç™»å½•å¹¶è®¿é—®äº†ä½ æœ‰æƒè®¿é—®çš„å¦ä¸€ä¸ªé¡µé¢ï¼Œç”±äº HTTP ä¸ä¼šè®°å½•ä½ åˆšåˆšç™»å½•çš„ä¿¡æ¯ï¼Œå› æ­¤ä½ å°†å†æ¬¡ç™»å½•ã€‚ JWT å’Œ Session Cookies å°±æ˜¯ç”¨æ¥å¤„ç†åœ¨ä¸åŒé¡µé¢ä¹‹é—´åˆ‡æ¢ï¼Œä¿å­˜ç”¨æˆ·ç™»å½•ä¿¡æ¯çš„æœºåˆ¶ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸¤ç§æŠ€æœ¯éƒ½æ˜¯ç”¨æ¥ä¿å­˜ä½ çš„ç™»å½•çŠ¶æ€ï¼Œèƒ½å¤Ÿè®©ä½ åœ¨æµè§ˆä»»æ„å—å¯†ç ä¿æŠ¤çš„ç½‘ç«™ã€‚é€šè¿‡åœ¨æ¯æ¬¡äº§ç”Ÿæ–°çš„è¯·æ±‚æ—¶å¯¹ç”¨æˆ·æ•°æ®è¿›è¡Œèº«ä»½éªŒè¯æ¥è§£å†³æ­¤é—®é¢˜ã€‚ æ‰€ä»¥ JWT å’Œ Session Cookies çš„ç›¸åŒä¹‹å¤„æ˜¯ä»€ä¹ˆï¼Ÿé‚£å°±æ˜¯å®ƒä»¬èƒ½å¤Ÿæ”¯æŒä½ åœ¨å‘é€ä¸åŒè¯·æ±‚ä¹‹é—´ï¼Œè®°å½•å¹¶éªŒè¯ä½ çš„ç™»å½•çŠ¶æ€çš„ä¸€ç§æœºåˆ¶ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:1","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#jwt-å’Œ-session-cookies-çš„ç›¸åŒä¹‹å¤„"},{"categories":["web"],"content":" ä»€ä¹ˆæ˜¯ Session CookiesSession Cookies ä¹Ÿç§°ä¸ºä¼šè¯ Cookiesï¼Œåœ¨ Session Cookies ä¸­ï¼Œç”¨æˆ·çš„ç™»å½•çŠ¶æ€ä¼šä¿å­˜åœ¨æœåŠ¡å™¨çš„å†…å­˜ä¸­ã€‚å½“ç”¨æˆ·ç™»å½•æ—¶ï¼ŒSession å°±è¢«æœåŠ¡ç«¯å®‰å…¨çš„åˆ›å»ºã€‚ åœ¨æ¯æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨éƒ½ä¼šä»ä¼šè¯ Cookie ä¸­è¯»å– SessionIdï¼Œå¦‚æœæœåŠ¡ç«¯çš„æ•°æ®å’Œè¯»å–çš„ SessionId ç›¸åŒï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±ä¼šå‘é€å“åº”ç»™æµè§ˆå™¨ï¼Œå…è®¸ç”¨æˆ·ç™»å½•ã€‚ âš ï¸ ä¸‹å›¾æœ‰ç‚¹é—®é¢˜ï¼ŒåŸŸååº”è¯¥ä¸€è‡´ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:2","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#ä»€ä¹ˆæ˜¯-session-cookies"},{"categories":["web"],"content":" ä»€ä¹ˆæ˜¯ Json Web TokensJson Web Token çš„ç®€ç§°å°±æ˜¯ JWTï¼Œé€šå¸¸å¯ä»¥ç§°ä¸º Json ä»¤ç‰Œã€‚å®ƒæ˜¯RFC 7519 ä¸­å®šä¹‰çš„ç”¨äºå®‰å…¨çš„å°†ä¿¡æ¯ä½œä¸º Json å¯¹è±¡è¿›è¡Œä¼ è¾“çš„ä¸€ç§å½¢å¼ã€‚JWT ä¸­å­˜å‚¨çš„ä¿¡æ¯æ˜¯ç»è¿‡æ•°å­—ç­¾åçš„ï¼Œå› æ­¤å¯ä»¥è¢«ä¿¡ä»»å’Œç†è§£ã€‚å¯ä»¥ä½¿ç”¨ HMAC ç®—æ³•æˆ–ä½¿ç”¨ RSA/ECDSA çš„å…¬ç”¨/ä¸“ç”¨å¯†é’¥å¯¹ JWT è¿›è¡Œç­¾åã€‚ ä½¿ç”¨ JWT ä¸»è¦ç”¨æ¥ä¸‹é¢ä¸¤ç‚¹ è®¤è¯(Authorization)ï¼šè¿™æ˜¯ä½¿ç”¨ JWT æœ€å¸¸è§çš„ä¸€ç§æƒ…å†µï¼Œä¸€æ—¦ç”¨æˆ·ç™»å½•ï¼Œåé¢æ¯ä¸ªè¯·æ±‚éƒ½ä¼šåŒ…å« JWTï¼Œä»è€Œå…è®¸ç”¨æˆ·è®¿é—®è¯¥ä»¤ç‰Œæ‰€å…è®¸çš„è·¯ç”±ã€æœåŠ¡å’Œèµ„æºã€‚å•ç‚¹ç™»å½•æ˜¯å½“ä»Šå¹¿æ³›ä½¿ç”¨ JWT çš„ä¸€é¡¹åŠŸèƒ½ï¼Œå› ä¸ºå®ƒçš„å¼€é”€å¾ˆå°ã€‚ ä¿¡æ¯äº¤æ¢(Information Exchange)ï¼šJWT æ˜¯èƒ½å¤Ÿå®‰å…¨ä¼ è¾“ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚é€šè¿‡ä½¿ç”¨å…¬é’¥/ç§é’¥å¯¹ JWT è¿›è¡Œç­¾åè®¤è¯ã€‚æ­¤å¤–ï¼Œç”±äºç­¾åæ˜¯ä½¿ç”¨ head å’Œ payloadè®¡ç®—çš„ï¼Œå› æ­¤ä½ è¿˜å¯ä»¥éªŒè¯å†…å®¹æ˜¯å¦é­åˆ°ç¯¡æ”¹ã€‚ JWT çš„æ ¼å¼ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šæ¢è®¨ä¸€ä¸‹ JWT çš„ç»„æˆå’Œæ ¼å¼æ˜¯ä»€ä¹ˆ JWT ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæ¯ä¸ªéƒ¨åˆ†ç”¨ . è¿›è¡Œåˆ†å‰²ï¼Œå„ä¸ªéƒ¨åˆ†åˆ†åˆ«æ˜¯ Header Payload Signature å› æ­¤ï¼Œä¸€ä¸ªéå¸¸ç®€å•çš„ JWT ç»„æˆä¼šæ˜¯ä¸‹é¢è¿™æ · JWT ç»„æˆ Header Header æ˜¯ JWT çš„æ ‡å¤´ï¼Œå®ƒé€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä»¤ç‰Œçš„ç±»å‹(å³ JWT)å’Œä½¿ç”¨çš„ ç­¾åç®—æ³•ï¼Œä¾‹å¦‚ HMAC SHA256ï¼ˆå†™æˆ HS256ï¼‰ æˆ– RSAã€‚ ä¾‹å¦‚ { \"alg\": \"HS256\", \"typ\": \"JWT\" } æŒ‡å®šç±»å‹å’Œç­¾åç®—æ³•åï¼ŒJson å—è¢« Base64Url ç¼–ç å½¢æˆ JWT çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚ Payload Token çš„ç¬¬äºŒéƒ¨åˆ†æ˜¯ Payloadï¼ŒPayload ä¸­åŒ…å«ä¸€ä¸ªå£°æ˜ã€‚å£°æ˜æ˜¯æœ‰å…³å®ä½“ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ï¼‰å’Œå…¶ä»–æ•°æ®çš„å£°æ˜ã€‚å…±æœ‰ä¸‰ç§ç±»å‹çš„å£°æ˜ï¼šregistered, public å’Œ private å£°æ˜ã€‚ registered å£°æ˜ï¼š åŒ…å«ä¸€ç»„å»ºè®®ä½¿ç”¨çš„é¢„å®šä¹‰å£°æ˜ï¼Œä¸»è¦åŒ…æ‹¬ ISS ç­¾å‘äºº iss (issuer) ç­¾å‘äºº exp (expiration time) è¿‡æœŸæ—¶é—´ sub (subject) ä¸»é¢˜ aud (audience) å—ä¼— nbf (Not Before) ç”Ÿæ•ˆæ—¶é—´ iat (Issued At) ç­¾å‘æ—¶é—´ jti (JWT ID) ç¼–å· public å£°æ˜ï¼šå…¬å…±çš„å£°æ˜ï¼Œå¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯ï¼Œä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†ã€‚ private å£°æ˜ï¼šè‡ªå®šä¹‰å£°æ˜ï¼Œæ—¨åœ¨åœ¨åŒæ„ä½¿ç”¨å®ƒä»¬çš„å„æ–¹ä¹‹é—´å…±äº«ä¿¡æ¯ï¼Œæ—¢ä¸æ˜¯æ³¨å†Œå£°æ˜ä¹Ÿä¸æ˜¯å…¬å…±å£°æ˜ã€‚ ä¾‹å¦‚ { \"sub\": \"1234567890\", \"name\": \"John Doe\", \"admin\": true } ç„¶å payload Json å—ä¼šè¢«Base64Url ç¼–ç å½¢æˆ JWT çš„ç¬¬äºŒéƒ¨åˆ†ã€‚ signature JWT çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆ header (base64åçš„) payload (base64åçš„) secret æ¯”å¦‚æˆ‘ä»¬éœ€è¦ HMAC SHA256 ç®—æ³•è¿›è¡Œç­¾å HMACSHA256( base64UrlEncode(header) + \".\" + base64UrlEncode(payload), secret) ç­¾åç”¨äºéªŒè¯æ¶ˆæ¯åœ¨æ­¤è¿‡ç¨‹ä¸­æ²¡æœ‰æ›´æ”¹ï¼Œå¹¶ä¸”å¯¹äºä½¿ç”¨ç§é’¥è¿›è¡Œç­¾åçš„ä»¤ç‰Œï¼Œå®ƒè¿˜å¯ä»¥éªŒè¯ JWT çš„å‘é€è€…çš„çœŸå®èº«ä»½ æ‹¼å‡‘åœ¨ä¸€èµ·ç°åœ¨æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¸‰ä¸ªç”±ç‚¹åˆ†éš”çš„ Base64-URL å­—ç¬¦ä¸²éƒ¨åˆ†ç»„æˆåœ¨ä¸€èµ·ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥åœ¨ HTML å’Œ HTTP ç¯å¢ƒä¸­è½»æ¾ä¼ é€’è¿™äº›å­—ç¬¦ä¸²ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ JWT ç¤ºä¾‹ï¼Œå®ƒå¯¹ header å’Œ payload è¿›è¡Œç¼–ç ï¼Œç„¶åä½¿ç”¨ signature è¿›è¡Œç­¾å eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ å¦‚æœæƒ³è‡ªå·±æµ‹è¯•ç¼–å†™çš„è¯ï¼Œå¯ä»¥è®¿é—® JWT å®˜ç½‘ https://jwt.io/#debugger-io ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:3","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#ä»€ä¹ˆæ˜¯-json-web-tokens"},{"categories":["web"],"content":" ä»€ä¹ˆæ˜¯ Json Web TokensJson Web Token çš„ç®€ç§°å°±æ˜¯ JWTï¼Œé€šå¸¸å¯ä»¥ç§°ä¸º Json ä»¤ç‰Œã€‚å®ƒæ˜¯RFC 7519 ä¸­å®šä¹‰çš„ç”¨äºå®‰å…¨çš„å°†ä¿¡æ¯ä½œä¸º Json å¯¹è±¡è¿›è¡Œä¼ è¾“çš„ä¸€ç§å½¢å¼ã€‚JWT ä¸­å­˜å‚¨çš„ä¿¡æ¯æ˜¯ç»è¿‡æ•°å­—ç­¾åçš„ï¼Œå› æ­¤å¯ä»¥è¢«ä¿¡ä»»å’Œç†è§£ã€‚å¯ä»¥ä½¿ç”¨ HMAC ç®—æ³•æˆ–ä½¿ç”¨ RSA/ECDSA çš„å…¬ç”¨/ä¸“ç”¨å¯†é’¥å¯¹ JWT è¿›è¡Œç­¾åã€‚ ä½¿ç”¨ JWT ä¸»è¦ç”¨æ¥ä¸‹é¢ä¸¤ç‚¹ è®¤è¯(Authorization)ï¼šè¿™æ˜¯ä½¿ç”¨ JWT æœ€å¸¸è§çš„ä¸€ç§æƒ…å†µï¼Œä¸€æ—¦ç”¨æˆ·ç™»å½•ï¼Œåé¢æ¯ä¸ªè¯·æ±‚éƒ½ä¼šåŒ…å« JWTï¼Œä»è€Œå…è®¸ç”¨æˆ·è®¿é—®è¯¥ä»¤ç‰Œæ‰€å…è®¸çš„è·¯ç”±ã€æœåŠ¡å’Œèµ„æºã€‚å•ç‚¹ç™»å½•æ˜¯å½“ä»Šå¹¿æ³›ä½¿ç”¨ JWT çš„ä¸€é¡¹åŠŸèƒ½ï¼Œå› ä¸ºå®ƒçš„å¼€é”€å¾ˆå°ã€‚ ä¿¡æ¯äº¤æ¢(Information Exchange)ï¼šJWT æ˜¯èƒ½å¤Ÿå®‰å…¨ä¼ è¾“ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚é€šè¿‡ä½¿ç”¨å…¬é’¥/ç§é’¥å¯¹ JWT è¿›è¡Œç­¾åè®¤è¯ã€‚æ­¤å¤–ï¼Œç”±äºç­¾åæ˜¯ä½¿ç”¨ head å’Œ payloadè®¡ç®—çš„ï¼Œå› æ­¤ä½ è¿˜å¯ä»¥éªŒè¯å†…å®¹æ˜¯å¦é­åˆ°ç¯¡æ”¹ã€‚ JWT çš„æ ¼å¼ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šæ¢è®¨ä¸€ä¸‹ JWT çš„ç»„æˆå’Œæ ¼å¼æ˜¯ä»€ä¹ˆ JWT ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæ¯ä¸ªéƒ¨åˆ†ç”¨ . è¿›è¡Œåˆ†å‰²ï¼Œå„ä¸ªéƒ¨åˆ†åˆ†åˆ«æ˜¯ Header Payload Signature å› æ­¤ï¼Œä¸€ä¸ªéå¸¸ç®€å•çš„ JWT ç»„æˆä¼šæ˜¯ä¸‹é¢è¿™æ · JWT ç»„æˆ Header Header æ˜¯ JWT çš„æ ‡å¤´ï¼Œå®ƒé€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä»¤ç‰Œçš„ç±»å‹(å³ JWT)å’Œä½¿ç”¨çš„ ç­¾åç®—æ³•ï¼Œä¾‹å¦‚ HMAC SHA256ï¼ˆå†™æˆ HS256ï¼‰ æˆ– RSAã€‚ ä¾‹å¦‚ { \"alg\": \"HS256\", \"typ\": \"JWT\" } æŒ‡å®šç±»å‹å’Œç­¾åç®—æ³•åï¼ŒJson å—è¢« Base64Url ç¼–ç å½¢æˆ JWT çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚ Payload Token çš„ç¬¬äºŒéƒ¨åˆ†æ˜¯ Payloadï¼ŒPayload ä¸­åŒ…å«ä¸€ä¸ªå£°æ˜ã€‚å£°æ˜æ˜¯æœ‰å…³å®ä½“ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ï¼‰å’Œå…¶ä»–æ•°æ®çš„å£°æ˜ã€‚å…±æœ‰ä¸‰ç§ç±»å‹çš„å£°æ˜ï¼šregistered, public å’Œ private å£°æ˜ã€‚ registered å£°æ˜ï¼š åŒ…å«ä¸€ç»„å»ºè®®ä½¿ç”¨çš„é¢„å®šä¹‰å£°æ˜ï¼Œä¸»è¦åŒ…æ‹¬ ISS ç­¾å‘äºº iss (issuer) ç­¾å‘äºº exp (expiration time) è¿‡æœŸæ—¶é—´ sub (subject) ä¸»é¢˜ aud (audience) å—ä¼— nbf (Not Before) ç”Ÿæ•ˆæ—¶é—´ iat (Issued At) ç­¾å‘æ—¶é—´ jti (JWT ID) ç¼–å· public å£°æ˜ï¼šå…¬å…±çš„å£°æ˜ï¼Œå¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯ï¼Œä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†ã€‚ private å£°æ˜ï¼šè‡ªå®šä¹‰å£°æ˜ï¼Œæ—¨åœ¨åœ¨åŒæ„ä½¿ç”¨å®ƒä»¬çš„å„æ–¹ä¹‹é—´å…±äº«ä¿¡æ¯ï¼Œæ—¢ä¸æ˜¯æ³¨å†Œå£°æ˜ä¹Ÿä¸æ˜¯å…¬å…±å£°æ˜ã€‚ ä¾‹å¦‚ { \"sub\": \"1234567890\", \"name\": \"John Doe\", \"admin\": true } ç„¶å payload Json å—ä¼šè¢«Base64Url ç¼–ç å½¢æˆ JWT çš„ç¬¬äºŒéƒ¨åˆ†ã€‚ signature JWT çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆ header (base64åçš„) payload (base64åçš„) secret æ¯”å¦‚æˆ‘ä»¬éœ€è¦ HMAC SHA256 ç®—æ³•è¿›è¡Œç­¾å HMACSHA256( base64UrlEncode(header) + \".\" + base64UrlEncode(payload), secret) ç­¾åç”¨äºéªŒè¯æ¶ˆæ¯åœ¨æ­¤è¿‡ç¨‹ä¸­æ²¡æœ‰æ›´æ”¹ï¼Œå¹¶ä¸”å¯¹äºä½¿ç”¨ç§é’¥è¿›è¡Œç­¾åçš„ä»¤ç‰Œï¼Œå®ƒè¿˜å¯ä»¥éªŒè¯ JWT çš„å‘é€è€…çš„çœŸå®èº«ä»½ æ‹¼å‡‘åœ¨ä¸€èµ·ç°åœ¨æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¸‰ä¸ªç”±ç‚¹åˆ†éš”çš„ Base64-URL å­—ç¬¦ä¸²éƒ¨åˆ†ç»„æˆåœ¨ä¸€èµ·ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥åœ¨ HTML å’Œ HTTP ç¯å¢ƒä¸­è½»æ¾ä¼ é€’è¿™äº›å­—ç¬¦ä¸²ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ JWT ç¤ºä¾‹ï¼Œå®ƒå¯¹ header å’Œ payload è¿›è¡Œç¼–ç ï¼Œç„¶åä½¿ç”¨ signature è¿›è¡Œç­¾å eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ å¦‚æœæƒ³è‡ªå·±æµ‹è¯•ç¼–å†™çš„è¯ï¼Œå¯ä»¥è®¿é—® JWT å®˜ç½‘ https://jwt.io/#debugger-io ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:3","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#jwt-çš„æ ¼å¼"},{"categories":["web"],"content":" ä»€ä¹ˆæ˜¯ Json Web TokensJson Web Token çš„ç®€ç§°å°±æ˜¯ JWTï¼Œé€šå¸¸å¯ä»¥ç§°ä¸º Json ä»¤ç‰Œã€‚å®ƒæ˜¯RFC 7519 ä¸­å®šä¹‰çš„ç”¨äºå®‰å…¨çš„å°†ä¿¡æ¯ä½œä¸º Json å¯¹è±¡è¿›è¡Œä¼ è¾“çš„ä¸€ç§å½¢å¼ã€‚JWT ä¸­å­˜å‚¨çš„ä¿¡æ¯æ˜¯ç»è¿‡æ•°å­—ç­¾åçš„ï¼Œå› æ­¤å¯ä»¥è¢«ä¿¡ä»»å’Œç†è§£ã€‚å¯ä»¥ä½¿ç”¨ HMAC ç®—æ³•æˆ–ä½¿ç”¨ RSA/ECDSA çš„å…¬ç”¨/ä¸“ç”¨å¯†é’¥å¯¹ JWT è¿›è¡Œç­¾åã€‚ ä½¿ç”¨ JWT ä¸»è¦ç”¨æ¥ä¸‹é¢ä¸¤ç‚¹ è®¤è¯(Authorization)ï¼šè¿™æ˜¯ä½¿ç”¨ JWT æœ€å¸¸è§çš„ä¸€ç§æƒ…å†µï¼Œä¸€æ—¦ç”¨æˆ·ç™»å½•ï¼Œåé¢æ¯ä¸ªè¯·æ±‚éƒ½ä¼šåŒ…å« JWTï¼Œä»è€Œå…è®¸ç”¨æˆ·è®¿é—®è¯¥ä»¤ç‰Œæ‰€å…è®¸çš„è·¯ç”±ã€æœåŠ¡å’Œèµ„æºã€‚å•ç‚¹ç™»å½•æ˜¯å½“ä»Šå¹¿æ³›ä½¿ç”¨ JWT çš„ä¸€é¡¹åŠŸèƒ½ï¼Œå› ä¸ºå®ƒçš„å¼€é”€å¾ˆå°ã€‚ ä¿¡æ¯äº¤æ¢(Information Exchange)ï¼šJWT æ˜¯èƒ½å¤Ÿå®‰å…¨ä¼ è¾“ä¿¡æ¯çš„ä¸€ç§æ–¹å¼ã€‚é€šè¿‡ä½¿ç”¨å…¬é’¥/ç§é’¥å¯¹ JWT è¿›è¡Œç­¾åè®¤è¯ã€‚æ­¤å¤–ï¼Œç”±äºç­¾åæ˜¯ä½¿ç”¨ head å’Œ payloadè®¡ç®—çš„ï¼Œå› æ­¤ä½ è¿˜å¯ä»¥éªŒè¯å†…å®¹æ˜¯å¦é­åˆ°ç¯¡æ”¹ã€‚ JWT çš„æ ¼å¼ä¸‹é¢ï¼Œæˆ‘ä»¬ä¼šæ¢è®¨ä¸€ä¸‹ JWT çš„ç»„æˆå’Œæ ¼å¼æ˜¯ä»€ä¹ˆ JWT ä¸»è¦ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œæ¯ä¸ªéƒ¨åˆ†ç”¨ . è¿›è¡Œåˆ†å‰²ï¼Œå„ä¸ªéƒ¨åˆ†åˆ†åˆ«æ˜¯ Header Payload Signature å› æ­¤ï¼Œä¸€ä¸ªéå¸¸ç®€å•çš„ JWT ç»„æˆä¼šæ˜¯ä¸‹é¢è¿™æ · JWT ç»„æˆ Header Header æ˜¯ JWT çš„æ ‡å¤´ï¼Œå®ƒé€šå¸¸ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šä»¤ç‰Œçš„ç±»å‹(å³ JWT)å’Œä½¿ç”¨çš„ ç­¾åç®—æ³•ï¼Œä¾‹å¦‚ HMAC SHA256ï¼ˆå†™æˆ HS256ï¼‰ æˆ– RSAã€‚ ä¾‹å¦‚ { \"alg\": \"HS256\", \"typ\": \"JWT\" } æŒ‡å®šç±»å‹å’Œç­¾åç®—æ³•åï¼ŒJson å—è¢« Base64Url ç¼–ç å½¢æˆ JWT çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚ Payload Token çš„ç¬¬äºŒéƒ¨åˆ†æ˜¯ Payloadï¼ŒPayload ä¸­åŒ…å«ä¸€ä¸ªå£°æ˜ã€‚å£°æ˜æ˜¯æœ‰å…³å®ä½“ï¼ˆé€šå¸¸æ˜¯ç”¨æˆ·ï¼‰å’Œå…¶ä»–æ•°æ®çš„å£°æ˜ã€‚å…±æœ‰ä¸‰ç§ç±»å‹çš„å£°æ˜ï¼šregistered, public å’Œ private å£°æ˜ã€‚ registered å£°æ˜ï¼š åŒ…å«ä¸€ç»„å»ºè®®ä½¿ç”¨çš„é¢„å®šä¹‰å£°æ˜ï¼Œä¸»è¦åŒ…æ‹¬ ISS ç­¾å‘äºº iss (issuer) ç­¾å‘äºº exp (expiration time) è¿‡æœŸæ—¶é—´ sub (subject) ä¸»é¢˜ aud (audience) å—ä¼— nbf (Not Before) ç”Ÿæ•ˆæ—¶é—´ iat (Issued At) ç­¾å‘æ—¶é—´ jti (JWT ID) ç¼–å· public å£°æ˜ï¼šå…¬å…±çš„å£°æ˜ï¼Œå¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯ï¼Œä½†ä¸å»ºè®®æ·»åŠ æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†ã€‚ private å£°æ˜ï¼šè‡ªå®šä¹‰å£°æ˜ï¼Œæ—¨åœ¨åœ¨åŒæ„ä½¿ç”¨å®ƒä»¬çš„å„æ–¹ä¹‹é—´å…±äº«ä¿¡æ¯ï¼Œæ—¢ä¸æ˜¯æ³¨å†Œå£°æ˜ä¹Ÿä¸æ˜¯å…¬å…±å£°æ˜ã€‚ ä¾‹å¦‚ { \"sub\": \"1234567890\", \"name\": \"John Doe\", \"admin\": true } ç„¶å payload Json å—ä¼šè¢«Base64Url ç¼–ç å½¢æˆ JWT çš„ç¬¬äºŒéƒ¨åˆ†ã€‚ signature JWT çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆ header (base64åçš„) payload (base64åçš„) secret æ¯”å¦‚æˆ‘ä»¬éœ€è¦ HMAC SHA256 ç®—æ³•è¿›è¡Œç­¾å HMACSHA256( base64UrlEncode(header) + \".\" + base64UrlEncode(payload), secret) ç­¾åç”¨äºéªŒè¯æ¶ˆæ¯åœ¨æ­¤è¿‡ç¨‹ä¸­æ²¡æœ‰æ›´æ”¹ï¼Œå¹¶ä¸”å¯¹äºä½¿ç”¨ç§é’¥è¿›è¡Œç­¾åçš„ä»¤ç‰Œï¼Œå®ƒè¿˜å¯ä»¥éªŒè¯ JWT çš„å‘é€è€…çš„çœŸå®èº«ä»½ æ‹¼å‡‘åœ¨ä¸€èµ·ç°åœ¨æˆ‘ä»¬æŠŠä¸Šé¢çš„ä¸‰ä¸ªç”±ç‚¹åˆ†éš”çš„ Base64-URL å­—ç¬¦ä¸²éƒ¨åˆ†ç»„æˆåœ¨ä¸€èµ·ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥åœ¨ HTML å’Œ HTTP ç¯å¢ƒä¸­è½»æ¾ä¼ é€’è¿™äº›å­—ç¬¦ä¸²ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ JWT ç¤ºä¾‹ï¼Œå®ƒå¯¹ header å’Œ payload è¿›è¡Œç¼–ç ï¼Œç„¶åä½¿ç”¨ signature è¿›è¡Œç­¾å eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ å¦‚æœæƒ³è‡ªå·±æµ‹è¯•ç¼–å†™çš„è¯ï¼Œå¯ä»¥è®¿é—® JWT å®˜ç½‘ https://jwt.io/#debugger-io ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:3","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#æ‹¼å‡‘åœ¨ä¸€èµ·"},{"categories":["web"],"content":" JWT å’Œ Session Cookies çš„ä¸åŒJWT å’Œ Session Cookies éƒ½æä¾›å®‰å…¨çš„ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒ å¯†ç ç­¾åJWT å…·æœ‰åŠ å¯†ç­¾åï¼Œè€Œ Session Cookies åˆ™æ²¡æœ‰ã€‚ JSON æ˜¯æ— çŠ¶æ€çš„JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºå£°æ˜è¢«å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯æœåŠ¡ç«¯å†…å­˜ä¸­ã€‚ èº«ä»½éªŒè¯å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚å¿…é¡»é€šè¿‡æœåŠ¡å™¨æ•°æ®åº“æˆ–ç±»ä¼¼ä½ç½®ä¸­è¿›è¡Œã€‚ è¿™æ„å‘³ç€å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œå¤šæ¬¡èº«ä»½éªŒè¯ï¼Œè€Œæ— éœ€ä¸ç«™ç‚¹æˆ–åº”ç”¨ç¨‹åºçš„æ•°æ®åº“è¿›è¡Œé€šä¿¡ï¼Œä¹Ÿæ— éœ€åœ¨æ­¤è¿‡ç¨‹ä¸­æ¶ˆè€—å¤§é‡èµ„æºã€‚ å¯æ‰©å±•æ€§Session Cookies æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœç½‘ç«™æˆ–è€…åº”ç”¨å¾ˆå¤§çš„æƒ…å†µä¸‹ä¼šè€—è´¹å¤§é‡çš„èµ„æºã€‚ç”±äº JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯ä»¥èŠ‚çœæœåŠ¡å™¨èµ„æºã€‚å› æ­¤ JWT è¦æ¯” Session Cookies å…·æœ‰æ›´å¼ºçš„å¯æ‰©å±•æ€§ã€‚ JWT æ”¯æŒè·¨åŸŸè®¤è¯Session Cookies åªèƒ½ç”¨åœ¨å•ä¸ªèŠ‚ç‚¹çš„åŸŸæˆ–è€…å®ƒçš„å­åŸŸä¸­æœ‰æ•ˆã€‚å¦‚æœå®ƒä»¬å°è¯•é€šè¿‡ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹è®¿é—®ï¼Œå°±ä¼šè¢«ç¦æ­¢ã€‚å¦‚æœä½ å¸Œæœ›è‡ªå·±çš„ç½‘ç«™å’Œå…¶ä»–ç«™ç‚¹å»ºç«‹å®‰å…¨è¿æ¥æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨ JWT å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ JWT èƒ½å¤Ÿé€šè¿‡å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è·¨åŸŸè®¤è¯ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:4","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#jwt-å’Œ-session-cookies-çš„ä¸åŒ"},{"categories":["web"],"content":" JWT å’Œ Session Cookies çš„ä¸åŒJWT å’Œ Session Cookies éƒ½æä¾›å®‰å…¨çš„ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒ å¯†ç ç­¾åJWT å…·æœ‰åŠ å¯†ç­¾åï¼Œè€Œ Session Cookies åˆ™æ²¡æœ‰ã€‚ JSON æ˜¯æ— çŠ¶æ€çš„JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºå£°æ˜è¢«å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯æœåŠ¡ç«¯å†…å­˜ä¸­ã€‚ èº«ä»½éªŒè¯å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚å¿…é¡»é€šè¿‡æœåŠ¡å™¨æ•°æ®åº“æˆ–ç±»ä¼¼ä½ç½®ä¸­è¿›è¡Œã€‚ è¿™æ„å‘³ç€å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œå¤šæ¬¡èº«ä»½éªŒè¯ï¼Œè€Œæ— éœ€ä¸ç«™ç‚¹æˆ–åº”ç”¨ç¨‹åºçš„æ•°æ®åº“è¿›è¡Œé€šä¿¡ï¼Œä¹Ÿæ— éœ€åœ¨æ­¤è¿‡ç¨‹ä¸­æ¶ˆè€—å¤§é‡èµ„æºã€‚ å¯æ‰©å±•æ€§Session Cookies æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœç½‘ç«™æˆ–è€…åº”ç”¨å¾ˆå¤§çš„æƒ…å†µä¸‹ä¼šè€—è´¹å¤§é‡çš„èµ„æºã€‚ç”±äº JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯ä»¥èŠ‚çœæœåŠ¡å™¨èµ„æºã€‚å› æ­¤ JWT è¦æ¯” Session Cookies å…·æœ‰æ›´å¼ºçš„å¯æ‰©å±•æ€§ã€‚ JWT æ”¯æŒè·¨åŸŸè®¤è¯Session Cookies åªèƒ½ç”¨åœ¨å•ä¸ªèŠ‚ç‚¹çš„åŸŸæˆ–è€…å®ƒçš„å­åŸŸä¸­æœ‰æ•ˆã€‚å¦‚æœå®ƒä»¬å°è¯•é€šè¿‡ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹è®¿é—®ï¼Œå°±ä¼šè¢«ç¦æ­¢ã€‚å¦‚æœä½ å¸Œæœ›è‡ªå·±çš„ç½‘ç«™å’Œå…¶ä»–ç«™ç‚¹å»ºç«‹å®‰å…¨è¿æ¥æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨ JWT å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ JWT èƒ½å¤Ÿé€šè¿‡å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è·¨åŸŸè®¤è¯ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:4","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#å¯†ç ç­¾å"},{"categories":["web"],"content":" JWT å’Œ Session Cookies çš„ä¸åŒJWT å’Œ Session Cookies éƒ½æä¾›å®‰å…¨çš„ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒ å¯†ç ç­¾åJWT å…·æœ‰åŠ å¯†ç­¾åï¼Œè€Œ Session Cookies åˆ™æ²¡æœ‰ã€‚ JSON æ˜¯æ— çŠ¶æ€çš„JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºå£°æ˜è¢«å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯æœåŠ¡ç«¯å†…å­˜ä¸­ã€‚ èº«ä»½éªŒè¯å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚å¿…é¡»é€šè¿‡æœåŠ¡å™¨æ•°æ®åº“æˆ–ç±»ä¼¼ä½ç½®ä¸­è¿›è¡Œã€‚ è¿™æ„å‘³ç€å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œå¤šæ¬¡èº«ä»½éªŒè¯ï¼Œè€Œæ— éœ€ä¸ç«™ç‚¹æˆ–åº”ç”¨ç¨‹åºçš„æ•°æ®åº“è¿›è¡Œé€šä¿¡ï¼Œä¹Ÿæ— éœ€åœ¨æ­¤è¿‡ç¨‹ä¸­æ¶ˆè€—å¤§é‡èµ„æºã€‚ å¯æ‰©å±•æ€§Session Cookies æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœç½‘ç«™æˆ–è€…åº”ç”¨å¾ˆå¤§çš„æƒ…å†µä¸‹ä¼šè€—è´¹å¤§é‡çš„èµ„æºã€‚ç”±äº JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯ä»¥èŠ‚çœæœåŠ¡å™¨èµ„æºã€‚å› æ­¤ JWT è¦æ¯” Session Cookies å…·æœ‰æ›´å¼ºçš„å¯æ‰©å±•æ€§ã€‚ JWT æ”¯æŒè·¨åŸŸè®¤è¯Session Cookies åªèƒ½ç”¨åœ¨å•ä¸ªèŠ‚ç‚¹çš„åŸŸæˆ–è€…å®ƒçš„å­åŸŸä¸­æœ‰æ•ˆã€‚å¦‚æœå®ƒä»¬å°è¯•é€šè¿‡ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹è®¿é—®ï¼Œå°±ä¼šè¢«ç¦æ­¢ã€‚å¦‚æœä½ å¸Œæœ›è‡ªå·±çš„ç½‘ç«™å’Œå…¶ä»–ç«™ç‚¹å»ºç«‹å®‰å…¨è¿æ¥æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨ JWT å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ JWT èƒ½å¤Ÿé€šè¿‡å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è·¨åŸŸè®¤è¯ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:4","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#json-æ˜¯æ— çŠ¶æ€çš„"},{"categories":["web"],"content":" JWT å’Œ Session Cookies çš„ä¸åŒJWT å’Œ Session Cookies éƒ½æä¾›å®‰å…¨çš„ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒ å¯†ç ç­¾åJWT å…·æœ‰åŠ å¯†ç­¾åï¼Œè€Œ Session Cookies åˆ™æ²¡æœ‰ã€‚ JSON æ˜¯æ— çŠ¶æ€çš„JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºå£°æ˜è¢«å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯æœåŠ¡ç«¯å†…å­˜ä¸­ã€‚ èº«ä»½éªŒè¯å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚å¿…é¡»é€šè¿‡æœåŠ¡å™¨æ•°æ®åº“æˆ–ç±»ä¼¼ä½ç½®ä¸­è¿›è¡Œã€‚ è¿™æ„å‘³ç€å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œå¤šæ¬¡èº«ä»½éªŒè¯ï¼Œè€Œæ— éœ€ä¸ç«™ç‚¹æˆ–åº”ç”¨ç¨‹åºçš„æ•°æ®åº“è¿›è¡Œé€šä¿¡ï¼Œä¹Ÿæ— éœ€åœ¨æ­¤è¿‡ç¨‹ä¸­æ¶ˆè€—å¤§é‡èµ„æºã€‚ å¯æ‰©å±•æ€§Session Cookies æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœç½‘ç«™æˆ–è€…åº”ç”¨å¾ˆå¤§çš„æƒ…å†µä¸‹ä¼šè€—è´¹å¤§é‡çš„èµ„æºã€‚ç”±äº JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯ä»¥èŠ‚çœæœåŠ¡å™¨èµ„æºã€‚å› æ­¤ JWT è¦æ¯” Session Cookies å…·æœ‰æ›´å¼ºçš„å¯æ‰©å±•æ€§ã€‚ JWT æ”¯æŒè·¨åŸŸè®¤è¯Session Cookies åªèƒ½ç”¨åœ¨å•ä¸ªèŠ‚ç‚¹çš„åŸŸæˆ–è€…å®ƒçš„å­åŸŸä¸­æœ‰æ•ˆã€‚å¦‚æœå®ƒä»¬å°è¯•é€šè¿‡ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹è®¿é—®ï¼Œå°±ä¼šè¢«ç¦æ­¢ã€‚å¦‚æœä½ å¸Œæœ›è‡ªå·±çš„ç½‘ç«™å’Œå…¶ä»–ç«™ç‚¹å»ºç«‹å®‰å…¨è¿æ¥æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨ JWT å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ JWT èƒ½å¤Ÿé€šè¿‡å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è·¨åŸŸè®¤è¯ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:4","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#å¯æ‰©å±•æ€§"},{"categories":["web"],"content":" JWT å’Œ Session Cookies çš„ä¸åŒJWT å’Œ Session Cookies éƒ½æä¾›å®‰å…¨çš„ç”¨æˆ·èº«ä»½éªŒè¯ï¼Œä½†æ˜¯å®ƒä»¬æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒ å¯†ç ç­¾åJWT å…·æœ‰åŠ å¯†ç­¾åï¼Œè€Œ Session Cookies åˆ™æ²¡æœ‰ã€‚ JSON æ˜¯æ— çŠ¶æ€çš„JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œå› ä¸ºå£°æ˜è¢«å­˜å‚¨åœ¨å®¢æˆ·ç«¯ï¼Œè€Œä¸æ˜¯æœåŠ¡ç«¯å†…å­˜ä¸­ã€‚ èº«ä»½éªŒè¯å¯ä»¥åœ¨æœ¬åœ°è¿›è¡Œï¼Œè€Œä¸æ˜¯åœ¨è¯·æ±‚å¿…é¡»é€šè¿‡æœåŠ¡å™¨æ•°æ®åº“æˆ–ç±»ä¼¼ä½ç½®ä¸­è¿›è¡Œã€‚ è¿™æ„å‘³ç€å¯ä»¥å¯¹ç”¨æˆ·è¿›è¡Œå¤šæ¬¡èº«ä»½éªŒè¯ï¼Œè€Œæ— éœ€ä¸ç«™ç‚¹æˆ–åº”ç”¨ç¨‹åºçš„æ•°æ®åº“è¿›è¡Œé€šä¿¡ï¼Œä¹Ÿæ— éœ€åœ¨æ­¤è¿‡ç¨‹ä¸­æ¶ˆè€—å¤§é‡èµ„æºã€‚ å¯æ‰©å±•æ€§Session Cookies æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨å†…å­˜ä¸­ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœç½‘ç«™æˆ–è€…åº”ç”¨å¾ˆå¤§çš„æƒ…å†µä¸‹ä¼šè€—è´¹å¤§é‡çš„èµ„æºã€‚ç”±äº JWT æ˜¯æ— çŠ¶æ€çš„ï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå®ƒä»¬å¯ä»¥èŠ‚çœæœåŠ¡å™¨èµ„æºã€‚å› æ­¤ JWT è¦æ¯” Session Cookies å…·æœ‰æ›´å¼ºçš„å¯æ‰©å±•æ€§ã€‚ JWT æ”¯æŒè·¨åŸŸè®¤è¯Session Cookies åªèƒ½ç”¨åœ¨å•ä¸ªèŠ‚ç‚¹çš„åŸŸæˆ–è€…å®ƒçš„å­åŸŸä¸­æœ‰æ•ˆã€‚å¦‚æœå®ƒä»¬å°è¯•é€šè¿‡ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹è®¿é—®ï¼Œå°±ä¼šè¢«ç¦æ­¢ã€‚å¦‚æœä½ å¸Œæœ›è‡ªå·±çš„ç½‘ç«™å’Œå…¶ä»–ç«™ç‚¹å»ºç«‹å®‰å…¨è¿æ¥æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ ä½¿ç”¨ JWT å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ JWT èƒ½å¤Ÿé€šè¿‡å¤šä¸ªèŠ‚ç‚¹è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è·¨åŸŸè®¤è¯ã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:4","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#jwt-æ”¯æŒè·¨åŸŸè®¤è¯"},{"categories":["web"],"content":" JWT å’Œ Session Cookies çš„é€‰å‹æˆ‘ä»¬ä¸Šé¢æ¢è®¨äº† JWT å’Œ Cookies çš„ä¸åŒç‚¹ï¼Œç›¸ä¿¡ä½ ä¹Ÿä¼šå¯¹é€‰å‹æœ‰äº†æ›´æ·±çš„è®¤è¯†ï¼Œå¤§è‡´æ¥è¯´ å¯¹äºåªéœ€è¦ç™»å½•ç”¨æˆ·å¹¶è®¿é—®å­˜å‚¨åœ¨ç«™ç‚¹æ•°æ®åº“ä¸­çš„ä¸€äº›ä¿¡æ¯çš„ä¸­å°å‹ç½‘ç«™æ¥è¯´ï¼ŒSession Cookies é€šå¸¸å°±èƒ½æ»¡è¶³ã€‚ å¦‚æœä½ æœ‰ä¼ä¸šçº§ç«™ç‚¹ï¼Œåº”ç”¨ç¨‹åºæˆ–é™„è¿‘çš„ç«™ç‚¹ï¼Œå¹¶ä¸”éœ€è¦å¤„ç†å¤§é‡çš„è¯·æ±‚ï¼Œå°¤å…¶æ˜¯ç¬¬ä¸‰æ–¹æˆ–å¾ˆå¤šç¬¬ä¸‰æ–¹ï¼ˆåŒ…æ‹¬ä½äºä¸åŒåŸŸçš„APIï¼‰ï¼Œåˆ™ JWT æ˜¾ç„¶æ›´é€‚åˆã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:2:5","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#jwt-å’Œ-session-cookies-çš„é€‰å‹"},{"categories":["web"],"content":" JWT è§£ç JWTï¼ˆJSON Web Tokenï¼‰çš„è§£ç åŒ…æ‹¬ä»¥ä¸‹æ­¥éª¤ï¼š å°† JWT å­—ç¬¦ä¸²åˆ†ä¸ºå¤´éƒ¨ã€è´Ÿè½½å’Œç­¾åä¸‰ä¸ªéƒ¨åˆ†ã€‚ ä½¿ç”¨ Base64URL è§£ç å¤´éƒ¨å’Œè´Ÿè½½ï¼Œä»¥è·å–åŸå§‹çš„ JSON æ•°æ®ã€‚ ä½¿ç”¨å¤´éƒ¨ä¸­çš„ç®—æ³•ä¿¡æ¯ï¼ˆé€šå¸¸åœ¨ alg å­—æ®µä¸­ï¼‰æ¥éªŒè¯ç­¾åã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¤´éƒ¨æŒ‡å®šäº†ä½¿ç”¨ HS256 ç®—æ³•ï¼Œè¿™æ„å‘³ç€éœ€è¦ä½¿ç”¨ç›¸åŒçš„å¯†é’¥å¯¹å¤´éƒ¨å’Œè´Ÿè½½éƒ¨åˆ†è¿›è¡Œç­¾åï¼Œå¹¶éªŒè¯ç­¾åæ˜¯å¦åŒ¹é…ã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨ Golang è¿›è¡Œ JWT è§£ç çš„ç¤ºä¾‹ä»£ç ï¼Œä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…ï¼Œä½†å‡è®¾ä½ å·²ç»æœ‰äº†å¯†é’¥ã€‚ package main import ( \"encoding/base64\" \"encoding/json\" \"fmt\" \"strings\" ) // å®šä¹‰JWTç»“æ„ä½“æ¥è§£æå¤´éƒ¨å’Œè´Ÿè½½ type JWT struct { Header map[string]interface{} Payload map[string]interface{} Signature string } func main() { // è¦è§£ç çš„JWTå­—ç¬¦ä¸² jwtString := \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE2OTY5MDY5MTcsInVzZXJfaWQiOjF9.-CGzj1oGoQtk3PfY1ppkzGkaArGbvNX5eQIkKNGR4EE\" // ä½¿ç”¨ç‚¹å·åˆ†å‰²JWTå­—ç¬¦ä¸²ï¼Œå¾—åˆ°å¤´éƒ¨ã€è´Ÿè½½å’Œç­¾å parts := strings.Split(jwtString, \".\") if len(parts) != 3 { fmt.Println(\"Invalid JWT format\") return } // è§£ç å¤´éƒ¨ headerJSON, err := base64.RawURLEncoding.DecodeString(parts[0]) if err != nil { fmt.Println(\"Error decoding header:\", err) return } // è§£ç è´Ÿè½½ payloadJSON, err := base64.RawURLEncoding.DecodeString(parts[1]) if err != nil { fmt.Println(\"Error decoding payload:\", err) return } // è§£ç å¤´éƒ¨å’Œè´Ÿè½½ä¸­çš„JSONæ•°æ® var headerData, payloadData map[string]interface{} if err := json.Unmarshal(headerJSON, \u0026headerData); err != nil { fmt.Println(\"Error unmarshaling header:\", err) return } if err := json.Unmarshal(payloadJSON, \u0026payloadData); err != nil { fmt.Println(\"Error unmarshaling payload:\", err) return } // è§£æç­¾å signature := parts[2] // åˆ›å»ºJWTç»“æ„ä½“ jwt := JWT{ Header: headerData, Payload: payloadData, Signature: signature, } // æ‰“å°è§£æç»“æœ fmt.Println(\"Header:\", jwt.Header) fmt.Println(\"Payload:\", jwt.Payload) fmt.Println(\"Signature:\", jwt.Signature) } æ­¤ç¤ºä¾‹å‡å®šä½ å·²ç»æœ‰ç”¨äºéªŒè¯ç­¾åçš„å¯†é’¥ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯ HS256 ç®—æ³•ã€‚è¦éªŒè¯ç­¾åæ˜¯å¦æœ‰æ•ˆï¼Œä½ éœ€è¦ä½¿ç”¨ç›¸åŒçš„å¯†é’¥å¯¹å¤´éƒ¨å’Œè´Ÿè½½éƒ¨åˆ†è¿›è¡Œç­¾åï¼Œå¹¶æ¯”è¾ƒå¾—åˆ°çš„ç­¾åä¸ JWT ä¸­çš„ç­¾åæ˜¯å¦åŒ¹é…ã€‚å¦‚æœåŒ¹é…ï¼ŒJWT å°±æ˜¯æœ‰æ•ˆçš„ã€‚å¦‚æœä¸åŒ¹é…ï¼Œè¯´æ˜ JWT è¢«ç¯¡æ”¹æˆ–æ— æ•ˆã€‚ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:3:0","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#jwt-è§£ç "},{"categories":["web"],"content":" FAQ å¦‚ä½•ç¦ç”¨ Cookies åï¼Œä½¿ç”¨ Session å¦‚æœç¦ç”¨äº† Cookiesï¼ŒæœåŠ¡å™¨ä»ä¼šå°† sessionId ä»¥ cookie çš„æ–¹å¼å‘é€ç»™æµè§ˆå™¨ï¼Œä½†æ˜¯ï¼Œæµè§ˆå™¨ä¸å†ä¿å­˜è¿™ä¸ª cookie ï¼ˆå³ sessionIdï¼‰ äº†ã€‚ å¦‚æœæƒ³è¦ç»§ç»­ä½¿ç”¨ sessionï¼Œéœ€è¦é‡‡ç”¨ URL é‡å†™çš„æ–¹å¼æ¥å®ç°ï¼Œå¯ä»¥å‚è€ƒ https://www.cnblogs.com/Renyi-Fan/p/11012086.html ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:4:0","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#faq"},{"categories":["web"],"content":" FAQ å¦‚ä½•ç¦ç”¨ Cookies åï¼Œä½¿ç”¨ Session å¦‚æœç¦ç”¨äº† Cookiesï¼ŒæœåŠ¡å™¨ä»ä¼šå°† sessionId ä»¥ cookie çš„æ–¹å¼å‘é€ç»™æµè§ˆå™¨ï¼Œä½†æ˜¯ï¼Œæµè§ˆå™¨ä¸å†ä¿å­˜è¿™ä¸ª cookie ï¼ˆå³ sessionIdï¼‰ äº†ã€‚ å¦‚æœæƒ³è¦ç»§ç»­ä½¿ç”¨ sessionï¼Œéœ€è¦é‡‡ç”¨ URL é‡å†™çš„æ–¹å¼æ¥å®ç°ï¼Œå¯ä»¥å‚è€ƒ https://www.cnblogs.com/Renyi-Fan/p/11012086.html ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:4:0","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#å¦‚ä½•ç¦ç”¨-cookies-åä½¿ç”¨-session"},{"categories":["web"],"content":" JWT å‰ç«¯è§£ç åœ¨çº¿è§£å¯†å·¥å…·https://www.box3.cn/tools/jwt.html npm åŒ…https://www.npmjs.com/package/jwt-decode ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:4:1","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#jwt-å‰ç«¯è§£ç "},{"categories":["web"],"content":" å‚è€ƒ çœ‹å®Œè¿™ç¯‡ Sessionã€Cookieã€Tokenï¼Œå’Œé¢è¯•å®˜æ‰¯çš®å°±æ²¡é—®é¢˜äº† JSON Web Token å…¥é—¨æ•™ç¨‹ è®¤è¯æ–¹å¼çš„å‰ä¸–ä»Šç”Ÿï¼Œä»¥åŠ JWT çš„ä½¿ç”¨ ","date":"2022-06-11","objectID":"/session-cookie-token-difference/:5:0","series":["reproduce"],"tags":["web","session","cookie"],"title":"session cookie token çš„åŒºåˆ«","uri":"/session-cookie-token-difference/#å‚è€ƒ"},{"categories":["mysql"],"content":"xiaobinqt,","date":"2022-05-21","objectID":"/mysql-faq-2/","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/"},{"categories":["mysql"],"content":" ç´¢å¼•æ•°æ®ç»“æ„ä¸ºä»€ä¹ˆä¸ä½¿ç”¨çº¢é»‘æ ‘æˆ–Bæ ‘åœ¨ InnoDB å¼•æ“ä¸­ï¼Œç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„æ˜¯ B+ æ ‘ã€‚MySQL çš„æ•°æ®æ˜¯å­˜å‚¨åœ¨ç¡¬ç›˜çš„ï¼Œåœ¨æŸ¥è¯¢æ—¶ä¸€èˆ¬æ˜¯ä¸èƒ½ã€Œä¸€æ¬¡æ€§ã€æŠŠå…¨éƒ¨æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ã€‚çº¢é»‘æ ‘æ˜¯ã€ŒäºŒå‰æŸ¥æ‰¾æ ‘ã€çš„å˜ç§ï¼Œä¸€ä¸ª Node èŠ‚ç‚¹åªèƒ½å­˜å‚¨ä¸€ä¸ªKeyå’Œä¸€ä¸ªValueã€‚B å’Œ B+ æ ‘è·Ÿçº¢é»‘æ ‘ä¸ä¸€æ ·ï¼Œå®ƒä»¬ç®—æ˜¯ã€Œå¤šè·¯æœç´¢æ ‘ã€ï¼Œç›¸è¾ƒäºã€ŒäºŒå‰æœç´¢æ ‘ã€è€Œè¨€ï¼Œä¸€ä¸ª Node èŠ‚ç‚¹å¯ä»¥å­˜å‚¨çš„ä¿¡æ¯ä¼šæ›´å¤šï¼Œã€Œå¤šè·¯æœç´¢æ ‘ã€çš„é«˜åº¦ä¼šæ¯”ã€ŒäºŒå‰æœç´¢æ ‘ã€æ›´ä½ã€‚ äº†è§£äº†åŒºåˆ«ä¹‹åï¼Œå…¶å®å°±å¾ˆå®¹æ˜“å‘ç°ï¼Œåœ¨æ•°æ®ä¸èƒ½ä¸€æ¬¡åŠ è½½è‡³å†…å­˜çš„åœºæ™¯ä¸‹ï¼Œæ•°æ®éœ€è¦è¢«æ£€ç´¢å‡ºæ¥ï¼Œé€‰æ‹© B æˆ– B+ æ ‘çš„ç†ç”±å°±å¾ˆå……åˆ†äº†ï¼Œä¸€ä¸ª Node èŠ‚ç‚¹å­˜å‚¨ä¿¡æ¯æ›´å¤šï¼ˆç›¸è¾ƒäºäºŒå‰æœç´¢æ ‘ï¼‰ï¼Œ æ ‘çš„é«˜åº¦æ›´ä½ï¼Œ æ ‘çš„é«˜åº¦å½±å“æ£€ç´¢çš„é€Ÿåº¦ã€‚ B+ æ ‘ç›¸å¯¹äº B æ ‘è€Œè¨€ï¼Œå®ƒåˆæœ‰ä¸¤ç§ç‰¹æ€§ï¼š B+ æ ‘éå¶å­èŠ‚ç‚¹ä¸å­˜å‚¨æ•°æ®ï¼Œåœ¨ç›¸åŒçš„æ•°æ®é‡ä¸‹ï¼ŒB+ æ ‘æ›´åŠ çŸ®å£®ã€‚æ•°æ®éƒ½å­˜å‚¨åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œéå¶å­èŠ‚ç‚¹çš„å­˜å‚¨èƒ½å­˜å‚¨æ›´å¤šçš„ç´¢å¼•ï¼Œæ‰€ä»¥æ•´æ£µæ ‘å°±æ›´åŠ çŸ®å£®ã€‚æ ‘çš„é«˜åº¦èƒ½å¤Ÿå†³å®šç£ç›˜ IO çš„æ¬¡æ•°ï¼Œç£ç›˜ IO æ¬¡æ•°è¶Šå°‘ï¼Œå¯¹äºæ€§èƒ½çš„æå‡å°±è¶Šå¤§ã€‚ å› ä¸ºå¶å­èŠ‚ç‚¹å­˜å‚¨æ‰€æœ‰æ•°æ®ï¼Œæ‰€ä»¥ B+ æ ‘çš„å…¨å±€æ‰«æèƒ½åŠ›æ›´å¼ºä¸€äº›ï¼Œå› ä¸ºå®ƒåªéœ€è¦æ‰«æå¶å­èŠ‚ç‚¹ã€‚ä½†æ˜¯ B æ ‘éœ€è¦éå†æ•´ä¸ªæ ‘ã€‚B+ æ ‘å¶å­èŠ‚ç‚¹ä¹‹é—´ç»„æˆä¸€ä¸ªé“¾è¡¨ï¼Œæ–¹ä¾¿äºéå†æŸ¥è¯¢ï¼Œéå†æ“ä½œåœ¨ MySQL ä¸­æ¯”è¾ƒå¸¸è§ã€‚ b+æ ‘ åœ¨ MySQL InnoDB å¼•æ“ä¸‹ï¼Œæ¯åˆ›å»ºä¸€ä¸ªç´¢å¼•ï¼Œç›¸å½“äºç”Ÿæˆäº†ä¸€é¢— B+ æ ‘ã€‚å¦‚æœè¯¥ç´¢å¼•æ˜¯ã€Œèšé›†ï¼ˆèšç°‡ï¼‰ç´¢å¼•ã€ï¼Œé‚£å½“å‰ B+ æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨ç€ã€Œä¸»é”®å’Œå½“å‰è¡Œçš„æ•°æ®ã€ï¼Œå¦‚æœè¯¥ç´¢å¼•æ˜¯ã€Œéèšç°‡ç´¢å¼•ã€ï¼Œé‚£å½“å‰ B+ æ ‘çš„å¶å­èŠ‚ç‚¹å­˜å‚¨ç€ã€Œä¸»é”®å’Œå½“å‰ç´¢å¼•åˆ—å€¼ã€ æ¯”å¦‚å†™äº†ä¸€å¥ğŸ‘‡ select * from user where id \u003e= 10 é‚£åªè¦å®šä½åˆ° id ä¸º 10 çš„è®°å½•ï¼Œç„¶ååœ¨å¶å­èŠ‚ç‚¹ä¹‹é—´é€šè¿‡éå†é“¾è¡¨ï¼ˆå¶å­èŠ‚ç‚¹ç»„æˆçš„é“¾è¡¨ï¼‰ï¼Œå³å¯æ‰¾åˆ°å¾€åçš„è®°å½•äº†ã€‚ç”±äº B æ ‘æ˜¯ä¼šåœ¨éå¶å­èŠ‚ç‚¹ä¹Ÿå­˜å‚¨æ•°æ®ï¼Œè¦éå†çš„æ—¶å€™å¯èƒ½å°±å¾—è·¨å±‚æ£€ç´¢ï¼Œç›¸å¯¹éº»çƒ¦äº›ã€‚åŸºäºæ ‘çš„å±‚çº§ä»¥åŠä¸šåŠ¡ä½¿ç”¨åœºæ™¯çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ MySQL é€‰æ‹©äº† B+ æ ‘ä½œä¸ºç´¢å¼•çš„åº•å±‚æ•°æ®ç»“æ„ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:1:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#ç´¢å¼•æ•°æ®ç»“æ„ä¸ºä»€ä¹ˆä¸ä½¿ç”¨çº¢é»‘æ ‘æˆ–bæ ‘"},{"categories":["mysql"],"content":" ä»€ä¹ˆå«åšå›è¡¨å½“æˆ‘ä»¬ä½¿ç”¨ç´¢å¼•æŸ¥è¯¢æ•°æ®æ—¶ï¼Œæ£€ç´¢å‡ºæ¥çš„æ•°æ®å¯èƒ½åŒ…å«å…¶ä»–åˆ—ï¼Œä½†èµ°çš„ç´¢å¼•æ ‘ï¼Œå¶å­èŠ‚ç‚¹åªèƒ½æŸ¥åˆ°å½“å‰åˆ—å€¼ä»¥åŠä¸»é”® IDï¼Œæ‰€ä»¥éœ€è¦æ ¹æ®ä¸»é”® ID å†å»æŸ¥ä¸€éæ•°æ®ï¼Œå¾—åˆ°SQL æ‰€éœ€çš„åˆ—ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœç»™è®¢å•å·å­—æ®µorderIdå»ºäº†ä¸ªç´¢å¼•ï¼Œä½†æŸ¥è¯¢çš„ SQL æ˜¯ select orderId,orderName from orderdetail where orderId = 123 åœ¨orderIdçš„ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹åªæœ‰orderIdå’Œä¸»é”®Idï¼Œè€Œæˆ‘ä»¬è¿˜æƒ³æ£€ç´¢å‡ºorderNameï¼Œæ‰€ä»¥ MySQL ä¼šæ‹¿åˆ° ID å†å»æŸ¥å‡ºorderNameç»™æˆ‘ä»¬è¿”å›ï¼Œè¿™ç§æ“ä½œå°±å«å›è¡¨ã€‚ å›è¡¨ æƒ³è¦é¿å…å›è¡¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è¦†ç›–ç´¢å¼•ï¼ˆèƒ½ä½¿ç”¨å°±ä½¿ç”¨ï¼Œå› ä¸ºå¯ä»¥é¿å…å›è¡¨æ“ä½œï¼‰ã€‚ æ‰€è°“çš„è¦†ç›–ç´¢å¼•ï¼Œå®é™…ä¸Šå°±æ˜¯ä½ æƒ³è¦æŸ¥å‡ºçš„åˆ—åˆšå¥½åœ¨å¶å­èŠ‚ç‚¹ä¸Šéƒ½å­˜åœ¨ï¼Œæ¯”å¦‚å»ºäº†orderIdå’ŒorderNameè”åˆç´¢å¼•ï¼Œåˆšå¥½æˆ‘éœ€è¦æŸ¥è¯¢ä¹Ÿæ˜¯orderIdå’ŒorderNameï¼Œè¿™äº›æ•°æ®éƒ½å­˜åœ¨ç´¢å¼•æ ‘çš„å¶å­èŠ‚ç‚¹ä¸Šï¼Œå°±ä¸éœ€è¦å›è¡¨æ“ä½œäº†ã€‚æ‰€ä»¥ï¼Œå¦‚æœæŸ¥è¯¢çš„å­—æ®µæ°å¥½å‘½ä¸­è”åˆç´¢å¼•çš„å­—æ®µï¼Œåˆ™å¯ä»¥é¿å…å›è¡¨æ“ä½œã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:2:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#ä»€ä¹ˆå«åšå›è¡¨"},{"categories":["mysql"],"content":" ä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™å¦‚æœæœ‰è”åˆç´¢å¼• (a,b,c,d)ï¼Œå®é™…ä¸Šå…¶å®æ–°å»ºäº† aï¼Œabï¼Œabcï¼Œabcb å››ä¸ªç´¢å¼•ï¼Œå› æ­¤åªè¦æŸ¥è¯¢ä¸­ä½¿ç”¨äº†è¿™ 4 ç»„å­—æ®µï¼Œéƒ½å¯ä»¥è®©è”åˆç´¢å¼•ç”Ÿæ•ˆã€‚ æŸ¥è¯¢æ¡ä»¶ a=1 and b=2 and c\u003e3 and d=4ï¼Œè¿™é‡Œåªèƒ½ä½¿ç”¨aï¼Œbå’Œaã€bç´¢å¼•ï¼Œè€Œä¸èƒ½ä½¿ç”¨aã€bã€cæˆ–aã€bã€cã€dç´¢å¼•ã€‚ å…ˆåŒ¹é…æœ€å·¦è¾¹çš„ï¼Œç´¢å¼•åªèƒ½ç”¨äºæŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨æˆ–ç›¸ç­‰ï¼Œé‡åˆ°èŒƒå›´æŸ¥è¯¢\u003eã€\u003cã€betweenã€likeå·¦åŒ¹é…ç­‰å°±ä¸èƒ½è¿›ä¸€æ­¥åŒ¹é…äº†ï¼Œåç»­é€€åŒ–ä¸ºçº¿æ€§æŸ¥æ‰¾ï¼Œè¿™å°±æ˜¯æœ€å·¦åŒ¹é…åŸåˆ™ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:3:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#ä»€ä¹ˆæ˜¯æœ€å·¦åŒ¹é…åŸåˆ™"},{"categories":["mysql"],"content":" å®é™…é¡¹ç›®ä¸­å¦‚ä½•ç”Ÿæˆä¸»é”®ç”¨è‡ªå¢ä¸»é”®ã€‚é¦–å…ˆä¸»é”®å¾—ä¿è¯å®ƒçš„å”¯ä¸€æ€§å’Œç©ºé—´å°½å¯èƒ½çŸ­ï¼Œè¿™ä¸¤å—æ˜¯éœ€è¦è€ƒè™‘çš„ã€‚ç”±äºç´¢å¼•çš„æœ‰åºç‰¹æ€§ï¼Œid æœ¬èº«å…·æœ‰è¿ç»­æ€§ä½¿å¾—å¯¹åº”çš„æ•°æ®ä¹Ÿä¼šæŒ‰ç…§é¡ºåºå­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œå†™å…¥æ€§èƒ½å’Œæ£€ç´¢æ€§èƒ½éƒ½å¾ˆé«˜ã€‚å¦‚æœä½¿ç”¨ uuid è¿™ç§éšæœº idï¼Œé‚£ä¹ˆåœ¨é¢‘ç¹æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šå¯¼è‡´éšæœºç£ç›˜ IOï¼Œä»è€Œå¯¼è‡´æ€§èƒ½è¾ƒä½ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:4:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#å®é™…é¡¹ç›®ä¸­å¦‚ä½•ç”Ÿæˆä¸»é”®"},{"categories":["mysql"],"content":" å¦‚ä½•ç†è§£InnoDBå¼•æ“ä¸­çš„äº‹åŠ¡äº‹åŠ¡å¯ä»¥ä½¿ã€Œä¸€ç»„æ“ä½œã€è¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚äº‹åŠ¡å…¶ç›®çš„æ˜¯ä¸ºäº†ã€Œä¿è¯æ•°æ®æœ€ç»ˆçš„ä¸€è‡´æ€§ã€ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:5:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#å¦‚ä½•ç†è§£innodbå¼•æ“ä¸­çš„äº‹åŠ¡"},{"categories":["mysql"],"content":" äº‹åŠ¡çš„ç‰¹æ€§ACIDï¼Œåˆ†åˆ«æ˜¯åŸå­æ€§ï¼ˆAtomicityï¼‰ã€ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ã€éš”ç¦»æ€§ï¼ˆIsolationï¼‰ã€æŒä¹…æ€§ï¼ˆDurabilityï¼‰ã€‚ åŸå­æ€§æŒ‡çš„æ˜¯ï¼šå½“å‰äº‹åŠ¡çš„æ“ä½œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ã€‚åŸå­æ€§ç”± undo log æ—¥å¿—æ¥ä¿è¯ï¼Œå› ä¸º undo log è®°è½½ç€æ•°æ®ä¿®æ”¹å‰çš„ä¿¡æ¯ã€‚ æ¯”å¦‚æˆ‘ä»¬è¦ insert ä¸€æ¡æ•°æ®äº†ï¼Œé‚£ undo log ä¼šè®°å½•çš„ä¸€æ¡å¯¹åº”çš„ delete æ—¥å¿—ã€‚æˆ‘ä»¬è¦ update ä¸€æ¡è®°å½•æ—¶ï¼Œé‚£ undo log ä¼šè®°å½•ä¹‹å‰çš„ã€Œæ—§å€¼ã€çš„ update è®°å½•ã€‚ å¦‚æœæ‰§è¡Œäº‹åŠ¡è¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸çš„æƒ…å†µï¼Œé‚£æ‰§è¡Œã€Œå›æ»šã€ã€‚InnoDB å¼•æ“å°±æ˜¯åˆ©ç”¨ undo log è®°å½•ä¸‹çš„æ•°æ®ï¼Œæ¥å°†æ•°æ®ã€Œæ¢å¤ã€åˆ°äº‹åŠ¡å¼€å§‹ä¹‹å‰ã€‚ åŸå­æ€§ éš”ç¦»æ€§æŒ‡çš„æ˜¯ï¼šåœ¨äº‹åŠ¡ã€Œå¹¶å‘ã€æ‰§è¡Œæ—¶ï¼Œä»–ä»¬å†…éƒ¨çš„æ“ä½œä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚å¦‚æœå¤šä¸ªäº‹åŠ¡å¯ä»¥åŒæ—¶æ“ä½œä¸€ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šäº§ç”Ÿè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»çš„é—®é¢˜ã€‚äºæ˜¯ï¼Œäº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´éœ€è¦å­˜åœ¨ã€Œä¸€å®šã€çš„éš”ç¦»ã€‚ åœ¨ InnoDB å¼•æ“ä¸­ï¼Œå®šä¹‰äº†å››ç§éš”ç¦»çº§åˆ«ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼Œåˆ†åˆ«æ˜¯ï¼šread uncommittedè¯»æœªæäº¤ã€read committedè¯»å·²æäº¤ã€repeatable readå¯é‡å¤å¤è¯»ã€serializableä¸²è¡Œã€‚ ä¸åŒçš„éš”ç¦»çº§åˆ«å¯¹äº‹åŠ¡ä¹‹é—´çš„éš”ç¦»æ€§æ˜¯ä¸ä¸€æ ·çš„ï¼Œçº§åˆ«è¶Šé«˜äº‹åŠ¡éš”ç¦»æ€§è¶Šå¥½ï¼Œä½†æ€§èƒ½å°±è¶Šä½ï¼Œè€Œéš”ç¦»æ€§æ˜¯ç”± MySQL çš„å„ç§é”æ¥å®ç°çš„ï¼Œåªæ˜¯å®ƒå±è”½äº†åŠ é”çš„ç»†èŠ‚ã€‚ éš”ç¦»æ€§ æŒä¹…æ€§æŒ‡çš„å°±æ˜¯ï¼šä¸€æ—¦æäº¤äº†äº‹åŠ¡ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„ã€‚è¯´ç™½äº†å°±æ˜¯ï¼Œä¼šå°†æ•°æ®æŒä¹…åŒ–åœ¨ç¡¬ç›˜ä¸Šã€‚ è€ŒæŒä¹…æ€§ç”± redo log æ—¥å¿—æ¥ä¿è¯ã€‚å½“æˆ‘ä»¬è¦ä¿®æ”¹æ•°æ®æ—¶ï¼ŒMySQL æ˜¯å…ˆæŠŠè¿™æ¡è®°å½•æ‰€åœ¨çš„ã€Œé¡µã€æ‰¾åˆ°ï¼Œç„¶åæŠŠè¯¥é¡µåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå°†å¯¹åº”è®°å½•è¿›è¡Œä¿®æ”¹ã€‚ ä¸ºäº†é˜²æ­¢å†…å­˜ä¿®æ”¹å®Œäº†ï¼ŒMySQL å°±æŒ‚æ‰çš„é—®é¢˜ã€‚å¦‚æœå†…å­˜æ”¹å®Œï¼Œç›´æ¥æŒ‚æ‰ï¼Œé‚£è¿™æ¬¡çš„ä¿®æ”¹ç›¸å½“äºå°±ä¸¢å¤±äº†ã€‚å¯¹äºè¿™ä¸ªé—®é¢˜ï¼ŒMySQLå¼•å…¥äº† redo logï¼Œå†…å­˜å†™å®Œäº†ï¼Œç„¶åä¼šå†™ä¸€ä»½ redo logï¼Œè¿™ä»½ redo log è®°è½½ç€è¿™æ¬¡åœ¨æŸä¸ªé¡µä¸Šåšäº†ä»€ä¹ˆä¿®æ”¹ã€‚å³ä¾¿ MySQL åœ¨ä¸­é€”æŒ‚äº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ® redo log æ¥å¯¹æ•°æ®è¿›è¡Œæ¢å¤ã€‚redo log æ˜¯é¡ºåºå†™çš„ï¼Œå†™å…¥é€Ÿåº¦å¾ˆå¿«ã€‚å¹¶ä¸”å®ƒè®°å½•çš„æ˜¯ç‰©ç†ä¿®æ”¹ï¼ˆxxxx é¡µåšäº† xxx ä¿®æ”¹ï¼‰ï¼Œæ–‡ä»¶çš„ä½“ç§¯å¾ˆå°ï¼Œæ¢å¤é€Ÿåº¦å¾ˆå¿«ã€‚ æŒä¹…æ€§ ä¸€è‡´æ€§ä»»ä½•ä¸€ä¸ªäº‹åŠ¡å‘ç”Ÿçš„å‰åï¼Œåº“ä¸­çš„æ•°æ®å˜åŒ–å¿…é¡»ä¸€è‡´ã€‚å¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬ä½¿ç”¨äº‹åŠ¡çš„ã€Œç›®çš„ã€ï¼Œè€Œã€Œéš”ç¦»æ€§ã€ã€ŒåŸå­æ€§ã€ã€ŒæŒä¹…æ€§ã€å‡æ˜¯ä¸ºäº†ä¿éšœã€Œä¸€è‡´æ€§ã€çš„æ‰‹æ®µï¼Œä¿è¯ä¸€è‡´æ€§éœ€è¦ç”±åº”ç”¨ç¨‹åºä»£ç æ¥ä¿è¯ã€‚æ¯”å¦‚ï¼Œå¦‚æœäº‹åŠ¡åœ¨å‘ç”Ÿçš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†å¼‚å¸¸æƒ…å†µï¼Œæ­¤æ—¶ä½ å°±å¾—å›æ»šäº‹åŠ¡ï¼Œè€Œä¸æ˜¯å¼ºè¡Œæäº¤äº‹åŠ¡æ¥å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚ ä¸€è‡´æ€§ ","date":"2022-05-21","objectID":"/mysql-faq-2/:6:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#äº‹åŠ¡çš„ç‰¹æ€§"},{"categories":["mysql"],"content":" ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤MySQL çš„ bin log åªèƒ½ç”¨äºå½’æ¡£ï¼Œä¸è¶³ä»¥å®ç°å´©æºƒæ¢å¤crash-safeï¼Œéœ€è¦å€ŸåŠ© InnoDB å¼•æ“çš„ redo log æ‰èƒ½æ‹¥æœ‰å´©æºƒæ¢å¤çš„èƒ½åŠ›ã€‚æ‰€è°“å´©æºƒæ¢å¤å°±æ˜¯ï¼Œå³ä½¿åœ¨æ•°æ®åº“å®•æœºçš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¸ä¼šå‡ºç°æ“ä½œä¸€åŠçš„æƒ…å†µã€‚ bin log å’Œ redo log çš„åŒºåˆ«ğŸ‘‡ bin log æ˜¯ MySQL çš„ Server å±‚å®ç°çš„ï¼Œå¯¹æ‰€æœ‰å¼•æ“éƒ½å¯ä»¥ä½¿ç”¨ï¼Œè€Œ redo log æ˜¯ InnoDB å¼•æ“ç‰¹æœ‰çš„ã€‚ bin log æ˜¯å¯ä»¥è¿½åŠ å†™å…¥çš„ã€‚â€œè¿½åŠ å†™â€ æ˜¯æŒ‡ bin log æ–‡ä»¶å†™åˆ°ä¸€å®šå¤§å°åä¼šåˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªï¼Œå¹¶ä¸ä¼šè¦†ç›–ä»¥å‰çš„æ—¥å¿—ï¼Œä¿å­˜çš„æ˜¯å…¨é‡çš„æ—¥å¿—ã€‚ä½†æ˜¯è¿™å°±ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æ²¡æœ‰æ ‡å¿—èƒ½è®© InnoDB ä» bin log ä¸­åˆ¤æ–­å“ªäº›æ•°æ®å·²ç»åˆ·å…¥ç£ç›˜äº†ï¼Œå“ªäº›æ•°æ®è¿˜æ²¡æœ‰ã€‚ redo log æ˜¯å¾ªç¯å†™çš„ï¼Œredo log åªä¼šè®°å½•æœªåˆ·å…¥ç£ç›˜çš„æ—¥å¿—ï¼Œå·²ç»åˆ·å…¥ç£ç›˜çš„æ•°æ®éƒ½ä¼šä» redo log è¿™ä¸ªæœ‰é™å¤§å°çš„æ—¥å¿—æ–‡ä»¶é‡Œåˆ é™¤ã€‚ bin log å› ä¸ºæ˜¯å…¨é‡æ—¥å¿—ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸ºæ¢å¤æ•°æ®ä½¿ç”¨ï¼Œä¸»ä»å¤åˆ¶æ­å»ºã€‚redo log å¯ä»¥ä½œä¸ºå¼‚å¸¸å®•æœºæˆ–è€…æ•…éšœåçš„æ•°æ®æ¢å¤ä½¿ç”¨ã€‚ ä»¥ä¸‹é¢çš„ SQL è¯­å¥ä¸ºä¾‹ï¼Œæ¥è§£é‡Šä¸‹æ‰§è¡Œå™¨å’Œ InnoDB å­˜å‚¨å¼•æ“åœ¨æ›´æ–°æ—¶åšäº†å“ªäº›äº‹æƒ…ï¼š update table set age = age + 1 where id = 1; ä¸¤é˜¶æ®µæäº¤ æ‰€è°“ä¸¤é˜¶æ®µæäº¤ï¼Œå…¶å®å°±æ˜¯æŠŠ redo log çš„å†™å…¥æ‹†åˆ†æˆäº†ä¸¤ä¸ªæ­¥éª¤prepareå’Œcommitã€‚æ ¹æ®ä¸¤é˜¶æ®µæäº¤ï¼Œå´©æºƒæ¢å¤æ—¶çš„åˆ¤æ–­è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š å¦‚æœ redo log é‡Œé¢çš„äº‹åŠ¡æ˜¯å®Œæ•´çš„ï¼Œä¹Ÿå°±æ˜¯å·²ç»æœ‰äº† commit æ ‡è¯†ï¼Œåˆ™ç›´æ¥æäº¤ã€‚ å¦‚æœ redo log é‡Œé¢çš„äº‹åŠ¡å¤„äº prepare çŠ¶æ€ï¼Œåˆ™åˆ¤æ–­å¯¹åº”çš„äº‹åŠ¡ binlog æ˜¯å¦å­˜åœ¨å¹¶å®Œæ•´ã€‚ å¦‚æœ binlog å­˜åœ¨å¹¶å®Œæ•´ï¼Œåˆ™æäº¤äº‹åŠ¡ï¼› å¦åˆ™ï¼Œå›æ»šäº‹åŠ¡ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:7:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#ä»€ä¹ˆæ˜¯ä¸¤é˜¶æ®µæäº¤"},{"categories":["mysql"],"content":" ä¸ºä»€ä¹ˆéœ€è¦ä¸¤é˜¶æ®µæäº¤ä¸¤é˜¶æ®µæäº¤ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ä¸»ä»æ•°æ®åŒæ­¥çš„é—®é¢˜ã€‚å¦‚æœæ²¡æœ‰ä¸¤é˜¶æ®µæäº¤ï¼Œé‚£ä¹ˆ binlog å’Œ redolog çš„æäº¤ï¼Œæ— éå°±æ˜¯ä¸¤ç§å½¢å¼ğŸ‘‡ å…ˆå†™ bin-log å†å†™ redo-log å…ˆå†™ redo-log å†å†™ bin-log å‡è®¾æˆ‘ä»¬è¦å‘è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½• Rï¼Œå¦‚æœæ˜¯å…ˆå†™ bin-log å†å†™ redo-logï¼Œé‚£ä¹ˆå‡è®¾ bin-log å†™å®Œåå´©æºƒäº†ï¼Œæ­¤æ—¶ redo-log è¿˜æ²¡å†™ã€‚é‚£ä¹ˆé‡å¯æ¢å¤çš„æ—¶å€™å°±ä¼šå‡ºé—®é¢˜ï¼šbin-log ä¸­å·²ç»æœ‰ R çš„è®°å½•äº†ï¼Œå½“ä»æœºä»ä¸»æœºåŒæ­¥æ•°æ®çš„æ—¶å€™æˆ–è€…æˆ‘ä»¬ä½¿ç”¨ bin-log æ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¼šåŒæ­¥åˆ° R è¿™æ¡è®°å½•ï¼›ä½†æ˜¯ redo-log ä¸­æ²¡æœ‰å…³äº R çš„è®°å½•ï¼Œæ‰€ä»¥å´©æºƒæ¢å¤ä¹‹åï¼Œæ’å…¥ R è®°å½•çš„è¿™ä¸ªäº‹åŠ¡æ˜¯æ— æ•ˆçš„ï¼Œå³æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥è¡Œè®°å½•ï¼Œè¿™å°±é€ æˆäº†æ•°æ®ä¸ä¸€è‡´ã€‚ ç›¸åï¼Œå‡è®¾æˆ‘ä»¬è¦å‘è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½• Rï¼Œå¦‚æœæ˜¯å…ˆå†™ redo-log å†å†™ bin-logï¼Œé‚£ä¹ˆå‡è®¾ redo-log å†™å®Œåå´©æºƒäº†ï¼Œæ­¤æ—¶ bin-log è¿˜æ²¡å†™ã€‚é‚£ä¹ˆé‡å¯æ¢å¤çš„æ—¶å€™ä¹Ÿä¼šå‡ºé—®é¢˜ï¼šredo-log ä¸­å·²ç»æœ‰ R çš„è®°å½•äº†ï¼Œæ‰€ä»¥å´©æºƒæ¢å¤ä¹‹åï¼Œæ’å…¥ R è®°å½•çš„è¿™ä¸ªäº‹åŠ¡æ˜¯æœ‰æ•ˆçš„ï¼Œé€šè¿‡è¯¥è®°å½•å°†æ•°æ®æ¢å¤åˆ°æ•°æ®åº“ä¸­ï¼›ä½†æ˜¯ bin-log ä¸­è¿˜æ²¡æœ‰å…³äº R çš„è®°å½•ï¼Œæ‰€ä»¥å½“ä»æœºä»ä¸»æœºåŒæ­¥æ•°æ®çš„æ—¶å€™æˆ–è€…æˆ‘ä»¬ä½¿ç”¨ bin-log æ¢å¤æ•°æ®çš„æ—¶å€™ï¼Œå°±ä¸ä¼šåŒæ­¥åˆ° R è¿™æ¡è®°å½•ï¼Œè¿™å°±é€ æˆäº†æ•°æ®ä¸ä¸€è‡´ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:8:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#ä¸ºä»€ä¹ˆéœ€è¦ä¸¤é˜¶æ®µæäº¤"},{"categories":["mysql"],"content":" å››ç§éš”ç¦»çº§åˆ« Read uncommitted/RUï¼šè¯»æœªæäº¤ï¼Œå¤„äºè¯¥éš”ç¦»çº§åˆ«çš„æ•°æ®åº“ï¼Œè„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜éƒ½æœ‰å¯èƒ½å‘ç”Ÿã€‚ Read committed/RCï¼šè¯»å·²æäº¤ï¼Œå¤„äºè¯¥éš”ç¦»çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»é—®é¢˜ï¼Œä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ä¾æ—§å­˜åœ¨ã€‚ Repeatable read/RRï¼šå¯é‡å¤è¯»ï¼Œå¤„äºè¯¥éš”ç¦»çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜ã€‚ Serializableï¼šåºåˆ—åŒ–/ä¸²è¡ŒåŒ–ï¼Œå¤„äºè¯¥éš”ç¦»çº§åˆ«çš„æ•°æ®åº“ï¼Œè§£å†³äº†è„è¯»ã€ä¸å¯é‡å¤è¯»ã€å¹»è¯»é—®é¢˜éƒ½ä¸å­˜åœ¨ã€‚ æ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼Œç”±ä½åˆ°é«˜ä¾æ¬¡ä¸º Read uncommitted ã€Read committedã€Repeatable read ã€Serializableã€‚ ä¸Šè¿°å››ä¸ªçº§åˆ«ï¼Œè¶Šé åå¹¶å‘æ§åˆ¶åº¦è¶Šé«˜ï¼Œä¹Ÿå°±æ˜¯åœ¨å¤šçº¿ç¨‹å¹¶å‘æ“ä½œçš„æƒ…å†µä¸‹ï¼Œå‡ºç°é—®é¢˜çš„å‡ ç‡è¶Šå°ï¼Œä½†å¯¹åº”çš„ä¹Ÿæ€§èƒ½è¶Šå·®ï¼ŒMySQL çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œ é»˜è®¤ä¸ºç¬¬ä¸‰çº§åˆ«ï¼šRepeatable readå¯é‡å¤è¯»ã€‚ é¦–å…ˆæ¥çœ‹ä¸‹read uncommittedè¯»æœªæäº¤ã€‚æ¯”å¦‚è¯´ï¼šA å‘ B è½¬è´¦ï¼ŒA æ‰§è¡Œäº†è½¬è´¦è¯­å¥ï¼Œä½† A è¿˜æ²¡æœ‰æäº¤äº‹åŠ¡ï¼ŒB è¯»å–æ•°æ®ï¼Œå‘ç°è‡ªå·±è´¦æˆ·é’±å˜å¤šäº†ï¼B è·Ÿ A è¯´ï¼Œæˆ‘å·²ç»æ”¶åˆ°é’±äº†ã€‚A å›æ»šäº‹åŠ¡ã€rollbackã€‘ï¼Œç­‰ B å†æŸ¥çœ‹è´¦æˆ·çš„é’±æ—¶ï¼Œå‘ç°é’±å¹¶æ²¡æœ‰å¤šã€‚ ç®€å•çš„å®šä¹‰å°±æ˜¯ï¼šäº‹åŠ¡ B è¯»å–åˆ°äº†äº‹åŠ¡ A è¿˜æ²¡æäº¤çš„æ•°æ®ï¼Œè¿™ç§ç”¨ä¸“ä¸šæœ¯è¯­æ¥è¯´å«åšã€Œè„è¯»ã€ã€‚ å¯¹äºé”çš„ç»´åº¦è€Œè¨€ï¼Œå…¶å®å°±æ˜¯åœ¨ read uncommitted éš”ç¦»çº§åˆ«ä¸‹ï¼Œè¯»ä¸ä¼šåŠ ä»»ä½•é”ï¼Œè€Œå†™ä¼šåŠ æ’ä»–é”ã€‚è¯»ä»€ä¹ˆé”éƒ½ä¸åŠ ï¼Œè¿™å°±è®©æ’ä»–é”æ— æ³•æ’å®ƒäº†ã€‚ è¯»æœªæäº¤ è€Œæˆ‘ä»¬çŸ¥é“ï¼Œå¯¹äºæ›´æ–°æ“ä½œè€Œè¨€ï¼ŒInnoDB æ˜¯è‚¯å®šä¼šåŠ å†™é”çš„ï¼ˆæ•°æ®åº“æ˜¯ä¸å¯èƒ½å…è®¸åœ¨åŒä¸€æ—¶é—´ï¼Œæ›´æ–°åŒä¸€æ¡è®°å½•çš„ï¼‰ã€‚è€Œè¯»æ“ä½œï¼Œå¦‚æœä¸åŠ ä»»ä½•é”ï¼Œé‚£å°±ä¼šé€ æˆä¸Šé¢çš„è„è¯»ã€‚ è„è¯»åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹è‚¯å®šæ˜¯æ— æ³•æ¥å—çš„ï¼Œé‚£å¦‚æœè¯»åŠ é”çš„è¯ï¼Œé‚£æ„å‘³ç€ï¼šå½“æ›´æ–°æ•°æ®çš„æ—¶ï¼Œå°±æ²¡åŠæ³•è¯»å–äº†ï¼Œè¿™ä¼šæå¤§åœ°é™ä½æ•°æ®åº“æ€§èƒ½ã€‚ åœ¨ MySQL InnoDB å¼•æ“å±‚é¢ï¼Œæœ‰æ–°çš„è§£å†³æ–¹æ¡ˆï¼Œè§£å†³åŠ é”åè¯»å†™æ€§èƒ½é—®é¢˜ï¼Œå«åšMVCCMulti-Version Concurrency Controlå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ã€‚ MVCC åœ¨ MVCC ä¸‹ï¼Œå°±å¯ä»¥åšåˆ°è¯»å†™ä¸é˜»å¡ï¼Œä¸”é¿å…äº†ç±»ä¼¼è„è¯»è¿™æ ·çš„é—®é¢˜ã€‚é‚£ MVCC æ˜¯æ€ä¹ˆåšçš„å‘¢â“ MVCC é€šè¿‡ç”Ÿæˆæ•°æ®å¿«ç…§Snapshotï¼Œå¹¶ç”¨è¿™ä¸ªå¿«ç…§æ¥æä¾›ä¸€å®šçº§åˆ«ï¼ˆè¯­å¥çº§æˆ–äº‹åŠ¡çº§ï¼‰çš„ä¸€è‡´æ€§è¯»å–ã€‚ å›åˆ°äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸‹ï¼Œé’ˆå¯¹äºread committedè¯»å·²æäº¤ éš”ç¦»çº§åˆ«ï¼Œå®ƒç”Ÿæˆçš„å°±æ˜¯è¯­å¥çº§å¿«ç…§ï¼Œè€Œé’ˆå¯¹äºrepeatable readå¯é‡å¤è¯»ï¼Œå®ƒç”Ÿæˆçš„å°±æ˜¯äº‹åŠ¡çº§çš„å¿«ç…§ã€‚ å‰é¢æåˆ°è¿‡ read uncommitted éš”ç¦»çº§åˆ«ä¸‹ä¼šäº§ç”Ÿè„è¯»ï¼Œè€Œread committedè¯»å·²æäº¤ éš”ç¦»çº§åˆ«è§£å†³äº†è„è¯»ã€‚æ€æƒ³å…¶å®å¾ˆç®€å•ï¼šåœ¨è¯»å–çš„æ—¶å€™ç”Ÿæˆä¸€ä¸ª â€œç‰ˆæœ¬å·â€ï¼Œç­‰åˆ°å…¶ä»–äº‹åŠ¡ commit äº†ä¹‹åï¼Œæ‰ä¼šè¯»å–æœ€æ–°å·² commit çš„ â€œç‰ˆæœ¬å·â€ æ•°æ®ã€‚ æ¯”å¦‚è¯´ï¼šäº‹åŠ¡ A è¯»å–äº†è®°å½•ï¼ˆç”Ÿæˆç‰ˆæœ¬å·ï¼‰ï¼Œäº‹åŠ¡ B ä¿®æ”¹äº†è®°å½•ï¼Œæ­¤æ—¶åŠ äº†å†™é”ï¼Œäº‹åŠ¡ A å†è¯»å–çš„æ—¶å€™ï¼Œæ˜¯ä¾æ®æœ€æ–°çš„ç‰ˆæœ¬å·æ¥è¯»å–çš„ï¼ˆå½“äº‹åŠ¡ B æ‰§è¡Œ commit äº†ä¹‹åï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„ç‰ˆæœ¬å·ï¼‰ï¼Œå¦‚æœäº‹åŠ¡ B è¿˜æ²¡æœ‰ commitï¼Œé‚£äº‹åŠ¡ A è¯»å–çš„è¿˜æ˜¯ä¹‹å‰ç‰ˆæœ¬å·çš„æ•°æ®ã€‚ é€šè¿‡ã€Œç‰ˆæœ¬ã€çš„æ¦‚å¿µï¼Œè¿™æ ·å°±è§£å†³äº†è„è¯»çš„é—®é¢˜ï¼Œè€Œã€Œç‰ˆæœ¬ã€å…¶å®å°±æ˜¯å¯¹åº”å¿«ç…§çš„æ•°æ®ã€‚ read committedè¯»å·²æäº¤ è§£å†³äº†è„è¯»ï¼Œä½†ä¹Ÿä¼šæœ‰å…¶ä»–å¹¶å‘çš„é—®é¢˜ã€‚ã€Œä¸å¯é‡å¤è¯»ã€ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°å¦å¤–ä¸€ä¸ªäº‹åŠ¡å·²ç»æäº¤çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªäº‹åŠ¡å¯ä»¥çœ‹åˆ°å…¶ä»–äº‹åŠ¡æ‰€åšçš„ä¿®æ”¹ã€‚ ä¸å¯é‡å¤è¯»çš„ä¾‹å­ï¼šA æŸ¥è¯¢æ•°æ®åº“å¾—åˆ°æ•°æ®ï¼ŒB å»ä¿®æ”¹æ•°æ®åº“çš„æ•°æ®ï¼Œå¯¼è‡´ A å¤šæ¬¡æŸ¥è¯¢æ•°æ®åº“çš„ç»“æœéƒ½ä¸ä¸€æ ·ã€å±å®³ï¼šA æ¯æ¬¡æŸ¥è¯¢çš„ç»“æœéƒ½æ˜¯å— B çš„å½±å“çš„ã€‘ äº†è§£ MVCC ä¹‹åï¼Œå°±å¾ˆå®¹æ˜“æƒ³åˆ°repeatable readå¯é‡å¤å¤è¯» éš”ç¦»çº§åˆ«æ˜¯æ€ä¹ˆé¿å…ä¸å¯é‡å¤è¯»çš„é—®é¢˜äº†ã€‚ repeatable readå¯é‡å¤å¤è¯»éš”ç¦»çº§åˆ«æ˜¯ã€Œäº‹åŠ¡çº§åˆ«ã€çš„å¿«ç…§ï¼æ¯æ¬¡è¯»å–çš„éƒ½æ˜¯ã€Œå½“å‰äº‹åŠ¡çš„ç‰ˆæœ¬ã€ï¼Œå³ä½¿å½“å‰æ•°æ®è¢«å…¶ä»–äº‹åŠ¡ä¿®æ”¹äº†ï¼ˆcommitï¼‰ï¼Œä¹Ÿåªä¼šè¯»å–å½“å‰äº‹åŠ¡ç‰ˆæœ¬çš„æ•°æ®ã€‚ è€Œrepeatable readå¯é‡å¤å¤è¯» éš”ç¦»çº§åˆ«ä¼šå­˜åœ¨å¹»è¯»çš„é—®é¢˜ï¼Œã€Œå¹»è¯»ã€æŒ‡çš„æ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…è¯»å–åˆ°äº†åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®ï¼Œå¯¼è‡´å‰åè¯»å–ä¸ä¸€è‡´ã€‚ åœ¨ InnoDB å¼•æ“ä¸‹çš„çš„repeatable readå¯é‡å¤å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œå¿«ç…§è¯» MVCC å½±å“ä¸‹ï¼Œå·²ç»è§£å†³äº†å¹»è¯»çš„é—®é¢˜ï¼ˆå› ä¸ºå®ƒæ˜¯è¯»å†å²ç‰ˆæœ¬çš„æ•°æ®ï¼‰ã€‚ è€Œå¦‚æœæ˜¯å½“å‰è¯»ï¼ˆæŒ‡çš„æ˜¯select * from table for updateï¼‰ï¼Œåˆ™éœ€è¦é…åˆé—´éš™é”æ¥è§£å†³å¹»è¯»çš„é—®é¢˜ã€‚ å‰©ä¸‹çš„å°±æ˜¯serializableä¸²è¡Œéš”ç¦»çº§åˆ«äº†ï¼Œå®ƒçš„æœ€é«˜çš„éš”ç¦»çº§åˆ«ï¼Œç›¸å½“äºä¸å…è®¸äº‹åŠ¡çš„å¹¶å‘ï¼Œäº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´æ‰§è¡Œæ˜¯ä¸²è¡Œçš„ï¼Œå®ƒçš„æ•ˆç‡æœ€ä½ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯æœ€å®‰å…¨çš„ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:9:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#å››ç§éš”ç¦»çº§åˆ«"},{"categories":["mysql"],"content":" äº‹åŠ¡éš”ç¦»æœºåˆ¶çš„åº•å±‚å®ç°æ¯ç§éš”ç¦»çº§åˆ«éƒ½æ˜¯åŸºäºé”å’Œ MVCC æœºåˆ¶å®ç°çš„ğŸ‘‡ è¯»æœªæäº¤/RUï¼šå†™æ“ä½œåŠ æ’ä»–é”ï¼Œè¯»æ“ä½œä¸åŠ é”ã€‚ è¯»å·²æäº¤/RCï¼šå†™æ“ä½œåŠ æ’ä»–é”ï¼Œè¯»æ“ä½œä½¿ç”¨ MVCCï¼Œä½†æ¯æ¬¡ select éƒ½ç”Ÿæˆè¯»è§†å›¾ã€‚ å¯é‡å¤è¯»/RRï¼šå†™æ“ä½œåŠ æ’ä»–é”ï¼Œè¯»æ“ä½œä¾æ—§é‡‡ç”¨ MVCC æœºåˆ¶ï¼Œä½†ä¸€æ¬¡äº‹åŠ¡ä¸­åªç”Ÿæˆä¸€ä¸ªè¯»è§†å›¾ã€‚ åºåˆ—åŒ–/Serializableï¼šæ‰€æœ‰å†™æ“ä½œåŠ ä¸´é”®é”ï¼ˆå…·å¤‡äº’æ–¥ç‰¹æ€§ï¼‰ï¼Œæ‰€æœ‰è¯»æ“ä½œåŠ å…±äº«é”ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:10:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#äº‹åŠ¡éš”ç¦»æœºåˆ¶çš„åº•å±‚å®ç°"},{"categories":["mysql"],"content":" MVCCåŸç†MVCC çš„ä¸»è¦æ˜¯é€šè¿‡ read view å’Œ undo log æ¥å®ç°çš„ã€‚ mvccåŸç† undo log ä¼šè®°å½•ä¿®æ”¹æ•°æ®ä¹‹å‰çš„ä¿¡æ¯ï¼Œäº‹åŠ¡ä¸­çš„åŸå­æ€§å°±æ˜¯é€šè¿‡ undo log æ¥å®ç°çš„ã€‚æ‰€ä»¥æœ‰ undo log å¯ä»¥å¸®æˆ‘ä»¬æ‰¾åˆ°ã€Œç‰ˆæœ¬ã€çš„æ•°æ®ã€‚ è€Œ read view å®é™…ä¸Šå°±æ˜¯åœ¨æŸ¥è¯¢æ—¶ï¼ŒInnoDB ä¼šç”Ÿæˆä¸€ä¸ª read viewï¼Œread view æœ‰å‡ ä¸ªé‡è¦çš„å­—æ®µï¼Œåˆ†åˆ«æ˜¯ï¼š trx_ids å°šæœªæäº¤ commit çš„äº‹åŠ¡ç‰ˆæœ¬å·é›†åˆ up_limit_id ä¸‹ä¸€æ¬¡è¦ç”Ÿæˆçš„äº‹åŠ¡ ID å€¼ low_limit_id å°šæœªæäº¤ç‰ˆæœ¬å·çš„äº‹åŠ¡ ID æœ€å°å€¼ creator_trx_id å½“å‰çš„äº‹åŠ¡ç‰ˆæœ¬å· åœ¨æ¯è¡Œæ•°æ®æœ‰ä¸¤åˆ—éšè—çš„å­—æ®µï¼Œåˆ†åˆ«æ˜¯DB_TRX_IDï¼ˆè®°å½•ç€å½“å‰ IDï¼‰ä»¥åŠDB_ROLL_PTR æŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬æ•°æ®åœ¨ undo log é‡Œçš„ä½ç½®æŒ‡é’ˆï¼Œåˆ°è¿™é‡Œï¼Œå¾ˆå®¹æ˜“å°±å‘ç°ï¼ŒMVCC å…¶å®å°±æ˜¯é ã€Œæ¯”å¯¹ç‰ˆæœ¬ã€æ¥å®ç°è¯»å†™ä¸é˜»å¡ï¼Œè€Œç‰ˆæœ¬çš„æ•°æ®å­˜åœ¨äº undo log ä¸­ã€‚ è€Œé’ˆå¯¹äºä¸åŒçš„éš”ç¦»çº§åˆ« read committed å’Œ repeatable readï¼Œæ— éå°±æ˜¯ read committed éš”ç¦»çº§åˆ«ä¸‹ï¼Œæ¯æ¬¡éƒ½è·å–ä¸€ä¸ªæ–°çš„ read viewï¼Œrepeatable read éš”ç¦»çº§åˆ«åˆ™æ¯æ¬¡äº‹åŠ¡åªè·å–ä¸€ä¸ª read viewã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:11:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#mvccåŸç†"},{"categories":["mysql"],"content":" å·¥ä½œä¸­å¦‚ä½•å»ºç´¢å¼•å¦‚æœè¡¨æœ‰ä¸€å®šçš„æ•°æ®é‡ï¼Œé‚£å°±åº”è¯¥è¦åˆ›å»ºå¯¹åº”çš„ç´¢å¼•ï¼Œåˆ›å»ºç´¢å¼•éœ€è¦æ³¨æ„çš„ç‚¹ï¼Œæ¯”å¦‚è¯´ğŸ‘‡ æ˜¯å¦èƒ½ä½¿ç”¨ã€Œè¦†ç›–ç´¢å¼•ã€ï¼Œå‡å°‘ã€Œå›è¡¨ã€æ‰€æ¶ˆè€—çš„æ—¶é—´ã€‚æ„å‘³ç€ï¼Œæˆ‘ä»¬åœ¨ select çš„æ—¶å€™ï¼Œä¸€å®šè¦æŒ‡æ˜å¯¹åº”çš„åˆ—ï¼Œè€Œä¸æ˜¯select * è€ƒè™‘æ˜¯å¦ç»„å»ºã€Œè”åˆç´¢å¼•ã€ï¼Œå¦‚æœç»„å»ºã€Œè”åˆç´¢å¼•ã€ï¼Œå°½é‡å°†åŒºåˆ†åº¦æœ€é«˜çš„æ”¾åœ¨æœ€å·¦è¾¹ï¼Œå¹¶ä¸”éœ€è¦è€ƒè™‘ã€Œæœ€å·¦åŒ¹é…åŸåˆ™ã€ å¯¹ç´¢å¼•è¿›è¡Œå‡½æ•°æ“ä½œæˆ–è€…è¡¨è¾¾å¼è®¡ç®—ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ åˆ©ç”¨å­æŸ¥è¯¢ä¼˜åŒ–è¶…å¤šåˆ†é¡µåœºæ™¯ã€‚æ¯”å¦‚limit offset, n åœ¨ MySQL æ˜¯è·å– offset + n çš„è®°å½•ï¼Œå†è¿”å› n æ¡ã€‚è€Œåˆ©ç”¨å­æŸ¥è¯¢åˆ™æ˜¯æŸ¥å‡º n æ¡ï¼Œé€šè¿‡ ID æ£€ç´¢å¯¹åº”çš„è®°å½•å‡ºæ¥ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ é€šè¿‡ explain å‘½ä»¤æ¥æŸ¥çœ‹ SQL çš„æ‰§è¡Œè®¡åˆ’ï¼Œçœ‹çœ‹è‡ªå·±å†™çš„ SQL æ˜¯å¦èµ°äº†ç´¢å¼•ï¼Œèµ°äº†ä»€ä¹ˆç´¢å¼•ã€‚é€šè¿‡ show profile æ¥æŸ¥çœ‹ SQL å¯¹ç³»ç»Ÿèµ„æºçš„æŸè€—æƒ…å†µï¼ˆä¸è¿‡ä¸€èˆ¬è¿˜æ˜¯æ¯”è¾ƒå°‘ç”¨åˆ°ï¼‰ åœ¨å¼€å¯äº‹åŠ¡åï¼Œåœ¨äº‹åŠ¡å†…å°½å¯èƒ½åªæ“ä½œæ•°æ®åº“ï¼Œå¹¶æœ‰æ„è¯†åœ°å‡å°‘é”çš„æŒæœ‰æ—¶é—´ã€‚æ¯”å¦‚åœ¨äº‹åŠ¡å†…éœ€è¦æ’å…¥å’Œä¿®æ”¹æ•°æ®ï¼Œé‚£å¯ä»¥å…ˆæ’å…¥åä¿®æ”¹ã€‚å› ä¸ºä¿®æ”¹æ˜¯æ›´æ–°æ“ä½œï¼Œä¼šåŠ è¡Œé”ã€‚å¦‚æœå…ˆæ›´æ–°ï¼Œé‚£å¹¶å‘ä¸‹å¯èƒ½ä¼šå¯¼è‡´å¤šä¸ªäº‹åŠ¡çš„è¯·æ±‚ç­‰å¾…è¡Œé”é‡Šæ”¾ã€‚ ç´¢å¼• ","date":"2022-05-21","objectID":"/mysql-faq-2/:12:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#å·¥ä½œä¸­å¦‚ä½•å»ºç´¢å¼•"},{"categories":["mysql"],"content":" çº¿ä¸Šç”¨çš„æ˜¯ä»€ä¹ˆéš”ç¦»çº§åˆ«æˆ‘ä»¬è¿™è¾¹ç”¨çš„æ˜¯Read committedè¯»å·²æäº¤ï¼ŒMySQL é»˜è®¤ç”¨çš„æ˜¯ Repeatable readå¯é‡å¤è¯»ã€‚ é€‰ç”¨ä»€ä¹ˆéš”ç¦»çº§åˆ«ï¼Œä¸»è¦çœ‹åº”ç”¨åœºæ™¯ï¼Œå› ä¸ºéš”ç¦»çº§åˆ«è¶Šä½ï¼Œäº‹åŠ¡å¹¶å‘æ€§èƒ½è¶Šé«˜ã€‚ä¸€èˆ¬äº’è”ç½‘å…¬å¸éƒ½é€‰æ‹© Read committed ä½œä¸ºä¸»è¦çš„éš”ç¦»çº§åˆ«ã€‚ åƒRepeatable readå¯é‡å¤è¯»éš”ç¦»çº§åˆ«ï¼Œå°±æœ‰å¯èƒ½å› ä¸ºã€Œé—´éš™é”ã€å¯¼è‡´çš„æ­»é”é—®é¢˜ã€‚ MySQL é»˜è®¤çš„éš”ç¦»çº§åˆ«ä¸º Repeatable readã€‚å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› æ˜¯åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼ŒMySQL çš„ binlog æ²¡æœ‰ row æ¨¡å¼ï¼ˆè®°å½•å…·ä½“å‡ºç°å˜æ›´çš„æ•°æ®ï¼Œä¹Ÿä¼šåŒ…å«æ•°æ®æ‰€åœ¨çš„åˆ†åŒºä»¥åŠæ‰€ä½äºçš„æ•°æ®é¡µï¼‰ï¼Œåœ¨ read committed éš”ç¦»çº§åˆ«ä¸‹ä¼šå­˜åœ¨ã€Œä¸»ä»æ•°æ®ä¸ä¸€è‡´ã€çš„é—®é¢˜ã€‚binlog è®°å½•äº†æ•°æ®åº“è¡¨ç»“æ„å’Œè¡¨æ•°æ®ã€Œå˜æ›´ã€ï¼Œæ¯”å¦‚update/delete/insert/truncate/createã€‚åœ¨ MySQL ä¸­ï¼Œä¸»ä»åŒæ­¥å®é™…ä¸Šå°±æ˜¯åº”ç”¨äº† binlog æ¥å®ç°çš„ã€‚æœ‰äº†è¯¥å†å²åŸå› ï¼Œæ‰€ä»¥ MySQL å°±å°†é»˜è®¤çš„éš”ç¦»çº§åˆ«è®¾ç½®ä¸º Repeatable readã€‚ éš”ç¦»çº§åˆ« ","date":"2022-05-21","objectID":"/mysql-faq-2/:13:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#çº¿ä¸Šç”¨çš„æ˜¯ä»€ä¹ˆéš”ç¦»çº§åˆ«"},{"categories":["mysql"],"content":" ä¸ºä»€ä¹ˆèµ°äº†ç´¢å¼•æŸ¥è¯¢è¿˜æ˜¯æ…¢å¦‚æœèµ°å¯¹äº†ç´¢å¼•ï¼Œä½†æŸ¥è¯¢è¿˜æ˜¯æ…¢ï¼Œé‚£ä¸€èˆ¬æ¥è¯´å°±æ˜¯è¡¨çš„æ•°æ®é‡å®åœ¨æ˜¯å¤ªå¤§äº†ã€‚ é¦–å…ˆï¼Œè€ƒè™‘èƒ½ä¸èƒ½æŠŠã€Œæ—§çš„æ•°æ®ã€ç»™ â€œåˆ æ‰â€ ğŸ˜¢ å¦‚æœã€Œæ—§çš„æ•°æ®ã€å·²ç»æ²¡æœ‰æŸ¥è¯¢çš„ä¸šåŠ¡äº†ï¼Œé‚£æœ€ç®€å•çš„åŠæ³•è‚¯å®šæ˜¯ â€œåˆ æ‰â€ éƒ¨åˆ†æ•°æ®å’¯ã€‚æ•°æ®é‡é™ä½äº†ï¼Œé‚£è‡ªç„¶ï¼Œæ£€ç´¢é€Ÿåº¦å°±å¿«äº†â€¦. å…¶å®ï¼Œåªæœ‰æå°‘éƒ¨åˆ†ä¸šåŠ¡å¯ä»¥åˆ æ‰æ•°æ®â€¦ é‚£ä¹ˆï¼Œå°±è€ƒè™‘å¦ä¸€ç§æƒ…å†µï¼Œèƒ½ä¸èƒ½åœ¨æŸ¥è¯¢ä¹‹å‰ï¼Œç›´æ¥èµ°ä¸€å±‚ç¼“å­˜ï¼ˆRedisï¼‰ã€‚ è€Œèµ°ç¼“å­˜çš„è¯ï¼Œåˆè¦çœ‹ä¸šåŠ¡èƒ½ä¸èƒ½å¿å—è¯»å–çš„ã€ŒéçœŸæ­£å®æ—¶ã€çš„æ•°æ®ï¼ˆæ¯•ç«Ÿ Redis å’Œ MySQL çš„æ•°æ®ä¸€è‡´æ€§éœ€è¦ä¿è¯ï¼‰ï¼Œå¦‚æœæŸ¥è¯¢æ¡ä»¶ç›¸å¯¹å¤æ‚ä¸”å¤šå˜çš„è¯ï¼ˆæ¶‰åŠå„ç§ group by å’Œ sum ï¼‰ï¼Œé‚£èµ°ç¼“å­˜ä¹Ÿä¸æ˜¯ä¸€ç§å¥½çš„åŠæ³•ï¼Œç»´æŠ¤èµ·æ¥å°±ä¸æ–¹ä¾¿äº†â€¦ å†çœ‹çœ‹æ˜¯ä¸æ˜¯æœ‰ã€Œå­—ç¬¦ä¸²ã€æ£€ç´¢çš„åœºæ™¯å¯¼è‡´æŸ¥è¯¢ä½æ•ˆï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå¯ä»¥è€ƒè™‘æŠŠè¡¨çš„æ•°æ®å¯¼å…¥è‡³ Elasticsearch ç±»çš„æœç´¢å¼•æ“ï¼Œåç»­çš„çº¿ä¸ŠæŸ¥è¯¢å°±ç›´æ¥èµ° Elasticsearch äº†ã€‚ MySQL-\u003eElasticsearch éœ€è¦æœ‰å¯¹åº”çš„åŒæ­¥ç¨‹åºï¼ˆä¸€èˆ¬å°±æ˜¯ç›‘å¬ MySQL çš„ binlogï¼Œè§£æ binlog åå¯¼å…¥åˆ° Elasticsearch)ã€‚ å¦‚æœè¿˜ä¸æ˜¯çš„è¯ï¼Œé‚£è€ƒè™‘è¦ä¸è¦æ ¹æ®æŸ¥è¯¢æ¡ä»¶çš„ç»´åº¦ï¼Œåšç›¸å¯¹åº”çš„èšåˆè¡¨ï¼Œçº¿ä¸Šçš„è¯·æ±‚å°±æŸ¥è¯¢èšåˆè¡¨çš„æ•°æ®ï¼Œä¸èµ°åŸè¡¨ã€‚ æ¯”å¦‚ï¼Œç”¨æˆ·ä¸‹å•åï¼Œæœ‰ä¸€ä»½è®¢å•æ˜ç»†ï¼Œè€Œè®¢å•æ˜ç»†è¡¨çš„é‡çº§å¤ªå¤§ã€‚ä½†åœ¨äº§å“ä¾§ï¼ˆå‰å°ï¼‰é€å‡ºçš„æŸ¥è¯¢åŠŸèƒ½æ˜¯ä»¥ã€Œå¤©ã€ç»´åº¦æ¥å±•ç¤ºçš„ï¼Œé‚£å°±å¯ä»¥å°†æ¯ä¸ªç”¨æˆ·çš„æ¯å¤©æ•°æ®èšåˆèµ·æ¥ï¼Œåœ¨èšåˆè¡¨å°±æ˜¯ä¸€ä¸ªç”¨æˆ·ä¸€å¤©åªæœ‰ä¸€æ¡æ±‡æ€»åçš„æ•°æ®ã€‚æŸ¥è¯¢èµ°èšåˆåçš„è¡¨ï¼Œé‚£é€Ÿåº¦è‚¯å®šå¾ˆå¿«çš„ï¼ˆèšåˆåçš„è¡¨æ•°æ®é‡è‚¯å®šæ¯”åŸå§‹è¡¨è¦å°‘å¾ˆå¤šï¼‰ã€‚ æ€è·¯å¤§è‡´çš„å°±æ˜¯ã€Œä»¥ç©ºé—´æ¢æ—¶é—´ã€ï¼Œç›¸åŒçš„æ•°æ®æ¢åˆ«çš„åœ°æ–¹ä¹Ÿå­˜å‚¨ä¸€ä»½ï¼Œæé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ ç©ºé—´æ¢æ—¶é—´ ","date":"2022-05-21","objectID":"/mysql-faq-2/:14:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#ä¸ºä»€ä¹ˆèµ°äº†ç´¢å¼•æŸ¥è¯¢è¿˜æ˜¯æ…¢"},{"categories":["mysql"],"content":" å†™æ€§èƒ½çš„ç“¶é¢ˆå¦‚ä½•å¤„ç†å¦‚æœåœ¨ MySQL è¯»å†™éƒ½æœ‰ç“¶é¢ˆï¼Œé‚£é¦–å…ˆçœ‹ä¸‹ç›®å‰ MySQL çš„æ¶æ„æ˜¯æ€ä¹ˆæ ·çš„ã€‚ å¦‚æœæ˜¯å•åº“çš„ï¼Œé‚£æ˜¯ä¸æ˜¯å¯ä»¥è€ƒè™‘å‡çº§è‡³ä¸»ä»æ¶æ„ï¼Œå®ç°è¯»å†™åˆ†ç¦»ã€‚ ç®€å•ç†è§£å°±æ˜¯ï¼šä¸»åº“æ¥æ”¶å†™è¯·æ±‚ï¼Œä»åº“æ¥æ”¶è¯»è¯·æ±‚ã€‚ä»åº“çš„æ•°æ®ç”±ä¸»åº“å‘é€çš„ binlog è¿›è€Œæ›´æ–°ï¼Œå®ç°ä¸»ä»æ•°æ®ä¸€è‡´ï¼ˆåœ¨ä¸€èˆ¬åœºæ™¯ä¸‹ï¼Œä¸»ä»çš„æ•°æ®æ˜¯é€šè¿‡å¼‚æ­¥æ¥ä¿è¯æœ€ç»ˆä¸€è‡´æ€§çš„ï¼‰ã€‚ å¦‚æœåœ¨ä¸»ä»æ¶æ„ä¸‹ï¼Œè¯»å†™ä»å­˜åœ¨ç“¶é¢ˆï¼Œé‚£å°±è¦è€ƒè™‘æ˜¯å¦è¦åˆ†åº“åˆ†è¡¨äº†ã€‚ æˆ‘è¿™é‡Œè®²çš„åˆ†åº“åˆ†è¡¨çš„å«ä¹‰æ˜¯ï¼šåœ¨åŸæ¥çš„æŸä¸ªåº“çš„æŸä¸ªè¡¨è¿›è€Œæ‹†åˆ†ã€‚ æ¯”å¦‚ï¼Œç°åœ¨æˆ‘æœ‰ä¸€å¼ ä¸šåŠ¡è®¢å•è¡¨ï¼Œè¿™å¼ è®¢å•è¡¨åœ¨å¹¿å‘Šåº“ä¸­ï¼Œå‡å®šè¿™å¼ ä¸šåŠ¡è®¢å•è¡¨å·²ç»æœ‰ 1 äº¿æ•°æ®é‡äº†ï¼Œç°åœ¨æˆ‘è¦åˆ†åº“åˆ†è¡¨ï¼Œé‚£å°±ä¼šå°†è¿™å¼ è¡¨çš„æ•°æ®åˆ†è‡³å¤šä¸ªå¹¿å‘Šåº“ä»¥åŠå¤šå¼ è¡¨ä¸­ã€‚ åˆ†åº“åˆ†è¡¨çš„æœ€æ˜æ˜¾çš„å¥½å¤„å°±æ˜¯æŠŠè¯·æ±‚è¿›è¡Œå‡æ‘Šï¼ˆæœ¬æ¥å•ä¸ªåº“å•ä¸ªè¡¨æœ‰ä¸€äº¿çš„æ•°æ®ï¼Œé‚£å‡è®¾æˆ‘åˆ†å¼€ 8 ä¸ªåº“ï¼Œé‚£æ¯ä¸ªåº“ 1200+W çš„æ•°æ®é‡ï¼Œæ¯ä¸ªåº“ä¸‹åˆ† 8 å¼ è¡¨ï¼Œé‚£æ¯å¼ è¡¨å°± 150W çš„æ•°æ®é‡ï¼‰ã€‚ åˆ†åº“åˆ†è¡¨ ","date":"2022-05-21","objectID":"/mysql-faq-2/:15:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#å†™æ€§èƒ½çš„ç“¶é¢ˆå¦‚ä½•å¤„ç†"},{"categories":["mysql"],"content":" å¸¸ä»¥ä»€ä¹ˆä½œä¸ºåˆ†åº“é”®ä¸€èˆ¬æ¥è¯´æ˜¯æŒ‰ç…§userIdï¼Œå› ä¸ºæŒ‰ç…§ç”¨æˆ·çš„ç»´åº¦æŸ¥è¯¢æ¯”è¾ƒå¤šï¼Œå¦‚æœè¦æŒ‰ç…§å…¶ä»–çš„ç»´åº¦è¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£è¿˜æ˜¯å‚ç…§ä¸Šé¢çš„çš„æ€è·¯ï¼ˆä»¥ç©ºé—´æ¢æ—¶é—´ï¼‰ã€‚ ","date":"2022-05-21","objectID":"/mysql-faq-2/:16:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#å¸¸ä»¥ä»€ä¹ˆä½œä¸ºåˆ†åº“é”®"},{"categories":["mysql"],"content":" åˆ†åº“åˆ†è¡¨åçš„IDæ˜¯æ€ä¹ˆç”Ÿæˆçš„è¿™å°±æ¶‰åŠåˆ°åˆ†å¸ƒå¼ ID ç”Ÿæˆçš„æ–¹å¼äº†ï¼Œæ€è·¯æœ‰å¾ˆå¤šã€‚æœ‰å€ŸåŠ© MySQL è‡ªå¢çš„ï¼Œæœ‰å€ŸåŠ© Redis è‡ªå¢çš„ï¼Œæœ‰åŸºäºã€Œé›ªèŠ±ç®—æ³•ã€è‡ªå¢çš„ã€‚å…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œé‚£å°±çœ‹å…¬å¸çš„æŠ€æœ¯æ ˆäº†ï¼Œä¸€èˆ¬ä½¿ç”¨ Redis å’ŒåŸºäºã€Œé›ªèŠ±ç®—æ³•ã€å®ç°ç”¨å¾—æ¯”è¾ƒå¤šã€‚ è‡³äºä¸ºä»€ä¹ˆå¼ºè°ƒè‡ªå¢ï¼Œè¿˜æ˜¯è·Ÿç´¢å¼•æ˜¯æœ‰åºæœ‰å…³ï¼Œå¯ä»¥çœ‹å‰é¢ åˆ†åº“åˆ†è¡¨çš„ä¸»é”® ","date":"2022-05-21","objectID":"/mysql-faq-2/:17:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#åˆ†åº“åˆ†è¡¨åçš„idæ˜¯æ€ä¹ˆç”Ÿæˆçš„"},{"categories":["mysql"],"content":" å‚è€ƒ MySQL ç´¢å¼• MySQL äº‹åŠ¡ã€é”å’ŒMVCC MySQL è°ƒä¼˜ redo log/binlog/ä¸¤é˜¶æ®µæäº¤ ","date":"2022-05-21","objectID":"/mysql-faq-2/:18:0","series":["reproduce"],"tags":["mysql","ç´¢å¼•","MVCC"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆäºŒï¼‰","uri":"/mysql-faq-2/#å‚è€ƒ"},{"categories":["mysql"],"content":"xiaobinqt,MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•,B+ æ ‘ç´¢å¼•æœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/"},{"categories":["mysql"],"content":" å‰è¨€ä¸ºä»€ä¹ˆ MySQL é‡‡ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•ï¼Ÿ å¦‚æœçº¯ç²¹çš„çŒœæµ‹ MySQL æ•°æ®åº“ç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ï¼Ÿé‚£ä¹ˆå›´ç»•è¿™ä¸ªé—®é¢˜çš„å›ç­”é€šå¸¸ä¸€å®šæ˜¯å›´ç»• B+ æ ‘æœ¬èº«æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿è¿™ä¸¤ç‚¹å»è§£é‡Šè¿™ä¸ªé—®é¢˜ã€‚ è¿™ä¸æ˜¯æˆ‘å¼€å§‹è¿™ä¹ˆå»æƒ³çš„ï¼Œçœ‹äº†å¾ˆå¤šæ–‡ç« éƒ½æ˜¯ä»è¿™ä¸€ç»´åº¦é—®ç­”ï¼Œè¿™äº›å›ç­”è®©æˆ‘å¤±æœ›ã€‚ç›´åˆ°é‚£å¤©é—®äº†ååœ¨æˆ‘æ—è¾¹é‚£ä¸ªæ•´å¤©æ‘¸é±¼çš„ 5 å¹´ç¨‹åºå‘˜ï¼›ä»–æ…µæ‡’çš„å›ç­”ï¼šä½ æƒ³ä¸ºä»€ä¹ˆæ˜¯ä½¿ç”¨çš„æ˜¯æ ‘ç»“æ„å‘¢ï¼Ÿå’¦ï¼Œå¬åˆ°è¿™å›ç­”ï¼Œä¸€ä¸‹æ‰“å¼€äº†æˆ‘çš„æ€ç»ªï¼Œæœ‰ç‚¹æ„æ€ï¼ å…ˆæŠ›å¼€ B+ æ ‘æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Œè¿™äº›å…ˆå…¥ä¸ºä¸»çš„ç­”æ¡ˆã€‚æˆ‘æƒ³è¦çš„æ˜¯ä¸ºä»€ä¹ˆâ“ ä¸ºä»€ä¹ˆ MySQL çš„ç´¢å¼•æœ‰é‚£ä¹ˆå¤šçš„æ•°æ®ç»“æ„å¯é€‰ï¼Œååé€‰æ ‘ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆé‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆåˆååé‡‡ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•? è¿™æ‰æ˜¯æˆ‘è¦æƒ³æ˜ç™½çš„ï¼æˆ‘æƒ³è¦çš„æ˜¯ä¸åªæ˜¯ç­”æ¡ˆï¼Œè¿˜è¦ç­”æ¡ˆèƒŒåçš„è„‰ç»œï¼æˆ‘æƒ³è¦çš„ä¸ä»…æ˜¯è¦çŸ¥å…¶ç„¶ï¼Œæ›´æƒ³è¦çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:1:0","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#å‰è¨€"},{"categories":["mysql"],"content":" é‚£ä¹ˆå¤šæ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„ï¼Ÿä¼—å¤šçš„æ•°æ®ç»“æ„åœ¨é€»è¾‘å±‚é¢å¯åˆ†ä¸ºï¼šçº¿æ€§ç»“æ„å’Œéçº¿æ€§ç»“æ„ã€‚ çº¿æ€§ç»“æ„æœ‰ï¼šæ•°ç»„ã€é“¾è¡¨ï¼ŒåŸºäºå®ƒä»¬è¡ç”Ÿå‡ºçš„æœ‰å“ˆå¸Œè¡¨ï¼ˆå“ˆå¸Œè¡¨ä¹Ÿç§°æ•£åˆ—è¡¨ï¼‰ã€æ ˆã€é˜Ÿåˆ—ç­‰ã€‚ éçº¿æ€§ç»“æ„æœ‰ï¼šæ ‘ã€å›¾ã€‚ è¿˜æœ‰å…¶ä»–æ•°æ®ç»“æ„å¦‚ï¼šè·³è¡¨ã€ä½å›¾ ä¹Ÿéƒ½ç”±åŸºç¡€æ•°æ®ç»“æ„æ¼”åŒ–è€Œæ¥ï¼Œä¸åŒçš„æ•°æ®ç»“æ„å­˜åœ¨å³éƒ½æ˜¯ä¸ºäº†è§£å†³æŸäº›åœºæ™¯é—®é¢˜ã€‚ å¦‚æœè¦çŸ¥é“ç´¢å¼•é€‚åˆä»€ä¹ˆæ•°æ®ç»“æ„ï¼Œé‚£æˆ‘ä»¬å¾—å…ˆæ¥å›ç­”ç´¢å¼•éœ€è¦æ¥è§£å†³ä»€ä¹ˆæ ·çš„é—®é¢˜ï¼ˆç—›ç‚¹ï¼‰ï¼Ÿå’Œå‘æŒ¥ç€ä»€ä¹ˆæ ·çš„ä½œç”¨ï¼Ÿå…¶æ¬¡å†æ‰æ˜¯é€‰æ‹©ä»€ä¹ˆæ ·çš„æ•°æ®ç»“æ„ã€‚åè€…åªæ˜¯æœï¼Œå‰è€…æ‰æ˜¯å› ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ MySQL å­˜å‚¨çš„æ•°æ®æ˜¯åœ¨ç£ç›˜é‡Œï¼Œå› ä¸ºå³ä½¿è®¾å¤‡æ–­ç”µï¼Œæ”¾åœ¨ç£ç›˜çš„æ•°æ®æ˜¯ä¸ä¼šæœ‰å½±å“çš„ï¼Œä¿éšœäº†æ•°æ®ä¸ä¸¢å¤±ï¼Œè¿™æ„å‘³ç€ MySQL åœ¨ç£ç›˜ä¸Šçš„æ•°æ®æ˜¯æŒä¹…åŒ–çš„ã€‚ ä½†æ•°æ®å­˜å‚¨åœ¨ç£ç›˜å¾—åˆ°ä¿éšœçš„åŒæ—¶ä¹Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼Œè¿™ä»£ä»·å°±æ˜¯ç£ç›˜çš„å¤„ç†é€Ÿåº¦æ˜¯æ¯«ç§’çº§åˆ«çš„ï¼Œç›¸æ¯”å†…å­˜çº³ç§’çº§åˆ«çš„é€Ÿåº¦ï¼Œç®€ç›´æ˜¯å°å·«è§å¤§å·«ã€‚ ä½ å¯èƒ½å¯¹æ—¶é—´å•ä½æ²¡ä»€ä¹ˆæ¦‚å¿µï¼Œå¯ä»¥çœ‹ 1 æ¯«ç§’èƒ½æ…¢ä¸Šçº³ç§’å‡ ä¸‡å€ã€‚ å›¾ç‰‡ ç´¢å¼•è™½ç„¶å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼Œä½†ä½¿ç”¨ç´¢å¼•æŸ¥æ‰¾æ•°æ®æ—¶ï¼Œå¯ä»¥ä»ç£ç›˜å…ˆè¯»å–ç´¢å¼•æ”¾åˆ°å†…å­˜ä¸­ï¼Œå†é€šè¿‡ç´¢å¼•ä»ç£ç›˜æ‰¾åˆ°æ•°æ®ï¼›å†ç„¶åå°†ç£ç›˜è¯»å–åˆ°çš„æ•°æ®ä¹Ÿæ”¾åˆ°å†…å­˜é‡Œã€‚ç´¢å¼•å°±è®©ç£ç›˜å’Œå†…å­˜å¼ºå¼ºè”æ‰‹ï¼Œè¶æœºæ­ä¸Šäº†å†…å­˜çš„è½¦ï¼Œæ„Ÿå—äº†ä¸€æŠŠçº³ç§’çº§åˆ«é€Ÿåº¦çš„æ¨èƒŒæ„Ÿã€‚ å›¾ç‰‡ ä½†æ˜¯ä¸ç®¡æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­æ€ä¹ˆä¼˜åŒ–ï¼Œåªè¦æ ¹è¿˜åœ¨ç£ç›˜ï¼Œå°±é¿å…ä¸äº†ä¼šå‘ç”Ÿå¤šæ¬¡ç£ç›˜ I/O ï¼Œè€Œç£ç›˜ I/O æ¬¡æ•°è¶Šå¤šï¼Œæ¶ˆè€—çš„æ—¶é—´ä¹Ÿè¶Šå¤šã€‚èªæ˜çš„ä½ è¿™ä¼šå„¿å¯ä»¥çœ‹å‡ºè¿™å…¶å®å°±æ˜¯ä¸ªéœ€è¦è€ƒè™‘è§£å†³çš„ç—›ç‚¹äº†ã€‚ è¦å°½å°‘åœ¨ç£ç›˜åš I/O æ“ä½œ ä½†è¿˜æœ‰é‚£ä¹ˆå¤šçš„æ•°æ®ç»“æ„å¯é€‰å‘¢ã€‚å…¶å®ç´¢å¼•éœ€è¦å‘æŒ¥çš„ç›®çš„å·²ç»å†³å®šäº†æœ‰å“ªäº›æ•°æ®ç»“æ„å¯é€‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç¼©å°é€‰æ‹©å…¶ä»–æ•°æ®ç»“æ„çš„èŒƒå›´ã€‚ä»ä¸ºä»€ä¹ˆè¦å»ºç´¢å¼•æœ¬èº«çš„é¦–è¦ç›®çš„å‡ºå‘ã€‚ è¦èƒ½å°½å¿«çš„æŒ‰ç…§åŒºé—´é«˜æ•ˆåœ°èŒƒå›´æŸ¥æ‰¾ å½“ç„¶ç´¢å¼•é¦–è¦ç›®çš„èƒ½æ”¯æŒé«˜æ•ˆèŒƒå›´æŸ¥è¯¢ï¼Œè¿˜è¦æœ‰æ’å…¥æ›´æ–°ç­‰æ“ä½œçš„åŠ¨æ€æ•°æ®ç»“æ„ã€‚ æ‰€ä»¥æœ‰æ»¡è¶³ä»¥è¿™ä¸¤æ¡ä¸»è¦æ¡ä»¶çš„é™¤äº†æ ‘ç»“æ„ä½ è¿˜ä¼šæƒ³åˆ°å…¶ä»–ä»€ä¹ˆæ•°æ®ç»“æ„ï¼Ÿè¿˜æœ‰å°±æ˜¯å“ˆå¸Œè¡¨ã€è·³è¡¨ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:2:0","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#é‚£ä¹ˆå¤šæ•°æ®ç»“æ„ä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„"},{"categories":["mysql"],"content":" å“ˆå¸Œè¡¨å“ˆå¸Œè¡¨çš„ç‰©ç†å­˜å‚¨æ˜¯ä¸€ä¸ªæ•°ç»„âš ï¸ï¼Œè€Œæ•°ç»„åœ¨å†…å­˜ä¸­æ˜¯è¿ç»­åœ°å€çš„ç©ºé—´ã€‚ æ•°æ®ä»¥ Keyã€Value çš„æ–¹å¼å­˜å‚¨ã€‚å“ˆå¸Œè¡¨æ‹¥æœ‰ç²¾ç¡®çš„æŸ¥è¯¢ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚åº¦æ˜¯ O(1)ã€‚ è€Œå“ˆå¸Œè¡¨ä¹‹æ‰€ä»¥èƒ½è¿™ä¹ˆå¿«æ˜¯é€šè¿‡ Key è®¡ç®—æ•°ç»„ä¸‹æ ‡æ¥å¿«é€Ÿæ‰¾åˆ° Valueã€‚ æœ€ç®€å•çš„è®¡ç®—çš„æ–¹å¼æ˜¯ ä½™æ•°æ³•ï¼Œé€šè¿‡å…ˆè®¡ç®—keyçš„ HashCodeï¼Œå†é€šè¿‡å“ˆå¸Œè¡¨çš„æ•°ç»„é•¿åº¦å¯¹ HashCode æ±‚ä½™ï¼Œæ±‚ä½™å¾—å‡ºçš„ä½™æ•°å°±æ˜¯æ•°ç»„ä¸‹æ ‡ï¼Œæœ€åç”±ä¸‹æ ‡è®¿é—®åˆ°å“ˆå¸Œè¡¨ä¸­å­˜çš„Keyã€Valueã€‚ å›¾ç‰‡ ä½†æ˜¯ Key è®¡ç®—å‡ºçš„ä¸‹æ ‡å¯èƒ½ä¼šæœ‰ç›¸åŒçš„æƒ…å†µï¼Œä¾‹å¦‚ HashCode 1010 å¯¹ 6 å–ä½™æ˜¯ 2ï¼Œä½†æ˜¯ HashCode 1112 å¯¹ 6 å–ä½™ä¹Ÿæ˜¯ 2ã€‚ å“ˆå¸Œç®—æ³•éšæœºè®¡ç®—å‡º HashCode å–ä½™æ•°ç»„é•¿åº¦å¯èƒ½å‡ºç°æ•°ç»„ä¸‹æ ‡ç›¸åŒçš„æƒ…å†µï¼Œå°±æ˜¯æ‰€è°“çš„ å“ˆå¸Œå†²çªã€‚ è€Œ å“ˆå¸Œå†²çª å¸¸ç”¨ é“¾è¡¨ çš„æ–¹æ³•è§£å†³ã€‚å½“å‘ç”Ÿ å“ˆå¸Œå†²çªï¼Œç›¸åŒä¸‹æ ‡çš„æ•°æ®å…ƒç´ ä¼šæ›¿æ¢æˆå­˜å‚¨æŒ‡é’ˆï¼Œè€Œä¸åŒ Key çš„æ•°æ®å…ƒç´ æ·»åŠ åˆ°é“¾è¡¨ä¸­ã€‚æŸ¥æ‰¾æ—¶é€šè¿‡æŒ‡é’ˆéå†è¿™ä¸ªé“¾è¡¨ï¼Œå†åŒ¹é…å‡ºæ­£ç¡®çš„ Key å°±å¯ä»¥ã€‚ å›¾ç‰‡ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒKey æ˜¯ â€œä¸€é¢—å‰½æ‚çš„ç§å­â€ çš„å­—ç¬¦ä¸² ï¼ŒValue æ˜¯ â€œä¸è¦å¿˜äº†å…³æ³¨ã€ç‚¹èµã€è¯„è®ºâ€ã€‚æˆ‘ä»¬é€šè¿‡è®¡ç®—keyä¸º HashCodeï¼ˆ1010ï¼‰ çš„æ•´æ•°å‹å€¼intã€‚ç„¶åç”¨ HashCodeï¼ˆ1010ï¼‰ å¯¹é•¿åº¦ä¸º 6 çš„å“ˆå¸Œè¡¨æ•°ç»„é•¿åº¦åšå–ä½™å¾—å‡º 2ï¼Œè¿™ 2 çš„å€¼å…ƒç´ å°±æ˜¯ ( Key = â€œä¸€é¢—å‰½æ‚çš„ç§å­â€,Value = â€œä¸è¦å¿˜äº†å…³æ³¨ã€ç‚¹èµã€è¯„è®ºâ€) ã€‚ è™½ç„¶å“ˆå¸Œè¡¨è™½ç„¶å¯ä»¥é«˜æ•ˆçš„ç­‰å€¼æŸ¥è¯¢ã€‚ä¾‹å¦‚SQLï¼š select * from weixin where username = \"ä¸€é¢—å‰½æ‚çš„ç§å­\" ä½†æ˜¯ä¸æ”¯æŒåŒºé—´æŸ¥è¯¢ã€‚ä¾‹å¦‚SQLï¼š select * from weixin where age \u003c 18 é‚£ä¹ˆå¦‚æœå“ˆå¸Œè¡¨ç”¨æ¥åšæˆç´¢å¼•ï¼Œå½“è¿›è¡ŒèŒƒå›´æŸ¥è¯¢æ—¶æ„å‘³ç€è¦å…¨éƒ¨æ‰«æã€‚ç±»ä¼¼ Redis å­˜å‚¨å½¢å¼æ˜¯ KV çš„ NoSQL æ•°æ®åº“ï¼Œä¼šé€‚åˆç­‰å€¼æŸ¥è¯¢çš„åœºæ™¯ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:2:1","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#å“ˆå¸Œè¡¨"},{"categories":["mysql"],"content":" è·³è¡¨è·³è¡¨ä¼¼ä¹å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯ä¸€ä¸ªæ¯”è¾ƒé™Œç”Ÿçš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯åœ¨ Redis ä¸­å´æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ•°æ®ç»“æ„ä¹‹ä¸€ã€‚è·³è¡¨åº•å±‚å®è´¨å°±æ˜¯å¯ä»¥è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾çš„æœ‰åºé“¾è¡¨ï¼Œä»–åœ¨é“¾è¡¨åŸºç¡€åŠ ä¸Šç´¢å¼•å±‚ï¼Œå³èƒ½æ”¯æŒæ’å…¥ã€åˆ é™¤ç­‰åŠ¨æ€æ“ä½œï¼Œä¹Ÿæ”¯æŒæŒ‰åŒºé—´é«˜æ•ˆæŸ¥è¯¢ã€‚è€Œä¸”ä¸ç®¡æ˜¯æŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦éƒ½æ˜¯ O(logn)ã€‚ è¦ç†è§£è·³è¡¨ï¼Œå…ˆæ¥çœ‹é“¾è¡¨ï¼Œå‡è®¾é“¾è¡¨å­˜å‚¨æ˜¯æœ‰åºçš„æ•°æ®ï¼Œæˆ‘ä»¬è¦æƒ³æŸ¥è¯¢æŸä¸€ä¸ªæ•°æ®ï¼Œåœ¨æœ€å·®çš„æƒ…å†µä¸‹è¦ä»å¤´å…¨éå†æ•´ä¸ªé“¾è¡¨ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O(n)ã€‚ å›¾ç‰‡ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œè·³è¡¨æ˜¯åœ¨é“¾è¡¨åŸºç¡€ä¸ŠåŠ äº†ç´¢å¼•å±‚ã€‚å¯ä»¥èµ·åˆ°æ”¯æŒåŒºé—´æŸ¥è¯¢çš„ä½œç”¨ã€‚ å›¾ç‰‡ ä»ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¦‚æœè¦æŸ¥è¯¢ä¸€ä¸ª 26 çš„èŠ‚ç‚¹ï¼Œè·³è¡¨å°±å¯ä»¥å…ˆä»ç´¢å¼•å±‚éå†ï¼Œå½“éå†åˆ°åœ¨ç´¢å¼•å±‚çš„ 21 èŠ‚ç‚¹ï¼Œä¼šå‘ç°ä¸‹ä¸€ä¸ªç´¢å¼•å±‚çš„èŠ‚ç‚¹æ˜¯ 36 èŠ‚ç‚¹æ—¶ï¼Œå¾ˆæ˜æ˜¾è¦æ‰¾çš„ 26 çš„èŠ‚ç‚¹å°±åœ¨è¿™åŒºé—´ã€‚æ­¤æ—¶æˆ‘ä»¬åªè¦å†é€šè¿‡ç´¢å¼•å±‚æŒ‡å‘åŸå§‹é“¾è¡¨çš„æŒ‡é’ˆå¾€ä¸‹ç§»åˆ°åŸå§‹é“¾è¿™ä¸€å±‚éå†ï¼Œåªè¦éå† 2 ä¸ªèŠ‚ç‚¹å³å¯æ‰¾åˆ° 26 äº†ã€‚å¦‚æœç”¨åŸæ¥çš„é“¾è¡¨éœ€è¦éå† 10 ä¸ªèŠ‚ç‚¹ï¼Œç°åœ¨åªè¦éå† 8 ä¸ªèŠ‚ç‚¹ã€‚å¦‚æœç”¨åŸæ¥çš„é“¾è¡¨éœ€è¦éå† 8 ä¸ªèŠ‚ç‚¹ï¼Œç°åœ¨ä¹Ÿåªè¦éå† 8 ä¸ªèŠ‚ç‚¹ï¼ˆ5-\u003e10-\u003e16-\u003e21-\u003e36-\u003e21-\u003e21-\u003e26 ï¼‰ï¼Œä½†æ˜¯å¯¹äºå¤§é‡æ•°æ®æ¥è¯´ï¼Œæ˜¯å¯ä»¥èŠ‚çœæŸ¥è¯¢æ—¶é—´çš„ã€‚ï¼ˆåŸæ–‡åº”è¯¥æ˜¯æœ‰è¯¯ï¼Œè¿™æ˜¯æŒ‰ç…§æˆ‘çš„ç†è§£å†™çš„ï¼Œå…·ä½“å¯ä»¥å‚çœ‹åŸæ–‡ï¼‰ã€‚ å¦‚ä¸‹å›¾ä¸­ï¼Œä¸€å›¾èƒœåƒè¨€ã€‚å½“æ•°æ®é‡å¤§æ—¶ï¼Œä¸€ä¸ªåŒ…å«å¤šä¸ªç»“ç‚¹çš„é“¾è¡¨ï¼Œåœ¨å»ºç«‹äº†äº”çº§ç´¢å¼•åå¯ä»¥çªæ˜¾çš„çœ‹åˆ°ç´¢å¼•å±‚çš„ä¼˜åŠ¿ã€‚åŒæ—¶æ³¨æ„é“è¿™æ ·ä¸€ä¸ªè§„å¾‹ â€œåŠ ä¸€å±‚ç´¢å¼•ï¼ŒæŸ¥è¯¢æ‰€éœ€è¦éå†çš„èŠ‚ç‚¹ä¸ªæ•°å‡å°‘ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¹Ÿå°±æé«˜äº†ã€‚â€ ä»ç”¨æˆ·çš„è§’åº¦å°±æ˜¯ï¼Œè·³è¡¨è¿™å®¶ä¼™å…¶å®å°±æ˜¯åœ¨å‘Šè¯‰é“¾è¡¨ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹æ‰¾æ¯”è¾ƒå¿«ã€‚ å›¾ç‰‡ çœ‹åˆ°è¿™ï¼Œè·³è¡¨ä¼¼ä¹ä¹Ÿå¾ˆé€‚åˆç”¨æ¥ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„ã€‚ä½†æ˜¯ä¸è¦å¿˜äº†è¿˜æœ‰é¦–ä¸ªæ¡ä»¶æ²¡æ»¡è¶³ï¼Œå°±æ˜¯ â€œè¦å°½å°‘åœ¨ç£ç›˜åš I/O æ“ä½œã€‚â€ è€Œè·³è¡¨æ˜¾ç„¶æ²¡èƒ½æ»¡è¶³è¿™ä¸€æ¡ä»¶ï¼Œè·³è¡¨åœ¨éšæ•°æ®é‡å¢å¤šçš„æƒ…å†µï¼Œç´¢å¼•å±‚ä¹Ÿä¼šéšç€å¢é«˜ï¼Œç›¸åº”çš„å°±ä¼šå¢åŠ è¯»å–I/Oçš„æ¬¡æ•°ï¼Œä»è€Œå½±å“æ€§èƒ½ã€‚ é‚£ä¹ˆå›åˆ° â€œé‚£ä¹ˆå¤šæ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„çš„é—®é¢˜ï¼Ÿâ€ï¼Œæˆ‘ä»¬å‘ç°å“ˆå¸Œè¡¨å’Œè·³è¡¨å¹¶ä¸èƒ½å¾ˆå¥½çš„æ»¡è¶³è§£å†³ç£ç›˜ç—›ç‚¹å’Œç´¢å¼•ç›®çš„çš„è¿™ä¸¤ä¸ªä¸»è¦æ¡ä»¶ã€‚é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸ºä»€ä¹ˆè¦æ¥é€‰æ ‘ç»“æ„ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:2:2","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#è·³è¡¨"},{"categories":["mysql"],"content":" æ ‘ç»“æ„æˆ‘ä»¬å…ˆæ¥çœ‹ç°å®ä¸­ä¸€é¢—æ ‘éƒ½æœ‰å“ªäº›éƒ¨åˆ†ç»„æˆï¼Œé¦–å…ˆè¦æœ‰æ ¹ã€æ ‘æã€è¿˜æœ‰æ ‘å¶ã€‚é‚£æŠ½è±¡æˆæ ‘ç»“æ„ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ ‘ç»“æ„çš„é¡¶ç«¯æ˜¯ æ ¹èŠ‚ç‚¹ï¼ˆrootï¼‰ï¼Œå·¦ä¾§çš„èŠ‚ç‚¹ç§°ä¸º å·¦å­æ ‘ï¼Œå³å­æ ‘å¯¹åº”çš„åœ¨å³ä¾§çš„èŠ‚ç‚¹ï¼Œæ ‘çš„æœ«ç«¯æ²¡æœ‰èŠ‚ç‚¹çš„ç§°ä¸º å¶å­èŠ‚ç‚¹ã€‚ å›¾ç‰‡ ä»æ ‘çš„å±‚çº§å…³ç³»å¯ä»¥åˆ†ä¸ºä¸Šä¸‹çº§å’ŒåŒçº§èŠ‚ç‚¹ï¼Œå¦‚ä¸‹å›¾ï¼ŒDã€Eæ˜¯BèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆB èŠ‚ç‚¹å°±æ˜¯å®ƒä»¬çš„çˆ¶èŠ‚ç‚¹ï¼Œè·ŸBèŠ‚ç‚¹åœ¨åŒä¸€å±‚çº§çš„CèŠ‚ç‚¹æ˜¯BèŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ã€‚ åŒæ—¶æ ‘çš„æœ€å¤§å±‚çº§æ•°ï¼Œç§°ä¸ºæ ‘çš„é«˜åº¦ï¼ˆæ·±åº¦ï¼‰ï¼Œå›¾ä¸‹çš„æ ‘é«˜åº¦æ˜¯3ã€‚ å›¾ç‰‡ ä»æ ‘ç»“æ„çš„å±‚çº§è§’åº¦çœ‹ï¼Œå…¶å®æ ‘ç»“æ„æ˜¯ä¸æ˜¯è·Ÿå‰é¢çš„è·³è¡¨è¿˜æœ‰ç‚¹ç›¸ä¼¼ã€‚è€Œè·³è¡¨ä¹‹æ‰€ä»¥è¿™ä¹ˆå¿«æ˜¯å› ä¸ºæœ‰èƒ½æŒ‰åŒºé—´é«˜æ•ˆæŸ¥è¯¢çš„ç´¢å¼•å±‚ã€‚ è€Œæ ‘ç»“æ„å…¶ç‰¹æ€§å†³å®šäº†éå†æ•°æ®æ–¹å¼æœ¬èº«å°±çº¯å¤©ç„¶çš„æ”¯æŒæŒ‰åŒºé—´æŸ¥è¯¢ã€‚å†åŠ ä¸Šæ ‘æ˜¯éçº¿æ€§ç»“æ„çš„ä¼˜åŠ¿ç›¸æ¯”äºçº¿æ€§ç»“æ„çš„æ•°ç»„ï¼Œä¸å¿…åƒæ•°ç»„çš„æ•°æ®æ˜¯è¿ç»­å­˜æ”¾çš„ã€‚é‚£ä¹ˆå½“æ ‘ç»“æ„åœ¨æ’å…¥æ–°æ•°æ®æ—¶å°±ä¸ç”¨åƒæ•°ç»„æ’å…¥æ•°æ®å‰æ—¶ï¼Œéœ€è¦å°†æ•°æ®æ‰€åœ¨å¾€åçš„æ‰€æœ‰æ•°æ®èŠ‚ç‚¹éƒ½å¾—å¾€åæŒªåŠ¨çš„å¼€é”€ã€‚æ‰€ä»¥æ ‘ç»“æ„æ›´é€‚åˆæ’å…¥æ›´æ–°ç­‰åŠ¨æ€æ“ä½œçš„æ•°æ®ç»“æ„ã€‚ æ ‘ç»“æ„åœ¨æ»¡è¶³äº†ç´¢å¼•ç›®çš„å’Œå…¶ä»–æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œè‡³äºå‡å°‘ç£ç›˜æŸ¥è¯¢æ“ä½œçš„ç—›ç‚¹å…¶å®æˆ‘ä»¬å°±å¯ä»¥åœ¨åŸºäºæ ‘ç»“æ„çš„æ•°æ®ç»“æ„ä¸­å»é€‰æ‹©ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:2:3","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#æ ‘ç»“æ„"},{"categories":["mysql"],"content":" é‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ï¼Ÿä¸ºä»€ä¹ˆååé‡‡ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•?é‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ä¸­ï¼Œé™¤äº†B+æ ‘ï¼Œä½ è¿˜ä¼šæƒ³åˆ°å“ªäº›æ ‘ç»“æ„ï¼ŸäºŒå‰æ ‘æŸ¥æ‰¾æ ‘ã€è‡ªå¹³è¡¡äºŒå‰æ ‘ã€Bæ ‘ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:3:0","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#é‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ä¸ºä»€ä¹ˆååé‡‡ç”¨-b-æ ‘ä½œä¸ºç´¢å¼•"},{"categories":["mysql"],"content":" äºŒå‰æ ‘åœ¨äº†è§£äºŒå‰æŸ¥æ‰¾æ ‘æˆ–è€…è‡ªå¹³è¡¡äºŒå‰æ ‘å‰éœ€è¦å…ˆç®€å•çŸ¥é“ä»€ä¹ˆæ˜¯äºŒå‰æ ‘ï¼Œä»€ä¹ˆæ˜¯äºŒåˆ†æŸ¥æ‰¾æ ‘ã€‚å› ä¸ºä½ çœ‹äºŒå‰æŸ¥æ‰¾æ ‘ä¸å°±æ˜¯è¿™ä¸¤æ£µæ ‘çš„åˆå¹¶å—ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹äºŒå‰æ ‘ï¼ŒäºŒå‰æ ‘çš„æ ‘ç»“æ„ä¸­å®šä¹‰çš„æ˜¯æ¯ä¸ªèŠ‚ç‚¹çš„å¯ä»¥æ˜¯0ä¸ªå­èŠ‚æˆ–1ä¸ªå­èŠ‚ç‚¹ï¼Œä½†æ˜¯æœ€å¤šä¸è¶…2ä¸ªå­èŠ‚ç‚¹ã€‚ è€ŒäºŒå‰æ ‘è¿˜æœ‰ä¸¤ä¸ªå½¢å¼ï¼šæ»¡äºŒå‰æ ‘ã€å®Œå…¨äºŒå‰æ ‘ æ»¡äºŒå‰æ ‘ æ»¡äºŒå‰æ ‘çš„å®šä¹‰æ˜¯ä¸€æ£µäºŒå‰æ ‘çš„æ‰€æœ‰éå¶å­èŠ‚ç‚¹éƒ½å­˜åœ¨å·¦å³å­èŠ‚ç‚¹ï¼Œå¹¶ä¸”æ‰€æœ‰å­èŠ‚ç‚¹åœ¨åŒä¸€å±‚çº§ã€‚ å›¾ç‰‡ å®Œå…¨äºŒå‰æ ‘ å®Œå…¨äºŒå‰æ ‘æ˜¯æŒ‡ä»å·¦è‡³å³å¡«å……èŠ‚ç‚¹ï¼Œç›´åˆ°æœ€åä¸€å±‚ï¼Œä¸”æœ€åä¸€å±‚çš„èŠ‚ç‚¹éƒ½é å·¦å¯¹é½ã€‚å› æ­¤ï¼Œæ»¡äºŒå‰æ ‘çš„æ‰€æœ‰å±‚éƒ½å¯èƒ½è¢«å¡«å……æ»¡ï¼Œè€Œå®Œå…¨äºŒå‰æ ‘è™½ç„¶æœ€åä¸€å±‚ä¸ä¸€å®šæ»¡ï¼Œä½†æ˜¯å°½å¯èƒ½å¡«å……åˆ°æœ€å·¦ä¾§ã€‚å¦‚ä¸‹å›¾ã€‚ å›¾ç‰‡ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:3:1","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#äºŒå‰æ ‘"},{"categories":["mysql"],"content":" äºŒå‰æŸ¥æ‰¾æ ‘æ­¤äºŒå‰æŸ¥æ‰¾æ ‘çš„ â€œäºŒâ€ éå½¼äºŒï¼Œå› ä¸ºæ­¤ â€œäºŒâ€ æ—¢å¯ä»¥è¯´æ˜¯è¡¨ç¤ºäºŒå‰çš„æ ‘ï¼Œä¹Ÿå¯ä»¥è¡¨ç¤ºäºŒåˆ†æŸ¥æ‰¾ï¼Œå› ä¸ºäºŒå‰æŸ¥æ‰¾æ ‘æ—¢æ˜¯äºŒå‰ä¹Ÿèåˆäº†äºŒåˆ†æŸ¥æ‰¾ã€‚ å…ˆç®€å•çš„çœ‹çœ‹äºŒåˆ†æŸ¥æ‰¾ï¼ŒäºŒåˆ†æŸ¥æ‰¾å¯ä»¥é¿å…æœ‰åºçš„æ•°ç»„ä»å¤´ä¾æ¬¡çš„éå†æŸ¥è¯¢ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“è¿™ç§æƒ…å†µå¦‚æœè¦æŸ¥æ‰¾ä¸€ä¸ªæ•°æœ€å·®çš„æƒ…å†µæ—¶é—´å¤æ‚å°±æ˜¯O(n) ï¼Œæ•´ä½“æŸ¥è¯¢æ•ˆç‡ä¸é«˜ã€‚è€Œå¦‚æœæ•°ç»„æ˜¯æœ‰åºçš„ï¼Œå°±å¯ä»¥é€šè¿‡äºŒåˆ†æŸ¥æ‰¾å°†æ¯æ¬¡çš„æŸ¥è¯¢èŒƒå›´å‡åŠï¼Œæ—¶é—´å¤æ‚åº¦è‡ªç„¶å°±æ˜¯O(logn)ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾ç‰‡ æ‰€ä»¥è¯´ï¼ŒäºŒå‰æŸ¥æ‰¾æ ‘ä¸åŒäºæ™®é€šäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œæ˜¯å°†å°äºæ ¹èŠ‚ç‚¹çš„å…ƒç´ æ”¾åœ¨å·¦å­æ ‘ï¼Œè€Œå³å­æ ‘æ­£å¥½ç›¸åæ˜¯æ”¾å¤§äºæ ¹èŠ‚ç‚¹çš„å…ƒç´ ã€‚è¯´ç™½äº†å°±æ˜¯æ ¹èŠ‚ç‚¹æ˜¯å·¦å­æ ‘å’Œå³å­æ ‘çš„ä¸­ä½æ•°ï¼Œå·¦è¾¹æ”¾å°äºä¸­ä½æ•°çš„ï¼Œå³è¾¹æ”¾å¤§äºä¸­ä½æ•°ï¼Œè¿™ä¸å°±æ˜¯äºŒåˆ†æŸ¥æ‰¾ç®—æ³•çš„å¥¥ä¹‰ã€‚ å›¾ç‰‡ å¦‚ä¸ŠåŠ¨å›¾æ‰€ç¤ºï¼ŒäºŒåˆ†æŸ¥æ‰¾æ ‘åœ¨æŸ¥æ‰¾æ•°æ®æ—¶ï¼Œåªéœ€è¦å°†éœ€è¦æŸ¥æ‰¾çš„å…ƒç´ ä¸æ ‘èŠ‚ç‚¹å…ƒç´ è¿›è¡Œæ¯”è¾ƒï¼Œå½“å…ƒç´ å¤§äºæ ¹èŠ‚ç‚¹åˆ™å¾€å³å­æ ‘ä¸­æŸ¥æ‰¾ï¼Œå…ƒç´ å°äºæ ¹èŠ‚ç‚¹åˆ™å¾€å·¦å­æ ‘ä¸­æŸ¥æ‰¾ï¼Œå…ƒç´ å¦‚æœæ­£å¥½æ˜¯ä¸­ä½æ•°é‚£ä¹ˆå°±æ˜¯æ­£å¥½æ˜¯æ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥äºŒå‰æŸ¥æ‰¾æ ‘å…·å¤‡é«˜æ•ˆæŸ¥è¯¢ã€‚ ä½†æ˜¯äºŒå‰æ ‘ä¹Ÿæœ‰æ˜æ˜¾å¼Šç«¯ï¼Œåœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœæ¯æ¬¡æ’å…¥çš„æ•°æ®éƒ½æ˜¯æœ€å°æˆ–è€…éƒ½æ˜¯æœ€å¤§çš„å…ƒç´ ï¼Œé‚£ä¹ˆæ ‘ç»“æ„ä¼šé€€åŒ–æˆä¸€æ¡é“¾è¡¨ã€‚æŸ¥è¯¢æ•°æ®æ˜¯çš„æ—¶é—´å¤æ‚åº¦å°±ä¼šæ˜¯O(n)ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å›¾ç‰‡ å½“äºŒåˆ†æŸ¥æ‰¾æ ‘é€€åŒ–æˆé“¾è¡¨æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“é“¾è¡¨ä¸ä»…ä¸èƒ½é«˜æ•ˆæŸ¥è¯¢è€Œä¸”ä¹Ÿå¢åŠ äº†ç£ç›˜ IO æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¾—åˆ’å‘ä¸‹ä¸€ä¸ªæ ‘å‹æ•°æ®ç»“æ„ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:3:2","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#äºŒå‰æŸ¥æ‰¾æ ‘"},{"categories":["mysql"],"content":" è‡ªå¹³è¡¡äºŒå‰æ ‘/AVLæ ‘è‡ªå¹³è¡¡äºŒå‰æ ‘å°±æ˜¯æ¥è§£å†³äºŒå‰æŸ¥æ‰¾æ ‘æç«¯ä¸‹é€€åŒ–æˆé“¾è¡¨çš„é—®é¢˜ï¼Œè‡ªå¹³è¡¡äºŒå‰æ ‘ä¹Ÿç§°å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ï¼ˆAVLæ ‘ï¼‰ã€‚ å¯ä»¥çœ‹åˆ°ä»ç®€å•çš„äºŒå‰æ ‘ï¼Œä¸€æ­¥æ­¥æ¼”åŒ–åˆ°äºŒåˆ†æŸ¥æ‰¾æ ‘å†åˆ°ç°åœ¨çš„è‡ªå¹³è¡¡äºŒå‰æ ‘ã€‚ä¸€ä¸ªç®€å•çš„ä¸œè¥¿æ…¢æ…¢çš„é€æ¸èµ°å‘å¤æ‚ã€‚å¦‚æœåªçŸ¥é“ç­”æ¡ˆï¼Œæˆ‘ä»¬æ˜¯ä¸ä¼šçŸ¥é“æ¥é¾™å»è„‰çš„ã€‚ å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘å…¶å®ä¸»è¦å°±æ˜¯åœ¨äºŒå‰æŸ¥æ‰¾æ ‘çš„åŸºç¡€ä¸ŠåŠ ä¸Šçº¦æŸï¼šè®©æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸èƒ½è¶…è¿‡ 1ã€‚é‚£ä¹ˆè¿™æ ·è®©å¯ä»¥è®©å·¦å³å­æ ‘éƒ½ä¿æŒå¹³è¡¡ï¼Œè®©æŸ¥è¯¢æ•°æ®æ“ä½œçš„æ—¶é—´å¤æ‚åº¦åœ¨ O(logn)ã€‚ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘å°†æ¯æ¬¡æ’å…¥çš„å…ƒç´ æ•°æ®éƒ½ä¼šç»´æŒè‡ªå¹³è¡¡ã€‚ å›¾ç‰‡ å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ™®é€šéå¹³è¡¡äºŒå‰æ ‘å’Œå¹³è¡¡äºŒå‰æ ‘çš„å¯¹æ¯”ã€‚ å›¾ç‰‡ è¿˜æœ‰åœ¨ Java ä¸­é›†åˆç±»å¸¸è§çš„çº¢é»‘æ ‘ï¼Œä¹Ÿæ˜¯è‡ªå¹³è¡¡äºŒå‰æ ‘ä¸­çš„ä¸€ç§ã€‚ ä½†æ˜¯ä¸ç®¡è‡ªå¹³è¡¡æ ‘æ˜¯å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘è¿˜æ˜¯çº¢é»‘æ ‘ï¼Œéƒ½ä¼šéšç€æ’å…¥çš„å…ƒç´ å¢å¤šï¼Œè€Œå¯¼è‡´æ ‘çš„é«˜åº¦å˜é«˜ï¼Œè¿™åŒæ ·æ„å‘³ç€ç£ç›˜ I/O æ“ä½œæ¬¡æ•°å¤šï¼Œå½±å“åˆ°æ•´ä½“æŸ¥è¯¢çš„æ•ˆç‡ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:3:3","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#è‡ªå¹³è¡¡äºŒå‰æ ‘avlæ ‘"},{"categories":["mysql"],"content":" Bæ ‘æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°B+æ ‘è¿˜æœ‰B-æ ‘ï¼Œä¸å…å°±ä¼šå°†B-æ ‘è¯»æˆBå‡æ ‘ ï¼Œä½†B-æ ‘å…¶-æ¨ªçº¿åªæ˜¯è¿æ¥ç¬¦ï¼Œæ‰€ä»¥B-æ ‘å°±æ˜¯ç§°ä¸ºBæ ‘ã€‚ è‡ªå¹³è¡¡äºŒå‰æ ‘è™½ç„¶æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦åœ¨O(logn)ï¼Œå‰é¢ä¹Ÿè¯´è¿‡å®ƒæœ¬èº«æ˜¯ä¸€ä¸ªäºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹åªèƒ½æœ‰2ä¸ªå­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆéšç€æ•°æ®é‡å¢å¤§çš„æ—¶å€™ï¼ŒèŠ‚ç‚¹ä¸ªæ•°è¶Šå¤šï¼Œæ ‘é«˜åº¦ä¹Ÿä¼šå¢é«˜ï¼ˆä¹Ÿå°±æ˜¯æ ‘çš„æ·±åº¦è¶Šæ·±ï¼‰ï¼Œå¢åŠ ç£ç›˜ I/O æ¬¡æ•°ï¼Œå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚ é‚£ä¹ˆä½ å¦‚æœä»æ ‘å½¢ç»“æ„çš„äºŒå‰æ ‘è¿™ä¸€è·¯çš„è¿›é˜¶è¿‡ç¨‹ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒäºŒå‰æ ‘æ¯ä¸€æ¬¡ä¸ºäº†è§£å†³ä¸€ä¸ªæ–°çš„é—®é¢˜éƒ½ä¼šåˆ›é€ å‡ºæ–°çš„bugæˆ–è€…åˆ›é€ ä¸€ä¸ªåˆä¸ªçš„ç—›ç‚¹ã€‚çœ‹åˆ°è¿™å°±ä¸éš¾çŒœåˆ°ï¼ŒBæ ‘çš„å‡ºç°å¯ä»¥è§£å†³æ ‘é«˜åº¦çš„é—®é¢˜ã€‚ ä¹‹æ‰€ä»¥æ˜¯ B æ ‘ï¼Œè€Œå¹¶ä¸æ˜¯åç§°ä¸­ â€œxxxäºŒå‰æ ‘â€ï¼Œå°±æ˜¯å®ƒä¸å†é™åˆ¶ä¸€ä¸ªçˆ¶èŠ‚ç‚¹ä¸­åªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œè€Œæ˜¯å…è®¸ M ä¸ªå­èŠ‚ç‚¹ï¼ˆM \u003e 2ï¼‰ã€‚ä¸ä»…å¦‚æ­¤ï¼ŒBæ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹å¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œç›¸æ¯”è¾ƒäºå‰é¢çš„é‚£äº›äºŒå‰æ ‘æ•°æ®ç»“æ„åˆå°†æ•´ä½“çš„æ ‘é«˜åº¦é™ä½äº†ã€‚ B æ ‘çš„èŠ‚ç‚¹å¯ä»¥åŒ…å«æœ‰å¤šä¸ªå­èŠ‚ç‚¹ï¼Œæ‰€ä»¥Bæ ‘æ˜¯ä¸€æ£µå¤šå‰æ ‘ï¼Œå®ƒçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹åŒ…å«çš„æœ€å¤šå­èŠ‚ç‚¹æ•°é‡çš„ç§°ä¸ºBæ ‘çš„é˜¶ã€‚å¦‚ä¸‹å›¾æ˜¯ä¸€é¢— 3 é˜¶çš„ B æ ‘ã€‚ å›¾ç‰‡ ä¸Šå›¾ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹ç§°ä¸ºé¡µï¼Œåœ¨ mysql ä¸­æ•°æ®è¯»å–çš„åŸºæœ¬å•ä½æ˜¯é¡µï¼Œè€Œé¡µå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„ç£ç›˜å—ã€‚ç£ç›˜å—ä¸­çš„ p èŠ‚ç‚¹æ˜¯æŒ‡å‘å­èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚ æŒ‡é’ˆåœ¨æ ‘ç»“æ„ä¸­éƒ½æœ‰ï¼Œåœ¨å‰é¢çš„äºŒå‰æ ‘ä¸­ä¹Ÿéƒ½æ˜¯æœ‰çš„ã€‚ é‚£æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸Šå›¾æ‰€ç¤ºï¼Œå½“ä¸€é¢— 3 é˜¶çš„Bæ ‘æŸ¥æ‰¾ 90 è¿™ä¸ªçš„å…ƒç´ æ—¶çš„æµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ å…ˆä»æ ¹èŠ‚ç‚¹å‡ºå‘ï¼Œä¹Ÿå°±æ˜¯ ç£ç›˜å—1ï¼Œåˆ¤æ–­ 90 åœ¨17 ~ 35ä¹‹é—´ï¼Œé€šè¿‡ç£ç›˜å—1ä¸­çš„æŒ‡é’ˆ p3 æ‰¾åˆ°ç£ç›˜å—4ã€‚è¿˜æ˜¯æŒ‰ç…§åŸæ¥çš„æ­¥éª¤ï¼Œåœ¨ç£ç›˜å—4ä¸­çš„65 ~ 87ä¹‹é—´ç›¸æ¯”è¾ƒï¼Œæœ€åç£ç›˜4çš„æŒ‡é’ˆp3æ‰¾åˆ°ç£ç›˜å—11ã€‚ä¹Ÿå°±æ‰¾åˆ°æœ‰åŒ¹é…90çš„é”®å€¼ã€‚ å¯ä»¥å‘ç°ä¸€é¢— 3 é˜¶çš„ B æ ‘åœ¨æŸ¥æ‰¾å¶å­èŠ‚ç‚¹æ—¶ï¼Œç”±äºæ ‘é«˜åº¦åªæœ‰ 3ï¼Œæ‰€ä»¥æŸ¥æ‰¾è¿‡ç¨‹æœ€å¤šåªéœ€è¦3æ¬¡çš„ç£ç›˜ I/O æ“ä½œã€‚ æ•°æ®é‡ä¸å¤§æ—¶å¯èƒ½ä¸å¤ªçœŸåˆ‡ã€‚ä½†å½“æ•°æ®é‡å¤§æ—¶ï¼ŒèŠ‚ç‚¹ä¹Ÿä¼šéšç€å¢å¤šï¼›æ­¤æ—¶å¦‚æœè¿˜æ˜¯å‰é¢çš„è‡ªå¹³è¡¡äºŒå‰æ ‘çš„åœºæ™¯ä¸‹ï¼Œç”±äºäºŒå‰æ ‘åªèƒ½æœ€å¤š2ä¸ªå¶å­èŠ‚ç‚¹çš„çº¦æŸï¼Œä¹Ÿåªèƒ½çºµå‘å»çš„å»æ‰©å±•å­èŠ‚ç‚¹ï¼Œæ ‘çš„é«˜åº¦ä¼šå¾ˆé«˜ï¼Œæ„å‘³ç€éœ€è¦æ›´å¤šçš„æ“ä½œç£ç›˜ I/O æ¬¡æ•°ã€‚è€Œ B æ ‘åˆ™å¯ä»¥é€šè¿‡æ¨ªå‘æ‰©å±•èŠ‚ç‚¹ä»è€Œé™ä½æ ‘çš„é«˜åº¦ï¼Œæ‰€ä»¥æ•ˆç‡è‡ªç„¶è¦æ¯”äºŒå‰æ ‘æ•ˆç‡æ›´é«˜ã€‚ç›´ç™½è¯´å°±æ˜¯å˜çŸ®èƒ–äº†ã€‚ çœ‹åˆ°è¿™ï¼Œç›¸ä¿¡ä½ ä¹ŸçŸ¥é“å¦‚æœ B æ ‘è¿™ä¹ˆé€‚åˆï¼Œä¹Ÿå°±æ²¡æœ‰æ¥ä¸‹æ¥ B+ æ ‘çš„ä»€ä¹ˆäº‹äº†ã€‚ æ¥ç€ï¼Œé‚£ä¸ºä»€ä¹ˆä¸ç”¨ B æ ‘ï¼Œè€Œç”¨ äº†B+ æ ‘å‘¢ï¼Ÿ å…¶å®ï¼ŒB æ ‘å…¶å®å·²ç»æ»¡è¶³äº†æˆ‘ä»¬æœ€å‰é¢æ‰€è¦æ»¡è¶³çš„æ¡ä»¶ï¼Œå‡å°‘ç£ç›˜ I/O æ“ä½œï¼ŒåŒæ—¶æ”¯æŒæŒ‰åŒºé—´æŸ¥æ‰¾ã€‚ä½†æ³¨æ„ï¼Œè™½ç„¶ B æ ‘æ”¯æŒæŒ‰åŒºé—´æŸ¥æ‰¾ï¼Œä½†å¹¶ä¸é«˜æ•ˆã€‚ ä¾‹å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒBæ ‘èƒ½é«˜æ•ˆçš„é€šè¿‡ç­‰å€¼æŸ¥è¯¢ 90è¿™ä¸ªå€¼ï¼Œä½†ä¸æ–¹ä¾¿æŸ¥è¯¢å‡ºä¸€ä¸ªåŒºé—´å†…æ¯”å¦‚ï¼Œ3 ~ 10 åŒºé—´å†…æ‰€æœ‰æ•°çš„ç»“æœã€‚å› ä¸ºå½“Bæ ‘åšèŒƒå›´æŸ¥è¯¢æ—¶éœ€è¦ä½¿ç”¨ä¸­åºéå†ï¼Œé‚£ä¹ˆçˆ¶èŠ‚ç‚¹å’Œå­èŠ‚ç‚¹ä¹Ÿå°±éœ€è¦ä¸æ–­çš„æ¥å›åˆ‡æ¢æ¶‰åŠäº†å¤šä¸ªèŠ‚ç‚¹ä¼šç»™ç£ç›˜ I/O å¸¦æ¥å¾ˆå¤šè´Ÿæ‹…ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:3:4","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#bæ ‘"},{"categories":["mysql"],"content":" B+æ ‘B+ æ ‘ä»+çš„ç¬¦å·å¯ä»¥çœ‹å‡ºæ˜¯ B æ ‘çš„å‡çº§ç‰ˆï¼ŒMySQL ä¸­ innoDB å¼•æ“ä¸­çš„ç´¢å¼•åº•å±‚æ•°æ®ç»“æ„é‡‡ç”¨çš„æ­£æ˜¯ B+ æ ‘ã€‚ B+ æ ‘ç›¸æ¯”äº B æ ‘ï¼Œåšäº†è¿™æ ·çš„å‡çº§ï¼šB+ æ ‘ä¸­çš„éå¶å­èŠ‚ç‚¹éƒ½ä¸å­˜å‚¨æ•°æ®ï¼Œè€Œæ˜¯åªä½œä¸ºç´¢å¼•ã€‚ ç”±å¶å­èŠ‚ç‚¹å­˜æ”¾æ•´æ£µæ ‘çš„æ‰€æœ‰æ•°æ®ã€‚è€Œå¶å­èŠ‚ç‚¹ä¹‹é—´æ„æˆä¸€ä¸ªä»å°åˆ°å¤§æœ‰åºçš„é“¾è¡¨äº’ç›¸æŒ‡å‘ç›¸é‚»çš„å¶å­èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯å¶å­èŠ‚ç‚¹ä¹‹é—´å½¢æˆäº†æœ‰åºçš„åŒå‘é“¾è¡¨ã€‚å¦‚ä¸‹å›¾ B+ æ ‘çš„ç»“æ„ã€‚ å›¾ç‰‡ B+ æ ‘æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒå‰é¢çš„è·³è¡¨ï¼Œæ•°æ®åº•å±‚æ˜¯æ•°æ®ï¼Œä¸Šå±‚éƒ½æ˜¯æŒ‰åº•å±‚åŒºé—´æ„æˆçš„ç´¢å¼•å±‚ï¼Œåªä¸è¿‡å®ƒä¸åƒè·³è¡¨æ˜¯çºµå‘æ‰©å±•ï¼Œè€Œæ˜¯æ¨ªå‘æ‰©å±•çš„ â€œè·³è¡¨â€ã€‚è¿™ä¹ˆåšçš„å¥½å¤„å³å‡å°‘ç£ç›˜çš„ IO æ“ä½œåˆæé«˜äº†èŒƒå›´æŸ¥æ‰¾çš„æ•ˆç‡ã€‚ æ¥ç€å†æ¥çœ‹ B+ æ ‘çš„æ’å…¥å’Œåˆ é™¤ï¼ŒB+ æ ‘åšäº†å¤§é‡å†—ä½™èŠ‚ç‚¹ï¼Œä»ä¸Šé¢å¯ä»¥å‘ç°çˆ¶èŠ‚ç‚¹çš„æ‰€æœ‰å…ƒç´ éƒ½ä¼šåœ¨å­èŠ‚ç‚¹ä¸­å‡ºç°ï¼Œè¿™æ ·å½“åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå¯ä»¥ç›´æ¥ä»å¶å­èŠ‚ç‚¹ä¸­åˆ é™¤ï¼Œè¿™æ ·æ•ˆç‡æ›´å¿«ã€‚ B æ ‘ç›¸æ¯”äº B+ æ ‘ï¼ŒB æ ‘æ²¡æœ‰å†—ä½™èŠ‚ç‚¹ï¼Œåˆ é™¤èŠ‚ç‚¹æ—¶ä¼šå‘ç”Ÿå¤æ‚çš„æ ‘å˜å½¢ï¼Œè€Œ B+ æ ‘æœ‰å†—ä½™èŠ‚ç‚¹ï¼Œä¸ä¼šæ¶‰åŠåˆ°å¤æ‚çš„æ ‘å˜å½¢ã€‚è€Œä¸” B+ æ ‘çš„æ’å…¥ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæœ€å¤šåªæ¶‰åŠæ ‘çš„ä¸€æ¡åˆ†æ”¯è·¯å¾„ã€‚B+ æ ‘ä¹Ÿä¸ç”¨æ›´å¤šå¤æ‚ç®—æ³•ï¼Œå¯ä»¥ç±»ä¼¼é»‘çº¢æ ‘çš„æ—‹è½¬å»è‡ªåŠ¨å¹³è¡¡ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:3:5","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#bæ ‘-1"},{"categories":["mysql"],"content":" æ€»ç»“ä»æ–‡ç« çš„é¢˜ç›®å¼€å§‹å°±æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç›´æ¥å›ç­”ä¸ºä»€ä¹ˆMySQL é‡‡ç”¨ B+ æ ‘ä½œä¸ºç´¢å¼•çš„ç­”æ¡ˆï¼Œè€Œæ˜¯ç›¸åçš„é—®å‡ºäº†ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªé—®é¢˜æ˜¯é‚£ä¹ˆå¤šæ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„ï¼Ÿå¦ä¸€ä¸ªé—®é¢˜æ˜¯é‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ï¼Œåˆä¸ºä»€ä¹ˆååé‡‡ç”¨ B+ æ ‘ï¼Ÿ è¦å¾—åˆ°æœï¼Œå¾—å…ˆçŸ¥é“å› ï¼Œæˆ‘ä»¬ä»ä¸¤ä¸ªæ–¹é¢å¼€å§‹å‡ºå‘ï¼Œå› ä¸º MySQL çš„æ•°æ®æ˜¯æ”¾åœ¨ç£ç›˜çš„ï¼Œè€Œç£ç›˜çš„å¤„ç†é€Ÿåº¦æ˜¯æ¯«ç§’çº§åˆ«çš„ï¼Œå¦‚æœåœ¨ç£ç›˜ IO åšè¿‡å¤šæŸ¥è¯¢æ“ä½œï¼Œä¼šç»™æŸ¥è¯¢å¸¦æ¥è´Ÿæ‹…ï¼Œæ‰€ä»¥è¦å°½å°‘åœ¨ç£ç›˜ I/O æ“ä½œä¸­åšæŸ¥è¯¢ã€‚å¦ä¸€ä¸ªæ˜¯ä»ç´¢å¼•æœ¬èº«çš„é¦–è¦ç›®çš„ï¼Œè¦èƒ½æŒ‰åŒºé—´é«˜æ•ˆåœ°èŒƒå›´æŸ¥æ‰¾ã€‚ æœ‰äº†å› ï¼Œæˆ‘ä»¬å°±å¼€å§‹å»æ¢ç´¢æœï¼Œæˆ‘ä»¬å°±å¯ä»¥å…ˆæ¥å›ç­”ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œâ€œé‚£ä¹ˆå¤šæ•°æ®ç»“æ„ï¼Œä¸ºä»€ä¹ˆé€‰æ ‘ç»“æ„ï¼Ÿâ€ åœ¨å…¶ä»–æ•°æ®ç»“æ„ä¸­æŒ‰é€»è¾‘ç»“æ„çš„çº¿æ€§ç»“æ„æœ‰å“ˆå¸Œè¡¨å’Œè·³è¡¨ã€‚å“ˆå¸Œè¡¨åº•å±‚åŸºäºæ•°ç»„ï¼Œè™½ç„¶å¯ä»¥é«˜æ•ˆæŸ¥è¯¢ï¼Œä½†æ˜¯åªèƒ½ç­‰å€¼æŸ¥è¯¢ï¼Œè€Œä¸èƒ½æ”¯æŒèŒƒå›´æŸ¥è¯¢ã€‚è€Œè·³è¡¨åº•å±‚æ˜¯é“¾è¡¨ï¼Œé€šè¿‡ç´¢å¼•å±‚å¯ä»¥å®ç°é«˜æ•ˆçš„åŒºé—´æŸ¥è¯¢ï¼Œä½†æ˜¯éšç€æ•°æ®é‡çš„é€’å¢ï¼Œç´¢å¼•å±‚ä¹Ÿéšç€æ•°æ®é‡çš„å¢å¤šè€Œå¢åŠ ã€‚æ‰€ä»¥é‡‡ç”¨æ ‘çš„æ•°æ®ç»“æ„ï¼Œæ ‘ç»“æ„å…¶ç‰¹æ€§å†³å®šäº†éå†æ•°æ®æ–¹å¼æœ¬èº«å°±çº¯å¤©ç„¶çš„æ”¯æŒæŒ‰åŒºé—´æŸ¥è¯¢ã€‚æ ‘ç»“æ„åœ¨æ’å…¥ç­‰æ“ä½œä¸ç”¨çº¿æ€§ç»“æ„æ•°ç»„çš„å¼€é”€ï¼Œæ‰€ä»¥æ›´é€‚åˆæ’å…¥æ›´æ–°ç­‰åŠ¨æ€æ“ä½œçš„æ•°æ®ç»“æ„ã€‚ æ¥ç€æˆ‘ä»¬å¦ä¸€ä¸ªé—®é¢˜ï¼Œâ€œé‚£ä¹ˆå¤šçš„æ ‘ç»“æ„ï¼Œåˆä¸ºä»€ä¹ˆååé‡‡ç”¨B+æ ‘ï¼Ÿâ€ æˆ‘ä»¬ä»æ ‘ç»“æ„ä¸­çˆ¶èŠ‚ç‚¹æœ€å¤šåªèƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹çš„äºŒå‰æ ‘ï¼Œå†ä»äºŒå‰æ ‘åŠ ä¸ŠäºŒåˆ†æŸ¥æ‰¾çš„äºŒå‰æŸ¥æ‰¾æ ‘ï¼ŒäºŒå‰æ ‘å±•ç°äº†é«˜æ•ˆçš„æŸ¥è¯¢èƒ½åŠ›ï¼›ä½†äºŒå‰æŸ¥æ‰¾æ ‘åœ¨æç«¯æƒ…å†µä¸‹ä¼šé€€åŒ–æˆé“¾è¡¨ï¼Œæ‰€ä»¥è¿›é˜¶åˆ°è‡ªå¹³è¡¡äºŒå‰æ ‘ï¼Œè‡ªå¹³è¡¡äºŒå‰æ ‘çº¦æŸäº†æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘ç›¸å·®ä¸èƒ½å¤§äº 1ï¼Œä½†æ˜¯äºŒå‰æ ‘å› ä¸ºåªèƒ½æœ€å¤šæ˜¯ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œæ‰€ä»¥æ ‘çš„é«˜åº¦è¿‡é«˜ä¼šå¯¼è‡´ç£ç›˜åšè¿‡å¤š I/O çš„æŸ¥è¯¢æ“ä½œè´Ÿæ‹…ã€‚ æ‰€ä»¥æœ€åçœŸæ­£åˆ°äº† B æ ‘ï¼ŒB æ ‘æ˜¯å¤šå‰æ ‘ï¼Œä½†åªèƒ½é«˜æ•ˆå•æŸ¥è¯¢ï¼Œå¹¶ä¸èƒ½é«˜æ•ˆåŒºé—´æŸ¥è¯¢ã€‚æ‰€ä»¥æ‰æœ‰ B+ æ ‘ï¼ŒB+ æ ‘æ˜¯ B æ ‘çš„å‡çº§ï¼Œæ‰€æœ‰éå¶å­èŠ‚ç‚¹éƒ½ç”¨æ¥åšç´¢å¼•ï¼Œåªæœ‰å¶å­èŠ‚ç‚¹å­˜å‚¨æ•°æ®è€Œä¸”æ˜¯æœ‰åºåŒå‘çš„é“¾è¡¨ï¼Œæ ‘èŠ‚ç‚¹åšäº†å†—ä½™ï¼Œç›¸æ¯”äº B æ ‘æ—¢èƒ½æ”¯æŒé«˜æ•ˆçš„åŒºé—´æŸ¥è¯¢ï¼Œæ’å…¥å’Œåˆ é™¤éƒ½æ¯” B æ ‘æ›´åŠ å‡ºè‰²ã€‚ ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:4:0","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#æ€»ç»“"},{"categories":["mysql"],"content":" å‚è€ƒ MySQLç´¢å¼•ä¸ºä»€ä¹ˆè¦ç”¨B+æ ‘å®ç° MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘æ¥ä½œç´¢å¼•ï¼ŸMySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘æ¥ä½œç´¢å¼•ï¼Ÿ B+æ ‘è¯¦è§£ ã€å¹²è´§ã€‘æ•°æ®åº“ç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨B+Treeï¼Ÿ MySQL ä¸ºä»€ä¹ˆé‡‡ç”¨ B+æ ‘ä½œä¸ºç´¢å¼•ï¼Ÿ5å¹´ç»éªŒç¨‹åºå‘˜å›ç­”è®©æˆ‘æ‚Ÿäº† æ»¡äºŒå‰æ ‘å’Œå®Œå…¨äºŒå‰æ ‘çš„åŒºåˆ« ","date":"2022-05-20","objectID":"/why-mysql-index-use-btree/:5:0","series":["reproduce"],"tags":["mysql"],"title":"MySQL ä¸ºä»€ä¹ˆä½¿ç”¨ B+ æ ‘ç´¢å¼•","uri":"/why-mysql-index-use-btree/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,","date":"2022-05-03","objectID":"/chrome-use/","series":[],"tags":["chrome"],"title":"Chrome æµè§ˆå™¨ä½¿ç”¨å¤‡å¿˜","uri":"/chrome-use/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Volume Controlåˆšåœ¨ä½¿ç”¨è“ç‰™æ—¶ï¼Œå‘ç°ä¸€çœ‹è§†é¢‘ï¼Œç”µè„‘å·¦ä¸Šè§’å±å¹•å°±å‡ºç°äº†éŸ³é‡å—ï¼Œç±»ä¼¼è¿™æ ·ï¼š voice è§£å†³æ–¹å¼å¯ä»¥å‚è€ƒï¼š How to Enable or Disable Chrome Volume Control and Hardware Media Key Handling ","date":"2022-05-03","objectID":"/chrome-use/:1:0","series":[],"tags":["chrome"],"title":"Chrome æµè§ˆå™¨ä½¿ç”¨å¤‡å¿˜","uri":"/chrome-use/#volume-control"},{"categories":["mysql"],"content":"xiaobinqt,mysql workbench æŸ¥çœ‹ Triggers è§¦å‘å™¨","date":"2022-04-20","objectID":"/mysql-workbench-show-triggers/","series":null,"tags":["mysql"],"title":"mysql workbench æŸ¥çœ‹è§¦å‘å™¨","uri":"/mysql-workbench-show-triggers/"},{"categories":["mysql"],"content":" mysql workbench æ˜¯å®˜æ–¹æ¨èçš„æ•°æ®åº“å·¥å…·ï¼Œç”¨äº†å¾ˆé•¿æ—¶é—´å´ä¸€ç›´ä¸çŸ¥é“è§¦å‘å™¨åœ¨å“ªå„¿ğŸ˜¢ã€‚ è§¦å‘å™¨æ˜¯å¯¹å•ä¸ªè¡¨çš„æ“ä½œï¼Œè€Œä¸æ˜¯æ•´ä¸ªæ•°æ®åº“çš„æ“ä½œï¼Œæ‰€ä»¥ Alter Table å°±å¯ä»¥çœ‹åˆ°è§¦å‘å™¨ï¼š å›¾1 å›¾2 ç‚¹è¿™ä¸ªæ‰³æ‰‹å›¾æ ‡ä¹Ÿå¯ä»¥çœ‹åˆ°è§¦å‘å™¨ï¼Œè·Ÿ Alter Table æ•ˆæœä¸€æ ·ï¼š å›¾3 ","date":"2022-04-20","objectID":"/mysql-workbench-show-triggers/:0:0","series":null,"tags":["mysql"],"title":"mysql workbench æŸ¥çœ‹è§¦å‘å™¨","uri":"/mysql-workbench-show-triggers/#"},{"categories":["mysql"],"content":" å‚è€ƒ MySQL Workbench : How to Configure Triggers in MySQL ","date":"2022-04-20","objectID":"/mysql-workbench-show-triggers/:1:0","series":null,"tags":["mysql"],"title":"mysql workbench æŸ¥çœ‹è§¦å‘å™¨","uri":"/mysql-workbench-show-triggers/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,Redis ç¼“å­˜å‡»ç©¿,ç¼“å­˜ç©¿é€,ç¼“å­˜é›ªå´©,Redis","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¼“å­˜å‡»ç©¿é«˜å¹¶å‘æµé‡ï¼Œè®¿é—®çš„è¿™ä¸ªæ•°æ®æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œè¯·æ±‚çš„æ•°æ®åœ¨ DB ä¸­å­˜åœ¨ï¼Œä½†æ˜¯ Redis å­˜çš„é‚£ä¸€ä»½å·²ç»è¿‡æœŸï¼Œåç«¯éœ€è¦ä» DB ä»åŠ è½½æ•°æ®å¹¶å†™åˆ° Redisã€‚ æ€»ç»“èµ·æ¥å°±æ˜¯ï¼šå•ä¸€çƒ­ç‚¹æ•°æ®ã€é«˜å¹¶å‘ã€æ•°æ®å¤±æ•ˆã€‚ ç¼“å­˜å‡»ç©¿ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:1:0","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#ç¼“å­˜å‡»ç©¿"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ¡ˆ è¿‡æœŸæ—¶é—´â•éšæœºå€¼å¯¹äºçƒ­ç‚¹æ•°æ®ï¼Œæˆ‘ä»¬ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠè¯·æ±‚éƒ½æ”¾åœ¨ç¼“å­˜ä¸­å¤„ç†ï¼Œå……åˆ†æŠŠ Redis é«˜ååé‡æ€§èƒ½åˆ©ç”¨èµ·æ¥ã€‚æˆ–è€…è¿‡æœŸæ—¶é—´å†åŠ ä¸€ä¸ªéšæœºå€¼ã€‚ è®¾è®¡ç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ—¶ï¼Œä½¿ç”¨å…¬å¼ï¼šè¿‡æœŸæ—¶é—´ = baes æ—¶é—´ + éšæœºæ—¶é—´ã€‚ å³ç›¸åŒä¸šåŠ¡æ•°æ®å†™ç¼“å­˜æ—¶ï¼Œåœ¨åŸºç¡€è¿‡æœŸæ—¶é—´ä¹‹ä¸Šï¼Œå†åŠ ä¸€ä¸ªéšæœºçš„è¿‡æœŸæ—¶é—´ï¼Œè®©æ•°æ®åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…æ…¢æ…¢è¿‡æœŸï¼Œé¿å…ç¬æ—¶å…¨éƒ¨è¿‡æœŸï¼Œå¯¹ DB é€ æˆè¿‡å¤§å‹åŠ›ã€‚ é¢„çƒ­é¢„å…ˆæŠŠçƒ­é—¨æ•°æ®æå‰å­˜å…¥ Redis ä¸­ï¼Œå¹¶è®¾çƒ­é—¨æ•°æ®çš„è¿‡æœŸæ—¶é—´è¶…å¤§å€¼ã€‚ ä½¿ç”¨é”å½“å‘ç°ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œä¸æ˜¯ç«‹å³ä»æ•°æ®åº“åŠ è½½æ•°æ®ã€‚ è€Œæ˜¯å…ˆè·å–åˆ†å¸ƒå¼é”ï¼Œè·å–é”æˆåŠŸæ‰æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢å’Œå†™æ•°æ®åˆ°ç¼“å­˜çš„æ“ä½œï¼Œè·å–é”å¤±è´¥ï¼Œåˆ™è¯´æ˜å½“å‰æœ‰çº¿ç¨‹åœ¨æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢æ“ä½œï¼Œå½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´å†é‡è¯•ã€‚è¿™æ ·åªè®©ä¸€ä¸ªè¯·æ±‚å»æ•°æ®åº“è¯»å–æ•°æ®ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:1:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#è§£å†³æ–¹æ¡ˆ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ¡ˆ è¿‡æœŸæ—¶é—´â•éšæœºå€¼å¯¹äºçƒ­ç‚¹æ•°æ®ï¼Œæˆ‘ä»¬ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠè¯·æ±‚éƒ½æ”¾åœ¨ç¼“å­˜ä¸­å¤„ç†ï¼Œå……åˆ†æŠŠ Redis é«˜ååé‡æ€§èƒ½åˆ©ç”¨èµ·æ¥ã€‚æˆ–è€…è¿‡æœŸæ—¶é—´å†åŠ ä¸€ä¸ªéšæœºå€¼ã€‚ è®¾è®¡ç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ—¶ï¼Œä½¿ç”¨å…¬å¼ï¼šè¿‡æœŸæ—¶é—´ = baes æ—¶é—´ + éšæœºæ—¶é—´ã€‚ å³ç›¸åŒä¸šåŠ¡æ•°æ®å†™ç¼“å­˜æ—¶ï¼Œåœ¨åŸºç¡€è¿‡æœŸæ—¶é—´ä¹‹ä¸Šï¼Œå†åŠ ä¸€ä¸ªéšæœºçš„è¿‡æœŸæ—¶é—´ï¼Œè®©æ•°æ®åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…æ…¢æ…¢è¿‡æœŸï¼Œé¿å…ç¬æ—¶å…¨éƒ¨è¿‡æœŸï¼Œå¯¹ DB é€ æˆè¿‡å¤§å‹åŠ›ã€‚ é¢„çƒ­é¢„å…ˆæŠŠçƒ­é—¨æ•°æ®æå‰å­˜å…¥ Redis ä¸­ï¼Œå¹¶è®¾çƒ­é—¨æ•°æ®çš„è¿‡æœŸæ—¶é—´è¶…å¤§å€¼ã€‚ ä½¿ç”¨é”å½“å‘ç°ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œä¸æ˜¯ç«‹å³ä»æ•°æ®åº“åŠ è½½æ•°æ®ã€‚ è€Œæ˜¯å…ˆè·å–åˆ†å¸ƒå¼é”ï¼Œè·å–é”æˆåŠŸæ‰æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢å’Œå†™æ•°æ®åˆ°ç¼“å­˜çš„æ“ä½œï¼Œè·å–é”å¤±è´¥ï¼Œåˆ™è¯´æ˜å½“å‰æœ‰çº¿ç¨‹åœ¨æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢æ“ä½œï¼Œå½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´å†é‡è¯•ã€‚è¿™æ ·åªè®©ä¸€ä¸ªè¯·æ±‚å»æ•°æ®åº“è¯»å–æ•°æ®ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:1:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#è¿‡æœŸæ—¶é—´heavy_plus_signéšæœºå€¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ¡ˆ è¿‡æœŸæ—¶é—´â•éšæœºå€¼å¯¹äºçƒ­ç‚¹æ•°æ®ï¼Œæˆ‘ä»¬ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠè¯·æ±‚éƒ½æ”¾åœ¨ç¼“å­˜ä¸­å¤„ç†ï¼Œå……åˆ†æŠŠ Redis é«˜ååé‡æ€§èƒ½åˆ©ç”¨èµ·æ¥ã€‚æˆ–è€…è¿‡æœŸæ—¶é—´å†åŠ ä¸€ä¸ªéšæœºå€¼ã€‚ è®¾è®¡ç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ—¶ï¼Œä½¿ç”¨å…¬å¼ï¼šè¿‡æœŸæ—¶é—´ = baes æ—¶é—´ + éšæœºæ—¶é—´ã€‚ å³ç›¸åŒä¸šåŠ¡æ•°æ®å†™ç¼“å­˜æ—¶ï¼Œåœ¨åŸºç¡€è¿‡æœŸæ—¶é—´ä¹‹ä¸Šï¼Œå†åŠ ä¸€ä¸ªéšæœºçš„è¿‡æœŸæ—¶é—´ï¼Œè®©æ•°æ®åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…æ…¢æ…¢è¿‡æœŸï¼Œé¿å…ç¬æ—¶å…¨éƒ¨è¿‡æœŸï¼Œå¯¹ DB é€ æˆè¿‡å¤§å‹åŠ›ã€‚ é¢„çƒ­é¢„å…ˆæŠŠçƒ­é—¨æ•°æ®æå‰å­˜å…¥ Redis ä¸­ï¼Œå¹¶è®¾çƒ­é—¨æ•°æ®çš„è¿‡æœŸæ—¶é—´è¶…å¤§å€¼ã€‚ ä½¿ç”¨é”å½“å‘ç°ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œä¸æ˜¯ç«‹å³ä»æ•°æ®åº“åŠ è½½æ•°æ®ã€‚ è€Œæ˜¯å…ˆè·å–åˆ†å¸ƒå¼é”ï¼Œè·å–é”æˆåŠŸæ‰æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢å’Œå†™æ•°æ®åˆ°ç¼“å­˜çš„æ“ä½œï¼Œè·å–é”å¤±è´¥ï¼Œåˆ™è¯´æ˜å½“å‰æœ‰çº¿ç¨‹åœ¨æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢æ“ä½œï¼Œå½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´å†é‡è¯•ã€‚è¿™æ ·åªè®©ä¸€ä¸ªè¯·æ±‚å»æ•°æ®åº“è¯»å–æ•°æ®ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:1:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#é¢„çƒ­"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ¡ˆ è¿‡æœŸæ—¶é—´â•éšæœºå€¼å¯¹äºçƒ­ç‚¹æ•°æ®ï¼Œæˆ‘ä»¬ä¸è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œè¿™æ ·å°±å¯ä»¥æŠŠè¯·æ±‚éƒ½æ”¾åœ¨ç¼“å­˜ä¸­å¤„ç†ï¼Œå……åˆ†æŠŠ Redis é«˜ååé‡æ€§èƒ½åˆ©ç”¨èµ·æ¥ã€‚æˆ–è€…è¿‡æœŸæ—¶é—´å†åŠ ä¸€ä¸ªéšæœºå€¼ã€‚ è®¾è®¡ç¼“å­˜çš„è¿‡æœŸæ—¶é—´æ—¶ï¼Œä½¿ç”¨å…¬å¼ï¼šè¿‡æœŸæ—¶é—´ = baes æ—¶é—´ + éšæœºæ—¶é—´ã€‚ å³ç›¸åŒä¸šåŠ¡æ•°æ®å†™ç¼“å­˜æ—¶ï¼Œåœ¨åŸºç¡€è¿‡æœŸæ—¶é—´ä¹‹ä¸Šï¼Œå†åŠ ä¸€ä¸ªéšæœºçš„è¿‡æœŸæ—¶é—´ï¼Œè®©æ•°æ®åœ¨æœªæ¥ä¸€æ®µæ—¶é—´å†…æ…¢æ…¢è¿‡æœŸï¼Œé¿å…ç¬æ—¶å…¨éƒ¨è¿‡æœŸï¼Œå¯¹ DB é€ æˆè¿‡å¤§å‹åŠ›ã€‚ é¢„çƒ­é¢„å…ˆæŠŠçƒ­é—¨æ•°æ®æå‰å­˜å…¥ Redis ä¸­ï¼Œå¹¶è®¾çƒ­é—¨æ•°æ®çš„è¿‡æœŸæ—¶é—´è¶…å¤§å€¼ã€‚ ä½¿ç”¨é”å½“å‘ç°ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ï¼Œä¸æ˜¯ç«‹å³ä»æ•°æ®åº“åŠ è½½æ•°æ®ã€‚ è€Œæ˜¯å…ˆè·å–åˆ†å¸ƒå¼é”ï¼Œè·å–é”æˆåŠŸæ‰æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢å’Œå†™æ•°æ®åˆ°ç¼“å­˜çš„æ“ä½œï¼Œè·å–é”å¤±è´¥ï¼Œåˆ™è¯´æ˜å½“å‰æœ‰çº¿ç¨‹åœ¨æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢æ“ä½œï¼Œå½“å‰çº¿ç¨‹ç¡çœ ä¸€æ®µæ—¶é—´å†é‡è¯•ã€‚è¿™æ ·åªè®©ä¸€ä¸ªè¯·æ±‚å»æ•°æ®åº“è¯»å–æ•°æ®ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:1:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#ä½¿ç”¨é”"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¼“å­˜ç©¿é€æ•°æ®åº“æœ¬å°±æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œè¯·æ±‚ç›´å¥”æ•°æ®åº“ï¼Œç¼“å­˜ç³»ç»Ÿå½¢åŒè™šè®¾ã€‚ å¤§é‡è¯·æ±‚çš„ key æ ¹æœ¬ä¸å­˜åœ¨äºç¼“å­˜ä¸­ä¹Ÿä¸å­˜åœ¨æ•°æ®åº“ï¼Œå¯¼è‡´è¯·æ±‚ç›´æ¥åˆ°äº†æ•°æ®åº“ä¸Šï¼Œæ ¹æœ¬æ²¡æœ‰ç»è¿‡ç¼“å­˜è¿™ä¸€å±‚ï¼Œå¯¹æ•°æ®åº“é€ æˆå‹åŠ›è€Œå½±å“æ­£å¸¸æœåŠ¡ã€‚ ç¼“å­˜ç©¿é€ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:2:0","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#ç¼“å­˜ç©¿é€"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ¡ˆæœ€åŸºæœ¬çš„é¦–å…ˆå°±æ˜¯åšå¥½å‚æ•°æ ¡éªŒï¼Œä¸€äº›ä¸åˆæ³•çš„å‚æ•°è¯·æ±‚ç›´æ¥æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ç¼“å­˜æ— æ•ˆçš„ keyå¦‚æœç¼“å­˜å’Œæ•°æ®åº“éƒ½æŸ¥ä¸åˆ° æŸä¸ª key çš„æ•°æ®å°±å†™ä¸€ä¸ªåˆ° Redis ä¸­å»å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¯·æ±‚çš„ key å˜åŒ–ä¸é¢‘ç¹çš„æƒ…å†µï¼Œå¦‚æœé»‘å®¢æ¶æ„æ”»å‡»ï¼Œæ¯æ¬¡æ„å»ºä¸åŒçš„è¯·æ±‚ keyï¼Œä¼šå¯¼è‡´ Redis ä¸­ç¼“å­˜å¤§é‡æ— æ•ˆçš„ key ã€‚è¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³æ­¤é—®é¢˜ã€‚å¦‚æœéè¦ç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ç©¿é€é—®é¢˜çš„è¯ï¼Œåº”è¯¥å°½é‡å°†æ— æ•ˆçš„ key çš„è¿‡æœŸæ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹æ¯”å¦‚ 1 åˆ†é’Ÿã€‚ å¸ƒéš†è¿‡æ»¤å™¨å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªéå¸¸ç¥å¥‡çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°åˆ¤æ–­ä¸€ä¸ªç»™å®šæ•°æ®æ˜¯å¦å­˜åœ¨äºæµ·é‡æ•°æ®ä¸­ã€‚æˆ‘ä»¬éœ€è¦çš„ä»…ä»…å°±æ˜¯åˆ¤æ–­ key æ˜¯å¦åˆæ³•ã€‚ å…·ä½“æ˜¯è¿™æ ·åšçš„ï¼šæŠŠæ‰€æœ‰å¯èƒ½å­˜åœ¨çš„è¯·æ±‚çš„å€¼éƒ½å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå½“ç”¨æˆ·è¯·æ±‚è¿‡æ¥ï¼Œå…ˆåˆ¤æ–­ç”¨æˆ·å‘æ¥çš„è¯·æ±‚çš„å€¼æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ä¸å­˜åœ¨çš„è¯ï¼Œç›´æ¥è¿”å›è¯·æ±‚å‚æ•°é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œå­˜åœ¨çš„è¯å†èµ°å…¶ä»–çš„åˆ¤æ–­æµç¨‹ã€‚ å¸ƒéš†è¿‡æ»¤å™¨ éœ€è¦æ³¨æ„çš„æ˜¯å¸ƒéš†è¿‡æ»¤å™¨å¯èƒ½ä¼šå­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µã€‚ å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ å­˜åœ¨ï¼Œå°æ¦‚ç‡ä¼šè¯¯åˆ¤ã€‚å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ ä¸åœ¨ï¼Œè¿™ä¸ªå…ƒç´ ä¸€å®šä¸åœ¨ã€‚ è¿™æ˜¯å› ä¸ºï¼Œå½“ä¸€ä¸ªå…ƒç´ åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„å“ˆå¸Œå‡½æ•°å¯¹å…ƒç´ å€¼è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°å“ˆå¸Œå€¼ï¼ˆæœ‰å‡ ä¸ªå“ˆå¸Œå‡½æ•°å¾—åˆ°å‡ ä¸ªå“ˆå¸Œå€¼ï¼‰ã€‚ æ ¹æ®å¾—åˆ°çš„å“ˆå¸Œå€¼ï¼Œåœ¨æ•°ç»„ä¸­æŠŠå¯¹åº”ä¸‹æ ‡çš„å€¼ç½®ä¸º 1ã€‚ å½“éœ€è¦åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š å¯¹ç»™å®šå…ƒç´ å†æ¬¡è¿›è¡Œç›¸åŒçš„å“ˆå¸Œè®¡ç®—ï¼› å¾—åˆ°å€¼ä¹‹ååˆ¤æ–­ä½æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦éƒ½ä¸º 1ï¼Œå¦‚æœå€¼éƒ½ä¸º 1ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªå€¼åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå€¼ä¸ä¸º 1ï¼Œè¯´æ˜è¯¥å…ƒç´ ä¸åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ ç„¶è€Œï¼Œä¸€å®šä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼šä¸åŒçš„å­—ç¬¦ä¸²å¯èƒ½å“ˆå¸Œå‡ºæ¥çš„ä½ç½®ç›¸åŒã€‚æˆ‘ä»¬å¯ä»¥é€‚å½“å¢åŠ ä½æ•°ç»„å¤§å°æˆ–è€…è°ƒæ•´æˆ‘ä»¬çš„å“ˆå¸Œå‡½æ•°æ¥é™ä½æ¦‚ç‡ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:2:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#è§£å†³æ–¹æ¡ˆ-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ¡ˆæœ€åŸºæœ¬çš„é¦–å…ˆå°±æ˜¯åšå¥½å‚æ•°æ ¡éªŒï¼Œä¸€äº›ä¸åˆæ³•çš„å‚æ•°è¯·æ±‚ç›´æ¥æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ç¼“å­˜æ— æ•ˆçš„ keyå¦‚æœç¼“å­˜å’Œæ•°æ®åº“éƒ½æŸ¥ä¸åˆ° æŸä¸ª key çš„æ•°æ®å°±å†™ä¸€ä¸ªåˆ° Redis ä¸­å»å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¯·æ±‚çš„ key å˜åŒ–ä¸é¢‘ç¹çš„æƒ…å†µï¼Œå¦‚æœé»‘å®¢æ¶æ„æ”»å‡»ï¼Œæ¯æ¬¡æ„å»ºä¸åŒçš„è¯·æ±‚ keyï¼Œä¼šå¯¼è‡´ Redis ä¸­ç¼“å­˜å¤§é‡æ— æ•ˆçš„ key ã€‚è¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³æ­¤é—®é¢˜ã€‚å¦‚æœéè¦ç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ç©¿é€é—®é¢˜çš„è¯ï¼Œåº”è¯¥å°½é‡å°†æ— æ•ˆçš„ key çš„è¿‡æœŸæ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹æ¯”å¦‚ 1 åˆ†é’Ÿã€‚ å¸ƒéš†è¿‡æ»¤å™¨å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªéå¸¸ç¥å¥‡çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°åˆ¤æ–­ä¸€ä¸ªç»™å®šæ•°æ®æ˜¯å¦å­˜åœ¨äºæµ·é‡æ•°æ®ä¸­ã€‚æˆ‘ä»¬éœ€è¦çš„ä»…ä»…å°±æ˜¯åˆ¤æ–­ key æ˜¯å¦åˆæ³•ã€‚ å…·ä½“æ˜¯è¿™æ ·åšçš„ï¼šæŠŠæ‰€æœ‰å¯èƒ½å­˜åœ¨çš„è¯·æ±‚çš„å€¼éƒ½å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå½“ç”¨æˆ·è¯·æ±‚è¿‡æ¥ï¼Œå…ˆåˆ¤æ–­ç”¨æˆ·å‘æ¥çš„è¯·æ±‚çš„å€¼æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ä¸å­˜åœ¨çš„è¯ï¼Œç›´æ¥è¿”å›è¯·æ±‚å‚æ•°é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œå­˜åœ¨çš„è¯å†èµ°å…¶ä»–çš„åˆ¤æ–­æµç¨‹ã€‚ å¸ƒéš†è¿‡æ»¤å™¨ éœ€è¦æ³¨æ„çš„æ˜¯å¸ƒéš†è¿‡æ»¤å™¨å¯èƒ½ä¼šå­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µã€‚ å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ å­˜åœ¨ï¼Œå°æ¦‚ç‡ä¼šè¯¯åˆ¤ã€‚å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ ä¸åœ¨ï¼Œè¿™ä¸ªå…ƒç´ ä¸€å®šä¸åœ¨ã€‚ è¿™æ˜¯å› ä¸ºï¼Œå½“ä¸€ä¸ªå…ƒç´ åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„å“ˆå¸Œå‡½æ•°å¯¹å…ƒç´ å€¼è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°å“ˆå¸Œå€¼ï¼ˆæœ‰å‡ ä¸ªå“ˆå¸Œå‡½æ•°å¾—åˆ°å‡ ä¸ªå“ˆå¸Œå€¼ï¼‰ã€‚ æ ¹æ®å¾—åˆ°çš„å“ˆå¸Œå€¼ï¼Œåœ¨æ•°ç»„ä¸­æŠŠå¯¹åº”ä¸‹æ ‡çš„å€¼ç½®ä¸º 1ã€‚ å½“éœ€è¦åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š å¯¹ç»™å®šå…ƒç´ å†æ¬¡è¿›è¡Œç›¸åŒçš„å“ˆå¸Œè®¡ç®—ï¼› å¾—åˆ°å€¼ä¹‹ååˆ¤æ–­ä½æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦éƒ½ä¸º 1ï¼Œå¦‚æœå€¼éƒ½ä¸º 1ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªå€¼åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå€¼ä¸ä¸º 1ï¼Œè¯´æ˜è¯¥å…ƒç´ ä¸åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ ç„¶è€Œï¼Œä¸€å®šä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼šä¸åŒçš„å­—ç¬¦ä¸²å¯èƒ½å“ˆå¸Œå‡ºæ¥çš„ä½ç½®ç›¸åŒã€‚æˆ‘ä»¬å¯ä»¥é€‚å½“å¢åŠ ä½æ•°ç»„å¤§å°æˆ–è€…è°ƒæ•´æˆ‘ä»¬çš„å“ˆå¸Œå‡½æ•°æ¥é™ä½æ¦‚ç‡ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:2:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#ç¼“å­˜æ— æ•ˆçš„-key"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ¡ˆæœ€åŸºæœ¬çš„é¦–å…ˆå°±æ˜¯åšå¥½å‚æ•°æ ¡éªŒï¼Œä¸€äº›ä¸åˆæ³•çš„å‚æ•°è¯·æ±‚ç›´æ¥æŠ›å‡ºå¼‚å¸¸ä¿¡æ¯è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ç¼“å­˜æ— æ•ˆçš„ keyå¦‚æœç¼“å­˜å’Œæ•°æ®åº“éƒ½æŸ¥ä¸åˆ° æŸä¸ª key çš„æ•°æ®å°±å†™ä¸€ä¸ªåˆ° Redis ä¸­å»å¹¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚è¿™ç§æ–¹å¼å¯ä»¥è§£å†³è¯·æ±‚çš„ key å˜åŒ–ä¸é¢‘ç¹çš„æƒ…å†µï¼Œå¦‚æœé»‘å®¢æ¶æ„æ”»å‡»ï¼Œæ¯æ¬¡æ„å»ºä¸åŒçš„è¯·æ±‚ keyï¼Œä¼šå¯¼è‡´ Redis ä¸­ç¼“å­˜å¤§é‡æ— æ•ˆçš„ key ã€‚è¿™ç§æ–¹æ¡ˆå¹¶ä¸èƒ½ä»æ ¹æœ¬ä¸Šè§£å†³æ­¤é—®é¢˜ã€‚å¦‚æœéè¦ç”¨è¿™ç§æ–¹å¼æ¥è§£å†³ç©¿é€é—®é¢˜çš„è¯ï¼Œåº”è¯¥å°½é‡å°†æ— æ•ˆçš„ key çš„è¿‡æœŸæ—¶é—´è®¾ç½®çŸ­ä¸€ç‚¹æ¯”å¦‚ 1 åˆ†é’Ÿã€‚ å¸ƒéš†è¿‡æ»¤å™¨å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä¸€ä¸ªéå¸¸ç¥å¥‡çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡å®ƒæˆ‘ä»¬å¯ä»¥éå¸¸æ–¹ä¾¿åœ°åˆ¤æ–­ä¸€ä¸ªç»™å®šæ•°æ®æ˜¯å¦å­˜åœ¨äºæµ·é‡æ•°æ®ä¸­ã€‚æˆ‘ä»¬éœ€è¦çš„ä»…ä»…å°±æ˜¯åˆ¤æ–­ key æ˜¯å¦åˆæ³•ã€‚ å…·ä½“æ˜¯è¿™æ ·åšçš„ï¼šæŠŠæ‰€æœ‰å¯èƒ½å­˜åœ¨çš„è¯·æ±‚çš„å€¼éƒ½å­˜æ”¾åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå½“ç”¨æˆ·è¯·æ±‚è¿‡æ¥ï¼Œå…ˆåˆ¤æ–­ç”¨æˆ·å‘æ¥çš„è¯·æ±‚çš„å€¼æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ä¸å­˜åœ¨çš„è¯ï¼Œç›´æ¥è¿”å›è¯·æ±‚å‚æ•°é”™è¯¯ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œå­˜åœ¨çš„è¯å†èµ°å…¶ä»–çš„åˆ¤æ–­æµç¨‹ã€‚ å¸ƒéš†è¿‡æ»¤å™¨ éœ€è¦æ³¨æ„çš„æ˜¯å¸ƒéš†è¿‡æ»¤å™¨å¯èƒ½ä¼šå­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µã€‚ å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ å­˜åœ¨ï¼Œå°æ¦‚ç‡ä¼šè¯¯åˆ¤ã€‚å¸ƒéš†è¿‡æ»¤å™¨è¯´æŸä¸ªå…ƒç´ ä¸åœ¨ï¼Œè¿™ä¸ªå…ƒç´ ä¸€å®šä¸åœ¨ã€‚ è¿™æ˜¯å› ä¸ºï¼Œå½“ä¸€ä¸ªå…ƒç´ åŠ å…¥å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­çš„å“ˆå¸Œå‡½æ•°å¯¹å…ƒç´ å€¼è¿›è¡Œè®¡ç®—ï¼Œå¾—åˆ°å“ˆå¸Œå€¼ï¼ˆæœ‰å‡ ä¸ªå“ˆå¸Œå‡½æ•°å¾—åˆ°å‡ ä¸ªå“ˆå¸Œå€¼ï¼‰ã€‚ æ ¹æ®å¾—åˆ°çš„å“ˆå¸Œå€¼ï¼Œåœ¨æ•°ç»„ä¸­æŠŠå¯¹åº”ä¸‹æ ‡çš„å€¼ç½®ä¸º 1ã€‚ å½“éœ€è¦åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºå¸ƒéš†è¿‡æ»¤å™¨çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œå¦‚ä¸‹æ“ä½œï¼š å¯¹ç»™å®šå…ƒç´ å†æ¬¡è¿›è¡Œç›¸åŒçš„å“ˆå¸Œè®¡ç®—ï¼› å¾—åˆ°å€¼ä¹‹ååˆ¤æ–­ä½æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å¦éƒ½ä¸º 1ï¼Œå¦‚æœå€¼éƒ½ä¸º 1ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªå€¼åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ï¼Œå¦‚æœå­˜åœ¨ä¸€ä¸ªå€¼ä¸ä¸º 1ï¼Œè¯´æ˜è¯¥å…ƒç´ ä¸åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­ã€‚ ç„¶è€Œï¼Œä¸€å®šä¼šå‡ºç°è¿™æ ·ä¸€ç§æƒ…å†µï¼šä¸åŒçš„å­—ç¬¦ä¸²å¯èƒ½å“ˆå¸Œå‡ºæ¥çš„ä½ç½®ç›¸åŒã€‚æˆ‘ä»¬å¯ä»¥é€‚å½“å¢åŠ ä½æ•°ç»„å¤§å°æˆ–è€…è°ƒæ•´æˆ‘ä»¬çš„å“ˆå¸Œå‡½æ•°æ¥é™ä½æ¦‚ç‡ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:2:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#å¸ƒéš†è¿‡æ»¤å™¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¼“å­˜é›ªå´©ç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯çš„å¤±æ•ˆï¼Œåé¢çš„è¯·æ±‚éƒ½ç›´æ¥è½åˆ°äº†æ•°æ®åº“ä¸Šï¼Œé€ æˆæ•°æ®åº“çŸ­æ—¶é—´å†…æ‰¿å—å¤§é‡è¯·æ±‚ã€‚æˆ–æ˜¯æœ‰ä¸€äº›è¢«å¤§é‡è®¿é—®æ•°æ®ï¼ˆçƒ­ç‚¹ç¼“å­˜ï¼‰åœ¨æŸä¸€æ—¶åˆ»å¤§é¢ç§¯å¤±æ•ˆï¼Œå¯¼è‡´å¯¹åº”çš„è¯·æ±‚ç›´æ¥è½åˆ°äº†æ•°æ®åº“ä¸Šã€‚ è€Œå‡ºç°è¯¥åŸå› ä¸»è¦æœ‰ä¸¤ç§ï¼š å¤§é‡çƒ­ç‚¹æ•°æ®åŒæ—¶è¿‡æœŸï¼Œå¯¼è‡´å¤§é‡è¯·æ±‚éœ€è¦æŸ¥è¯¢æ•°æ®åº“å¹¶å†™åˆ°ç¼“å­˜ã€‚ Redis æ•…éšœå®•æœºï¼Œç¼“å­˜ç³»ç»Ÿå¼‚å¸¸ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:3:0","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#ç¼“å­˜é›ªå´©"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸæ•°æ®ä¿å­˜åœ¨ç¼“å­˜ç³»ç»Ÿå¹¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯ç”±äºåœ¨åŒæ—¶ä¸€åˆ»ï¼Œå¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸã€‚ç³»ç»Ÿå°±æŠŠè¯·æ±‚å…¨éƒ¨æ‰“åˆ°æ•°æ®åº“è·å–æ•°æ®ï¼Œå¹¶å‘é‡å¤§çš„è¯å°±ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›æ¿€å¢ã€‚ ç¼“å­˜é›ªå´©æ˜¯å‘ç”Ÿåœ¨å¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆçš„åœºæ™¯ï¼Œè€Œç¼“å­˜å‡»ç©¿æ˜¯åœ¨æŸä¸ªçƒ­ç‚¹æ•°æ®å¤±æ•ˆçš„åœºæ™¯ï¼Œè¿™æ˜¯ä»–ä»¬æœ€å¤§çš„åŒºåˆ« ã€‚ ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ è¿‡æœŸæ—¶é—´æ·»åŠ éšæœºå€¼è¦é¿å…ç»™å¤§é‡çš„æ•°æ®è®¾ç½®ä¸€æ ·çš„è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸæ—¶é—´ = baes æ—¶é—´+ éšæœºæ—¶é—´ï¼ˆè¾ƒå°çš„éšæœºæ•°ï¼Œæ¯”å¦‚éšæœºå¢åŠ  1~5 åˆ†é’Ÿï¼‰ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸ä¼šå¯¼è‡´åŒä¸€æ—¶åˆ»çƒ­ç‚¹æ•°æ®å…¨éƒ¨å¤±æ•ˆï¼ŒåŒæ—¶è¿‡æœŸæ—¶é—´å·®åˆ«ä¹Ÿä¸ä¼šå¤ªå¤§ï¼Œæ—¢ä¿è¯äº†ç›¸è¿‘æ—¶é—´å¤±æ•ˆï¼Œåˆèƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚ æ¥å£é™æµå½“è®¿é—®çš„ä¸æ˜¯æ ¸å¿ƒæ•°æ®çš„æ—¶å€™ï¼Œåœ¨æŸ¥è¯¢çš„æ–¹æ³•ä¸ŠåŠ ä¸Šæ¥å£é™æµä¿æŠ¤ã€‚æ¯”å¦‚è®¾ç½® 10000 req/sã€‚å¦‚æœè®¿é—®çš„æ˜¯æ ¸å¿ƒæ•°æ®æ¥å£ï¼Œç¼“å­˜ä¸å­˜åœ¨å…è®¸ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶è®¾ç½®åˆ°ç¼“å­˜ä¸­ã€‚è¿™æ ·çš„è¯ï¼Œåªæœ‰éƒ¨åˆ†è¯·æ±‚ä¼šå‘é€åˆ°æ•°æ®åº“ï¼Œå‡å°‘äº†å‹åŠ›ã€‚ é™æµï¼Œå°±æ˜¯æŒ‡ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡ç³»ç»Ÿçš„è¯·æ±‚å…¥å£å‰ç«¯æ§åˆ¶æ¯ç§’è¿›å…¥ç³»ç»Ÿçš„è¯·æ±‚æ•°ï¼Œé¿å…è¿‡å¤šçš„è¯·æ±‚è¢«å‘é€åˆ°æ•°æ®åº“ã€‚ é™æµ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:3:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸæ•°æ®ä¿å­˜åœ¨ç¼“å­˜ç³»ç»Ÿå¹¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯ç”±äºåœ¨åŒæ—¶ä¸€åˆ»ï¼Œå¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸã€‚ç³»ç»Ÿå°±æŠŠè¯·æ±‚å…¨éƒ¨æ‰“åˆ°æ•°æ®åº“è·å–æ•°æ®ï¼Œå¹¶å‘é‡å¤§çš„è¯å°±ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›æ¿€å¢ã€‚ ç¼“å­˜é›ªå´©æ˜¯å‘ç”Ÿåœ¨å¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆçš„åœºæ™¯ï¼Œè€Œç¼“å­˜å‡»ç©¿æ˜¯åœ¨æŸä¸ªçƒ­ç‚¹æ•°æ®å¤±æ•ˆçš„åœºæ™¯ï¼Œè¿™æ˜¯ä»–ä»¬æœ€å¤§çš„åŒºåˆ« ã€‚ ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ è¿‡æœŸæ—¶é—´æ·»åŠ éšæœºå€¼è¦é¿å…ç»™å¤§é‡çš„æ•°æ®è®¾ç½®ä¸€æ ·çš„è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸæ—¶é—´ = baes æ—¶é—´+ éšæœºæ—¶é—´ï¼ˆè¾ƒå°çš„éšæœºæ•°ï¼Œæ¯”å¦‚éšæœºå¢åŠ  1~5 åˆ†é’Ÿï¼‰ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸ä¼šå¯¼è‡´åŒä¸€æ—¶åˆ»çƒ­ç‚¹æ•°æ®å…¨éƒ¨å¤±æ•ˆï¼ŒåŒæ—¶è¿‡æœŸæ—¶é—´å·®åˆ«ä¹Ÿä¸ä¼šå¤ªå¤§ï¼Œæ—¢ä¿è¯äº†ç›¸è¿‘æ—¶é—´å¤±æ•ˆï¼Œåˆèƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚ æ¥å£é™æµå½“è®¿é—®çš„ä¸æ˜¯æ ¸å¿ƒæ•°æ®çš„æ—¶å€™ï¼Œåœ¨æŸ¥è¯¢çš„æ–¹æ³•ä¸ŠåŠ ä¸Šæ¥å£é™æµä¿æŠ¤ã€‚æ¯”å¦‚è®¾ç½® 10000 req/sã€‚å¦‚æœè®¿é—®çš„æ˜¯æ ¸å¿ƒæ•°æ®æ¥å£ï¼Œç¼“å­˜ä¸å­˜åœ¨å…è®¸ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶è®¾ç½®åˆ°ç¼“å­˜ä¸­ã€‚è¿™æ ·çš„è¯ï¼Œåªæœ‰éƒ¨åˆ†è¯·æ±‚ä¼šå‘é€åˆ°æ•°æ®åº“ï¼Œå‡å°‘äº†å‹åŠ›ã€‚ é™æµï¼Œå°±æ˜¯æŒ‡ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡ç³»ç»Ÿçš„è¯·æ±‚å…¥å£å‰ç«¯æ§åˆ¶æ¯ç§’è¿›å…¥ç³»ç»Ÿçš„è¯·æ±‚æ•°ï¼Œé¿å…è¿‡å¤šçš„è¯·æ±‚è¢«å‘é€åˆ°æ•°æ®åº“ã€‚ é™æµ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:3:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#è¿‡æœŸæ—¶é—´æ·»åŠ éšæœºå€¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸæ•°æ®ä¿å­˜åœ¨ç¼“å­˜ç³»ç»Ÿå¹¶è®¾ç½®äº†è¿‡æœŸæ—¶é—´ï¼Œä½†æ˜¯ç”±äºåœ¨åŒæ—¶ä¸€åˆ»ï¼Œå¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸã€‚ç³»ç»Ÿå°±æŠŠè¯·æ±‚å…¨éƒ¨æ‰“åˆ°æ•°æ®åº“è·å–æ•°æ®ï¼Œå¹¶å‘é‡å¤§çš„è¯å°±ä¼šå¯¼è‡´æ•°æ®åº“å‹åŠ›æ¿€å¢ã€‚ ç¼“å­˜é›ªå´©æ˜¯å‘ç”Ÿåœ¨å¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆçš„åœºæ™¯ï¼Œè€Œç¼“å­˜å‡»ç©¿æ˜¯åœ¨æŸä¸ªçƒ­ç‚¹æ•°æ®å¤±æ•ˆçš„åœºæ™¯ï¼Œè¿™æ˜¯ä»–ä»¬æœ€å¤§çš„åŒºåˆ« ã€‚ ç¼“å­˜å¤§é‡æ•°æ®åŒæ—¶è¿‡æœŸ è¿‡æœŸæ—¶é—´æ·»åŠ éšæœºå€¼è¦é¿å…ç»™å¤§é‡çš„æ•°æ®è®¾ç½®ä¸€æ ·çš„è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸæ—¶é—´ = baes æ—¶é—´+ éšæœºæ—¶é—´ï¼ˆè¾ƒå°çš„éšæœºæ•°ï¼Œæ¯”å¦‚éšæœºå¢åŠ  1~5 åˆ†é’Ÿï¼‰ã€‚ è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸ä¼šå¯¼è‡´åŒä¸€æ—¶åˆ»çƒ­ç‚¹æ•°æ®å…¨éƒ¨å¤±æ•ˆï¼ŒåŒæ—¶è¿‡æœŸæ—¶é—´å·®åˆ«ä¹Ÿä¸ä¼šå¤ªå¤§ï¼Œæ—¢ä¿è¯äº†ç›¸è¿‘æ—¶é—´å¤±æ•ˆï¼Œåˆèƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚ æ¥å£é™æµå½“è®¿é—®çš„ä¸æ˜¯æ ¸å¿ƒæ•°æ®çš„æ—¶å€™ï¼Œåœ¨æŸ¥è¯¢çš„æ–¹æ³•ä¸ŠåŠ ä¸Šæ¥å£é™æµä¿æŠ¤ã€‚æ¯”å¦‚è®¾ç½® 10000 req/sã€‚å¦‚æœè®¿é—®çš„æ˜¯æ ¸å¿ƒæ•°æ®æ¥å£ï¼Œç¼“å­˜ä¸å­˜åœ¨å…è®¸ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å¹¶è®¾ç½®åˆ°ç¼“å­˜ä¸­ã€‚è¿™æ ·çš„è¯ï¼Œåªæœ‰éƒ¨åˆ†è¯·æ±‚ä¼šå‘é€åˆ°æ•°æ®åº“ï¼Œå‡å°‘äº†å‹åŠ›ã€‚ é™æµï¼Œå°±æ˜¯æŒ‡ï¼Œæˆ‘ä»¬åœ¨ä¸šåŠ¡ç³»ç»Ÿçš„è¯·æ±‚å…¥å£å‰ç«¯æ§åˆ¶æ¯ç§’è¿›å…¥ç³»ç»Ÿçš„è¯·æ±‚æ•°ï¼Œé¿å…è¿‡å¤šçš„è¯·æ±‚è¢«å‘é€åˆ°æ•°æ®åº“ã€‚ é™æµ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:3:1","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#æ¥å£é™æµ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Redis æ•…éšœä¸€æ—¦ Redis æ•…éšœæˆ–å®•æœºï¼Œä¼šå¯¼è‡´å¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“ï¼Œä»è€Œå‘ç”Ÿç¼“å­˜é›ªå´©ã€‚å¯¹äº Redis æ•…éšœï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚ æœåŠ¡ç†”æ–­å’Œé™æµåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œé’ˆå¯¹é«˜å¹¶å‘çš„ä½¿ç”¨æœåŠ¡ç†”æ–­æ¥æœ‰æŸæä¾›æœåŠ¡ä»è€Œä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚ æœåŠ¡ç†”æ–­å°±æ˜¯å½“ä»ç¼“å­˜è·å–æ•°æ®å‘ç°å¼‚å¸¸ï¼Œåˆ™ç›´æ¥è¿”å›é”™è¯¯æ•°æ®ç»™å‰ç«¯ï¼Œé˜²æ­¢æ‰€æœ‰æµé‡æ‰“åˆ°æ•°æ®åº“å¯¼è‡´å®•æœºã€‚ æœåŠ¡ç†”æ–­å’Œé™æµå±äºåœ¨å‘ç”Ÿäº†ç¼“å­˜é›ªå´©ï¼Œå¦‚ä½•é™ä½é›ªå´©å¯¹æ•°æ®åº“é€ æˆçš„å½±å“çš„æ–¹æ¡ˆã€‚ é«˜å¯ç”¨ç¼“å­˜é›†ç¾¤ç¼“å­˜ç³»ç»Ÿä¸€å®šè¦æ„å»ºä¸€å¥— Redis é«˜å¯ç”¨é›†ç¾¤ï¼Œæ¯”å¦‚ Redis å“¨å…µé›†ç¾¤ TODO æˆ–è€… Redis Cluster é›†ç¾¤ TODOï¼Œå¦‚æœ Redis çš„ä¸»èŠ‚ç‚¹æ•…éšœå®•æœºäº†ï¼Œä»èŠ‚ç‚¹è¿˜å¯ä»¥åˆ‡æ¢æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œç»§ç»­æä¾›ç¼“å­˜æœåŠ¡ï¼Œé¿å…äº†ç”±äºç¼“å­˜å®ä¾‹å®•æœºè€Œå¯¼è‡´çš„ç¼“å­˜é›ªå´©é—®é¢˜ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:3:2","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#redis-æ•…éšœ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Redis æ•…éšœä¸€æ—¦ Redis æ•…éšœæˆ–å®•æœºï¼Œä¼šå¯¼è‡´å¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“ï¼Œä»è€Œå‘ç”Ÿç¼“å­˜é›ªå´©ã€‚å¯¹äº Redis æ•…éšœï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚ æœåŠ¡ç†”æ–­å’Œé™æµåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œé’ˆå¯¹é«˜å¹¶å‘çš„ä½¿ç”¨æœåŠ¡ç†”æ–­æ¥æœ‰æŸæä¾›æœåŠ¡ä»è€Œä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚ æœåŠ¡ç†”æ–­å°±æ˜¯å½“ä»ç¼“å­˜è·å–æ•°æ®å‘ç°å¼‚å¸¸ï¼Œåˆ™ç›´æ¥è¿”å›é”™è¯¯æ•°æ®ç»™å‰ç«¯ï¼Œé˜²æ­¢æ‰€æœ‰æµé‡æ‰“åˆ°æ•°æ®åº“å¯¼è‡´å®•æœºã€‚ æœåŠ¡ç†”æ–­å’Œé™æµå±äºåœ¨å‘ç”Ÿäº†ç¼“å­˜é›ªå´©ï¼Œå¦‚ä½•é™ä½é›ªå´©å¯¹æ•°æ®åº“é€ æˆçš„å½±å“çš„æ–¹æ¡ˆã€‚ é«˜å¯ç”¨ç¼“å­˜é›†ç¾¤ç¼“å­˜ç³»ç»Ÿä¸€å®šè¦æ„å»ºä¸€å¥— Redis é«˜å¯ç”¨é›†ç¾¤ï¼Œæ¯”å¦‚ Redis å“¨å…µé›†ç¾¤ TODO æˆ–è€… Redis Cluster é›†ç¾¤ TODOï¼Œå¦‚æœ Redis çš„ä¸»èŠ‚ç‚¹æ•…éšœå®•æœºäº†ï¼Œä»èŠ‚ç‚¹è¿˜å¯ä»¥åˆ‡æ¢æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œç»§ç»­æä¾›ç¼“å­˜æœåŠ¡ï¼Œé¿å…äº†ç”±äºç¼“å­˜å®ä¾‹å®•æœºè€Œå¯¼è‡´çš„ç¼“å­˜é›ªå´©é—®é¢˜ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:3:2","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#æœåŠ¡ç†”æ–­å’Œé™æµ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Redis æ•…éšœä¸€æ—¦ Redis æ•…éšœæˆ–å®•æœºï¼Œä¼šå¯¼è‡´å¤§é‡è¯·æ±‚æ‰“åˆ°æ•°æ®åº“ï¼Œä»è€Œå‘ç”Ÿç¼“å­˜é›ªå´©ã€‚å¯¹äº Redis æ•…éšœï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç§è§£å†³æ–¹æ¡ˆã€‚ æœåŠ¡ç†”æ–­å’Œé™æµåœ¨ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œé’ˆå¯¹é«˜å¹¶å‘çš„ä½¿ç”¨æœåŠ¡ç†”æ–­æ¥æœ‰æŸæä¾›æœåŠ¡ä»è€Œä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚ æœåŠ¡ç†”æ–­å°±æ˜¯å½“ä»ç¼“å­˜è·å–æ•°æ®å‘ç°å¼‚å¸¸ï¼Œåˆ™ç›´æ¥è¿”å›é”™è¯¯æ•°æ®ç»™å‰ç«¯ï¼Œé˜²æ­¢æ‰€æœ‰æµé‡æ‰“åˆ°æ•°æ®åº“å¯¼è‡´å®•æœºã€‚ æœåŠ¡ç†”æ–­å’Œé™æµå±äºåœ¨å‘ç”Ÿäº†ç¼“å­˜é›ªå´©ï¼Œå¦‚ä½•é™ä½é›ªå´©å¯¹æ•°æ®åº“é€ æˆçš„å½±å“çš„æ–¹æ¡ˆã€‚ é«˜å¯ç”¨ç¼“å­˜é›†ç¾¤ç¼“å­˜ç³»ç»Ÿä¸€å®šè¦æ„å»ºä¸€å¥— Redis é«˜å¯ç”¨é›†ç¾¤ï¼Œæ¯”å¦‚ Redis å“¨å…µé›†ç¾¤ TODO æˆ–è€… Redis Cluster é›†ç¾¤ TODOï¼Œå¦‚æœ Redis çš„ä¸»èŠ‚ç‚¹æ•…éšœå®•æœºäº†ï¼Œä»èŠ‚ç‚¹è¿˜å¯ä»¥åˆ‡æ¢æˆä¸ºä¸»èŠ‚ç‚¹ï¼Œç»§ç»­æä¾›ç¼“å­˜æœåŠ¡ï¼Œé¿å…äº†ç”±äºç¼“å­˜å®ä¾‹å®•æœºè€Œå¯¼è‡´çš„ç¼“å­˜é›ªå´©é—®é¢˜ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:3:2","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#é«˜å¯ç”¨ç¼“å­˜é›†ç¾¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ€»ç»“ ç¼“å­˜ç©¿é€æŒ‡çš„æ˜¯æ•°æ®åº“æœ¬å°±æ²¡æœ‰è¿™ä¸ªæ•°æ®ï¼Œè¯·æ±‚ç›´å¥”æ•°æ®åº“ï¼Œç¼“å­˜ç³»ç»Ÿå½¢åŒè™šè®¾ã€‚ ç¼“å­˜å‡»ç©¿ï¼ˆå¤±æ•ˆï¼‰æŒ‡çš„æ˜¯æ•°æ®åº“æœ‰æ•°æ®ï¼Œç¼“å­˜æœ¬åº”è¯¥ä¹Ÿæœ‰æ•°æ®ï¼Œä½†æ˜¯ç¼“å­˜è¿‡æœŸäº†ï¼ŒRedis è¿™å±‚æµé‡é˜²æŠ¤å±éšœè¢«å‡»ç©¿äº†ï¼Œè¯·æ±‚ç›´å¥”æ•°æ®åº“ã€‚ ç¼“å­˜é›ªå´©æŒ‡çš„æ˜¯å¤§é‡çš„çƒ­ç‚¹æ•°æ®æ— æ³•åœ¨ Redis ç¼“å­˜ä¸­å¤„ç†ï¼ˆå¤§é¢ç§¯çƒ­ç‚¹æ•°æ®ç¼“å­˜å¤±æ•ˆã€Redis å®•æœºï¼‰ï¼Œæµé‡å…¨éƒ¨æ‰“åˆ°æ•°æ®åº“ï¼Œå¯¼è‡´æ•°æ®åº“æå¤§å‹åŠ›ã€‚ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:4:0","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#æ€»ç»“"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Redis ç¼“å­˜å‡»ç©¿ï¼ˆå¤±æ•ˆï¼‰ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©æ€ä¹ˆè§£å†³ï¼Ÿ ","date":"2022-04-13","objectID":"/redis-break-pierce-avalanche/:5:0","series":["reproduce"],"tags":["redis"],"title":"Redis ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜ç©¿é€ã€ç¼“å­˜é›ªå´©","uri":"/redis-break-pierce-avalanche/#å‚è€ƒ"},{"categories":["golang"],"content":"golang GC åŸç†,Go åƒåœ¾å›æ”¶,Go åƒåœ¾æ ‡è®°æ¸…é™¤ç®—æ³•,golang ä¸‰è‰²æ ‡è®°æ³•,golang å±éšœæœºåˆ¶,go åƒåœ¾å›æ”¶ç®—æ³•,go æ’å…¥/åˆ é™¤å±éšœ,golang æ··åˆå†™å±éšœ,åƒåœ¾å›æ”¶ STW,STW","date":"2022-04-06","objectID":"/go-gc/","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/"},{"categories":["golang"],"content":"åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼ŒGCï¼‰æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­æä¾›çš„è‡ªåŠ¨çš„å†…å­˜ç®¡ç†æœºåˆ¶ï¼Œè‡ªåŠ¨é‡Šæ”¾ä¸éœ€è¦çš„å†…å­˜å¯¹è±¡ï¼Œè®©å‡ºå­˜å‚¨å™¨èµ„æºã€‚GC è¿‡ç¨‹ä¸­æ— éœ€ç¨‹åºå‘˜æ‰‹åŠ¨æ‰§è¡Œã€‚ GC æœºåˆ¶åœ¨ç°ä»£å¾ˆå¤šç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒï¼ŒGC èƒ½åŠ›çš„æ€§èƒ½ä¸ä¼˜åŠ£ä¹Ÿæ˜¯ä¸åŒè¯­è¨€ä¹‹é—´å¯¹æ¯”åº¦æŒ‡æ ‡ä¹‹ä¸€ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:0:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#"},{"categories":["golang"],"content":" GC å˜é©// TODO ","date":"2022-04-06","objectID":"/go-gc/:1:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#gc-å˜é©"},{"categories":["golang"],"content":" å †å’Œæ ˆæ ˆï¼šç”±æ“ä½œç³»ç»Ÿè‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚ å †ï¼šä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…å’Œé‡Šæ”¾ï¼Œè‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”± OS å›æ”¶ã€‚ æ ˆä½¿ç”¨çš„æ˜¯ä¸€çº§ç¼“å­˜ï¼Œä»–ä»¬é€šå¸¸éƒ½æ˜¯è¢«è°ƒç”¨æ—¶å¤„äºå­˜å‚¨ç©ºé—´ä¸­ï¼Œè°ƒç”¨å®Œæ¯•ç«‹å³é‡Šæ”¾ã€‚ å †åˆ™æ˜¯å­˜æ”¾åœ¨äºŒçº§ç¼“å­˜ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸç”±è™šæ‹Ÿæœºçš„åƒåœ¾å›æ”¶ç®—æ³•æ¥å†³å®šï¼Œä½†å¹¶ä¸æ˜¯ä¸€æ—¦æˆä¸ºå­¤å„¿å¯¹è±¡å°±èƒ½è¢«å›æ”¶ã€‚ ç”³è¯·åˆ°æ ˆå†…å­˜å¥½å¤„ï¼šå‡½æ•°è¿”å›ç›´æ¥é‡Šæ”¾ï¼Œä¸ä¼šå¼•èµ·åƒåœ¾å›æ”¶ï¼Œå¯¹æ€§èƒ½æ²¡æœ‰å½±å“ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:2:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#å †å’Œæ ˆ"},{"categories":["golang"],"content":" æ ‡è®°æ¸…é™¤ç®—æ³•Go V1.3 ä¹‹å‰ä½¿ç”¨æ™®é€šçš„æ ‡è®°-æ¸…é™¤mark and sweepç®—æ³•ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªä¸»è¦çš„æ­¥éª¤ï¼š æ ‡è®°(Mark phase)ï¼Œæ‰¾å‡ºä¸å¯è¾¾çš„å¯¹è±¡ï¼Œç„¶ååšä¸Šæ ‡è®°ã€‚ æ¸…é™¤(Sweep phase)ï¼Œå›æ”¶æ ‡è®°å¥½çš„å¯¹è±¡ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:3:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#æ ‡è®°æ¸…é™¤ç®—æ³•"},{"categories":["golang"],"content":" ç¬¬ä¸€æ­¥æš‚åœç¨‹åºä¸šåŠ¡é€»è¾‘ï¼Œ åˆ†ç±»å‡ºå¯è¾¾å’Œä¸å¯è¾¾çš„å¯¹è±¡ï¼Œç„¶ååšä¸Šæ ‡è®°ã€‚ ç¨‹åºä¸å¯¹è±¡çš„å¯è¾¾å…³ç³» ğŸ‘†å›¾ä¸­è¡¨ç¤ºæ˜¯ç¨‹åºä¸å¯¹è±¡çš„å¯è¾¾å…³ç³»ï¼Œç›®å‰ç¨‹åºçš„å¯è¾¾å¯¹è±¡æœ‰å¯¹è±¡ 1-2-3ï¼Œå¯¹è±¡ 4-7 ç­‰äº”ä¸ªå¯¹è±¡ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:3:1","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬ä¸€æ­¥"},{"categories":["golang"],"content":" ç¬¬äºŒæ­¥å¼€å§‹æ ‡è®°ï¼Œç¨‹åºæ‰¾å‡ºå®ƒæ‰€æœ‰å¯è¾¾çš„å¯¹è±¡ï¼Œå¹¶åšä¸Šæ ‡è®°ğŸ‘‡ã€‚ æ‰¾å‡ºå¯è¾¾å¯¹è±¡ å¯¹è±¡ 1-2-3 ã€å¯¹è±¡ 4-7 ç­‰äº”ä¸ªå¯¹è±¡è¢«åšä¸Šæ ‡è®°ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:3:2","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬äºŒæ­¥"},{"categories":["golang"],"content":" ç¬¬ä¸‰æ­¥æ ‡è®°å®Œäº†ä¹‹åï¼Œç„¶åå¼€å§‹æ¸…é™¤æœªæ ‡è®°çš„å¯¹è±¡ã€‚ æ¸…é™¤å¯¹è±¡ å¯¹è±¡ 5ï¼Œ6 ä¸å¯è¾¾ï¼Œè¢« GC æ¸…é™¤ã€‚ æ“ä½œç®€å•ï¼Œä½†æ˜¯ mark and sweep ç®—æ³•åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œéœ€è¦ç¨‹åºæš‚åœï¼å³ STWstop the worldï¼ŒSTW çš„è¿‡ç¨‹ä¸­ï¼ŒCPU ä¸æ‰§è¡Œç”¨æˆ·ä»£ç ï¼Œå…¨éƒ¨ç”¨äºåƒåœ¾å›æ”¶ï¼Œè¿™ä¸ªè¿‡ç¨‹çš„å½±å“å¾ˆå¤§ï¼Œæ‰€ä»¥ STW ä¹Ÿæ˜¯ä¸€äº›å›æ”¶æœºåˆ¶æœ€å¤§çš„éš¾é¢˜å’Œå¸Œæœ›ä¼˜åŒ–çš„ç‚¹ã€‚ åœ¨æ‰§è¡Œç¬¬ä¸‰æ­¥çš„è¿™æ®µæ—¶é—´ï¼Œç¨‹åºä¼šæš‚å®šåœæ­¢ä»»ä½•å·¥ä½œï¼Œå¡åœ¨é‚£ç­‰å¾…å›æ”¶æ‰§è¡Œå®Œæ¯•ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:3:3","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬ä¸‰æ­¥"},{"categories":["golang"],"content":" ç¬¬å››æ­¥åœæ­¢æš‚åœï¼Œè®©ç¨‹åºç»§ç»­æ‰§è¡Œã€‚ç„¶åå¾ªç¯é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ° process ç¨‹åºç”Ÿå‘½å‘¨æœŸç»“æŸã€‚ ","date":"2022-04-06","objectID":"/go-gc/:3:4","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬å››æ­¥"},{"categories":["golang"],"content":" ç¼ºç‚¹ä¸ä¼˜åŒ–æ ‡è®°æ¸…é™¤ç®—æ³•æ˜äº†ï¼Œè¿‡ç¨‹é²œæ˜å¹²è„†ï¼Œä½†æ˜¯ä¹Ÿæœ‰éå¸¸ä¸¥é‡çš„é—®é¢˜ï¼Œå°±æ˜¯ STWï¼Œè®©ç¨‹åºæš‚åœï¼Œç¨‹åºå‡ºç°å¡é¡¿ã€‚ Go V1.3 ç‰ˆæœ¬ä¹‹å‰å°±æ˜¯ç”¨è¿™ç§æ–¹å¼æ¥å®æ–½çš„ã€‚æ‰§è¡Œ GC çš„åŸºæœ¬æµç¨‹å°±æ˜¯é¦–å…ˆå¯åŠ¨ STW æš‚åœï¼Œç„¶åæ‰§è¡Œæ ‡è®°ï¼Œå†æ‰§è¡Œæ•°æ®å›æ”¶ï¼Œæœ€ååœæ­¢ STW ï¼Œå¦‚ä¸‹å›¾ğŸ‘‡ STW ä»ğŸ‘†æ¥çœ‹ï¼Œå…¨éƒ¨çš„ GC æ—¶é—´éƒ½æ˜¯åŒ…è£¹åœ¨ STW èŒƒå›´ä¹‹å†…çš„ï¼Œè¿™æ ·è²Œä¼¼ç¨‹åºæš‚åœçš„æ—¶é—´è¿‡é•¿ï¼Œå½±å“ç¨‹åºçš„è¿è¡Œæ€§èƒ½ã€‚æ‰€ä»¥Go V1.3 åšäº†ç®€å•çš„ä¼˜åŒ–ï¼Œå°† STW çš„æ­¥éª¤æå‰ï¼Œå‡å°‘ STW æš‚åœçš„æ—¶é—´èŒƒå›´ ğŸ‘‡ STWä¼˜åŒ– ä¸»è¦æ˜¯å°† STW çš„æ­¥éª¤æå‰äº†ä¸€æ­¥ï¼Œå› ä¸ºåœ¨ Sweep æ¸…é™¤çš„æ—¶å€™ï¼Œå¯ä»¥ä¸éœ€è¦ STW åœæ­¢ï¼Œå› ä¸ºè¿™äº›å¯¹è±¡å·²ç»æ˜¯ä¸å¯è¾¾å¯¹è±¡äº†ï¼Œä¸ä¼šå‡ºç°å›æ”¶å†™å†²çªç­‰é—®é¢˜ï¼Œæ¸…é™¤æ“ä½œå’Œç”¨æˆ·é€»è¾‘å¯ä»¥å¹¶å‘ã€‚ ä½†æ˜¯æ— è®ºæ€ä¹ˆä¼˜åŒ–ï¼ŒGo v1.3 éƒ½é¢ä¸´è¿™ä¸ªä¸€ä¸ªé‡è¦é—®é¢˜ï¼Œå°±æ˜¯ mark-and-sweep ç®—æ³•ä¼šæš‚åœæ•´ä¸ªç¨‹åº ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:3:5","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¼ºç‚¹ä¸ä¼˜åŒ–"},{"categories":["golang"],"content":" æœ‰STWçš„ä¸‰è‰²æ ‡è®°æ³•Go ä¸­çš„åƒåœ¾å›æ”¶ä¸»è¦åº”ç”¨ä¸‰è‰²æ ‡è®°æ³•ï¼ŒGC è¿‡ç¨‹å’Œå…¶ä»–ç”¨æˆ· goroutine å¯å¹¶å‘è¿è¡Œï¼Œä½†éœ€è¦ä¸€å®šæ—¶é—´çš„ STWã€‚ æ‰€è°“ä¸‰è‰²æ ‡è®°æ³•å®é™…ä¸Šå°±æ˜¯é€šè¿‡ä¸‰ä¸ªé˜¶æ®µçš„æ ‡è®°æ¥ç¡®å®šéœ€è¦æ¸…é™¤çš„å¯¹è±¡æœ‰å“ªäº›ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:4:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#æœ‰stwçš„ä¸‰è‰²æ ‡è®°æ³•"},{"categories":["golang"],"content":" ç¬¬ä¸€æ­¥æ¯æ¬¡æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œé»˜è®¤çš„é¢œè‰²éƒ½æ˜¯æ ‡è®°ä¸º â€œç™½è‰²â€ğŸ‘‡ ç™½è‰²å¯¹è±¡ ä¸Šå›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„ç¨‹åºå¯æŠµè¾¾çš„å†…å­˜å¯¹è±¡å…³ç³»å¦‚å·¦å›¾æ‰€ç¤ºï¼Œå³è¾¹çš„æ ‡è®°è¡¨æ˜¯ç”¨æ¥è®°å½•ç›®å‰æ¯ä¸ªå¯¹è±¡çš„æ ‡è®°é¢œè‰²åˆ†ç±»ã€‚è¿™é‡Œæ‰€è°“ â€œç¨‹åºâ€ï¼Œæ˜¯ä¸€äº›å¯¹è±¡çš„æ ¹èŠ‚ç‚¹é›†åˆã€‚å¦‚æœæˆ‘ä»¬å°† â€œç¨‹åºâ€ å±•å¼€ï¼Œä¼šå¾—åˆ°ç±»ä¼¼å¦‚ä¸‹çš„è¡¨ç°å½¢å¼ï¼š ç¨‹åºçš„æ ¹èŠ‚ç‚¹é›†åˆå±•å¼€ ","date":"2022-04-06","objectID":"/go-gc/:4:1","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬ä¸€æ­¥-1"},{"categories":["golang"],"content":" ç¬¬äºŒæ­¥æ¯æ¬¡ GC å›æ”¶å¼€å§‹ï¼Œ ä¼šä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ‰€æœ‰å¯¹è±¡ï¼ŒæŠŠéå†åˆ°çš„å¯¹è±¡ä»ç™½è‰²é›†åˆæ”¾å…¥ â€œç°è‰²â€ é›†åˆï¼š éå†æ ¹å¯¹è±¡ æœ¬æ¬¡éå†æ˜¯ä¸€æ¬¡éå†ï¼Œéé€’å½’å½¢å¼ï¼Œæ˜¯ä»ç¨‹åºåˆæ¬¡å¯æŠµè¾¾çš„å¯¹è±¡éå†ä¸€å±‚ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“å‰å¯æŠµè¾¾çš„å¯¹è±¡æ˜¯å¯¹è±¡1å’Œå¯¹è±¡4ï¼Œé‚£ä¹ˆè‡ªç„¶æœ¬è½®éå†ç»“æŸï¼Œå¯¹è±¡1å’Œå¯¹è±¡4å°±ä¼šè¢«æ ‡è®°ä¸ºç°è‰²ï¼Œç°è‰²æ ‡è®°è¡¨å°±ä¼šå¤šå‡ºè¿™ä¸¤ä¸ªå¯¹è±¡ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:4:2","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬äºŒæ­¥-1"},{"categories":["golang"],"content":" ç¬¬ä¸‰æ­¥éå†ç°è‰²é›†åˆï¼Œå°†ç°è‰²å¯¹è±¡å¼•ç”¨çš„å¯¹è±¡ä»ç™½è‰²é›†åˆæ”¾å…¥ç°è‰²é›†åˆï¼Œä¹‹åå°†æ­¤ç°è‰²å¯¹è±¡æ”¾å…¥é»‘è‰²é›†åˆï¼š éå†_2 è¿™ä¸€æ¬¡éå†æ˜¯åªæ‰«æç°è‰²å¯¹è±¡ï¼Œå°†ç°è‰²å¯¹è±¡çš„ç¬¬ä¸€å±‚éå†å¯æŠµè¾¾çš„å¯¹è±¡ç”±ç™½è‰²å˜ä¸ºç°è‰²ï¼Œå¦‚ï¼šå¯¹è±¡2ã€å¯¹è±¡7ã€‚ è€Œä¹‹å‰çš„ç°è‰²å¯¹è±¡1 å’Œå¯¹è±¡4 åˆ™ä¼šè¢«æ ‡è®°ä¸ºé»‘è‰²ï¼ŒåŒæ—¶ç”±ç°è‰²æ ‡è®°è¡¨ç§»åŠ¨åˆ°é»‘è‰²æ ‡è®°è¡¨ä¸­ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:4:3","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬ä¸‰æ­¥-1"},{"categories":["golang"],"content":" ç¬¬å››æ­¥é‡å¤ç¬¬ä¸‰æ­¥ï¼Œ ç›´åˆ°ç°è‰²ä¸­æ— ä»»ä½•å¯¹è±¡ï¼Œå¦‚å›¾ğŸ‘‡æ‰€ç¤ºï¼š éå†_3 éå†_4 å½“æˆ‘ä»¬å…¨éƒ¨çš„å¯è¾¾å¯¹è±¡éƒ½éå†å®Œåï¼Œç°è‰²æ ‡è®°è¡¨å°†ä¸å†å­˜åœ¨ç°è‰²å¯¹è±¡ã€‚ ç›®å‰å…¨éƒ¨å†…å­˜çš„æ•°æ®åªæœ‰ä¸¤ç§é¢œè‰²ï¼Œé»‘è‰²å’Œç™½è‰²ã€‚é‚£ä¹ˆï¼Œé»‘è‰²å¯¹è±¡å°±æ˜¯æˆ‘ä»¬ç¨‹åºé€»è¾‘å¯è¾¾ï¼ˆéœ€è¦çš„ï¼‰å¯¹è±¡ï¼Œè¿™äº›æ•°æ®æ˜¯ç›®å‰æ”¯æ’‘ç¨‹åºæ­£å¸¸ä¸šåŠ¡è¿è¡Œçš„ï¼Œæ˜¯åˆæ³•çš„æœ‰ç”¨æ•°æ®ï¼Œä¸å¯åˆ é™¤ã€‚ç™½è‰²çš„å¯¹è±¡æ˜¯å…¨éƒ¨ä¸å¯è¾¾å¯¹è±¡ï¼Œç›®å‰ç¨‹åºé€»è¾‘å¹¶ä¸ä¾èµ–ä»–ä»¬ï¼Œé‚£ä¹ˆç™½è‰²å¯¹è±¡å°±æ˜¯å†…å­˜ä¸­ç›®å‰çš„åƒåœ¾æ•°æ®ï¼Œéœ€è¦è¢«æ¸…é™¤ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:4:4","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬å››æ­¥-1"},{"categories":["golang"],"content":" ç¬¬äº”æ­¥å›æ”¶æ‰€æœ‰çš„ç™½è‰²æ ‡è®°è¡¨çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å›æ”¶åƒåœ¾ï¼Œå¦‚å›¾æ‰€ç¤ºğŸ‘‡ GC å›æ”¶ å°†å…¨éƒ¨çš„ç™½è‰²å¯¹è±¡è¿›è¡Œåˆ é™¤å›æ”¶ï¼Œå‰©ä¸‹çš„å°±æ˜¯å…¨éƒ¨ä¾èµ–çš„é»‘è‰²å¯¹è±¡ã€‚ è¿™é‡Œé¢å¯èƒ½ä¼šæœ‰å¾ˆå¤šå¹¶å‘æµç¨‹å‡ä¼šè¢«æ‰«æï¼Œæ‰§è¡Œå¹¶å‘æµç¨‹çš„å†…å­˜å¯èƒ½ç›¸äº’ä¾èµ–ï¼Œä¸ºäº†åœ¨ GC è¿‡ç¨‹ä¸­ä¿è¯æ•°æ®çš„å®‰å…¨ï¼Œåœ¨å¼€å§‹ä¸‰è‰²æ ‡è®°ä¹‹å‰å°±ä¼šåŠ ä¸Š STWï¼Œåœ¨æ‰«æç¡®å®šé»‘ç™½å¯¹è±¡ä¹‹åå†æ”¾å¼€ STWã€‚ä½†æ˜¯å¾ˆæ˜æ˜¾è¿™æ ·çš„ GC æ‰«æçš„æ€§èƒ½å®åœ¨æ˜¯å¤ªä½äº†ã€‚ æ‰€ä»¥ç°åœ¨çš„ä¸‰è‰²æ ‡è®°æ³•è¿˜æ˜¯ä¼š STWã€‚ ","date":"2022-04-06","objectID":"/go-gc/:4:5","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#ç¬¬äº”æ­¥"},{"categories":["golang"],"content":" æ²¡æœ‰STWçš„ä¸‰è‰²æ ‡è®°æ³•å¦‚æœæ²¡æœ‰ STWï¼Œé‚£ä¹ˆä¹Ÿå°±ä¸ä¼šå†å­˜åœ¨æ€§èƒ½ä¸Šçš„é—®é¢˜ï¼Œé‚£ä¹ˆå‡è®¾å¦‚æœä¸‰è‰²æ ‡è®°æ³•ä¸åŠ å…¥ STW ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…â“ è¿˜æ˜¯åŸºäºä¸Šè¿°çš„ä¸‰è‰²æ ‡è®°æ³•æ¥åˆ†æï¼Œä»–æ˜¯ä¸€å®šè¦ä¾èµ– STW çš„ï¼Œå› ä¸ºå¦‚æœä¸æš‚åœç¨‹åºï¼Œç¨‹åºçš„é€»è¾‘å¯èƒ½ä¼šæ”¹å˜å¯¹è±¡çš„å¼•ç”¨å…³ç³»ï¼Œè¿™ç§åŠ¨ä½œå¦‚æœåœ¨æ ‡è®°é˜¶æ®µåšäº†ä¿®æ”¹ï¼Œä¼šå½±å“æ ‡è®°ç»“æœçš„æ­£ç¡®æ€§ã€‚ æ¥çœ‹çœ‹ä¸€ä¸ªåœºæ™¯ï¼Œå¦‚æœä¸‰è‰²æ ‡è®°æ³•ï¼Œæ ‡è®°è¿‡ç¨‹ä¸ä½¿ç”¨ STW å°†ä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…â“ æˆ‘ä»¬æŠŠåˆå§‹çŠ¶æ€è®¾ç½®ä¸ºå·²ç»ç»å†äº†ç¬¬ä¸€è½®æ‰«æï¼Œç›®å‰é»‘è‰²çš„æœ‰å¯¹è±¡ 1 å’Œå¯¹è±¡ 4ï¼Œç°è‰²çš„æœ‰å¯¹è±¡ 2 å’Œå¯¹è±¡ 7ï¼Œå…¶ä»–çš„ä¸ºç™½è‰²å¯¹è±¡ï¼Œä¸”å¯¹è±¡ 2 æ˜¯é€šè¿‡æŒ‡é’ˆ p æŒ‡å‘å¯¹è±¡ 3 çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ no ST2 01 ç°åœ¨å¦‚æœä¸‰è‰²æ ‡è®°è¿‡ç¨‹ä¸å¯åŠ¨ STWï¼Œé‚£ä¹ˆåœ¨ GC æ‰«æè¿‡ç¨‹ä¸­ï¼Œä»»æ„çš„å¯¹è±¡å‡å¯èƒ½å‘ç”Ÿè¯»å†™æ“ä½œ ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåœ¨è¿˜æ²¡æœ‰æ‰«æåˆ°å¯¹è±¡ 2 çš„æ—¶å€™ï¼Œå·²ç»æ ‡è®°ä¸ºé»‘è‰²çš„å¯¹è±¡ 4ï¼Œæ­¤æ—¶åˆ›å»ºæŒ‡é’ˆ qï¼Œå¹¶ä¸”æŒ‡å‘ç™½è‰²çš„å¯¹è±¡ 3ã€‚ no ST2 02 ä¸æ­¤åŒæ—¶ç°è‰²çš„å¯¹è±¡ 2 å°†æŒ‡é’ˆ p ç§»é™¤ï¼Œé‚£ä¹ˆç™½è‰²çš„å¯¹è±¡ 3 å®åˆ™æ˜¯è¢«æŒ‚åœ¨äº†å·²ç»æ‰«æå®Œæˆçš„é»‘è‰²çš„å¯¹è±¡ 4 ä¸‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ no ST2 03 ç„¶åæˆ‘ä»¬æ­£å¸¸æ‰§è¡Œä¸‰è‰²æ ‡è®°çš„ç®—æ³•é€»è¾‘ï¼Œå°†æ‰€æœ‰ç°è‰²çš„å¯¹è±¡æ ‡è®°ä¸ºé»‘è‰²ï¼Œé‚£ä¹ˆå¯¹è±¡ 2 å’Œå¯¹è±¡ 7 å°±è¢«æ ‡è®°æˆäº†é»‘è‰²ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ no ST2 04 é‚£ä¹ˆå°±æ‰§è¡Œäº†ä¸‰è‰²æ ‡è®°çš„æœ€åä¸€æ­¥ï¼Œå°†æ‰€æœ‰ç™½è‰²å¯¹è±¡å½“åšåƒåœ¾è¿›è¡Œå›æ”¶ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ no ST2 05 æœ€åæˆ‘ä»¬å‘ç°ï¼Œæœ¬æ¥æ˜¯å¯¹è±¡4åˆæ³•å¼•ç”¨çš„å¯¹è±¡ 3ï¼Œå´è¢«GCç»™â€œè¯¯æ€â€å›æ”¶æ‰äº†ã€‚ å¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼Œåœ¨ä¸‰è‰²æ ‡è®°æ³•ä¸­æ˜¯ä¸å¸Œæœ›è¢«å‘ç”Ÿçš„ã€‚ ğŸ‘‰ ä¸€ä¸ªç™½è‰²å¯¹è±¡è¢«é»‘è‰²å¯¹è±¡å¼•ç”¨ ï¼ˆç™½è‰²è¢«æŒ‚åœ¨é»‘è‰²ä¸‹ï¼‰ ğŸ‘‰ ç°è‰²å¯¹è±¡ä¸å®ƒä¹‹é—´å¯è¾¾å…³ç³»çš„ç™½è‰²å¯¹è±¡é­åˆ°ç ´å ï¼ˆç°è‰²åŒæ—¶ä¸¢äº†è¯¥ç™½è‰²ï¼‰ å¦‚æœå½“ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³æ—¶ï¼Œå°±ä¼šå‡ºç°å¯¹è±¡ä¸¢å¤±ç°è±¡ï¼ ä¸‰è‰²æ ‡è®°å¯¹è±¡ä¸¢å¤± å¹¶ä¸”ï¼Œä¸Šé¢æ‰€ç¤ºçš„åœºæ™¯ä¸­ï¼Œå¦‚æœç¤ºä¾‹ä¸­çš„ç™½è‰²å¯¹è±¡3è¿˜æœ‰å¾ˆå¤šä¸‹æ¸¸å¯¹è±¡çš„è¯ï¼Œä¹Ÿä¼šä¸€å¹¶éƒ½æ¸…ç†æ‰ã€‚ ä¸ºäº†é˜²æ­¢è¿™ç§ç°è±¡çš„å‘ç”Ÿï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯ STWï¼Œç›´æ¥ç¦æ­¢æ‰å…¶ä»–ç”¨æˆ·ç¨‹åºå¯¹å¯¹è±¡å¼•ç”¨å…³ç³»çš„å¹²æ‰°ï¼Œä½†æ˜¯STWçš„è¿‡ç¨‹æœ‰æ˜æ˜¾çš„èµ„æºæµªè´¹ï¼Œå¯¹æ‰€æœ‰çš„ç”¨æˆ·ç¨‹åºéƒ½æœ‰å¾ˆå¤§å½±å“ã€‚ é‚£ä¹ˆæ˜¯å¦å¯ä»¥åœ¨ä¿è¯å¯¹è±¡ä¸ä¸¢å¤±çš„æƒ…å†µä¸‹åˆç†çš„å°½å¯èƒ½çš„æé«˜ GC æ•ˆç‡ï¼Œå‡å°‘ STW æ—¶é—´å‘¢â“ ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œæˆ‘ä»¬åªè¦ä½¿ç”¨ä¸€ç§æœºåˆ¶ï¼Œå°è¯•å»ç ´åä¸Šé¢çš„ä¸¤ä¸ªå¿…è¦æ¡ä»¶å°±å¯ä»¥äº†ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:5:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#æ²¡æœ‰stwçš„ä¸‰è‰²æ ‡è®°æ³•"},{"categories":["golang"],"content":" å±éšœæœºåˆ¶å¦‚æœè®© GC å›æ”¶å™¨ï¼Œæ»¡è¶³ä¸‹é¢ä¸¤ç§æƒ…å†µä¹‹ä¸€æ—¶ï¼Œå³å¯ä¿è¯å¯¹è±¡ä¸ä¸¢å¤±ã€‚è¿™ä¸¤ç§æ–¹å¼å°±æ˜¯å¼ºä¸‰è‰²ä¸å˜å¼å’Œå¼±ä¸‰è‰²ä¸å˜å¼ã€‚ å¼º/å¼±ä¸‰è‰²ä¸å˜å¼ ","date":"2022-04-06","objectID":"/go-gc/:6:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#å±éšœæœºåˆ¶"},{"categories":["golang"],"content":" å¼ºä¸‰è‰²ä¸å˜å¼å¼ºä¸‰è‰²ä¸å˜å¼å®é™…ä¸Šæ˜¯å¼ºåˆ¶æ€§çš„ä¸å…è®¸é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œè¿™æ ·å°±ä¸ä¼šå‡ºç°æœ‰ç™½è‰²å¯¹è±¡è¢«è¯¯åˆ çš„æƒ…å†µã€‚ å¼ºä¸‰è‰²ä¸å˜å¼ ","date":"2022-04-06","objectID":"/go-gc/:6:1","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#å¼ºä¸‰è‰²ä¸å˜å¼"},{"categories":["golang"],"content":" å¼±ä¸‰è‰²ä¸å˜å¼æ‰€æœ‰è¢«é»‘è‰²å¯¹è±¡å¼•ç”¨çš„ç™½è‰²å¯¹è±¡éƒ½å¤„äºç°è‰²ä¿æŠ¤çŠ¶æ€ã€‚ å¼±ä¸‰è‰²ä¸å˜å¼ å¼±ä¸‰è‰²ä¸å˜å¼å¼ºè°ƒï¼Œé»‘è‰²å¯¹è±¡å¯ä»¥å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸ªç™½è‰²å¯¹è±¡å¿…é¡»å­˜åœ¨å…¶ä»–ç°è‰²å¯¹è±¡å¯¹å®ƒçš„å¼•ç”¨ï¼Œæˆ–è€…å¯è¾¾å®ƒçš„é“¾è·¯ä¸Šæ¸¸å­˜åœ¨ç°è‰²å¯¹è±¡ã€‚è¿™æ ·å®åˆ™æ˜¯é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡ï¼Œç™½è‰²å¯¹è±¡å¤„äºä¸€ä¸ªå±é™©è¢«åˆ é™¤çš„çŠ¶æ€ï¼Œä½†æ˜¯ç”±äºä¸Šæ¸¸ç°è‰²å¯¹è±¡çš„å¼•ç”¨ï¼Œå¯ä»¥ä¿æŠ¤è¯¥ç™½è‰²å¯¹è±¡ï¼Œä½¿å…¶å®‰å…¨ã€‚ ä¸ºäº†éµå¾ªä¸Šè¿°çš„ä¸¤ä¸ªæ–¹å¼ï¼ŒGC ç®—æ³•æ¼”è¿›åˆ°ä¸¤ç§å±éšœæ–¹å¼ï¼Œåˆ†åˆ«æ˜¯æ’å…¥å±éšœå’Œåˆ é™¤å±éšœã€‚ ","date":"2022-04-06","objectID":"/go-gc/:6:2","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#å¼±ä¸‰è‰²ä¸å˜å¼"},{"categories":["golang"],"content":" æ’å…¥å±éšœå…·ä½“æ“ä½œï¼š åœ¨ A å¯¹è±¡å¼•ç”¨ B å¯¹è±¡çš„æ—¶å€™ï¼ŒB å¯¹è±¡è¢«æ ‡è®°ä¸ºç°è‰²ã€‚å°† B æŒ‚åœ¨ A ä¸‹æ¸¸ï¼ŒB å¿…é¡»è¢«æ ‡è®°ä¸ºç°è‰²ã€‚ æ»¡è¶³ï¼šå¼ºä¸‰è‰²ä¸å˜å¼ã€‚ä¸å­˜åœ¨é»‘è‰²å¯¹è±¡å¼•ç”¨ç™½è‰²å¯¹è±¡çš„æƒ…å†µäº†ï¼Œ å› ä¸ºç™½è‰²ä¼šå¼ºåˆ¶å˜æˆç°è‰²ã€‚ ä¼ªä»£ç å¦‚ä¸‹ï¼š æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(å½“å‰ä¸‹æ¸¸å¯¹è±¡slot, æ–°ä¸‹æ¸¸å¯¹è±¡ptr) { //1 æ ‡è®°ç°è‰²(æ–°ä¸‹æ¸¸å¯¹è±¡ptr) //2 å½“å‰ä¸‹æ¸¸å¯¹è±¡slot = æ–°ä¸‹æ¸¸å¯¹è±¡ptr } åœºæ™¯ï¼š A.æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(nil, B) //A ä¹‹å‰æ²¡æœ‰ä¸‹æ¸¸ï¼Œ æ–°æ·»åŠ ä¸€ä¸ªä¸‹æ¸¸å¯¹è±¡Bï¼Œ Bè¢«æ ‡è®°ä¸ºç°è‰² A.æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(C, B) //A å°†ä¸‹æ¸¸å¯¹è±¡C æ›´æ¢ä¸ºBï¼Œ Bè¢«æ ‡è®°ä¸ºç°è‰² è¿™æ®µä¼ªä»£ç é€»è¾‘å°±æ˜¯å†™å±éšœï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªæ€§èƒ½æŸè€—çš„åœ°æ–¹å°±æ˜¯æ¯æ¬¡æ·»åŠ å¥½æ’å…¥å¯¹è±¡éƒ½è¦å»åˆ¤æ–­ã€‚ é»‘è‰²å¯¹è±¡çš„å†…å­˜æ§½æœ‰ä¸¤ç§ä½ç½®ï¼Œæ ˆå’Œå †ã€‚ æ ˆç©ºé—´çš„ç‰¹ç‚¹æ˜¯å®¹é‡å°ï¼Œä½†æ˜¯è¦æ±‚å“åº”é€Ÿåº¦å¿«ï¼Œå› ä¸ºå‡½æ•°è°ƒç”¨å¼¹å‡ºé¢‘ç¹ä½¿ç”¨ï¼Œæ‰€ä»¥æ’å…¥å±éšœæœºåˆ¶ï¼Œåœ¨æ ˆç©ºé—´çš„å¯¹è±¡æ“ä½œä¸­ä¸ä½¿ç”¨ï¼Œè€Œä»…ä»…ä½¿ç”¨åœ¨å †ç©ºé—´å¯¹è±¡çš„æ“ä½œä¸­ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸‹æ•´ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½æ›´å¯è§‚çš„çœ‹æ¸…æ•´ä½“æµç¨‹ã€‚ æ’å…¥å±éšœ01 æ’å…¥å±éšœ02 æ’å…¥å±éšœ03 æ’å…¥å±éšœ04 æ’å…¥å±éšœ05 æ’å…¥å±éšœ06 ä½†æ˜¯å¦‚æœæ ˆä¸æ·»åŠ ï¼Œå½“å…¨éƒ¨ä¸‰è‰²æ ‡è®°æ‰«æä¹‹åï¼Œæ ˆä¸Šæœ‰å¯èƒ½ä¾ç„¶å­˜åœ¨ç™½è‰²å¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µï¼ˆå¦‚ä¸Šå›¾çš„å¯¹è±¡9ï¼‰ã€‚æ‰€ä»¥è¦å¯¹æ ˆé‡æ–°è¿›è¡Œä¸‰è‰²æ ‡è®°æ‰«æï¼Œä½†è¿™æ¬¡ä¸ºäº†å¯¹è±¡ä¸ä¸¢å¤±ï¼Œè¦å¯¹æœ¬æ¬¡æ ‡è®°æ‰«æå¯åŠ¨ STW æš‚åœï¼Œç›´åˆ°æ ˆç©ºé—´çš„ä¸‰è‰²æ ‡è®°ç»“æŸã€‚ æ’å…¥å±éšœ07 æ’å…¥å±éšœ08 æ’å…¥å±éšœ09 æœ€åå°†æ ˆå’Œå †ç©ºé—´æ‰«æå‰©ä½™çš„å…¨éƒ¨ç™½è‰²èŠ‚ç‚¹æ¸…é™¤ï¼Œè¿™æ¬¡ STW å¤§çº¦çš„æ—¶é—´åœ¨ 10~100ms é—´ã€‚è¿™ä¹Ÿæ˜¯æ’å…¥å†™å±éšœçš„ä¸è¶³ï¼Œå› ä¸ºè¿˜æ˜¯éœ€è¦ STWï¼Œè™½ç„¶æ—¶é—´å¾ˆçŸ­ã€‚ æ’å…¥å±éšœ10 ","date":"2022-04-06","objectID":"/go-gc/:6:3","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#æ’å…¥å±éšœ"},{"categories":["golang"],"content":" åˆ é™¤å±éšœå…·ä½“æ“ä½œï¼šè¢«åˆ é™¤çš„å¯¹è±¡ï¼Œå¦‚æœè‡ªèº«ä¸ºç°è‰²æˆ–è€…ç™½è‰²ï¼Œé‚£ä¹ˆè¢«æ ‡è®°ä¸ºç°è‰²ã€‚ æ»¡è¶³ï¼šå¼±ä¸‰è‰²ä¸å˜å¼ï¼Œä¿æŠ¤ç°è‰²å¯¹è±¡åˆ°ç™½è‰²å¯¹è±¡çš„è·¯å¾„ä¸ä¼šæ–­ã€‚ ä¼ªä»£ç ï¼š æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(å½“å‰ä¸‹æ¸¸å¯¹è±¡slotï¼Œ æ–°ä¸‹æ¸¸å¯¹è±¡ptr) { //1 if (å½“å‰ä¸‹æ¸¸å¯¹è±¡slotæ˜¯ç°è‰² || å½“å‰ä¸‹æ¸¸å¯¹è±¡slotæ˜¯ç™½è‰²) { æ ‡è®°ç°è‰²(å½“å‰ä¸‹æ¸¸å¯¹è±¡slot) //slotä¸ºè¢«åˆ é™¤å¯¹è±¡ï¼Œ æ ‡è®°ä¸ºç°è‰² } //2 å½“å‰ä¸‹æ¸¸å¯¹è±¡slot = æ–°ä¸‹æ¸¸å¯¹è±¡ptr } åœºæ™¯ï¼š A.æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(B, nil) //Aå¯¹è±¡ï¼Œåˆ é™¤Bå¯¹è±¡çš„å¼•ç”¨ã€‚ Bè¢«Aåˆ é™¤ï¼Œè¢«æ ‡è®°ä¸ºç°(å¦‚æœBä¹‹å‰ä¸ºç™½) A.æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(B, C) //Aå¯¹è±¡ï¼Œæ›´æ¢ä¸‹æ¸¸Bå˜æˆCã€‚ Bè¢«Aåˆ é™¤ï¼Œè¢«æ ‡è®°ä¸ºç°(å¦‚æœBä¹‹å‰ä¸ºç™½) æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿæ›´å¯è§‚çš„çœ‹æ¸…æ¥šæ•´ä½“æµç¨‹ã€‚ åˆ é™¤å±éšœ01 åˆ é™¤å±éšœ02 åˆ é™¤å±éšœ03 åˆ é™¤å±éšœ04 åˆ é™¤å±éšœ05 åˆ é™¤å±éšœ06 åˆ é™¤å±éšœ07 è¿™ç§æ–¹å¼çš„ä¸è¶³æ˜¯å›æ”¶ç²¾åº¦ä½ï¼Œä¸€ä¸ªå¯¹è±¡å³ä½¿è¢«åˆ é™¤äº†æœ€åä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆä¹Ÿä¾æ—§å¯ä»¥æ´»è¿‡è¿™ä¸€è½®ï¼Œåœ¨ä¸‹ä¸€è½® GC ä¸­è¢«æ¸…ç†æ‰ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:6:4","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#åˆ é™¤å±éšœ"},{"categories":["golang"],"content":" æ··åˆå†™å±éšœæ’å…¥å†™å±éšœå’Œåˆ é™¤å†™å±éšœçš„çŸ­æ¿ï¼š æ’å…¥å†™å±éšœï¼šç»“æŸæ—¶éœ€è¦ STW æ¥é‡æ–°æ‰«ææ ˆï¼Œæ ‡è®°æ ˆä¸Šå¼•ç”¨çš„ç™½è‰²å¯¹è±¡çš„å­˜æ´»ï¼Œå¤§çº¦éœ€è¦ 10-100msã€‚ åˆ é™¤å†™å±éšœï¼šå›æ”¶ç²¾åº¦ä½ï¼Œä¸€ä¸ªå¯¹è±¡å³ä½¿è¢«åˆ é™¤äº†æœ€åä¸€ä¸ªæŒ‡å‘å®ƒçš„æŒ‡é’ˆä¹Ÿä¾æ—§å¯ä»¥æ´»è¿‡è¿™ä¸€è½®ï¼Œåœ¨ä¸‹ä¸€è½® GC ä¸­è¢«æ¸…ç†æ‰ã€‚GC å¼€å§‹æ—¶ STW æ‰«æå †æ ˆæ¥è®°å½•åˆå§‹å¿«ç…§ï¼ˆç›‘æ§å¯¹è±¡çš„å†…å­˜ä¿®æ”¹ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦åˆ é™¤ï¼‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¿æŠ¤å¼€å§‹æ—¶åˆ»çš„æ‰€æœ‰å­˜æ´»å¯¹è±¡ã€‚ Go v1.8 ç‰ˆæœ¬å¼•å…¥äº†æ··åˆå†™å±éšœæœºåˆ¶hybrid write barrierï¼Œé¿å…äº†å¯¹æ ˆ re-scan çš„è¿‡ç¨‹ï¼Œæå¤§çš„å‡å°‘äº† STW çš„æ—¶é—´ï¼Œç»“åˆäº†ä¸¤è€…çš„ä¼˜ç‚¹ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:7:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#æ··åˆå†™å±éšœ"},{"categories":["golang"],"content":" è§„åˆ™å…·ä½“æ“ä½œï¼š GC å¼€å§‹å°†æ ˆä¸Šçš„å¯¹è±¡å…¨éƒ¨æ‰«æå¹¶æ ‡è®°ä¸ºé»‘è‰²ï¼ˆä¹‹åä¸å†è¿›è¡Œç¬¬äºŒæ¬¡é‡å¤æ‰«æï¼Œæ— éœ€ STW ï¼‰ã€‚ GC æœŸé—´ï¼Œä»»ä½•åœ¨æ ˆä¸Šåˆ›å»ºçš„æ–°å¯¹è±¡ï¼Œå‡ä¸ºé»‘è‰²ã€‚ è¢«åˆ é™¤çš„å¯¹è±¡æ ‡è®°ä¸ºç°è‰²ã€‚ è¢«æ·»åŠ çš„å¯¹è±¡æ ‡è®°ä¸ºç°è‰²ã€‚ æ»¡è¶³ï¼šå˜å½¢çš„å¼±ä¸‰è‰²ä¸å˜å¼ã€‚ ä¼ªä»£ç ï¼š æ·»åŠ ä¸‹æ¸¸å¯¹è±¡(å½“å‰ä¸‹æ¸¸å¯¹è±¡slot, æ–°ä¸‹æ¸¸å¯¹è±¡ptr) { //1 æ ‡è®°ç°è‰²(å½“å‰ä¸‹æ¸¸å¯¹è±¡slot) //åªè¦å½“å‰ä¸‹æ¸¸å¯¹è±¡è¢«ç§»èµ°ï¼Œå°±æ ‡è®°ç°è‰² //2 æ ‡è®°ç°è‰²(æ–°ä¸‹æ¸¸å¯¹è±¡ptr) //3 å½“å‰ä¸‹æ¸¸å¯¹è±¡slot = æ–°ä¸‹æ¸¸å¯¹è±¡ptr } å±éšœæŠ€æœ¯æ˜¯ä¸åœ¨æ ˆä¸Šåº”ç”¨çš„ï¼Œå› ä¸ºè¦ä¿è¯æ ˆçš„è¿è¡Œæ•ˆç‡ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:7:1","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#è§„åˆ™"},{"categories":["golang"],"content":" å…·ä½“åœºæ™¯æˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿæ›´å¯è§‚çš„çœ‹æ¸…æ¥šæ•´ä½“æµç¨‹ã€‚ æ··åˆå†™å±éšœæ˜¯ GC çš„ä¸€ç§å±éšœæœºåˆ¶ï¼Œæ‰€ä»¥åªæ˜¯å½“ç¨‹åºæ‰§è¡Œ GC çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘è¿™ç§æœºåˆ¶ã€‚ GCå¼€å§‹ï¼šä¼˜å…ˆæ‰«ææ ˆåŒºï¼Œå°†å¯è¾¾å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸ºé»‘ æ··åˆå†™å±éšœ01 æ··åˆå†™å±éšœ02 åœºæ™¯ä¸€å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç  //å‰æï¼šå †å¯¹è±¡4-\u003eå¯¹è±¡7 = å¯¹è±¡7ï¼› //å¯¹è±¡7 è¢« å¯¹è±¡4å¼•ç”¨ æ ˆå¯¹è±¡1-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ æ ˆå¯¹è±¡1 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯1-01 åœºæ™¯1-02 åœºæ™¯äºŒå¯¹è±¡è¢«ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š new æ ˆå¯¹è±¡9ï¼› å¯¹è±¡8-\u003eå¯¹è±¡3 = å¯¹è±¡3ï¼› //å°†æ ˆå¯¹è±¡3 æŒ‚åœ¨ æ ˆå¯¹è±¡9 ä¸‹æ¸¸ å¯¹è±¡2-\u003eå¯¹è±¡3 = nullï¼› //å¯¹è±¡2 åˆ é™¤å¼•ç”¨ å¯¹è±¡3 åœºæ™¯2-01 åœºæ™¯2-02 åœºæ™¯2-03 åœºæ™¯ä¸‰å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯3-01 åœºæ™¯3-02 åœºæ™¯3-03 åœºæ™¯å››å¯¹è±¡ä»ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯4-01 åœºæ™¯4-02 åœºæ™¯4-03 Go ä¸­çš„æ··åˆå†™å±éšœæ»¡è¶³å¼±ä¸‰è‰²ä¸å˜å¼ï¼Œç»“åˆäº†åˆ é™¤å†™å±éšœå’Œæ’å…¥å†™å±éšœçš„ä¼˜ç‚¹ï¼Œåªéœ€è¦åœ¨å¼€å§‹æ—¶å¹¶å‘æ‰«æå„ä¸ª goroutine çš„æ ˆï¼Œä½¿å…¶å˜é»‘å¹¶ä¸€ç›´ä¿æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ STWï¼Œè€Œæ ‡è®°ç»“æŸåï¼Œå› ä¸ºæ ˆåœ¨æ‰«æåå§‹ç»ˆæ˜¯é»‘è‰²çš„ï¼Œä¹Ÿæ— éœ€å†è¿›è¡Œ re-scan æ“ä½œäº†ï¼Œå‡å°‘äº† STW çš„æ—¶é—´ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:7:2","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#å…·ä½“åœºæ™¯"},{"categories":["golang"],"content":" å…·ä½“åœºæ™¯æˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿæ›´å¯è§‚çš„çœ‹æ¸…æ¥šæ•´ä½“æµç¨‹ã€‚ æ··åˆå†™å±éšœæ˜¯ GC çš„ä¸€ç§å±éšœæœºåˆ¶ï¼Œæ‰€ä»¥åªæ˜¯å½“ç¨‹åºæ‰§è¡Œ GC çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘è¿™ç§æœºåˆ¶ã€‚ GCå¼€å§‹ï¼šä¼˜å…ˆæ‰«ææ ˆåŒºï¼Œå°†å¯è¾¾å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸ºé»‘ æ··åˆå†™å±éšœ01 æ··åˆå†™å±éšœ02 åœºæ™¯ä¸€å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç  //å‰æï¼šå †å¯¹è±¡4-\u003eå¯¹è±¡7 = å¯¹è±¡7ï¼› //å¯¹è±¡7 è¢« å¯¹è±¡4å¼•ç”¨ æ ˆå¯¹è±¡1-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ æ ˆå¯¹è±¡1 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯1-01 åœºæ™¯1-02 åœºæ™¯äºŒå¯¹è±¡è¢«ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š new æ ˆå¯¹è±¡9ï¼› å¯¹è±¡8-\u003eå¯¹è±¡3 = å¯¹è±¡3ï¼› //å°†æ ˆå¯¹è±¡3 æŒ‚åœ¨ æ ˆå¯¹è±¡9 ä¸‹æ¸¸ å¯¹è±¡2-\u003eå¯¹è±¡3 = nullï¼› //å¯¹è±¡2 åˆ é™¤å¼•ç”¨ å¯¹è±¡3 åœºæ™¯2-01 åœºæ™¯2-02 åœºæ™¯2-03 åœºæ™¯ä¸‰å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯3-01 åœºæ™¯3-02 åœºæ™¯3-03 åœºæ™¯å››å¯¹è±¡ä»ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯4-01 åœºæ™¯4-02 åœºæ™¯4-03 Go ä¸­çš„æ··åˆå†™å±éšœæ»¡è¶³å¼±ä¸‰è‰²ä¸å˜å¼ï¼Œç»“åˆäº†åˆ é™¤å†™å±éšœå’Œæ’å…¥å†™å±éšœçš„ä¼˜ç‚¹ï¼Œåªéœ€è¦åœ¨å¼€å§‹æ—¶å¹¶å‘æ‰«æå„ä¸ª goroutine çš„æ ˆï¼Œä½¿å…¶å˜é»‘å¹¶ä¸€ç›´ä¿æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ STWï¼Œè€Œæ ‡è®°ç»“æŸåï¼Œå› ä¸ºæ ˆåœ¨æ‰«æåå§‹ç»ˆæ˜¯é»‘è‰²çš„ï¼Œä¹Ÿæ— éœ€å†è¿›è¡Œ re-scan æ“ä½œäº†ï¼Œå‡å°‘äº† STW çš„æ—¶é—´ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:7:2","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#åœºæ™¯ä¸€"},{"categories":["golang"],"content":" å…·ä½“åœºæ™¯æˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿæ›´å¯è§‚çš„çœ‹æ¸…æ¥šæ•´ä½“æµç¨‹ã€‚ æ··åˆå†™å±éšœæ˜¯ GC çš„ä¸€ç§å±éšœæœºåˆ¶ï¼Œæ‰€ä»¥åªæ˜¯å½“ç¨‹åºæ‰§è¡Œ GC çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘è¿™ç§æœºåˆ¶ã€‚ GCå¼€å§‹ï¼šä¼˜å…ˆæ‰«ææ ˆåŒºï¼Œå°†å¯è¾¾å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸ºé»‘ æ··åˆå†™å±éšœ01 æ··åˆå†™å±éšœ02 åœºæ™¯ä¸€å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç  //å‰æï¼šå †å¯¹è±¡4-\u003eå¯¹è±¡7 = å¯¹è±¡7ï¼› //å¯¹è±¡7 è¢« å¯¹è±¡4å¼•ç”¨ æ ˆå¯¹è±¡1-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ æ ˆå¯¹è±¡1 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯1-01 åœºæ™¯1-02 åœºæ™¯äºŒå¯¹è±¡è¢«ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š new æ ˆå¯¹è±¡9ï¼› å¯¹è±¡8-\u003eå¯¹è±¡3 = å¯¹è±¡3ï¼› //å°†æ ˆå¯¹è±¡3 æŒ‚åœ¨ æ ˆå¯¹è±¡9 ä¸‹æ¸¸ å¯¹è±¡2-\u003eå¯¹è±¡3 = nullï¼› //å¯¹è±¡2 åˆ é™¤å¼•ç”¨ å¯¹è±¡3 åœºæ™¯2-01 åœºæ™¯2-02 åœºæ™¯2-03 åœºæ™¯ä¸‰å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯3-01 åœºæ™¯3-02 åœºæ™¯3-03 åœºæ™¯å››å¯¹è±¡ä»ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯4-01 åœºæ™¯4-02 åœºæ™¯4-03 Go ä¸­çš„æ··åˆå†™å±éšœæ»¡è¶³å¼±ä¸‰è‰²ä¸å˜å¼ï¼Œç»“åˆäº†åˆ é™¤å†™å±éšœå’Œæ’å…¥å†™å±éšœçš„ä¼˜ç‚¹ï¼Œåªéœ€è¦åœ¨å¼€å§‹æ—¶å¹¶å‘æ‰«æå„ä¸ª goroutine çš„æ ˆï¼Œä½¿å…¶å˜é»‘å¹¶ä¸€ç›´ä¿æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ STWï¼Œè€Œæ ‡è®°ç»“æŸåï¼Œå› ä¸ºæ ˆåœ¨æ‰«æåå§‹ç»ˆæ˜¯é»‘è‰²çš„ï¼Œä¹Ÿæ— éœ€å†è¿›è¡Œ re-scan æ“ä½œäº†ï¼Œå‡å°‘äº† STW çš„æ—¶é—´ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:7:2","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#åœºæ™¯äºŒ"},{"categories":["golang"],"content":" å…·ä½“åœºæ™¯æˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿæ›´å¯è§‚çš„çœ‹æ¸…æ¥šæ•´ä½“æµç¨‹ã€‚ æ··åˆå†™å±éšœæ˜¯ GC çš„ä¸€ç§å±éšœæœºåˆ¶ï¼Œæ‰€ä»¥åªæ˜¯å½“ç¨‹åºæ‰§è¡Œ GC çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘è¿™ç§æœºåˆ¶ã€‚ GCå¼€å§‹ï¼šä¼˜å…ˆæ‰«ææ ˆåŒºï¼Œå°†å¯è¾¾å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸ºé»‘ æ··åˆå†™å±éšœ01 æ··åˆå†™å±éšœ02 åœºæ™¯ä¸€å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç  //å‰æï¼šå †å¯¹è±¡4-\u003eå¯¹è±¡7 = å¯¹è±¡7ï¼› //å¯¹è±¡7 è¢« å¯¹è±¡4å¼•ç”¨ æ ˆå¯¹è±¡1-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ æ ˆå¯¹è±¡1 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯1-01 åœºæ™¯1-02 åœºæ™¯äºŒå¯¹è±¡è¢«ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š new æ ˆå¯¹è±¡9ï¼› å¯¹è±¡8-\u003eå¯¹è±¡3 = å¯¹è±¡3ï¼› //å°†æ ˆå¯¹è±¡3 æŒ‚åœ¨ æ ˆå¯¹è±¡9 ä¸‹æ¸¸ å¯¹è±¡2-\u003eå¯¹è±¡3 = nullï¼› //å¯¹è±¡2 åˆ é™¤å¼•ç”¨ å¯¹è±¡3 åœºæ™¯2-01 åœºæ™¯2-02 åœºæ™¯2-03 åœºæ™¯ä¸‰å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯3-01 åœºæ™¯3-02 åœºæ™¯3-03 åœºæ™¯å››å¯¹è±¡ä»ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯4-01 åœºæ™¯4-02 åœºæ™¯4-03 Go ä¸­çš„æ··åˆå†™å±éšœæ»¡è¶³å¼±ä¸‰è‰²ä¸å˜å¼ï¼Œç»“åˆäº†åˆ é™¤å†™å±éšœå’Œæ’å…¥å†™å±éšœçš„ä¼˜ç‚¹ï¼Œåªéœ€è¦åœ¨å¼€å§‹æ—¶å¹¶å‘æ‰«æå„ä¸ª goroutine çš„æ ˆï¼Œä½¿å…¶å˜é»‘å¹¶ä¸€ç›´ä¿æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ STWï¼Œè€Œæ ‡è®°ç»“æŸåï¼Œå› ä¸ºæ ˆåœ¨æ‰«æåå§‹ç»ˆæ˜¯é»‘è‰²çš„ï¼Œä¹Ÿæ— éœ€å†è¿›è¡Œ re-scan æ“ä½œäº†ï¼Œå‡å°‘äº† STW çš„æ—¶é—´ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:7:2","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#åœºæ™¯ä¸‰"},{"categories":["golang"],"content":" å…·ä½“åœºæ™¯æˆ‘ä»¬ç”¨å‡ å¼ å›¾ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸ªè¯¦ç»†çš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¤Ÿæ›´å¯è§‚çš„çœ‹æ¸…æ¥šæ•´ä½“æµç¨‹ã€‚ æ··åˆå†™å±éšœæ˜¯ GC çš„ä¸€ç§å±éšœæœºåˆ¶ï¼Œæ‰€ä»¥åªæ˜¯å½“ç¨‹åºæ‰§è¡Œ GC çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘è¿™ç§æœºåˆ¶ã€‚ GCå¼€å§‹ï¼šä¼˜å…ˆæ‰«ææ ˆåŒºï¼Œå°†å¯è¾¾å¯¹è±¡å…¨éƒ¨æ ‡è®°ä¸ºé»‘ æ··åˆå†™å±éšœ01 æ··åˆå†™å±éšœ02 åœºæ™¯ä¸€å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç  //å‰æï¼šå †å¯¹è±¡4-\u003eå¯¹è±¡7 = å¯¹è±¡7ï¼› //å¯¹è±¡7 è¢« å¯¹è±¡4å¼•ç”¨ æ ˆå¯¹è±¡1-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ æ ˆå¯¹è±¡1 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯1-01 åœºæ™¯1-02 åœºæ™¯äºŒå¯¹è±¡è¢«ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªæ ˆå¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š new æ ˆå¯¹è±¡9ï¼› å¯¹è±¡8-\u003eå¯¹è±¡3 = å¯¹è±¡3ï¼› //å°†æ ˆå¯¹è±¡3 æŒ‚åœ¨ æ ˆå¯¹è±¡9 ä¸‹æ¸¸ å¯¹è±¡2-\u003eå¯¹è±¡3 = nullï¼› //å¯¹è±¡2 åˆ é™¤å¼•ç”¨ å¯¹è±¡3 åœºæ™¯2-01 åœºæ™¯2-02 åœºæ™¯2-03 åœºæ™¯ä¸‰å¯¹è±¡è¢«ä¸€ä¸ªå †å¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯3-01 åœºæ™¯3-02 åœºæ™¯3-03 åœºæ™¯å››å¯¹è±¡ä»ä¸€ä¸ªæ ˆå¯¹è±¡åˆ é™¤å¼•ç”¨ï¼Œæˆä¸ºå¦ä¸€ä¸ªå †å¯¹è±¡çš„ä¸‹æ¸¸ã€‚ ä¼ªä»£ç ï¼š å †å¯¹è±¡10-\u003eå¯¹è±¡7 = å †å¯¹è±¡7ï¼› //å°†å †å¯¹è±¡7 æŒ‚åœ¨ å †å¯¹è±¡10 ä¸‹æ¸¸ å †å¯¹è±¡4-\u003eå¯¹è±¡7 = nullï¼› //å¯¹è±¡4 åˆ é™¤å¼•ç”¨ å¯¹è±¡7 åœºæ™¯4-01 åœºæ™¯4-02 åœºæ™¯4-03 Go ä¸­çš„æ··åˆå†™å±éšœæ»¡è¶³å¼±ä¸‰è‰²ä¸å˜å¼ï¼Œç»“åˆäº†åˆ é™¤å†™å±éšœå’Œæ’å…¥å†™å±éšœçš„ä¼˜ç‚¹ï¼Œåªéœ€è¦åœ¨å¼€å§‹æ—¶å¹¶å‘æ‰«æå„ä¸ª goroutine çš„æ ˆï¼Œä½¿å…¶å˜é»‘å¹¶ä¸€ç›´ä¿æŒï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦ STWï¼Œè€Œæ ‡è®°ç»“æŸåï¼Œå› ä¸ºæ ˆåœ¨æ‰«æåå§‹ç»ˆæ˜¯é»‘è‰²çš„ï¼Œä¹Ÿæ— éœ€å†è¿›è¡Œ re-scan æ“ä½œäº†ï¼Œå‡å°‘äº† STW çš„æ—¶é—´ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:7:2","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#åœºæ™¯å››"},{"categories":["golang"],"content":" æ€»ç»“GoV1.3ï¼šæ™®é€šæ ‡è®°æ¸…é™¤æ³•ï¼Œæ•´ä½“è¿‡ç¨‹éœ€è¦å¯åŠ¨ STWï¼Œæ•ˆç‡æä½ã€‚ GoV1.5ï¼šä¸‰è‰²æ ‡è®°æ³•ï¼Œå †ç©ºé—´å¯åŠ¨å†™å±éšœï¼Œæ ˆç©ºé—´ä¸å¯åŠ¨ï¼Œå…¨éƒ¨æ‰«æä¹‹åï¼Œéœ€è¦é‡æ–°æ‰«æä¸€æ¬¡æ ˆ(éœ€è¦ STW )ï¼Œæ•ˆç‡æ™®é€šã€‚ GoV1.8ï¼šä¸‰è‰²æ ‡è®°æ³•ï¼Œæ··åˆå†™å±éšœæœºåˆ¶ï¼Œ æ ˆç©ºé—´ä¸å¯åŠ¨ï¼Œå †ç©ºé—´å¯åŠ¨ã€‚æ•´ä¸ªè¿‡ç¨‹å‡ ä¹ä¸éœ€è¦STWï¼Œæ•ˆç‡è¾ƒé«˜ã€‚ ","date":"2022-04-06","objectID":"/go-gc/:8:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#æ€»ç»“"},{"categories":["golang"],"content":" å‚è€ƒ ä¸€æ–‡å¼„æ‡‚ Golang GCã€ä¸‰è‰²æ ‡è®°ã€æ··åˆå†™å±éšœæœºåˆ¶ Golangä¸‰è‰²æ ‡è®°+æ··åˆå†™å±éšœGCæ¨¡å¼å…¨åˆ†æ Golangä¸­GCå›æ”¶æœºåˆ¶ä¸‰è‰²æ ‡è®°ä¸æ··åˆå†™å±éšœ ","date":"2022-04-06","objectID":"/go-gc/:9:0","series":["reproduce"],"tags":["golang","GC"],"title":"Go GC åƒåœ¾å›æ”¶","uri":"/go-gc/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"github actions replace env vars in file, å°†é…ç½®æ–‡ä»¶ä¸­çš„å˜é‡æ›¿æ¢ä¸ºç¯å¢ƒå˜é‡,github actions,github actions æ›¿æ¢é…ç½®æ–‡ä»¶","date":"2022-04-02","objectID":"/github-actions-replace-env-vars-in-file/","series":null,"tags":["github-actions"],"title":"Github Actions replace env vars in file","uri":"/github-actions-replace-env-vars-in-file/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"Github Actions æ˜¯ä¸ªå¥½ä¸œè¥¿ğŸ˜€ï¼Œæœ€è¿‘åœ¨ä½¿ç”¨çš„æ—¶å€™æœ‰ä¸ªéœ€æ±‚æ˜¯ï¼Œæˆ‘é¡¹ç›®ä¸æƒ³æŠŠè®¾ç½®æˆç§æœ‰çš„ï¼Œä½†æ˜¯æœ‰äº›é…ç½®åˆæ¯”è¾ƒç§å¯†ï¼Œæ¯”å¦‚ github çš„ Personal access tokenï¼Œè¿™ç§é…ç½®å°±ä¸èƒ½æš´éœ²å‡ºæ¥ã€‚ å‘ƒï¼Œè¿™ç§éœ€æ±‚å‰è¾ˆä»¬ä¼°è®¡ä¹Ÿé‡åˆ°è¿‡ï¼Œgithub actions marketplace æ˜¯ä¸ªå¥½åœ°æ–¹ï¼Œæˆ‘å»é‡Œé¢æœäº†æœï¼Œæœç„¶æœ‰å¾ˆå¤šè½®å­ï¼Œä½†æ˜¯ä¸çŸ¥é“èƒ½ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚ marketplace ","date":"2022-04-02","objectID":"/github-actions-replace-env-vars-in-file/:0:0","series":null,"tags":["github-actions"],"title":"Github Actions replace env vars in file","uri":"/github-actions-replace-env-vars-in-file/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" replace-env-vars-in-fileReplace env vars in file æ˜¯æˆ‘é€‰ä¸­çš„ä¸€ä¸ªè½®å­ã€‚ Replace env vars in file Replace env vars in file çš„æ–‡æ¡£å°±ä¸€å¥è¯ï¼Œ Replaces __TOKENS__ with environment variables in file. æˆ‘åˆšå¼€å§‹è¿˜ä¸å¤ªç†è§£ã€‚ å¥½å§ï¼Œå…¶å®æ˜¯æ‰€æœ‰çš„ç¯å¢ƒå˜é‡éƒ½å¿…é¡»ä»¥__å¼€å¤´ï¼Œç„¶åä»¥__ç»“å°¾ï¼Œè¿™æ ·æ‰èƒ½è¢«æ›¿æ¢ã€‚ æˆ‘åœ¨é¡¹ç›®ä¸­æ˜¯è¿™æ ·ä½¿ç”¨çš„ï¼š é…ç½®æ–‡ä»¶ action ä¸­æ›¿æ¢ å…·ä½“å¯ä»¥å‚çœ‹ config.toml é…ç½®æ–‡ä»¶ ï¼Œworkflows å·¥ä½œæµ ","date":"2022-04-02","objectID":"/github-actions-replace-env-vars-in-file/:1:0","series":null,"tags":["github-actions"],"title":"Github Actions replace env vars in file","uri":"/github-actions-replace-env-vars-in-file/#replace-env-vars-in-file"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" simple-template-renderersimple-template-renderer ç›¸æ¯” Replace env vars in file æœ‰ä¸ªæ˜æ˜¾çš„ä¼˜åŠ¿ï¼Œsimple-template-renderer æ”¯æŒ html æ ¼å¼ï¼Œreplace-env-vars-in-file ä¸æ”¯æŒğŸ˜¢ã€‚ æ¯”å¦‚æºæ–‡ä»¶ä¸­æœ‰ icp = \"${ICP}\" è¿™ä¸ªå˜é‡ï¼Œéœ€è¦æŠŠ ${ICP} æ›¿æ¢æˆä¸€ä¸ª html çš„å˜é‡ï¼š ICP: \"\u003ca href=https://beian.miit.gov.cn/ target=_blank\u003eäº¬ICPå¤‡16062974å·-1\u003c/a\u003e\" simple-template-renderer ","date":"2022-04-02","objectID":"/github-actions-replace-env-vars-in-file/:2:0","series":null,"tags":["github-actions"],"title":"Github Actions replace env vars in file","uri":"/github-actions-replace-env-vars-in-file/#simple-template-renderer"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"Gitalk åˆå§‹åŒ– issue,Gitalk,è‡ªåŠ¨åŒ–,init issue,python è„šæœ¬è‡ªåŠ¨åˆå§‹ gitalk issue,hugo ä¸»é¢˜,hugo theme","date":"2022-04-01","objectID":"/gitalk-init-issue/","series":null,"tags":["gitalk","python","hugo"],"title":"Gitalk åˆå§‹åŒ– issue","uri":"/gitalk-init-issue/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"åœ¨ç”¨ Gitalk ä½œä¸ºä¸ªäººåšå®¢è¯„è®ºç³»ç»Ÿæ—¶ï¼Œå‘ç°æœ‰ä¸ªæ¶å¿ƒçš„ç‚¹æ˜¯ï¼Œæ¯ç¯‡æ–‡ç« å¿…é¡»æ‰‹åŠ¨åˆå§‹åŒ–ä¸€ä¸ª issue æˆ–æ˜¯ç™»å½• github åï¼ŒæŠŠæ–‡ç« ä¸€ä¸ªä¸€ä¸ªç‚¹å¼€ç•Œé¢å»åˆå§‹åŒ– issueï¼Œä¸ç„¶å°±ä¼šå‡ºç°ä»¥ä¸‹çš„æç¤º no issus ä¸ªäººè§‰å¾—è¿™ä»¶äº‹æƒ…éå¸¸éº»çƒ¦ï¼ŒGitalk ä½¿ç”¨ labels æ¥æ˜ å°„ issuseï¼Œå¯ä»¥çœ‹ä¸‹æˆ‘ç”¨çš„ä¸»é¢˜ Gitalk åœ¨åˆå§‹åŒ–è¯„è®ºæ—¶å‘å‡ºçš„ç½‘ç»œè¯·æ±‚ åˆ›å»º issue çš„è¯·æ±‚ labels ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ Gitalkï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ç« çš„å‘å¸ƒæ—¶é—´ï¼Œå‘ƒï¼Œæ„Ÿè§‰æ”¹æˆæ–‡ç« çš„ path ä¼šæ›´å¥½ï¼Œä½†æ˜¯ github label çš„æœ€å¤§é•¿åº¦æ˜¯ 50 ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥æŠŠ path md5 ä¼šæ›´å¥½ã€‚æˆ‘çœ‹äº†ä¸‹æºç ä¿®æ”¹æˆäº† URL path çš„ md5 æ ¼å¼ themes/LoveIt/layouts/partials/comment.html comment id åˆå§‹å·¥ä½œåšå®Œï¼Œå°±å¯ä»¥å†™è„šæœ¬äº†ã€‚ ","date":"2022-04-01","objectID":"/gitalk-init-issue/:0:0","series":null,"tags":["gitalk","python","hugo"],"title":"Gitalk åˆå§‹åŒ– issue","uri":"/gitalk-init-issue/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆ†ææˆ‘ä»¬è¦åšçš„äº‹å…¶å®å°±æ˜¯ç»™æ¯ç¯‡æ–°æ–‡ç« åˆå§‹åŒ–ä¸€ä¸ª issueï¼Œå¯ä»¥ç”¨ github Actions æ¥åšè¿™ä»¶äº‹ã€‚ åˆå§‹åŒ– issue å¤§è‡´é€»è¾‘ è¿™é‡Œæœ‰å‡ ä¸ªç¨å¾®éº»çƒ¦çš„åœ°æ–¹ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„å®ç°æ–¹æ¡ˆï¼Œä»…ä»…æ˜¯æä¾›ä¸€ä¸ªæ€è·¯ã€‚ ","date":"2022-04-01","objectID":"/gitalk-init-issue/:1:0","series":null,"tags":["gitalk","python","hugo"],"title":"Gitalk åˆå§‹åŒ– issue","uri":"/gitalk-init-issue/#åˆ†æ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è·å–æ‰€æœ‰æ–‡ç« ä¿¡æ¯æ€ä¹ˆè·å–æ‰€æœ‰çš„æ–‡ç« â“ï¼Œæˆ‘ç”¨çš„ LoveIt ä¸»é¢˜åœ¨ build æ—¶åœ¨ public ç›®å½•é‡Œä¼šæœ‰ä¸€ä¸ª index.json æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«äº†æ‰€æœ‰çš„æ–‡ç« çš„ä¿¡æ¯ã€‚ public index.json å…¶ä»–çš„ä¸»é¢˜å¯ä»¥ä½¿ç”¨ sitemap.xml æ¥è·å–æ‰€æœ‰çš„æ–‡ç« ä¿¡æ¯ï¼Œhugo åœ¨ build æ—¶ä¼šç”Ÿæˆ sitemap.xml æ–‡ä»¶ã€‚ sitemap.xml ","date":"2022-04-01","objectID":"/gitalk-init-issue/:1:1","series":null,"tags":["gitalk","python","hugo"],"title":"Gitalk åˆå§‹åŒ– issue","uri":"/gitalk-init-issue/#è·å–æ‰€æœ‰æ–‡ç« ä¿¡æ¯"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" issue å¦‚ä½•åˆå§‹åŒ– issueå†…å®¹ å¦‚ä¸Šæˆªå›¾ğŸ‘†æ˜¯æˆ‘åˆ›å»ºçš„ issue å†…å®¹ã€‚body æ˜¯æ–‡ç« çš„ URLï¼Œtitle æ˜¯æ–‡ç« æ ‡é¢˜ï¼Œlabels æœ‰ Gitalk å’Œæ–‡ç« çš„ URL path çš„ md5 ä¸¤ä¸ªã€‚é‚£ä¹ˆé—®é¢˜å°±ç®€å•äº†ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™æ¯ç¯‡æ–‡ç« åˆå§‹åŒ–ä¸€ä¸ªè¿™æ ·çš„ issue å°±å¯ä»¥äº†ã€‚ å›ºå®šæ–‡ç« çš„ URL ä¸ºå”¯ä¸€æ ‡è¯†ï¼Œç»„æˆä¸¤ä¸ª map ï¼Œmap é”®å°±æ˜¯æ–‡ç« çš„ URLã€‚ä¸€ä¸ª map æ˜¯ github å·²å­˜åœ¨çš„ issue æš‚å®šä¸º issue_mapï¼Œä¸€ä¸ª map æ˜¯æˆ‘ä»¬æ‰€æœ‰æ–‡ç« çš„ map æš‚å®šä¸º posts_map ï¼ŒURL åœ¨ posts_map ä¸­å­˜åœ¨ä½†æ˜¯ issue_map ä¸å­˜åœ¨çš„å°±æ˜¯æ–°å¢ ã€‚URL åœ¨ posts_map å’Œ issue_map ä¸­éƒ½å­˜åœ¨ä½†æ˜¯ posts_map ä¸­çš„æ ‡é¢˜è·Ÿ issue_map ä¸­çš„æ ‡é¢˜ä¸ç›¸åŒå¯èƒ½å°±æ˜¯æ–‡ç« æ ‡é¢˜è¢«ä¿®æ”¹äº†ã€‚ å¯¹äºæ–°çš„ URL æˆ‘çš„åšæ³•æ˜¯æ‰¿è®¤å®ƒæ˜¯æ–°æ–‡ç« ï¼Œæˆ–æ˜¯æ—§æ–‡ç« çš„ URL è¢«ä¿®æ”¹äº†é‚£åªèƒ½å» github æ‰‹åŠ¨ä¿®æ”¹ issue body ä¸ºæ–°çš„ URL, label ä¸ºæ–°çš„ uri çš„ md5 å€¼ã€‚ ","date":"2022-04-01","objectID":"/gitalk-init-issue/:1:2","series":null,"tags":["gitalk","python","hugo"],"title":"Gitalk åˆå§‹åŒ– issue","uri":"/gitalk-init-issue/#issue-å¦‚ä½•åˆå§‹åŒ–"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" python è„šæœ¬å®ç° import hashlib import json import sys import time import requests site_url = \"https://xiaobinqt.github.io\" if len(sys.argv) != 4: print(\"Usage:\") print(sys.argv[0], \"token username repo_name\") sys.exit(1) # issue çš„ body å°±æ˜¯æ–‡ç« çš„ URL token = sys.argv[1] username = sys.argv[2] repo_name = sys.argv[3] issue_map = dict() ## [issue_body] = {\"issue_number\": issue_number, \"issue_title\": issue_title} posts_map = dict() # [post_url] = {\"post_uri\":uri,\"post_date\":date,\"post_title\":title} def get_all_gitalk_issues(token, username, repo_name): for i in range(1, 150): # 15000 ä¸ª issue åŸºæœ¬å¤Ÿç”¨äº†,ä¸å¤Ÿå¯ä»¥å†åŠ  _, ret = get_issues_page(i) time.sleep(5) if ret == -1: break ## åˆ é™¤çš„æ–‡ç« ä¸ç®¡.... ## æ–‡ç«  title ä¿®æ”¹äº†çš„æ–‡ç« è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ æ ‡é¢˜å¯èƒ½ä¿®æ”¹,ä½†æ˜¯ uri ä¸å˜,issue çš„ body æ˜¯æ–‡ç« åœ°å€,åªè¦æ–‡ç« åœ°å€ä¸å˜ï¼Œå°±å¯ä»¥ç›´æ¥ update issue title ## uri å¦‚æœä¹Ÿå˜äº†ï¼Œç›¸å½“äºæ˜¯æ–‡ä»¶çš„é‡å‘½åäº†ï¼Œè¿™æ—¶åªèƒ½å»æ‰‹åŠ¨ update issue title äº†?..... def update_issue(issue_number, title): if title == \"\": return url = 'https://api.github.com/repos/%s/%s/issues/%d' % (username, repo_name, issue_number) print(\"update_issue url: %s\" % url) data = { 'title': title, } print(\"create_issue req json: %s\" % json.dumps(data)) r = requests.patch(url, data=json.dumps(data), headers={ \"Authorization\": \"token %s\" % token, }, verify=False) if r.status_code == 200: print(\"update_issue success\") else: print(\"update_issue fail, status_code: %d,title: %s,issue_number: %d\" % (r.status_code, title, issue_number)) # è·å–æ‰€æœ‰ label ä¸º gitalk çš„ issue def get_issues_page(page=1): url = 'https://api.github.com/repos/%s/%s/issues?labels=Gitalk\u0026per_page=100\u0026page=%d' % (username, repo_name, page) print(\"get_issues url: %s\" % url) r = requests.get(url, headers={ \"Authorization\": \"token %s\" % token, \"Accept\": \"application/vnd.github.v3+json\" }) if r.status_code != 200: print(\"get_issues_page fail, status_code: %d\" % r.status_code) sys.exit(2) if r.json() == []: return (issue_map, -1) for issue in r.json(): if issue['body'] not in issue_map and issue[\"body\"] != \"\": issue_map[issue['body']] = { \"issue_number\": issue['number'], \"issue_title\": issue['title'] } return (issue_map, 0) # é€šè¿‡ public/index.json è·å–æ‰€æœ‰çš„æ–‡ç«  def get_post_titles(): with open(file='public/index.json', mode='r', encoding='utf-8') as f: file_data = f.read() if file_data == \"\" or file_data == [] or file_data == {}: return posts_map file_data = json.loads(file_data) for data in file_data: key = \"%s%s\" % (site_url, data['uri']) if key not in posts_map: posts_map[key] = { \"post_uri\": data['uri'], \"post_date\": data['date'], \"post_title\": data['title'] } return posts_map def create_issue(title=\"\", uri=\"\", date=\"\"): if title == \"\": return url = 'https://api.github.com/repos/%s/%s/issues' % (username, repo_name) print(\"create_issue title: %s uri: %s date: %s\" % (title, uri, date)) m = hashlib.md5() m.update(uri.encode('utf-8')) urlmd5 = m.hexdigest() data = { 'title': title, 'body': '%s%s' % (site_url, uri), 'labels': [ 'Gitalk', urlmd5 ] } print(\"create_issue req json: %s\" % json.dumps(data)) r = requests.post(url, data=json.dumps(data), headers={ \"Authorization\": \"token %s\" % token, }) if r.status_code == 201: print(\"create_issue success\") else: print(\"create_issue fail, status_code: %d,title: %s,req url: %s \\n\" % (r.status_code, title, url)) # åˆ›å»º gitalk åˆ›å»º issue,å¦‚æœ issue å·²ç»å­˜åœ¨ï¼Œåˆ™ä¸åˆ›å»º def init_gitalk(): for post_url, item in posts_map.items(): ## æ ‡é¢˜è¢«ä¿®æ”¹äº† if post_url in issue_map and item['post_title'] != issue_map[post_url]['issue_title']: update_issue(issue_map[post_url][\"issue_number\"], item['post_title']) elif post_url not in issue_map: # æ–°å¢çš„æ–‡ç«  print(\"title: [%s] , body [%s] issue ä¸å­˜åœ¨,åˆ›å»º...\" % (item[\"post_title\"], post_url)) create_issue(item[\"post_title\"], item[\"post_uri\"], item[\"post_date\"]) # å»¶è¿Ÿ 5 ç§’ï¼Œé˜²æ­¢ github api è¯·æ±‚è¿‡äºé¢‘ç¹ï¼š https://docs.github.com/en/rest/guides/best-practices-for-integrators#dealing-with-secondary-rate-limits time.sleep(5) def get_uri_md5(uri): m = hashlib.md5() m.update(uri.encode('utf-8')) return m.hexdigest() if __name__ == \"__main__\": # print(get_uri_md5(\"/gmp-model/\")) ## æ‰§è¡Œ.... get_all_gitalk_issues(token, userna","date":"2022-04-01","objectID":"/gitalk-init-issue/:2:0","series":null,"tags":["gitalk","python","hugo"],"title":"Gitalk åˆå§‹åŒ– issue","uri":"/gitalk-init-issue/#python-è„šæœ¬å®ç°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ è‡ªåŠ¨åˆå§‹åŒ– Gitalk å’Œ Gitment è¯„è®º åˆ©ç”¨ Github Action è‡ªåŠ¨åˆå§‹åŒ– Gitalk è¯„è®ºä¹‹Pythonç¯‡ ","date":"2022-04-01","objectID":"/gitalk-init-issue/:3:0","series":null,"tags":["gitalk","python","hugo"],"title":"Gitalk åˆå§‹åŒ– issue","uri":"/gitalk-init-issue/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"https,googleå¼ºåˆ¶è·³åˆ°https,ERR_SSL_PROTOCOL_ERROR,How to Stop Chrome from Automatically Redirecting to https","date":"2022-03-29","objectID":"/stop-chrome-auto-redirect-2-https/","series":null,"tags":["chrome","http/https"],"title":"ç¦æ­¢Googleæµè§ˆå™¨å¼ºåˆ¶è·³è½¬https","uri":"/stop-chrome-auto-redirect-2-https/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"è¿™å‡ å¤©åœ¨ä½¿ç”¨ google æµè§ˆå™¨æ‰“å¼€å…¬å¸çš„ä¸€ä¸ªç½‘ç«™æ—¶ï¼Œå‘ç°æ€»æ˜¯è‡ªåŠ¨è·³è½¬åˆ° httpsï¼Œä»¥è‡³äºå‡ºç°ä¸‹é¢è¿™ä¸ªé¡µé¢ï¼š ERR_SSL_PROTOCOL_ERROR æœ‰æ—¶å€™æµè§ˆå™¨å¤ªæ™ºèƒ½äº†ä¹Ÿä¸æ˜¯ä¸€ä»¶å¥½äº‹ğŸ¤£ã€‚ ","date":"2022-03-29","objectID":"/stop-chrome-auto-redirect-2-https/:0:0","series":null,"tags":["chrome","http/https"],"title":"ç¦æ­¢Googleæµè§ˆå™¨å¼ºåˆ¶è·³è½¬https","uri":"/stop-chrome-auto-redirect-2-https/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ³•å¤åˆ¶é“¾æ¥ chrome://net-internals/#hstsç”¨ Google æµè§ˆå™¨æ‰“å¼€ï¼Œè¿™ä¸ªé¡µé¢ï¼Œåœ¨æœ€ä¸‹é¢çš„ Delete domain security policies å¡«ä¸Šéœ€è¦ç¦æ­¢è·³è½¬çš„ç½‘ç«™ï¼Œç„¶åç‚¹å‡»Deleteã€‚ Delete domain security policies ç„¶åé‡å¯æµè§ˆå™¨ï¼Œé‡å¯æµè§ˆå™¨ï¼Œé‡å¯æµè§ˆå™¨ï¼Œä¸ç„¶å¯èƒ½ä¸ç”Ÿæ•ˆã€‚ è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬çš„ç½‘å€æ˜¯ http://g.xiaobinqt.cn:8000ï¼Œé‚£ä¹ˆDomain çš„å€¼å¡«çš„æ˜¯ xiaobinqt.cnã€‚ ","date":"2022-03-29","objectID":"/stop-chrome-auto-redirect-2-https/:1:0","series":null,"tags":["chrome","http/https"],"title":"ç¦æ­¢Googleæµè§ˆå™¨å¼ºåˆ¶è·³è½¬https","uri":"/stop-chrome-auto-redirect-2-https/#è§£å†³æ–¹æ³•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ How to Stop Chrome from Automatically Redirecting to https ","date":"2022-03-29","objectID":"/stop-chrome-auto-redirect-2-https/:2:0","series":null,"tags":["chrome","http/https"],"title":"ç¦æ­¢Googleæµè§ˆå™¨å¼ºåˆ¶è·³è½¬https","uri":"/stop-chrome-auto-redirect-2-https/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"hugo,algolia,algoliasearch,exceptions.AlgoliaUnreachableHostException: Unreachable hosts, algoliaç´¢å¼•","date":"2022-03-28","objectID":"/hugo-algolia/","series":null,"tags":["hugo","algolia"],"title":"hugo algolia Unreachable hosts","uri":"/hugo-algolia/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"æœ€è¿‘åœ¨ä½¿ç”¨ hugo algolia æ—¶ï¼Œåœ¨ github actions åŒæ­¥ç´¢å¼•åˆ° algolia æ—¶æ€»æ˜¯å‡ºç°è¿™æ ·çš„é”™è¯¯ï¼š action error list Unreachable hosts æˆ‘ç”¨çš„ action æ’ä»¶æ˜¯Algolia Index Uploaderï¼Œæ‰¾äº†åŠå¤©å‘ç°æ˜¯å‚æ•° algolia_index_id å†™çš„æœ‰é—®é¢˜ğŸ˜¥ï¼š algolia_index_id å¡«çš„å€¼ ä¸Šä¼ æˆåŠŸåå¯ä»¥å» algolia å®˜ç½‘æŸ¥çœ‹æ•ˆæœï¼š Settings -\u003e Applications -\u003e è¿›å…¥åˆ°åº”ç”¨ -\u003e Search -\u003e Browse ä¸Šä¼ ç´¢å¼•æ•ˆæœ ","date":"2022-03-28","objectID":"/hugo-algolia/:0:0","series":null,"tags":["hugo","algolia"],"title":"hugo algolia Unreachable hosts","uri":"/hugo-algolia/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Algolia Hosts unreachable ","date":"2022-03-28","objectID":"/hugo-algolia/:1:0","series":null,"tags":["hugo","algolia"],"title":"hugo algolia Unreachable hosts","uri":"/hugo-algolia/#å‚è€ƒ"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":"TCP,UDP,ç½‘ç»œæ¨¡å‹,å®ä½“å±‚,é“¾æ¥å±‚,ç½‘ç»œå±‚,ä¼ è¾“å±‚,åº”ç”¨å±‚,ç½‘ç»œæ•°æ®åŒ…,ä»¥å¤ªç½‘åè®®,MACåœ°å€,å¹¿æ’­,Physical Layer,Application Layer,Transport Layer,Network Layer,Internet Protocol Suite,Ethernet,subnet mask,IPv4,IPv6,äº’è”ç½‘åè®®çš„é€šä¿¡è¿‡ç¨‹","date":"2022-03-27","objectID":"/net-protocol-glance/","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æ¦‚è¿°","date":"2022-03-27","objectID":"/net-protocol-glance/:1:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#æ¦‚è¿°"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" äº”å±‚æ¨¡å‹äº’è”ç½‘çš„å®ç°ï¼Œåˆ†æˆå¥½å‡ å±‚ã€‚æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„åŠŸèƒ½ï¼Œå°±åƒå»ºç­‘ç‰©ä¸€æ ·ï¼Œæ¯ä¸€å±‚éƒ½é ä¸‹ä¸€å±‚æ”¯æŒã€‚ ç”¨æˆ·æ¥è§¦åˆ°çš„ï¼Œåªæ˜¯æœ€ä¸Šé¢çš„ä¸€å±‚ï¼Œæ ¹æœ¬æ²¡æœ‰æ„Ÿè§‰åˆ°ä¸‹é¢çš„å±‚ã€‚ç†è§£äº’è”ç½‘ï¼Œéœ€è¦ä»æœ€ä¸‹å±‚å¼€å§‹ï¼Œè‡ªä¸‹è€Œä¸Šç†è§£æ¯ä¸€å±‚çš„åŠŸèƒ½ã€‚ å¦‚ä½•åˆ†å±‚ï¼Œæœ‰ä¸åŒçš„æ¨¡å‹ï¼Œæœ‰çš„æ¨¡å‹åˆ†ä¸ƒå±‚ï¼Œæœ‰çš„åˆ†å››å±‚ã€‚æŠŠäº’è”ç½‘åˆ†æˆäº”å±‚ï¼Œæ¯”è¾ƒå®¹æ˜“è§£é‡Šã€‚ äº”å±‚æ¨¡å‹ å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæœ€åº•ä¸‹çš„ä¸€å±‚å«åšå®ä½“å±‚Physical Layerï¼Œæœ€ä¸Šé¢çš„ä¸€å±‚å«åšåº”ç”¨å±‚Application Layerï¼Œä¸­é—´çš„ä¸‰å±‚ï¼ˆè‡ªä¸‹è€Œä¸Šï¼‰åˆ†åˆ«æ˜¯é“¾æ¥å±‚Link Layerã€ç½‘ç»œå±‚Network Layerå’Œä¼ è¾“å±‚Transport Layerã€‚è¶Šä¸‹é¢çš„å±‚ï¼Œè¶Šé è¿‘ç¡¬ä»¶ï¼›è¶Šä¸Šé¢çš„å±‚ï¼Œè¶Šé è¿‘ç”¨æˆ·ã€‚ åå­—åªæ˜¯ä¸€ä¸ªä»£å·ï¼Œå®ƒä»¬å«ä»€ä¹ˆåå­—ï¼Œå…¶å®å¹¶ä¸é‡è¦ã€‚åªéœ€è¦çŸ¥é“ï¼Œäº’è”ç½‘åˆ†æˆè‹¥å¹²å±‚å°±å¯ä»¥äº†ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:1:1","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#äº”å±‚æ¨¡å‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å±‚ä¸åè®®æ¯ä¸€å±‚éƒ½æ˜¯ä¸ºäº†å®Œæˆä¸€ç§åŠŸèƒ½ã€‚ä¸ºäº†å®ç°è¿™äº›åŠŸèƒ½ï¼Œå°±éœ€è¦å¤§å®¶éƒ½éµå®ˆå…±åŒçš„è§„åˆ™ã€‚ å¤§å®¶éƒ½éµå®ˆçš„è§„åˆ™ï¼Œå°±å«åšâ€œåè®®â€ï¼ˆprotocolï¼‰ã€‚ äº’è”ç½‘çš„æ¯ä¸€å±‚ï¼Œéƒ½å®šä¹‰äº†å¾ˆå¤šåè®®ã€‚è¿™äº›åè®®çš„æ€»ç§°ï¼Œå°±å«åšâ€œäº’è”ç½‘åè®®â€ï¼ˆInternet Protocol Suiteï¼‰ï¼Œå®ƒä»¬æ˜¯äº’è”ç½‘çš„æ ¸å¿ƒã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:1:2","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#å±‚ä¸åè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å®ä½“å±‚ç”µè„‘è¦ç»„ç½‘ï¼Œç¬¬ä¸€ä»¶äº‹æ˜¯å…ˆæŠŠç”µè„‘è¿èµ·æ¥ï¼Œå¯ä»¥ç”¨å…‰ç¼†ã€ç”µç¼†ã€åŒç»çº¿ã€æ— çº¿ç”µæ³¢ç­‰æ–¹å¼ã€‚ è¿™å°±å«åšâ€œå®ä½“å±‚â€ï¼Œå®ƒå°±æ˜¯æŠŠç”µè„‘è¿æ¥èµ·æ¥çš„ç‰©ç†æ‰‹æ®µã€‚å®ƒä¸»è¦è§„å®šäº†ç½‘ç»œçš„ä¸€äº›ç”µæ°”ç‰¹æ€§ï¼Œä½œç”¨æ˜¯è´Ÿè´£ä¼ é€ 0 å’Œ 1 çš„ç”µä¿¡å·ã€‚ å®ä½“å±‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:2:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#å®ä½“å±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" é“¾æ¥å±‚å•çº¯çš„ 0 å’Œ 1 æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼Œå¿…é¡»è§„å®šè§£è¯»æ–¹å¼ï¼šå¤šå°‘ä¸ªç”µä¿¡å·ç®—ä¸€ç»„â“æ¯ä¸ªä¿¡å·ä½æœ‰ä½•æ„ä¹‰â“ è¿™å°±æ˜¯â€œé“¾æ¥å±‚â€çš„åŠŸèƒ½ï¼Œå®ƒåœ¨â€œå®ä½“å±‚â€çš„ä¸Šæ–¹ï¼Œç¡®å®šäº† 0 å’Œ 1 çš„åˆ†ç»„æ–¹å¼ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:3:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#é“¾æ¥å±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä»¥å¤ªç½‘åè®®æ—©æœŸçš„æ—¶å€™ï¼Œæ¯å®¶å…¬å¸éƒ½æœ‰è‡ªå·±çš„ç”µä¿¡å·åˆ†ç»„æ–¹å¼ã€‚é€æ¸åœ°ï¼Œä¸€ç§å«åšâ€œä»¥å¤ªç½‘â€ï¼ˆEthernetï¼‰çš„åè®®ï¼Œå æ®äº†ä¸»å¯¼åœ°ä½ã€‚ ä»¥å¤ªç½‘è§„å®šï¼Œä¸€ç»„ç”µä¿¡å·æ„æˆä¸€ä¸ªæ•°æ®åŒ…ï¼Œå«åšâ€œå¸§â€ï¼ˆFrameï¼‰ã€‚æ¯ä¸€å¸§åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼šæ ‡å¤´ï¼ˆHeadï¼‰å’Œæ•°æ®ï¼ˆDataï¼‰ã€‚ head-data â€œæ ‡å¤´â€åŒ…å«æ•°æ®åŒ…çš„ä¸€äº›è¯´æ˜é¡¹ï¼Œæ¯”å¦‚å‘é€è€…ã€æ¥å—è€…ã€æ•°æ®ç±»å‹ç­‰ç­‰ï¼›â€œæ•°æ®â€åˆ™æ˜¯æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚ â€œæ ‡å¤´â€çš„é•¿åº¦ï¼Œå›ºå®šä¸º 18 å­—èŠ‚ã€‚â€œæ•°æ®â€çš„é•¿åº¦ï¼Œæœ€çŸ­ä¸º 46 å­—èŠ‚ï¼Œæœ€é•¿ä¸º 1500 å­—èŠ‚ ã€‚å› æ­¤ï¼Œæ•´ä¸ªâ€œå¸§â€æœ€çŸ­ä¸º 64 å­—èŠ‚ï¼Œæœ€é•¿ä¸º 1518 å­—èŠ‚ã€‚å¦‚æœæ•°æ®å¾ˆé•¿ï¼Œå°±å¿…é¡»åˆ†å‰²æˆå¤šä¸ªå¸§è¿›è¡Œå‘é€ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:3:1","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ä»¥å¤ªç½‘åè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" MAC åœ°å€ä»¥å¤ªç½‘æ•°æ®åŒ…çš„â€œæ ‡å¤´â€ï¼ŒåŒ…å«äº†å‘é€è€…å’Œæ¥å—è€…çš„ä¿¡æ¯ã€‚é‚£ä¹ˆï¼Œå‘é€è€…å’Œæ¥å—è€…æ˜¯å¦‚ä½•æ ‡è¯†å‘¢ï¼Ÿ ä»¥å¤ªç½‘è§„å®šï¼Œè¿å…¥ç½‘ç»œçš„æ‰€æœ‰è®¾å¤‡ï¼Œéƒ½å¿…é¡»å…·æœ‰â€œç½‘å¡â€æ¥å£ã€‚ æ•°æ®åŒ…å¿…é¡»æ˜¯ä»ä¸€å—ç½‘å¡ï¼Œä¼ é€åˆ°å¦ä¸€å—ç½‘å¡ã€‚ç½‘å¡çš„åœ°å€ï¼Œå°±æ˜¯æ•°æ®åŒ…çš„å‘é€åœ°å€å’Œæ¥æ”¶åœ°å€ï¼Œè¿™å«åš MAC åœ°å€ã€‚ æ¯å—ç½‘å¡å‡ºå‚çš„æ—¶å€™ï¼Œéƒ½æœ‰ä¸€ä¸ªå…¨ä¸–ç•Œç‹¬ä¸€æ— äºŒçš„ MAC åœ°å€ï¼Œé•¿åº¦æ˜¯ 48 ä¸ªäºŒè¿›åˆ¶ä½ï¼Œé€šå¸¸ç”¨ 12 ä¸ªåå…­è¿›åˆ¶æ•°è¡¨ç¤ºã€‚ å‰ 6 ä¸ªåå…­è¿›åˆ¶æ•°æ˜¯å‚å•†ç¼–å·ï¼Œå 6 ä¸ªæ˜¯è¯¥å‚å•†çš„ç½‘å¡æµæ°´å·ã€‚æœ‰äº† MAC åœ°å€ï¼Œå°±å¯ä»¥å®šä½ç½‘å¡å’Œæ•°æ®åŒ…çš„è·¯å¾„äº†ã€‚ MAC address ä¸Šå›¾çš„ MAC åœ°å€çš„äºŒè¿›åˆ¶ä½ä¸º 00000000-10110000-11010000-10000110-10111011-11110111ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:3:2","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#mac-åœ°å€"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¹¿æ’­ä»¥å¤ªç½‘æ•°æ®åŒ…å¿…é¡»çŸ¥é“æ¥æ”¶æ–¹çš„ MAC åœ°å€ï¼Œç„¶åæ‰èƒ½å‘é€ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ ä¸€å—ç½‘å¡æ€ä¹ˆä¼šçŸ¥é“å¦ä¸€å—ç½‘å¡çš„MACåœ°å€ï¼Ÿ å°±ç®—æœ‰äº† MAC åœ°å€ï¼Œç³»ç»Ÿæ€æ ·æ‰èƒ½æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æ¥æ”¶æ–¹ï¼Ÿ å›ç­”æ˜¯ï¼Œä»¥å¤ªç½‘é‡‡ç”¨äº†ä¸€ç§å¾ˆâ€œåŸå§‹â€çš„æ–¹å¼ï¼Œå®ƒä¸æ˜¯æŠŠæ•°æ®åŒ…å‡†ç¡®é€åˆ°æ¥æ”¶æ–¹ï¼Œè€Œæ˜¯å‘æœ¬ç½‘ç»œå†…æ‰€æœ‰è®¡ç®—æœºå‘é€ï¼Œè®©æ¯å°è®¡ç®—æœºè‡ªå·±åˆ¤æ–­ï¼Œæ˜¯å¦ä¸ºæ¥æ”¶æ–¹ã€‚ å¹¿æ’­ ä¸Šå›¾ä¸­ï¼Œ1 å·è®¡ç®—æœºå‘ 2 å·è®¡ç®—æœºå‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼ŒåŒä¸€ä¸ªå­ç½‘ç»œçš„ 3 å·ã€4 å·ã€5 å·è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªåŒ…ã€‚å®ƒä»¬è¯»å–è¿™ä¸ªåŒ…çš„â€œæ ‡å¤´â€ï¼Œæ‰¾åˆ°æ¥æ”¶æ–¹çš„ MAC åœ°å€ï¼Œç„¶åä¸è‡ªèº«çš„ MAC åœ°å€ç›¸æ¯”è¾ƒï¼Œå¦‚æœä¸¤è€…ç›¸åŒï¼Œå°±æ¥å—è¿™ä¸ªåŒ…ï¼Œåšè¿›ä¸€æ­¥å¤„ç†ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚è¿™ç§å‘é€æ–¹å¼å°±å«åšå¹¿æ’­broadcastingã€‚ æœ‰äº†æ•°æ®åŒ…çš„å®šä¹‰ã€ç½‘å¡çš„ MAC åœ°å€ã€å¹¿æ’­çš„å‘é€æ–¹å¼ï¼Œâ€œé“¾æ¥å±‚â€å°±å¯ä»¥åœ¨å¤šå°è®¡ç®—æœºä¹‹é—´ä¼ é€æ•°æ®äº†ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:3:3","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#å¹¿æ’­"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç½‘ç»œå±‚","date":"2022-03-27","objectID":"/net-protocol-glance/:4:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ç½‘ç»œå±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç½‘ç»œå±‚çš„ç”±æ¥ä»¥å¤ªç½‘åè®®ï¼Œä¾é  MAC åœ°å€å‘é€æ•°æ®ã€‚ç†è®ºä¸Šï¼Œå•å•ä¾é  MAC åœ°å€ï¼Œä¸Šæµ·çš„ç½‘å¡å°±å¯ä»¥æ‰¾åˆ°æ´›æ‰çŸ¶çš„ç½‘å¡äº†ï¼ŒæŠ€æœ¯ä¸Šæ˜¯å¯ä»¥å®ç°çš„ã€‚ ä½†æ˜¯ï¼Œè¿™æ ·åšæœ‰ä¸€ä¸ªé‡å¤§çš„ç¼ºç‚¹ã€‚ä»¥å¤ªç½‘é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€æ•°æ®åŒ…ï¼Œæ‰€æœ‰æˆå‘˜äººæ‰‹ä¸€â€œåŒ…â€ï¼Œä¸ä»…æ•ˆç‡ä½ï¼Œè€Œä¸”å±€é™åœ¨å‘é€è€…æ‰€åœ¨çš„å­ç½‘ç»œã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ å¦‚æœä¸¤å°è®¡ç®—æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¹¿æ’­æ˜¯ä¼ ä¸è¿‡å»çš„ã€‚è¿™ç§è®¾è®¡æ˜¯åˆç†çš„ï¼Œå¦åˆ™äº’è”ç½‘ä¸Šæ¯ä¸€å°è®¡ç®—æœºéƒ½ä¼šæ”¶åˆ°æ‰€æœ‰åŒ…ï¼Œé‚£ä¼šå¼•èµ·ç¾éš¾ã€‚ äº’è”ç½‘æ˜¯æ— æ•°å­ç½‘ç»œå…±åŒç»„æˆçš„ä¸€ä¸ªå·¨å‹ç½‘ç»œï¼Œå¾ˆåƒæƒ³è±¡ä¸Šæµ·å’Œæ´›æ‰çŸ¶çš„ç”µè„‘ä¼šåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œè¿™å‡ ä¹æ˜¯ä¸å¯èƒ½çš„ã€‚ å­ç½‘ç»œ å› æ­¤ï¼Œå¿…é¡»æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤ŸåŒºåˆ†å“ªäº› MAC åœ°å€å±äºåŒä¸€ä¸ªå­ç½‘ç»œï¼Œå“ªäº›ä¸æ˜¯ã€‚å¦‚æœæ˜¯åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±é‡‡ç”¨å¹¿æ’­æ–¹å¼å‘é€ï¼Œå¦åˆ™å°±é‡‡ç”¨â€œè·¯ç”±â€æ–¹å¼å‘é€ã€‚ï¼ˆâ€œè·¯ç”±â€çš„æ„æ€ï¼Œå°±æ˜¯æŒ‡å¦‚ä½•å‘ä¸åŒçš„å­ç½‘ç»œåˆ†å‘æ•°æ®åŒ…ã€‚ï¼‰ï¼ŒMAC åœ°å€æœ¬èº«æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒåªä¸å‚å•†æœ‰å…³ï¼Œä¸æ‰€å¤„ç½‘ç»œæ— å…³ã€‚ è¿™å°±å¯¼è‡´äº†â€œç½‘ç»œå±‚â€çš„è¯ç”Ÿã€‚å®ƒçš„ä½œç”¨æ˜¯ å¼•è¿›ä¸€å¥—æ–°çš„åœ°å€ï¼Œä½¿å¾—æˆ‘ä»¬èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œ ã€‚è¿™å¥—åœ°å€å°±å«åšâ€œç½‘ç»œåœ°å€â€ï¼Œç®€ç§°â€œç½‘å€â€ã€‚ äºæ˜¯ï¼Œâ€œç½‘ç»œå±‚â€å‡ºç°ä»¥åï¼Œæ¯å°è®¡ç®—æœºæœ‰äº†ä¸¤ç§åœ°å€ï¼Œä¸€ç§æ˜¯ MAC åœ°å€ï¼Œå¦ä¸€ç§æ˜¯ç½‘ç»œåœ°å€ã€‚ ä¸¤ç§åœ°å€ä¹‹é—´æ²¡æœ‰ä»»ä½•è”ç³»ï¼ŒMAC åœ°å€æ˜¯ç»‘å®šåœ¨ç½‘å¡ä¸Šçš„ï¼Œç½‘ç»œåœ°å€åˆ™æ˜¯ç®¡ç†å‘˜åˆ†é…çš„ï¼Œå®ƒä»¬åªæ˜¯éšæœºç»„åˆåœ¨ä¸€èµ·ã€‚ ç½‘ç»œåœ°å€å¸®åŠ©æˆ‘ä»¬ç¡®å®šè®¡ç®—æœºæ‰€åœ¨çš„å­ç½‘ç»œï¼ŒMAC åœ°å€åˆ™å°†æ•°æ®åŒ…é€åˆ°è¯¥å­ç½‘ç»œä¸­çš„ç›®æ ‡ç½‘å¡ã€‚å› æ­¤ï¼Œä»é€»è¾‘ä¸Šå¯ä»¥æ¨æ–­ï¼Œå¿…å®šæ˜¯ å…ˆå¤„ç†ç½‘ç»œåœ°å€ï¼Œç„¶åå†å¤„ç† MAC åœ°å€ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:4:1","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ç½‘ç»œå±‚çš„ç”±æ¥"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" IPåè®®å’Œå­ç½‘æ©ç è§„å®šç½‘ç»œåœ°å€çš„åè®®ï¼Œå«åš IP åè®®ã€‚å®ƒæ‰€å®šä¹‰çš„åœ°å€ï¼Œå°±è¢«ç§°ä¸º IP åœ°å€ã€‚ ç›®å‰ï¼Œå¹¿æ³›é‡‡ç”¨çš„æ˜¯ IP åè®®ç¬¬å››ç‰ˆï¼Œç®€ç§° IPv4ã€‚è¿™ä¸ªç‰ˆæœ¬è§„å®šï¼Œç½‘ç»œåœ°å€ç”± 32 ä¸ªäºŒè¿›åˆ¶ä½ç»„æˆã€‚ IPåè®® ä¹ æƒ¯ä¸Šï¼Œæˆ‘ä»¬ç”¨åˆ†æˆå››æ®µçš„åè¿›åˆ¶æ•°è¡¨ç¤º IP åœ°å€ï¼Œä» 0.0.0.0 ä¸€ç›´åˆ° 255.255.255.255ã€‚ äº’è”ç½‘ä¸Šçš„æ¯ä¸€å°è®¡ç®—æœºï¼Œéƒ½ä¼šåˆ†é…åˆ°ä¸€ä¸ª IP åœ°å€ã€‚ IP åœ°å€åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œå‰ä¸€éƒ¨åˆ†ä»£è¡¨ç½‘ç»œï¼Œåä¸€éƒ¨åˆ†ä»£è¡¨ä¸»æœºã€‚ æ¯”å¦‚ï¼ŒIP åœ°å€ 172.16.254.1ï¼Œè¿™æ˜¯ä¸€ä¸ª 32 ä½çš„åœ°å€ï¼Œå‡å®šå®ƒçš„ç½‘ç»œéƒ¨åˆ†æ˜¯å‰ 24 ä½ï¼ˆ172.16.254ï¼‰ï¼Œé‚£ä¹ˆä¸»æœºéƒ¨åˆ†å°±æ˜¯å 8 ä½ï¼ˆæœ€åçš„é‚£ä¸ª 1 ï¼‰ã€‚ å¤„äºåŒä¸€ä¸ªå­ç½‘ç»œçš„ç”µè„‘ï¼Œå®ƒä»¬ IP åœ°å€çš„ç½‘ç»œéƒ¨åˆ†å¿…å®šæ˜¯ç›¸åŒçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ 172.16.254.2 åº”è¯¥ä¸ 172.16.254.1 å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚ å•å•ä» IP åœ°å€ï¼Œæˆ‘ä»¬æ— æ³•åˆ¤æ–­ç½‘ç»œéƒ¨åˆ†ã€‚è¿˜æ˜¯ä»¥ 172.16.254.1 ä¸ºä¾‹ï¼Œå®ƒçš„ç½‘ç»œéƒ¨åˆ†ï¼Œåˆ°åº•æ˜¯å‰ 24 ä½ï¼Œè¿˜æ˜¯å‰ 16 ä½ï¼Œç”šè‡³å‰ 28 ä½ï¼Œä» IP åœ°å€ä¸Šæ˜¯çœ‹ä¸å‡ºæ¥çš„ã€‚ é‚£ä¹ˆï¼Œæ€æ ·æ‰èƒ½ä»IPåœ°å€ï¼Œåˆ¤æ–­ä¸¤å°è®¡ç®—æœºæ˜¯å¦å±äºåŒä¸€ä¸ªå­ç½‘ç»œå‘¢â“è¿™å°±è¦ç”¨åˆ°å¦ä¸€ä¸ªå‚æ•°å­ç½‘æ©ç subnet maskã€‚ æ‰€è°“ â€œå­ç½‘æ©ç â€ï¼Œå°±æ˜¯è¡¨ç¤ºå­ç½‘ç»œç‰¹å¾çš„ä¸€ä¸ªå‚æ•°ã€‚å®ƒåœ¨å½¢å¼ä¸Šç­‰åŒäº IP åœ°å€ï¼Œä¹Ÿæ˜¯ä¸€ä¸ª 32 ä½äºŒè¿›åˆ¶æ•°å­—ï¼Œå®ƒçš„ç½‘ç»œéƒ¨åˆ†å…¨éƒ¨ä¸º 1ï¼Œä¸»æœºéƒ¨åˆ†å…¨éƒ¨ä¸º 0 ã€‚æ¯”å¦‚ï¼ŒIP åœ°å€ 172.16.254.1 ï¼Œå¦‚æœå·²çŸ¥ç½‘ç»œéƒ¨åˆ†æ˜¯å‰ 24 ä½ï¼Œä¸»æœºéƒ¨åˆ†æ˜¯å 8 ä½ï¼Œé‚£ä¹ˆå­ç½‘ç»œæ©ç å°±æ˜¯ 11111111.11111111.11111111.00000000ï¼Œå†™æˆåè¿›åˆ¶å°±æ˜¯ 255.255.255.0ã€‚ çŸ¥é“\"å­ç½‘æ©ç \"ï¼Œæˆ‘ä»¬å°±èƒ½åˆ¤æ–­ï¼Œä»»æ„ä¸¤ä¸ª IP åœ°å€æ˜¯å¦å¤„åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚æ–¹æ³•æ˜¯å°†ä¸¤ä¸ª IP åœ°å€ä¸å­ç½‘æ©ç  åˆ†åˆ«è¿›è¡Œ AND è¿ç®—ï¼ˆä¸¤ä¸ªæ•°ä½éƒ½ä¸º 1 ï¼Œè¿ç®—ç»“æœä¸º 1ï¼Œå¦åˆ™ä¸º 0ï¼‰ï¼Œç„¶åæ¯”è¾ƒç»“æœæ˜¯å¦ç›¸åŒï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå°±è¡¨æ˜å®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œä¸­ï¼Œå¦åˆ™å°±ä¸æ˜¯ã€‚ æ¯”å¦‚ï¼Œå·²çŸ¥IPåœ°å€ 172.16.254.1 å’Œ 172.16.254.233 çš„å­ç½‘æ©ç éƒ½æ˜¯ 255.255.255.0ï¼Œè¯·é—®å®ƒä»¬æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Ÿä¸¤è€…ä¸å­ç½‘æ©ç åˆ†åˆ«è¿›è¡Œ AND è¿ç®—ï¼Œç»“æœéƒ½æ˜¯ 172.16.254.0ï¼Œå› æ­¤å®ƒä»¬åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚ 10101100.00010000.11111110.00000001 # 172.16.254.1 11111111.11111111.11111111.00000000 # 255.255.255.0 10101100.00010000.11111110.00000000 # AND ç»“æœäºŒè¿›åˆ¶ä½ 172.16.254.0 # AND ç»“æœè½¬æˆåè¿›åˆ¶ æ‰€ä»¥ï¼ŒIP åè®®çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯ä¸ºæ¯ä¸€å°è®¡ç®—æœºåˆ†é… IP åœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯ç¡®å®šå“ªäº›åœ°å€åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:4:2","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ipåè®®å’Œå­ç½‘æ©ç "},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" IPæ•°æ®åŒ…æ ¹æ® IP åè®®å‘é€çš„æ•°æ®ï¼Œå°±å«åš IP æ•°æ®åŒ…ã€‚ä¸éš¾æƒ³è±¡ï¼Œå…¶ä¸­å¿…å®šåŒ…æ‹¬ IP åœ°å€ä¿¡æ¯ã€‚ ä½†æ˜¯å‰é¢è¯´è¿‡ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…åªåŒ…å« MAC åœ°å€ï¼Œå¹¶æ²¡æœ‰ IP åœ°å€çš„æ ä½ã€‚é‚£ä¹ˆæ˜¯å¦éœ€è¦ä¿®æ”¹æ•°æ®å®šä¹‰ï¼Œå†æ·»åŠ ä¸€ä¸ªæ ä½å‘¢ï¼Ÿ å›ç­”æ˜¯ä¸éœ€è¦ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ IP æ•°æ®åŒ…ç›´æ¥æ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œå› æ­¤å®Œå…¨ä¸ç”¨ä¿®æ”¹ä»¥å¤ªç½‘çš„è§„æ ¼ã€‚è¿™å°±æ˜¯äº’è”ç½‘åˆ†å±‚ç»“æ„çš„å¥½å¤„ï¼šä¸Šå±‚çš„å˜åŠ¨å®Œå…¨ä¸æ¶‰åŠä¸‹å±‚çš„ç»“æ„ã€‚ å…·ä½“æ¥è¯´ï¼ŒIP æ•°æ®åŒ…ä¹Ÿåˆ†ä¸ºâ€œæ ‡å¤´â€å’Œâ€œæ•°æ®â€ä¸¤ä¸ªéƒ¨åˆ†ã€‚ IPæ•°æ®åŒ…1 â€œæ ‡å¤´â€éƒ¨åˆ†ä¸»è¦åŒ…æ‹¬ç‰ˆæœ¬ã€é•¿åº¦ã€IP åœ°å€ç­‰ä¿¡æ¯ï¼Œâ€œæ•°æ®â€éƒ¨åˆ†åˆ™æ˜¯ IP æ•°æ®åŒ…çš„å…·ä½“å†…å®¹ã€‚å®ƒæ”¾è¿›ä»¥å¤ªç½‘æ•°æ®åŒ…åï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…å°±å˜æˆäº†ä¸‹é¢è¿™æ ·ã€‚ IPæ•°æ®åŒ…2 IP æ•°æ®åŒ…çš„â€œæ ‡å¤´â€éƒ¨åˆ†çš„é•¿åº¦ä¸º 20 åˆ° 60 å­—èŠ‚ï¼Œæ•´ä¸ªæ•°æ®åŒ…çš„æ€»é•¿åº¦æœ€å¤§ä¸º 65,535 å­—èŠ‚ã€‚å› æ­¤ï¼Œç†è®ºä¸Šï¼Œä¸€ä¸ª IP æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œæœ€é•¿ä¸º 65,515 å­—èŠ‚ã€‚å‰é¢è¯´è¿‡ï¼Œä»¥å¤ªç½‘æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œæœ€é•¿åªæœ‰ 1500 å­—èŠ‚ã€‚å› æ­¤ï¼Œå¦‚æœ IP æ•°æ®åŒ…è¶…è¿‡äº† 1500 å­—èŠ‚ï¼ˆä¸Šå›¾çº¢è‰²éƒ¨åˆ†ï¼‰ï¼Œå®ƒå°±éœ€è¦åˆ†å‰²æˆå‡ ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ï¼Œåˆ†å¼€å‘é€äº†ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:4:3","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ipæ•°æ®åŒ…"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ARPåè®®ç”±äº IP æ•°æ®åŒ…æ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…é‡Œå‘é€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»åŒæ—¶çŸ¥é“ä¸¤ä¸ªåœ°å€ï¼Œä¸€ä¸ªæ˜¯å¯¹æ–¹çš„ MAC åœ°å€ï¼Œå¦ä¸€ä¸ªæ˜¯å¯¹æ–¹çš„ IP åœ°å€ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œå¯¹æ–¹çš„ IP åœ°å€æ˜¯å·²çŸ¥çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸çŸ¥é“å®ƒçš„ MAC åœ°å€ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½å¤Ÿä» IP åœ°å€å¾—åˆ° MAC åœ°å€ã€‚ è¿™é‡Œåˆå¯ä»¥åˆ†æˆä¸¤ç§æƒ…å†µã€‚ ç¬¬ä¸€ç§æƒ…å†µï¼Œå¦‚æœä¸¤å°ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆäº‹å®ä¸Šæ²¡æœ‰åŠæ³•å¾—åˆ°å¯¹æ–¹çš„ MAC åœ°å€ï¼Œåªèƒ½æŠŠæ•°æ®åŒ…ä¼ é€åˆ°ä¸¤ä¸ªå­ç½‘ç»œè¿æ¥å¤„çš„ç½‘å…³gatewayï¼Œè®©ç½‘å…³å»å¤„ç†ã€‚ ç¬¬äºŒç§æƒ…å†µï¼Œå¦‚æœä¸¤å°ä¸»æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç”¨ ARP åè®®ï¼Œå¾—åˆ°å¯¹æ–¹çš„ MAC åœ°å€ã€‚ARP åè®®ä¹Ÿæ˜¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…ï¼ˆåŒ…å«åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¸­ï¼‰ï¼Œå…¶ä¸­åŒ…å«å®ƒæ‰€è¦æŸ¥è¯¢ä¸»æœºçš„ IP åœ°å€ï¼Œåœ¨å¯¹æ–¹çš„ MAC åœ°å€è¿™ä¸€æ ï¼Œå¡«çš„æ˜¯FF:FF:FF:FF:FF:FFï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª\"å¹¿æ’­\" åœ°å€ã€‚å®ƒæ‰€åœ¨å­ç½‘ç»œçš„æ¯ä¸€å°ä¸»æœºï¼Œéƒ½ä¼šæ”¶åˆ°è¿™ä¸ªæ•°æ®åŒ…ï¼Œä»ä¸­å–å‡º IP åœ°å€ï¼Œä¸è‡ªèº«çš„ IP åœ°å€è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœä¸¤è€…ç›¸åŒï¼Œéƒ½åšå‡ºå›å¤ï¼Œå‘å¯¹æ–¹æŠ¥å‘Šè‡ªå·±çš„ MAC åœ°å€ï¼Œå¦åˆ™å°±ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚ æœ‰äº† ARP åè®®ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°åŒä¸€ä¸ªå­ç½‘ç»œå†…çš„ä¸»æœº MAC åœ°å€ï¼Œå¯ä»¥æŠŠæ•°æ®åŒ…å‘é€åˆ°ä»»æ„ä¸€å°ä¸»æœºä¹‹ä¸Šã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:4:4","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#arpåè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä¼ è¾“å±‚","date":"2022-03-27","objectID":"/net-protocol-glance/:5:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ä¼ è¾“å±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä¼ è¾“å±‚çš„ç”±æ¥æœ‰äº† MAC åœ°å€å’Œ IP åœ°å€ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥åœ¨äº’è”ç½‘ä¸Šä»»æ„ä¸¤å°ä¸»æœºä¸Šå»ºç«‹é€šä¿¡ã€‚ æ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼ŒåŒä¸€å°ä¸»æœºä¸Šæœ‰è®¸å¤šç¨‹åºéƒ½éœ€è¦ç”¨åˆ°ç½‘ç»œï¼Œæ¯”å¦‚ï¼Œä½ ä¸€è¾¹æµè§ˆç½‘é¡µï¼Œä¸€è¾¹ä¸æœ‹å‹åœ¨çº¿èŠå¤©ã€‚å½“ä¸€ä¸ªæ•°æ®åŒ…ä»äº’è”ç½‘ä¸Šå‘æ¥çš„æ—¶å€™ï¼Œä½ æ€ä¹ˆçŸ¥é“ï¼Œå®ƒæ˜¯è¡¨ç¤ºç½‘é¡µçš„å†…å®¹ï¼Œè¿˜æ˜¯è¡¨ç¤ºåœ¨çº¿èŠå¤©çš„å†…å®¹ï¼Ÿ ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªæ•°æ®åŒ…åˆ°åº•ä¾›å“ªä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ä½¿ç”¨ã€‚è¿™ä¸ªå‚æ•°å°±å«åšç«¯å£portï¼Œå®ƒå…¶å® æ˜¯æ¯ä¸€ä¸ªä½¿ç”¨ç½‘å¡çš„ç¨‹åºçš„ç¼–å·ã€‚æ¯ä¸ªæ•°æ®åŒ…éƒ½å‘åˆ°ä¸»æœºçš„ç‰¹å®šç«¯å£ï¼Œæ‰€ä»¥ä¸åŒçš„ç¨‹åºå°±èƒ½å–åˆ°è‡ªå·±æ‰€éœ€è¦çš„æ•°æ®ã€‚ â€œç«¯å£â€æ˜¯ 0 åˆ° 65535 ä¹‹é—´çš„ä¸€ä¸ªæ•´æ•°ï¼Œæ­£å¥½ 16 ä¸ªäºŒè¿›åˆ¶ä½ã€‚ 0 åˆ° 1023 çš„ç«¯å£è¢«ç³»ç»Ÿå ç”¨ï¼Œç”¨æˆ·åªèƒ½é€‰ç”¨å¤§äº 1023 çš„ç«¯å£ã€‚ä¸ç®¡æ˜¯æµè§ˆç½‘é¡µè¿˜æ˜¯åœ¨çº¿èŠå¤©ï¼Œåº”ç”¨ç¨‹åºä¼šéšæœºé€‰ç”¨ä¸€ä¸ªç«¯å£ï¼Œç„¶åä¸æœåŠ¡å™¨çš„ç›¸åº”ç«¯å£è”ç³»ã€‚ â€œä¼ è¾“å±‚â€çš„åŠŸèƒ½ï¼Œå°±æ˜¯å»ºç«‹â€œç«¯å£åˆ°ç«¯å£â€çš„é€šä¿¡ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€œç½‘ç»œå±‚â€çš„åŠŸèƒ½æ˜¯å»ºç«‹â€œä¸»æœºåˆ°ä¸»æœºâ€çš„é€šä¿¡ã€‚åªè¦ç¡®å®šä¸»æœºå’Œç«¯å£ï¼Œ æˆ‘ä»¬å°±èƒ½å®ç°ç¨‹åºä¹‹é—´çš„äº¤æµã€‚å› æ­¤ï¼ŒUnixç³»ç»Ÿå°±æŠŠä¸»æœº+ç«¯å£ï¼Œå«åšå¥—æ¥å­—socketã€‚æœ‰äº†å®ƒï¼Œå°±å¯ä»¥è¿›è¡Œç½‘ç»œåº”ç”¨ç¨‹åºå¼€å‘äº†ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:5:1","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ä¼ è¾“å±‚çš„ç”±æ¥"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" UDP åè®®æˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®åŒ…ä¸­åŠ å…¥ç«¯å£ä¿¡æ¯ï¼Œè¿™å°±éœ€è¦æ–°çš„åè®®ã€‚æœ€ç®€å•çš„å®ç°å«åš UDP åè®®ï¼Œå®ƒçš„æ ¼å¼å‡ ä¹å°±æ˜¯åœ¨æ•°æ®å‰é¢ï¼ŒåŠ ä¸Šç«¯å£å·ã€‚ UDP æ•°æ®åŒ…ï¼Œä¹Ÿæ˜¯ç”±â€œæ ‡å¤´â€å’Œâ€œæ•°æ®â€ä¸¤éƒ¨åˆ†ç»„æˆã€‚ UDPæ•°æ®æ ¼å¼_1 â€œæ ‡å¤´â€éƒ¨åˆ†ä¸»è¦å®šä¹‰äº†å‘å‡ºç«¯å£å’Œæ¥æ”¶ç«¯å£ï¼Œâ€œæ•°æ®â€éƒ¨åˆ†å°±æ˜¯å…·ä½“çš„å†…å®¹ã€‚ç„¶åï¼ŒæŠŠæ•´ä¸ª UDP æ•°æ®åŒ…æ”¾å…¥ IP æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ï¼Œè€Œå‰é¢è¯´è¿‡ï¼ŒIP æ•°æ®åŒ…åˆæ˜¯æ”¾åœ¨ä»¥å¤ªç½‘æ•°æ®åŒ…ä¹‹ä¸­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ç°åœ¨å˜æˆäº†ä¸‹é¢è¿™æ ·ï¼š UDPæ•°æ®æ ¼å¼_2 UDP æ•°æ®åŒ…éå¸¸ç®€å•ï¼Œâ€œæ ‡å¤´â€éƒ¨åˆ†ä¸€å…±åªæœ‰ 8 ä¸ªå­—èŠ‚ï¼Œæ€»é•¿åº¦ä¸è¶…è¿‡ 65,535 å­—èŠ‚ï¼Œæ­£å¥½æ”¾è¿›ä¸€ä¸ªIPæ•°æ®åŒ…ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:5:2","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#udp-åè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" TCP åè®®UDP åè®®çš„ä¼˜ç‚¹æ˜¯æ¯”è¾ƒç®€å•ï¼Œå®¹æ˜“å®ç°ï¼Œä½†æ˜¯ç¼ºç‚¹æ˜¯å¯é æ€§è¾ƒå·®ï¼Œä¸€æ—¦æ•°æ®åŒ…å‘å‡ºï¼Œæ— æ³•çŸ¥é“å¯¹æ–¹æ˜¯å¦æ”¶åˆ°ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæé«˜ç½‘ç»œå¯é æ€§ï¼ŒTCP åè®®å°±è¯ç”Ÿäº†ã€‚è¿™ä¸ªåè®®éå¸¸å¤æ‚ï¼Œä½†å¯ä»¥è¿‘ä¼¼è®¤ä¸ºï¼Œå®ƒå°±æ˜¯æœ‰ç¡®è®¤æœºåˆ¶çš„ UDP åè®®ï¼Œæ¯å‘å‡ºä¸€ä¸ªæ•°æ®åŒ…éƒ½è¦æ±‚ç¡®è®¤ã€‚å¦‚æœæœ‰ä¸€ä¸ªæ•°æ®åŒ…é—å¤±ï¼Œå°±æ”¶ä¸åˆ°ç¡®è®¤ï¼Œå‘å‡ºæ–¹å°±çŸ¥é“æœ‰å¿…è¦é‡å‘è¿™ä¸ªæ•°æ®åŒ…äº†ã€‚ å› æ­¤ï¼ŒTCP åè®®èƒ½å¤Ÿç¡®ä¿æ•°æ®ä¸ä¼šé—å¤±ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯è¿‡ç¨‹å¤æ‚ã€å®ç°å›°éš¾ã€æ¶ˆè€—è¾ƒå¤šçš„èµ„æºã€‚ TCP æ•°æ®åŒ…å’Œ UDP æ•°æ®åŒ…ä¸€æ ·ï¼Œéƒ½æ˜¯å†…åµŒåœ¨ IP æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ã€‚TCP æ•°æ®åŒ…æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Œç†è®ºä¸Šå¯ä»¥æ— é™é•¿ï¼Œä½†æ˜¯ä¸ºäº†ä¿è¯ç½‘ç»œçš„æ•ˆç‡ï¼Œ é€šå¸¸ TCP æ•°æ®åŒ…çš„é•¿åº¦ä¸ä¼šè¶…è¿‡ IP æ•°æ®åŒ…çš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å•ä¸ª TCP æ•°æ®åŒ…ä¸å¿…å†åˆ†å‰²ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:5:3","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#tcp-åè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" åº”ç”¨å±‚åº”ç”¨ç¨‹åºæ”¶åˆ°\"ä¼ è¾“å±‚\"çš„æ•°æ®ï¼Œæ¥ä¸‹æ¥å°±è¦è¿›è¡Œè§£è¯»ã€‚ç”±äºäº’è”ç½‘æ˜¯å¼€æ”¾æ¶æ„ï¼Œæ•°æ®æ¥æºäº”èŠ±å…«é—¨ï¼Œå¿…é¡»äº‹å…ˆè§„å®šå¥½æ ¼å¼ï¼Œå¦åˆ™æ ¹æœ¬æ— æ³•è§£è¯»ã€‚ â€œåº”ç”¨å±‚â€çš„ä½œç”¨ï¼Œå°±æ˜¯è§„å®šåº”ç”¨ç¨‹åºçš„æ•°æ®æ ¼å¼ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼ŒTCP åè®®å¯ä»¥ä¸ºå„ç§å„æ ·çš„ç¨‹åºä¼ é€’æ•°æ®ï¼Œæ¯”å¦‚ Emailã€WWWã€FTP ç­‰ç­‰ã€‚é‚£ä¹ˆï¼Œå¿…é¡»æœ‰ä¸åŒåè®®ï¼ˆæ¯”å¦‚ http åè®®ï¼‰è§„å®šç”µå­é‚®ä»¶ã€ç½‘é¡µã€FTP æ•°æ®çš„æ ¼å¼ï¼Œè¿™äº›åº”ç”¨ç¨‹åºåè®®å°±æ„æˆäº†\"åº”ç”¨å±‚\"ã€‚ è¿™æ˜¯æœ€é«˜çš„ä¸€å±‚ï¼Œç›´æ¥é¢å¯¹ç”¨æˆ·ã€‚å®ƒçš„æ•°æ®å°±æ”¾åœ¨ TCP æ•°æ®åŒ…çš„â€œæ•°æ®â€éƒ¨åˆ†ã€‚å› æ­¤ï¼Œç°åœ¨çš„ä»¥å¤ªç½‘çš„æ•°æ®åŒ…å°±å˜æˆä¸‹é¢è¿™æ ·ã€‚ åº”ç”¨å±‚æ•°æ®åŒ… ","date":"2022-03-27","objectID":"/net-protocol-glance/:6:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#åº”ç”¨å±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å°ç»“ç½‘ç»œé€šä¿¡å°±æ˜¯äº¤æ¢æ•°æ®åŒ…ã€‚ç”µè„‘ A å‘ç”µè„‘ B å‘é€ä¸€ä¸ªæ•°æ®åŒ…ï¼Œåè€…æ”¶åˆ°äº†ï¼Œå›å¤ä¸€ä¸ªæ•°æ®åŒ…ï¼Œä»è€Œå®ç°ä¸¤å°ç”µè„‘ä¹‹é—´çš„é€šä¿¡ã€‚æ•°æ®åŒ…çš„ç»“æ„ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¸‹é¢è¿™æ ·ï¼š æ•°æ®åŒ… å‘é€è¿™ä¸ªåŒ…ï¼Œéœ€è¦çŸ¥é“ä¸¤ä¸ªåœ°å€ï¼š å¯¹æ–¹çš„ MAC åœ°å€ å¯¹æ–¹çš„ IP åœ°å€ æœ‰äº†è¿™ä¸¤ä¸ªåœ°å€ï¼Œæ•°æ®åŒ…æ‰èƒ½å‡†ç¡®é€åˆ°æ¥æ”¶è€…æ‰‹ä¸­ã€‚ä½†æ˜¯ï¼ŒMAC åœ°å€æœ‰å±€é™æ€§ï¼Œå¦‚æœä¸¤å°ç”µè„‘ä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå°±æ— æ³•çŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€ï¼Œå¿…é¡»é€šè¿‡ç½‘å…³ï¼ˆgatewayï¼‰è½¬å‘ã€‚ ç½‘å…³ ä¸Šå›¾â˜ï¸ä¸­ï¼Œ1 å·ç”µè„‘è¦å‘ 4 å·ç”µè„‘å‘é€ä¸€ä¸ªæ•°æ®åŒ…ã€‚å®ƒå…ˆåˆ¤æ–­ 4 å·ç”µè„‘æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œç»“æœå‘ç°ä¸æ˜¯ï¼Œäºæ˜¯å°±æŠŠè¿™ä¸ªæ•°æ®åŒ…å‘åˆ°ç½‘å…³ Aã€‚ç½‘å…³ A é€šè¿‡è·¯ç”±åè®®ï¼Œå‘ç° 4 å·ç”µè„‘ä½äºå­ç½‘ç»œ Bï¼ŒåˆæŠŠæ•°æ®åŒ…å‘ç»™ç½‘å…³ Bï¼Œç½‘å…³ B å†è½¬å‘åˆ° 4 å·ç”µè„‘ã€‚ 1 å·ç”µè„‘æŠŠæ•°æ®åŒ…å‘åˆ°ç½‘å…³ Aï¼Œå¿…é¡»çŸ¥é“ç½‘å…³ A çš„ MAC åœ°å€ã€‚æ‰€ä»¥ï¼Œæ•°æ®åŒ…çš„ç›®æ ‡åœ°å€ï¼Œå®é™…ä¸Šåˆ†æˆä¸¤ç§æƒ…å†µï¼š åœºæ™¯ æ•°æ®åŒ…åœ°å€ åŒä¸€ä¸ªå­ç½‘ç»œ å¯¹æ–¹çš„ MAC åœ°å€ï¼Œå¯¹æ–¹çš„ IP åœ°å€ éåŒä¸€ä¸ªå­ç½‘ç»œ ç½‘å…³çš„ MAC åœ°å€ï¼Œå¯¹æ–¹çš„ IP åœ°å€ å‘é€æ•°æ®åŒ…ä¹‹å‰ï¼Œç”µè„‘å¿…é¡»åˆ¤æ–­å¯¹æ–¹æ˜¯å¦åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œç„¶åé€‰æ‹©ç›¸åº”çš„ MAC åœ°å€ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:7:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#å°ç»“"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä¸Šç½‘è®¾ç½®","date":"2022-03-27","objectID":"/net-protocol-glance/:8:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ä¸Šç½‘è®¾ç½®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" é™æ€IPåœ°å€ new computer é€šå¸¸ä½ å¿…é¡»åšä¸€äº›è®¾ç½®ã€‚æœ‰æ—¶ï¼Œç®¡ç†å‘˜ä¼šå‘Šè¯‰ä½ ä¸‹é¢å››ä¸ªå‚æ•°ï¼Œä½ æŠŠå®ƒä»¬å¡«å…¥æ“ä½œç³»ç»Ÿï¼Œè®¡ç®—æœºå°±èƒ½è¿ä¸Šç½‘äº†ï¼š æœ¬æœºçš„IPåœ°å€ å­ç½‘æ©ç  ç½‘å…³çš„IPåœ°å€ DNSçš„IPåœ°å€ ä¸‹å›¾æ˜¯Windowsç³»ç»Ÿçš„è®¾ç½®çª—å£ã€‚ ç³»ç»Ÿè®¾ç½® è¿™å››ä¸ªå‚æ•°ç¼ºä¸€ä¸å¯ã€‚ç”±äºå®ƒä»¬æ˜¯ç»™å®šçš„ï¼Œè®¡ç®—æœºæ¯æ¬¡å¼€æœºï¼Œéƒ½ä¼šåˆ†åˆ°åŒæ ·çš„IPåœ°å€ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µè¢«ç§°ä½œâ€œé™æ€IPåœ°å€ä¸Šç½‘â€ã€‚ ä½†æ˜¯ï¼Œè¿™æ ·çš„è®¾ç½®å¾ˆä¸“ä¸šï¼Œæ™®é€šç”¨æˆ·æœ›è€Œç”Ÿç•ï¼Œè€Œä¸”å¦‚æœä¸€å°ç”µè„‘çš„IPåœ°å€ä¿æŒä¸å˜ï¼Œå…¶ä»–ç”µè„‘å°±ä¸èƒ½ä½¿ç”¨è¿™ä¸ªåœ°å€ï¼Œä¸å¤Ÿçµæ´»ã€‚å‡ºäºè¿™ä¸¤ä¸ªåŸå› ï¼Œå¤§å¤šæ•°ç”¨æˆ·ä½¿ç”¨â€œåŠ¨æ€IPåœ°å€ä¸Šç½‘â€ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:8:1","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#é™æ€ipåœ°å€"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" åŠ¨æ€IPåœ°å€æ‰€è°“â€œåŠ¨æ€IPåœ°å€â€ï¼Œæ˜¯æŒ‡è®¡ç®—æœºå¼€æœºåï¼Œä¼šè‡ªåŠ¨åˆ†é…åˆ°ä¸€ä¸ª IP åœ°å€ï¼Œä¸ç”¨äººä¸ºè®¾å®šã€‚å®ƒä½¿ç”¨çš„åè®®å«åš DHCP åè®®ã€‚ è¿™ä¸ªåè®®è§„å®šï¼Œæ¯ä¸€ä¸ªå­ç½‘ç»œä¸­ï¼Œæœ‰ä¸€å°è®¡ç®—æœºè´Ÿè´£ç®¡ç†æœ¬ç½‘ç»œçš„æ‰€æœ‰IPåœ°å€ï¼Œå®ƒå«åšâ€œDHCPæœåŠ¡å™¨â€ã€‚æ–°çš„è®¡ç®—æœºåŠ å…¥ç½‘ç»œï¼Œå¿…é¡»å‘â€œDHCPæœåŠ¡å™¨â€å‘é€ä¸€ä¸ªâ€œDHCPè¯·æ±‚â€æ•°æ®åŒ…ï¼Œç”³è¯·IPåœ°å€å’Œç›¸å…³çš„ç½‘ç»œå‚æ•°ã€‚ å‰é¢è¯´è¿‡ï¼Œå¦‚æœä¸¤å°è®¡ç®—æœºåœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œå¿…é¡»çŸ¥é“å¯¹æ–¹çš„ MAC åœ°å€å’Œ IP åœ°å€ï¼Œæ‰èƒ½å‘é€æ•°æ®åŒ…ã€‚ä½†æ˜¯ï¼Œæ–°åŠ å…¥çš„è®¡ç®—æœºä¸çŸ¥é“è¿™ä¸¤ä¸ªåœ°å€ï¼Œæ€ä¹ˆå‘é€æ•°æ®åŒ…å‘¢ï¼Ÿ DHCPåè®®åšäº†ä¸€äº›å·§å¦™çš„è§„å®šã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:8:2","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#åŠ¨æ€ipåœ°å€"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" DHCPåè®®é¦–å…ˆï¼Œå®ƒæ˜¯ä¸€ç§åº”ç”¨å±‚åè®®ï¼Œå»ºç«‹åœ¨UDPåè®®ä¹‹ä¸Šï¼Œæ‰€ä»¥æ•´ä¸ªæ•°æ®åŒ…æ˜¯è¿™æ ·çš„ï¼š HDCPåè®®æ•°æ®åŒ… æœ€å‰é¢çš„â€œä»¥å¤ªç½‘æ ‡å¤´â€ï¼Œè®¾ç½®å‘å‡ºæ–¹ï¼ˆæœ¬æœºï¼‰çš„MACåœ°å€å’Œæ¥æ”¶æ–¹ï¼ˆDHCPæœåŠ¡å™¨ï¼‰çš„MACåœ°å€ã€‚å‰è€…å°±æ˜¯æœ¬æœºç½‘å¡çš„MACåœ°å€ï¼Œåè€…è¿™æ—¶ä¸çŸ¥é“ï¼Œå°±å¡«å…¥ä¸€ä¸ªå¹¿æ’­åœ°å€ï¼šFF-FF-FF-FF-FF-FFã€‚ åé¢çš„â€œIPæ ‡å¤´â€ï¼Œè®¾ç½®å‘å‡ºæ–¹çš„IPåœ°å€å’Œæ¥æ”¶æ–¹çš„IPåœ°å€ã€‚è¿™æ—¶ï¼Œå¯¹äºè¿™ä¸¤è€…ï¼Œæœ¬æœºéƒ½ä¸çŸ¥é“ã€‚äºæ˜¯ï¼Œå‘å‡ºæ–¹çš„IPåœ°å€å°±è®¾ä¸º0.0.0.0ï¼Œæ¥æ”¶æ–¹çš„IPåœ°å€è®¾ä¸º255.255.255.255ã€‚ æœ€åçš„â€œUDPæ ‡å¤´â€ï¼Œè®¾ç½®å‘å‡ºæ–¹çš„ç«¯å£å’Œæ¥æ”¶æ–¹çš„ç«¯å£ã€‚è¿™ä¸€éƒ¨åˆ†æ˜¯ DHCP åè®®è§„å®šå¥½çš„ï¼Œå‘å‡ºæ–¹æ˜¯ 68 ç«¯å£ï¼Œæ¥æ”¶æ–¹æ˜¯ 67 ç«¯å£ã€‚ è¿™ä¸ªæ•°æ®åŒ…æ„é€ å®Œæˆåï¼Œå°±å¯ä»¥å‘å‡ºäº†ã€‚ä»¥å¤ªç½‘æ˜¯å¹¿æ’­å‘é€ï¼ŒåŒä¸€ä¸ªå­ç½‘ç»œçš„æ¯å°è®¡ç®—æœºéƒ½æ”¶åˆ°äº†è¿™ä¸ªåŒ…ã€‚å› ä¸ºæ¥æ”¶æ–¹çš„MACåœ°å€æ˜¯FF-FF-FF-FF-FF-FF ï¼Œçœ‹ä¸å‡ºæ˜¯å‘ç»™è°çš„ï¼Œæ‰€ä»¥æ¯å°æ”¶åˆ°è¿™ä¸ªåŒ…çš„è®¡ç®—æœºï¼Œè¿˜å¿…é¡»åˆ†æè¿™ä¸ªåŒ…çš„ IP åœ°å€ï¼Œæ‰èƒ½ç¡®å®šæ˜¯ä¸æ˜¯å‘ç»™è‡ªå·±çš„ã€‚å½“çœ‹åˆ°å‘å‡ºæ–¹ IP åœ°å€æ˜¯0.0.0.0ï¼Œæ¥æ”¶æ–¹æ˜¯255.255.255.255ï¼Œäºæ˜¯ DHCP æœåŠ¡å™¨çŸ¥é“â€œè¿™ä¸ªåŒ…æ˜¯å‘ç»™æˆ‘çš„â€ï¼Œè€Œå…¶ä»–è®¡ç®—æœºå°±å¯ä»¥ä¸¢å¼ƒè¿™ä¸ªåŒ…ã€‚ æ¥ä¸‹æ¥ï¼ŒDHCP æœåŠ¡å™¨è¯»å‡ºè¿™ä¸ªåŒ…çš„æ•°æ®å†…å®¹ï¼Œåˆ†é…å¥½ IP åœ°å€ï¼Œå‘é€å›å»ä¸€ä¸ªâ€œDHCPå“åº”â€æ•°æ®åŒ…ã€‚è¿™ä¸ªå“åº”åŒ…çš„ç»“æ„ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œä»¥å¤ªç½‘æ ‡å¤´çš„ MAC åœ°å€æ˜¯åŒæ–¹çš„ç½‘å¡åœ°å€ï¼ŒIP æ ‡å¤´çš„ IP åœ°å€æ˜¯ DHCP æœåŠ¡å™¨çš„ IP åœ°å€ï¼ˆå‘å‡ºæ–¹ï¼‰å’Œ255.255.255.255ï¼ˆæ¥æ”¶æ–¹ï¼‰ï¼ŒUDP æ ‡å¤´çš„ç«¯å£æ˜¯ 67ï¼ˆå‘å‡ºæ–¹ï¼‰å’Œ 68ï¼ˆæ¥æ”¶æ–¹ï¼‰ï¼Œåˆ†é…ç»™è¯·æ±‚ç«¯çš„ IP åœ°å€å’Œæœ¬ç½‘ç»œçš„å…·ä½“å‚æ•°åˆ™åŒ…å«åœ¨ Data éƒ¨åˆ†ã€‚ æ–°åŠ å…¥çš„è®¡ç®—æœºæ”¶åˆ°è¿™ä¸ªå“åº”åŒ…ï¼Œäºæ˜¯å°±çŸ¥é“äº†è‡ªå·±çš„IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³åœ°å€ã€DNS æœåŠ¡å™¨ç­‰ç­‰å‚æ•°ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:8:3","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#dhcpåè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å°ç»“ä¸ç®¡æ˜¯â€œé™æ€IPåœ°å€â€è¿˜æ˜¯â€œåŠ¨æ€IPåœ°å€â€ï¼Œç”µè„‘ä¸Šç½‘çš„é¦–è¦æ­¥éª¤ï¼Œæ˜¯ç¡®å®šå››ä¸ªå‚æ•°ã€‚è¿™å››ä¸ªå€¼å¾ˆé‡è¦ï¼Œå€¼å¾—é‡å¤ä¸€éï¼š æœ¬æœºçš„IPåœ°å€ å­ç½‘æ©ç  ç½‘å…³çš„IPåœ°å€ DNSçš„IPåœ°å€ æœ‰äº†è¿™å‡ ä¸ªæ•°å€¼ï¼Œç”µè„‘å°±å¯ä»¥ä¸Šç½‘\"å†²æµª\"äº†ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:8:4","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#å°ç»“-1"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä¸€ä¸ªå®ä¾‹","date":"2022-03-27","objectID":"/net-protocol-glance/:9:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ä¸€ä¸ªå®ä¾‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æœ¬æœºå‚æ•°æˆ‘ä»¬å‡å®šï¼Œç”¨æˆ·è®¾ç½®å¥½äº†è‡ªå·±çš„ç½‘ç»œå‚æ•°ï¼š æœ¬æœºçš„IPåœ°å€ï¼š192.168.1.100 å­ç½‘æ©ç ï¼š255.255.255.0 ç½‘å…³çš„IPåœ°å€ï¼š192.168.1.1 DNSçš„IPåœ°å€ï¼š8.8.8.8 ç„¶åä»–æ‰“å¼€æµè§ˆå™¨ï¼Œæƒ³è¦è®¿é—® Googleï¼Œåœ¨åœ°å€æ è¾“å…¥äº†ç½‘å€ï¼šwww.google.comã€‚ è®¿é—®google è¿™æ„å‘³ç€ï¼Œæµè§ˆå™¨è¦å‘ Google å‘é€ä¸€ä¸ªç½‘é¡µè¯·æ±‚çš„æ•°æ®åŒ…ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:9:1","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#æœ¬æœºå‚æ•°"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" DNSåè®®æˆ‘ä»¬çŸ¥é“ï¼Œå‘é€æ•°æ®åŒ…ï¼Œå¿…é¡»è¦çŸ¥é“å¯¹æ–¹çš„ IP åœ°å€ã€‚ä½†æ˜¯ï¼Œç°åœ¨ï¼Œæˆ‘ä»¬åªçŸ¥é“ç½‘å€ www.google.comï¼Œä¸çŸ¥é“å®ƒçš„ IP åœ°å€ã€‚ DNS åè®®å¯ä»¥å¸®åŠ©æˆ‘ä»¬ï¼Œå°†è¿™ä¸ªç½‘å€è½¬æ¢æˆ IP åœ°å€ã€‚å·²çŸ¥DNSæœåŠ¡å™¨ä¸º8.8.8.8ï¼Œäºæ˜¯æˆ‘ä»¬å‘è¿™ä¸ªåœ°å€å‘é€ä¸€ä¸ª DNS æ•°æ®åŒ…ï¼ˆ53ç«¯å£ï¼‰ã€‚ DNSæ•°æ®åŒ… ç„¶åï¼ŒDNS æœåŠ¡å™¨åšå‡ºå“åº”ï¼Œå‘Šè¯‰æˆ‘ä»¬ Google çš„ I Påœ°å€æ˜¯172.194.72.105ã€‚äºæ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“äº†å¯¹æ–¹çš„ IP åœ°å€ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:9:2","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#dnsåè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å­ç½‘æ©ç æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦åˆ¤æ–­ï¼Œè¿™ä¸ª IP åœ°å€æ˜¯ä¸æ˜¯åœ¨åŒä¸€ä¸ªå­ç½‘ç»œï¼Œè¿™å°±è¦ç”¨åˆ°å­ç½‘æ©ç ã€‚ å·²çŸ¥å­ç½‘æ©ç æ˜¯255.255.255.0ï¼Œæœ¬æœºç”¨å®ƒå¯¹è‡ªå·±çš„ IP åœ°å€192.168.1.100ï¼Œåšä¸€ä¸ªäºŒè¿›åˆ¶çš„ANDè¿ç®—ï¼ˆä¸¤ä¸ªæ•°ä½éƒ½ä¸º1ï¼Œç»“æœä¸º1ï¼Œå¦åˆ™ä¸º0ï¼‰ï¼Œè®¡ç®—ç»“æœä¸º192.168.1.0ï¼›ç„¶åå¯¹ Google çš„ IP åœ°å€172.194.72.105ä¹Ÿåšä¸€ä¸ªANDè¿ç®—ï¼Œè®¡ç®—ç»“æœä¸º172.194.72.0ã€‚è¿™ä¸¤ä¸ªç»“æœä¸ç›¸ç­‰ï¼Œæ‰€ä»¥ç»“è®ºæ˜¯ï¼ŒGoogle ä¸æœ¬æœºä¸åœ¨åŒä¸€ä¸ªå­ç½‘ç»œã€‚ å› æ­¤ï¼Œæˆ‘ä»¬è¦å‘ Google å‘é€æ•°æ®åŒ…ï¼Œå¿…é¡»é€šè¿‡ç½‘å…³192.168.1.1è½¬å‘ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¥æ”¶æ–¹çš„ MAC åœ°å€å°†æ˜¯ç½‘å…³çš„ MAC åœ°å€ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:9:3","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#å­ç½‘æ©ç "},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" åº”ç”¨å±‚åè®®æµè§ˆç½‘é¡µç”¨çš„æ˜¯ HTTP åè®®ï¼Œå®ƒçš„æ•´ä¸ªæ•°æ®åŒ…æ„é€ æ˜¯è¿™æ ·çš„ï¼š HTTPåè®®æ•°æ®åŒ… HTTPéƒ¨åˆ†çš„å†…å®¹ï¼Œç±»ä¼¼äºä¸‹é¢è¿™æ ·ï¼š GET / HTTP/1.1 Host: www.google.com Connection: keep-alive User-Agent: Mozilla/5.0 (Windows NT 6.1) ...... Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Encoding: gzip,deflate,sdch Accept-Language: zh-CN,zh;q=0.8 Accept-Charset: GBK,utf-8;q=0.7,*;q=0.3 Cookie: ... ... æˆ‘ä»¬å‡å®šè¿™ä¸ªéƒ¨åˆ†çš„é•¿åº¦ä¸º 4960 å­—èŠ‚ï¼Œå®ƒä¼šè¢«åµŒåœ¨ TCP æ•°æ®åŒ…ä¹‹ä¸­ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:9:4","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#åº”ç”¨å±‚åè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" TCPåè®®TCP æ•°æ®åŒ…éœ€è¦è®¾ç½®ç«¯å£ï¼Œæ¥æ”¶æ–¹ï¼ˆGoogleï¼‰çš„ HTTP ç«¯å£é»˜è®¤æ˜¯ 80ï¼Œå‘é€æ–¹ï¼ˆæœ¬æœºï¼‰çš„ç«¯å£æ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„ 1024-65535 ä¹‹é—´çš„æ•´æ•°ï¼Œå‡å®šä¸º 51775ã€‚TCP æ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º 20 å­—èŠ‚ï¼ŒåŠ ä¸ŠåµŒå…¥ HTTP çš„æ•°æ®åŒ…ï¼Œæ€»é•¿åº¦å˜ä¸º 4980 å­—èŠ‚ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:9:5","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#tcpåè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" IPåè®®ç„¶åï¼ŒTCP æ•°æ®åŒ…å†åµŒå…¥ IP æ•°æ®åŒ…ã€‚IP æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„ IP åœ°å€ï¼Œè¿™æ˜¯å·²çŸ¥çš„ï¼Œå‘é€æ–¹æ˜¯192.168.1.100ï¼ˆæœ¬æœºï¼‰ï¼Œæ¥æ”¶æ–¹æ˜¯172.194.72.105ï¼ˆGoogleï¼‰ã€‚IP æ•°æ®åŒ…çš„æ ‡å¤´é•¿åº¦ä¸º 20 å­—èŠ‚ï¼ŒåŠ ä¸ŠåµŒå…¥çš„ TCP æ•°æ®åŒ…ï¼Œæ€»é•¿åº¦å˜ä¸º 5000 å­—èŠ‚ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:9:6","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ipåè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä»¥å¤ªç½‘åè®®æœ€åï¼ŒIP æ•°æ®åŒ…åµŒå…¥ä»¥å¤ªç½‘æ•°æ®åŒ…ã€‚ä»¥å¤ªç½‘æ•°æ®åŒ…éœ€è¦è®¾ç½®åŒæ–¹çš„ MAC åœ°å€ï¼Œå‘é€æ–¹ä¸ºæœ¬æœºçš„ç½‘å¡ MAC åœ°å€ï¼Œæ¥æ”¶æ–¹ä¸ºç½‘å…³192.168.1.1çš„ MAC åœ°å€ï¼ˆé€šè¿‡ ARP åè®®å¾—åˆ°ï¼‰ã€‚ ä»¥å¤ªç½‘æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†ï¼Œæœ€å¤§é•¿åº¦ä¸º 1500 å­—èŠ‚ï¼Œè€Œç°åœ¨çš„ IP æ•°æ®åŒ…é•¿åº¦ä¸º 5000 å­—èŠ‚ã€‚å› æ­¤ï¼ŒIP æ•°æ®åŒ…å¿…é¡»åˆ†å‰²æˆå››ä¸ªåŒ…ã€‚å› ä¸ºæ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„ IP æ ‡å¤´ï¼ˆ20å­—èŠ‚ï¼‰ï¼Œæ‰€ä»¥å››ä¸ªåŒ…çš„ IP æ•°æ®åŒ…çš„é•¿åº¦åˆ†åˆ«ä¸º 1500ã€1500ã€1500ã€560ã€‚ ä»¥å¤ªç½‘åè®® ","date":"2022-03-27","objectID":"/net-protocol-glance/:9:7","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#ä»¥å¤ªç½‘åè®®-1"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æœåŠ¡å™¨ç«¯å“åº”ç»è¿‡å¤šä¸ªç½‘å…³çš„è½¬å‘ï¼ŒGoogle çš„æœåŠ¡å™¨172.194.72.105ï¼Œæ”¶åˆ°äº†è¿™å››ä¸ªä»¥å¤ªç½‘æ•°æ®åŒ…ã€‚ æ ¹æ®IPæ ‡å¤´çš„åºå·ï¼ŒGoogle å°†å››ä¸ªåŒ…æ‹¼èµ·æ¥ï¼Œå–å‡ºå®Œæ•´çš„ TCP æ•°æ®åŒ…ï¼Œç„¶åè¯»å‡ºé‡Œé¢çš„â€œHTTPè¯·æ±‚â€ï¼Œæ¥ç€åšå‡ºâ€œHTTPå“åº”â€ï¼Œå†ç”¨ TCP åè®®å‘å›æ¥ã€‚ æœ¬æœºæ”¶åˆ° HTTP å“åº”ä»¥åï¼Œå°±å¯ä»¥å°†ç½‘é¡µæ˜¾ç¤ºå‡ºæ¥ï¼Œå®Œæˆä¸€æ¬¡ç½‘ç»œé€šä¿¡ã€‚ æœåŠ¡å™¨ç›¸åº” ä¸Šé¢çš„ä¾‹å­ï¼Œè™½ç„¶ç»è¿‡äº†ç®€åŒ–ï¼Œä½†å®ƒå¤§è‡´ä¸Šåæ˜ äº†äº’è”ç½‘åè®®çš„æ•´ä¸ªé€šä¿¡è¿‡ç¨‹ã€‚ ","date":"2022-03-27","objectID":"/net-protocol-glance/:9:8","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#æœåŠ¡å™¨ç«¯å“åº”"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å‚è€ƒ äº’è”ç½‘åè®®å…¥é—¨ ","date":"2022-03-27","objectID":"/net-protocol-glance/:10:0","series":["reproduce"],"tags":["network","äº’è”ç½‘åè®®"],"title":"äº’è”ç½‘åè®®ç®€è¿°","uri":"/net-protocol-glance/#å‚è€ƒ"},{"categories":null,"content":" æˆ‘ä»¬å·²ç»åœ¨ä¸€èµ· ","date":"2022-03-25","objectID":"/love/:0:0","series":null,"tags":null,"title":"Since 2019/09/17","uri":"/love/#æˆ‘ä»¬å·²ç»åœ¨ä¸€èµ·"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"OAuth2.0,ç¬¬ä¸‰æ–¹ç™»å½•,ä»¤ç‰Œ,TOKEN,æˆæƒç ,æƒé™","date":"2022-03-22","objectID":"/oauth2.0/","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä»€ä¹ˆæ˜¯ OAuth2.0OAuth çš„æ ¸å¿ƒå°±æ˜¯å‘ç¬¬ä¸‰æ–¹åº”ç”¨é¢å‘ä»¤ç‰Œï¼Œæ¯”å¦‚ç½‘ç«™ A æƒ³ç”¨ Github çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆå¯¹äº Github æ¥è¯´ï¼Œç½‘ç«™ A å°±æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨ã€‚ ç¬¬ä¸‰æ–¹åº”ç”¨ç”³è¯·ä»¤ç‰Œä¹‹å‰ï¼Œéƒ½å¿…é¡»å…ˆåˆ°ç³»ç»Ÿå¤‡æ¡ˆï¼Œæ¯”å¦‚ç”³è¯· Github çš„ä»¤ç‰Œï¼Œå¾—å…ˆåˆ°githubå¤‡æ¡ˆç™»è®°ï¼Œ è¯´æ˜è‡ªå·±çš„èº«ä»½ï¼Œç„¶åä¼šæ‹¿åˆ°ä¸¤ä¸ªèº«ä»½è¯†åˆ«ç ï¼šå®¢æˆ·ç«¯ IDï¼ˆclient IDï¼‰å’Œå®¢æˆ·ç«¯å¯†é’¥ï¼ˆclient secretï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ä»¤ç‰Œè¢«æ»¥ç”¨ï¼Œæ²¡æœ‰å¤‡æ¡ˆè¿‡çš„ç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œæ˜¯ä¸ä¼šæ‹¿åˆ°ä»¤ç‰Œçš„ã€‚ ä»¤ç‰Œçš„è¯·æ±‚å’Œå“åº”æ ‡å‡†åŒ–ä¹‹åå°±æ˜¯ OAuth2.0ã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:1:0","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#ä»€ä¹ˆæ˜¯-oauth20"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è®¤è¯å’Œæˆæƒçš„åŒºåˆ«è®¤è¯æ˜¯è¦è¾“å…¥å¸å·å’Œå¯†ç æ¥è¯æ˜æˆ‘æ˜¯æˆ‘ã€‚ æˆæƒæ˜¯å¹¶éé€šè¿‡å¸å·å’Œå¯†ç æ¥æŠŠæˆ‘çš„ä¸œè¥¿å€Ÿç»™å…¶ä»–äººã€‚ è¿™å…¶ä¸­çš„å…³é”®å°±æ˜¯ï¼Œæ˜¯å¦éœ€è¦è¾“å…¥å¸å·å¯†ç ã€‚OAuth ä¸éœ€è¦è¾“å…¥å¸å·å’Œå¯†ç ï¼Œè¦åšçš„åªæ˜¯æˆæƒã€‚ è®¤è¯å’Œæˆæƒ ","date":"2022-03-22","objectID":"/oauth2.0/:2:0","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#è®¤è¯å’Œæˆæƒçš„åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æˆæƒæ–¹å¼OAuth 2.0 è§„å®šäº†å››ç§è·å¾—ä»¤ç‰Œçš„æµç¨‹ã€‚å¯ä»¥é€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„é‚£ä¸€ç§ï¼Œå‘ç¬¬ä¸‰æ–¹åº”ç”¨é¢å‘ä»¤ç‰Œã€‚ä¸‹é¢å°±æ˜¯è¿™å››ç§æˆæƒæ–¹å¼ã€‚ æˆæƒç ï¼ˆauthorization-codeï¼‰ éšè—å¼ï¼ˆimplicitï¼‰ å¯†ç å¼ï¼ˆpasswordï¼‰ï¼š å®¢æˆ·ç«¯å‡­è¯ï¼ˆclient credentialsï¼‰ ä¸ç®¡å“ªä¸€ç§æˆæƒæ–¹å¼ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨ç”³è¯·ä»¤ç‰Œä¹‹å‰ï¼Œéƒ½å¿…é¡»å…ˆåˆ°ç³»ç»Ÿå¤‡æ¡ˆï¼Œè¯´æ˜è‡ªå·±çš„èº«ä»½ï¼Œç„¶åä¼šæ‹¿åˆ°ä¸¤ä¸ªèº«ä»½è¯†åˆ«ç ï¼šå®¢æˆ·ç«¯ IDï¼ˆclient IDï¼‰å’Œå®¢æˆ·ç«¯å¯†é’¥ï¼ˆclient secretï¼‰ã€‚è¿™æ˜¯ä¸ºäº†é˜²æ­¢ä»¤ç‰Œè¢«æ»¥ç”¨ï¼Œæ²¡æœ‰å¤‡æ¡ˆè¿‡çš„ç¬¬ä¸‰æ–¹åº”ç”¨ï¼Œæ˜¯ä¸ä¼šæ‹¿åˆ°ä»¤ç‰Œçš„ã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:3:0","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#æˆæƒæ–¹å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æˆæƒç å¼æˆæƒç ï¼ˆauthorization codeï¼‰æ–¹å¼ï¼ŒæŒ‡çš„æ˜¯ç¬¬ä¸‰æ–¹åº”ç”¨å…ˆç”³è¯·ä¸€ä¸ªæˆæƒç ï¼Œç„¶åå†ç”¨è¯¥ç è·å–ä»¤ç‰Œã€‚ è¿™ç§æ–¹å¼æ˜¯æœ€å¸¸ç”¨çš„æµç¨‹ï¼Œå®‰å…¨æ€§ä¹Ÿæœ€é«˜ï¼Œå®ƒé€‚ç”¨äºé‚£äº›æœ‰åç«¯çš„ Web åº”ç”¨ã€‚æˆæƒç é€šè¿‡å‰ç«¯ä¼ é€ï¼Œä»¤ç‰Œåˆ™æ˜¯å‚¨å­˜åœ¨åç«¯ï¼Œè€Œä¸”æ‰€æœ‰ä¸èµ„æºæœåŠ¡å™¨çš„é€šä¿¡éƒ½åœ¨åç«¯å®Œæˆã€‚è¿™æ ·çš„å‰åç«¯åˆ†ç¦»ï¼Œå¯ä»¥é¿å…ä»¤ç‰Œæ³„æ¼ã€‚ ç¬¬ä¸€æ­¥ï¼ŒA ç½‘ç«™æä¾›ä¸€ä¸ªé“¾æ¥ï¼Œç”¨æˆ·ç‚¹å‡»åå°±ä¼šè·³è½¬åˆ° B ç½‘ç«™ï¼Œæˆæƒç”¨æˆ·æ•°æ®ç»™ A ç½‘ç«™ä½¿ç”¨ã€‚ä¸‹é¢å°±æ˜¯ A ç½‘ç«™è·³è½¬ B ç½‘ç«™çš„ä¸€ä¸ªç¤ºæ„é“¾æ¥ã€‚ https://b.com/oauth/authorize? response_type=code\u0026 client_id=CLIENT_ID\u0026 redirect_uri=CALLBACK_URL\u0026 scope=read ä¸Šé¢ URL ä¸­ï¼Œresponse_typeå‚æ•°è¡¨ç¤ºè¦æ±‚è¿”å›æˆæƒç ï¼ˆcodeï¼‰ï¼Œclient_idå‚æ•°è®© B çŸ¥é“æ˜¯è°åœ¨è¯·æ±‚ï¼Œredirect_uriå‚æ•°æ˜¯ B æ¥å—æˆ–æ‹’ç»è¯·æ±‚åçš„è·³è½¬ç½‘å€ï¼Œscopeå‚æ•°è¡¨ç¤ºè¦æ±‚çš„æˆæƒèŒƒå›´ï¼ˆè¿™é‡Œæ˜¯åªè¯»ï¼‰ã€‚ æˆæƒç æ–¹å¼ ç¬¬äºŒæ­¥ï¼Œç”¨æˆ·è·³è½¬åï¼ŒB ç½‘ç«™ä¼šè¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œç„¶åè¯¢é—®æ˜¯å¦åŒæ„ç»™äºˆ A ç½‘ç«™æˆæƒã€‚ç”¨æˆ·è¡¨ç¤ºåŒæ„ï¼Œè¿™æ—¶ B ç½‘ç«™å°±ä¼šè·³å›redirect_uriå‚æ•°æŒ‡å®šçš„ç½‘å€ã€‚è·³è½¬æ—¶ï¼Œä¼šä¼ å›ä¸€ä¸ªæˆæƒç ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š https://a.com/callback?code=AUTHORIZATION_CODE ä¸Šé¢ URL ä¸­ï¼Œcodeå‚æ•°å°±æ˜¯æˆæƒç ã€‚ æˆæƒç  ç¬¬ä¸‰æ­¥ï¼ŒA ç½‘ç«™æ‹¿åˆ°æˆæƒç ä»¥åï¼Œå°±å¯ä»¥åœ¨åç«¯ï¼Œå‘ B ç½‘ç«™è¯·æ±‚ä»¤ç‰Œã€‚ https://b.com/oauth/token? client_id=CLIENT_ID\u0026 client_secret=CLIENT_SECRET\u0026 grant_type=authorization_code\u0026 code=AUTHORIZATION_CODE\u0026 redirect_uri=CALLBACK_URL ä¸Šé¢ URL ä¸­ï¼Œclient_id å‚æ•°å’Œ client_secret å‚æ•°ç”¨æ¥è®© B ç¡®è®¤ A çš„èº«ä»½ï¼ˆclient_secret å‚æ•°æ˜¯ä¿å¯†çš„ï¼Œå› æ­¤åªèƒ½åœ¨åç«¯å‘è¯·æ±‚ï¼‰ï¼Œgrant_type å‚æ•°çš„å€¼æ˜¯ AUTHORIZATION_CODEï¼Œè¡¨ç¤ºé‡‡ç”¨çš„æˆæƒæ–¹å¼æ˜¯æˆæƒç ï¼Œcode å‚æ•°æ˜¯ä¸Šä¸€æ­¥æ‹¿åˆ°çš„æˆæƒç ï¼Œredirect_uri å‚æ•°æ˜¯ä»¤ç‰Œé¢å‘åçš„å›è°ƒç½‘å€ã€‚ è¯·æ±‚ä»¤ç‰Œ ç¬¬å››æ­¥ï¼ŒB ç½‘ç«™æ”¶åˆ°è¯·æ±‚ä»¥åï¼Œå°±ä¼šé¢å‘ä»¤ç‰Œã€‚å…·ä½“åšæ³•æ˜¯å‘ redirect_uri æŒ‡å®šçš„ç½‘å€ï¼Œå‘é€ä¸€æ®µ JSON æ•°æ®ã€‚ { \"access_token\":\"ACCESS_TOKEN\", \"token_type\":\"bearer\", \"expires_in\":2592000, \"refresh_token\":\"REFRESH_TOKEN\", \"scope\":\"read\", \"uid\":100101, \"info\":{...} } ä¸Šé¢ JSON æ•°æ®ä¸­ï¼Œaccess_token å­—æ®µå°±æ˜¯ä»¤ç‰Œï¼ŒA ç½‘ç«™åœ¨åç«¯æ‹¿åˆ°äº†ã€‚ è·å–ä»¤ç‰Œ ","date":"2022-03-22","objectID":"/oauth2.0/:3:1","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#æˆæƒç å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" éšè—å¼æœ‰äº› Web åº”ç”¨æ˜¯çº¯å‰ç«¯åº”ç”¨ï¼Œæ²¡æœ‰åç«¯ã€‚è¿™æ—¶å°±ä¸èƒ½ç”¨ä¸Šé¢çš„æ–¹å¼äº†ï¼Œå¿…é¡»å°†ä»¤ç‰Œå‚¨å­˜åœ¨å‰ç«¯ã€‚å…è®¸ç›´æ¥å‘å‰ç«¯é¢å‘ä»¤ç‰Œã€‚è¿™ç§æ–¹å¼æ²¡æœ‰æˆæƒç è¿™ä¸ªä¸­é—´æ­¥éª¤ï¼Œæ‰€ä»¥ç§°ä¸º â€œéšè—å¼â€ï¼ˆimplicitï¼‰ã€‚ ç¬¬ä¸€æ­¥ï¼ŒA ç½‘ç«™æä¾›ä¸€ä¸ªé“¾æ¥ï¼Œè¦æ±‚ç”¨æˆ·è·³è½¬åˆ° B ç½‘ç«™ï¼Œæˆæƒç”¨æˆ·æ•°æ®ç»™ A ç½‘ç«™ä½¿ç”¨ã€‚ https://b.com/oauth/authorize? response_type=token\u0026 client_id=CLIENT_ID\u0026 redirect_uri=CALLBACK_URL\u0026 scope=read ä¸Šé¢ URL ä¸­ï¼Œresponse_typeå‚æ•°ä¸ºtokenï¼Œè¡¨ç¤ºè¦æ±‚ç›´æ¥è¿”å›ä»¤ç‰Œã€‚ ç¬¬äºŒæ­¥ï¼Œç”¨æˆ·è·³è½¬åˆ° B ç½‘ç«™ï¼Œç™»å½•ååŒæ„ç»™äºˆ A ç½‘ç«™æˆæƒã€‚è¿™æ—¶ï¼ŒB ç½‘ç«™å°±ä¼šè·³å› redirect_uri å‚æ•°æŒ‡å®šçš„è·³è½¬ç½‘å€ï¼Œå¹¶ä¸”æŠŠä»¤ç‰Œä½œä¸º URL å‚æ•°ï¼Œä¼ ç»™ A ç½‘ç«™ã€‚ https://a.com/callback#token=ACCESS_TOKEN ä¸Šé¢ URL ä¸­ï¼Œtokenå‚æ•°å°±æ˜¯ä»¤ç‰Œï¼ŒA ç½‘ç«™å› æ­¤ç›´æ¥åœ¨å‰ç«¯æ‹¿åˆ°ä»¤ç‰Œã€‚ æ³¨æ„ï¼Œä»¤ç‰Œçš„ä½ç½®æ˜¯ URL é”šç‚¹ï¼ˆfragmentï¼‰ï¼Œè€Œä¸æ˜¯æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆquerystringï¼‰ï¼Œè¿™æ˜¯å› ä¸º OAuth 2.0 å…è®¸è·³è½¬ç½‘å€æ˜¯ HTTP åè®®ï¼Œå› æ­¤å­˜åœ¨ â€œä¸­é—´äººæ”»å‡»â€ çš„é£é™©ï¼Œè€Œæµè§ˆå™¨è·³è½¬æ—¶ï¼Œé”šç‚¹ä¸ä¼šå‘åˆ°æœåŠ¡å™¨ï¼Œå°±å‡å°‘äº†æ³„æ¼ä»¤ç‰Œçš„é£é™©ã€‚ ä»¤ç‰Œ è¿™ç§æ–¹å¼æŠŠä»¤ç‰Œç›´æ¥ä¼ ç»™å‰ç«¯ï¼Œæ˜¯å¾ˆä¸å®‰å…¨çš„ã€‚å› æ­¤ï¼Œåªèƒ½ç”¨äºä¸€äº›å®‰å…¨è¦æ±‚ä¸é«˜çš„åœºæ™¯ï¼Œå¹¶ä¸”ä»¤ç‰Œçš„æœ‰æ•ˆæœŸå¿…é¡»éå¸¸çŸ­ï¼Œé€šå¸¸å°±æ˜¯ä¼šè¯æœŸé—´ï¼ˆsessionï¼‰æœ‰æ•ˆï¼Œæµè§ˆå™¨å…³æ‰ï¼Œä»¤ç‰Œå°±å¤±æ•ˆäº†ã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:3:2","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#éšè—å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¯†ç å¼å¦‚æœä½ é«˜åº¦ä¿¡ä»»æŸä¸ªåº”ç”¨ä¹Ÿå…è®¸ç”¨æˆ·æŠŠç”¨æˆ·åå’Œå¯†ç ï¼Œç›´æ¥å‘Šè¯‰è¯¥åº”ç”¨ã€‚è¯¥åº”ç”¨å°±ä½¿ç”¨ä½ çš„å¯†ç ï¼Œç”³è¯·ä»¤ç‰Œï¼Œè¿™ç§æ–¹å¼ç§°ä¸º â€œå¯†ç å¼â€ï¼ˆpasswordï¼‰ã€‚ ç¬¬ä¸€æ­¥ï¼ŒA ç½‘ç«™è¦æ±‚ç”¨æˆ·æä¾› B ç½‘ç«™çš„ç”¨æˆ·åå’Œå¯†ç ã€‚æ‹¿åˆ°ä»¥åï¼ŒA å°±ç›´æ¥å‘ B è¯·æ±‚ä»¤ç‰Œã€‚ https://oauth.b.com/token? grant_type=password\u0026 username=USERNAME\u0026 password=PASSWORD\u0026 client_id=CLIENT_ID ä¸Šé¢ URL ä¸­ï¼Œgrant_typeå‚æ•°æ˜¯æˆæƒæ–¹å¼ï¼Œè¿™é‡Œçš„passwordè¡¨ç¤º â€œå¯†ç å¼â€ï¼Œusernameå’Œpasswordæ˜¯ B çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ ç¬¬äºŒæ­¥ï¼ŒB ç½‘ç«™éªŒè¯èº«ä»½é€šè¿‡åï¼Œç›´æ¥ç»™å‡ºä»¤ç‰Œã€‚æ³¨æ„ï¼Œè¿™æ—¶ä¸éœ€è¦è·³è½¬ï¼Œè€Œæ˜¯æŠŠä»¤ç‰Œæ”¾åœ¨ JSON æ•°æ®é‡Œé¢ï¼Œä½œä¸º HTTP å›åº”ï¼ŒA å› æ­¤æ‹¿åˆ°ä»¤ç‰Œã€‚ è¿™ç§æ–¹å¼éœ€è¦ç”¨æˆ·ç»™å‡ºè‡ªå·±çš„ç”¨æˆ·å/å¯†ç ï¼Œæ˜¾ç„¶é£é™©å¾ˆå¤§ï¼Œå› æ­¤åªé€‚ç”¨äºå…¶ä»–æˆæƒæ–¹å¼éƒ½æ— æ³•é‡‡ç”¨çš„æƒ…å†µï¼Œè€Œä¸”å¿…é¡»æ˜¯ç”¨æˆ·é«˜åº¦ä¿¡ä»»çš„åº”ç”¨ã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:3:3","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#å¯†ç å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‡­è¯å¼æœ€åä¸€ç§æ–¹å¼æ˜¯å‡­è¯å¼ï¼ˆclient credentialsï¼‰ï¼Œé€‚ç”¨äºæ²¡æœ‰å‰ç«¯çš„å‘½ä»¤è¡Œåº”ç”¨ï¼Œå³åœ¨å‘½ä»¤è¡Œä¸‹è¯·æ±‚ä»¤ç‰Œã€‚ ç¬¬ä¸€æ­¥ï¼ŒA åº”ç”¨åœ¨å‘½ä»¤è¡Œå‘ B å‘å‡ºè¯·æ±‚ã€‚ https://oauth.b.com/token? grant_type=client_credentials\u0026 client_id=CLIENT_ID\u0026 client_secret=CLIENT_SECRET ä¸Šé¢ URL ä¸­ï¼Œgrant_typeå‚æ•°ç­‰äºclient_credentialsè¡¨ç¤ºé‡‡ç”¨å‡­è¯å¼ï¼Œclient_idå’Œclient_secretç”¨æ¥è®© B ç¡®è®¤ A çš„èº«ä»½ã€‚ ç¬¬äºŒæ­¥ï¼ŒB ç½‘ç«™éªŒè¯é€šè¿‡ä»¥åï¼Œç›´æ¥è¿”å›ä»¤ç‰Œã€‚ è¿™ç§æ–¹å¼ç»™å‡ºçš„ä»¤ç‰Œï¼Œæ˜¯é’ˆå¯¹ç¬¬ä¸‰æ–¹åº”ç”¨çš„ï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç”¨æˆ·çš„ï¼Œå³æœ‰å¯èƒ½å¤šä¸ªç”¨æˆ·å…±äº«åŒä¸€ä¸ªä»¤ç‰Œã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:3:4","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#å‡­è¯å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä»¤ç‰Œçš„ä½¿ç”¨A ç½‘ç«™æ‹¿åˆ°ä»¤ç‰Œä»¥åï¼Œå°±å¯ä»¥å‘ B ç½‘ç«™çš„ API è¯·æ±‚æ•°æ®äº†ã€‚ æ­¤æ—¶ï¼Œæ¯ä¸ªå‘åˆ° API çš„è¯·æ±‚ï¼Œéƒ½å¿…é¡»å¸¦æœ‰ä»¤ç‰Œã€‚å…·ä½“åšæ³•æ˜¯åœ¨è¯·æ±‚çš„å¤´ä¿¡æ¯ï¼ŒåŠ ä¸Šä¸€ä¸ªAuthorizationå­—æ®µï¼Œä»¤ç‰Œå°±æ”¾åœ¨è¿™ä¸ªå­—æ®µé‡Œé¢ã€‚ curl -H \"Authorization: Bearer ACCESS_TOKEN\" \\ \"https://api.b.com\" ä¸Šé¢å‘½ä»¤ä¸­ï¼ŒACCESS_TOKENå°±æ˜¯æ‹¿åˆ°çš„ä»¤ç‰Œã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:4:0","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#ä»¤ç‰Œçš„ä½¿ç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ›´æ–°ä»¤ç‰Œä»¤ç‰Œçš„æœ‰æ•ˆæœŸåˆ°äº†ï¼Œå¦‚æœè®©ç”¨æˆ·é‡æ–°èµ°ä¸€éä¸Šé¢çš„æµç¨‹ï¼Œå†ç”³è¯·ä¸€ä¸ªæ–°çš„ä»¤ç‰Œï¼Œå¾ˆå¯èƒ½ä½“éªŒä¸å¥½ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰å¿…è¦ã€‚OAuth 2.0 å…è®¸ç”¨æˆ·è‡ªåŠ¨æ›´æ–°ä»¤ç‰Œã€‚ å…·ä½“æ–¹æ³•æ˜¯ï¼ŒB ç½‘ç«™é¢å‘ä»¤ç‰Œçš„æ—¶å€™ï¼Œä¸€æ¬¡æ€§é¢å‘ä¸¤ä¸ªä»¤ç‰Œï¼Œä¸€ä¸ªç”¨äºè·å–æ•°æ®ï¼Œå¦ä¸€ä¸ªç”¨äºè·å–æ–°çš„ä»¤ç‰Œï¼ˆrefresh token å­—æ®µï¼‰ã€‚ä»¤ç‰Œåˆ°æœŸå‰ï¼Œç”¨æˆ·ä½¿ç”¨ refresh token å‘ä¸€ä¸ªè¯·æ±‚ï¼Œå»æ›´æ–°ä»¤ç‰Œã€‚ https://b.com/oauth/token? grant_type=refresh_token\u0026 client_id=CLIENT_ID\u0026 client_secret=CLIENT_SECRET\u0026 refresh_token=REFRESH_TOKEN ä¸Šé¢ URL ä¸­ï¼Œgrant_typeå‚æ•°ä¸ºrefresh_tokenè¡¨ç¤ºè¦æ±‚æ›´æ–°ä»¤ç‰Œï¼Œclient_idå‚æ•°å’Œclient_secretå‚æ•°ç”¨äºç¡®è®¤èº«ä»½ï¼Œrefresh_tokenå‚æ•°å°±æ˜¯ç”¨äºæ›´æ–°ä»¤ç‰Œçš„ä»¤ç‰Œã€‚ B ç½‘ç«™éªŒè¯é€šè¿‡ä»¥åï¼Œå°±ä¼šé¢å‘æ–°çš„ä»¤ç‰Œã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:5:0","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#æ›´æ–°ä»¤ç‰Œ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¬¬ä¸‰æ–¹ç™»å½•Githubæ‰€è°“ç¬¬ä¸‰æ–¹ç™»å½•ï¼Œå®è´¨å°±æ˜¯ OAuth æˆæƒã€‚ç”¨æˆ·æƒ³è¦ç™»å½• A ç½‘ç«™ï¼ŒA ç½‘ç«™è®©ç”¨æˆ·æä¾›ç¬¬ä¸‰æ–¹ç½‘ç«™çš„æ•°æ®ï¼Œè¯æ˜è‡ªå·±çš„èº«ä»½ã€‚è·å–ç¬¬ä¸‰æ–¹ç½‘ç«™çš„èº«ä»½æ•°æ®ï¼Œå°±éœ€è¦ OAuth æˆæƒã€‚ æ¯”å¦‚ï¼ŒA ç½‘ç«™å…è®¸ GitHub ç™»å½•ï¼ŒèƒŒåå°±æ˜¯ä¸‹é¢çš„æµç¨‹ï¼š A ç½‘ç«™è®©ç”¨æˆ·è·³è½¬åˆ° GitHubã€‚ GitHub è¦æ±‚ç”¨æˆ·ç™»å½•ï¼Œç„¶åè¯¢é—®\"A ç½‘ç«™è¦æ±‚è·å¾— xx æƒé™ï¼Œä½ æ˜¯å¦åŒæ„ï¼Ÿ\" ç”¨æˆ·åŒæ„ï¼ŒGitHub å°±ä¼šé‡å®šå‘å› A ç½‘ç«™ï¼ŒåŒæ—¶å‘å›ä¸€ä¸ªæˆæƒç ã€‚ A ç½‘ç«™ä½¿ç”¨æˆæƒç ï¼Œå‘ GitHub è¯·æ±‚ä»¤ç‰Œã€‚ GitHub è¿”å›ä»¤ç‰Œ. A ç½‘ç«™ä½¿ç”¨ä»¤ç‰Œï¼Œå‘ GitHub è¯·æ±‚ç”¨æˆ·æ•°æ®ã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:6:0","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#ç¬¬ä¸‰æ–¹ç™»å½•github"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ³¨å†Œ OAuth åº”ç”¨ç°åœ¨åœ¨ Github ä¸Šæ³¨å†Œä¸€ä¸ª OAuth åº”ç”¨ã€‚ å­—æ®µ æè¿° Application name åº”ç”¨åç§° Homepage URL é¦–é¡µURLï¼Œå¦‚https://www.xiaobinqt.cn Authorization callback URL ç”¨æˆ·åœ¨ Github ç™»å½•æˆåŠŸåé‡å®šå‘å›çš„ URL æ³¨å†ŒæˆåŠŸåä¼šç”Ÿæˆ Client ID å’Œ Client Secretï¼Œè¿™ä¸¤ä¸ªæ˜¯ç”¨æ¥è¯·æ±‚ä»¤ç‰Œçš„ã€‚ ","date":"2022-03-22","objectID":"/oauth2.0/:6:1","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#æ³¨å†Œ-oauth-åº”ç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è·å–ç”¨æˆ·ä¿¡æ¯å‰ç«¯ç•Œé¢ oauth.html \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003eTitle\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003ca href=\"https://github.com/login/oauth/authorize?client_id={{.ClientId}}\u0026redirect_uri={{.RedirectUrl}}\"\u003e Github ç¬¬ä¸‰æ–¹æˆæƒç™»å½•\u003c/a\u003e \u003c/body\u003e \u003c/html\u003e go ä»£ç é€šè¿‡OAuthè·å–ç”¨æˆ·ä¿¡æ¯ package main import ( \"encoding/json\" \"flag\" \"fmt\" \"html/template\" \"io/ioutil\" \"log\" \"net/http\" \"os\" ) var ( clientSecret = flag.String(\"cs\", \"\", \"github oauth client secret\") clientID = flag.String(\"ci\", \"\", \"github oauth client id\") ) type Conf struct { ClientId string ClientSecret string RedirectUrl string } type Token struct { AccessToken string `json:\"access_token\"` } // è®¤è¯å¹¶è·å–ç”¨æˆ·ä¿¡æ¯ func OAuth(w http.ResponseWriter, r *http.Request) { var ( err error ) // è·å– code code := r.URL.Query().Get(\"code\") // é€šè¿‡ code, è·å– token var tokenAuthUrl = GetTokenAuthURL(code) var token *Token if token, err = GetToken(tokenAuthUrl); err != nil { fmt.Println(err) return } // é€šè¿‡tokenï¼Œè·å–ç”¨æˆ·ä¿¡æ¯ var userInfo map[string]interface{} if userInfo, err = GetUserInfo(token); err != nil { fmt.Println(\"è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:\", err) return } // å°†ç”¨æˆ·ä¿¡æ¯è¿”å›å‰ç«¯ var userInfoBytes []byte if userInfoBytes, err = json.Marshal(userInfo); err != nil { fmt.Println(\"åœ¨å°†ç”¨æˆ·ä¿¡æ¯(map)è½¬ä¸ºç”¨æˆ·ä¿¡æ¯([]byte)æ—¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:\", err) return } w.Header().Set(\"Content-Type\", \"application/json\") if _, err = w.Write(userInfoBytes); err != nil { fmt.Println(\"åœ¨å°†ç”¨æˆ·ä¿¡æ¯([]byte)è¿”å›å‰ç«¯æ—¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:\", err) return } } // é€šè¿‡codeè·å–tokenè®¤è¯url func GetTokenAuthURL(code string) string { return fmt.Sprintf( \"https://github.com/login/oauth/access_token?client_id=%s\u0026client_secret=%s\u0026code=%s\", *clientID, *clientSecret, code, ) } // è·å– token func GetToken(url string) (*Token, error) { // å½¢æˆè¯·æ±‚ var req *http.Request var err error if req, err = http.NewRequest(http.MethodGet, url, nil); err != nil { return nil, err } req.Header.Set(\"accept\", \"application/json\") // å‘é€è¯·æ±‚å¹¶è·å¾—å“åº” var ( httpClient = http.Client{} res *http.Response respBody = make([]byte, 0) token Token ) if res, err = httpClient.Do(req); err != nil { return nil, err } respBody, err = ioutil.ReadAll(res.Body) if err != nil { return nil, err } log.Printf(\"token: %s\", string(respBody)) // å°†å“åº”ä½“è§£æä¸º tokenï¼Œå¹¶è¿”å› err = json.Unmarshal(respBody, \u0026token) if err != nil { return nil, err } return \u0026token, nil } // è·å–ç”¨æˆ·ä¿¡æ¯ func GetUserInfo(token *Token) (map[string]interface{}, error) { // å½¢æˆè¯·æ±‚ var userInfoUrl = \"https://api.github.com/user\" // githubç”¨æˆ·ä¿¡æ¯è·å–æ¥å£ var req *http.Request var err error if req, err = http.NewRequest(http.MethodGet, userInfoUrl, nil); err != nil { return nil, err } req.Header.Set(\"accept\", \"application/json\") req.Header.Set(\"Authorization\", fmt.Sprintf(\"token %s\", token.AccessToken)) // å‘é€è¯·æ±‚å¹¶è·å–å“åº” var client = http.Client{} var res *http.Response if res, err = client.Do(req); err != nil { return nil, err } // å°†å“åº”çš„æ•°æ®å†™å…¥ userInfo ä¸­ï¼Œå¹¶è¿”å› var userInfo = make(map[string]interface{}) if err = json.NewDecoder(res.Body).Decode(\u0026userInfo); err != nil { return nil, err } return userInfo, nil } func Html(w http.ResponseWriter, r *http.Request) { // è§£ææŒ‡å®šæ–‡ä»¶ç”Ÿæˆæ¨¡æ¿å¯¹è±¡ var ( temp *template.Template err error ) dir, _ := os.Getwd() if temp, err = template.ParseFiles(dir + \"/oauth.html\"); err != nil { fmt.Println(\"è¯»å–æ–‡ä»¶å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:\", err) return } // åˆ©ç”¨ç»™å®šæ•°æ®æ¸²æŸ“æ¨¡æ¿(htmlé¡µé¢)ï¼Œå¹¶å°†ç»“æœå†™å…¥wï¼Œè¿”å›ç»™å‰ç«¯ if err = temp.Execute(w, Conf{ ClientId: *clientID, ClientSecret: *clientSecret, RedirectUrl: \"http://127.0.0.1:9000/oauth/callback\", }); err != nil { fmt.Println(\"è¯»å–æ¸²æŸ“htmlé¡µé¢å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:\", err) return } } func UserInfo(w http.ResponseWriter, r *http.Request) { token := r.URL.Query().Get(\"token\") log.Printf(\"UserInfo token: %s\", token) var ( err error userInfo map[string]interface{} ) if userInfo, err = GetUserInfo(\u0026Token{AccessToken: token}); err != nil { fmt.Println(\"è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:\", err) return } // å°†ç”¨æˆ·ä¿¡æ¯è¿”å›å‰ç«¯ var userInfoBytes []byte if userInfoBytes, err = json.Marshal(userInfo); err != nil { fmt.Println(\"åœ¨å°†ç”¨æˆ·ä¿¡æ¯(map)è½¬ä¸ºç”¨æˆ·ä¿¡æ¯([]byte)æ—¶å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ä¿¡æ¯ä¸º:\", err) return } w.Header().Set(\"Content-Type\", \"application/json\") if _, err = w.Write(userInfoBy","date":"2022-03-22","objectID":"/oauth2.0/:6:2","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#è·å–ç”¨æˆ·ä¿¡æ¯"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ•ˆæœ å‰ç«¯ç•Œé¢ æˆæƒé¡µé¢ githubè¿”å›çš„ç”¨æˆ·ä¿¡æ¯ æºç  ä»¥ä¸Šç¤ºä¾‹æºç ä»£ç åœ¨ï¼šhttps://github.com/xiaobinqt/go.src/tree/master/dev/github.oauth ","date":"2022-03-22","objectID":"/oauth2.0/:6:3","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#æ•ˆæœ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Building OAuth Apps OAuth 2.0 çš„ä¸€ä¸ªç®€å•è§£é‡Š Goè¯­è¨€å®ç°ç¬¬ä¸‰æ–¹ç™»å½•Github (é€šè¿‡OAuth2.0) basics of authentication [ç®€æ˜“å›¾è§£]ã€ OAuth2.0ã€ çŒ´å­éƒ½èƒ½æ‡‚çš„å›¾è§£ [ç®€æ˜“å›¾è§£]ã€ OAuth2.0ã€ ã€è¿›é˜¶ã€ æˆæƒæ¨¡å¼æ€»ç»“ ","date":"2022-03-22","objectID":"/oauth2.0/:7:0","series":["reproduce"],"tags":["web","oauth"],"title":"OAuth2.0çš„ç†è§£ä¸åº”ç”¨","uri":"/oauth2.0/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"HUGO,hugoä¸»é¢˜æ ‡é¢˜æ”¯æŒemoji,emojiè¡¨æƒ…","date":"2022-03-21","objectID":"/hugo-title-support-emoji/","series":null,"tags":["hugo","emoji"],"title":"hugoä¸»é¢˜æ ‡é¢˜æ”¯æŒemoji:smile:","uri":"/hugo-title-support-emoji/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ³•hugo åœ¨æ¸²æŸ“æ—¶é»˜è®¤æ˜¯ä¸æ”¯æŒæ ‡é¢˜ä¸­çš„emojiçš„ï¼ˆæœ‰çš„ä¸»é¢˜ä¹Ÿè®¸æ˜¯æ”¯æŒçš„ï¼‰ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ä¸»é¢˜æºç æ¥æ”¯æŒã€‚ æˆ‘ç”¨çš„ä¸»é¢˜æ˜¯LoveItï¼Œæ‰¾åˆ° simple.html æ–‡ä»¶ï¼Œè·¯å¾„ä¸º themes/LoveIt/layouts/posts/single.html ä¿®æ”¹æ ‡é¢˜çš„æ¸²æŸ“æ–¹å¼ä¸º {{ .Title | emojify }}ï¼Œå¦‚ä¸‹ï¼š è¿™æ ·å°±å¯ä»¥æ”¯æŒ emoji äº†ã€‚ æ­¤æ—¶åˆ—è¡¨ä¸­è¿˜ä¸æ”¯æŒ emojiï¼ŒåŒæ ·çš„ä¿®æ”¹æ–¹å¼ã€‚ ä¿®æ”¹ themes/LoveIt/layouts/_default/summary.html æ–‡ä»¶æ–‡ä»¶ä¸­çš„ title çš„æ¸²æŸ“æ–¹å¼ä¸º {{ .Title | emojify }}ã€‚ ","date":"2022-03-21","objectID":"/hugo-title-support-emoji/:1:0","series":null,"tags":["hugo","emoji"],"title":"hugoä¸»é¢˜æ ‡é¢˜æ”¯æŒemoji:smile:","uri":"/hugo-title-support-emoji/#è§£å†³æ–¹æ³•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Hugo should render emojis in page titles if enableEmoji = true ","date":"2022-03-21","objectID":"/hugo-title-support-emoji/:2:0","series":null,"tags":["hugo","emoji"],"title":"hugoä¸»é¢˜æ ‡é¢˜æ”¯æŒemoji:smile:","uri":"/hugo-title-support-emoji/#å‚è€ƒ"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" tcp,tcpè¿æ¥ç®¡ç†,ä¸‰æ¬¡æ¡æ‰‹,å››æ¬¡æŒ¥æ‰‹,ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹,ä¸ºä»€ä¹ˆä¸èƒ½ç”¨ä¸¤æ¬¡æ¡æ‰‹è¿›è¡Œè¿æ¥,SYN,FIN,ACK,PSH,SYN_SENT,SYN_RECV,ESTABLISHED,FIN_WAIT_1,FIN_WAIT_2,CLOSE_WAIT,LAST_ACK,TIME_WAIT,CLOSE","date":"2022-03-21","objectID":"/tcp-handshark/","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":"TCP åè®®å’Œ UDP åè®®éƒ½æ˜¯å·¥ä½œåœ¨ä¼ è¾“å±‚ï¼Œæ˜¯ä¸ºäº†åœ¨ç¨‹åºä¹‹é—´ä¼ é€’æ•°æ®ï¼Œæ•°æ®å¯ä»¥æ˜¯å¤šç§å½¢å¼ï¼Œæ¯”å¦‚è§†é¢‘ï¼Œæ–‡æœ¬ï¼Œå›¾ç‰‡ç­‰ã€‚å¯¹äº TCP åè®®å’Œ UDP åè®®æ¥è¯´ï¼Œéƒ½æ˜¯ä¸€å †äºŒè¿›åˆ¶æ•°ï¼Œåªæ˜¯ TCP åŸºäºè¿æ¥ï¼Œè€Œ UDP åŸºäºéè¿æ¥ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:0:0","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" åè¯è§£é‡Š åè¯ è§£é‡Š SYN åŒæ­¥åºå·ï¼Œç”¨äºå»ºç«‹è¿æ¥è¿‡ç¨‹ï¼Œåœ¨è¿æ¥è¯·æ±‚ä¸­ï¼ŒSYN=1 å’Œ ACK=0 è¡¨ç¤ºè¯¥æ•°æ®æ®µæ²¡æœ‰ä½¿ç”¨æå¸¦çš„ç¡®è®¤åŸŸï¼Œè€Œè¿æ¥åº”ç­”æå¸¦ä¸€ä¸ªç¡®è®¤ï¼Œå³ SYN=1 å’Œ ACK=1 FIN finish æ ‡å¿—ï¼Œç”¨äºé‡Šæ”¾è¿æ¥ï¼Œä¸º 1 æ—¶è¡¨ç¤ºå‘é€æ–¹å·²ç»æ²¡æœ‰æ•°æ®å‘é€äº†ï¼Œå³å…³é—­æœ¬æ–¹æ•°æ®æµ ACK ç¡®è®¤åºå·æ ‡å¿—ï¼Œä¸º 1 æ—¶è¡¨ç¤ºç¡®è®¤å·æœ‰æ•ˆï¼Œä¸º 0 è¡¨ç¤ºæŠ¥æ–‡ä¸­ä¸å«ç¡®è®¤ä¿¡æ¯ï¼Œå¿½ç•¥ç¡®è®¤å·å­—æ®µ PSH push æ ‡å¿—ï¼Œä¸º 1 è¡¨ç¤ºæ˜¯å¸¦æœ‰ push æ ‡å¿—çš„æ•°æ®ï¼ŒæŒ‡ç¤ºæ¥æ”¶æ–¹åœ¨æ¥æ”¶åˆ°è¯¥æŠ¥æ–‡æ®µä»¥åï¼Œåº”å°½å¿«å°†è¿™ä¸ªæŠ¥æ–‡æ®µäº¤ç»™åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯åœ¨ç¼“å†²åŒºæ’é˜Ÿ RST é‡ç½®è¿æ¥æ ‡å¿—ï¼Œç”¨äºé‡ç½®ç”±äºä¸»æœºå´©æºƒæˆ–å…¶ä»–åŸå› è€Œå‡ºç°é”™è¯¯çš„è¿æ¥ã€‚æˆ–è€…ç”¨äºæ‹’ç»éæ³•çš„æŠ¥æ–‡æ®µå’Œæ‹’ç»è¿æ¥è¯·æ±‚ åºåˆ—å· seq å  4 ä¸ªå­—èŠ‚ï¼Œç”¨æ¥æ ‡è®°æ•°æ®æ®µçš„é¡ºåºï¼ŒTCP æŠŠè¿æ¥ä¸­å‘é€çš„æ‰€æœ‰æ•°æ®å­—èŠ‚éƒ½ç¼–ä¸Šä¸€ä¸ªåºå·ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ç”±æœ¬åœ°éšæœºäº§ç”Ÿï¼›ç»™å­—èŠ‚ç¼–ä¸Šåºå·åï¼Œå°±ç»™æ¯ä¸€ä¸ªæŠ¥æ–‡æ®µæŒ‡æ´¾ä¸€ä¸ªåºå·ï¼›åºåˆ—å· seq å°±æ˜¯è¿™ä¸ªæŠ¥æ–‡æ®µä¸­çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ç¼–å· ç¡®è®¤å· ack å  4 ä¸ªå­—èŠ‚ï¼ŒæœŸå¾…æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå·ï¼›åºåˆ—å·è¡¨ç¤ºæŠ¥æ–‡æ®µæºå¸¦æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ï¼›è€Œç¡®è®¤å·æŒ‡çš„æ˜¯æœŸæœ›æ¥æ”¶åˆ°ä¸‹ä¸€ä¸ªå­—èŠ‚çš„ç¼–å·ï¼›å› æ­¤å½“å‰æŠ¥æ–‡æ®µæœ€åä¸€ä¸ªå­—èŠ‚çš„ç¼–å· +1 ï¼ˆACKä¼šå ä¸€ä¸ªåºå·ï¼‰å³ä¸ºç¡®è®¤å· Info ACKã€SYN å’Œ FIN è¿™äº›å¤§å†™çš„å•è¯è¡¨ç¤ºæ ‡å¿—ä½ï¼Œå…¶å€¼è¦ä¹ˆæ˜¯ 1ï¼Œè¦ä¹ˆæ˜¯ 0ï¼›ackã€seq å°å†™çš„å•è¯è¡¨ç¤ºåºå·ã€‚ ACK æ˜¯å¯èƒ½ä¸ SYNï¼ŒFIN ç­‰åŒæ—¶ä½¿ç”¨çš„ã€‚æ¯”å¦‚ SYNå’ŒACKå¯èƒ½åŒæ—¶ä¸º 1ï¼Œå®ƒè¡¨ç¤ºçš„å°±æ˜¯å»ºç«‹è¿æ¥ä¹‹åçš„å“åº”æœç´¢ å¦‚æœåªæ˜¯å•ä¸ªçš„ä¸€ä¸ªSYNï¼Œå®ƒè¡¨ç¤ºçš„åªæ˜¯å»ºç«‹è¿æ¥ã€‚ SYNä¸FINæ˜¯ä¸ä¼šåŒæ—¶ä¸º 1 çš„ï¼Œå› ä¸ºå‰è€…è¡¨ç¤ºçš„æ˜¯å»ºç«‹è¿æ¥ï¼Œè€Œåè€…è¡¨ç¤ºçš„æ˜¯æ–­å¼€è¿æ¥ã€‚ RSTä¸€èˆ¬æ˜¯åœ¨FINä¹‹åæ‰ä¼šå‡ºç°ä¸º 1 çš„æƒ…å†µï¼Œè¡¨ç¤ºçš„æ˜¯è¿æ¥é‡ç½®ã€‚ ä¸€èˆ¬ï¼Œå½“å‡ºç°FINåŒ…æˆ–RSTåŒ…æ—¶ï¼Œä¾¿è®¤ä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯æ–­å¼€äº†è¿æ¥ï¼›è€Œå½“å‡ºç°SYNå’ŒSYNï¼‹ACKåŒ…æ—¶ï¼Œæˆ‘ä»¬è®¤ä¸ºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨å»ºç«‹äº†ä¸€ä¸ªè¿æ¥ã€‚ PSHä¸º 1 çš„æƒ…å†µï¼Œä¸€èˆ¬åªå‡ºç°åœ¨DATAå†…å®¹ä¸ä¸º 0 çš„åŒ…ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´PSHä¸º1è¡¨ç¤ºçš„æ˜¯æœ‰çœŸæ­£çš„ TCP æ•°æ®åŒ…å†…å®¹è¢«ä¼ é€’ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:1:0","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#åè¯è§£é‡Š"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä¸‰æ¬¡æ¡æ‰‹ ä¸‰æ¬¡æ¡æ‰‹ ä¸‰æ¬¡æ¡æ‰‹æ˜¯å»ºç«‹è¯·æ±‚çš„è¿‡ç¨‹ï¼Œå½“å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚æ—¶ï¼Œä¼šå…ˆå‘ä¸€åŒ…è¿æ¥è¯·æ±‚æ•°æ®ï¼Œè¿™åŒ…æ•°æ®ç§°ä¸ºSYNåŒ…ï¼Œå¦‚æœæœåŠ¡ç«¯åŒæ„è¿æ¥ï¼Œåˆ™ä¼šå›å¤ä¸€åŒ…SYN+ACKåŒ…ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åå›å¤ä¸€åŒ…ACKåŒ…ï¼Œè¿æ¥å»ºç«‹æˆåŠŸã€‚åœ¨è¿æ¥å»ºç«‹çš„è¿‡ç¨‹ä¸­ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº’ç›¸å‘é€äº† 3 åŒ…æ•°æ®ï¼Œæ‰€ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹ç§°ä¸º 3 æ¬¡æ¡æ‰‹ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:2:0","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ä¸‰æ¬¡æ¡æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸€æ¬¡æ¡æ‰‹ å®¢æˆ·ç«¯ä¸»åŠ¨æ‰“å¼€ï¼ˆactive openï¼‰ï¼Œå‘æœåŠ¡ç«¯å‘é€ SYN æŠ¥æ–‡æ®µSYN=1, SN=client_isn, OPT=client_mssï¼Œè¯·æ±‚å»ºç«‹è¿æ¥ã€‚ client_isn æ˜¯å®¢æˆ·ç«¯åˆå§‹åºå·ï¼ŒåŠ¨æ€ç”Ÿæˆï¼Œç”¨äºå®ç°å¯é ä¼ è¾“ï¼Œclient_sn-client_isn ç­‰äºå®¢æˆ·ç«¯å·²å‘é€å­—èŠ‚æ•°ã€‚ SYN æŠ¥æ–‡æ®µè™½ç„¶ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ä¸€ä¸ªåºå·ï¼ˆç›¸å½“äºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ï¼‰ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯å†å‘æœåŠ¡ç«¯å‘é€çš„æŠ¥æ–‡æ®µä¸­ SN=client_isn+1ã€‚ é™¤äº† SYN æŠ¥æ–‡æ®µå’Œ ACK-SYN æŠ¥æ–‡æ®µï¼Œå…¶ä»–æ‰€æœ‰åç»­æŠ¥æ–‡æ®µçš„åºå· SN å€¼éƒ½ç­‰äºä¸Šæ¬¡æ¥æ”¶çš„ ACK æŠ¥æ–‡æ®µä¸­çš„ç¡®è®¤å· AN å€¼ã€‚ client_mss æ˜¯å®¢æˆ·ç«¯æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼Œåœ¨ TCP é¦–éƒ¨çš„é€‰é¡¹å’Œå¡«å……éƒ¨åˆ†ï¼Œä¼šåœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„ MSS ä¸­é€‰æ‹©ä¸€ä¸ªè¾ƒå°å€¼ä½¿ç”¨ã€‚ å®¢æˆ·ç«¯å˜ä¸º SYN_SENT çŠ¶æ€ï¼Œç„¶åç­‰å¾…æœåŠ¡ç«¯ ACK æŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:2:1","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ç¬¬ä¸€æ¬¡æ¡æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸€æ¬¡æ¡æ‰‹ å®¢æˆ·ç«¯ä¸»åŠ¨æ‰“å¼€ï¼ˆactive openï¼‰ï¼Œå‘æœåŠ¡ç«¯å‘é€ SYN æŠ¥æ–‡æ®µSYN=1, SN=client_isn, OPT=client_mssï¼Œè¯·æ±‚å»ºç«‹è¿æ¥ã€‚ client_isn æ˜¯å®¢æˆ·ç«¯åˆå§‹åºå·ï¼ŒåŠ¨æ€ç”Ÿæˆï¼Œç”¨äºå®ç°å¯é ä¼ è¾“ï¼Œclient_sn-client_isn ç­‰äºå®¢æˆ·ç«¯å·²å‘é€å­—èŠ‚æ•°ã€‚ SYN æŠ¥æ–‡æ®µè™½ç„¶ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ä¸€ä¸ªåºå·ï¼ˆç›¸å½“äºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ï¼‰ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯å†å‘æœåŠ¡ç«¯å‘é€çš„æŠ¥æ–‡æ®µä¸­ SN=client_isn+1ã€‚ é™¤äº† SYN æŠ¥æ–‡æ®µå’Œ ACK-SYN æŠ¥æ–‡æ®µï¼Œå…¶ä»–æ‰€æœ‰åç»­æŠ¥æ–‡æ®µçš„åºå· SN å€¼éƒ½ç­‰äºä¸Šæ¬¡æ¥æ”¶çš„ ACK æŠ¥æ–‡æ®µä¸­çš„ç¡®è®¤å· AN å€¼ã€‚ client_mss æ˜¯å®¢æˆ·ç«¯æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ï¼Œåœ¨ TCP é¦–éƒ¨çš„é€‰é¡¹å’Œå¡«å……éƒ¨åˆ†ï¼Œä¼šåœ¨å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„ MSS ä¸­é€‰æ‹©ä¸€ä¸ªè¾ƒå°å€¼ä½¿ç”¨ã€‚ å®¢æˆ·ç«¯å˜ä¸º SYN_SENT çŠ¶æ€ï¼Œç„¶åç­‰å¾…æœåŠ¡ç«¯ ACK æŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:2:1","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#å®¢æˆ·ç«¯"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬äºŒæ¬¡æ¡æ‰‹ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ SYN æŠ¥æ–‡æ®µï¼Œå¾—çŸ¥å®¢æˆ·ç«¯å‘é€èƒ½åŠ›æ­£å¸¸ã€‚ è¢«åŠ¨æ‰“å¼€passive openï¼Œå‘å®¢æˆ·ç«¯å‘é€ SYN-ACK æŠ¥æ–‡æ®µACK=1, AN=client_isn+1, SYN=1, SN=server_isn, OPT=server_mss ï¼Œåº”ç­”æ¥è‡ªå®¢æˆ·ç«¯çš„å»ºç«‹è¿æ¥è¯·æ±‚å¹¶å‘å®¢æˆ·ç«¯å‘èµ·å»ºç«‹è¿æ¥è¯·æ±‚ã€‚ SN=server_isn æ˜¯æœåŠ¡ç«¯åˆå§‹åºå·ï¼ŒACK-SYN æŠ¥æ–‡æ®µè™½ç„¶ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ä¸€ä¸ªåºå·ï¼ˆç›¸å½“äºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ï¼‰ï¼Œä¸‹æ¬¡æœåŠ¡ç«¯å†å‘å®¢æˆ·ç«¯å‘é€çš„æŠ¥æ–‡ä¸­ SN=server_isn+1 ã€‚ OPT=server_mss æ˜¯æœåŠ¡ç«¯æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ã€‚ AN=client_isn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜æœåŠ¡ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ç¬¬ client_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æœåŠ¡ç«¯å˜ä¸º SYN_RCVD çŠ¶æ€ï¼Œå¹¶ç­‰å¾…å®¢æˆ·ç«¯ ACK æŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:2:2","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ç¬¬äºŒæ¬¡æ¡æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬äºŒæ¬¡æ¡æ‰‹ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ SYN æŠ¥æ–‡æ®µï¼Œå¾—çŸ¥å®¢æˆ·ç«¯å‘é€èƒ½åŠ›æ­£å¸¸ã€‚ è¢«åŠ¨æ‰“å¼€passive openï¼Œå‘å®¢æˆ·ç«¯å‘é€ SYN-ACK æŠ¥æ–‡æ®µACK=1, AN=client_isn+1, SYN=1, SN=server_isn, OPT=server_mss ï¼Œåº”ç­”æ¥è‡ªå®¢æˆ·ç«¯çš„å»ºç«‹è¿æ¥è¯·æ±‚å¹¶å‘å®¢æˆ·ç«¯å‘èµ·å»ºç«‹è¿æ¥è¯·æ±‚ã€‚ SN=server_isn æ˜¯æœåŠ¡ç«¯åˆå§‹åºå·ï¼ŒACK-SYN æŠ¥æ–‡æ®µè™½ç„¶ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ä¸€ä¸ªåºå·ï¼ˆç›¸å½“äºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ï¼‰ï¼Œä¸‹æ¬¡æœåŠ¡ç«¯å†å‘å®¢æˆ·ç«¯å‘é€çš„æŠ¥æ–‡ä¸­ SN=server_isn+1 ã€‚ OPT=server_mss æ˜¯æœåŠ¡ç«¯æœ€å¤§æŠ¥æ–‡æ®µé•¿åº¦ã€‚ AN=client_isn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜æœåŠ¡ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ç¬¬ client_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æœåŠ¡ç«¯å˜ä¸º SYN_RCVD çŠ¶æ€ï¼Œå¹¶ç­‰å¾…å®¢æˆ·ç«¯ ACK æŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:2:2","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#æœåŠ¡ç«¯"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸‰æ¬¡æ¡æ‰‹ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ SYN-ACK æŠ¥æ–‡æ®µï¼Œå¾—çŸ¥æœåŠ¡ç«¯å‘é€èƒ½åŠ›å’Œæ¥æ”¶èƒ½åŠ›éƒ½æ­£å¸¸ã€‚ å‘å®¢æˆ·ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=server_isn+1, SN=client_isn+1, MESSAGE=messageï¼Œåº”ç­”æ¥è‡ªæœåŠ¡ç«¯çš„å»ºç«‹è¿æ¥è¯·æ±‚ã€‚ SN=client_isn+1 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€çš„ç¬¬ (client_isn+1)-clien_isn+1=2 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æœ‰æ•ˆæ•°æ®ï¼šä¸€èˆ¬æœ‰æ•ˆæ•°æ®æŒ‡çš„æ˜¯åº”ç”¨å±‚çš„æŠ¥æ–‡æ•°æ®ï¼Œä¸è¿‡ SYN æŠ¥æ–‡æ®µã€ ACK-SYN æŠ¥æ–‡æ®µå’Œ FIN æŠ¥æ–‡æ®µè™½ç„¶æ²¡æœ‰æºå¸¦æŠ¥æ–‡æ•°æ®ï¼Œä½†è®¤ä¸ºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ AN=server_isn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜å®¢æˆ·ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ç¬¬ server_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ MESSAGE=message æ­¤æ—¶å¯ä»¥åœ¨æŠ¥æ–‡æ®µä¸­æºå¸¦å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æŠ¥æ–‡æ•°æ®ï¼›è¯¥ ACK æŠ¥æ–‡æ®µæ¶ˆè€—çš„åºå·ä¸ªæ•°ç­‰äº message_lengthï¼ˆæ³¨æ„ message_length å¯ä»¥ç­‰äº0ï¼Œå³ä¸æºå¸¦æœ‰æ•ˆæ•°æ®ï¼Œæ­¤æ—¶ ACKæŠ¥æ–‡æ®µä¸æ¶ˆè€—åºå·ï¼‰ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯å†å‘æœåŠ¡ç«¯å‘é€çš„æŠ¥æ–‡æ®µä¸­ SN=client_isn+1+message_length ã€‚ å®¢æˆ·ç«¯å˜ä¸º ESTABLISHED çŠ¶æ€ï¼Œclientâ€”â€”\u003eserver æ•°æ®æµå»ºç«‹ã€‚ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µï¼Œå¾—çŸ¥å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›æ­£å¸¸ã€‚ å˜ä¸º ESTABLISHED çŠ¶æ€ï¼Œserverâ€”â€”\u003eclient æ•°æ®æµä¹Ÿå»ºç«‹ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:2:3","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ç¬¬ä¸‰æ¬¡æ¡æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸‰æ¬¡æ¡æ‰‹ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ SYN-ACK æŠ¥æ–‡æ®µï¼Œå¾—çŸ¥æœåŠ¡ç«¯å‘é€èƒ½åŠ›å’Œæ¥æ”¶èƒ½åŠ›éƒ½æ­£å¸¸ã€‚ å‘å®¢æˆ·ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=server_isn+1, SN=client_isn+1, MESSAGE=messageï¼Œåº”ç­”æ¥è‡ªæœåŠ¡ç«¯çš„å»ºç«‹è¿æ¥è¯·æ±‚ã€‚ SN=client_isn+1 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€çš„ç¬¬ (client_isn+1)-clien_isn+1=2 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æœ‰æ•ˆæ•°æ®ï¼šä¸€èˆ¬æœ‰æ•ˆæ•°æ®æŒ‡çš„æ˜¯åº”ç”¨å±‚çš„æŠ¥æ–‡æ•°æ®ï¼Œä¸è¿‡ SYN æŠ¥æ–‡æ®µã€ ACK-SYN æŠ¥æ–‡æ®µå’Œ FIN æŠ¥æ–‡æ®µè™½ç„¶æ²¡æœ‰æºå¸¦æŠ¥æ–‡æ•°æ®ï¼Œä½†è®¤ä¸ºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ AN=server_isn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜å®¢æˆ·ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ç¬¬ server_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ MESSAGE=message æ­¤æ—¶å¯ä»¥åœ¨æŠ¥æ–‡æ®µä¸­æºå¸¦å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æŠ¥æ–‡æ•°æ®ï¼›è¯¥ ACK æŠ¥æ–‡æ®µæ¶ˆè€—çš„åºå·ä¸ªæ•°ç­‰äº message_lengthï¼ˆæ³¨æ„ message_length å¯ä»¥ç­‰äº0ï¼Œå³ä¸æºå¸¦æœ‰æ•ˆæ•°æ®ï¼Œæ­¤æ—¶ ACKæŠ¥æ–‡æ®µä¸æ¶ˆè€—åºå·ï¼‰ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯å†å‘æœåŠ¡ç«¯å‘é€çš„æŠ¥æ–‡æ®µä¸­ SN=client_isn+1+message_length ã€‚ å®¢æˆ·ç«¯å˜ä¸º ESTABLISHED çŠ¶æ€ï¼Œclientâ€”â€”\u003eserver æ•°æ®æµå»ºç«‹ã€‚ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µï¼Œå¾—çŸ¥å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›æ­£å¸¸ã€‚ å˜ä¸º ESTABLISHED çŠ¶æ€ï¼Œserverâ€”â€”\u003eclient æ•°æ®æµä¹Ÿå»ºç«‹ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:2:3","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#å®¢æˆ·ç«¯-1"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸‰æ¬¡æ¡æ‰‹ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ SYN-ACK æŠ¥æ–‡æ®µï¼Œå¾—çŸ¥æœåŠ¡ç«¯å‘é€èƒ½åŠ›å’Œæ¥æ”¶èƒ½åŠ›éƒ½æ­£å¸¸ã€‚ å‘å®¢æˆ·ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=server_isn+1, SN=client_isn+1, MESSAGE=messageï¼Œåº”ç­”æ¥è‡ªæœåŠ¡ç«¯çš„å»ºç«‹è¿æ¥è¯·æ±‚ã€‚ SN=client_isn+1 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€çš„ç¬¬ (client_isn+1)-clien_isn+1=2 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æœ‰æ•ˆæ•°æ®ï¼šä¸€èˆ¬æœ‰æ•ˆæ•°æ®æŒ‡çš„æ˜¯åº”ç”¨å±‚çš„æŠ¥æ–‡æ•°æ®ï¼Œä¸è¿‡ SYN æŠ¥æ–‡æ®µã€ ACK-SYN æŠ¥æ–‡æ®µå’Œ FIN æŠ¥æ–‡æ®µè™½ç„¶æ²¡æœ‰æºå¸¦æŠ¥æ–‡æ•°æ®ï¼Œä½†è®¤ä¸ºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ AN=server_isn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜å®¢æˆ·ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ç¬¬ server_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ MESSAGE=message æ­¤æ—¶å¯ä»¥åœ¨æŠ¥æ–‡æ®µä¸­æºå¸¦å®¢æˆ·ç«¯åˆ°æœåŠ¡ç«¯çš„æŠ¥æ–‡æ•°æ®ï¼›è¯¥ ACK æŠ¥æ–‡æ®µæ¶ˆè€—çš„åºå·ä¸ªæ•°ç­‰äº message_lengthï¼ˆæ³¨æ„ message_length å¯ä»¥ç­‰äº0ï¼Œå³ä¸æºå¸¦æœ‰æ•ˆæ•°æ®ï¼Œæ­¤æ—¶ ACKæŠ¥æ–‡æ®µä¸æ¶ˆè€—åºå·ï¼‰ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯å†å‘æœåŠ¡ç«¯å‘é€çš„æŠ¥æ–‡æ®µä¸­ SN=client_isn+1+message_length ã€‚ å®¢æˆ·ç«¯å˜ä¸º ESTABLISHED çŠ¶æ€ï¼Œclientâ€”â€”\u003eserver æ•°æ®æµå»ºç«‹ã€‚ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µï¼Œå¾—çŸ¥å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›æ­£å¸¸ã€‚ å˜ä¸º ESTABLISHED çŠ¶æ€ï¼Œserverâ€”â€”\u003eclient æ•°æ®æµä¹Ÿå»ºç«‹ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:2:3","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#æœåŠ¡ç«¯-1"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä¸¢åŒ…é—®é¢˜ä¸€åŒ…æ•°æ®æœ‰å¯èƒ½è¢«æ‹†æˆå¤šåŒ…å‘é€ï¼Œå¦‚ä½•å¤„ç†ä¸¢åŒ…é—®é¢˜â“è¿™äº›æ•°æ®åŒ…åˆ°è¾¾çš„å…ˆåé¡ºåºä¸åŒï¼Œå¦‚ä½•å¤„ç†ä¹±åºé—®é¢˜â“ TCP åè®®ä¸ºæ¯ä¸€ä¸ªè¿æ¥å»ºç«‹äº†ä¸€ä¸ªå‘é€ç¼“å†²åŒºï¼Œä»å»ºç«‹è¿æ¥åçš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·ä¸º 0ï¼Œåé¢æ¯ä¸ªå­—èŠ‚çš„åºåˆ—å·å°±ä¼šå¢åŠ  1ï¼Œå‘é€æ•°æ®æ—¶ï¼Œä»å‘é€ç¼“å†²åŒºå–ä¸€éƒ¨åˆ†æ•°æ®ç»„æˆå‘é€æŠ¥æ–‡ï¼Œåœ¨å…¶ TCP åè®®å¤´ä¸­ä¼šé™„å¸¦åºåˆ—å·å’Œé•¿åº¦ï¼Œæ¥æ”¶ç«¯åœ¨æ”¶åˆ°æ•°æ®åï¼Œéœ€è¦å›å¤ç¡®è®¤æŠ¥æ–‡ï¼Œç¡®è®¤æŠ¥æ–‡ä¸­çš„ACKç­‰äº æ¥æ”¶åºåˆ—å·åŠ ä¸Šé•¿åº¦ ï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸€åŒ…æ•°æ®éœ€è¦å‘é€çš„èµ·å§‹åºåˆ—å·ï¼Œè¿™æ ·çš„å‘é€æ–¹å¼ï¼Œèƒ½å¤Ÿä½¿å‘é€ç«¯ç¡®è®¤å‘é€çš„æ•°æ®ï¼Œå·²ç»è¢«å¯¹æ–¹æ”¶åˆ°ï¼Œå‘é€ç«¯ä¹Ÿå¯ä»¥ä¸€æ¬¡å‘é€ï¼Œè¿ç»­çš„å¤šåŒ…æ•°æ®ï¼Œæ¥æ”¶ç«¯åªéœ€è¦å›å¤ä¸€æ¬¡ACKå°±å¯ä»¥äº†ï¼Œè¿™æ ·å‘é€ç«¯å¯ä»¥æŠŠå¾…å‘é€çš„æ•°æ®åˆ†éš”æˆä¸€ç³»åˆ—çš„ç¢ç‰‡ï¼Œå‘é€åˆ°å¯¹ç«¯ï¼Œå¯¹ç«¯æ ¹æ®åºåˆ—å·å’Œé•¿åº¦ï¼Œåœ¨æ¥æ”¶åé‡æ„å‡ºæ¥å®Œæ•´çš„æ•°æ®ã€‚ å‡è®¾å…¶ä¸­ä¸¢å¤±äº†æŸäº›æ•°æ®ï¼Œåˆ™æ¥æ”¶ç«¯å¯ä»¥è¦æ±‚å‘é€ç«¯é‡ä¼ ï¼Œæ¯”å¦‚ä¸¢å¤±äº† 100-199 è¿™ 100 ä¸ªå­—èŠ‚ï¼Œæ¥æ”¶ç«¯å‘å‘é€ç«¯å‘é€ACK=100çš„æŠ¥æ–‡ï¼Œå‘é€ç«¯æ”¶åˆ°åé‡ä¼ è¿™ä¸€åŒ…æ•°æ®ï¼Œæ¥æ”¶ç«¯è¿›è¡Œè¡¥é½ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:3:0","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ä¸¢åŒ…é—®é¢˜"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å››æ¬¡æŒ¥æ‰‹ TCPå››æ¬¡æŒ¥æ‰‹ æ–­å¼€è¿æ¥å‰ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½å¤„äº ESTABLISHED çŠ¶æ€ï¼Œä¸¤è€…è°éƒ½å¯ä»¥å…ˆå‘èµ·æ–­å¼€è¿æ¥è¯·æ±‚ã€‚ä»¥ä¸‹å‡è®¾å®¢æˆ·ç«¯å…ˆå‘èµ·æ–­å¼€è¿æ¥è¯·æ±‚ã€‚ å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€åŒ…FINåŒ…ï¼Œè¡¨ç¤ºè¦å…³é—­è¿æ¥ï¼Œå®¢æˆ·ç«¯è‡ªå·±è¿›å…¥ç»ˆæ­¢ç­‰å¾…1 çŠ¶æ€ï¼Œè¿™æ˜¯ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ã€‚ æœåŠ¡ç«¯æ”¶åˆ°FINåŒ…ï¼Œå‘é€ä¸€åŒ…ACKåŒ…ï¼Œè¡¨ç¤ºè‡ªå·±è¿›å…¥äº†å…³é—­ç­‰å¾…çŠ¶æ€ï¼Œå®¢æˆ·ç«¯è¿›å…¥ç»ˆæ­¢ç­‰å¾…2 çŠ¶æ€ï¼Œè¿™æ˜¯ç¬¬äºŒæ¬¡æŒ¥æ‰‹ã€‚ æœåŠ¡ç«¯æ­¤æ—¶è¿˜å¯ä»¥å‘é€æœªå‘é€çš„æ•°æ®ï¼Œè€Œå®¢æˆ·ç«¯è¿˜å¯ä»¥æ¥æ”¶æ•°æ®ï¼Œå¾…æœåŠ¡ç«¯å‘é€å®Œæ•°æ®ä¹‹åï¼Œå‘é€ä¸€åŒ…FINåŒ…ï¼Œè¿›å…¥æœ€åç¡®è®¤çŠ¶æ€ ï¼Œè¿™æ˜¯ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ã€‚ å®¢æˆ·ç«¯æ”¶åˆ°ä¹‹åå›å¤ACKåŒ…ï¼Œè¿›å…¥è¶…æ—¶ç­‰å¾…çŠ¶æ€ï¼Œç»è¿‡è¶…æ—¶æ—¶é—´åå…³é—­è¿æ¥ï¼Œè€ŒæœåŠ¡ç«¯æ”¶åˆ°ACKåŒ…åç«‹å³å…³é—­è¿æ¥ï¼Œè¿™æ˜¯ç¬¬å››æ¬¡æŒ¥æ‰‹ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:0","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#å››æ¬¡æŒ¥æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ FIN æŠ¥æ–‡æ®µFIN=1, SN=client_snï¼Œè¯·æ±‚æ–­å¼€è¿æ¥ã€‚ SN=client_snæ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€çš„ç¬¬ client_sn-clien_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ FIN æŠ¥æ–‡æ®µè™½ç„¶ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ä¸€ä¸ªåºå·ï¼ˆç›¸å½“äºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ï¼‰ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯å†å‘æœåŠ¡ç«¯å‘é€çš„æŠ¥æ–‡ä¸­ SN=client_isn+1 ã€‚ å®¢æˆ·ç«¯å˜ä¸º FIN_WAIT1 çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯ ACK æŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:1","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ç¬¬ä¸€æ¬¡æŒ¥æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ FIN æŠ¥æ–‡æ®µFIN=1, SN=client_snï¼Œè¯·æ±‚æ–­å¼€è¿æ¥ã€‚ SN=client_snæ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€çš„ç¬¬ client_sn-clien_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ FIN æŠ¥æ–‡æ®µè™½ç„¶ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ä¸€ä¸ªåºå·ï¼ˆç›¸å½“äºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ï¼‰ï¼Œä¸‹æ¬¡å®¢æˆ·ç«¯å†å‘æœåŠ¡ç«¯å‘é€çš„æŠ¥æ–‡ä¸­ SN=client_isn+1 ã€‚ å®¢æˆ·ç«¯å˜ä¸º FIN_WAIT1 çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯ ACK æŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:1","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#å®¢æˆ·ç«¯-2"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬äºŒæ¬¡æŒ¥æ‰‹ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ FIN æŠ¥æ–‡æ®µã€‚ å‘å®¢æˆ·ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=client_sn+1, SN=server_sn_wave2ï¼Œåº”ç­”å®¢æˆ·ç«¯çš„æ–­å¼€è¿æ¥è¯·æ±‚ã€‚ SN=server_sn_wave2 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€çš„ç¬¬ server_sn_wave2-client_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ AN=client_sn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜æœåŠ¡ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ç¬¬ client_sn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æ­¤æ—¶æœåŠ¡ç«¯å˜ä¸º CLOSE_WAIT çŠ¶æ€ã€‚ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ ACK åŒ…ã€‚ å˜ä¸º FIN_WAIT2 çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯å…³é—­è¿æ¥è¯·æ±‚FINæŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:2","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ç¬¬äºŒæ¬¡æŒ¥æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬äºŒæ¬¡æŒ¥æ‰‹ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ FIN æŠ¥æ–‡æ®µã€‚ å‘å®¢æˆ·ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=client_sn+1, SN=server_sn_wave2ï¼Œåº”ç­”å®¢æˆ·ç«¯çš„æ–­å¼€è¿æ¥è¯·æ±‚ã€‚ SN=server_sn_wave2 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€çš„ç¬¬ server_sn_wave2-client_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ AN=client_sn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜æœåŠ¡ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ç¬¬ client_sn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æ­¤æ—¶æœåŠ¡ç«¯å˜ä¸º CLOSE_WAIT çŠ¶æ€ã€‚ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ ACK åŒ…ã€‚ å˜ä¸º FIN_WAIT2 çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯å…³é—­è¿æ¥è¯·æ±‚FINæŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:2","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#æœåŠ¡ç«¯-2"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬äºŒæ¬¡æŒ¥æ‰‹ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ FIN æŠ¥æ–‡æ®µã€‚ å‘å®¢æˆ·ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=client_sn+1, SN=server_sn_wave2ï¼Œåº”ç­”å®¢æˆ·ç«¯çš„æ–­å¼€è¿æ¥è¯·æ±‚ã€‚ SN=server_sn_wave2 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€çš„ç¬¬ server_sn_wave2-client_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ AN=client_sn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜æœåŠ¡ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ç¬¬ client_sn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æ­¤æ—¶æœåŠ¡ç«¯å˜ä¸º CLOSE_WAIT çŠ¶æ€ã€‚ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ ACK åŒ…ã€‚ å˜ä¸º FIN_WAIT2 çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯å…³é—­è¿æ¥è¯·æ±‚FINæŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:2","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#å®¢æˆ·ç«¯-3"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ æœåŠ¡ç«¯ï¼ˆæœåŠ¡ç«¯æƒ³æ–­å¼€è¿æ¥æ—¶ï¼‰å‘å®¢æˆ·ç«¯å‘é€ FIN æŠ¥æ–‡æ®µFIN=1, SN=server_snï¼Œè¯·æ±‚æ–­å¼€è¿æ¥ã€‚ SN=server_sn æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€çš„ç¬¬ server_sn-clien_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ FIN æŠ¥æ–‡æ®µè™½ç„¶ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ä¸€ä¸ªåºå·ï¼ˆç›¸å½“äºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ï¼‰ï¼Œä¸‹æ¬¡æœåŠ¡ç«¯å†å‘å®¢æˆ·ç«¯å‘é€çš„æŠ¥æ–‡ä¸­ SN=client_isn+2 ï¼ˆè‹¥æ–­å¼€è¿æ¥æˆåŠŸï¼Œåˆ™æœåŠ¡ç«¯ä¸ä¼šå†å‘å®¢æˆ·ç«¯å‘é€ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µï¼‰ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹å’Œç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ä¹‹é—´ï¼ŒæœåŠ¡ç«¯åˆå‘å®¢æˆ·ç«¯å‘é€äº† server_sn - server_sn_wave2 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æœåŠ¡ç«¯å˜ä¸º LAST_ACK çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:3","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ æœåŠ¡ç«¯ï¼ˆæœåŠ¡ç«¯æƒ³æ–­å¼€è¿æ¥æ—¶ï¼‰å‘å®¢æˆ·ç«¯å‘é€ FIN æŠ¥æ–‡æ®µFIN=1, SN=server_snï¼Œè¯·æ±‚æ–­å¼€è¿æ¥ã€‚ SN=server_sn æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢æœåŠ¡ç«¯å‘å®¢æˆ·ç«¯å‘é€çš„ç¬¬ server_sn-clien_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ FIN æŠ¥æ–‡æ®µè™½ç„¶ä¸èƒ½æºå¸¦æ•°æ®ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—ä¸€ä¸ªåºå·ï¼ˆç›¸å½“äºå‘é€äº†1ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ï¼‰ï¼Œä¸‹æ¬¡æœåŠ¡ç«¯å†å‘å®¢æˆ·ç«¯å‘é€çš„æŠ¥æ–‡ä¸­ SN=client_isn+2 ï¼ˆè‹¥æ–­å¼€è¿æ¥æˆåŠŸï¼Œåˆ™æœåŠ¡ç«¯ä¸ä¼šå†å‘å®¢æˆ·ç«¯å‘é€ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µï¼‰ã€‚ ç¬¬äºŒæ¬¡æŒ¥æ‰‹å’Œç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ä¹‹é—´ï¼ŒæœåŠ¡ç«¯åˆå‘å®¢æˆ·ç«¯å‘é€äº† server_sn - server_sn_wave2 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ æœåŠ¡ç«¯å˜ä¸º LAST_ACK çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:3","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#æœåŠ¡ç«¯-3"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬å››æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ FIN æŠ¥æ–‡æ®µã€‚ å‘æœåŠ¡ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=server_sn+1, SN=client_sn+1ï¼Œåº”ç­”æœåŠ¡ç«¯æ–­å¼€è¿æ¥è¯·æ±‚ã€‚ client_sn+1 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢å®¢æˆ·ç«¯å‘å®¢æˆ·ç«¯å‘é€çš„ç¬¬ client_isn+1)-clien_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚AN=server_sn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜æœåŠ¡ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ç¬¬ client_sn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ å®¢æˆ·ç«¯å˜ä¸º TIME_WAIT çŠ¶æ€ï¼Œç­‰å¾…2MSLæ—¶é—´åè¿›å…¥ CLOSED çŠ¶æ€ï¼Œè‡³æ­¤ clientâ€”â€”\u003eserver æ•°æ®æµè¢«å…³é—­ã€‚ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µã€‚ å˜ä¸º CLOSED çŠ¶æ€ï¼Œè‡³æ­¤ serverâ€”â€”\u003eclient æ•°æ®æµè¢«å…³é—­ã€‚ Tips å½“æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:4","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#ç¬¬å››æ¬¡æŒ¥æ‰‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬å››æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ FIN æŠ¥æ–‡æ®µã€‚ å‘æœåŠ¡ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=server_sn+1, SN=client_sn+1ï¼Œåº”ç­”æœåŠ¡ç«¯æ–­å¼€è¿æ¥è¯·æ±‚ã€‚ client_sn+1 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢å®¢æˆ·ç«¯å‘å®¢æˆ·ç«¯å‘é€çš„ç¬¬ client_isn+1)-clien_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚AN=server_sn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜æœåŠ¡ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ç¬¬ client_sn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ å®¢æˆ·ç«¯å˜ä¸º TIME_WAIT çŠ¶æ€ï¼Œç­‰å¾…2MSLæ—¶é—´åè¿›å…¥ CLOSED çŠ¶æ€ï¼Œè‡³æ­¤ clientâ€”â€”\u003eserver æ•°æ®æµè¢«å…³é—­ã€‚ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µã€‚ å˜ä¸º CLOSED çŠ¶æ€ï¼Œè‡³æ­¤ serverâ€”â€”\u003eclient æ•°æ®æµè¢«å…³é—­ã€‚ Tips å½“æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:4","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#å®¢æˆ·ç«¯-4"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç¬¬å››æ¬¡æŒ¥æ‰‹ å®¢æˆ·ç«¯æ¥æ”¶æ¥è‡ªæœåŠ¡ç«¯çš„ FIN æŠ¥æ–‡æ®µã€‚ å‘æœåŠ¡ç«¯å‘é€ ACK æŠ¥æ–‡æ®µACK=1, AN=server_sn+1, SN=client_sn+1ï¼Œåº”ç­”æœåŠ¡ç«¯æ–­å¼€è¿æ¥è¯·æ±‚ã€‚ client_sn+1 æ˜¯åºå·ï¼Œè¡¨æ˜å½“å‰æŠ¥æ–‡æ®µå‘é€çš„æœ‰æ•ˆæ•°æ®é¦–å­—èŠ‚æ˜¯ä»è¯·æ±‚å»ºç«‹è¿æ¥åˆ°ç°åœ¨ä¸ºæ­¢å®¢æˆ·ç«¯å‘å®¢æˆ·ç«¯å‘é€çš„ç¬¬ client_isn+1)-clien_isn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚AN=server_sn+1 æ˜¯ç¡®è®¤å·ï¼Œè¡¨æ˜æœåŠ¡ç«¯æ¥ä¸‹æ¥è¦å¼€å§‹æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ç¬¬ client_sn+1 ä¸ªå­—èŠ‚çš„æœ‰æ•ˆæ•°æ®ã€‚ å®¢æˆ·ç«¯å˜ä¸º TIME_WAIT çŠ¶æ€ï¼Œç­‰å¾…2MSLæ—¶é—´åè¿›å…¥ CLOSED çŠ¶æ€ï¼Œè‡³æ­¤ clientâ€”â€”\u003eserver æ•°æ®æµè¢«å…³é—­ã€‚ æœåŠ¡ç«¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„ ACK æŠ¥æ–‡æ®µã€‚ å˜ä¸º CLOSED çŠ¶æ€ï¼Œè‡³æ­¤ serverâ€”â€”\u003eclient æ•°æ®æµè¢«å…³é—­ã€‚ Tips å½“æ”¶åˆ°å¯¹æ–¹çš„FINæŠ¥æ–‡æ—¶ï¼Œä»…ä»…è¡¨ç¤ºå¯¹æ–¹ä¸å†å‘é€æ•°æ®äº†ä½†æ˜¯è¿˜èƒ½æ¥æ”¶æ•°æ®ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:4:4","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#æœåŠ¡ç«¯-4"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" UDPåè®®UDP åè®®æ˜¯è¿›è¡Œéè¿æ¥çš„ï¼Œå‘é€æ•°æ®å°±æ˜¯ç®€å•çš„æŠŠæ•°æ®åŒ…å°è£…ä¸€ä¸‹ï¼Œç„¶åä»ç½‘å¡å‘å‡ºå»ï¼Œæ•°æ®åŒ…ä¹‹é—´å¹¶æ²¡æœ‰çŠ¶æ€ä¸Šçš„è”ç³»ã€‚ç”±äº UDP è¿™ç§ç®€å•çš„å¤„ç†æ–¹å¼ï¼Œæ‰€ä»¥å®ƒçš„æ€§èƒ½æŸè€—éå¸¸å°‘ï¼Œå¯¹äº CPU å†…å­˜èµ„æºçš„å ç”¨ä¹Ÿè¿œå°äº TCPï¼Œä½†æ˜¯å¯¹äºç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­çš„ä¸¢åŒ…ï¼ŒUDP åè®®å¹¶ä¸èƒ½ä¿è¯ï¼Œæ‰€ä»¥ UDP åœ¨ä¼ è¾“ç¨³å®šæ€§ä¸Šå¼±äº TCPã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:5:0","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#udpåè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¸¸è§é—®é¢˜ â“ ä¸ºä»€ä¹ˆå»ºç«‹è¿æ¥éœ€è¦ä¸‰æ¬¡æ¡æ‰‹è€Œä¸æ˜¯äºŒæ¬¡ å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å»ºç«‹çš„ TCP æ˜¯å…¨åŒå·¥é€šä¿¡ï¼ŒåŒæ–¹éƒ½è¦ç¡®ä¿å¯¹æ–¹å‘é€èƒ½åŠ›å’Œæ¥æ”¶èƒ½åŠ›æ­£å¸¸ã€‚ ä¸€æ¬¡æ¡æ‰‹åï¼ŒæœåŠ¡ç«¯å¾—çŸ¥å®¢æˆ·ç«¯å‘é€èƒ½åŠ›æ­£å¸¸ã€‚ äºŒæ¬¡æ¡æ‰‹åï¼Œå®¢æˆ·ç«¯å¾—çŸ¥æœåŠ¡ç«¯æ¥æ”¶èƒ½åŠ›å’Œå‘é€èƒ½åŠ›æ­£å¸¸ã€‚ ä¸‰æ¬¡æ¡æ‰‹åï¼ŒæœåŠ¡ç«¯å¾—çŸ¥å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›æ­£å¸¸ã€‚ å¦‚æœåœ¨ç¬¬äºŒæ¬¡ä¹Ÿå°±æ˜¯æœåŠ¡ç«¯å›å¤SYN+ACKå°±å»ºç«‹è¿æ¥çš„è¯ï¼Œé‚£ä¹ˆå¯èƒ½å­˜åœ¨å·²ç»å¤±æ•ˆçš„è¯·æ±‚æŠ¥æ–‡ï¼Œçªç„¶åˆä¼ åˆ°æœåŠ¡å™¨å¼•èµ·é”™è¯¯ã€‚ å‡è®¾é‡‡ç”¨ä¸¤æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€äº†ä¸€ä¸ªSYNåŒ…æ¥è¯·æ±‚å»ºç«‹è¿æ¥ï¼Œç”±äºæŸäº›æœªçŸ¥çš„åŸå› ï¼Œå¹¶æ²¡æœ‰åˆ°è¾¾æœåŠ¡å™¨ï¼Œåœ¨ä¸­é—´æŸä¸ªç½‘ç»œèŠ‚ç‚¹äº§ç”Ÿäº†æ»ç•™ï¼Œä¸ºäº†å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯ä¼šé‡æ–°å‘é€SYNåŒ…ï¼Œè¿™æ¬¡çš„æ•°æ®åŒ…æ­£å¸¸é€è¾¾ï¼ŒæœåŠ¡ç«¯å›å¤SYN+ACKä¹‹åå»ºç«‹äº†è¿æ¥ï¼Œä½†æ˜¯æ­¤æ—¶ç¬¬ä¸€æ¬¡æ•°æ®é˜»å¡çš„ç½‘ç»œèŠ‚ç‚¹çªç„¶æ¢å¤ï¼Œç¬¬ä¸€åŒ…SYNåˆé€è¾¾åˆ°æœåŠ¡å™¨ï¼Œè¿™æ—¶æœåŠ¡ç«¯ä¼šè¯¯è®¤ä¸ºå®¢æˆ·ç«¯åˆå‘èµ·äº†ä¸€ä¸ªæ–°çš„è¿æ¥ï¼Œåˆå‘å®¢æˆ·ç«¯å‘é€äº†SYN+ACKåŒ…ï¼Œä½†äº‹å®æ˜¯æ­¤æ—¶å®¢æˆ·ç«¯å¹¶æ²¡æœ‰å‘å‡ºå»ºç«‹è¯·æ±‚çš„è¿æ¥ï¼Œå› æ­¤ä¸ä¼šç†ç¬æœåŠ¡ç«¯çš„ç¡®è®¤ï¼Œä¹Ÿä¸ä¼šå‘æœåŠ¡ç«¯å‘é€æ•°æ®ï¼Œä½†æœåŠ¡ç«¯å´ä»¥ä¸ºæ–°çš„è¿æ¥å·²ç»å»ºç«‹äº†ï¼Œå¹¶ä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ®ï¼Œä»è€Œåœ¨ä¸¤æ¬¡æ¡æ‰‹ä¹‹åè¿›å…¥ç­‰å¾…æ•°æ®çŠ¶æ€ã€‚æ­¤æ—¶æœåŠ¡ç«¯è®¤ä¸ºæ˜¯ä¸¤ä¸ªè¿æ¥ï¼Œè€Œå®¢æˆ·ç«¯è®¤ä¸ºæ˜¯ä¸€ä¸ªè¿æ¥ï¼Œé€ æˆäº†çŠ¶æ€ä¸ä¸€è‡´ã€‚å¦‚æœåœ¨ä¸‰æ¬¡æ¡æ‰‹çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡ç«¯æ”¶ä¸åˆ°æœ€åçš„ACKåŒ…ï¼Œä¾¿ä¸ä¼šè®¤ä¸ºè¿æ¥å»ºç«‹æˆåŠŸï¼Œæ‰€ä»¥ä¸‰æ¬¡æ¡æ‰‹æ˜¯ä¸ºäº†è§£å†³ç½‘ç»œä¸å¯é çš„é—®é¢˜ã€‚ â“ ä¸ºä»€ä¹ˆç¬¬å››æ¬¡æŒ¥æ‰‹æ—¶å®¢æˆ·ç«¯éœ€è¦ç­‰å¾…è¶…æ—¶æ—¶é—´å†è¿›å…¥CLOSEDçŠ¶æ€ MSLMaximum Segment Lifetimeï¼ŒæŠ¥æ–‡æ®µæœ€å¤§ç”Ÿå­˜æ—¶é—´ï¼Œæ˜¯ä¸€ä¸ªæœªè¢«æ¥å—çš„æŠ¥æ–‡æ®µåœ¨ç½‘ç»œä¸­è¢«ä¸¢å¼ƒå‰å­˜æ´»çš„æœ€å¤§æ—¶é—´ã€‚ ä¿è¯å»ºç«‹æ–°è¿æ¥æ—¶ç½‘ç»œä¸­ä¸å­˜åœ¨ä¸Šæ¬¡è¿æ¥æ—¶å‘é€çš„æ•°æ®åŒ…ï¼Œè¿›å…¥CLOSEDçŠ¶æ€æ„å‘³ç€å¯ä»¥å»ºç«‹æ–°è¿æ¥ï¼Œç­‰å¾… \u003eMSL çš„æ—¶é—´å†è¿›å…¥CLOSEDçŠ¶æ€å¯ä»¥ä¿è¯å»ºç«‹æ–°è¿æ¥åï¼Œç½‘ç»œä¸­ä¸ä¼šå­˜åœ¨ä¸Šæ¬¡è¿æ¥æ—¶å‘é€å‡ºå»çš„æ•°æ®åŒ…ã€‚è‹¥ç½‘ç»œä¸­åŒæ—¶å­˜åœ¨å‘é€ç«¯åœ¨ä¸¤æ¬¡è¿æ¥ä¸­å‘å‡ºçš„æ•°æ®åŒ…ï¼Œå¯¹æ¥æ”¶ç«¯æ¥æ”¶æ•°æ®å¯èƒ½ä¼šæœ‰å½±å“ã€‚ å®¢æˆ·ç«¯éœ€è¦ç­‰å¾…è¶…æ—¶æ—¶é—´ï¼Œè¿™æ˜¯ä¸ºäº†ä¿è¯å¯¹æ–¹å·²æ”¶åˆ°ACKåŒ…ã€‚ å‡è®¾å®¢æˆ·ç«¯å‘é€æœ€åä¸€åŒ…ACKåŒ…åå°±CLOSEDé‡Šæ”¾äº†è¿æ¥ï¼Œä¸€æ—¦ACKåŒ…åœ¨ç½‘ç»œä¸­ä¸¢å¤±ï¼ŒæœåŠ¡ç«¯å°†ä¸€ç›´åœç•™åœ¨æœ€åç¡®è®¤çŠ¶æ€ï¼Œå¦‚æœå®¢æˆ·ç«¯å‘é€æœ€åä¸€åŒ…ACKåŒ…åï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè¿™æ—¶æœåŠ¡ç«¯å› ä¸ºæ²¡æœ‰æ”¶åˆ°ACKåŒ…ï¼Œä¼šé‡å‘FINåŒ…ï¼Œå®¢æˆ·ç«¯ä¼šå“åº”è¿™ä¸ªFINåŒ…ï¼Œé‡å‘ACKåŒ…å¹¶åˆ·æ–°è¶…æ—¶æ—¶é—´ã€‚è¿™æ˜¯ä¸ºäº†åœ¨ä¸å¯é çš„ç½‘ç»œä¸­ï¼Œè¿›è¡Œå¯é çš„è¿æ¥æ–­å¼€ç¡®è®¤ã€‚ â“ å·²ç»å»ºç«‹äº†è¿æ¥ï¼Œå®¢æˆ·ç«¯çªç„¶å‡ºç°æ•…éšœæ€ä¹ˆåŠ TCP è®¾æœ‰ä¸€ä¸ªä¿æ´»è®¡æ—¶å™¨ï¼Œå®¢æˆ·ç«¯å¦‚æœå‡ºç°æ•…éšœï¼ŒæœåŠ¡å™¨ä¸èƒ½ä¸€ç›´ç­‰ä¸‹å»ï¼Œç™½ç™½æµªè´¹èµ„æºã€‚æœåŠ¡å™¨æ¯æ”¶åˆ°ä¸€æ¬¡å®¢æˆ·ç«¯çš„è¯·æ±‚åéƒ½ä¼šé‡æ–°å¤ä½è¿™ä¸ªè®¡æ—¶å™¨ï¼Œæ—¶é—´é€šå¸¸æ˜¯è®¾ç½®ä¸º 2 å°æ—¶ï¼Œè‹¥ä¸¤å°æ—¶è¿˜æ²¡æœ‰æ”¶åˆ°å®¢æˆ·ç«¯çš„ä»»ä½•æ•°æ®ï¼ŒæœåŠ¡å™¨å°±ä¼šå‘é€ä¸€ä¸ªæ¢æµ‹æŠ¥æ–‡æ®µï¼Œä»¥åæ¯éš” 75 ç§’é’Ÿå‘é€ä¸€æ¬¡ã€‚è‹¥ä¸€è¿å‘é€ 10 ä¸ªæ¢æµ‹æŠ¥æ–‡ä»ç„¶æ²¡ååº”ï¼Œ æœåŠ¡å™¨å°±è®¤ä¸ºå®¢æˆ·ç«¯å‡ºäº†æ•…éšœï¼Œæ¥ç€å°±å…³é—­è¿æ¥ã€‚ â“ TCP VS UDP TCP ä¼ è¾“æ•°æ®ç¨³å®šå¯é ï¼Œé€‚ç”¨äºå¯¹ç½‘ç»œé€šè®¯è´¨é‡è¦æ±‚è¾ƒé«˜çš„åœºæ™¯ï¼Œéœ€è¦å‡†ç¡®æ— è¯¯çš„ä¼ è¾“ç»™å¯¹æ–¹ï¼Œæ¯”å¦‚ä¼ è¾“æ–‡ä»¶ï¼Œå‘é€é‚®ä»¶ï¼Œæµè§ˆç½‘é¡µç­‰ã€‚ UDP ä¼˜ç‚¹æ˜¯é€Ÿåº¦å¿«ï¼Œä½†æ˜¯å¯èƒ½äº§ç”Ÿä¸¢åŒ…ï¼Œæ‰€ä»¥é€‚ç”¨äºå¯¹å®æ—¶æ€§è¦æ±‚è¾ƒé«˜ï¼Œä½†æ˜¯å¯¹å°‘é‡ä¸¢åŒ…å¹¶æ²¡æœ‰å¤ªå¤§è¦æ±‚çš„åœºæ™¯ï¼Œæ¯”å¦‚åŸŸåæŸ¥è¯¢ï¼Œè¯­éŸ³é€šè¯ï¼Œè§†é¢‘ç›´æ’­ç­‰ã€‚ ","date":"2022-03-21","objectID":"/tcp-handshark/:6:0","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#å¸¸è§é—®é¢˜"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å‚è€ƒ è®¡ç®—æœºç½‘ç»œâ€”â€”TCPè¿æ¥ç®¡ç†ï¼ˆä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ï¼‰ â€œä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹â€ä½ çœŸçš„æ‡‚å—ï¼Ÿ ä¸€æ¡è§†é¢‘è®²æ¸…æ¥šTCPåè®®ä¸UDPåè®®-ä»€ä¹ˆæ˜¯ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ TCPçš„ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹ç†è§£åŠé¢è¯•é¢˜ï¼ˆå¾ˆå…¨é¢ï¼‰ TCPæŠ¥æ–‡æ ¼å¼è¯¦è§£ é¢è¯•å®˜ï¼Œä¸è¦å†é—®æˆ‘ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹ ","date":"2022-03-21","objectID":"/tcp-handshark/:7:0","series":[],"tags":["tcp","udp","ä¸‰æ¬¡æ¡æ‰‹","å››æ¬¡æŒ¥æ‰‹"],"title":"TCPå’ŒUDPè¿æ¥ç®¡ç†","uri":"/tcp-handshark/#å‚è€ƒ"},{"categories":[""],"content":" å‰å°ç«¯ æŠ€æœ¯ä¸ºæœ¬ï¼Œåˆ›æ„ä¸ºå…ˆ MakerLi å‘ç€å…¨æ ˆå·¥ç¨‹å¸ˆå‰è¿› è¥¿ç“œ liupray xiaowuneng amosâ€™s blog ä¸€ä¸ªä½çº§è¶£å‘³çš„è€å¹´ç¨‹åºå‘˜ ","date":"2022-03-19","objectID":"/links/:0:0","series":null,"tags":[""],"title":"å‹æƒ…é“¾æ¥","uri":"/links/#"},{"categories":["web"],"content":"JSè¿è¡Œæœºåˆ¶,javascriptå¼‚æ­¥è¿è¡Œæœºåˆ¶,jså¼‚æ­¥åŒæ­¥,js Promise,js catch reject,jsæ‰§è¡Œé¡ºè®¯,async/await,jså¾®ä»»åŠ¡å’Œå®ä»»åŠ¡","date":"2022-03-18","objectID":"/js-cb-asyn/","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/"},{"categories":["web"],"content":" æ‰§è¡Œæ¨¡å¼JSçš„æ‰§è¡Œæ¨¡å¼æ˜¯å•çº¿ç¨‹çš„ï¼Œå½“æœ‰å¤šä¸ªä»»åŠ¡æ—¶å¿…é¡»æ’é˜Ÿæ‰§è¡Œï¼Œä¼˜ç‚¹æ˜¯æ‰§è¡Œç¯å¢ƒç®€å•ï¼Œç¼ºç‚¹æ˜¯æ€§èƒ½ä½ä¸‹ï¼Œå½“æœ‰å¤šä¸ªä»»åŠ¡æ—¶ï¼Œéœ€è¦ç­‰å¾…ä¸Šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆæ‰èƒ½æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œ å¦‚æœæŸä¸ªä»»åŠ¡å‡ºç°äº†æ­»å¾ªç¯ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚ æ‰€ä»¥JSå‡ºç°äº†åŒæ­¥å’Œå¼‚æ­¥çš„æ¦‚å¿µã€‚ ","date":"2022-03-18","objectID":"/js-cb-asyn/:1:0","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#æ‰§è¡Œæ¨¡å¼"},{"categories":["web"],"content":" åŒæ­¥åä¸€ä¸ªä»»åŠ¡ç­‰å¾…å‰ä¸€ä¸ªä»»åŠ¡ç»“æŸï¼Œç„¶åå†æ‰§è¡Œï¼Œç¨‹åºçš„æ‰§è¡Œé¡ºåºä¸ä»»åŠ¡çš„æ’åˆ—é¡ºåºæ˜¯ä¸€è‡´çš„ã€‚ ","date":"2022-03-18","objectID":"/js-cb-asyn/:1:1","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#åŒæ­¥"},{"categories":["web"],"content":" å¼‚æ­¥æ¯ä¸€ä¸ªä»»åŠ¡æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå›è°ƒå‡½æ•°ï¼ˆcallbackï¼‰ï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸåï¼Œä¸æ˜¯æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼Œè€Œæ˜¯æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œåä¸€ä¸ªä»»åŠ¡åˆ™æ˜¯ä¸ç­‰å‰ä¸€ä¸ªä»»åŠ¡ç»“æŸå°±æ‰§è¡Œï¼Œæ‰€ä»¥ç¨‹åºçš„æ‰§è¡Œé¡ºåºä¸ä»»åŠ¡çš„æ’åˆ—é¡ºåºå¯èƒ½æ˜¯ä¸ä¸€è‡´çš„ã€‚ ","date":"2022-03-18","objectID":"/js-cb-asyn/:1:2","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#å¼‚æ­¥"},{"categories":["web"],"content":" Event Loop// TODO ","date":"2022-03-18","objectID":"/js-cb-asyn/:2:0","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#event-loop"},{"categories":["web"],"content":" PromisePromise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œthen() ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆåŠŸresolveçš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å¤±è´¥rejectçš„å›è°ƒå‡½æ•°ï¼Œå½“ä¸å†™ç¬¬äºŒä¸ª then() å‚æ•°æ—¶ï¼Œå¯ä»¥ç”¨ catch() æ•è· reject å¼‚å¸¸ã€‚ ","date":"2022-03-18","objectID":"/js-cb-asyn/:3:0","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#promise"},{"categories":["web"],"content":" ä½¿ç”¨ var p1 = new Promise(function (resolve, reject) { // resolve('æˆåŠŸ'); reject(\"å¤±è´¥\") }); p1.then(function (res) { console.log(\"ç¬¬ä¸€ä¸ªfn: \", res) }, function (res) { console.log(\"ç¬¬äºŒä¸ª fn: \", res) }); resolveå’Œrejecté™¤äº†æ­£å¸¸çš„å€¼å¤–ï¼Œè¿˜å¯èƒ½æ˜¯å¦ä¸€ä¸ªpromiseå®ä¾‹ã€‚ const p1 = new Promise(function (resolve, reject) { resolve(1) }); const p2 = new Promise(function (resolve, reject) { // ... resolve(p1); }) p2.then(function (res) { console.log(res) }, function (res) { }) ç”¨ catch æ•è· reject å¼‚å¸¸ var p1 = new Promise(function (resolve, reject) { // todo... reject(111111) }); p1.then(function (res) { console.log(\"ç¬¬ä¸€ä¸ªfn: \", res) }).catch(function (err) { console.log(\"err :\", err) }).finally(function () { console.log(\"finally exec...\") }) ","date":"2022-03-18","objectID":"/js-cb-asyn/:3:1","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#ä½¿ç”¨"},{"categories":["web"],"content":" æ‰§è¡Œé¡ºåº","date":"2022-03-18","objectID":"/js-cb-asyn/:3:2","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#æ‰§è¡Œé¡ºåº"},{"categories":["web"],"content":" async/awaitçš„ç”¨æ³•å’Œç†è§£async å‡½æ•°æ˜¯éå¸¸æ–°çš„è¯­æ³•åŠŸèƒ½ï¼Œåœ¨ ES7 ä¸­å¯ç”¨ã€‚ async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ then æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚await ä½œä¸ºä¿®é¥°ç¬¦ï¼Œåªèƒ½æ”¾åœ¨ async å†…éƒ¨ä½¿ç”¨ã€‚ å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° await å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚ await ç­‰å¾…å³ä¾§è¡¨è¾¾å¼çš„ç»“æœã€‚ å¦‚æœç­‰åˆ°çš„ä¸æ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼Œé‚£ await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœå°±æ˜¯å®ƒç­‰åˆ°çš„ä¸œè¥¿ã€‚ å¦‚æœå®ƒç­‰åˆ°çš„æ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼Œå®ƒä¼šé˜»å¡åé¢çš„ä»£ç ï¼Œç­‰ç€ promise å¯¹è±¡ resolveï¼Œç„¶åå¾—åˆ° resolve çš„å€¼ï¼Œä½œä¸º await è¡¨è¾¾å¼çš„è¿ç®—ç»“æœã€‚ async function test() { let promise = new Promise(resolve =\u003e { setTimeout(() =\u003e resolve(\"test\"), 2000); }); await promise.then((ret) =\u003e { console.log(ret) }) let test1Ret = await test1() console.log(test1Ret) console.log(\"test end...\") } function test1() { return \"test1_return\" } test(); console.log('end') ","date":"2022-03-18","objectID":"/js-cb-asyn/:4:0","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#asyncawaitçš„ç”¨æ³•å’Œç†è§£"},{"categories":["web"],"content":" å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡// TODO ","date":"2022-03-18","objectID":"/js-cb-asyn/:5:0","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡"},{"categories":["web"],"content":" å‚è€ƒ Javascriptå¼‚æ­¥ç¼–ç¨‹çš„4ç§æ–¹æ³• JavaScript è¿è¡Œæœºåˆ¶è¯¦è§£ï¼šå†è°ˆEvent Loop async å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³• JSæ‰§è¡Œâ€”â€”Promise ä½ çœŸçš„äº†è§£å›è°ƒ? å›è°ƒåœ°ç‹± jsä¸­å¾®ä»»åŠ¡å’Œå®ä»»åŠ¡çš„åŒºåˆ« Javascriptå•çº¿ç¨‹å’Œäº‹ä»¶å¾ªç¯ ","date":"2022-03-18","objectID":"/js-cb-asyn/:6:0","series":null,"tags":["js"],"title":"JSè¿è¡Œæœºåˆ¶","uri":"/js-cb-asyn/#å‚è€ƒ"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":"HTTP,HTTPåè®®,è¶…æ–‡æœ¬ä¼ è¾“åè®®,äº’è”ç½‘,TCP/IP,Transmission Control Protocol,ä¼ è¾“æ§åˆ¶åè®®,ISO","date":"2022-03-17","objectID":"/http-glance/","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":"è¯¥ç¬”è®°æ˜¯åœ¨å­¦ä¹ ã€Šé€è§† HTTP åè®®ã€‹æ—¶æ•´ç†ï¼Œè¿˜å‚è€ƒäº†ç½‘ä¸Šçš„å…¶ä»–èµ„æ–™ã€‚é„™äººåªæ˜¯ç½‘ç»œä¸–ç•Œçš„æ¬è¿æ•´ç†å·¥ğŸ˜‚ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:0:0","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æ€»è§ˆ ","date":"2022-03-17","objectID":"/http-glance/:1:0","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#æ€»è§ˆ"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" http åè®®httpï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ä¸€ä¸ªç”¨åœ¨è®¡ç®—æœºä¸–ç•Œé‡Œçš„åè®®ã€‚å®ƒä½¿ç”¨è®¡ç®—æœºèƒ½å¤Ÿç†è§£çš„è¯­è¨€ç¡®ç«‹äº†ä¸€ç§è®¡ç®—æœºä¹‹é—´äº¤æµé€šä¿¡çš„è§„èŒƒï¼Œä»¥åŠç›¸å…³çš„å„ç§æ§åˆ¶å’Œé”™è¯¯å¤„ç†æ–¹å¼ã€‚ http æ˜¯ä¸€ä¸ªåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œä¸“é—¨åœ¨ä¸¤ç‚¹ä¹‹é—´ä¼ è¾“æ–‡å­—ã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰è¶…æ–‡æœ¬æ•°æ®çš„çº¦å®šå’Œè§„èŒƒã€‚ http ä¸æ˜¯ç¼–ç¨‹è¯­è¨€ï¼Œä½†æ˜¯å¯ä»¥ç”¨ç¼–ç¨‹è¯­è¨€å»å®ç° HTTPï¼Œå‘Šè¯‰è®¡ç®—æœºå¦‚ä½•ç”¨ HTTP æ¥ä¸å¤–ç•Œé€šä¿¡ã€‚ åœ¨äº’è”ç½‘ä¸–ç•Œé‡Œï¼ŒHTTP é€šå¸¸è·‘åœ¨ TCP/IP åè®®æ ˆä¹‹ä¸Šï¼Œä¾é  IP åè®®å®ç°å¯»å€å’Œè·¯ç”±ã€TCP åè®®å®ç°å¯é æ•°æ®ä¼ è¾“ã€DNS åè®®å®ç°åŸŸåæŸ¥æ‰¾ã€SSL/TLS åè®®å®ç°å®‰å…¨é€šä¿¡ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€äº›åè®®ä¾èµ–äº HTTPï¼Œä¾‹å¦‚ WebSocketã€HTTPDNS ç­‰ã€‚è¿™äº›åè®®ç›¸äº’äº¤ç»‡ï¼Œæ„æˆäº†ä¸€ä¸ªåè®®ç½‘ï¼Œè€Œ HTTP åˆ™å¤„äºä¸­å¿ƒåœ°ä½ã€‚ HTTP ä¼ è¾“çš„ä¸æ˜¯ TCP/UDP è¿™äº›åº•å±‚åè®®é‡Œè¢«åˆ‡åˆ†çš„æ‚ä¹±æ— ç« çš„äºŒè¿›åˆ¶åŒ…ï¼ˆdatagramï¼‰ï¼Œè€Œæ˜¯å®Œæ•´çš„ã€æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¯ä»¥è¢«æµè§ˆå™¨ã€æœåŠ¡å™¨è¿™æ ·çš„ä¸Šå±‚åº”ç”¨ç¨‹åºå¤„ç†ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:2:0","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#http-åè®®"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" äº’è”ç½‘å’Œä¸‡ç»´ç½‘çš„åŒºåˆ«æˆ‘ä»¬é€šå¸¸æ‰€è¯´çš„â€œä¸Šç½‘â€å®é™…ä¸Šè®¿é—®çš„åªæ˜¯äº’è”ç½‘çš„ä¸€ä¸ªå­é›†â€œä¸‡ç»´ç½‘â€ï¼ˆWorld Wide Webï¼‰ï¼Œå®ƒåŸºäº HTTP åè®®ï¼Œä¼ è¾“ HTML ç­‰è¶…æ–‡æœ¬èµ„æºï¼Œèƒ½åŠ›è¢«é™åˆ¶åœ¨ HTTP åè®®ä¹‹å†…ã€‚ äº’è”ç½‘ä¸Šè¿˜æœ‰è®¸å¤šä¸‡ç»´ç½‘ä¹‹å¤–çš„èµ„æºï¼Œä¾‹å¦‚å¸¸ç”¨çš„ç”µå­é‚®ä»¶ã€BT å’Œ Magnet ç‚¹å¯¹ç‚¹ä¸‹è½½ã€FTP æ–‡ä»¶ä¸‹è½½ã€SSH å®‰å…¨ç™»å½•ã€å„ç§å³æ—¶é€šä¿¡æœåŠ¡ç­‰ç­‰ï¼Œå®ƒä»¬éœ€è¦ç”¨å„è‡ªçš„ä¸“æœ‰åè®®æ¥è®¿é—®ã€‚ ä¸è¿‡ç”±äº HTTP åè®®éå¸¸çµæ´»ã€æ˜“äºæ‰©å±•ï¼Œè€Œä¸”â€œè¶…æ–‡æœ¬â€çš„è¡¨è¿°èƒ½åŠ›å¾ˆå¼ºï¼Œæ‰€ä»¥å¾ˆå¤šå…¶ä»–åŸæœ¬ä¸å±äº HTTP çš„èµ„æºä¹Ÿå¯ä»¥â€œåŒ…è£…â€æˆ HTTP æ¥è®¿é—®ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä¸ºä»€ä¹ˆèƒ½å¤Ÿæ€»çœ‹åˆ°å„ç§â€œç½‘é¡µåº”ç”¨â€â€”â€”ä¾‹å¦‚â€œå¾®ä¿¡ç½‘é¡µç‰ˆâ€â€œé‚®ç®±ç½‘é¡µç‰ˆâ€â€”â€”çš„åŸå› ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:2:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#äº’è”ç½‘å’Œä¸‡ç»´ç½‘çš„åŒºåˆ«"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" TCP/IPTCP/IP åè®®å®é™…ä¸Šæ˜¯ä¸€ç³»åˆ—ç½‘ç»œé€šä¿¡åè®®çš„ç»Ÿç§°ï¼Œ å…¶ä¸­æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªåè®®æ˜¯TCPï¼ˆTransmission Control Protocol/ä¼ è¾“æ§åˆ¶åè®®ï¼‰å’ŒIPï¼ˆInternet Protocolï¼‰ï¼Œå…¶ä»–çš„è¿˜æœ‰ UDPã€ICMPã€ARP ç­‰ç­‰ï¼Œå…±åŒæ„æˆäº†ä¸€ä¸ªå¤æ‚ä½†æœ‰å±‚æ¬¡çš„åè®®æ ˆã€‚ HTTP æ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ŒTCP æ˜¯ä¼ è¾“æ§åˆ¶åè®®ï¼Œéƒ½æ˜¯ä¼ è¾“ï¼ŒåŒºåˆ«æ˜¯ï¼ŒHTTP ä¼ è¾“çš„æ˜¯å®Œæ•´çš„ã€æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œå¯ä»¥è¢«æµè§ˆå™¨ã€ æœåŠ¡å™¨è¿™æ ·çš„ä¸Šå±‚åº”ç”¨ç¨‹åºå¤„ç†ï¼ŒHTTP ä¸å…³å¿ƒå¯»å€ã€è·¯ç”±ã€æ•°æ®å®Œæ•´æ€§ç­‰ä¼ è¾“ç»†èŠ‚ï¼Œè€Œè¦æ±‚è¿™äº›å·¥ä½œéƒ½ç”±ä¸‹å±‚ï¼ˆåŸºæœ¬éƒ½ç”± TCPï¼‰æ¥å¤„ç†ã€‚ TCP ä¼ è¾“çš„æ˜¯å¯é çš„ã€å­—èŠ‚æµå’ŒäºŒè¿›åˆ¶åŒ…ã€‚ TCP æ˜¯ HTTP å¾—ä»¥å®ç°çš„åŸºç¡€ï¼ŒHTTP åè®®è¿è¡Œåœ¨ TCP/IP ä¸Šï¼ŒHTTP å¯ä»¥æ›´å‡†ç¡®åœ°ç§°ä¸º â€œHTTP over TCP/IPâ€ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:2:2","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#tcpip"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" URI/URLURIï¼ˆUniform Resource Identifierï¼‰ï¼Œä¸­æ–‡åç§°æ˜¯ ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œä½¿ç”¨å®ƒå°±èƒ½å¤Ÿå”¯ä¸€åœ°æ ‡è®°äº’è”ç½‘ä¸Šèµ„æºã€‚ URI å¦ä¸€ä¸ªæ›´å¸¸ç”¨çš„è¡¨ç°å½¢å¼æ˜¯ URLï¼ˆUniform Resource Locatorï¼‰ï¼Œ ç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„â€œç½‘å€â€ï¼Œå®ƒå®é™…ä¸Šæ˜¯ URI çš„ä¸€ä¸ªå­é›†ï¼Œè¿™ä¸¤è€…å‡ ä¹æ˜¯ç›¸åŒçš„ï¼Œå·®å¼‚ä¸å¤§ï¼Œé™¤éå†™è®ºæ–‡ï¼Œå¦åˆ™ä¸ç”¨ç‰¹æ„åŒºåˆ†ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:2:3","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#uriurl"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" SSL/TSLSSL çš„å…¨ç§°æ˜¯â€œSecure Socket Layerâ€ï¼Œç½‘æ™¯å…¬å¸å‘æ˜ï¼Œå½“å‘å±•åˆ° 3.0 æ—¶è¢«æ ‡å‡†åŒ–ï¼Œæ”¹åä¸º TLSï¼Œå³â€œTransport Layer Securityâ€ã€‚ æ‰€ä»¥ TLS è·Ÿ SSL æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œç›¸å½“äºå¼ å›å®çš„ 2.0 ç‰ˆæœ¬æ˜¯å¼ ä¸‰ä¸°ã€‚ SSL æ˜¯ä¸€ä¸ªè´Ÿè´£åŠ å¯†é€šä¿¡çš„å®‰å…¨åè®®ï¼Œå»ºç«‹åœ¨ TCP/IP ä¹‹ä¸Šï¼Œåœ¨ HTTP åè®®ä¹‹ä¸‹ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:2:4","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#ssltsl"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" proxy ä»£ç† åŒ¿åä»£ç†ï¼šå®Œå…¨â€œéšåŒ¿â€äº†è¢«ä»£ç†çš„æœºå™¨ï¼Œå¤–ç•Œçœ‹åˆ°çš„åªæ˜¯ä»£ç†æœåŠ¡å™¨ï¼› é€æ˜ä»£ç†ï¼šé¡¾åæ€ä¹‰ï¼Œå®ƒåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯â€œé€æ˜å¼€æ”¾â€çš„ï¼Œå¤–ç•Œæ—¢çŸ¥é“ä»£ç†ï¼Œä¹ŸçŸ¥é“å®¢æˆ·ç«¯ï¼› æ­£å‘ä»£ç†ï¼šé è¿‘å®¢æˆ·ç«¯ï¼Œä»£ç†çš„å¯¹è±¡æ˜¯å®¢æˆ·ç«¯ï¼Œä»£è¡¨å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼› æ­£å‘ä»£ç†æ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯å’ŒåŸå§‹æœåŠ¡å™¨ï¼ˆorigin serverï¼‰ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨å–å¾—å†…å®¹ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶æŒ‡å®šç›®æ ‡ï¼ˆåŸå§‹æœåŠ¡å™¨ï¼Œæ¯”å¦‚ Googleï¼‰ï¼Œç„¶åä»£ç†å‘åŸå§‹æœåŠ¡å™¨è½¬äº¤è¯·æ±‚å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ æ­£å‘ä»£ç† åå‘ä»£ç†ï¼šé è¿‘æœåŠ¡å™¨ç«¯ï¼Œä»£ç†ä»£ç†çš„å¯¹è±¡æ˜¯æœåŠ¡ç«¯ï¼Œä»£è¡¨æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ åå‘ä»£ç†æŒ‡çš„æ˜¯ä»£ç†æœåŠ¡å™¨æ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä»å…¶å…³ç³»çš„ä¸€ç»„æˆ–å¤šç»„åç«¯æœåŠ¡å™¨ï¼ˆå¦‚ Web æœåŠ¡å™¨ï¼‰ä¸Šè·å–èµ„æºï¼Œç„¶åå†å°†è¿™äº›èµ„æºè¿”å›ç»™å®¢æˆ·ç«¯çš„è¿‡ç¨‹ï¼Œå®¢æˆ·ç«¯åªä¼šå¾—çŸ¥ä»£ç†æœåŠ¡å™¨çš„ IP åœ°å€ï¼Œè€Œä¸çŸ¥é“åœ¨ä»£ç†æœåŠ¡å™¨åé¢çš„æœåŠ¡å™¨é›†ç¾¤çš„å­˜åœ¨ã€‚ å½“ä¸€ä¸ªä»£ç†æœåŠ¡å™¨èƒ½å¤Ÿä»£ç†å¤–éƒ¨ç½‘ç»œä¸Šçš„ä¸»æœºï¼Œè®¿é—®å†…éƒ¨ç½‘ç»œæ—¶ï¼Œè¿™ç§ä»£ç†æœåŠ¡çš„æ–¹å¼ç§°ä¸ºåå‘ä»£ç†æœåŠ¡ã€‚ åå‘ä»£ç† ","date":"2022-03-17","objectID":"/http-glance/:2:5","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#proxy-ä»£ç†"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" http ç‰ˆæœ¬ä¸‡ç»´ç½‘å…³é”®æŠ€æœ¯ URIï¼šå³ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œä½œä¸ºäº’è”ç½‘ä¸Šèµ„æºçš„å”¯ä¸€èº«ä»½ï¼› HTMLï¼šå³è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼Œæè¿°è¶…æ–‡æœ¬æ–‡æ¡£ï¼› HTTPï¼šå³è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œç”¨æ¥ä¼ è¾“è¶…æ–‡æœ¬ã€‚ åŸºäºè¿™ä¸‰é¡¹å…³é”®æŠ€æœ¯å°±å¯ä»¥æŠŠè¶…æ–‡æœ¬ç³»ç»Ÿå®Œç¾åœ°è¿è¡Œåœ¨äº’è”ç½‘ä¸Šï¼Œè®©å„åœ°çš„äººä»¬èƒ½å¤Ÿè‡ªç”±åœ°å…±äº«ä¿¡æ¯ï¼Œè¿™ä¸ªç³»ç»Ÿç§°ä¸ºâ€œä¸‡ç»´ç½‘â€ï¼ˆWorld Wide Webï¼‰ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨æ‰€ç†ŸçŸ¥çš„ Webã€‚ ","date":"2022-03-17","objectID":"/http-glance/:3:0","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#http-ç‰ˆæœ¬"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" http/0.9ç»“æ„ç®€å•ï¼Œè®¾ç½®ä¹‹åˆè®¾æƒ³ç³»ç»Ÿé‡Œçš„æ–‡æ¡£éƒ½æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥åªå…è®¸ç”¨ GET åŠ¨ä½œä»æœåŠ¡å™¨ä¸Šè·å– HTML çº¯æ–‡æœ¬æ ¼å¼çš„æ–‡æ¡£ï¼Œå¹¶ä¸”åœ¨å“åº”è¯·æ±‚ä¹‹åç«‹å³å…³é—­è¿æ¥ï¼ŒåŠŸèƒ½éå¸¸æœ‰é™ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:3:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#http09"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" http/1.0HTTP/1.0 å¹¶ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†ï¼Œåªæ˜¯è®°å½•å·²æœ‰å®è·µå’Œæ¨¡å¼çš„ä¸€ä»½å‚è€ƒæ–‡æ¡£ï¼Œä¸å…·æœ‰å®é™…çš„çº¦æŸåŠ›ï¼Œç›¸å½“äºä¸€ä¸ªå¤‡å¿˜å½•ã€‚ åœ¨å¤šæ–¹é¢å¢å¼ºäº† 0.9 ç‰ˆï¼Œå½¢å¼ä¸Šå·²ç»å’Œæˆ‘ä»¬ç°åœ¨çš„ HTTP å·®åˆ«ä¸å¤§äº†ï¼Œä¾‹å¦‚ï¼š å¢åŠ äº† HEADã€POST ç­‰æ–°æ–¹æ³•ï¼› å¢åŠ äº†å“åº”çŠ¶æ€ç ï¼Œæ ‡è®°å¯èƒ½çš„é”™è¯¯åŸå› ï¼› å¼•å…¥äº†åè®®ç‰ˆæœ¬å·æ¦‚å¿µï¼› å¼•å…¥äº† HTTP Headerï¼ˆå¤´éƒ¨ï¼‰çš„æ¦‚å¿µï¼Œè®© HTTP å¤„ç†è¯·æ±‚å’Œå“åº”æ›´åŠ çµæ´»ï¼› ä¼ è¾“çš„æ•°æ®ä¸å†ä»…é™äºæ–‡æœ¬ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:3:2","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#http10"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" http/1.1æ˜¯ä¸€ä¸ªæ­£å¼çš„æ ‡å‡†ï¼Œè€Œä¸æ˜¯ä¸€ä»½å¯æœ‰å¯æ— çš„å‚è€ƒæ–‡æ¡£ï¼Œåªè¦ç”¨åˆ° HTTP åè®®ï¼Œå°±å¿…é¡»ä¸¥æ ¼éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚ ä¸»è¦å˜æ›´ï¼š å¢åŠ äº† PUTã€DELETE ç­‰æ–°çš„æ–¹æ³•ï¼› å¢åŠ äº†ç¼“å­˜ç®¡ç†å’Œæ§åˆ¶ï¼› æ˜ç¡®äº†è¿æ¥ç®¡ç†ï¼Œå…è®¸æŒä¹…è¿æ¥ï¼› å…è®¸å“åº”æ•°æ®åˆ†å—ï¼ˆchunkedï¼‰ï¼Œåˆ©äºä¼ è¾“å¤§æ–‡ä»¶ï¼› å¼ºåˆ¶è¦æ±‚ Host å¤´ï¼Œè®©äº’è”ç½‘ä¸»æœºæ‰˜ç®¡æˆä¸ºå¯èƒ½ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:3:3","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#http11"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" http/2ç”± google ä¸»å¯¼ï¼ŒåŸºäº google çš„ SPDY åè®®ä¸ºåŸºç¡€å¼€å§‹åˆ¶å®šæ–°ç‰ˆæœ¬çš„ HTTP åè®®ï¼Œæœ€ç»ˆåœ¨ 2015 å¹´å‘å¸ƒäº† HTTP/2ã€‚ ä¸»è¦ç‰¹ç‚¹ï¼š äºŒè¿›åˆ¶åè®®ï¼Œä¸å†æ˜¯çº¯æ–‡æœ¬ï¼› å¯å‘èµ·å¤šä¸ªè¯·æ±‚ï¼ŒåºŸå¼ƒäº† 1.1 é‡Œçš„ç®¡é“ï¼› ä½¿ç”¨ä¸“ç”¨ç®—æ³•å‹ç¼©å¤´éƒ¨ï¼Œå‡å°‘æ•°æ®ä¼ è¾“é‡ï¼› å…è®¸æœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€æ•°æ®ï¼› å¢å¼ºäº†å®‰å…¨æ€§ï¼Œâ€œäº‹å®ä¸Šâ€è¦æ±‚åŠ å¯†é€šä¿¡ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:3:4","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#http2"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" http/3ç”± google ä¸»å¯¼ï¼ŒåŸºäº google çš„ QUIC åè®®ä¸ºåŸºç¡€å¼€å§‹åˆ¶å®šæ–°ç‰ˆæœ¬çš„ HTTP åè®®ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:3:5","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#http3"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ç½‘ç»œåˆ†å±‚æ¨¡å‹","date":"2022-03-17","objectID":"/http-glance/:4:0","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#ç½‘ç»œåˆ†å±‚æ¨¡å‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" TCP/IP TCP/IPåˆ†å±‚æ¨¡å‹ è¿™é‡Œçš„å±‚æ¬¡é¡ºåºæ˜¯â€œä»ä¸‹å¾€ä¸Šâ€æ•°çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€å±‚å°±æ˜¯æœ€ä¸‹é¢çš„ä¸€å±‚ã€‚ é“¾æ¥å±‚ç¬¬ä¸€å±‚å«â€œé“¾æ¥å±‚â€ï¼ˆlink layerï¼‰ï¼Œè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚ ç½‘ç»œäº’è”å±‚ç¬¬äºŒå±‚å«â€œç½‘é™…å±‚â€æˆ–è€…â€œç½‘ç»œäº’è¿å±‚â€ï¼ˆinternet layerï¼‰ï¼ŒIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ ä¼ è¾“å±‚ç¬¬ä¸‰å±‚å«â€œä¼ è¾“å±‚â€ï¼ˆtransport layerï¼‰ï¼Œè¿™ä¸ªå±‚æ¬¡åè®®çš„èŒè´£æ˜¯ä¿è¯æ•°æ®åœ¨ IP åœ°å€æ ‡è®°çš„ä¸¤ç‚¹ä¹‹é—´â€œå¯é â€åœ°ä¼ è¾“ï¼Œæ˜¯ TCP åè®®å·¥ä½œçš„å±‚æ¬¡ï¼Œå¦å¤–è¿˜æœ‰å®ƒçš„ä¸€ä¸ªâ€œå°ä¼™ä¼´â€UDPã€‚ TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚ åº”ç”¨å±‚åè®®æ ˆçš„ç¬¬å››å±‚å«â€œåº”ç”¨å±‚â€ï¼ˆapplication layerï¼‰ï¼Œç”±äºä¸‹é¢çš„ä¸‰å±‚æŠŠåŸºç¡€æ‰“å¾—éå¸¸å¥½ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€å±‚å°±â€œç™¾èŠ±é½æ”¾â€äº†ï¼Œæœ‰å„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ã€‚ä¾‹å¦‚ Telnetã€SSHã€FTPã€SMTPï¼ŒHTTP ç­‰ç­‰ã€‚ Tip MAC å±‚ï¼ˆé“¾æ¥å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯å¸§ï¼ˆframeï¼‰ï¼ŒIP å±‚ï¼ˆç½‘ç»œäº’è”å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰ï¼ŒTCP å±‚ä¼ è¾“å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰ï¼Œ HTTP ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰ã€‚è¿™äº›åè¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ†ï¼Œå¯ä»¥ç»Ÿç§°ä¸ºæ•°æ®åŒ…ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:4:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#tcpip-1"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" TCP/IP TCP/IPåˆ†å±‚æ¨¡å‹ è¿™é‡Œçš„å±‚æ¬¡é¡ºåºæ˜¯â€œä»ä¸‹å¾€ä¸Šâ€æ•°çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€å±‚å°±æ˜¯æœ€ä¸‹é¢çš„ä¸€å±‚ã€‚ é“¾æ¥å±‚ç¬¬ä¸€å±‚å«â€œé“¾æ¥å±‚â€ï¼ˆlink layerï¼‰ï¼Œè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚ ç½‘ç»œäº’è”å±‚ç¬¬äºŒå±‚å«â€œç½‘é™…å±‚â€æˆ–è€…â€œç½‘ç»œäº’è¿å±‚â€ï¼ˆinternet layerï¼‰ï¼ŒIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ ä¼ è¾“å±‚ç¬¬ä¸‰å±‚å«â€œä¼ è¾“å±‚â€ï¼ˆtransport layerï¼‰ï¼Œè¿™ä¸ªå±‚æ¬¡åè®®çš„èŒè´£æ˜¯ä¿è¯æ•°æ®åœ¨ IP åœ°å€æ ‡è®°çš„ä¸¤ç‚¹ä¹‹é—´â€œå¯é â€åœ°ä¼ è¾“ï¼Œæ˜¯ TCP åè®®å·¥ä½œçš„å±‚æ¬¡ï¼Œå¦å¤–è¿˜æœ‰å®ƒçš„ä¸€ä¸ªâ€œå°ä¼™ä¼´â€UDPã€‚ TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚ åº”ç”¨å±‚åè®®æ ˆçš„ç¬¬å››å±‚å«â€œåº”ç”¨å±‚â€ï¼ˆapplication layerï¼‰ï¼Œç”±äºä¸‹é¢çš„ä¸‰å±‚æŠŠåŸºç¡€æ‰“å¾—éå¸¸å¥½ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€å±‚å°±â€œç™¾èŠ±é½æ”¾â€äº†ï¼Œæœ‰å„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ã€‚ä¾‹å¦‚ Telnetã€SSHã€FTPã€SMTPï¼ŒHTTP ç­‰ç­‰ã€‚ Tip MAC å±‚ï¼ˆé“¾æ¥å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯å¸§ï¼ˆframeï¼‰ï¼ŒIP å±‚ï¼ˆç½‘ç»œäº’è”å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰ï¼ŒTCP å±‚ä¼ è¾“å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰ï¼Œ HTTP ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰ã€‚è¿™äº›åè¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ†ï¼Œå¯ä»¥ç»Ÿç§°ä¸ºæ•°æ®åŒ…ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:4:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#é“¾æ¥å±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" TCP/IP TCP/IPåˆ†å±‚æ¨¡å‹ è¿™é‡Œçš„å±‚æ¬¡é¡ºåºæ˜¯â€œä»ä¸‹å¾€ä¸Šâ€æ•°çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€å±‚å°±æ˜¯æœ€ä¸‹é¢çš„ä¸€å±‚ã€‚ é“¾æ¥å±‚ç¬¬ä¸€å±‚å«â€œé“¾æ¥å±‚â€ï¼ˆlink layerï¼‰ï¼Œè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚ ç½‘ç»œäº’è”å±‚ç¬¬äºŒå±‚å«â€œç½‘é™…å±‚â€æˆ–è€…â€œç½‘ç»œäº’è¿å±‚â€ï¼ˆinternet layerï¼‰ï¼ŒIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ ä¼ è¾“å±‚ç¬¬ä¸‰å±‚å«â€œä¼ è¾“å±‚â€ï¼ˆtransport layerï¼‰ï¼Œè¿™ä¸ªå±‚æ¬¡åè®®çš„èŒè´£æ˜¯ä¿è¯æ•°æ®åœ¨ IP åœ°å€æ ‡è®°çš„ä¸¤ç‚¹ä¹‹é—´â€œå¯é â€åœ°ä¼ è¾“ï¼Œæ˜¯ TCP åè®®å·¥ä½œçš„å±‚æ¬¡ï¼Œå¦å¤–è¿˜æœ‰å®ƒçš„ä¸€ä¸ªâ€œå°ä¼™ä¼´â€UDPã€‚ TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚ åº”ç”¨å±‚åè®®æ ˆçš„ç¬¬å››å±‚å«â€œåº”ç”¨å±‚â€ï¼ˆapplication layerï¼‰ï¼Œç”±äºä¸‹é¢çš„ä¸‰å±‚æŠŠåŸºç¡€æ‰“å¾—éå¸¸å¥½ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€å±‚å°±â€œç™¾èŠ±é½æ”¾â€äº†ï¼Œæœ‰å„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ã€‚ä¾‹å¦‚ Telnetã€SSHã€FTPã€SMTPï¼ŒHTTP ç­‰ç­‰ã€‚ Tip MAC å±‚ï¼ˆé“¾æ¥å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯å¸§ï¼ˆframeï¼‰ï¼ŒIP å±‚ï¼ˆç½‘ç»œäº’è”å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰ï¼ŒTCP å±‚ä¼ è¾“å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰ï¼Œ HTTP ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰ã€‚è¿™äº›åè¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ†ï¼Œå¯ä»¥ç»Ÿç§°ä¸ºæ•°æ®åŒ…ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:4:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#ç½‘ç»œäº’è”å±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" TCP/IP TCP/IPåˆ†å±‚æ¨¡å‹ è¿™é‡Œçš„å±‚æ¬¡é¡ºåºæ˜¯â€œä»ä¸‹å¾€ä¸Šâ€æ•°çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€å±‚å°±æ˜¯æœ€ä¸‹é¢çš„ä¸€å±‚ã€‚ é“¾æ¥å±‚ç¬¬ä¸€å±‚å«â€œé“¾æ¥å±‚â€ï¼ˆlink layerï¼‰ï¼Œè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚ ç½‘ç»œäº’è”å±‚ç¬¬äºŒå±‚å«â€œç½‘é™…å±‚â€æˆ–è€…â€œç½‘ç»œäº’è¿å±‚â€ï¼ˆinternet layerï¼‰ï¼ŒIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ ä¼ è¾“å±‚ç¬¬ä¸‰å±‚å«â€œä¼ è¾“å±‚â€ï¼ˆtransport layerï¼‰ï¼Œè¿™ä¸ªå±‚æ¬¡åè®®çš„èŒè´£æ˜¯ä¿è¯æ•°æ®åœ¨ IP åœ°å€æ ‡è®°çš„ä¸¤ç‚¹ä¹‹é—´â€œå¯é â€åœ°ä¼ è¾“ï¼Œæ˜¯ TCP åè®®å·¥ä½œçš„å±‚æ¬¡ï¼Œå¦å¤–è¿˜æœ‰å®ƒçš„ä¸€ä¸ªâ€œå°ä¼™ä¼´â€UDPã€‚ TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚ åº”ç”¨å±‚åè®®æ ˆçš„ç¬¬å››å±‚å«â€œåº”ç”¨å±‚â€ï¼ˆapplication layerï¼‰ï¼Œç”±äºä¸‹é¢çš„ä¸‰å±‚æŠŠåŸºç¡€æ‰“å¾—éå¸¸å¥½ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€å±‚å°±â€œç™¾èŠ±é½æ”¾â€äº†ï¼Œæœ‰å„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ã€‚ä¾‹å¦‚ Telnetã€SSHã€FTPã€SMTPï¼ŒHTTP ç­‰ç­‰ã€‚ Tip MAC å±‚ï¼ˆé“¾æ¥å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯å¸§ï¼ˆframeï¼‰ï¼ŒIP å±‚ï¼ˆç½‘ç»œäº’è”å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰ï¼ŒTCP å±‚ä¼ è¾“å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰ï¼Œ HTTP ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰ã€‚è¿™äº›åè¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ†ï¼Œå¯ä»¥ç»Ÿç§°ä¸ºæ•°æ®åŒ…ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:4:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#ä¼ è¾“å±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" TCP/IP TCP/IPåˆ†å±‚æ¨¡å‹ è¿™é‡Œçš„å±‚æ¬¡é¡ºåºæ˜¯â€œä»ä¸‹å¾€ä¸Šâ€æ•°çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€å±‚å°±æ˜¯æœ€ä¸‹é¢çš„ä¸€å±‚ã€‚ é“¾æ¥å±‚ç¬¬ä¸€å±‚å«â€œé“¾æ¥å±‚â€ï¼ˆlink layerï¼‰ï¼Œè´Ÿè´£åœ¨ä»¥å¤ªç½‘ã€WiFi è¿™æ ·çš„åº•å±‚ç½‘ç»œä¸Šå‘é€åŸå§‹æ•°æ®åŒ…ï¼Œå·¥ä½œåœ¨ç½‘å¡è¿™ä¸ªå±‚æ¬¡ï¼Œä½¿ç”¨ MAC åœ°å€æ¥æ ‡è®°ç½‘ç»œä¸Šçš„è®¾å¤‡ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¹Ÿå« MAC å±‚ã€‚ ç½‘ç»œäº’è”å±‚ç¬¬äºŒå±‚å«â€œç½‘é™…å±‚â€æˆ–è€…â€œç½‘ç»œäº’è¿å±‚â€ï¼ˆinternet layerï¼‰ï¼ŒIP åè®®å°±å¤„åœ¨è¿™ä¸€å±‚ã€‚å› ä¸º IP åè®®å®šä¹‰äº†â€œIP åœ°å€â€çš„æ¦‚å¿µï¼Œæ‰€ä»¥å°±å¯ä»¥åœ¨â€œé“¾æ¥å±‚â€çš„åŸºç¡€ä¸Šï¼Œç”¨ IP åœ°å€å–ä»£ MAC åœ°å€ï¼ŒæŠŠè®¸è®¸å¤šå¤šçš„å±€åŸŸç½‘ã€å¹¿åŸŸç½‘è¿æ¥æˆä¸€ä¸ªè™šæ‹Ÿçš„å·¨å¤§ç½‘ç»œï¼Œåœ¨è¿™ä¸ªç½‘ç»œé‡Œæ‰¾è®¾å¤‡æ—¶åªè¦æŠŠ IP åœ°å€å†â€œç¿»è¯‘â€æˆ MAC åœ°å€å°±å¯ä»¥äº†ã€‚ ä¼ è¾“å±‚ç¬¬ä¸‰å±‚å«â€œä¼ è¾“å±‚â€ï¼ˆtransport layerï¼‰ï¼Œè¿™ä¸ªå±‚æ¬¡åè®®çš„èŒè´£æ˜¯ä¿è¯æ•°æ®åœ¨ IP åœ°å€æ ‡è®°çš„ä¸¤ç‚¹ä¹‹é—´â€œå¯é â€åœ°ä¼ è¾“ï¼Œæ˜¯ TCP åè®®å·¥ä½œçš„å±‚æ¬¡ï¼Œå¦å¤–è¿˜æœ‰å®ƒçš„ä¸€ä¸ªâ€œå°ä¼™ä¼´â€UDPã€‚ TCP æ˜¯ä¸€ä¸ªæœ‰çŠ¶æ€çš„åè®®ï¼Œéœ€è¦å…ˆä¸å¯¹æ–¹å»ºç«‹è¿æ¥ç„¶åæ‰èƒ½å‘é€æ•°æ®ï¼Œè€Œä¸”ä¿è¯æ•°æ®ä¸ä¸¢å¤±ä¸é‡å¤ã€‚è€Œ UDP åˆ™æ¯”è¾ƒç®€å•ï¼Œå®ƒæ— çŠ¶æ€ï¼Œä¸ç”¨äº‹å…ˆå»ºç«‹è¿æ¥å°±å¯ä»¥ä»»æ„å‘é€æ•°æ®ï¼Œä½†ä¸ä¿è¯æ•°æ®ä¸€å®šä¼šå‘åˆ°å¯¹æ–¹ã€‚ä¸¤ä¸ªåè®®çš„å¦ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºæ•°æ®çš„å½¢å¼ã€‚TCP çš„æ•°æ®æ˜¯è¿ç»­çš„â€œå­—èŠ‚æµâ€ï¼Œæœ‰å…ˆåé¡ºåºï¼Œè€Œ UDP åˆ™æ˜¯åˆ†æ•£çš„å°æ•°æ®åŒ…ï¼Œæ˜¯é¡ºåºå‘ï¼Œä¹±åºæ”¶ã€‚ åº”ç”¨å±‚åè®®æ ˆçš„ç¬¬å››å±‚å«â€œåº”ç”¨å±‚â€ï¼ˆapplication layerï¼‰ï¼Œç”±äºä¸‹é¢çš„ä¸‰å±‚æŠŠåŸºç¡€æ‰“å¾—éå¸¸å¥½ï¼Œæ‰€ä»¥åœ¨è¿™ä¸€å±‚å°±â€œç™¾èŠ±é½æ”¾â€äº†ï¼Œæœ‰å„ç§é¢å‘å…·ä½“åº”ç”¨çš„åè®®ã€‚ä¾‹å¦‚ Telnetã€SSHã€FTPã€SMTPï¼ŒHTTP ç­‰ç­‰ã€‚ Tip MAC å±‚ï¼ˆé“¾æ¥å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯å¸§ï¼ˆframeï¼‰ï¼ŒIP å±‚ï¼ˆç½‘ç»œäº’è”å±‚ï¼‰çš„ä¼ è¾“å•ä½æ˜¯åŒ…ï¼ˆpacketï¼‰ï¼ŒTCP å±‚ä¼ è¾“å±‚çš„ä¼ è¾“å•ä½æ˜¯æ®µï¼ˆsegmentï¼‰ï¼Œ HTTP ï¼ˆåº”ç”¨å±‚ï¼‰çš„ä¼ è¾“å•ä½åˆ™æ˜¯æ¶ˆæ¯æˆ–æŠ¥æ–‡ï¼ˆmessageï¼‰ã€‚è¿™äº›åè¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ†ï¼Œå¯ä»¥ç»Ÿç§°ä¸ºæ•°æ®åŒ…ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:4:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#åº”ç”¨å±‚"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" OSI ç½‘ç»œåˆ†å±‚æ¨¡å‹OSI åˆ†å±‚æ¨¡å‹åœ¨å‘å¸ƒçš„æ—¶å€™å°±æ˜ç¡®åœ°è¡¨æ˜æ˜¯ä¸€ä¸ªâ€œå‚è€ƒâ€ï¼Œä¸æ˜¯å¼ºåˆ¶æ ‡å‡†ã€‚è¿™æ˜¯å› ä¸º TCP/IP ç­‰åè®®å·²ç»åœ¨è®¸å¤šç½‘ç»œä¸Šå®é™…è¿è¡Œï¼Œä¸å¯èƒ½æ¨ç¿»é‡æ¥ã€‚ OSIç½‘ç»œæ¨¡å‹ ç¬¬ä¸€å±‚ï¼šç‰©ç†å±‚ï¼Œç½‘ç»œçš„ç‰©ç†å½¢å¼ï¼Œä¾‹å¦‚ç”µç¼†ã€å…‰çº¤ã€ç½‘å¡ã€é›†çº¿å™¨ç­‰ç­‰ï¼› ç¬¬äºŒå±‚ï¼šæ•°æ®é“¾è·¯å±‚ï¼Œå®ƒåŸºæœ¬ç›¸å½“äº TCP/IP çš„é“¾æ¥å±‚ï¼› ç¬¬ä¸‰å±‚ï¼šç½‘ç»œå±‚ï¼Œç›¸å½“äº TCP/IP é‡Œçš„ç½‘é™…å±‚ï¼› ç¬¬å››å±‚ï¼šä¼ è¾“å±‚ï¼Œç›¸å½“äº TCP/IP é‡Œçš„ä¼ è¾“å±‚ï¼› ç¬¬äº”å±‚ï¼šä¼šè¯å±‚ï¼Œç»´æŠ¤ç½‘ç»œä¸­çš„è¿æ¥çŠ¶æ€ï¼Œå³ä¿æŒä¼šè¯å’ŒåŒæ­¥ï¼› ç¬¬å…­å±‚ï¼šè¡¨ç¤ºå±‚ï¼ŒæŠŠæ•°æ®è½¬æ¢ä¸ºåˆé€‚ã€å¯ç†è§£çš„è¯­æ³•å’Œè¯­ä¹‰ï¼› ç¬¬ä¸ƒå±‚ï¼šåº”ç”¨å±‚ï¼Œé¢å‘å…·ä½“çš„åº”ç”¨ä¼ è¾“æ•°æ®ã€‚ å¯¹æ¯”ä¸€ä¸‹å°±å¯ä»¥å‘ç°ï¼ŒTCP/IP æ˜¯ä¸€ä¸ªçº¯è½¯ä»¶çš„æ ˆï¼Œæ²¡æœ‰ç½‘ç»œåº”æœ‰çš„æœ€æ ¹åŸºçš„ç”µç¼†ã€ç½‘å¡ç­‰ç‰©ç†è®¾å¤‡çš„ä½ç½®ã€‚è€Œ OSI åˆ™è¡¥è¶³äº†è¿™ä¸ªç¼ºå¤±ï¼Œ åœ¨ç†è®ºå±‚é¢ä¸Šæè¿°ç½‘ç»œæ›´åŠ å®Œæ•´ã€‚ OSI è¿˜ä¸ºæ¯ä¸€å±‚æ ‡è®°äº†æ˜ç¡®äº†ç¼–å·ï¼Œæœ€åº•å±‚æ˜¯ä¸€å±‚ï¼Œæœ€ä¸Šå±‚æ˜¯ä¸ƒå±‚ï¼Œè€Œ TCP/IP çš„å±‚æ¬¡ä»æ¥åªæœ‰åå­—è€Œæ²¡æœ‰ç¼–å·ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:4:2","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#osi-ç½‘ç»œåˆ†å±‚æ¨¡å‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„å¯¹åº”å…³ç³» ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„å¯¹åº”å…³ç³» æ‰€è°“çš„â€œå››å±‚è´Ÿè½½å‡è¡¡â€å°±æ˜¯æŒ‡å·¥ä½œåœ¨ä¼ è¾“å±‚ä¸Šï¼ŒåŸºäº TCP/IP åè®®çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ IP åœ°å€ã€ç«¯å£å·ç­‰å®ç°å¯¹åç«¯æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ã€‚ æ‰€è°“çš„â€œä¸ƒå±‚è´Ÿè½½å‡è¡¡â€å°±æ˜¯æŒ‡å·¥ä½œåœ¨åº”ç”¨å±‚ä¸Šï¼Œçœ‹åˆ°çš„æ˜¯ HTTP åè®®ï¼Œè§£æ HTTP æŠ¥æ–‡é‡Œçš„ URIã€ä¸»æœºåã€èµ„æºç±»å‹ç­‰æ•°æ®ï¼Œå†ç”¨é€‚å½“çš„ç­–ç•¥è½¬å‘ç»™åç«¯æœåŠ¡å™¨ã€‚ æœ‰ä¸€ä¸ªè¾¨åˆ«å››å±‚å’Œä¸ƒå±‚æ¯”è¾ƒå¥½çš„ï¼ˆä½†ä¸æ˜¯ç»å¯¹çš„ï¼‰å°çªé—¨ï¼Œâ€œä¸¤ä¸ªå‡¡æ˜¯â€ï¼šå‡¡æ˜¯ç”±æ“ä½œç³»ç»Ÿè´Ÿè´£å¤„ç†çš„å°±æ˜¯å››å±‚æˆ–å››å±‚ä»¥ä¸‹ï¼Œå¦åˆ™ï¼Œå‡¡æ˜¯éœ€è¦ç”±åº”ç”¨ç¨‹åºï¼ˆä¹Ÿå°±æ˜¯ä½ è‡ªå·±å†™ä»£ç ï¼‰è´Ÿè´£å¤„ç†çš„å°±æ˜¯ä¸ƒå±‚ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:4:3","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#ä¸¤ä¸ªåˆ†å±‚æ¨¡å‹çš„å¯¹åº”å…³ç³»"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" httpåè®®æ ¸å¿ƒç”±äº HTTP æ˜¯åœ¨ TCP/IP åè®®ä¹‹ä¸Šçš„ï¼Œè€Œ TCP/IP åè®®è´Ÿè´£åº•å±‚çš„å…·ä½“ä¼ è¾“å·¥ä½œï¼Œæ‰€ä»¥ http åœ¨ä¼ è¾“æ–¹é¢ä¸ç”¨å¤ªæ“å¿ƒï¼ŒTCP/IP ä¼šå»è§£å†³ï¼Œæ‰€ä»¥ HTTP å…³å¿ƒçš„å°±åªæœ‰ä»–æ‰€ä¼ è¾“çš„æŠ¥æ–‡å†…å®¹ï¼Œåˆå› ä¸º HTTP æ˜¯â€œçº¯æ–‡æœ¬â€çš„ï¼ŒåŒ…æ‹¬å¤´ä¿¡æ¯éƒ½æ˜¯ ASCII ç çš„æ–‡æœ¬ï¼Œä¸ç”¨å€ŸåŠ©ç¨‹åºè§£æå¯ä»¥ç›´æ¥é˜…è¯»ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:5:0","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#httpåè®®æ ¸å¿ƒ"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¸¸ç”¨å¤´å­—æ®µ æ³¨æ„äº‹é¡¹ å­—æ®µåä¸åŒºåˆ†å¤§å°å†™ï¼Œä¾‹å¦‚â€œHostâ€ä¹Ÿå¯ä»¥å†™æˆâ€œhostâ€ï¼Œä½†é¦–å­—æ¯å¤§å†™çš„å¯è¯»æ€§æ›´å¥½ï¼› å­—æ®µåé‡Œä¸å…è®¸å‡ºç°ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨è¿å­—ç¬¦â€œ-â€ï¼Œä½†ä¸èƒ½ä½¿ç”¨ä¸‹åˆ’çº¿â€œ_â€ã€‚ä¾‹å¦‚ï¼Œâ€œtest-nameâ€æ˜¯åˆæ³•çš„å­—æ®µåï¼Œè€Œâ€œtest nameâ€â€œtest_nameâ€æ˜¯ä¸æ­£ç¡®çš„å­—æ®µåï¼› å­—æ®µååé¢å¿…é¡»ç´§æ¥ç€â€œ:â€ï¼Œä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè€Œâ€œ:â€åçš„å­—æ®µå€¼å‰å¯ä»¥æœ‰å¤šä¸ªç©ºæ ¼ï¼› åˆ†ç±» é€šç”¨å­—æ®µï¼šåœ¨è¯·æ±‚å¤´å’Œå“åº”å¤´é‡Œéƒ½å¯ä»¥å‡ºç°ï¼› è¯·æ±‚å­—æ®µï¼šä»…èƒ½å‡ºç°åœ¨è¯·æ±‚å¤´é‡Œï¼Œè¿›ä¸€æ­¥è¯´æ˜è¯·æ±‚ä¿¡æ¯æˆ–è€…é¢å¤–çš„é™„åŠ æ¡ä»¶ï¼› å“åº”å­—æ®µï¼šä»…èƒ½å‡ºç°åœ¨å“åº”å¤´é‡Œï¼Œè¡¥å……è¯´æ˜å“åº”æŠ¥æ–‡çš„ä¿¡æ¯ï¼› å®ä½“å­—æ®µï¼šå®ƒå®é™…ä¸Šå±äºé€šç”¨å­—æ®µï¼Œä½†ä¸“é—¨æè¿° body çš„é¢å¤–ä¿¡æ¯ã€‚ å­—æ®µ ç±»å‹ è¯´æ˜ Host è¯·æ±‚å­—æ®µ å”¯ä¸€ä¸€ä¸ª HTTP/1.1 è§„èŒƒé‡Œè¦æ±‚å¿…é¡»å‡ºç°çš„å­—æ®µï¼Œå¦‚æœè¯·æ±‚å¤´é‡Œæ²¡æœ‰ Hostï¼Œé‚£è¿™å°±æ˜¯ä¸€ä¸ªé”™è¯¯çš„æŠ¥æ–‡ã€‚Host å­—æ®µå‘Šè¯‰æœåŠ¡å™¨è¿™ä¸ªè¯·æ±‚åº”è¯¥ç”±å“ªä¸ªä¸»æœºæ¥å¤„ç† User-Agent è¯·æ±‚å­—æ®µ æè¿°å‘èµ· HTTP è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¾æ®å®ƒæ¥è¿”å›æœ€åˆé€‚æ­¤æµè§ˆå™¨æ˜¾ç¤ºçš„é¡µé¢ Date é€šç”¨å­—æ®µ è¡¨ç¤º HTTP æŠ¥æ–‡åˆ›å»ºçš„æ—¶é—´ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ—¶é—´å†æ­é…å…¶ä»–å­—æ®µå†³å®šç¼“å­˜ç­–ç•¥ Server å“åº”å­—æ®µ å‘Šè¯‰å®¢æˆ·ç«¯å½“å‰æ­£åœ¨æä¾› Web æœåŠ¡çš„è½¯ä»¶åç§°å’Œç‰ˆæœ¬å· Content-Length å®ä½“å­—æ®µ æŠ¥æ–‡é‡Œ body çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚å¤´æˆ–å“åº”å¤´ç©ºè¡Œåé¢æ•°æ®çš„é•¿åº¦ã€‚æœåŠ¡å™¨çœ‹åˆ°è¿™ä¸ªå­—æ®µï¼Œå°±çŸ¥é“äº†åç»­æœ‰å¤šå°‘æ•°æ®ï¼Œå¯ä»¥ç›´æ¥æ¥æ”¶ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆ body å°±æ˜¯ä¸å®šé•¿çš„ï¼Œéœ€è¦ä½¿ç”¨ chunked æ–¹å¼åˆ†æ®µä¼ è¾“ ","date":"2022-03-17","objectID":"/http-glance/:5:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#å¸¸ç”¨å¤´å­—æ®µ"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¸¸ç”¨å¤´å­—æ®µ æ³¨æ„äº‹é¡¹ å­—æ®µåä¸åŒºåˆ†å¤§å°å†™ï¼Œä¾‹å¦‚â€œHostâ€ä¹Ÿå¯ä»¥å†™æˆâ€œhostâ€ï¼Œä½†é¦–å­—æ¯å¤§å†™çš„å¯è¯»æ€§æ›´å¥½ï¼› å­—æ®µåé‡Œä¸å…è®¸å‡ºç°ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨è¿å­—ç¬¦â€œ-â€ï¼Œä½†ä¸èƒ½ä½¿ç”¨ä¸‹åˆ’çº¿â€œ_â€ã€‚ä¾‹å¦‚ï¼Œâ€œtest-nameâ€æ˜¯åˆæ³•çš„å­—æ®µåï¼Œè€Œâ€œtest nameâ€â€œtest_nameâ€æ˜¯ä¸æ­£ç¡®çš„å­—æ®µåï¼› å­—æ®µååé¢å¿…é¡»ç´§æ¥ç€â€œ:â€ï¼Œä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè€Œâ€œ:â€åçš„å­—æ®µå€¼å‰å¯ä»¥æœ‰å¤šä¸ªç©ºæ ¼ï¼› åˆ†ç±» é€šç”¨å­—æ®µï¼šåœ¨è¯·æ±‚å¤´å’Œå“åº”å¤´é‡Œéƒ½å¯ä»¥å‡ºç°ï¼› è¯·æ±‚å­—æ®µï¼šä»…èƒ½å‡ºç°åœ¨è¯·æ±‚å¤´é‡Œï¼Œè¿›ä¸€æ­¥è¯´æ˜è¯·æ±‚ä¿¡æ¯æˆ–è€…é¢å¤–çš„é™„åŠ æ¡ä»¶ï¼› å“åº”å­—æ®µï¼šä»…èƒ½å‡ºç°åœ¨å“åº”å¤´é‡Œï¼Œè¡¥å……è¯´æ˜å“åº”æŠ¥æ–‡çš„ä¿¡æ¯ï¼› å®ä½“å­—æ®µï¼šå®ƒå®é™…ä¸Šå±äºé€šç”¨å­—æ®µï¼Œä½†ä¸“é—¨æè¿° body çš„é¢å¤–ä¿¡æ¯ã€‚ å­—æ®µ ç±»å‹ è¯´æ˜ Host è¯·æ±‚å­—æ®µ å”¯ä¸€ä¸€ä¸ª HTTP/1.1 è§„èŒƒé‡Œè¦æ±‚å¿…é¡»å‡ºç°çš„å­—æ®µï¼Œå¦‚æœè¯·æ±‚å¤´é‡Œæ²¡æœ‰ Hostï¼Œé‚£è¿™å°±æ˜¯ä¸€ä¸ªé”™è¯¯çš„æŠ¥æ–‡ã€‚Host å­—æ®µå‘Šè¯‰æœåŠ¡å™¨è¿™ä¸ªè¯·æ±‚åº”è¯¥ç”±å“ªä¸ªä¸»æœºæ¥å¤„ç† User-Agent è¯·æ±‚å­—æ®µ æè¿°å‘èµ· HTTP è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¾æ®å®ƒæ¥è¿”å›æœ€åˆé€‚æ­¤æµè§ˆå™¨æ˜¾ç¤ºçš„é¡µé¢ Date é€šç”¨å­—æ®µ è¡¨ç¤º HTTP æŠ¥æ–‡åˆ›å»ºçš„æ—¶é—´ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ—¶é—´å†æ­é…å…¶ä»–å­—æ®µå†³å®šç¼“å­˜ç­–ç•¥ Server å“åº”å­—æ®µ å‘Šè¯‰å®¢æˆ·ç«¯å½“å‰æ­£åœ¨æä¾› Web æœåŠ¡çš„è½¯ä»¶åç§°å’Œç‰ˆæœ¬å· Content-Length å®ä½“å­—æ®µ æŠ¥æ–‡é‡Œ body çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚å¤´æˆ–å“åº”å¤´ç©ºè¡Œåé¢æ•°æ®çš„é•¿åº¦ã€‚æœåŠ¡å™¨çœ‹åˆ°è¿™ä¸ªå­—æ®µï¼Œå°±çŸ¥é“äº†åç»­æœ‰å¤šå°‘æ•°æ®ï¼Œå¯ä»¥ç›´æ¥æ¥æ”¶ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆ body å°±æ˜¯ä¸å®šé•¿çš„ï¼Œéœ€è¦ä½¿ç”¨ chunked æ–¹å¼åˆ†æ®µä¼ è¾“ ","date":"2022-03-17","objectID":"/http-glance/:5:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#æ³¨æ„äº‹é¡¹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¸¸ç”¨å¤´å­—æ®µ æ³¨æ„äº‹é¡¹ å­—æ®µåä¸åŒºåˆ†å¤§å°å†™ï¼Œä¾‹å¦‚â€œHostâ€ä¹Ÿå¯ä»¥å†™æˆâ€œhostâ€ï¼Œä½†é¦–å­—æ¯å¤§å†™çš„å¯è¯»æ€§æ›´å¥½ï¼› å­—æ®µåé‡Œä¸å…è®¸å‡ºç°ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨è¿å­—ç¬¦â€œ-â€ï¼Œä½†ä¸èƒ½ä½¿ç”¨ä¸‹åˆ’çº¿â€œ_â€ã€‚ä¾‹å¦‚ï¼Œâ€œtest-nameâ€æ˜¯åˆæ³•çš„å­—æ®µåï¼Œè€Œâ€œtest nameâ€â€œtest_nameâ€æ˜¯ä¸æ­£ç¡®çš„å­—æ®µåï¼› å­—æ®µååé¢å¿…é¡»ç´§æ¥ç€â€œ:â€ï¼Œä¸èƒ½æœ‰ç©ºæ ¼ï¼Œè€Œâ€œ:â€åçš„å­—æ®µå€¼å‰å¯ä»¥æœ‰å¤šä¸ªç©ºæ ¼ï¼› åˆ†ç±» é€šç”¨å­—æ®µï¼šåœ¨è¯·æ±‚å¤´å’Œå“åº”å¤´é‡Œéƒ½å¯ä»¥å‡ºç°ï¼› è¯·æ±‚å­—æ®µï¼šä»…èƒ½å‡ºç°åœ¨è¯·æ±‚å¤´é‡Œï¼Œè¿›ä¸€æ­¥è¯´æ˜è¯·æ±‚ä¿¡æ¯æˆ–è€…é¢å¤–çš„é™„åŠ æ¡ä»¶ï¼› å“åº”å­—æ®µï¼šä»…èƒ½å‡ºç°åœ¨å“åº”å¤´é‡Œï¼Œè¡¥å……è¯´æ˜å“åº”æŠ¥æ–‡çš„ä¿¡æ¯ï¼› å®ä½“å­—æ®µï¼šå®ƒå®é™…ä¸Šå±äºé€šç”¨å­—æ®µï¼Œä½†ä¸“é—¨æè¿° body çš„é¢å¤–ä¿¡æ¯ã€‚ å­—æ®µ ç±»å‹ è¯´æ˜ Host è¯·æ±‚å­—æ®µ å”¯ä¸€ä¸€ä¸ª HTTP/1.1 è§„èŒƒé‡Œè¦æ±‚å¿…é¡»å‡ºç°çš„å­—æ®µï¼Œå¦‚æœè¯·æ±‚å¤´é‡Œæ²¡æœ‰ Hostï¼Œé‚£è¿™å°±æ˜¯ä¸€ä¸ªé”™è¯¯çš„æŠ¥æ–‡ã€‚Host å­—æ®µå‘Šè¯‰æœåŠ¡å™¨è¿™ä¸ªè¯·æ±‚åº”è¯¥ç”±å“ªä¸ªä¸»æœºæ¥å¤„ç† User-Agent è¯·æ±‚å­—æ®µ æè¿°å‘èµ· HTTP è¯·æ±‚çš„å®¢æˆ·ç«¯ï¼ŒæœåŠ¡å™¨å¯ä»¥ä¾æ®å®ƒæ¥è¿”å›æœ€åˆé€‚æ­¤æµè§ˆå™¨æ˜¾ç¤ºçš„é¡µé¢ Date é€šç”¨å­—æ®µ è¡¨ç¤º HTTP æŠ¥æ–‡åˆ›å»ºçš„æ—¶é—´ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ—¶é—´å†æ­é…å…¶ä»–å­—æ®µå†³å®šç¼“å­˜ç­–ç•¥ Server å“åº”å­—æ®µ å‘Šè¯‰å®¢æˆ·ç«¯å½“å‰æ­£åœ¨æä¾› Web æœåŠ¡çš„è½¯ä»¶åç§°å’Œç‰ˆæœ¬å· Content-Length å®ä½“å­—æ®µ æŠ¥æ–‡é‡Œ body çš„é•¿åº¦ï¼Œä¹Ÿå°±æ˜¯è¯·æ±‚å¤´æˆ–å“åº”å¤´ç©ºè¡Œåé¢æ•°æ®çš„é•¿åº¦ã€‚æœåŠ¡å™¨çœ‹åˆ°è¿™ä¸ªå­—æ®µï¼Œå°±çŸ¥é“äº†åç»­æœ‰å¤šå°‘æ•°æ®ï¼Œå¯ä»¥ç›´æ¥æ¥æ”¶ã€‚å¦‚æœæ²¡æœ‰è¿™ä¸ªå­—æ®µï¼Œé‚£ä¹ˆ body å°±æ˜¯ä¸å®šé•¿çš„ï¼Œéœ€è¦ä½¿ç”¨ chunked æ–¹å¼åˆ†æ®µä¼ è¾“ ","date":"2022-03-17","objectID":"/http-glance/:5:1","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#åˆ†ç±»"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" è¯·æ±‚æ–¹å¼ æ–¹å¼ è¯´æ˜ GET è·å–èµ„æºï¼Œå¯ä»¥ç†è§£ä¸ºè¯»å–æˆ–è€…ä¸‹è½½æ•°æ® HEAD è·å–èµ„æºçš„å…ƒä¿¡æ¯ï¼Œä¸ä¼šè¿”å›è¯·æ±‚çš„å®ä½“æ•°æ®ï¼Œåªä¼šä¼ å›å“åº”å¤´ POST å‘èµ„æºæäº¤æ•°æ®ï¼Œç›¸å½“äºå†™å…¥æˆ–ä¸Šä¼ æ•°æ® PUT ç±»ä¼¼ POST DELETE åˆ é™¤èµ„æº CONNECT å»ºç«‹ç‰¹æ®Šçš„è¿æ¥éš§é“ OPTIONS åˆ—å‡ºå¯å¯¹èµ„æºå®è¡Œçš„æ–¹æ³• TRACE è¿½è¸ªè¯·æ±‚ - å“åº”çš„ä¼ è¾“è·¯å¾„ ","date":"2022-03-17","objectID":"/http-glance/:5:2","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#è¯·æ±‚æ–¹å¼"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" çŠ¶æ€ç  çŠ¶æ€ç  å«ä¹‰ 1Ã—x æç¤ºä¿¡æ¯ï¼Œè¡¨ç¤ºç›®å‰æ˜¯åè®®å¤„ç†çš„ä¸­é—´çŠ¶æ€ï¼Œè¿˜éœ€è¦åç»­çš„æ“ä½œ 2Ã—Ã— æˆåŠŸï¼ŒæŠ¥æ–‡å·²ç»æ”¶åˆ°å¹¶è¢«æ­£ç¡®å¤„ç† 3Ã—Ã— é‡å®šå‘ï¼Œèµ„æºä½ç½®å‘ç”Ÿå˜åŠ¨ï¼Œéœ€è¦å®¢æˆ·ç«¯é‡æ–°å‘é€è¯·æ±‚ 4Ã—Ã— å®¢æˆ·ç«¯é”™è¯¯ï¼Œè¯·æ±‚æŠ¥æ–‡æœ‰è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•å¤„ç† 5Ã—Ã— æœåŠ¡å™¨é”™è¯¯ï¼ŒæœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚æ—¶å†…éƒ¨å‘ç”Ÿäº†é”™è¯¯ ä¸€äº›å¸¸ç”¨çŠ¶æ€ç è¯´æ˜ status code è¯´æ˜ 301 æ°¸ä¹…é‡å®šå‘ï¼Œå«ä¹‰æ˜¯æ­¤æ¬¡è¯·æ±‚çš„èµ„æºå·²ç»ä¸å­˜åœ¨äº†ï¼Œéœ€è¦æ”¹ç”¨æ”¹ç”¨æ–°çš„ URI å†æ¬¡è®¿é—® 302 ä¸´æ—¶é‡å®šå‘ï¼Œæ„æ€æ˜¯è¯·æ±‚çš„èµ„æºè¿˜åœ¨ï¼Œä½†éœ€è¦æš‚æ—¶ç”¨å¦ä¸€ä¸ª URI æ¥è®¿é—®ã€‚æ¯”å¦‚ï¼Œä½ çš„ç½‘ç«™å‡çº§åˆ°äº† HTTPSï¼ŒåŸæ¥çš„ HTTP ä¸æ‰“ç®—ç”¨äº†ï¼Œè¿™å°±æ˜¯â€œæ°¸ä¹…â€çš„ï¼Œæ‰€ä»¥è¦é…ç½® 301 è·³è½¬ï¼ŒæŠŠæ‰€æœ‰çš„ HTTP æµé‡éƒ½åˆ‡æ¢åˆ° HTTPSã€‚ å†æ¯”å¦‚ï¼Œä»Šå¤©å¤œé‡Œç½‘ç«™åå°è¦ç³»ç»Ÿç»´æŠ¤ï¼ŒæœåŠ¡æš‚æ—¶ä¸å¯ç”¨ï¼Œè¿™å°±å±äºâ€œä¸´æ—¶â€çš„ï¼Œå¯ä»¥é…ç½®æˆ 302 è·³è½¬ï¼ŒæŠŠæµé‡ä¸´æ—¶åˆ‡æ¢åˆ°ä¸€ä¸ªé™æ€é€šçŸ¥é¡µé¢ï¼Œæµè§ˆå™¨çœ‹åˆ°è¿™ä¸ª 302 å°±çŸ¥é“è¿™åªæ˜¯æš‚æ—¶çš„æƒ…å†µï¼Œä¸ä¼šåšç¼“å­˜ä¼˜åŒ–ï¼Œç¬¬äºŒå¤©è¿˜ä¼šè®¿é—®åŸæ¥çš„åœ°å€ã€‚ 304 Not Modifiedï¼Œå®ƒç”¨äº If-Modified-Since ç­‰æ¡ä»¶è¯·æ±‚ï¼Œè¡¨ç¤ºèµ„æºæœªä¿®æ”¹ï¼Œç”¨äºç¼“å­˜æ§åˆ¶ã€‚å®ƒä¸å…·æœ‰é€šå¸¸çš„è·³è½¬å«ä¹‰ï¼Œä½†å¯ä»¥ç†è§£æˆâ€œé‡å®šå‘å·²åˆ°ç¼“å­˜çš„æ–‡ä»¶â€ï¼ˆå³â€œç¼“å­˜é‡å®šå‘â€ï¼‰ 405 ä¸å…è®¸ä½¿ç”¨æŸäº›æ–¹æ³•æ“ä½œèµ„æºï¼Œä¾‹å¦‚ä¸å…è®¸ POST åªèƒ½ GET 406 Not Acceptable èµ„æºæ— æ³•æ»¡è¶³å®¢æˆ·ç«¯è¯·æ±‚çš„æ¡ä»¶ï¼Œä¾‹å¦‚è¯·æ±‚ä¸­æ–‡ä½†åªæœ‰è‹±æ–‡ 408 Request Timeoutï¼šè¯·æ±‚è¶…æ—¶ï¼ŒæœåŠ¡å™¨ç­‰å¾…äº†è¿‡é•¿çš„æ—¶é—´ 409 Conflictï¼šå¤šä¸ªè¯·æ±‚å‘ç”Ÿäº†å†²çªï¼Œå¯ä»¥ç†è§£ä¸ºå¤šçº¿ç¨‹å¹¶å‘æ—¶çš„ç«æ€ 413 Request Entity Too Largeï¼šè¯·æ±‚æŠ¥æ–‡é‡Œçš„ body å¤ªå¤§ 414 Request-URI Too Longï¼šè¯·æ±‚è¡Œé‡Œçš„ URI å¤ªå¤§ 429 Too Many Requests å®¢æˆ·ç«¯å‘é€äº†å¤ªå¤šçš„è¯·æ±‚ï¼Œé€šå¸¸æ˜¯ç”±äºæœåŠ¡å™¨çš„é™è¿ç­–ç•¥ 431 Request Header Fields Too Large è¯·æ±‚å¤´æŸä¸ªå­—æ®µæˆ–æ€»ä½“å¤ªå¤§ 500 Internal Server Error ä¸ 400 ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé€šç”¨çš„é”™è¯¯ç ï¼ŒæœåŠ¡å™¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆé”™è¯¯æˆ‘ä»¬æ˜¯ä¸çŸ¥é“çš„ã€‚ä¸è¿‡å¯¹äºæœåŠ¡å™¨æ¥è¯´è¿™åº”è¯¥ç®—æ˜¯å¥½äº‹ï¼Œé€šå¸¸ä¸åº”è¯¥æŠŠæœåŠ¡å™¨å†…éƒ¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚å‡ºé”™çš„å‡½æ•°è°ƒç”¨æ ˆå‘Šè¯‰å¤–ç•Œã€‚è™½ç„¶ä¸åˆ©äºè°ƒè¯•ï¼Œä½†èƒ½å¤Ÿé˜²æ­¢é»‘å®¢çš„çª¥æ¢æˆ–è€…åˆ†æ 501 Not Implemented è¡¨ç¤ºå®¢æˆ·ç«¯è¯·æ±‚çš„åŠŸèƒ½è¿˜ä¸æ”¯æŒï¼Œè¿™ä¸ªé”™è¯¯ç æ¯” 500 è¦æ¸©å’Œä¸€äº›ï¼Œå’Œâ€œå³å°†å¼€ä¸šï¼Œæ•¬è¯·æœŸå¾…â€çš„æ„æ€å·®ä¸å¤šï¼Œä¸è¿‡å…·ä½“ä»€ä¹ˆæ—¶å€™â€œå¼€ä¸šâ€å°±ä¸å¥½è¯´äº† 502 Bad Gatewayâ€é€šå¸¸æ˜¯æœåŠ¡å™¨ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†æ—¶è¿”å›çš„é”™è¯¯ç ï¼Œè¡¨ç¤ºæœåŠ¡å™¨è‡ªèº«å·¥ä½œæ­£å¸¸ï¼Œè®¿é—®åç«¯æœåŠ¡å™¨æ—¶å‘ç”Ÿäº†é”™è¯¯ï¼Œä½†å…·ä½“çš„é”™è¯¯åŸå› ä¹Ÿæ˜¯ä¸çŸ¥é“çš„ 503 Service Unavailable è¡¨ç¤ºæœåŠ¡å™¨å½“å‰å¾ˆå¿™ï¼Œæš‚æ—¶æ— æ³•å“åº”æœåŠ¡ï¼Œæˆ‘ä»¬ä¸Šç½‘æ—¶æœ‰æ—¶å€™é‡åˆ°çš„â€œç½‘ç»œæœåŠ¡æ­£å¿™ï¼Œè¯·ç¨åé‡è¯•â€çš„æç¤ºä¿¡æ¯å°±æ˜¯çŠ¶æ€ç  503 ","date":"2022-03-17","objectID":"/http-glance/:5:3","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#çŠ¶æ€ç "},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" http ç‰¹ç‚¹ HTTP æ˜¯çµæ´»å¯æ‰©å±•çš„ï¼Œå¯ä»¥ä»»æ„æ·»åŠ å¤´å­—æ®µå®ç°ä»»æ„åŠŸèƒ½ã€‚ HTTP æ˜¯å¯é ä¼ è¾“åè®®ï¼ŒåŸºäº TCP/IP åè®®â€œå°½é‡â€ä¿è¯æ•°æ®çš„é€è¾¾ã€‚ HTTP æ˜¯åº”ç”¨å±‚åè®®ï¼Œæ¯” FTPã€SSH ç­‰æ›´é€šç”¨åŠŸèƒ½æ›´å¤šï¼Œèƒ½å¤Ÿä¼ è¾“ä»»æ„æ•°æ®ã€‚ HTTP ä½¿ç”¨äº†è¯·æ±‚ - åº”ç­”æ¨¡å¼ï¼Œå®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨è¢«åŠ¨å›å¤è¯·æ±‚ã€‚ HTTP æœ¬è´¨ä¸Šæ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½æ˜¯äº’ç›¸ç‹¬ç«‹ã€æ¯«æ— å…³è”çš„ï¼Œåè®®ä¸è¦æ±‚å®¢æˆ·ç«¯æˆ–æœåŠ¡å™¨è®°å½•è¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ã€‚ ","date":"2022-03-17","objectID":"/http-glance/:5:4","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#http-ç‰¹ç‚¹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å‚è€ƒ ä»€ä¹ˆæ˜¯åå‘ä»£ç†ï¼Œåå‘ä»£ç†æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†å’Œåå‘ä»£ç† å¦‚ä½•ç†è§£åå‘ä»£ç†æœåŠ¡å™¨ ","date":"2022-03-17","objectID":"/http-glance/:6:0","series":["reproduce"],"tags":["http/https","tcp","åå‘ä»£ç†","æ­£å‘ä»£ç†"],"title":"httpå…¥é—¨ç¬”è®°","uri":"/http-glance/#å‚è€ƒ"},{"categories":["golang"],"content":"golang GMP æ¨¡å‹,go æ•°å­¦æ¨¡å‹,GMP,è¿›ç¨‹,çº¿ç¨‹,åç¨‹,goroutine,go è°ƒåº¦å™¨,golangè°ƒåº¦å™¨,goåç¨‹è°ƒåº¦æ¨¡å‹","date":"2022-03-16","objectID":"/gmp-model/","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/"},{"categories":["golang"],"content":" è¿›ç¨‹ã€çº¿ç¨‹ã€åç¨‹çš„åŒºåˆ«è¿›ç¨‹ï¼šè¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿä¸ºåº”ç”¨ç¨‹åºåˆ†é…èµ„æºçš„æœ€å°å•å…ƒã€‚æ¯ä¸ªè¿›ç¨‹æœ‰ç‹¬ç«‹çš„å†…å­˜ç©ºé—´å’ŒçŠ¶æ€ã€‚ çº¿ç¨‹ï¼šçº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„ä¸€ä¸ªç‹¬ç«‹æ‰§è¡Œå•å…ƒã€‚åœ¨ Go ä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼Œä»¥å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚ åç¨‹ï¼šåç¨‹æ˜¯ Go è¯­è¨€ä¸­çš„ä¸€ç§è½»é‡çº§çš„å¹¶å‘æŠ€æœ¯ã€‚å®ƒæ˜¯ç”¨æˆ·æ€çš„ï¼Œä¸éœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒï¼Œå¯ä»¥åœ¨å•ä¸ªçº¿ç¨‹ä¸­å¯åŠ¨å¤šä¸ªåç¨‹ï¼Œå¹¶è¡Œæ‰§è¡Œä»»åŠ¡ã€‚åç¨‹å…±äº«åŒä¸€ä¸ªçº¿ç¨‹çš„èµ„æºï¼Œä½†æ‹¥æœ‰è‡ªå·±çš„æ ˆå’Œå¯„å­˜å™¨ã€‚ æ€»çš„æ¥è¯´ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿçº§åˆ«çš„å¹¶å‘æŠ€æœ¯ï¼Œç”¨äºåœ¨å¤šæ ¸å¤„ç†å™¨ä¸Šåˆ©ç”¨èµ„æºï¼›è€Œåç¨‹æ˜¯ Go è¯­è¨€æä¾›çš„ä¸€ç§é«˜æ•ˆã€è½»é‡çº§çš„å¹¶å‘æŠ€æœ¯ï¼Œç”¨äºå®ç°ç¨‹åºå†…éƒ¨çš„å¹¶å‘ä»»åŠ¡ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:1:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#è¿›ç¨‹çº¿ç¨‹åç¨‹çš„åŒºåˆ«"},{"categories":["golang"],"content":" è¿›ç¨‹è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿå¯¹ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„ä¸€ç§æŠ½è±¡ï¼Œè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„åœ°å€ç©ºé—´ã€‚ è¿›ç¨‹åœ¨æ“ä½œç³»ç»Ÿä¸­çš„æŠ½è±¡è¡¨ç° é€šä¿—çš„è¯´ï¼Œè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºã€‚ Windowsä»»åŠ¡ç®¡ç†å™¨ è¿›ç¨‹å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†åˆç†å‹æ¦¨ CPU çš„æ€§èƒ½å’Œåˆ†é…è¿è¡Œçš„æ—¶é—´ç‰‡ï¼Œè®© CPU ä¸èƒ½ â€œé—²ç€â€œã€‚ åœ¨è®¡ç®—æœºä¸­ï¼Œå…¶è®¡ç®—æ ¸å¿ƒæ˜¯ CPUï¼Œè´Ÿè´£æ‰€æœ‰è®¡ç®—ç›¸å…³çš„å·¥ä½œå’Œèµ„æºã€‚å•ä¸ª CPU ä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹è·‘ç€ï¼Œå°±æŠŠå”¯ä¸€ä¸€ä¸ª CPU ç»™å®Œå…¨å ä½ï¼Œé‚£æ˜¯éå¸¸ä¸åˆç†çš„ã€‚ å¦‚æœæ€»æ˜¯åœ¨è¿è¡Œä¸€ä¸ªè¿›ç¨‹ä¸Šçš„ä»»åŠ¡ï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªç°è±¡ï¼Œå°±æ˜¯ä»»åŠ¡ä¸ä¸€å®šæ€»æ˜¯åœ¨æ‰§è¡Œ â€œè®¡ç®—å‹â€ çš„ä»»åŠ¡ï¼Œä¼šæœ‰å¾ˆå¤§å¯èƒ½æ˜¯åœ¨æ‰§è¡Œç½‘ç»œè°ƒç”¨é˜»å¡äº†ï¼Œé‚£ä¹ˆ CPU å²‚ä¸å°±æµªè´¹äº†ï¼Ÿ è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ æ‰€ä»¥å‡ºç°äº†å¤šè¿›ç¨‹ï¼Œå¤šä¸ª CPUï¼Œå¤šä¸ªè¿›ç¨‹ã€‚å¤šè¿›ç¨‹å°±æ˜¯æŒ‡è®¡ç®—æœºç³»ç»Ÿå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªè¿›ç¨‹ï¼Œä»ä¸€ä¸ªè¿›ç¨‹åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹çš„è½¬æ¢æ˜¯ç”±æ“ä½œç³»ç»Ÿå†…æ ¸ç®¡ç†çš„ï¼Œä¸€èˆ¬æ˜¯åŒæ—¶è¿è¡Œå¤šä¸ªè½¯ä»¶ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:1:1","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#è¿›ç¨‹"},{"categories":["golang"],"content":" çº¿ç¨‹æœ‰äº†å¤šè¿›ç¨‹ï¼Œåœ¨æ“ä½œç³»ç»Ÿä¸Šå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªè¿›ç¨‹ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆæœ‰äº†è¿›ç¨‹ï¼Œè¿˜è¦çº¿ç¨‹å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºï¼š è¿›ç¨‹é—´çš„ä¿¡æ¯éš¾ä»¥å…±äº«æ•°æ®ï¼Œçˆ¶å­è¿›ç¨‹å¹¶æœªå…±äº«å†…å­˜ï¼Œéœ€è¦é€šè¿‡è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ï¼Œåœ¨è¿›ç¨‹é—´è¿›è¡Œä¿¡æ¯äº¤æ¢ï¼Œæ€§èƒ½å¼€é”€è¾ƒå¤§ã€‚ åˆ›å»ºè¿›ç¨‹ï¼ˆä¸€èˆ¬æ˜¯è°ƒç”¨ fork æ–¹æ³•ï¼‰çš„æ€§èƒ½å¼€é”€è¾ƒå¤§ã€‚ æ‰€ä»¥å¤§å®¶åˆæŠŠç›®å…‰è½¬å‘äº†è¿›ç¨‹å†…ï¼Œèƒ½ä¸èƒ½åœ¨è¿›ç¨‹é‡Œåšç‚¹ä»€ä¹ˆå‘¢ï¼Ÿ è¿›ç¨‹ç”±å¤šä¸ªçº¿ç¨‹ç»„æˆ ä¸€ä¸ªè¿›ç¨‹å¯ä»¥ç”±å¤šä¸ªç§°ä¸ºçº¿ç¨‹çš„æ‰§è¡Œå•å…ƒç»„æˆã€‚æ¯ä¸ªçº¿ç¨‹éƒ½è¿è¡Œåœ¨è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå…±äº«ç€åŒæ ·çš„ä»£ç å’Œå…¨å±€æ•°æ®ã€‚ å¤šä¸ªè¿›ç¨‹ï¼Œå°±å¯ä»¥æœ‰æ›´å¤šçš„çº¿ç¨‹ã€‚å¤šçº¿ç¨‹æ¯”å¤šè¿›ç¨‹ä¹‹é—´æ›´å®¹æ˜“å…±äº«æ•°æ®ï¼Œåœ¨ä¸Šä¸‹æ–‡åˆ‡æ¢ä¸­çº¿ç¨‹ä¸€èˆ¬æ¯”è¿›ç¨‹æ›´é«˜æ•ˆã€‚è¿™æ˜¯å› ä¸ºï¼Œ çº¿ç¨‹ä¹‹é—´èƒ½å¤Ÿéå¸¸æ–¹ä¾¿ã€å¿«é€Ÿåœ°å…±äº«æ•°æ®ã€‚ åªéœ€å°†æ•°æ®å¤åˆ¶åˆ°è¿›ç¨‹ä¸­çš„å…±äº«åŒºåŸŸå°±å¯ä»¥äº†ï¼Œä½†éœ€è¦æ³¨æ„é¿å…å¤šä¸ªçº¿ç¨‹ä¿®æ”¹åŒä¸€ä»½å†…å­˜ã€‚ åˆ›å»ºçº¿ç¨‹æ¯”åˆ›å»ºè¿›ç¨‹è¦å¿« 10 å€ç”šè‡³æ›´å¤šã€‚ çº¿ç¨‹éƒ½æ˜¯åŒä¸€ä¸ªè¿›ç¨‹ä¸‹è‡ªå®¶çš„å­©å­ï¼Œåƒæ˜¯å†…å­˜é¡µã€é¡µè¡¨ç­‰å°±ä¸éœ€è¦äº†ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:1:2","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#çº¿ç¨‹"},{"categories":["golang"],"content":" åç¨‹åç¨‹ï¼ˆCo-routineï¼‰æ˜¯ç”¨æˆ·æ€çš„çº¿ç¨‹ã€‚é€šå¸¸åˆ›å»ºåç¨‹æ—¶ï¼Œä¼šä»è¿›ç¨‹çš„å †ä¸­åˆ†é…ä¸€æ®µå†…å­˜ä½œä¸ºåç¨‹çš„æ ˆã€‚ çº¿ç¨‹çš„æ ˆæœ‰ 8MBï¼Œè€Œåç¨‹æ ˆçš„å¤§å°é€šå¸¸åªæœ‰ KB çº§åˆ«ï¼Œè€Œ Go è¯­è¨€çš„åç¨‹æ›´å¤¸å¼ ï¼Œåªæœ‰ 2-4KBï¼Œéå¸¸çš„è½»å·§ã€‚ åç¨‹æœ‰ä»¥ä¸‹ä¼˜åŠ¿ğŸ‘‹ï¼š ğŸ‘‰èŠ‚çœ CPUï¼šé¿å…ç³»ç»Ÿå†…æ ¸çº§çš„çº¿ç¨‹é¢‘ç¹åˆ‡æ¢ï¼Œé€ æˆçš„ CPU èµ„æºæµªè´¹ã€‚è€Œåç¨‹æ˜¯ç”¨æˆ·æ€çš„çº¿ç¨‹ï¼Œç”¨æˆ·å¯ä»¥è‡ªè¡Œæ§åˆ¶åç¨‹çš„åˆ›å»ºäºé”€æ¯ï¼Œæå¤§ç¨‹åº¦é¿å…äº†ç³»ç»Ÿçº§çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢é€ æˆçš„èµ„æºæµªè´¹ã€‚ ğŸ‘‰èŠ‚çº¦å†…å­˜ï¼šåœ¨ 64 ä½çš„ Linux ä¸­ï¼Œä¸€ä¸ªçº¿ç¨‹éœ€è¦åˆ†é… 8MB æ ˆå†…å­˜å’Œ 64MB å †å†…å­˜ï¼Œç³»ç»Ÿå†…å­˜çš„åˆ¶çº¦å¯¼è‡´æˆ‘ä»¬æ— æ³•å¼€å¯æ›´å¤šçº¿ç¨‹å®ç°é«˜å¹¶å‘ã€‚è€Œåœ¨åç¨‹ç¼–ç¨‹æ¨¡å¼ä¸‹ï¼Œå¯ä»¥è½»æ¾æœ‰åå‡ ä¸‡åç¨‹ï¼Œè¿™æ˜¯çº¿ç¨‹æ— æ³•æ¯”æ‹Ÿçš„ã€‚ ğŸ‘‰ç¨³å®šæ€§ï¼šçº¿ç¨‹ä¹‹é—´é€šè¿‡å†…å­˜æ¥å…±äº«æ•°æ®ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ä¸€ä¸ªé—®é¢˜ï¼Œä»»ä½•ä¸€ä¸ªçº¿ç¨‹å‡ºé”™æ—¶ï¼Œè¿›ç¨‹ä¸­çš„æ‰€æœ‰çº¿ç¨‹éƒ½ä¼šè·Ÿç€ä¸€èµ·å´©æºƒã€‚ ğŸ‘‰å¼€å‘æ•ˆç‡ï¼šä½¿ç”¨åç¨‹åœ¨å¼€å‘ç¨‹åºä¹‹ä¸­ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ä¸€äº›è€—æ—¶çš„ IO æ“ä½œå¼‚æ­¥åŒ–ï¼Œä¾‹å¦‚å†™æ–‡ä»¶ã€è€—æ—¶ IO è¯·æ±‚ç­‰ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:1:3","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#åç¨‹"},{"categories":["golang"],"content":" goroutine æ˜¯ä»€ä¹ˆGoroutine æ˜¯ä¸€ä¸ªç”± Go è¿è¡Œæ—¶ç®¡ç†çš„è½»é‡çº§çº¿ç¨‹ï¼Œæˆ‘ä»¬ç§°ä¸º â€œåç¨‹â€ã€‚ go f(x, y, z) æ“ä½œç³»ç»Ÿæœ¬èº«æ˜¯æ— æ³•æ˜ç¡®æ„ŸçŸ¥åˆ° Goroutine çš„å­˜åœ¨çš„ï¼ŒGoroutine çš„æ“ä½œå’Œåˆ‡æ¢å½’å±äº â€œç”¨æˆ·æ€â€ ä¸­ã€‚ Goroutine ç”±ç‰¹å®šçš„è°ƒåº¦æ¨¡å¼æ¥æ§åˆ¶ï¼Œä»¥ â€œå¤šè·¯å¤ç”¨â€ çš„å½¢å¼è¿è¡Œåœ¨æ“ä½œç³»ç»Ÿä¸º Go ç¨‹åºåˆ†é…çš„å‡ ä¸ªç³»ç»Ÿçº¿ç¨‹ä¸Šã€‚ åŒæ—¶åˆ›å»º Goroutine çš„å¼€é”€å¾ˆå°ï¼Œåˆå§‹åªéœ€è¦ 2-4k çš„æ ˆç©ºé—´ã€‚Goroutine æœ¬èº«ä¼šæ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µè¿›è¡Œè‡ªä¼¸ç¼©ï¼Œéå¸¸è½»é‡ã€‚ Tips Go ç¨‹åºä¸­æ²¡æœ‰è¯­è¨€çº§çš„å…³é”®å­—è®©ä½ å»åˆ›å»ºä¸€ä¸ªå†…æ ¸çº¿ç¨‹ï¼Œä½ åªèƒ½åˆ›å»º goroutineï¼Œå†…æ ¸çº¿ç¨‹åªèƒ½ç”± runtime æ ¹æ®å®é™…æƒ…å†µå»åˆ›å»ºã€‚ Go è¿è¡Œæ—¶ç³»ç»Ÿå¹¶æ²¡æœ‰å†…æ ¸è°ƒåº¦å™¨çš„ä¸­æ–­èƒ½åŠ›ï¼Œå†…æ ¸è°ƒåº¦å™¨ä¼šå‘èµ·æŠ¢å å¼è°ƒåº¦å°†é•¿æœŸè¿è¡Œçš„çº¿ç¨‹ä¸­æ–­å¹¶è®©å‡º CPU èµ„æºï¼Œè®©å…¶ä»–çº¿ç¨‹è·å¾—æ‰§è¡Œæœºä¼šã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:2:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#goroutine-æ˜¯ä»€ä¹ˆ"},{"categories":["golang"],"content":" è°ƒåº¦å™¨çš„ç”±æ¥åœ¨å¤šè¿›ç¨‹/å¤šçº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œè§£å†³äº†æ—©æœŸçš„å•è¿›ç¨‹æ“ä½œç³»ç»Ÿè¿›ç¨‹é˜»å¡çš„é—®é¢˜ï¼Œå› ä¸ºä¸€ä¸ªè¿›ç¨‹é˜»å¡ CPU å¯ä»¥ç«‹åˆ»åˆ‡æ¢åˆ°å…¶ä»–è¿›ç¨‹ä¸­å»æ‰§è¡Œï¼Œè€Œä¸”è°ƒåº¦ CPU çš„ç®—æ³•å¯ä»¥ä¿è¯åœ¨è¿è¡Œçš„è¿›ç¨‹éƒ½å¯ä»¥è¢«åˆ†é…åˆ° CPU çš„è¿è¡Œæ—¶é—´ç‰‡ï¼Œè¿™æ ·ä»å®è§‚æ¥çœ‹ï¼Œä¼¼ä¹å¤šä¸ªè¿›ç¨‹æ˜¯åœ¨åŒæ—¶è¢«è¿è¡Œã€‚ ä½†æ–°çš„é—®é¢˜å°±å‡ºç°äº†ï¼Œè¿›ç¨‹æ‹¥æœ‰å¤ªå¤šçš„èµ„æºï¼Œè¿›ç¨‹çš„åˆ›å»ºã€åˆ‡æ¢ã€é”€æ¯ï¼Œéƒ½ä¼šå ç”¨å¾ˆé•¿çš„æ—¶é—´ã€‚CPU è™½ç„¶åˆ©ç”¨èµ·æ¥äº†ï¼Œä½†å¦‚æœè¿›ç¨‹è¿‡å¤šï¼ŒCPU æœ‰å¾ˆå¤§çš„ä¸€éƒ¨åˆ†éƒ½è¢«ç”¨æ¥è¿›è¡Œè¿›ç¨‹è°ƒåº¦ã€‚ä¸ºäº†èƒ½æé«˜ CPU çš„åˆ©ç”¨ç‡ï¼Œè¿™é‡Œå°±éœ€è¦ç”¨åˆ°è°ƒåº¦ã€‚ CPU è°ƒåº¦åˆ‡æ¢çš„æ˜¯è¿›ç¨‹å’Œçº¿ç¨‹ï¼ŒCPU å¯¹è¿›ç¨‹å’Œçº¿ç¨‹çš„æ€åº¦æ˜¯ä¸€æ ·çš„ï¼Œè™½ç„¶çº¿ç¨‹çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†å®é™…ä¸Šå¤šçº¿ç¨‹å¼€å‘è®¾è®¡ä¼šå˜å¾—å¾ˆå¤æ‚ï¼Œè¦è€ƒè™‘å¾ˆå¤šåŒæ­¥ç«äº‰çš„é—®é¢˜ï¼Œæ¯”å¦‚é”ã€ç«äº‰å†²çªç­‰ã€‚ ä¸€ä¸ªçº¿ç¨‹å…¶å®åˆ†ä¸º â€œå†…æ ¸æ€â€œ çº¿ç¨‹å’Œ â€œç”¨æˆ·æ€â€ çº¿ç¨‹ã€‚ä¸€ä¸ª â€œç”¨æˆ·æ€çº¿ç¨‹â€ å¿…é¡»è¦ç»‘å®šä¸€ä¸ª â€œå†…æ ¸æ€çº¿ç¨‹â€ï¼Œä½†æ˜¯ CPU å¹¶ä¸çŸ¥é“æœ‰ â€œç”¨æˆ·æ€çº¿ç¨‹â€ çš„å­˜åœ¨ï¼ŒCPU åªçŸ¥é“å®ƒè¿è¡Œçš„æ˜¯ä¸€ä¸ª â€œå†…æ ¸æ€çº¿ç¨‹â€ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥æŠŠå†…æ ¸çº¿ç¨‹ä¾ç„¶å«çº¿ç¨‹ï¼Œç”¨æˆ·çº¿ç¨‹å«åç¨‹ã€‚æ—¢ç„¶ä¸€ä¸ªåç¨‹å¯ä»¥ç»‘å®šä¸€ä¸ªçº¿ç¨‹ï¼Œé‚£ä¹ˆèƒ½ä¸èƒ½å¤šä¸ªåç¨‹ç»‘å®šåœ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªçº¿ç¨‹ä¸Šå‘¢ï¼ ","date":"2022-03-16","objectID":"/gmp-model/:3:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#è°ƒåº¦å™¨çš„ç”±æ¥"},{"categories":["golang"],"content":" åç¨‹å’Œçº¿ç¨‹çš„æ˜ å°„","date":"2022-03-16","objectID":"/gmp-model/:4:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#åç¨‹å’Œçº¿ç¨‹çš„æ˜ å°„"},{"categories":["golang"],"content":" N:1 å…³ç³»N ä¸ªåç¨‹ç»‘å®š 1 ä¸ªçº¿ç¨‹ã€‚ N:1 ä¼˜ç‚¹ï¼š åç¨‹åœ¨ç”¨æˆ·æ€çº¿ç¨‹å³å®Œæˆåˆ‡æ¢ï¼Œä¸ä¼šé™·å…¥åˆ°å†…æ ¸æ€ï¼Œè¿™ç§åˆ‡æ¢éå¸¸çš„è½»é‡å¿«é€Ÿã€‚ä½†ä¹Ÿæœ‰å¾ˆå¤§çš„ç¼ºç‚¹ï¼Œ1 ä¸ªè¿›ç¨‹çš„æ‰€æœ‰åç¨‹éƒ½ç»‘å®šåœ¨ 1 ä¸ªçº¿ç¨‹ä¸Šã€‚ ç¼ºç‚¹ï¼š æŸä¸ªç¨‹åºç”¨ä¸äº†ç¡¬ä»¶çš„å¤šæ ¸åŠ é€Ÿèƒ½åŠ› ä¸€æ—¦æŸåç¨‹é˜»å¡ï¼Œé€ æˆçº¿ç¨‹é˜»å¡ï¼Œæœ¬è¿›ç¨‹çš„å…¶ä»–åç¨‹éƒ½æ— æ³•æ‰§è¡Œäº†ï¼Œæ ¹æœ¬å°±æ²¡æœ‰å¹¶å‘çš„èƒ½åŠ›äº†ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:4:1","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#n1-å…³ç³»"},{"categories":["golang"],"content":" 1:1 å…³ç³»1 ä¸ªåç¨‹ç»‘å®š 1 ä¸ªçº¿ç¨‹ï¼Œåç¨‹çš„è°ƒåº¦éƒ½ç”± CPU å®Œæˆäº†ï¼Œä¸å­˜åœ¨N:1çš„ç¼ºç‚¹ï¼Œä½†æ˜¯åç¨‹çš„åˆ›å»ºã€åˆ é™¤å’Œåˆ‡æ¢çš„ä»£ä»·éƒ½ç”± CPU å®Œæˆï¼Œç•¥æ˜¾æ˜‚è´µã€‚ 1:1 ","date":"2022-03-16","objectID":"/gmp-model/:4:2","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#11-å…³ç³»"},{"categories":["golang"],"content":" M:N å…³ç³»M ä¸ªåç¨‹ç»‘å®š N ä¸ªçº¿ç¨‹ï¼Œæ˜¯N:1å’Œ1:1ç±»å‹çš„ç»“åˆï¼Œå…‹æœäº†ä»¥ä¸Š 2 ç§æ¨¡å‹çš„ç¼ºç‚¹ï¼Œä½†å®ç°å¤æ‚ã€‚ M:N ","date":"2022-03-16","objectID":"/gmp-model/:4:3","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#mn-å…³ç³»"},{"categories":["golang"],"content":" Go çš„è°ƒåº¦ç”¨æˆ·æ€çš„ Goroutineï¼Œæ“ä½œç³»ç»Ÿçœ‹ä¸åˆ°å®ƒ ï¼Œå¿…ç„¶éœ€è¦æœ‰æŸä¸ªä¸œè¥¿å»ç®¡ç†ä»–ï¼Œæ‰èƒ½æ›´å¥½çš„è¿ä½œèµ·æ¥ã€‚è¿™å°±æ˜¯ Go è¯­è¨€ä¸­çš„è°ƒåº¦ï¼Œä¹Ÿå°±æ˜¯ GMP æ¨¡å‹ã€‚ Go scheduler /ËˆskedÊ’uËlÉ™r/ çš„ä¸»è¦åŠŸèƒ½æ˜¯é’ˆå¯¹åœ¨å¤„ç†å™¨ä¸Šè¿è¡Œçš„ OS çº¿ç¨‹åˆ†å‘å¯è¿è¡Œçš„ Goroutineï¼Œè€Œæˆ‘ä»¬ä¸€æåˆ°è°ƒåº¦å™¨ï¼Œå°±ç¦»ä¸å¼€ä¸‰ä¸ªç»å¸¸è¢«æåˆ°çš„ç¼©å†™ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯ï¼š Gï¼šGoroutineï¼Œå®é™…ä¸Šæˆ‘ä»¬æ¯æ¬¡è°ƒç”¨go funcå°±æ˜¯ç”Ÿæˆäº†ä¸€ä¸ª Gã€‚ Pï¼šProcessorï¼Œå¤„ç†å™¨ï¼Œä¸€èˆ¬ P çš„æ•°é‡å°±æ˜¯å¤„ç†å™¨çš„æ ¸æ•°ï¼Œå¯ä»¥é€šè¿‡runtime.GOMAXPROCS(n)è¿›è¡Œä¿®æ”¹ã€‚P åŒ…å«äº†è¿è¡Œ goroutine çš„èµ„æºï¼Œå¦‚æœçº¿ç¨‹ M æƒ³è¿è¡Œ goroutineï¼Œå¿…é¡»å…ˆè·å– P ï¼Œä¸€ä¸ª M åœ¨ä¸ä¸€ä¸ª P å…³è”ä¹‹åå½¢æˆäº†ä¸€ä¸ªæœ‰æ•ˆçš„ G è¿è¡Œç¯å¢ƒã€Œå†…æ ¸çº¿ç¨‹ + ä¸Šä¸‹æ–‡ç¯å¢ƒã€ã€‚P ä¸­è¿˜åŒ…å«äº†å¯è¿è¡Œçš„æœ¬åœ° G é˜Ÿåˆ—ï¼Œæœ¬åœ° G é˜Ÿåˆ—ä¸è¶…è¿‡ 256 ä¸ª Gï¼Œä¼˜å…ˆä¼šå°†æ–°åˆ›å»ºçš„ G æ”¾åˆ°æŸä¸ª P çš„æœ¬åœ°é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœæœ¬åœ°é˜Ÿåˆ—æ»¡äº†ä¼šæ”¾åˆ°å…¨å±€é˜Ÿåˆ—ä¸­ã€‚ Mï¼šMachineï¼Œç³»ç»Ÿ/å†…æ ¸çº¿ç¨‹ï¼Œæ˜¯è¿è¡Œ goroutine çš„å®ä½“ï¼Œæ¯ä¸ª M éƒ½ä»£è¡¨äº† 1 ä¸ªå†…æ ¸çº¿ç¨‹ã€‚M å¯ä»¥è¿è¡Œ 2 ç§ä»£ç ï¼Œå½“ M è¿è¡Œ go ä»£ç ä¸€å®šéœ€è¦ä¸€ä¸ªPï¼Œå½“ M è¿è¡ŒåŸç”Ÿä»£ç , ä¾‹å¦‚é˜»å¡çš„syscall, æ­¤æ—¶ M ä¸éœ€è¦ Pã€‚ M ä¸ P çš„æ•°é‡æ²¡æœ‰ç»å¯¹å…³ç³»ï¼Œä¸€ä¸ª M é˜»å¡ï¼ŒP å°±ä¼šå»åˆ›å»ºæˆ–è€…åˆ‡æ¢å¦ä¸€ä¸ª Mï¼Œæ‰€ä»¥ï¼Œå³ä½¿ P çš„é»˜è®¤æ•°é‡æ˜¯ 1ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šåˆ›å»ºå¾ˆå¤šä¸ª M å‡ºæ¥ã€‚ è¿™ä¸‰è€…äº¤äº’å®é™…æ¥æºäº Go çš„M:Nè°ƒåº¦æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯ M å¿…é¡»ä¸ P è¿›è¡Œç»‘å®šï¼Œç„¶åä¸æ–­åœ°åœ¨ M ä¸Šå¾ªç¯å¯»æ‰¾å¯è¿è¡Œçš„ G æ¥æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ã€‚ GMPè°ƒåº¦ ","date":"2022-03-16","objectID":"/gmp-model/:5:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#go-çš„è°ƒåº¦"},{"categories":["golang"],"content":" På’ŒMä½•æ—¶è¢«åˆ›å»ºP ä½•æ—¶åˆ›å»ºï¼šåœ¨ç¡®å®šäº† P çš„æœ€å¤§æ•°é‡ n åï¼Œè¿è¡Œæ—¶ç³»ç»Ÿä¼šæ ¹æ®è¿™ä¸ªæ•°é‡åˆ›å»º n ä¸ª Pã€‚ M ä½•æ—¶åˆ›å»º ï¼šæ²¡æœ‰è¶³å¤Ÿçš„ M æ¥å…³è” P å¹¶è¿è¡Œå…¶ä¸­çš„å¯è¿è¡Œçš„ Gã€‚æ¯”å¦‚æ‰€æœ‰çš„ M æ­¤æ—¶éƒ½é˜»å¡ä½äº†ï¼Œè€Œ P ä¸­è¿˜æœ‰å¾ˆå¤šå°±ç»ªä»»åŠ¡ï¼Œå°±ä¼šå»å¯»æ‰¾ç©ºé—²çš„ Mï¼Œè€Œæ²¡æœ‰ç©ºé—²çš„ï¼Œruntime è¿è¡Œæ—¶å°±ä¼šå»åˆ›å»ºæ–°çš„ Mã€‚å½“ M æœ‰ç©ºé—²å°±ä¼šè¢«å›æ”¶æˆ–æ˜¯ç¡çœ ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:5:1","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#på’Œmä½•æ—¶è¢«åˆ›å»º"},{"categories":["golang"],"content":" è°ƒåº¦æµç¨‹ è°ƒåº¦æµç¨‹ å½“æˆ‘ä»¬æ‰§è¡Œ go func() æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ Goroutineï¼Œæˆ‘ä»¬ç§°å®ƒä¸º Gã€‚ æ–°åˆ›å»ºçš„ G ä¼šè¢«æ”¾å…¥ P çš„æœ¬åœ°é˜Ÿåˆ—ï¼ˆLocal Queueï¼‰æˆ–å…¨å±€é˜Ÿåˆ—ï¼ˆGlobal Queueï¼‰ä¸­ï¼Œå‡†å¤‡ä¸‹ä¸€æ­¥çš„åŠ¨ä½œã€‚éœ€è¦æ³¨æ„çš„ä¸€ç‚¹ï¼Œè¿™é‡Œçš„ P æŒ‡çš„æ˜¯åˆ›å»º G çš„ Pï¼Œå¦‚æœ P çš„æœ¬åœ°é˜Ÿåˆ—å·²ç»æ»¡äº†å°±ä¼šä¿å­˜åœ¨å…¨å±€çš„é˜Ÿåˆ—ä¸­ã€‚ å”¤é†’æˆ–åˆ›å»º M ä»¥ä¾¿æ‰§è¡Œ Gã€‚G åªèƒ½è¿è¡Œåœ¨ M ä¸­ï¼Œä¸€ä¸ª M å¿…é¡»æŒæœ‰ä¸€ä¸ª Pï¼ŒM ä¸ P æ˜¯1:1çš„å…³ç³»ã€‚M ä¼šä» P çš„æœ¬åœ°é˜Ÿåˆ—å¼¹å‡ºä¸€ä¸ªå¯æ‰§è¡ŒçŠ¶æ€çš„ G æ¥æ‰§è¡Œï¼Œå¦‚æœ P çš„æœ¬åœ°é˜Ÿåˆ—ä¸ºç©ºï¼Œå°±ä¼šæƒ³å…¶ä»–çš„MPç»„åˆå·å–ä¸€ä¸ªå¯æ‰§è¡Œçš„ G æ¥æ‰§è¡Œã€‚ ä¸€ä¸ª M è°ƒåº¦ G æ‰§è¡Œçš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¾ªç¯æœºåˆ¶ã€‚ å½“ M æ‰§è¡ŒæŸä¸€ä¸ª G çš„æ—¶å€™å¦‚æœå‘ç”Ÿäº†syscallæˆ–è€…å…¶ä½™çš„é˜»å¡æ“ä½œï¼ŒM ä¼šé˜»å¡ï¼Œå¦‚æœå½“å‰æœ‰ä¸€äº› G åœ¨æ‰§è¡Œï¼Œruntime ä¼šæŠŠè¿™ä¸ªçº¿ç¨‹ M ä» P ä¸­æ‘˜é™¤ï¼ˆdetachï¼‰ï¼Œç„¶åå†åˆ›å»ºä¸€ä¸ªæ–°çš„æ“ä½œç³»ç»Ÿçš„çº¿ç¨‹ï¼ˆå¦‚æœæœ‰ç©ºé—²çš„çº¿ç¨‹å¯ç”¨å°±å¤ç”¨ç©ºé—²çº¿ç¨‹ï¼‰æ¥æœåŠ¡äºè¿™ä¸ª Pã€‚ å½“ M ç³»ç»Ÿè°ƒç”¨ç»“æŸæ—¶å€™ï¼Œè¿™ä¸ª G ä¼šå°è¯•è·å–ä¸€ä¸ªç©ºé—²çš„ P æ‰§è¡Œï¼Œå¹¶æ”¾å…¥åˆ°è¿™ä¸ª P çš„æœ¬åœ°é˜Ÿåˆ—ã€‚å¦‚æœè·å–ä¸åˆ° Pï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹ M å˜æˆä¼‘çœ çŠ¶æ€ï¼ŒåŠ å…¥åˆ°ç©ºé—²çº¿ç¨‹ä¸­ï¼Œç„¶åè¿™ä¸ª G ä¼šè¢«æ”¾å…¥å…¨å±€é˜Ÿåˆ—ä¸­ã€‚ åœ¨æè¿°ä¸­æœ‰æåˆ°å…¨å±€å’Œæœ¬åœ°è¿™ä¸¤ç±»é˜Ÿåˆ—ï¼Œå…¶å®åœ¨åŠŸèƒ½ä¸Šæ¥è®²éƒ½æ˜¯ç”¨äºå­˜æ”¾æ­£åœ¨ç­‰å¾…è¿è¡Œçš„ Gï¼Œä½†æ˜¯ä¸åŒç‚¹åœ¨äºï¼Œæœ¬åœ°é˜Ÿåˆ—æœ‰æ•°é‡é™åˆ¶ï¼Œä¸å…è®¸è¶…è¿‡ 256 ä¸ªã€‚ å¹¶ä¸”åœ¨æ–°å»º G æ—¶ï¼Œä¼šä¼˜å…ˆé€‰æ‹© P çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œå¦‚æœæœ¬åœ°é˜Ÿåˆ—æ»¡äº†ï¼Œåˆ™å°† P çš„æœ¬åœ°é˜Ÿåˆ—çš„ä¸€åŠçš„ G ç§»åŠ¨åˆ°å…¨å±€é˜Ÿåˆ—ã€‚ å¯ä»¥ç†è§£ä¸ºè°ƒåº¦èµ„æºçš„å…±äº«å’Œå†å¹³è¡¡ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:6:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#è°ƒåº¦æµç¨‹"},{"categories":["golang"],"content":" M0å’ŒG0M0æ˜¯å¯åŠ¨ç¨‹åºåç¼–å·ä¸º 0 çš„ä¸»çº¿ç¨‹ï¼Œè¿™ä¸ª M å¯¹åº”çš„å®ä¾‹ä¼šåœ¨å…¨å±€å˜é‡runtime.m0ä¸­ï¼ŒM0è´Ÿè´£æ‰§è¡Œåˆå§‹åŒ–æ“ä½œå’Œå¯åŠ¨ç¬¬ä¸€ä¸ª Gï¼Œ åœ¨ä¹‹åM0å°±å’Œå…¶ä»–çš„ M ä¸€æ ·ã€‚ G0æ˜¯æ¯æ¬¡å¯åŠ¨ä¸€ä¸ª M éƒ½ä¼šç¬¬ä¸€ä¸ªåˆ›å»ºçš„ gourtineï¼ŒG0ä»…ç”¨äºè´Ÿè´£è°ƒåº¦ Gï¼ŒG0ä¸æŒ‡å‘ä»»ä½•å¯æ‰§è¡Œçš„å‡½æ•°, æ¯ä¸ª M éƒ½ä¼šæœ‰ä¸€ä¸ªè‡ªå·±çš„G0ã€‚ package main import \"fmt\" func main() { fmt.Println(\"Hello world\") } â˜ï¸ä¸Šé¢ä»£ç ä¼šç»å†å¦‚ä¸‹è¿‡ç¨‹ï¼š runtime åˆ›å»ºæœ€åˆçš„çº¿ç¨‹ m0 å’Œ goroutine g0ï¼Œå¹¶æŠŠ 2 è€…å…³è”ã€‚ è°ƒåº¦å™¨åˆå§‹åŒ–ï¼šåˆå§‹åŒ– m0ã€æ ˆã€åƒåœ¾å›æ”¶ï¼Œä»¥åŠåˆ›å»ºå’Œåˆå§‹åŒ–ç”±GOMAXPROCSä¸ª P æ„æˆçš„ P åˆ—è¡¨ã€‚ ç¤ºä¾‹ä»£ç ä¸­çš„ main å‡½æ•°æ˜¯main.mainï¼Œruntime ä¸­ä¹Ÿæœ‰ 1 ä¸ª main å‡½æ•°runtime.mainï¼Œä»£ç ç»è¿‡ç¼–è¯‘åï¼Œruntime.mainä¼šè°ƒç”¨main.mainï¼Œç¨‹åºå¯åŠ¨æ—¶ä¼šä¸ºruntime.mainåˆ›å»º goroutineï¼Œå¯ä»¥ç§°å®ƒä¸º main goroutineï¼Œç„¶åæŠŠ main goroutine åŠ å…¥åˆ° P çš„æœ¬åœ°é˜Ÿåˆ—ã€‚ å¯åŠ¨ m0ï¼Œm0 å·²ç»ç»‘å®šäº† Pï¼Œä¼šä» P çš„æœ¬åœ°é˜Ÿåˆ—è·å– Gï¼Œè·å–åˆ° main goroutineã€‚ M æ ¹æ® G ä¸­çš„æ ˆä¿¡æ¯å’Œè°ƒåº¦ä¿¡æ¯è®¾ç½®è¿è¡Œç¯å¢ƒï¼ŒM è¿è¡Œ Gã€‚ G é€€å‡ºï¼Œå†æ¬¡å›åˆ° M è·å–å¯è¿è¡Œçš„ Gï¼Œè¿™æ ·é‡å¤ä¸‹å»ï¼Œç›´åˆ°main.mainé€€å‡ºï¼Œruntime.mainæ‰§è¡Œ Defer å’Œ Panic å¤„ç†ï¼Œæˆ–è°ƒç”¨runtime.exité€€å‡ºç¨‹åºã€‚ è°ƒåº¦å™¨çš„ç”Ÿå‘½å‘¨æœŸå‡ ä¹å æ»¡äº†ä¸€ä¸ª Go ç¨‹åºçš„ä¸€ç”Ÿï¼Œruntime.mainçš„ goroutine æ‰§è¡Œä¹‹å‰éƒ½æ˜¯ä¸ºè°ƒåº¦å™¨åšå‡†å¤‡å·¥ä½œï¼Œruntime.mainçš„ goroutine è¿è¡Œï¼Œæ‰æ˜¯è°ƒåº¦å™¨çš„çœŸæ­£å¼€å§‹ï¼Œç›´åˆ°runtime.mainç»“æŸè€Œç»“æŸã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:7:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#m0å’Œg0"},{"categories":["golang"],"content":" çªƒå–è¡Œä¸ºå½“åˆ›å»ºæ–°çš„ G æˆ–è€… G å˜æˆå¯è¿è¡ŒçŠ¶æ€æ—¶ï¼Œå®ƒä¼šè¢«æ¨é€åŠ å…¥åˆ°å½“å‰ P çš„æœ¬åœ°é˜Ÿåˆ—ä¸­ã€‚å½“ P æ‰§è¡Œ G å®Œæ¯•åï¼ŒP ä¼šå°† G ä»æœ¬åœ°é˜Ÿåˆ—ä¸­å¼¹å‡ºï¼ŒåŒæ—¶ä¼šæ£€æŸ¥å½“å‰æœ¬åœ°é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºä¸ä¼šç«‹åˆ»é”€æ¯çº¿ç¨‹ï¼Œè€Œæ˜¯ä¼šéšæœºçš„ä»å…¶ä»– P çš„æœ¬åœ°é˜Ÿåˆ—ä¸­å°è¯• çªƒå–ä¸€åŠå¯è¿è¡Œçš„ G åˆ°è‡ªå·±çš„åä¸‹ã€‚ çªƒå–è¡Œä¸º ä¸Šå›¾ä¸­ğŸ‘†ï¼ŒP2 åœ¨æœ¬åœ°é˜Ÿåˆ—ä¸­æ‰¾ä¸åˆ°å¯ä»¥è¿è¡Œçš„ Gï¼Œå®ƒä¼šæ‰§è¡Œ work-stealing è°ƒåº¦ç®—æ³•ï¼Œéšæœºé€‰æ‹©å…¶å®ƒçš„å¤„ç†å™¨ P1ï¼Œå¹¶ä» P1 çš„æœ¬åœ°é˜Ÿåˆ—ä¸­çªƒå–äº†ä¸‰ä¸ª G åˆ°å®ƒè‡ªå·±çš„æœ¬åœ°é˜Ÿåˆ—ä¸­å»ã€‚è‡³æ­¤ï¼ŒP1ã€P2 éƒ½æ‹¥æœ‰äº†å¯è¿è¡Œçš„ Gï¼ŒP1 å¤šä½™çš„ G ä¹Ÿä¸ä¼šè¢«æµªè´¹ï¼Œè°ƒåº¦èµ„æºå°†ä¼šæ›´åŠ å¹³å‡çš„åœ¨å¤šä¸ªå¤„ç†å™¨ä¸­æµè½¬ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:8:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#çªƒå–è¡Œä¸º"},{"categories":["golang"],"content":" é™åˆ¶æ¡ä»¶","date":"2022-03-16","objectID":"/gmp-model/:9:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#é™åˆ¶æ¡ä»¶"},{"categories":["golang"],"content":" M çš„é™åˆ¶åœ¨åç¨‹çš„æ‰§è¡Œä¸­ï¼ŒçœŸæ­£å¹²æ´»çš„æ˜¯ GPM ä¸­çš„ Mï¼ˆç³»ç»Ÿçº¿ç¨‹ï¼‰ ï¼Œå› ä¸º G æ˜¯ç”¨æˆ·æ€ä¸Šçš„ä¸œè¥¿ï¼Œæœ€ç»ˆæ‰§è¡Œéƒ½æ˜¯å¾—æ˜ å°„ï¼Œå¯¹åº”åˆ° M è¿™ä¸€ä¸ªç³»ç»Ÿçº¿ç¨‹ä¸Šå»è¿è¡Œã€‚ é‚£ä¹ˆ M æœ‰æ²¡æœ‰é™åˆ¶å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šæœ‰çš„ã€‚åœ¨ Go è¯­è¨€ä¸­ï¼ŒM çš„é»˜è®¤æ•°é‡é™åˆ¶æ˜¯ 10000ï¼Œå¦‚æœè¶…å‡ºåˆ™ä¼šæŠ¥é”™ï¼š GO: runtime: program exceeds 10000-thread limit ä½†æ˜¯é€šå¸¸åªæœ‰åœ¨ Goroutine å‡ºç°é˜»å¡æ“ä½œçš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šé‡åˆ°è¿™ç§æƒ…å†µã€‚è¿™å¯èƒ½ä¹Ÿé¢„ç¤ºç€ä½ çš„ç¨‹åºæœ‰é—®é¢˜ã€‚ è‹¥ç¡®åˆ‡æ˜¯éœ€è¦é‚£ä¹ˆå¤šï¼Œè¿˜å¯ä»¥é€šè¿‡ debug.SetMaxThreads æ–¹æ³•è¿›è¡Œè®¾ç½®ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:9:1","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#m-çš„é™åˆ¶"},{"categories":["golang"],"content":" G çš„é™åˆ¶Goroutine çš„åˆ›å»ºæ•°é‡æ˜¯å¦æœ‰é™åˆ¶ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šæ²¡æœ‰ã€‚ä½†ç†è®ºä¸Šä¼šå—å†…å­˜çš„å½±å“ï¼Œå‡è®¾ä¸€ä¸ª Goroutine åˆ›å»ºéœ€è¦ 4k çš„è¿ç»­çš„å†…å­˜å—ï¼š 4k * 80,000 = 320,000k â‰ˆ 0.3Gå†…å­˜ 4k * 1,000,000 = 4,000,000k â‰ˆ 4Gå†…å­˜ ä»¥æ­¤å°±å¯ä»¥ç›¸å¯¹è®¡ç®—å‡ºæ¥ä¸€å°å•æœºåœ¨é€šä¿—æƒ…å†µä¸‹ï¼Œæ‰€èƒ½å¤Ÿåˆ›å»º Goroutine çš„å¤§æ¦‚æ•°é‡çº§åˆ«ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:9:2","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#g-çš„é™åˆ¶"},{"categories":["golang"],"content":" P çš„é™åˆ¶P çš„æ•°é‡æ˜¯å¦æœ‰é™åˆ¶ï¼Œå—ä»€ä¹ˆå½±å“ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šæœ‰é™åˆ¶ã€‚P çš„æ•°é‡å—ç¯å¢ƒå˜é‡ GOMAXPROCS çš„ç›´æ¥å½±å“ã€‚ ç¯å¢ƒå˜é‡ GOMAXPROCS åˆæ˜¯ä»€ä¹ˆï¼Ÿåœ¨ Go è¯­è¨€ä¸­ï¼Œé€šè¿‡è®¾ç½® GOMAXPROCSï¼Œç”¨æˆ·å¯ä»¥è°ƒæ•´è°ƒåº¦ä¸­ Pï¼ˆProcessorï¼‰çš„æ•°é‡ã€‚ å¦ä¸€ä¸ªé‡ç‚¹åœ¨äºï¼Œä¸ P ç›¸å…³è”çš„çš„ Mï¼ˆç³»ç»Ÿçº¿ç¨‹ï¼‰ï¼Œæ˜¯éœ€è¦ç»‘å®š P æ‰èƒ½è¿›è¡Œå…·ä½“çš„ä»»åŠ¡æ‰§è¡Œçš„ï¼Œå› æ­¤P çš„å¤šå°‘ä¼šå½±å“åˆ° Go ç¨‹åºçš„è¿è¡Œè¡¨ç°ã€‚ P çš„æ•°é‡åŸºæœ¬æ˜¯å—æœ¬æœºçš„æ ¸æ•°å½±å“ï¼Œæ²¡å¿…è¦å¤ªè¿‡åº¦çº ç»“ä»–ã€‚ é‚£ P çš„æ•°é‡æ˜¯å¦ä¼šå½±å“ Goroutine çš„æ•°é‡åˆ›å»ºå‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼šä¸å½±å“ã€‚ä¸” Goroutine å¤šäº†å°‘äº†ï¼ŒP ä¹Ÿè¯¥å¹²å˜›å¹²å˜›ï¼Œä¸ä¼šå¸¦æ¥ç¾éš¾æ€§é—®é¢˜ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:9:3","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#p-çš„é™åˆ¶"},{"categories":["golang"],"content":" å°ç»“ Mï¼šæœ‰é™åˆ¶ï¼Œé»˜è®¤æ•°é‡é™åˆ¶æ˜¯ 10000ï¼Œå¯è°ƒæ•´ã€‚ Gï¼šæ²¡é™åˆ¶ï¼Œä½†å—å†…å­˜å½±å“ã€‚ Pï¼šå—æœ¬æœºçš„æ ¸æ•°å½±å“ï¼Œå¯å¤§å¯å°ï¼Œä¸å½±å“ G çš„æ•°é‡åˆ›å»ºã€‚ æ‰€ä»¥Goroutine æ•°é‡æ€ä¹ˆé¢„ç®—ï¼Œæ‰å«åˆç†ï¼Ÿ åœ¨çœŸå®çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå¦‚æœä½  Goroutineï¼š åœ¨é¢‘ç¹è¯·æ±‚ HTTPï¼ŒMySQLï¼Œæ‰“å¼€æ–‡ä»¶ç­‰ï¼Œé‚£å‡è®¾çŸ­æ—¶é—´å†…æœ‰å‡ åä¸‡ä¸ªåç¨‹åœ¨è·‘ï¼Œé‚£è‚¯å®šå°±ä¸å¤§åˆç†äº†ï¼ˆå¯èƒ½ä¼šå¯¼è‡´ too many files openï¼‰ã€‚ å¸¸è§çš„ Goroutine æ³„éœ²æ‰€å¯¼è‡´çš„ CPUã€Memory ä¸Šæ¶¨ç­‰ï¼Œè¿˜æ˜¯å¾—çœ‹ä½ çš„ Goroutine é‡Œå…·ä½“åœ¨è·‘ä»€ä¹ˆä¸œè¥¿ã€‚ è·‘çš„å¦‚æœæ˜¯ â€œèµ„æºæ€ªå…½â€ï¼Œåªè¿è¡Œå‡ ä¸ª Goroutine éƒ½å¯ä»¥è·‘æ­»ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:9:4","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#å°ç»“"},{"categories":["golang"],"content":" ä¸ºä»€ä¹ˆè¦æœ‰ P æ—©æœŸè°ƒåº¦å™¨ Go æ—©æœŸçš„è°ƒåº¦å™¨æ˜¯æ²¡æœ‰ P çš„ï¼Œåªæœ‰ M å’Œ Gã€‚M æƒ³è¦æ‰§è¡Œå’Œæ”¾å› G éƒ½å¿…é¡»è®¿é—®å…¨å±€ G é˜Ÿåˆ—ï¼Œå¹¶ä¸” M æœ‰å¤šä¸ªï¼Œå¤šçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºéœ€è¦åŠ é”è¿›è¡Œä¿è¯äº’æ–¥/åŒæ­¥ï¼Œæ‰€ä»¥å…¨å±€ G é˜Ÿåˆ—æ˜¯æœ‰äº’æ–¥é”è¿›è¡Œä¿æŠ¤çš„ã€‚ æ‰€ä»¥æ—©æœŸçš„è°ƒåº¦å™¨å­˜åœ¨è¿™æ ·å‡ ä¸ªç¼ºç‚¹ï¼š åˆ›å»ºã€é”€æ¯ã€è°ƒåº¦ G éƒ½éœ€è¦æ¯ä¸ª M è·å–é”ï¼Œè¿™å°±å½¢æˆäº†æ¿€çƒˆçš„é”ç«äº‰ã€‚ M è½¬ç§» G ä¼šé€ æˆå»¶è¿Ÿå’Œé¢å¤–çš„ç³»ç»Ÿè´Ÿè½½ã€‚æ¯”å¦‚å½“ G ä¸­åŒ…å«åˆ›å»ºæ–°åç¨‹çš„æ—¶å€™ï¼ŒM åˆ›å»ºäº†G'ï¼Œä¸ºäº†ç»§ç»­æ‰§è¡Œ Gï¼Œéœ€è¦æŠŠG'äº¤ç»™M'æ‰§è¡Œï¼Œä¹Ÿé€ æˆäº†å¾ˆå·®çš„å±€éƒ¨æ€§ï¼Œå› ä¸ºG'å’Œ G æ˜¯ç›¸å…³çš„ï¼Œæœ€å¥½æ”¾åœ¨ M ä¸Šæ‰§è¡Œï¼Œè€Œä¸æ˜¯å…¶ä»–M'ã€‚ ç³»ç»Ÿè°ƒç”¨ï¼ˆCPU åœ¨ M ä¹‹é—´çš„åˆ‡æ¢ï¼‰å¯¼è‡´é¢‘ç¹çš„çº¿ç¨‹é˜»å¡å’Œå–æ¶ˆé˜»å¡æ“ä½œå¢åŠ äº†ç³»ç»Ÿå¼€é”€ã€‚ ","date":"2022-03-16","objectID":"/gmp-model/:10:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#ä¸ºä»€ä¹ˆè¦æœ‰-p"},{"categories":["golang"],"content":" FAQ hand off æœºåˆ¶ å½“æœ¬çº¿ç¨‹ä¸Šæ‰§è¡Œçš„ G é˜»å¡æ—¶ï¼Œçº¿ç¨‹ä¼šé‡Šæ”¾ç»‘å®šçš„ Pï¼ŒæŠŠ P å’Œ M åˆ†ç¦»ï¼ŒæŠŠ P è½¬ç§»ç»™å…¶ä»–ç©ºé—²çš„çº¿ç¨‹æ‰§è¡Œã€‚ åˆ©ç”¨å¹¶è¡Œ å¯ä»¥é€šè¿‡GOMAXPROCSè®¾ç½® P çš„æ•°é‡ï¼Œæœ€å¤šæœ‰GOMAXPROCSä¸ªçº¿ç¨‹åˆ†å¸ƒåœ¨å¤šä¸ª CPU ä¸ŠåŒæ—¶è¿è¡Œï¼Œå› ä¸º P æ˜¯ç»‘å®šåœ¨ M ä¸Šçš„ï¼ŒM æƒ³è¦è¿è¡Œ G å¿…é¡»å…ˆè·å– Pã€‚GOMAXPROCSä¹Ÿé™åˆ¶äº†å¹¶å‘çš„ç¨‹åº¦ï¼Œæ¯”å¦‚GOMAXPROCS = æ ¸æ•°/2ï¼Œåˆ™æœ€å¤šåˆ©ç”¨äº†ä¸€åŠçš„ CPU æ ¸è¿›è¡Œå¹¶è¡Œã€‚ æŠ¢å  ä¸€ä¸ª goroutine æœ€å¤šå ç”¨ CPU 10msï¼Œé˜²æ­¢å…¶ä»– goroutine è¢«é¥¿æ­»ã€‚ è‡ªæ—‹çº¿ç¨‹ è‡ªæ—‹çº¿ç¨‹ å‡å®š G2 å”¤é†’äº† M2ï¼ŒM2 ç»‘å®šäº† P2ï¼ŒM2 è°ƒç”¨å¹¶è¿è¡ŒG0ï¼Œä½† P2 æœ¬åœ°é˜Ÿåˆ—æ²¡æœ‰ Gï¼ŒM2 æ­¤æ—¶çš„çŠ¶æ€ç§°ä¸ºè‡ªæ—‹çº¿ç¨‹ï¼ˆæ²¡æœ‰ G ä½†ä¸ºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹ï¼Œä¸æ–­å¯»æ‰¾ Gï¼‰ã€‚è‡ªæ—‹çº¿ç¨‹ä¼˜å…ˆä¼šä»å…¨å±€é˜Ÿåˆ—é‡Œè·å– Gï¼Œå½“å…¨å±€é˜Ÿåˆ—é‡Œæ²¡æœ‰äº†æ—¶ï¼Œä¼šå»å…¶ä»–çš„MPç»„åˆä¸­å·å– Gã€‚ è‡ªæ—‹çº¿ç¨‹çš„æœ€å¤§é™åˆ¶ç¬¦åˆå…¬å¼ï¼šè‡ªæ—‹çº¿ç¨‹ + æ‰§è¡Œçº¿ç¨‹ \u003c= GOMAXPROCS å¦‚ä½•ä»å…¨å±€é˜Ÿåˆ—å– G çš„æ•°é‡ æŸä¸ª M å°è¯•ä»å…¨å±€é˜Ÿåˆ—ï¼ˆç®€ç§° â€œGQâ€ï¼‰å–ä¸€æ‰¹ G æ”¾åˆ°è‡ªå·± P çš„æœ¬åœ°é˜Ÿåˆ—ï¼Œä»å…¨å±€é˜Ÿåˆ—å–çš„ G æ•°é‡ç¬¦åˆä¸‹é¢çš„å…¬å¼ï¼š n = min(len(GQ) / GOMAXPROCS + 1, cap(LQ) / 2 ) ","date":"2022-03-16","objectID":"/gmp-model/:11:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#faq"},{"categories":["golang"],"content":" å‚è€ƒ Golangçš„åç¨‹è°ƒåº¦å™¨åŸç†åŠGMPè®¾è®¡æ€æƒ³ Go ä¸ºä»€ä¹ˆè¿™ä¹ˆâ€œå¿«â€ è®©ä½ å¾ˆå¿«å°±èƒ½ç†è§£-goçš„åç¨‹è°ƒåº¦åŸç† Goroutine æ•°é‡æ§åˆ¶åœ¨å¤šå°‘åˆé€‚ï¼Œä¼šå½±å“ GC å’Œè°ƒåº¦ï¼Ÿ Golang goroutineä¸è°ƒåº¦å™¨ è¿›ç¨‹ä¸çº¿ç¨‹çš„ä¸€ä¸ªç®€å•è§£é‡Š Go é¢è¯•å®˜ï¼šä»€ä¹ˆæ˜¯åç¨‹ï¼Œåç¨‹å’Œçº¿ç¨‹çš„åŒºåˆ«å’Œè”ç³»ï¼Ÿ golangé«˜çº§è¿›é˜¶ï¼ˆä¸€ï¼‰ï¼šè¿›ç¨‹ã€çº¿ç¨‹ã€å¹¶å‘ã€å¹¶è¡Œã€goroutineåç¨‹ GMPæ¨¡å‹ ","date":"2022-03-16","objectID":"/gmp-model/:12:0","series":["reproduce"],"tags":["golang","GMP"],"title":"Go GMP è°ƒåº¦æ¨¡å‹","uri":"/gmp-model/#å‚è€ƒ"},{"categories":["golang"],"content":"go build å¸¸ç”¨å‘½ä»¤,golang,ç¼–è¯‘,go ç¼–è¯‘","date":"2022-03-16","objectID":"/go-build-args/","series":null,"tags":["golang"],"title":"Go å¸¸ç”¨å‘½ä»¤","uri":"/go-build-args/"},{"categories":["golang"],"content":" å¸¸ç”¨ç¼–è¯‘å‚æ•° å‚æ•° è¯´æ˜ -o æŒ‡å®šè¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶å -v ç¼–è¯‘æ—¶æ˜¾ç¤ºåŒ…åï¼Œå¯ä»¥ç†è§£æˆè¾“å‡ºè¯¦ç»†ç¼–è¯‘ä¿¡æ¯ -u ä¸åŠ -uæ ‡è®°ï¼Œæ‰§è¡Œ go get ä¸€ä¸ªå·²æœ‰çš„ä»£ç åŒ…ï¼Œä¼šå‘ç°å‘½ä»¤ä»€ä¹ˆéƒ½ä¸æ‰§è¡Œã€‚åŠ äº†-uæ‰ä¼šå»æ‹‰å–æœ€æ–°çš„ä»£ç åŒ…çš„æœ€æ–°ç‰ˆæœ¬ -race å¼€å¯ç«æ€æ£€æµ‹ *.go ç¼–è¯‘å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰goæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥å†™æˆ f2.go f2.go â€¦ -a è¯¥é€‰é¡¹ç”¨äºå¼ºåˆ¶é‡æ–°ç¼–è¯‘æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼Œå³ä½¿å®ƒä»¬ä¼¼ä¹æ˜¯æœ€æ–°çš„æˆ–æœªæ›´æ”¹ã€‚è¿™å¯¹äºç¡®ä¿æ‰€æœ‰ä¾èµ–é¡¹éƒ½ä¸æœ€æ–°çš„ä»£ç ä¸€è‡´éå¸¸æœ‰ç”¨ã€‚ä½¿ç”¨ -a æ ‡å¿—å¯ä»¥é˜²æ­¢ä½¿ç”¨ç¼“å­˜çš„ä¾èµ–é¡¹ï¼Œä»è€Œç¡®ä¿æ¯ä¸ªä¾èµ–é¡¹éƒ½ä¼šè¢«é‡æ–°ç¼–è¯‘ï¼Œå¹¶ä¸æœ€æ–°çš„ä»£ç è¿›è¡Œé“¾æ¥ã€‚ -w è¯¥é€‰é¡¹ç”¨äºç¦ç”¨é“¾æ¥å™¨äº§ç”Ÿçš„è­¦å‘Šä¿¡æ¯ã€‚å½“æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼Œé“¾æ¥å™¨é€šå¸¸ä¼šç”Ÿæˆä¸€äº›è­¦å‘Šï¼Œä¾‹å¦‚æœªä½¿ç”¨çš„å˜é‡æˆ–æœªå¯¼å‡ºçš„ç¬¦å·ç­‰ã€‚ä½¿ç”¨ -w æ ‡å¿—å¯ä»¥ç¦ç”¨è¿™äº›è­¦å‘Šä¿¡æ¯ï¼Œä»¥å‡å°å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ã€‚ -s -s å‚æ•°ä¼šå‘Šè¯‰é“¾æ¥å™¨åœ¨æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶ä¸ç”Ÿæˆç¬¦å·è¡¨å’Œè°ƒè¯•ä¿¡æ¯ã€‚ç¬¦å·è¡¨åŒ…å«äº†æºä»£ç ä¸­çš„ç¬¦å·ï¼ˆå¦‚å˜é‡åã€å‡½æ•°åç­‰ï¼‰å’Œå¯¹åº”çš„åœ°å€ä¿¡æ¯ï¼Œè€Œè°ƒè¯•ä¿¡æ¯åˆ™åŒ…å«äº†ç”¨äºè°ƒè¯•ç¨‹åºçš„ç›¸å…³ä¿¡æ¯ï¼ˆå¦‚æºä»£ç æ–‡ä»¶è·¯å¾„ã€è¡Œå·ç­‰ï¼‰ã€‚ ç¦ç”¨ç¬¦å·è¡¨å’Œè°ƒè¯•ä¿¡æ¯çš„ç”Ÿæˆå¯ä»¥å‡å°æœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥å¢å¼ºä»£ç çš„å®‰å…¨æ€§ï¼Œå› ä¸ºè¿™äº›ä¿¡æ¯å¯¹äºæ”»å‡»è€…æ¥è¯´å¯èƒ½æ˜¯æœ‰ä»·å€¼çš„ã€‚ -X è®¾ç½®åŒ…ä¸­çš„å˜é‡å€¼ -gcflags \"-N -l\" -Nï¼šè¯¥æ ‡å¿—å‘Šè¯‰ç¼–è¯‘å™¨ä¸è¿›è¡Œä¼˜åŒ–ã€‚ä¼˜åŒ–æ˜¯ç¼–è¯‘å™¨å¯¹ä»£ç è¿›è¡Œçš„ä¸€ç³»åˆ—è½¬æ¢å’Œé‡ç»„ï¼Œæ—¨åœ¨æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚é€šè¿‡ç¦ç”¨ä¼˜åŒ–ï¼Œå¯æ‰§è¡Œæ–‡ä»¶çš„ç”Ÿæˆå°†æ›´ç¬¦åˆæºä»£ç çš„ç»“æ„ï¼Œä¾¿äºè°ƒè¯•ã€‚ -lï¼šè¯¥æ ‡å¿—å‘Šè¯‰ç¼–è¯‘å™¨ç¦ç”¨å†…è”ä¼˜åŒ–ã€‚å†…è”ä¼˜åŒ–æ˜¯ç¼–è¯‘å™¨å°†å‡½æ•°è°ƒç”¨æ›¿æ¢ä¸ºå‡½æ•°ä½“å†…å®¹çš„ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œå¯ä»¥å‡å°‘å‡½æ•°è°ƒç”¨çš„å¼€é”€ã€‚ç¦ç”¨å†…è”ä¼˜åŒ–å¯ä»¥ç¡®ä¿å‡½æ•°è°ƒç”¨ä¿æŒä¸å˜ï¼Œä½¿å¾—è°ƒè¯•è¿‡ç¨‹ä¸­å¯ä»¥ç²¾ç¡®åœ°è·Ÿè¸ªå‡½æ•°çš„æ‰§è¡Œã€‚è¿™ä¸¤ä¸ªæ ‡å¿—çš„ç»„åˆ -gcflags \"-N -l\" ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥åœ¨æ„å»ºè¿‡ç¨‹ä¸­ç¦ç”¨ä¼˜åŒ–å’Œå†…è”ä¼˜åŒ–ï¼Œä»è€Œäº§ç”Ÿæ›´å®¹æ˜“è°ƒè¯•çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ -ldflags ç»™ go é“¾æ¥å™¨ä¼ å…¥å‚æ•°ï¼Œå®é™…æ˜¯ç»™ go tool link çš„å‚æ•°ï¼Œå¯ä»¥ç”¨ go tool link --help æŸ¥çœ‹å¯ç”¨çš„å‚æ•°ã€‚ -ldflags '-extldflags \"-static\"' é™æ€ç¼–è¯‘ã€‚å‘Šè¯‰é“¾æ¥å™¨åœ¨æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶æ—¶ä½¿ç”¨é™æ€é“¾æ¥ã€‚é™æ€é“¾æ¥æ„å‘³ç€å°†æ‰€æœ‰çš„ä¾èµ–é¡¹ï¼ˆåŒ…æ‹¬ç³»ç»Ÿåº“ï¼‰éƒ½åŒ…å«åœ¨æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿åœ¨å…¶ä»–ç³»ç»Ÿä¸Šè¿è¡Œæ—¶ä¸éœ€è¦ä¾èµ–å¤–éƒ¨çš„åº“ã€‚ ","date":"2022-03-16","objectID":"/go-build-args/:1:0","series":null,"tags":["golang"],"title":"Go å¸¸ç”¨å‘½ä»¤","uri":"/go-build-args/#å¸¸ç”¨ç¼–è¯‘å‚æ•°"},{"categories":["golang"],"content":" äº¤å‰ç¼–è¯‘ å‚æ•° è¯´æ˜ GOOS GOARCH linux 386 / amd64 / arm darwin 386 / amd64 feedbsd 386 / amd64 windows 386 / amd64 å¯¹äºç¼–è¯‘ç»™ ARM ä½¿ç”¨çš„ Go ç¨‹åºï¼Œéœ€è¦æ ¹æ®å®é™…æƒ…å†µé…ç½®$GOARMï¼Œè¿™æ˜¯ç”¨æ¥æ§åˆ¶ CPU çš„æµ®ç‚¹åå¤„ç†å™¨çš„å‚æ•°ã€‚ $GOARMé»˜è®¤æ˜¯ 6ï¼Œå¯¹äºä¸æ”¯æŒ VFP ä½¿ç”¨è½¯ä»¶è¿ç®—çš„è€ç‰ˆæœ¬ ARM å¹³å°è¦è®¾ç½®æˆ 5ï¼Œæ”¯æŒ VFPv1 çš„è®¾ç½®æˆ 6ï¼Œæ”¯æŒ VFPv3 çš„è®¾ç½®æˆ 7ã€‚ ç¤ºä¾‹ï¼š GOARM=7 GOARCH=arm GOOS=linux go build -v -o fca ","date":"2022-03-16","objectID":"/go-build-args/:2:0","series":null,"tags":["golang"],"title":"Go å¸¸ç”¨å‘½ä»¤","uri":"/go-build-args/#äº¤å‰ç¼–è¯‘"},{"categories":["golang"],"content":" go modå½“è°ˆåˆ° Go è¯­è¨€çš„æ¨¡å—åŒ–ç®¡ç†æ—¶ï¼ŒGo Moduleï¼ˆgo modï¼‰æ˜¯ä¸€ä¸ªé‡è¦çš„å·¥å…·å’Œæ¦‚å¿µã€‚ å†å²ï¼š Go 1.11ï¼ˆ2018å¹´8æœˆå‘å¸ƒï¼‰å¼•å…¥äº† Go Module çš„åŸå§‹æ”¯æŒã€‚å®ƒæä¾›äº†å¯¹ç‰ˆæœ¬åŒ–æ¨¡å—çš„æ”¯æŒï¼Œä»¥è§£å†³ Go è¯­è¨€åŒ…ç®¡ç†çš„é—®é¢˜ã€‚ Go 1.13ï¼ˆ2019å¹´9æœˆå‘å¸ƒï¼‰å¯¹ Go Module è¿›è¡Œäº†ä¸€äº›æ”¹è¿›ï¼Œå¢å¼ºäº†å¯¹ä»£ç†å’Œç§æœ‰æ¨¡å—çš„æ”¯æŒï¼Œå¹¶æä¾›äº†æ›´å¥½çš„æ€§èƒ½å’Œå¯é æ€§ã€‚ ä» Go 1.14ï¼ˆ2020å¹´2æœˆå‘å¸ƒï¼‰å¼€å§‹ï¼ŒGo Module æˆä¸º Go è¯­è¨€é»˜è®¤çš„åŒ…ç®¡ç†å·¥å…·ï¼Œå–ä»£äº†ä¹‹å‰çš„ GOPATH æ¨¡å¼ã€‚ ä¸ºä»€ä¹ˆéœ€è¦ Go Moduleï¼š ç‰ˆæœ¬ç®¡ç†ï¼šGo Module å…è®¸å¼€å‘è€…æ˜ç¡®æŒ‡å®šé¡¹ç›®æ‰€ä½¿ç”¨çš„ä¾èµ–é¡¹çš„ç‰ˆæœ¬ï¼Œä»¥ä¾¿åœ¨ä¸åŒçš„å¼€å‘ç¯å¢ƒä¸­è·å¾—ä¸€è‡´çš„æ„å»ºç»“æœã€‚ æ¨¡å—éš”ç¦»ï¼šæ¯ä¸ªæ¨¡å—éƒ½æœ‰è‡ªå·±çš„ä¾èµ–å…³ç³»ï¼Œä½¿å¾—ä¸åŒçš„é¡¹ç›®å¯ä»¥ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ä¾èµ–é¡¹ï¼Œè€Œä¸ä¼šç›¸äº’å¹²æ‰°ã€‚ æ›´å¥½çš„åŒ…ç®¡ç†ï¼šGo Module ç®¡ç†åŒ…çš„æ–¹å¼æ›´åŠ çµæ´»ã€ç®€å•ï¼Œå¯ä»¥è‡ªåŠ¨è§£æå’Œä¸‹è½½ä¾èµ–é¡¹ï¼Œä½¿å¾—åŒ…çš„å¯¼å…¥å’Œæ›´æ–°æ›´åŠ æ–¹ä¾¿ã€‚ å¸¸è§ä½¿ç”¨å‘½ä»¤ï¼š go mod init \u003cmodule\u003eï¼šåˆå§‹åŒ–ä¸€ä¸ªæ–°çš„æ¨¡å—ï¼Œå¯ä»¥æŒ‡å®šæ¨¡å—çš„åç§°ã€‚ go mod tidyï¼šæ ¹æ®é¡¹ç›®çš„æºç æ–‡ä»¶ï¼Œè‡ªåŠ¨åˆ†æå¹¶æ›´æ–°æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œç§»é™¤ä¸å†ä½¿ç”¨çš„ä¾èµ–é¡¹ã€‚ go mod vendorï¼šå°†ä¾èµ–é¡¹å¤åˆ¶åˆ°é¡¹ç›®çš„ vendor ç›®å½•ä¸‹ï¼Œä»¥ä¾¿ç¦»çº¿ä½¿ç”¨æˆ–ä¸ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸€èµ·ç®¡ç†ã€‚ go mod downloadï¼šä¸‹è½½æ¨¡å—çš„ä¾èµ–é¡¹åˆ°æœ¬åœ°ç¼“å­˜ï¼Œä»¥ä¾¿ç¦»çº¿ä½¿ç”¨ã€‚ go mod graphï¼šæ˜¾ç¤ºæ¨¡å—çš„ä¾èµ–å…³ç³»å›¾ã€‚ go mod editï¼šç¼–è¾‘æ¨¡å—çš„ go.mod æ–‡ä»¶ï¼Œå¯ä»¥æ·»åŠ ã€æ›´æ–°æˆ–ç§»é™¤ä¾èµ–é¡¹ã€‚ go mod verifyï¼šéªŒè¯æ¨¡å—çš„ä¾èµ–é¡¹ï¼Œç¡®ä¿å…¶å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚ go mod listï¼šåˆ—å‡ºé¡¹ç›®çš„æ‰€æœ‰ä¾èµ–é¡¹åŠå…¶ç‰ˆæœ¬ã€‚ go mod why \u003cmodule\u003eï¼šè§£é‡Šä¸ºä»€ä¹ˆéœ€è¦ç‰¹å®šçš„ä¾èµ–é¡¹ã€‚ go mod graphï¼šæ˜¾ç¤ºæ¨¡å—çš„ä¾èµ–å…³ç³»å›¾ï¼Œä»¥å›¾å½¢æ–¹å¼å±•ç¤ºæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ go mod edit -require \u003cmodule\u003e@\u003cversion\u003eï¼šæ‰‹åŠ¨æ·»åŠ æˆ–æ›´æ–°ä¾èµ–é¡¹çš„ç‰ˆæœ¬ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å®šçš„æ¨¡å—å’Œç‰ˆæœ¬å·ã€‚ go mod edit -replace \u003cmodule\u003e=\u003creplacement\u003e@\u003cversion\u003eï¼šç”¨å…¶ä»–æ¨¡å—æ›¿ä»£æŒ‡å®šçš„ä¾èµ–é¡¹ï¼Œç”¨äºæœ¬åœ°å¼€å‘æˆ–æµ‹è¯•ã€‚ go mod tidy -vï¼šä»¥è¯¦ç»†æ¨¡å¼è¿è¡Œ go mod tidy å‘½ä»¤ï¼Œæ˜¾ç¤ºæ“ä½œçš„è¯¦ç»†ä¿¡æ¯ã€‚ go mod download -xï¼šä»¥è¯¦ç»†æ¨¡å¼è¿è¡Œ go mod download å‘½ä»¤ï¼Œæ˜¾ç¤ºä¸‹è½½è¿‡ç¨‹ä¸­çš„è¯¦ç»†ä¿¡æ¯ã€‚ go mod vendor -vï¼šä»¥è¯¦ç»†æ¨¡å¼è¿è¡Œ go mod vendor å‘½ä»¤ï¼Œæ˜¾ç¤ºå¤åˆ¶ä¾èµ–é¡¹åˆ° vendor ç›®å½•çš„è¯¦ç»†ä¿¡æ¯ã€‚ go mod why -m \u003cmodule\u003eï¼šæ˜¾ç¤ºç‰¹å®šæ¨¡å—ä¸ºä»€ä¹ˆè¢«åŒ…å«åœ¨æ¨¡å—å›¾ä¸­ï¼Œè§£é‡Šæ¨¡å—ä¹‹é—´çš„ç›´æ¥å’Œé—´æ¥ä¾èµ–å…³ç³»ã€‚ go mod why -uï¼šæ£€æŸ¥å¯å‡çº§çš„ä¾èµ–é¡¹ï¼Œè§£é‡Šä¸ºä»€ä¹ˆæŸä¸ªä¾èµ–é¡¹éœ€è¦æ›´æ–°åˆ°æ›´é«˜ç‰ˆæœ¬ã€‚ ","date":"2022-03-16","objectID":"/go-build-args/:3:0","series":null,"tags":["golang"],"title":"Go å¸¸ç”¨å‘½ä»¤","uri":"/go-build-args/#go-mod"},{"categories":["golang"],"content":" å‚è€ƒ golangç¼–è¯‘æ—¶çš„å‚æ•°ä¼ é€’ï¼ˆgcflags, ldflagsï¼‰ Golangäº¤å‰ç¼–è¯‘ï¼ˆè·¨å¹³å°ç¼–è¯‘ï¼‰ç®€è¿° äº¤å‰ç¼–è¯‘Goç¨‹åº ARM flags GOARM go modä½¿ç”¨ ","date":"2022-03-16","objectID":"/go-build-args/:4:0","series":null,"tags":["golang"],"title":"Go å¸¸ç”¨å‘½ä»¤","uri":"/go-build-args/#å‚è€ƒ"},{"categories":["web"],"content":"node,nodejs, heap out of memory","date":"2022-03-16","objectID":"/node-oom/","series":null,"tags":["web","node"],"title":"JavaScript heap out of memory","uri":"/node-oom/"},{"categories":["web"],"content":"åˆšåœ¨æ‰“åŒ…é¡¹ç›®æ—¶æ‰§è¡Œ yarn run build æ—¶å‡ºç°äº† oom çš„æƒ…å†µï¼Œå…·ä½“æŠ¥é”™ä¿¡æ¯å¦‚ä¸‹ï¼š æˆ‘çš„ç¯å¢ƒæ˜¯ win10 ä¸“ä¸šç‰ˆ WSLã€‚ è§£å†³åŠæ³•ï¼Œè®¾ç½® export NODE_OPTIONS=--max_old_space_size=4096ï¼Œè®¾ç½®å®Œä¹‹åé‡æ–°æ‰§è¡Œ yarn run build å³å¯ã€‚ ","date":"2022-03-16","objectID":"/node-oom/:0:0","series":null,"tags":["web","node"],"title":"JavaScript heap out of memory","uri":"/node-oom/#"},{"categories":["web"],"content":" å‚è€ƒ Node.js heap out of memory ","date":"2022-03-16","objectID":"/node-oom/:1:0","series":null,"tags":["web","node"],"title":"JavaScript heap out of memory","uri":"/node-oom/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"Google,æµè§ˆå™¨æ’ä»¶,æ’ä»¶ä¸‹è½½","date":"2022-03-16","objectID":"/googe-plugin-download/","series":null,"tags":["chrome"],"title":"å°†googleæµè§ˆå™¨æ’ä»¶ä¸‹è½½åˆ°æœ¬åœ°","uri":"/googe-plugin-download/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"å›½å†…çš„ç½‘ç»œå¤ªå¤æ‚äº†ï¼Œåœ¨ä¸èƒ½è®¿é—® google çš„æƒ…å†µä¸‹ï¼Œç”šè‡³éƒ½ä¸èƒ½æ‰“å¼€ç½‘ä¸Šåº”ç”¨å•†åº—ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹å¼æ¥ä¸‹è½½googleæµè§ˆå™¨æ’ä»¶å¹¶åˆ†äº« ç»™éœ€è¦çš„å°ä¼™ä¼´ã€‚ æˆ‘ä»¬æ‰“å¼€ä»»æ„ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ï¼Œå¦‚ï¼š URL åœ°å€æ ä¸­æœ‰ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œè¿™æ˜¯å”¯ä¸€çš„ï¼Œé€šè¿‡è¿™ä¸ªå­—ç¬¦ä¸²å¯ä»¥è·å–åˆ°æ’ä»¶çš„ä¸‹è½½åœ°å€ï¼Œå¦‚ï¼š ä¸‹è½½åœ°å€ä¸ºï¼š https://clients2.google.com/service/update2/crx?response=redirect\u0026os=win\u0026arch=x64\u0026os_arch=x86_64\u0026nacl_arch=x86-64\u0026prod=chromecrx\u0026prodchannel=\u0026prodversion=77.0.3865.90\u0026lang=zh-CN\u0026acceptformat=crx2,crx3\u0026x=id%3D{XXXX}%26installsource%3Dondemand%26uc å°†ä»¥ä¸Šçš„ {XXXX} æ›¿æ¢ä¸ºæ’ä»¶çš„ IDï¼Œå°±å¯ä»¥ä¸‹è½½åˆ°æœ¬åœ°äº†ã€‚ ä»¥ä¸‹è¿™ä¸ªåœ°å€æ˜¯Moteï¼šè¯­éŸ³ç¬”è®°å’Œåé¦ˆæ’ä»¶çš„ä¸‹è½½åœ°å€ï¼ŒæˆåŠŸä¸‹è½½çš„æ’ä»¶æ˜¯ .crx ç»“å°¾çš„æ–‡ä»¶ã€‚ç›´æ¥æ‹–åˆ°æµè§ˆå™¨ä¸­å°±ä¼šè‡ªåŠ¨å®‰è£…ã€‚ https://clients2.google.com/service/update2/crx?response=redirect\u0026os=win\u0026arch=x64\u0026os_arch=x86_64\u0026nacl_arch=x86-64\u0026prod=chromecrx\u0026prodchannel=\u0026prodversion=77.0.3865.90\u0026lang=zh-CN\u0026acceptformat=crx2,crx3\u0026x=id%3Dajphlblkfpppdpkgokiejbjfohfohhmk%26installsource%3Dondemand%26uc ","date":"2022-03-16","objectID":"/googe-plugin-download/:0:0","series":null,"tags":["chrome"],"title":"å°†googleæµè§ˆå™¨æ’ä»¶ä¸‹è½½åˆ°æœ¬åœ°","uri":"/googe-plugin-download/#"},{"categories":null,"content":"xiaobinqt's personal website,xiaobinqt,ç¨‹åºå‘˜,ç¨‹åºçŒ¿,xiaobinqt@163.com","date":"2022-03-06","objectID":"/about/","series":null,"tags":null,"title":"About Me","uri":"/about/"},{"categories":null,"content":" ç¼˜èµ·å¾ˆå–œæ¬¢ç”µå½±ã€Šäº”äº¿æ¢é•¿é›·æ´›ä¼ ã€‹ ï¼Œç”µå½±ä¸€å¼€å¤´ï¼Œç”±æ½®å·è¿å±…é¦™æ¸¯çš„é’å¹´é›·æ´›ï¼Œä¸ºäº†ç”Ÿè®¡ï¼ŒæŠ•è€ƒé¦™æ¸¯è­¦å¯Ÿï¼Œé¢è¯•å®˜é—®ä»–ï¼Œä¸ºä»€ä¹ˆè¦å½“è­¦å¯Ÿï¼Œä»–å›ç­”ï¼Œä¸ºäº†åƒé¥­ã€‚ ä¸ºäº†åƒé¥­ å¤§å­¦æ¯•ä¸šåï¼Œä¸ºäº†åƒé¥­ï¼Œä¾¿åˆ©ç”¨è‡ªå·±äº†è§£çš„ä¸€ç‚¹ç¼–ç¨‹çŸ¥è¯†å¼€å§‹ç å†œä¹‹è·¯ã€‚å¤§å­¦å­¦çš„æ˜¯é€šä¿¡å·¥ç¨‹ï¼Œéè®¡ç®—æœºä¸“ä¸šï¼Œç¼–ç¨‹ä¹‹è·¯å›°éš¾é‡é‡ï¼Œä½†å¥½æ­¹è‡ªå·±æœ‰è‡ªçŸ¥ä¹‹æ˜ï¼Œç¬¨äººå¤šåŠªåŠ›ï¼Œç›¸ä¿¡é€šè¿‡è‡ªå·±çš„åŠªåŠ›ï¼Œå¯ä»¥è®©è‡ªå·±çš„ç¼–ç¨‹æŠ€æœ¯æ›´åŠ å®Œå–„ã€‚ å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œæƒ³ç€æŠŠè‡ªå·±å·¥ä½œæœŸé—´é‡åˆ°çš„é—®é¢˜ï¼Œå¹³æ—¶çœ‹åˆ°çš„å¥½çš„æ–‡ç« ï¼Œè®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿æŸ¥æ‰¾å’Œæ¸©ä¹ ï¼Œä¹Ÿæ˜¯è®°å½•è‡ªå·±çš„ä¸è¶³å’Œæˆé•¿ï¼Œä¾¿æœ‰äº†è¿™ä¸ªç½‘ç«™ã€‚ å»ºç«™çš„åˆè¡·ä¸æ˜¯ä¸ºäº†ç‚«è€€æ‰€çŸ¥ï¼Œè€Œæ˜¯è®°å½•æ— çŸ¥ã€‚ äººçŸ¥é“å¾—è¶Šå¤šï¼Œå°±ä¼šå‘ç°æ— çŸ¥çš„è¶Šå¤šã€‚æœ‰æ›´å¹¿è¢¤çš„ä¸–ç•Œå¯ä»¥æ¢ç´¢ï¼ŒçœŸæ˜¯è«å¤§çš„å¿«ä¹å‘€ï¼ ","date":"2022-03-06","objectID":"/about/:1:0","series":null,"tags":null,"title":"About Me","uri":"/about/#ç¼˜èµ·"},{"categories":null,"content":" å…³äºä½œè€… ğŸ‘¨â€ğŸ’» åŠè·¯å‡ºå®¶çš„ç¨‹åºçŒ¿ï¼ŒæŠ€æœ¯ä¸ç²¾ï¼Œä½†æœ‰ä¸€ä¸ªæˆä¸ºæŠ€æœ¯å¤§æ‹¿çš„æ¢¦æƒ³ã€‚ ğŸ¤ª æ‹–å»¶ç—‡æ‚£è€…ï¼ŒæŒç»­æ€§æ··åƒç­‰æ­»ï¼Œé—´æ¥æ€§è¸Œèº‡æ»¡å¿—ã€‚ ğŸ’• çˆ±å¥½è¯»ä¹¦ï¼Œä½†æ€»æ˜¯è¾¹è¯»è¾¹å¿˜ ğŸ˜¢ã€‚ ","date":"2022-03-06","objectID":"/about/:2:0","series":null,"tags":null,"title":"About Me","uri":"/about/#å…³äºä½œè€…"},{"categories":null,"content":" èŒä¸šç”Ÿæ¶¯2017/4 - 2019/3 è¥¿å®‰ç»´å®¢è½¯ä»¶ç§‘æŠ€æœ‰é™å…¬å¸ä»äº‹ PHP å¼€å‘ã€‚ 2019/4 - 2021/3 åŒ—äº¬è…¾è®¯å¤–åŒ…ä»äº‹ PHP å’Œ Go å¼€å‘ã€‚ 2021/4 - è‡³ä»Š å¸Œäº‘ç§‘æŠ€(åŒ—äº¬)æœ‰é™å…¬å¸ä»äº‹ Go å¼€å‘ã€‚ ç‰ˆæƒè¯´æ˜ æœ¬ç«™å›¾ç‰‡å’Œæ–‡å­—ï¼Œé™¤åŸåˆ›ä½œå“ä¹‹å¤–ï¼Œéƒ¨åˆ†æ¥è‡ªäº’è”ç½‘ã€‚å¯¹äºè½¬è½½å’Œæ–‡ç« å¤§éƒ¨åˆ†å†…å®¹æ¥è‡ªå¤šä½ä½œè€…çš„æ–‡ç« ï¼Œæœ¬ç«™éƒ½æ ‡è¯†æœ‰ã€è½¬è½½ã€‘å¹¶åœ¨æ–‡æœ«æ ‡æ³¨äº†å‚è€ƒåœ°å€ã€‚ æ­¤ç±»èµ„æºçš„åŸç‰ˆæƒæ‰€æœ‰è€…å¯åœ¨ä»»ä½•æ—¶å€™ã€ä»¥ä»»ä½•ç†ç”±è¦æ±‚æœ¬ç«™åœæ­¢ä½¿ç”¨ï¼Œå…¶ä¸­åŒ…æ‹¬è¢«æœ¬ç«™ç¼–è¾‘ï¼ˆæ¯”å¦‚åŠ æ³¨è¯´æ˜ï¼‰è¿‡çš„èµ„æºï¼Œ è”ç³»æ–¹å¼è§ä¸‹æ–‡ã€‚ ","date":"2022-03-06","objectID":"/about/:3:0","series":null,"tags":null,"title":"About Me","uri":"/about/#èŒä¸šç”Ÿæ¶¯"},{"categories":null,"content":" è”ç³»æ–¹å¼ é‚®ç®±ï¼šxiaobinqt@163.com Githubï¼š@xiaobinqt å¾®ä¿¡ï¼š ä¸ªäººå¾®ä¿¡ ","date":"2022-03-06","objectID":"/about/:4:0","series":null,"tags":null,"title":"About Me","uri":"/about/#è”ç³»æ–¹å¼"},{"categories":["web"],"content":"Ajax åœ¨è¯·æ±‚æ—¶æºå¸¦ cookie ä¿¡æ¯,cookie ä¿¡æ¯ä¼šè¢«æ·»åŠ åˆ°è¯·æ±‚å¤´ä¸­,Cookie","date":"2022-03-01","objectID":"/ajax-req-add-cookie/","series":null,"tags":["web"],"title":"ajax åœ¨è¯·æ±‚æ—¶æºå¸¦ cookie ä¿¡æ¯","uri":"/ajax-req-add-cookie/"},{"categories":["web"],"content":"æœ€è¿‘æœ‰ä¸ªéœ€æ±‚åœ¨ä½¿ç”¨ $.ajax æ—¶éœ€è¦æŠŠ cookie ä¿¡æ¯ä¹Ÿå¸¦ç€ï¼Œgoogle ä¸‹å‘ç°å¯ä»¥è¿™ä¹ˆå†™ï¼š $.ajax({ url: \"/nodered/nodes\", headers: { Accept: \"text/html\", }, xhrFields: { withCredentials: true // æºå¸¦ cookie ä¿¡æ¯ }, success: function (data) { console.log(data) $(\"#red-ui-palette-container\").html(data) }, error: function (jqXHR) { console.log(jqXHR) } }); ","date":"2022-03-01","objectID":"/ajax-req-add-cookie/:0:0","series":null,"tags":["web"],"title":"ajax åœ¨è¯·æ±‚æ—¶æºå¸¦ cookie ä¿¡æ¯","uri":"/ajax-req-add-cookie/#"},{"categories":["golang"],"content":"running gcc failed: exit status 1","date":"2022-02-10","objectID":"/build-running-gcc-failed/","series":null,"tags":["golang","build"],"title":"running gcc failed: exit status 1","uri":"/build-running-gcc-failed/"},{"categories":["golang"],"content":"ä»Šå¤©åœ¨ç¼–è¯‘ go é¡¹ç›®æ—¶å‡ºç°äº†å¦‚ä¸‹é”™è¯¯ï¼š /usr/local/go/pkg/tool/linux_amd64/link: running gcc failed: exit status 1 /usr/bin/ld: cannot find -lpthread /usr/bin/ld: cannot find -lc collect2: error: ld returned 1 exit status è§£å†³åŠæ³•ï¼š yum install glibc-static.x86_64 -y ","date":"2022-02-10","objectID":"/build-running-gcc-failed/:0:0","series":null,"tags":["golang","build"],"title":"running gcc failed: exit status 1","uri":"/build-running-gcc-failed/#"},{"categories":["golang"],"content":"xiaobinqt,å®ç°ä¸‹è½½æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ ,æ–­ç‚¹ç»­ä¼ ,go å®ç°ä¸‹è½½æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ ","date":"2022-01-21","objectID":"/go-breakpoint-resume/","series":null,"tags":["golang","æ–­ç‚¹ç»­ä¼ "],"title":"Go å®ç°ä¸‹è½½æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ ","uri":"/go-breakpoint-resume/"},{"categories":["golang"],"content":" æ–­ç‚¹ç»­ä¼ æ–­ç‚¹ç»§ä¼ å°±æ˜¯ä¸‹è½½çš„æ–‡ä»¶å¯ä»¥åœ¨ä½ ä¸‹è½½äº†ä¸€åŠçš„æ—¶å€™æš‚åœï¼Œä¸‹ä¸€æ¬¡ä¸‹è½½çš„æ—¶å€™å¯ä»¥ä»ä½ æš‚åœçš„åœ°æ–¹ç»§ç»­ä¸‹è½½ï¼Œä¸ç”¨ä»å¤´å¼€å§‹ä¸‹è½½ã€‚ ","date":"2022-01-21","objectID":"/go-breakpoint-resume/:1:0","series":null,"tags":["golang","æ–­ç‚¹ç»­ä¼ "],"title":"Go å®ç°ä¸‹è½½æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ ","uri":"/go-breakpoint-resume/#æ–­ç‚¹ç»­ä¼ "},{"categories":["golang"],"content":" æœåŠ¡ç«¯","date":"2022-01-21","objectID":"/go-breakpoint-resume/:2:0","series":null,"tags":["golang","æ–­ç‚¹ç»­ä¼ "],"title":"Go å®ç°ä¸‹è½½æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ ","uri":"/go-breakpoint-resume/#æœåŠ¡ç«¯"},{"categories":["golang"],"content":" martini å®ç°martini æ¡†æ¶å®ç°ğŸ‘‡ package main import ( \"bufio\" \"crypto/md5\" \"encoding/hex\" \"fmt\" \"io\" \"net/http\" \"os\" \"strconv\" \"strings\" \"github.com/go-martini/martini\" \"github.com/pkg/errors\" ) // å¤§æ–‡ä»¶ var path = \"/mnt/d/code-server-3.11.0-linux-amd64.tar.gz\" func download(w http.ResponseWriter, r *http.Request) { filename := \"download\" file, err := os.Open(path) if err != nil { err = errors.Wrapf(err, \"download openfile err\") w.WriteHeader(500) w.Write([]byte(err.Error())) return } defer file.Close() info, err := file.Stat() if err != nil { err = errors.Wrapf(err, \"download stat err\") w.WriteHeader(500) w.Write([]byte(err.Error())) return } md5sum, err := MD5sum(file) if err != nil { err = errors.Wrapf(err, \"download md5sum err\") w.WriteHeader(500) w.Write([]byte(err.Error())) return } fmt.Println(\"md5sum = \", md5sum) w.Header().Add(\"Accept-Ranges\", \"bytes\") w.Header().Add(\"Content-Disposition\", \"attachment; filename=\"+filename) w.Header().Add(\"Content-Md5\", md5sum) var start, end int64 if r := r.Header.Get(\"Range\"); r != \"\" { if strings.Contains(r, \"bytes=\") \u0026\u0026 strings.Contains(r, \"-\") { fmt.Sscanf(r, \"bytes=%d-%d\", \u0026start, \u0026end) if end == 0 { end = info.Size() - 1 } // start ä» 0 å¼€å§‹,æ‰€ä»¥ end = info.Size() ä¹Ÿæ˜¯æœ‰é—®é¢˜çš„ï¼Œend æœ€å¤§æ˜¯ `info.Size() - 1` if start \u003e end || start \u003c 0 || end \u003c 0 || end \u003e= info.Size() { w.WriteHeader(http.StatusRequestedRangeNotSatisfiable) w.Write([]byte(\"å‚æ•°é”™è¯¯....\")) return } w.Header().Add(\"Content-Length\", strconv.FormatInt(end-start+1, 10)) w.Header().Add(\"Content-Range\", fmt.Sprintf(\"bytes %d-%d/%d\", start, end, info.Size())) w.Header().Set(\"Content-Type\", \"application/octet-stream\") w.WriteHeader(http.StatusPartialContent) } else { w.WriteHeader(400) w.Write([]byte(\"header Range\")) return } } else { w.Header().Add(\"Content-Length\", strconv.FormatInt(info.Size(), 10)) w.Header().Set(\"Content-Type\", \"application/octet-stream\") start = 0 end = info.Size() - 1 } _, err = file.Seek(start, 0) if err != nil { err = errors.Wrapf(err, \"file seek err\") w.WriteHeader(500) w.Write([]byte(err.Error())) return } n := 2048 buf := make([]byte, n) for { if end-start+1 \u003c int64(n) { n = int(end - start + 1) } _, err = file.Read(buf[:n]) if err != nil { if err != io.EOF { err = errors.Wrapf(err, \"io.Eof err\") w.WriteHeader(500) w.Write([]byte(err.Error())) return } return } _, err = w.Write(buf[:n]) if err != nil { err = errors.Wrapf(err, \"Writer.Write err\") w.WriteHeader(500) w.Write([]byte(err.Error())) return } start += int64(n) if start \u003e= end+1 { return } } } func MD5sum(file *os.File) (string, error) { hash := md5.New() for buf, reader := make([]byte, 65536), bufio.NewReader(file); ; { n, err := reader.Read(buf) if err != nil { if err == io.EOF { break } return \"\", err } hash.Write(buf[:n]) } return hex.EncodeToString(hash.Sum(nil)), nil } func main() { route := martini.Classic() route.Get(\"/download\", download) route.RunOnAddr(\":8080\") } ","date":"2022-01-21","objectID":"/go-breakpoint-resume/:2:1","series":null,"tags":["golang","æ–­ç‚¹ç»­ä¼ "],"title":"Go å®ç°ä¸‹è½½æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ ","uri":"/go-breakpoint-resume/#martini-å®ç°"},{"categories":["golang"],"content":" å®¢æˆ·ç«¯ä¸‹è½½ package main import ( \"bufio\" \"fmt\" \"io\" \"net/http\" \"net/url\" \"os\" \"os/exec\" \"strconv\" \"github.com/pkg/errors\" \"github.com/sirupsen/logrus\" ) func DownloadDownloadArtifact(downloadPath, surl string) (err error) { dfn := downloadPath var ( file *os.File size int64 headerMd5sum, downloadMd5sum string ) file, err = os.OpenFile(dfn, os.O_RDWR|os.O_CREATE, 0644) defer file.Close() if err != nil { err = errors.Wrapf(err, \"download openfile err\") return err } stat, _ := file.Stat() size = stat.Size() sk, err := file.Seek(size, 0) if err != nil { err = errors.Wrapf(err, \"seek err\") return err } if sk != size { err = fmt.Errorf(\"seek length not equal file size,seek=%d,size=%d\", sk, size) logrus.Error(err.Error()) return err } request := http.Request{} request.Method = http.MethodGet if size != 0 { header := http.Header{} header.Set(\"Range\", \"bytes=\"+strconv.FormatInt(size, 10)+\"-\") request.Header = header } parse, _ := url.Parse(surl) request.URL = parse resp, err := http.DefaultClient.Do(\u0026request) //resp, err := http.DefaultClient.Do(\u0026request) defer resp.Body.Close() if err != nil { err = errors.Wrapf(err, \"client do err\") logrus.Error(err.Error()) return err } headerMd5sum = resp.Header.Get(\"Content-Md5\") if headerMd5sum == \"\" { return fmt.Errorf(\"resp header md5sum empty\") } body := resp.Body writer := bufio.NewWriter(file) bs := make([]byte, 1024*1024) for { var read int read, err = body.Read(bs) if err != nil { if err != io.EOF { err = errors.Wrapf(err, \"body read not io eof\") logrus.Error(err.Error()) return err } if err == io.EOF \u0026\u0026 resp.StatusCode != http.StatusOK { err = nil return } if read != 0 { _, err = writer.Write(bs[:read]) if err != nil { err = errors.Wrapf(err, \"writer write err\") return err } } err = nil break } _, err = writer.Write(bs[:read]) if err != nil { err = errors.Wrapf(err, \"writer write err\") return err } } if err != nil { return err } err = writer.Flush() if err != nil { err = errors.Wrapf(err, \"writer.Flush err\") return err } // æ¯”å¯¹ md5 æ˜¯å¦ä¸€è‡´ downloadMd5sum, err = md5sum(downloadPath) if err != nil { err = errors.Wrapf(err, \"get download md5dum err\") logrus.Error(err.Error()) // md5 ä¸ä¸€è‡´ç›´æ¥åˆ é™¤ os.Remove(downloadPath) return err } logrus.Debugf(\"downloadMd5sum: %s,headerMd5sum:%s \", downloadMd5sum, headerMd5sum) if downloadMd5sum == headerMd5sum { return nil } // é”™è¯¯äº†åˆ é™¤ tar åŒ… os.Remove(downloadPath) return fmt.Errorf(\"download md5sum not equal header md5dum\") } func md5sum(downloadPath string) (string, error) { cmdStr := fmt.Sprintf(\"printf $(md5sum %s)\", downloadPath) cmdOutput, err := exec.Command(\"/bin/sh\", \"-c\", cmdStr).CombinedOutput() logrus.Debugf(\"md5sum: %s \", cmdStr) if err != nil { err = errors.Wrapf(err, \"md5sum [%s] exec.Command err\", cmdStr) logrus.Error(err.Error()) return \"\", err } return string(cmdOutput), nil } func main() { err := DownloadDownloadArtifact(\"/mnt/d/tmp/xxx.111.test\", \"http://127.0.0.1:8080/download\") if err != nil { fmt.Println(\"download err\", err.Error()) return } fmt.Println(\"success..........\") } ","date":"2022-01-21","objectID":"/go-breakpoint-resume/:3:0","series":null,"tags":["golang","æ–­ç‚¹ç»­ä¼ "],"title":"Go å®ç°ä¸‹è½½æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ ","uri":"/go-breakpoint-resume/#å®¢æˆ·ç«¯ä¸‹è½½"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":"ä¸€è‡´æ€§Hash,hashç®—æ³•,æ•°æ®å€¾æ–œ","date":"2022-01-15","objectID":"/consistent-hash/","series":["reproduce"],"tags":["ç®—æ³•","hash"],"title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","uri":"/consistent-hash/"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" å¦‚ä½•åˆ†é…è¯·æ±‚å¤§å¤šæ•°ç½‘ç«™èƒŒåè‚¯å®šä¸æ˜¯åªæœ‰ä¸€å°æœåŠ¡å™¨æä¾›æœåŠ¡ï¼Œå› ä¸ºå•æœºçš„å¹¶å‘é‡å’Œæ•°æ®é‡éƒ½æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥éƒ½ä¼šç”¨å¤šå°æœåŠ¡å™¨æ„æˆé›†ç¾¤æ¥å¯¹å¤–æä¾›æœåŠ¡ã€‚ä½†æ˜¯è¿™æ ·çš„è¯ï¼Œé—®é¢˜å°±æ¥äº†ï¼Œç°åœ¨æœ‰é‚£ä¹ˆå¤šä¸ªèŠ‚ç‚¹ï¼ˆåæ–‡ç»Ÿç§°æœåŠ¡å™¨ä¸ºèŠ‚ç‚¹ï¼‰ï¼Œè¦å¦‚ä½•åˆ†é…å®¢æˆ·ç«¯çš„è¯·æ±‚å‘¢â“ å¤§é‡è¯·æ±‚ å…¶å®è¿™ä¸ªé—®é¢˜å°±æ˜¯ã€Œè´Ÿè½½å‡è¡¡é—®é¢˜ã€ã€‚è§£å†³è´Ÿè½½å‡è¡¡é—®é¢˜çš„ç®—æ³•å¾ˆå¤šï¼Œä¸åŒçš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œå¯¹åº”çš„å°±æ˜¯ä¸åŒçš„åˆ†é…ç­–ç•¥ï¼Œé€‚åº”çš„ä¸šåŠ¡åœºæ™¯ä¹Ÿä¸åŒã€‚ æœ€ç®€å•çš„æ–¹å¼ï¼Œå¼•å…¥ä¸€ä¸ªä¸­é—´çš„è´Ÿè½½å‡è¡¡å±‚ï¼Œè®©å®ƒå°†å¤–ç•Œçš„è¯·æ±‚ã€Œè½®æµã€çš„è½¬å‘ç»™å†…éƒ¨çš„é›†ç¾¤ã€‚æ¯”å¦‚é›†ç¾¤æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼Œå¤–ç•Œè¯·æ±‚æœ‰ 3 ä¸ªï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šå¤„ç† 1 ä¸ªè¯·æ±‚ï¼Œè¾¾åˆ°äº†åˆ†é…è¯·æ±‚çš„ç›®çš„ã€‚ è´Ÿè½½å‡è¡¡å±‚ è€ƒè™‘åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„ç¡¬ä»¶é…ç½®æœ‰æ‰€åŒºåˆ«ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥æƒé‡å€¼ï¼Œå°†ç¡¬ä»¶é…ç½®æ›´å¥½çš„èŠ‚ç‚¹çš„æƒé‡å€¼è®¾é«˜ï¼Œç„¶åæ ¹æ®å„ä¸ªèŠ‚ç‚¹çš„æƒé‡å€¼ï¼ŒæŒ‰ç…§ä¸€å®šæ¯”é‡åˆ†é…åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œè®©ç¡¬ä»¶é…ç½®æ›´å¥½çš„èŠ‚ç‚¹æ‰¿æ‹…æ›´å¤šçš„è¯·æ±‚ï¼Œè¿™ç§ç®—æ³•å«åšåŠ æƒè½®è¯¢ã€‚ åŠ æƒè½®è¯¢ç®—æ³•ä½¿ç”¨åœºæ™¯æ˜¯å»ºç«‹åœ¨æ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®éƒ½æ˜¯ç›¸åŒçš„å‰æã€‚æ‰€ä»¥ï¼Œæ¯æ¬¡è¯»æ•°æ®çš„è¯·æ±‚ï¼Œè®¿é—®ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹éƒ½èƒ½å¾—åˆ°ç»“æœã€‚ä½†æ˜¯ï¼ŒåŠ æƒè½®è¯¢ç®—æ³•æ˜¯æ— æ³•åº”å¯¹ã€Œåˆ†å¸ƒå¼ç³»ç»Ÿã€çš„ï¼Œå› ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®æ˜¯ä¸åŒçš„ã€‚ å½“æˆ‘ä»¬æƒ³æé«˜ç³»ç»Ÿçš„å®¹é‡ï¼Œå°±ä¼šå°†æ•°æ®æ°´å¹³åˆ‡åˆ†åˆ°ä¸åŒçš„èŠ‚ç‚¹æ¥å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯å°†æ•°æ®åˆ†å¸ƒåˆ°äº†ä¸åŒçš„èŠ‚ç‚¹ã€‚æ¯”å¦‚ä¸€ä¸ªåˆ†å¸ƒå¼ KVï¼ˆkey-valuï¼‰ ç¼“å­˜ç³»ç»Ÿï¼ŒæŸä¸ª key åº”è¯¥åˆ°å“ªä¸ªæˆ–è€…å“ªäº›èŠ‚ç‚¹ä¸Šè·å¾—ï¼Œåº”è¯¥æ˜¯ç¡®å®šçš„ï¼Œä¸æ˜¯è¯´ä»»æ„è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å¾—åˆ°ç¼“å­˜ç»“æœã€‚ å› æ­¤ï¼Œæˆ‘ä»¬è¦æƒ³ä¸€ä¸ªèƒ½åº”å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿçš„è´Ÿè½½å‡è¡¡ç®—æ³•ã€‚ ","date":"2022-01-15","objectID":"/consistent-hash/:1:0","series":["reproduce"],"tags":["ç®—æ³•","hash"],"title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","uri":"/consistent-hash/#å¦‚ä½•åˆ†é…è¯·æ±‚"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" ä½¿ç”¨å“ˆå¸Œç®—æ³•æœ‰ä»€ä¹ˆé—®é¢˜æœ‰çš„åŒå­¦å¯èƒ½å¾ˆå¿«å°±æƒ³åˆ°äº†ï¼šå“ˆå¸Œç®—æ³•ã€‚å› ä¸ºå¯¹åŒä¸€ä¸ªå…³é”®å­—è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œæ¯æ¬¡è®¡ç®—éƒ½æ˜¯ç›¸åŒçš„å€¼ï¼Œè¿™æ ·å°±å¯ä»¥å°†æŸä¸ª key ç¡®å®šåˆ°ä¸€ä¸ªèŠ‚ç‚¹äº†ï¼Œå¯ä»¥æ»¡è¶³åˆ†å¸ƒå¼ç³»ç»Ÿçš„è´Ÿè½½å‡è¡¡éœ€æ±‚ã€‚ å“ˆå¸Œç®—æ³•æœ€ç®€å•çš„åšæ³•å°±æ˜¯è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œæ¯”å¦‚åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼ŒåŸºäºhash(key) % 3å…¬å¼å¯¹æ•°æ®è¿›è¡Œäº†æ˜ å°„ã€‚å¦‚æœå®¢æˆ·ç«¯è¦è·å–æŒ‡å®š key çš„æ•°æ®ï¼Œé€šè¿‡ä¸‹é¢çš„å…¬å¼å¯ä»¥å®šä½èŠ‚ç‚¹ï¼š hash(key) % 3 å¦‚æœç»è¿‡ä¸Šé¢è¿™ä¸ªå…¬å¼è®¡ç®—åå¾—åˆ°çš„å€¼æ˜¯ 0ï¼Œå°±è¯´æ˜è¯¥ key éœ€è¦å»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹è·å–ã€‚ ä½†æ˜¯æœ‰ä¸€ä¸ªå¾ˆè‡´å‘½çš„é—®é¢˜ï¼Œå¦‚æœèŠ‚ç‚¹æ•°é‡å‘ç”Ÿäº†å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯åœ¨å¯¹ç³»ç»Ÿåšæ‰©å®¹æˆ–è€…ç¼©å®¹æ—¶ï¼Œå¿…é¡»è¿ç§»æ”¹å˜äº†æ˜ å°„å…³ç³»çš„æ•°æ®ï¼Œå¦åˆ™ä¼šå‡ºç°æŸ¥è¯¢ä¸åˆ°æ•°æ®çš„é—®é¢˜ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”± Aã€Bã€C ä¸‰ä¸ªèŠ‚ç‚¹ç»„æˆåˆ†å¸ƒå¼ KV ç¼“å­˜ç³»ç»Ÿï¼ŒåŸºäºè®¡ç®—å…¬å¼hash(key) % 3å°†æ•°æ®è¿›è¡Œäº†æ˜ å°„ï¼Œæ¯ä¸ªèŠ‚ç‚¹å­˜å‚¨äº†ä¸åŒçš„æ•°æ®ï¼š ç°åœ¨æœ‰ 3 ä¸ªæŸ¥è¯¢ key çš„è¯·æ±‚ï¼Œåˆ†åˆ«æŸ¥è¯¢key-01ï¼Œkey-02ï¼Œkey-03 çš„æ•°æ®ï¼Œè¿™ä¸‰ä¸ª key åˆ†åˆ«ç»è¿‡hash()å‡½æ•°è®¡ç®—åçš„å€¼ä¸ºhash( key-01) = 6ã€hash( key-02) = 7ã€hash(key-03) = 8ï¼Œç„¶åå†å¯¹è¿™äº›å€¼è¿›è¡Œå–æ¨¡è¿ç®—ã€‚ é€šè¿‡è¿™æ ·çš„å“ˆå¸Œç®—æ³•ï¼Œæ¯ä¸ª key éƒ½å¯ä»¥å®šä½åˆ°å¯¹åº”çš„èŠ‚ç‚¹ã€‚ å½“ 3 ä¸ªèŠ‚ç‚¹ä¸èƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚äº†ï¼Œè¿™æ—¶æˆ‘ä»¬å¢åŠ äº†ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹çš„æ•°é‡ä» 3 å˜åŒ–ä¸º 4ï¼Œæ„å‘³å–æ¨¡å“ˆå¸Œå‡½æ•°ä¸­åŸºæ•°çš„å˜åŒ–ï¼Œè¿™æ ·ä¼šå¯¼è‡´å¤§éƒ¨åˆ†æ˜ å°„å…³ç³»æ”¹å˜ï¼Œå¦‚ä¸‹å›¾ğŸ‘‡ æ¯”å¦‚ï¼Œä¹‹å‰çš„hash(key-01) % 3 = 0ï¼Œå°±å˜æˆäº†hash(key-01) % 4 = 2ï¼ŒæŸ¥è¯¢key-01æ•°æ®æ—¶ï¼Œå¯»å€åˆ°äº†èŠ‚ç‚¹ Cï¼Œè€Œkey-01çš„æ•°æ®æ˜¯å­˜å‚¨åœ¨èŠ‚ç‚¹ A ä¸Šçš„ï¼Œä¸æ˜¯åœ¨èŠ‚ç‚¹ Cï¼Œæ‰€ä»¥ä¼šæŸ¥è¯¢ä¸åˆ°æ•°æ®ã€‚ åŒæ ·çš„é“ç†ï¼Œå¦‚æœæˆ‘ä»¬å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿè¿›è¡Œç¼©å®¹ï¼Œæ¯”å¦‚ç§»é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿä¼šå› ä¸ºå–æ¨¡å“ˆå¸Œå‡½æ•°ä¸­åŸºæ•°çš„å˜åŒ–ï¼Œå¯èƒ½å‡ºç°æŸ¥è¯¢ä¸åˆ°æ•°æ®çš„é—®é¢˜ã€‚ è¦è§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•ï¼Œå°±éœ€è¦æˆ‘ä»¬è¿›è¡Œè¿ç§»æ•°æ®ï¼Œæ¯”å¦‚èŠ‚ç‚¹çš„æ•°é‡ä» 3 å˜åŒ–ä¸º 4 æ—¶ï¼Œè¦åŸºäºæ–°çš„è®¡ç®—å…¬å¼hash(key) % 4ï¼Œé‡æ–°å¯¹æ•°æ®å’ŒèŠ‚ç‚¹åšæ˜ å°„ã€‚ å‡è®¾æ€»æ•°æ®æ¡æ•°ä¸º Mï¼Œå“ˆå¸Œç®—æ³•åœ¨é¢å¯¹èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶ï¼Œæœ€åæƒ…å†µä¸‹æ‰€æœ‰æ•°æ®éƒ½éœ€è¦è¿ç§»ï¼Œæ‰€ä»¥å®ƒçš„æ•°æ®è¿ç§»è§„æ¨¡æ˜¯O(M)ï¼Œè¿™æ ·æ•°æ®çš„è¿ç§»æˆæœ¬å¤ªé«˜äº†ã€‚ æ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥è¦é‡æ–°æƒ³ä¸€ä¸ªæ–°çš„ç®—æ³•ï¼Œæ¥é¿å…åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨æ‰©å®¹æˆ–è€…ç¼©å®¹æ—¶ï¼Œå‘ç”Ÿè¿‡å¤šçš„æ•°æ®è¿ç§»ã€‚ ","date":"2022-01-15","objectID":"/consistent-hash/:2:0","series":["reproduce"],"tags":["ç®—æ³•","hash"],"title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","uri":"/consistent-hash/#ä½¿ç”¨å“ˆå¸Œç®—æ³•æœ‰ä»€ä¹ˆé—®é¢˜"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æœ‰ä»€ä¹ˆé—®é¢˜ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å°±å¾ˆå¥½åœ°è§£å†³äº†åˆ†å¸ƒå¼ç³»ç»Ÿåœ¨æ‰©å®¹æˆ–è€…ç¼©å®¹æ—¶ï¼Œå‘ç”Ÿè¿‡å¤šçš„æ•°æ®è¿ç§»çš„é—®é¢˜ã€‚ ä¸€è‡´å“ˆå¸Œç®—æ³•ä¹Ÿç”¨äº†å–æ¨¡è¿ç®—ï¼Œä½†ä¸å“ˆå¸Œç®—æ³•ä¸åŒçš„æ˜¯ï¼Œå“ˆå¸Œç®—æ³•æ˜¯å¯¹èŠ‚ç‚¹çš„æ•°é‡è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œè€Œä¸€è‡´å“ˆå¸Œç®—æ³•æ˜¯å¯¹2^32è¿›è¡Œå–æ¨¡è¿ç®—ï¼Œæ˜¯ä¸€ä¸ªå›ºå®šçš„å€¼ã€‚ æˆ‘ä»¬å¯ä»¥æŠŠä¸€è‡´å“ˆå¸Œç®—æ³•æ˜¯å¯¹2^32è¿›è¡Œå–æ¨¡è¿ç®—çš„ç»“æœå€¼ç»„ç»‡æˆä¸€ä¸ªåœ†ç¯ï¼Œå°±åƒé’Ÿè¡¨ä¸€æ ·ã€‚é’Ÿè¡¨çš„åœ†å¯ä»¥ç†è§£æˆç”± 60 ä¸ªç‚¹ç»„æˆçš„åœ†ï¼Œè€Œæ­¤å¤„æˆ‘ä»¬æŠŠè¿™ä¸ªåœ†æƒ³è±¡æˆç”±2^32ä¸ªç‚¹ç»„æˆçš„åœ†ï¼Œè¿™ä¸ªåœ†ç¯è¢«ç§°ä¸ºå“ˆå¸Œç¯ï¼Œå¦‚ä¸‹å›¾ğŸ‘‡ å“ˆå¸Œç¯ ä¸€è‡´æ€§å“ˆå¸Œè¦è¿›è¡Œä¸¤æ­¥å“ˆå¸Œï¼š ç¬¬ä¸€æ­¥ï¼šå¯¹å­˜å‚¨èŠ‚ç‚¹è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œä¹Ÿå°±æ˜¯å¯¹å­˜å‚¨èŠ‚ç‚¹åšå“ˆå¸Œæ˜ å°„ï¼Œæ¯”å¦‚æ ¹æ®èŠ‚ç‚¹çš„ IP åœ°å€è¿›è¡Œå“ˆå¸Œï¼› ç¬¬äºŒæ­¥ï¼šå½“å¯¹æ•°æ®è¿›è¡Œå­˜å‚¨æˆ–è®¿é—®æ—¶ï¼Œå¯¹æ•°æ®è¿›è¡Œå“ˆå¸Œæ˜ å°„ï¼› æ‰€ä»¥ï¼Œä¸€è‡´æ€§å“ˆå¸Œæ˜¯æŒ‡å°†ã€Œå­˜å‚¨èŠ‚ç‚¹ã€å’Œã€Œæ•°æ®ã€éƒ½æ˜ å°„åˆ°ä¸€ä¸ªé¦–å°¾ç›¸è¿çš„å“ˆå¸Œç¯ä¸Šã€‚ é—®é¢˜æ¥äº†ï¼Œå¯¹ã€Œæ•°æ®ã€è¿›è¡Œå“ˆå¸Œæ˜ å°„å¾—åˆ°ä¸€ä¸ªç»“æœè¦æ€ä¹ˆæ‰¾åˆ°å­˜å‚¨è¯¥æ•°æ®çš„èŠ‚ç‚¹å‘¢â“ ç­”æ¡ˆæ˜¯ï¼Œæ˜ å°„çš„ç»“æœå€¼å¾€é¡ºæ—¶é’ˆçš„æ–¹å‘æ‰¾åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯å­˜å‚¨è¯¥æ•°æ®çš„èŠ‚ç‚¹ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæœ‰ 3 ä¸ªèŠ‚ç‚¹ç»è¿‡å“ˆå¸Œè®¡ç®—ï¼Œæ˜ å°„åˆ°äº†å¦‚ä¸‹å›¾çš„ä½ç½®ï¼š æ¥ç€ï¼Œå¯¹è¦æŸ¥è¯¢çš„key-01è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œç¡®å®šæ­¤key-01æ˜ å°„åœ¨å“ˆå¸Œç¯çš„ä½ç½®ï¼Œç„¶åä»è¿™ä¸ªä½ç½®å¾€é¡ºæ—¶é’ˆçš„æ–¹å‘æ‰¾åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå°±æ˜¯å­˜å‚¨è¯¥key-01æ•°æ®çš„èŠ‚ç‚¹ã€‚ æ¯”å¦‚ï¼Œä¸‹å›¾ä¸­çš„key-01æ˜ å°„çš„ä½ç½®ï¼Œå¾€é¡ºæ—¶é’ˆçš„æ–¹å‘æ‰¾åˆ°ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å°±æ˜¯èŠ‚ç‚¹ Aã€‚ æ‰€ä»¥ï¼Œå½“éœ€è¦å¯¹æŒ‡å®š key çš„å€¼è¿›è¡Œè¯»å†™çš„æ—¶å€™ï¼Œè¦é€šè¿‡ä¸‹é¢ 2 æ­¥è¿›è¡Œå¯»å€ï¼š é¦–å…ˆï¼Œå¯¹ key è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œç¡®å®šæ­¤ key åœ¨ç¯ä¸Šçš„ä½ç½®ï¼› ç„¶åï¼Œä»è¿™ä¸ªä½ç½®æ²¿ç€é¡ºæ—¶é’ˆæ–¹å‘èµ°ï¼Œé‡åˆ°çš„ç¬¬ä¸€èŠ‚ç‚¹å°±æ˜¯å­˜å‚¨ key çš„èŠ‚ç‚¹ã€‚ çŸ¥é“äº†ä¸€è‡´å“ˆå¸Œå¯»å€çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¦‚æœå¢åŠ ä¸€ä¸ªèŠ‚ç‚¹æˆ–è€…å‡å°‘ä¸€ä¸ªèŠ‚ç‚¹ä¼šå‘ç”Ÿå¤§é‡çš„æ•°æ®è¿ç§»å—ï¼Ÿ å‡è®¾èŠ‚ç‚¹æ•°é‡ä» 3 å¢åŠ åˆ°äº† 4ï¼Œæ–°çš„èŠ‚ç‚¹ D ç»è¿‡å“ˆå¸Œè®¡ç®—åæ˜ å°„åˆ°äº†ä¸‹å›¾ä¸­çš„ä½ç½®ğŸ‘‡ ä½ å¯ä»¥çœ‹åˆ°key-01ã€key-03éƒ½ä¸å—å½±å“ï¼Œåªæœ‰key-02éœ€è¦è¢«è¿ç§»èŠ‚ç‚¹ Dã€‚ å‡è®¾èŠ‚ç‚¹æ•°é‡ä» 3 å‡å°‘åˆ°äº† 2ï¼Œæ¯”å¦‚å°†èŠ‚ç‚¹ A ç§»é™¤ğŸ‘‡ å¯ä»¥çœ‹åˆ°key-02å’Œkey-03ä¸ä¼šå—åˆ°å½±å“ï¼Œåªæœ‰key-01éœ€è¦è¢«è¿ç§»èŠ‚ç‚¹ Bã€‚ å› æ­¤ï¼Œåœ¨ä¸€è‡´å“ˆå¸Œç®—æ³•ä¸­ï¼Œå¦‚æœå¢åŠ æˆ–è€…ç§»é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»…å½±å“è¯¥èŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šé¡ºæ—¶é’ˆç›¸é‚»çš„åç»§èŠ‚ç‚¹ï¼Œå…¶å®ƒæ•°æ®ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚ ä¸Šé¢è¿™äº›å›¾ä¸­ 3 ä¸ªèŠ‚ç‚¹æ˜ å°„åœ¨å“ˆå¸Œç¯è¿˜æ˜¯æ¯”è¾ƒåˆ†æ•£çš„ï¼Œæ‰€ä»¥çœ‹èµ·æ¥è¯·æ±‚éƒ½ä¼šã€Œå‡è¡¡ã€åˆ°æ¯ä¸ªèŠ‚ç‚¹ã€‚ ä½†æ˜¯ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•å¹¶ä¸ä¿è¯èŠ‚ç‚¹èƒ½å¤Ÿåœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒå‡åŒ€ï¼Œè¿™æ ·å°±ä¼šå¸¦æ¥ä¸€ä¸ªé—®é¢˜ï¼Œä¼šæœ‰å¤§é‡çš„è¯·æ±‚é›†ä¸­åœ¨ä¸€ä¸ªèŠ‚ç‚¹ä¸Šã€‚ æ¯”å¦‚ï¼Œä¸‹å›¾ä¸­ 3 ä¸ªèŠ‚ç‚¹çš„æ˜ å°„ä½ç½®éƒ½åœ¨å“ˆå¸Œç¯çš„å³åŠè¾¹ğŸ‘‡ è¿™æ—¶å€™æœ‰ä¸€åŠä»¥ä¸Šçš„æ•°æ®çš„å¯»å€éƒ½ä¼šæ‰¾èŠ‚ç‚¹ Aï¼Œä¹Ÿå°±æ˜¯è®¿é—®è¯·æ±‚ä¸»è¦é›†ä¸­çš„èŠ‚ç‚¹ A ä¸Šï¼Œè¿™æ˜¯è‚¯å®šä¸è¡Œçš„ï¼Œè¯´å¥½çš„è´Ÿè½½å‡è¡¡å‘¢ï¼Œè¿™ç§æƒ…å†µä¸€ç‚¹éƒ½ä¸å‡è¡¡ã€‚ å¦å¤–ï¼Œåœ¨è¿™ç§èŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€çš„æƒ…å†µä¸‹ï¼Œè¿›è¡Œå®¹ç¾ä¸æ‰©å®¹æ—¶ï¼Œå“ˆå¸Œç¯ä¸Šçš„ç›¸é‚»èŠ‚ç‚¹å®¹æ˜“å—åˆ°è¿‡å¤§å½±å“ï¼Œå®¹æ˜“å‘ç”Ÿé›ªå´©å¼çš„è¿é”ååº”ã€‚ æ¯”å¦‚ï¼Œä¸Šå›¾ä¸­å¦‚æœèŠ‚ç‚¹ A è¢«ç§»é™¤äº†ï¼Œå½“èŠ‚ç‚¹ A å®•æœºåï¼Œæ ¹æ®ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•çš„è§„åˆ™ï¼Œå…¶ä¸Šæ•°æ®åº”è¯¥å…¨éƒ¨è¿ç§»åˆ°ç›¸é‚»çš„èŠ‚ç‚¹ B ä¸Šï¼Œè¿™æ ·ï¼ŒèŠ‚ç‚¹ B çš„æ•°æ®é‡ã€è®¿é—®é‡éƒ½ä¼šè¿…é€Ÿå¢åŠ å¾ˆå¤šå€ï¼Œä¸€æ—¦æ–°å¢çš„å‹åŠ›è¶…è¿‡äº†èŠ‚ç‚¹ B çš„å¤„ç†èƒ½åŠ›ä¸Šé™ï¼Œå°±ä¼šå¯¼è‡´èŠ‚ç‚¹ B å´©æºƒï¼Œè¿›è€Œå½¢æˆé›ªå´©å¼çš„è¿é”ååº”ã€‚ æ‰€ä»¥ï¼Œä¸€è‡´æ€§å“ˆå¸Œç®—æ³•è™½ç„¶å‡å°‘äº†æ•°æ®è¿ç§»é‡ï¼Œä½†æ˜¯å­˜åœ¨èŠ‚ç‚¹åˆ†å¸ƒä¸å‡åŒ€çš„é—®é¢˜ã€‚ ","date":"2022-01-15","objectID":"/consistent-hash/:3:0","series":["reproduce"],"tags":["ç®—æ³•","hash"],"title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","uri":"/consistent-hash/#ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•æœ‰ä»€ä¹ˆé—®é¢˜"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" å¦‚ä½•é€šè¿‡è™šæ‹ŸèŠ‚ç‚¹æé«˜å‡è¡¡åº¦è¦æƒ³è§£å†³èŠ‚ç‚¹èƒ½åœ¨å“ˆå¸Œç¯ä¸Šåˆ†é…ä¸å‡åŒ€çš„é—®é¢˜ï¼Œå°±æ˜¯è¦æœ‰å¤§é‡çš„èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹æ•°è¶Šå¤šï¼Œå“ˆå¸Œç¯ä¸Šçš„èŠ‚ç‚¹åˆ†å¸ƒçš„å°±è¶Šå‡åŒ€ã€‚ ä½†é—®é¢˜æ˜¯ï¼Œå®é™…ä¸­æˆ‘ä»¬æ²¡æœ‰é‚£ä¹ˆå¤šèŠ‚ç‚¹ã€‚æ‰€ä»¥è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±åŠ å…¥è™šæ‹ŸèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯å¯¹ä¸€ä¸ªçœŸå®èŠ‚ç‚¹åšå¤šä¸ªå‰¯æœ¬ã€‚ å…·ä½“åšæ³•æ˜¯ï¼Œä¸å†å°†çœŸå®èŠ‚ç‚¹æ˜ å°„åˆ°å“ˆå¸Œç¯ä¸Šï¼Œè€Œæ˜¯å°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°å“ˆå¸Œç¯ä¸Šï¼Œå¹¶å°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°å®é™…èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ã€Œä¸¤å±‚ã€æ˜ å°„å…³ç³»ã€‚ æ¯”å¦‚å¯¹æ¯ä¸ªèŠ‚ç‚¹åˆ†åˆ«è®¾ç½® 3 ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼š å¯¹èŠ‚ç‚¹ A åŠ ä¸Šç¼–å·æ¥ä½œä¸ºè™šæ‹ŸèŠ‚ç‚¹ï¼šA-01ã€A-02ã€A-03 å¯¹èŠ‚ç‚¹ B åŠ ä¸Šç¼–å·æ¥ä½œä¸ºè™šæ‹ŸèŠ‚ç‚¹ï¼šB-01ã€B-02ã€B-03 å¯¹èŠ‚ç‚¹ C åŠ ä¸Šç¼–å·æ¥ä½œä¸ºè™šæ‹ŸèŠ‚ç‚¹ï¼šC-01ã€C-02ã€C-03 å¼•å…¥è™šæ‹ŸèŠ‚ç‚¹åï¼ŒåŸæœ¬å“ˆå¸Œç¯ä¸Šåªæœ‰ 3 ä¸ªèŠ‚ç‚¹çš„æƒ…å†µï¼Œå°±ä¼šå˜æˆæœ‰ 9 ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°å“ˆå¸Œç¯ä¸Šï¼Œå“ˆå¸Œç¯ä¸Šçš„èŠ‚ç‚¹æ•°é‡å¤šäº† 3 å€ã€‚ è™šæ‹ŸèŠ‚ç‚¹ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒèŠ‚ç‚¹æ•°é‡å¤šäº†åï¼ŒèŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šçš„åˆ†å¸ƒå°±ç›¸å¯¹å‡åŒ€äº†ã€‚è¿™æ—¶å€™ï¼Œå¦‚æœæœ‰è®¿é—®è¯·æ±‚å¯»å€åˆ°ã€ŒA-01ã€è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œæ¥ç€å†é€šè¿‡ã€ŒA-01ã€è™šæ‹ŸèŠ‚ç‚¹æ‰¾åˆ°çœŸå®èŠ‚ç‚¹ Aï¼Œè¿™æ ·è¯·æ±‚å°±èƒ½è®¿é—®åˆ°çœŸå®èŠ‚ç‚¹ A äº†ã€‚ ä¸Šé¢ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæ¯ä¸ªçœŸå®èŠ‚ç‚¹ä»…åŒ…å« 3 ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œè¿™æ ·èƒ½èµ·åˆ°çš„å‡è¡¡æ•ˆæœå…¶å®å¾ˆæœ‰é™ã€‚è€Œåœ¨å®é™…çš„å·¥ç¨‹ä¸­ï¼Œè™šæ‹ŸèŠ‚ç‚¹çš„æ•°é‡ä¼šå¤§å¾ˆå¤šï¼Œæ¯”å¦‚ Nginx çš„ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ï¼Œæ¯ä¸ªæƒé‡ä¸º 1 çš„çœŸå®èŠ‚ç‚¹å°±å«æœ‰160 ä¸ªè™šæ‹ŸèŠ‚ç‚¹ã€‚ å¦å¤–ï¼Œè™šæ‹ŸèŠ‚ç‚¹é™¤äº†ä¼šæé«˜èŠ‚ç‚¹çš„å‡è¡¡åº¦ï¼Œè¿˜ä¼šæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚å½“èŠ‚ç‚¹å˜åŒ–æ—¶ï¼Œä¼šæœ‰ä¸åŒçš„èŠ‚ç‚¹å…±åŒåˆ†æ‹…ç³»ç»Ÿçš„å˜åŒ–ï¼Œå› æ­¤ç¨³å®šæ€§æ›´é«˜ã€‚ æ¯”å¦‚ï¼Œå½“æŸä¸ªèŠ‚ç‚¹è¢«ç§»é™¤æ—¶ï¼Œå¯¹åº”è¯¥èŠ‚ç‚¹çš„å¤šä¸ªè™šæ‹ŸèŠ‚ç‚¹å‡ä¼šç§»é™¤ï¼Œè€Œè¿™äº›è™šæ‹ŸèŠ‚ç‚¹æŒ‰é¡ºæ—¶é’ˆæ–¹å‘çš„ä¸‹ä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œå¯èƒ½ä¼šå¯¹åº”ä¸åŒçš„çœŸå®èŠ‚ç‚¹ï¼Œå³è¿™äº›ä¸åŒçš„çœŸå®èŠ‚ç‚¹å…±åŒåˆ†æ‹…äº†èŠ‚ç‚¹å˜åŒ–å¯¼è‡´çš„å‹åŠ›ã€‚ è€Œä¸”ï¼Œæœ‰äº†è™šæ‹ŸèŠ‚ç‚¹åï¼Œè¿˜å¯ä»¥ä¸ºç¡¬ä»¶é…ç½®æ›´å¥½çš„èŠ‚ç‚¹å¢åŠ æƒé‡ï¼Œæ¯”å¦‚å¯¹æƒé‡æ›´é«˜çš„èŠ‚ç‚¹å¢åŠ æ›´å¤šçš„è™šæ‹ŸæœºèŠ‚ç‚¹å³å¯ã€‚ å› æ­¤ï¼Œå¸¦è™šæ‹ŸèŠ‚ç‚¹çš„ä¸€è‡´æ€§å“ˆå¸Œæ–¹æ³•ä¸ä»…é€‚åˆç¡¬ä»¶é…ç½®ä¸åŒçš„èŠ‚ç‚¹çš„åœºæ™¯ï¼Œè€Œä¸”é€‚åˆèŠ‚ç‚¹è§„æ¨¡ä¼šå‘ç”Ÿå˜åŒ–çš„åœºæ™¯ã€‚ ","date":"2022-01-15","objectID":"/consistent-hash/:4:0","series":["reproduce"],"tags":["ç®—æ³•","hash"],"title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","uri":"/consistent-hash/#å¦‚ä½•é€šè¿‡è™šæ‹ŸèŠ‚ç‚¹æé«˜å‡è¡¡åº¦"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" æ€»ç»“ä¸åŒçš„è´Ÿè½½å‡è¡¡ç®—æ³•é€‚ç”¨çš„ä¸šåŠ¡åœºæ™¯ä¸åŒã€‚ è½®è®­è¿™ç±»çš„ç­–ç•¥åªèƒ½é€‚ç”¨äºæ¯ä¸ªèŠ‚ç‚¹çš„æ•°æ®éƒ½æ˜¯ç›¸åŒçš„åœºæ™¯ï¼Œè®¿é—®ä»»æ„èŠ‚ç‚¹éƒ½èƒ½è¯·æ±‚åˆ°æ•°æ®ã€‚ä½†æ˜¯ä¸é€‚ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå› ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿæ„å‘³ç€æ•°æ®æ°´å¹³åˆ‡åˆ†åˆ°äº†ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œè®¿é—®æ•°æ®çš„æ—¶å€™ï¼Œä¸€å®šè¦å¯»å€å­˜å‚¨è¯¥æ•°æ®çš„èŠ‚ç‚¹ã€‚ å“ˆå¸Œç®—æ³•è™½ç„¶èƒ½å»ºç«‹æ•°æ®å’ŒèŠ‚ç‚¹çš„æ˜ å°„å…³ç³»ï¼Œä½†æ˜¯æ¯æ¬¡åœ¨èŠ‚ç‚¹æ•°é‡å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæœ€åæƒ…å†µä¸‹æ‰€æœ‰æ•°æ®éƒ½éœ€è¦è¿ç§»ï¼Œè¿™æ ·å¤ªéº»çƒ¦äº†ï¼Œæ‰€ä»¥ä¸é€‚ç”¨èŠ‚ç‚¹æ•°é‡å˜åŒ–çš„åœºæ™¯ã€‚ ä¸ºäº†å‡å°‘è¿ç§»çš„æ•°æ®é‡ï¼Œå°±å‡ºç°äº†ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ã€‚ ä¸€è‡´æ€§å“ˆå¸Œæ˜¯æŒ‡å°†ã€Œå­˜å‚¨èŠ‚ç‚¹ã€å’Œã€Œæ•°æ®ã€éƒ½æ˜ å°„åˆ°ä¸€ä¸ªé¦–å°¾ç›¸è¿çš„å“ˆå¸Œç¯ä¸Šï¼Œå¦‚æœå¢åŠ æˆ–è€…ç§»é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä»…å½±å“è¯¥èŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šé¡ºæ—¶é’ˆç›¸é‚»çš„åç»§èŠ‚ç‚¹ï¼Œå…¶å®ƒæ•°æ®ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚ ä½†æ˜¯ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ä¸èƒ½å¤Ÿå‡åŒ€çš„åˆ†å¸ƒèŠ‚ç‚¹ï¼Œä¼šå‡ºç°å¤§é‡è¯·æ±‚éƒ½é›†ä¸­åœ¨ä¸€ä¸ªèŠ‚ç‚¹çš„æƒ…å†µï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹è¿›è¡Œå®¹ç¾ä¸æ‰©å®¹æ—¶ï¼Œå®¹æ˜“å‡ºç°é›ªå´©çš„è¿é”ååº”ã€‚ ä¸ºäº†è§£å†³ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ä¸èƒ½å¤Ÿå‡åŒ€çš„åˆ†å¸ƒèŠ‚ç‚¹çš„é—®é¢˜ï¼Œå°±éœ€è¦å¼•å…¥è™šæ‹ŸèŠ‚ç‚¹ï¼Œå¯¹ä¸€ä¸ªçœŸå®èŠ‚ç‚¹åšå¤šä¸ªå‰¯æœ¬ã€‚ä¸å†å°†çœŸå®èŠ‚ç‚¹æ˜ å°„åˆ°å“ˆå¸Œç¯ä¸Šï¼Œè€Œæ˜¯å°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°å“ˆå¸Œç¯ä¸Šï¼Œå¹¶å°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°å®é™…èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™é‡Œæœ‰ã€Œä¸¤å±‚ã€æ˜ å°„å…³ç³»ã€‚ å¼•å…¥è™šæ‹ŸèŠ‚ç‚¹åï¼Œå¯ä»¥æé«˜èŠ‚ç‚¹çš„å‡è¡¡åº¦ï¼Œè¿˜ä¼šæé«˜ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚æ‰€ä»¥ï¼Œå¸¦è™šæ‹ŸèŠ‚ç‚¹çš„ä¸€è‡´æ€§å“ˆå¸Œæ–¹æ³•ä¸ä»…é€‚åˆç¡¬ä»¶é…ç½®ä¸åŒçš„èŠ‚ç‚¹çš„åœºæ™¯ï¼Œè€Œä¸”é€‚åˆèŠ‚ç‚¹è§„æ¨¡ä¼šå‘ç”Ÿå˜åŒ–çš„åœºæ™¯ã€‚ ","date":"2022-01-15","objectID":"/consistent-hash/:5:0","series":["reproduce"],"tags":["ç®—æ³•","hash"],"title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","uri":"/consistent-hash/#æ€»ç»“"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" å‚è€ƒ 16 å¼ å›¾è§£ ï½œ ä¸€è‡´æ€§å“ˆå¸Œç®—æ³• ç¨‹åºå‘˜ç®—æ³•-å¿ƒä¸­æœ‰æ ‘ ä¸€è‡´æ€§Hash(Consistent Hashing)åŸç†å‰–æåŠJavaå®ç° å›¾è§£ä¸€è‡´æ€§å“ˆå¸Œç®—æ³• golangå®ç°ä¸€è‡´æ€§hashç¯åŠä¼˜åŒ–æ–¹æ³• ä¸€è‡´æ€§å“ˆå¸Œ ä¸€è‡´æ€§Hashç®—æ³•è¯¦è§£ ","date":"2022-01-15","objectID":"/consistent-hash/:6:0","series":["reproduce"],"tags":["ç®—æ³•","hash"],"title":"ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•","uri":"/consistent-hash/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt","date":"2021-12-28","objectID":"/reuse-jetbrains/","series":null,"tags":["jetbrains","ide"],"title":"Jetbrains å®¶æ— ide ç ´è§£æ–¹æ³•ï¼Œæ”¯æŒæœ€æ–°ç‰ˆ","uri":"/reuse-jetbrains/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Jetbrains å®¶æ—çš„ ide å¯¹å¼€å‘è€…å‹å¥½ï¼ŒåŸºæœ¬æ”¯æŒæ‰€æœ‰çš„å¼€å‘è¯­è¨€ï¼Œå¯ä»¥å»ä¸‹è½½é¡µé¢ä¸‹è½½å¯¹åº”çš„ ide https://www.jetbrains.com/products/ã€‚ ä¸‹è½½ç•Œé¢ ","date":"2021-12-28","objectID":"/reuse-jetbrains/:0:0","series":null,"tags":["jetbrains","ide"],"title":"Jetbrains å®¶æ— ide ç ´è§£æ–¹æ³•ï¼Œæ”¯æŒæœ€æ–°ç‰ˆ","uri":"/reuse-jetbrains/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ja-netfilter-allide ä¸‹è½½å®Œæˆåï¼Œå» https://jetbra.in/s é¡µé¢ä¸‹è½½ ja-netfilter-all åŒ…ï¼Œ ä¸‹è½½ ja-netfilter-all å°†ä¸‹è½½çš„ ja-netfilter-all.zip è§£å‹åˆ°ä¸å¸¦ä¸­æ–‡çš„ä»»æ„ç›®å½•ï¼Œ è§£å‹å®Œæˆåæ‰§è¡Œä¸‹ scripts æ–‡ä»¶å¤¹ä¸­çš„è„šæœ¬ï¼Œå¦‚ä½•æ˜¯ç±» unix ç³»ç»Ÿæ¯”å¦‚ mac å°±æ‰§è¡Œ .sh æ–‡ä»¶ï¼Œå¦‚æœæ˜¯ windows ç³»ç»Ÿå°±æ‰§è¡Œ .vbs æ–‡ä»¶ã€‚æ˜¯é€‰æ‹©æ‰§è¡Œinstall-all-users è¿˜æ˜¯install-current-userå°±çœ‹ä½ è‡ªå·±çš„å–œå¥½äº†ã€‚ scripts ","date":"2021-12-28","objectID":"/reuse-jetbrains/:1:0","series":null,"tags":["jetbrains","ide"],"title":"Jetbrains å®¶æ— ide ç ´è§£æ–¹æ³•ï¼Œæ”¯æŒæœ€æ–°ç‰ˆ","uri":"/reuse-jetbrains/#ja-netfilter-all"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½® vmoptionsåœ¨ ide çš„å®‰è£…ç›®å½•ä¸­æ‰¾æ‰“ idea64.exe.vmoptions æ–‡ä»¶ï¼Œæ¯”å¦‚æˆ‘çš„è·¯å¾„æ˜¯ D:\\mySoft\\GoLand\\GoLand 2021.1\\binï¼š XXX.vmoptions è·¯å¾„ ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘æ‰“å¼€ï¼Œåœ¨æœ€åæ·»åŠ ä¸€è¡Œé…ç½®ï¼ŒæŒ‡å‘ä¸Šä¸€æ­¥è§£å‹å‡ºæ¥çš„ ja-netfilter.jar æ–‡ä»¶ï¼š -javaagent:è·¯å¾„\\ja-netfilter.jar=jetbrains ç¼–è¾‘ vmoptions ","date":"2021-12-28","objectID":"/reuse-jetbrains/:2:0","series":null,"tags":["jetbrains","ide"],"title":"Jetbrains å®¶æ— ide ç ´è§£æ–¹æ³•ï¼Œæ”¯æŒæœ€æ–°ç‰ˆ","uri":"/reuse-jetbrains/#é…ç½®-vmoptions"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ¿€æ´»ç ä»¥ä¸Šé…ç½®å®Œåï¼Œé‡å¯ ideï¼Œå¤åˆ¶æ¿€æ´»ç åˆ° ide æ¿€æ´»å³å¯ï¼š å¤åˆ¶æ¿€æ´»ç  æ¿€æ´» ","date":"2021-12-28","objectID":"/reuse-jetbrains/:3:0","series":null,"tags":["jetbrains","ide"],"title":"Jetbrains å®¶æ— ide ç ´è§£æ–¹æ³•ï¼Œæ”¯æŒæœ€æ–°ç‰ˆ","uri":"/reuse-jetbrains/#æ¿€æ´»ç "},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,golang ä½¿ç”¨ swagger,go åŸç”Ÿ swagger çš„ä½¿ç”¨","date":"2021-12-27","objectID":"/go-swagger/","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Swagger æ˜¯ä¸€ä¸ªè§„èŒƒä¸”å®Œæ•´çš„æ¡†æ¶ï¼Œç”¨äºç”Ÿæˆã€æè¿°ã€è°ƒç”¨å’Œå¯è§†åŒ– RESTful é£æ ¼çš„ Web æœåŠ¡ã€‚ å½“é€šè¿‡ Swagger è¿›è¡Œæ­£ç¡®å®šä¹‰ï¼Œç”¨æˆ·å¯ä»¥ç†è§£è¿œç¨‹æœåŠ¡å¹¶ä½¿ç”¨æœ€å°‘å®ç°é€»è¾‘ä¸è¿œç¨‹æœåŠ¡è¿›è¡Œäº¤äº’ã€‚ æ”¯æŒ API è‡ªåŠ¨ç”ŸæˆåŒæ­¥çš„åœ¨çº¿æ–‡æ¡£ã€‚ä½¿ç”¨ Swagger åå¯ä»¥ç›´æ¥é€šè¿‡ä»£ç ç”Ÿæˆæ–‡æ¡£ï¼Œä¸å†éœ€è¦è‡ªå·±æ‰‹åŠ¨ç¼–å†™æ¥å£æ–‡æ¡£äº†ï¼Œå¯¹ç¨‹åºå‘˜æ¥è¯´éå¸¸å‹å¥½ï¼Œå¯ä»¥èŠ‚çº¦å†™æ–‡æ¡£çš„æ—¶é—´ã€‚ æä¾› Web é¡µé¢åœ¨çº¿æµ‹è¯• APIã€‚å…‰æœ‰æ–‡æ¡£è¿˜ä¸å¤Ÿï¼ŒSwagger ç”Ÿæˆçš„æ–‡æ¡£è¿˜æ”¯æŒåœ¨çº¿æµ‹è¯•ã€‚å‚æ•°å’Œæ ¼å¼éƒ½å®šå¥½äº†ï¼Œç›´æ¥åœ¨ç•Œé¢ä¸Šè¾“å…¥å‚æ•°å¯¹åº”çš„å€¼å³å¯åœ¨çº¿æµ‹è¯•æ¥å£ã€‚ ","date":"2021-12-27","objectID":"/go-swagger/:0:0","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" swag cli å®‰è£…Swag èƒ½å°† Go çš„æ³¨é‡Šè½¬æ¢ä¸º Swagger æ–‡æ¡£ã€‚ # å®‰è£…swag go get github.com/swaggo/swag/cmd/swag # æŸ¥çœ‹ç‰ˆæœ¬ swag -v swag cli ","date":"2021-12-27","objectID":"/go-swagger/:1:0","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/#swag-cli-å®‰è£…"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" swagger-ui åº“ä» swagger-ui åº“ä¸‹è½½ dist æ–‡ä»¶å¤¹åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼Œå¹¶æ›´åä¸º swaggerï¼ˆæ›´åä¸æ˜¯å¿…é¡»çš„ï¼‰ã€‚ æŠŠ swagger ä¸­çš„ swagger-initializer.js æ–‡ä»¶ä¸­æœ‰ä¸ª url å‚æ•°ï¼Œå…¨å±€æ›¿æ¢ swagger æ–‡ä»¶å¤¹ä¸­çš„è¿™ä¸ª url å‚æ•°å€¼ä¸º ./swagger.jsonã€‚ swagger-initializer.js url æ›¿æ¢æ‰€æœ‰ ","date":"2021-12-27","objectID":"/go-swagger/:2:0","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/#swagger-ui-åº“"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" swagger æ–‡æ¡£swagger æ˜¯ä»¥æ³¨é‡Šçš„æ–¹å¼æè¿°çš„ï¼Œç„¶åä½¿ç”¨ swag cli ç”Ÿæˆçš„æ–‡æ¡£ã€‚ æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ª main.go æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š package main import ( \"embed\" \"net/http\" \"github.com/go-martini/martini\" ) //go:embed swagger var embededFiles embed.FS // @title æµ‹è¯• API // @version 4.0 // @description æµ‹è¯• API V4.0 // @securityDefinitions.apiKey MyApiKey // @in header // @name Xiaobinqt-Api-Key // @BasePath / func main() { m := martini.Classic() m.Get(\"/swagger/**\", http.FileServer(http.FS(embededFiles)).ServeHTTP) m.Post(\"/api/login\", Login) m.Run() } type Req struct { Email string `json:\"email\"` // é‚®ç®± Password string `json:\"password\"` } // @Tags ç”¨æˆ·ç®¡ç† // @Summary ç”¨æˆ·ç™»å½• // @Security MyApiKey // @accept application/json // @Produce application/json // @Param data body Req true \"email: ç”¨æˆ·åï¼Œpassword: å¯†ç \" // @Success 200 {object} EdgeInstanceList // @Router /api/login [POST] func Login(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"hello\")) } type EdgeInstanceList struct { A string B string } ä½¿ç”¨ swag cli ç”Ÿæˆ swagger æ–‡æ¡£ï¼š ç”Ÿæˆ swagger æ–‡æ¡£ è®¿é—® swagger è·¯ç”±ï¼š è®¿é—® swagger è·¯ç”± ","date":"2021-12-27","objectID":"/go-swagger/:3:0","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/#swagger-æ–‡æ¡£"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸è§é—®é¢˜","date":"2021-12-27","objectID":"/go-swagger/:4:0","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/#å¸¸è§é—®é¢˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" apiKeyæœ‰çš„ api éœ€è¦åŠ ä¸Š header å¤´ä¿¡æ¯æ‰èƒ½æ­£ç¡®è®¿é—®ï¼Œè¿™æ—¶å¯ä»¥æ·»åŠ æ³¨é‡Šä¿¡æ¯ï¼š // @securityDefinitions.apiKey MyApiKey // @in header // @name Xiaobinqt-Api-Key @in header è®¾ç½®ï¼Œåœ¨è¯·æ±‚ header ä¸­ï¼Œ@name Xiaobinqt-Api-Key header å­—æ®µä¸ºXiaobinqt-Api-Keyï¼Œ@securityDefinitions.apiKey å›ºå®šå†™æ³•ï¼ŒMyApiKeyåœ¨æ¯ä¸ªæ–¹æ³•ä¸­çš„@Securityæ³¨é‡Šä¿¡æ¯å€¼ï¼Œå¦‚ï¼š // @Tags ç”¨æˆ·ç®¡ç† // @Summary ç”¨æˆ·ç™»å½• // @Security MyApiKey // @accept application/json // @Produce application/json // @Param data body Req true \"email: ç”¨æˆ·åï¼Œpassword: å¯†ç \" // @Success 200 {object} EdgeInstanceList // @Router /api/login [POST] func Login(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"hello\")) } å¦‚æœåœ¨ swagger é¡µé¢ Available authorizations çš„å€¼ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆæ¯æ¬¡è¯·æ±‚éƒ½ä¼šå¸¦ç€Xiaobinqt-Api-Keyè¿™ä¸ª header å¤´ï¼Œå€¼å°±æ˜¯Available authorizations å¡«å…¥çš„å€¼ã€‚ Available authorizations Execute ","date":"2021-12-27","objectID":"/go-swagger/:4:1","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/#apikey"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" paramTypeå…·ä½“å¯ä»¥å‚çœ‹ï¼šhttps://swagger.io/docs/specification/describing-parameters/ body type Req struct { Email string `json:\"email\"` // é‚®ç®± Password string `json:\"password\"` } // @Param data body Req true \"email: ç”¨æˆ·åï¼Œpassword: å¯†ç \" path // @Param user_id path string true \"ç”¨æˆ·ID\" query // @Param search query string false \"æœç´¢å†…å®¹\" å®Œæ•´æ³¨é‡Šå¦‚ä¸‹ï¼š // @Tags ç”¨æˆ·ç®¡ç† // @Summary ç”¨æˆ·ç™»å½• // @Security MyApiKey // @accept application/json // @Produce application/json // @Param user_id path string true \"ç”¨æˆ·ID\" // @Param search query string false \"æœç´¢å†…å®¹\" // @Param data body Req true \"email: ç”¨æˆ·åï¼Œpassword: å¯†ç \" // @Success 200 {object} EdgeInstanceList // @Router /api/login/{user_id} [POST] func Login(w http.ResponseWriter, r *http.Request) { w.Write([]byte(\"hello\")) } æ•ˆæœ_01 æ•ˆæœ_02 ","date":"2021-12-27","objectID":"/go-swagger/:4:2","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/#paramtype"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ â˜ï¸æ–‡ç« ç¤ºä¾‹æºç  swaggerå®˜æ–¹æ–‡æ¡£ https://github.com/swaggo/swag/blob/master/README_zh-CN.md https://www.jianshu.com/p/9313d0c5395d Go embed ç®€æ˜æ•™ç¨‹ Go 1.16æ–°ç‰¹æ€§-embedåŒ…åŠå…¶ä½¿ç”¨ ","date":"2021-12-27","objectID":"/go-swagger/:5:0","series":null,"tags":["golang","swagger"],"title":"Go ä½¿ç”¨åŸç”Ÿ Swagger","uri":"/go-swagger/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,","date":"2021-12-20","objectID":"/problems-in-work/","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¼˜èµ·é‚£å¤©é¢è¯•ä¸€å®¶å…¬å¸ï¼Œé¢è¯•çš„äººé—®æˆ‘å·¥ä½œå†…å®¹ï¼Œæˆ‘è¯´å¤§éƒ¨åˆ†æ—¶é—´å°±æ˜¯å†™ä¸šåŠ¡ã€‚å¥½å§ï¼Œæˆ‘æ‰¿è®¤æˆ‘æ˜¯ä¸ªèœé¸¡ã€‚ç„¶åä»–é—®ï¼Œæ‰¾ä¸ªä½ å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³çš„è¿‡ç¨‹æ¥è°ˆä¸€è°ˆã€‚æˆ‘æƒ³äº†ä¸‹è¯´ï¼Œå¤§éƒ¨åˆ†é—®é¢˜ google ä¸‹éƒ½èƒ½è§£å†³ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å¤æ‚çš„ï¼Œå¤§éƒ¨åˆ†é—®é¢˜å‰äººéƒ½æœ‰è§£å†³æ–¹æ³•ï¼Œæœ‰äº›é—®é¢˜å¯èƒ½æ˜¯ä¹‹å‰æ²¡æœ‰æ¥è§¦è¿‡ï¼Œæ‰€ä»¥èŠ±çš„æ—¶é—´æ¯”è¾ƒé•¿ã€‚ æˆ‘å½“æ—¶å¿ƒé‡Œæœ‰ä¸€ä¸‡åŒ¹è‰æ³¥é©¬èµ°è¿‡ã€‚ç°åœ¨æˆ‘â„¢å°±ç»™ä½ ä»¬è¿™äº›å¤§çˆ·æ€»ç»“ä¸‹ï¼Œæˆ‘è¿™ä¸ªèœé¸¡å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ï¼Œå¹¶ä¸”å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ï¼Œæˆ‘è°¢è°¢ä½ ä»¬ğŸ˜‡ğŸ˜‡ã€‚ CVå·¥ç¨‹å¸ˆ ","date":"2021-12-20","objectID":"/problems-in-work/:1:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#ç¼˜èµ·"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" go-bindataæ”¹æˆembedå…¬å¸æœ‰ä¸ªè€é¡¹ç›®ç”¨çš„æ˜¯ go-bindata å°†å‰ç«¯æ‰“åŒ…åˆ°äºŒè¿›åˆ¶é‡Œçš„ã€‚go-bindata å¤ªè€äº†ï¼Œå®ƒçš„å‡ºç°å‡ºç°æ˜¯ç”±äº Go ä¹‹å‰ç‰ˆæœ¬å®˜æ–¹ä¸æ”¯æŒèµ„æºåµŒå…¥ï¼Œä½†æ˜¯ Go1.16 ä¹‹åï¼Œå®˜æ–¹æ¨å‡ºäº†embedè§£å†³äº†èµ„æºåµŒå…¥é—®é¢˜ï¼Œä¸ªäººè§‰å¾—è‡³æ­¤ä¹‹åï¼Œç±»ä¼¼ go-bindata ç¤¾åŒºç»´æŠ¤çš„èµ„æºåµŒå…¥å·¥å…·ä¼šæ…¢æ…¢é€€å‡ºå†å²èˆå°ã€‚ å…³äºembedçš„ä½¿ç”¨å¯ä»¥å‚çœ‹ Go embed ç®€æ˜æ•™ç¨‹ Go 1.16æ–°ç‰¹æ€§-embedåŒ…åŠå…¶ä½¿ç”¨ è¿™æ˜¯æˆ‘çš„ä½¿ç”¨ğŸ‘‡ package main import ( \"crypto/md5\" \"embed\" \"fmt\" \"io/fs\" \"io/ioutil\" \"net/http\" \"strings\" \"time\" \"github.com/gin-gonic/gin\" ) var webFs embed.FS func SetWebFs(fs embed.FS) { webFs = fs } func GetWebFs() embed.FS { return webFs } func GetWebFileSystem(p ...string) fs.FS { path := \"dist\" if len(p) != 0 \u0026\u0026 p[0] != \"\" { path = p[0] } fsys, _ := fs.Sub(GetWebFs(), path) return fsys } func ReturnMsg(msg string) gin.H { return gin.H{ \"msg\": msg, } } func NoRouteBypass(ctx *gin.Context) { path := ctx.Request.URL.Path // flexcloud å‰ç«¯ _, err := GetWebFileSystem().Open(strings.TrimPrefix(path, \"/\")) if err != nil { // æ˜¾ç¤ºé¦–é¡µ f, err := GetWebFileSystem().Open(\"index.html\") if err != nil { ctx.AbortWithStatusJSON(http.StatusNotFound, ReturnMsg(err.Error())) return } defer f.Close() content, err := ioutil.ReadAll(f) if err != nil { ctx.AbortWithStatusJSON(http.StatusNotFound, ReturnMsg(err.Error())) return } ctx.Data(http.StatusOK, \"text/html\", content) return } ctx.Header(\"Cache-Control\", \"max-age=31536000\") etag := fmt.Sprintf(\"%x\", md5.Sum([]byte(time.Now().String()))) ctx.Header(\"ETag\", etag) http.FileServer(http.FS(GetWebFileSystem())).ServeHTTP(ctx.Writer, ctx.Request) } ","date":"2021-12-20","objectID":"/problems-in-work/:2:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#go-bindataæ”¹æˆembed"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" çƒ­æ›´æ–°è‡ªåŠ¨é‡ç½®å¼€å‘æœºå…¬å¸æœ‰ä¸ªé¡¹ç›®ï¼Œä¸­å¿ƒæ§åˆ¶å™¨ä¼šæ§åˆ¶æ‰€æœ‰ç”¨æˆ·çš„å¼€å‘æœºï¼Œæ§åˆ¶å™¨å¯ä»¥ç»™å¼€å‘æœºä¸‹å‘æŒ‡ä»¤ï¼Œæ¯”å¦‚æ‰“å¼€ ide ç­‰ã€‚æ¯ä¸ªå¼€å‘æœºä¸Šéƒ½å®‰è£…äº†æˆ‘ä»¬çš„ fca è½¯ä»¶ï¼Œfca ä¼šä¸»åŠ¨è¿æ¥æ§åˆ¶å™¨ã€‚ç°åœ¨æœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œfca è½¯ä»¶å‰æœŸæ›´æ–°çš„æ¯”è¾ƒé¢‘ç¹ï¼Œä½†æ˜¯åˆä¸æƒ³æ¯æ¬¡æ›´æ–°éƒ½å»å‘Šè¯‰ç”¨æˆ·ï¼Œè®©ç”¨æˆ·æ‰‹åŠ¨é‡ç½®ä¸‹å¼€å‘æœºï¼Œä»¥ä¾¿æ›´æ–°ä¸‹ fca è½¯ä»¶ï¼Œå¦‚æœæ¯æ¬¡éƒ½è¿™æ ·å®åœ¨æ˜¯å¤ªæ™ºéšœäº†ğŸ¤¢ã€‚ æˆ‘ä»¬æ‰¾äº†ä¸ªåœ¨ Go ä¸­ä¼˜é›…çƒ­å‡çº§çš„è½¯ä»¶ tableflipï¼Œå…·ä½“ä½¿ç”¨å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç«  Go ä½¿ç”¨ tableflip å¯¦ç¾æ‡‰ç”¨çš„å„ªé›…ç†±å‡ç´šã€‚ æˆ‘ä»¬èµ·äº†ä¸€ä¸ªæœåŠ¡ï¼Œç±»ä¼¼ http://127.0.0.1:8011/fca/sha256sums å¯ä»¥è·å–åˆ°æ‰€æœ‰çš„ fca ç‰ˆæœ¬ï¼Œç¬¬ä¸€è¡Œå°±æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ head -n 1 sha256sum.txt | awk '{print $1\",\"$2}'ã€‚æ¯éš” 5 åˆ†é’Ÿå»è·å–ä¸‹æœ€æ–°çš„ fca ä¿¡æ¯ä¸æœ¬åœ°çš„è¿è¡Œçš„ fca ç‰ˆæœ¬ printf $(sha256sum /usr/bin/fca) è¿›è¡Œå¯¹æ¯”ï¼Œä¸ä¸€è‡´åˆ™å»ä¸‹è½½æ–°çš„ fca æƒŠé†’æ›¿æ¢å¹¶é‡å¯ systemctl reload flexcloud-fcaã€‚ ä½†æ˜¯è¿™æ ·æ“ä½œå…¶å®ä¹Ÿæ˜¯æœ‰ä¸€äº›é—®é¢˜çš„ï¼Œæˆ‘ä»¬ä¹Ÿéƒ½è®°å½•äº†ã€‚ ","date":"2021-12-20","objectID":"/problems-in-work/:3:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#çƒ­æ›´æ–°è‡ªåŠ¨é‡ç½®å¼€å‘æœº"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ¨¡æ¿æ›´æ–°åè‡ªåŠ¨é‡ç½®å¼€å‘æœºæˆ‘ä»¬é¡¹ç›®çš„å®¢æˆ·å¼€å‘æœºæ˜¯é€šè¿‡æ¨¡æ¿ clone çš„ï¼Œä½†æ˜¯å½“æ¨¡æ¿æœ‰æ›´æ–°ï¼Œæ¯”å¦‚æ–°å†…ç½®äº†ä¸€äº›åŠŸèƒ½ï¼Œå¯¹äºåŸºäºæ—§æ¨¡æ¿çš„ç”¨æˆ·å¼€å‘æœºæ¥è¯´æ˜¯æ²¡æœ‰è¿™äº›æ–°åŠŸèƒ½çš„ï¼Œæ‰€ä»¥å°±éœ€è¦é‡ç½®å¼€å‘æœºã€‚ä½†æ˜¯å¦‚æœæ¨¡æ¿æ›´æ–°çš„æ¯”è¾ƒé¢‘ç¹ï¼Œæ¯æ¬¡é€šçŸ¥ç”¨æˆ·æ‰‹åŠ¨é‡ç½®å¼€å‘æœºæ˜¾çš„ä¸å¤Ÿé«˜ç«¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åšäº†ä¸€ä¸ªè‡ªåŠ¨é‡ç½®å¼€å‘æœºçš„åŠŸèƒ½ã€‚ æ¯å¤©å‡Œæ™¨2:15 - 5:15æœåŠ¡è·å–æ‰€æœ‰éœ€è¦é‡ç½®å¼€å‘æœºçš„**ä¸åœ¨çº¿ç”¨æˆ· **ï¼Œè‡ªåŠ¨é‡ç½®å¼€å‘æœºã€‚è¶…æ—¶ 5:15 å¦‚æœæ²¡æœ‰é‡ç½®å®Œï¼Œåœæ­¢ä»»åŠ¡ã€‚å¯¹äºé‚£äº›åœ¨çº¿ç”¨æˆ·æˆ‘ä»¬ä¼šåœ¨/api/profileæ¥å£é‡Œæ·»åŠ ä¸€ä¸ªå­—æ®µï¼Œæç¤ºç”¨æˆ·æ˜¯å¦éœ€è¦é‡ç½®å¼€å‘æœºã€‚æœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œå¦‚æœåŠå¤œè‡ªåŠ¨æ›´æ–°å‡ºé”™ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç¬¬äºŒå¤©ç”¨æˆ·ç™»å½•æ—¶ï¼Œå¼€å‘æœºåœ¨é‡ç½®çŠ¶æ€ï¼Œå› ä¸ºç™»å½•æ—¶ä¸€æ—¦å¼€å‘æœºä¸å¯ç”¨ï¼Œä¼šè‡ªåŠ¨å»é‡ç½®å¼€å‘æœºï¼Œè¿™ç§æƒ…å†µå…¶å®ä¹Ÿå¯ä»¥æ¥å—ã€‚ æˆ‘ä»¬çš„ fca è½¯ä»¶ä¼šæ¯éš”ä¸€åˆ†é’Ÿå‘ä¸­å¿ƒæ§åˆ¶å™¨ä¸ŠæŠ¥ä¸€ä¸‹é•œåƒ ID /usr/bin/docker images --digests | sort | awk '{ if (NR\u003e1) print $3 }' | xargs | sed 's/ //g'ï¼Œå¦‚æœå¼€å‘æœºçš„é•œåƒ ID è·Ÿæ¨¡æ¿çš„é•œåƒ ID ä¸ä¸€è‡´è¯´æ˜æ¨¡æ¿æ›´æ–°äº†ï¼Œéœ€è¦é‡ç½®å¼€å‘æœºã€‚ package agent import ( \"fmt\" \"net/http\" \"os/exec\" \"strings\" \"time\" \"flexcloud/proxy/agent/controller\" \"github.com/pkg/errors\" \"github.com/sirupsen/logrus\" ) var ( reportImageIDCmdStr = `/usr/bin/docker images --digests | sort | awk '{ if (NR\u003e1) print $3 }' | xargs | sed 's/ //g'` ) // ä¸€åˆ†é’Ÿä¸ŠæŠ¥ä¸€ä¸ª imageID ç»™æ§åˆ¶ func reportImageID() { var ( err error cmdOutput = make([]byte, 0) ) for { cmdOutput, err = exec.Command(\"/bin/sh\", \"-c\", reportImageIDCmdStr).CombinedOutput() if err != nil { err = errors.Wrapf(err, \"reportImageID exec.Command err\") logrus.Error(err.Error()) time.Sleep(1 * time.Minute) continue } imageID := strings.ReplaceAll(string(cmdOutput), \"\\n\", \"\") logrus.Debugf(\"reportImageID imageID: %s \", imageID) resp, err := controller.HTTPRequestWithJsonPayload(http.MethodPost, fmt.Sprintf(\"/edges/%s?image_id=%s\", Edge_ID, imageID), nil, 10*time.Second) if err != nil { logrus.Errorf(\"Failed to report edge reportImageID info to controller: %s\", err.Error()) time.Sleep(1 * time.Minute) continue } if resp.StatusCode != http.StatusOK { logrus.Errorf(\"Failed to report edge reportImageID info to controller: %s\", err.Error()) time.Sleep(1 * time.Minute) continue } time.Sleep(1 * time.Minute) } } è·å–æŸä¸ªé•œåƒçš„ sha256sum çš„å€¼ï¼Œå¯ä»¥å‚è€ƒ How to obtain docker image digest from tag curl -s -L -H \"Accept: application/vnd.docker.distribution.manifest.v2+json,application/vnd.docker.distribution.manifest.list.v2+json\" -H \"Authorization: Bearer $(curl -s \"https://auth.docker.io/token?service=registry.docker.io\u0026scope=repository:zsm1703/flexcloud:1.0-dep:pull\" | jq -r .token)\" https://index.docker.io/v2/zsm1703/flexcloud/manifests/1.0-dep | sha256sum sha256sum åœ¨æ›´æ–°æ¨¡æ¿æ—¶ï¼Œæˆ‘ä»¬ä¼šæŠŠ imageID å†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæœ‰ä¸ªæ–‡ä»¶æœåŠ¡ç±»ä¼¼http://127.0.0.1:8012/SHA256SUMS ï¼Œå¯ä»¥è·å–æœ€æ–°çš„æ¨¡æ¿ IDã€‚ #!/bin/bash readonly TARGET_ARCH=\"ARM\" readonly IMAGE_NAMESPACE=\"XXXXXXX\" readonly IMGAE_NAME_FLEXCLOUD=\"flexcloud\" readonly IMAGE_NAME_FLEXCLOUD_CODE=\"flexcloud-code\" readonly IMAGE_TAG_FLEXCLOUD=\"1.0\" readonly IMAGE_TAG_FLEXCLOUD_CODE=\"1.0\" main() { find ./ -maxdepth 1 -type f -executable -exec file {} \\; | grep \"$TARGET_ARCH\" | awk '{print $1}' | sed 's/.$//' \u003e/tmp/t1 cat /tmp/t1 | xargs -I {} stat -c '%Y %N' {} | sort -r | awk '{print $2}' | sed s/\\'//g \u003e/tmp/t2 cat /tmp/t2 | xargs -I {} sha256sum {} | sed 's/.\\///' \u003eSHA256SUMS digests1=$(get_digests \"${IMAGE_NAMESPACE}\" \"${IMGAE_NAME_FLEXCLOUD}\" \"${IMAGE_TAG_FLEXCLOUD}\") digests2=$(get_digests \"${IMAGE_NAMESPACE}\" \"${IMAGE_NAME_FLEXCLOUD_CODE}\" \"${IMAGE_TAG_FLEXCLOUD_CODE}\") sed -i \"1 s/$/\\t$digests1$digests2/\" ./SHA256SUMS rm -f /tmp/t1 /tmp/t2 } get_digests() { _tmp=$(curl -v -L -I \\ -H \"Accept: application/vnd.docker.distribution.manifest.v2+json,application/vnd.docker.distribution.manifest.list.v2+json\" \\ -H \"Authorization: Bearer $(curl -s \"https://auth.docker.io/token?service=registry.docker.io\u0026scope=repository:$1/$2:pull\" | jq -r .token)\" \\ https://index.docker.io/v2/\"$1\"/\"$2\"/manifests/\"$3\" | tr -d '\\r' | grep ^docker-content-digest | awk '{print $2}') echo \"$_tmp\" } main ","date":"2021-12-20","objectID":"/problems-in-work/:4:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#æ¨¡æ¿æ›´æ–°åè‡ªåŠ¨é‡ç½®å¼€å‘æœº"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ideåˆ·æ–°tokené¡¹ç›®ä¸­ï¼Œå®¢æˆ·çš„å¼€å‘æœºå¯ä»¥æ‰“å¼€åœ¨çº¿ vscode æˆ–æ˜¯ nodered è¿›è¡Œç¼–è¾‘ï¼Œä½†æ˜¯åœ¨è¿™ 2 ä¸ªæ–° tab ä¸­æ²¡æœ‰ JS å»å®šæ—¶å»åˆ·æ–° tokenï¼Œå½“åœåœ¨è¿™ 2 ä¸ªé¡µé¢æ“ä½œä¸€æ®µæ—¶å€™åï¼Œtoken å¯èƒ½ä¼šè¿‡æœŸæ—¶ï¼Œè€Œæ­¤æ—¶æ˜¯ä¸ä¼šå»ä¸»åŠ¨åˆ·æ–° token çš„ï¼Œè¿™æ ·ä¼šå¯¼è‡´åœ¨ ide ä¸­æ“ä½œæ—¶é—´è¿‡é•¿æ—¶ï¼Œå›åˆ°ä¸»ç«™ä¸­ï¼Œå¯¼è‡´ token å¤±æ•ˆå›åˆ°ç™»å½•é¡µã€‚ æˆ‘ä»¬çš„åšæ³•æ˜¯ï¼Œåœ¨ proxy åå‘ä»£ç†æ—¶ï¼Œé‡å†™é¦–é¡µè¯·æ±‚çš„ response Bodyï¼Œåœ¨ Body ä¸­æ³¨å…¥ä¸€æ®µ JS ä»£ç ï¼Œè®©å®ƒå»å®æ—¶åˆ·æ–° token ğŸ‘‡ const JsScript = ` \u003cscript\u003e (function ($) { $('document').ready(function () { if (window.sessionStorage.getItem('token')) { setInterval(() =\u003e { if (window.localStorage.getItem(\"online\") === \"0\") { window.localStorage.setItem('token', '') window.localStorage.setItem('refresh_token', '') window.sessionStorage.setItem('token', '') window.sessionStorage.setItem('refresh_token', '') location.href = '/login' } if (window.sessionStorage.getItem('token') \u0026\u0026 (window.localStorage.getItem('expire_at') \u003c (Math.round(new Date() / 1000) + 30))) { $.ajax({ url: \"/api/refreshToken\", type: 'get', headers: { 'X-Token': window.localStorage.getItem('refresh_token'), }, success: function (data) { window.localStorage.setItem('token', data.token) window.localStorage.setItem('refresh_token', data.refresh_token) window.sessionStorage.setItem('token', data.token) window.sessionStorage.setItem('refresh_token', data.refresh_token) window.localStorage.setItem('expire_at', data.expire_at) window.localStorage.setItem('refresh_expire_at', data.refresh_expire_at) console.log(\"update token success to \", data.expire_at) }, error: function (data) { if (data.status !== 200) { window.localStorage.setItem('token', '') window.localStorage.setItem('refresh_token', '') window.sessionStorage.setItem('token', '') window.sessionStorage.setItem('refresh_token', '') location.href = '/login' } } }) } else { // console.log(\"expire_at\", window.localStorage.getItem('expire_at'), \"current_at\", Math.round(new Date() / 1000)) } }, 5000) } else { console.log('token empty', window.localStorage.getItem('token'), window.sessionStorage.getItem('token')) window.localStorage.setItem('token', '') window.localStorage.setItem('refresh_token', '') window.sessionStorage.setItem('token', '') window.sessionStorage.setItem('refresh_token', '') location.href = '/login' } }) })(jQuery) \u003c/script\u003e ` var NodeRedJSScript = fmt.Sprintf(` %s \u003c/body\u003e `, JsScript) var VsCodeScript = fmt.Sprintf(` \u003cscript src=\"jquery/jquery-1.12.4.min.js\"\u003e\u003c/script\u003e %s \u003c/html\u003e `, JsScript) åœ¨ä»£ç† node-red æ˜¯å¯ä»¥ç›´æ¥æ›¿æ¢ cproxy := \u0026httputil.ReverseProxy{ Director: director, ModifyResponse: func(r *http.Response) (err error) { b, err := ioutil.ReadAll(r.Body) if err != nil { err = errors.Wrapf(err, \"node red reverse proxy read body err\") logrus.Error(err.Error()) return err } body := string(b) body = strings.ReplaceAll(body, \"\u003c/body\u003e\", NodeRedJSScript) buf := bytes.NewBufferString(body) r.Body = ioutil.NopCloser(buf) r.Header[\"Content-Length\"] = []string{fmt.Sprint(buf.Len())} return nil }, } vscode æ˜¯ gzip è¿‡çš„ï¼Œéœ€è¦å…ˆè§£æä¸‹ğŸ‘‡ cproxy := \u0026httputil.ReverseProxy{ Director: director, ModifyResponse: func(r *http.Response) (err error) { upgrade := ctx.Request.Header.Get(\"Upgrade\") if upgrade == \"websocket\" { return nil } bodyReader, err := gzip.NewReader(r.Body) if err != nil \u0026\u0026 err == io.EOF { logrus.Warnf(\"gzip.NewReader err:%s\", err.Error()) return nil } if err != nil \u0026\u0026 err != io.EOF { err = errors.Wrapf(err, \"OpenVsCode gzip.NewReader err\") logrus.Error(err.Error()) return err } b, err := ioutil.ReadAll(bodyReader) if err != nil { err = errors.Wrapf(err, \"OpenVsCode ioutil.ReadAll err\") logrus.Error(err.Error()) return err } body := string(b) body = strings.ReplaceAll(body, \"\u003c/html\u003e\", VsCodeScript) var bx bytes.Buffer gz := gzip.NewWriter(\u0026bx) gz.Write([]byte(body)) gz.Close() buf := bytes.NewBuffer(bx.Bytes()) r.Body = ioutil.NopCloser(buf) r.Header[\"Content-Length\"] = []string{fmt.Sprint(buf.Len())} return nil }, } æ•ˆæœå›¾ ","date":"2021-12-20","objectID":"/problems-in-work/:5:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#ideåˆ·æ–°token"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" èŠ‚ç‚¹åŒ…é¢„è§ˆåŠŸèƒ½å®¢æˆ·æƒ³è¦é¢„è§ˆå¼€å‘è€…ä¸Šä¼ åˆ° npm å†…éƒ¨ä»“åº“é‡Œçš„èŠ‚ç‚¹åŒ…ï¼Œå‰ç«¯æ²¡æœ‰çº¿ç¨‹çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å°±åšæˆäº†ä¸€ä¸‹å¤„ç†ã€‚å…ˆæŠŠ npm åŒ…ä¸‹è½½åˆ°æœåŠ¡å™¨ï¼Œç„¶åå»éå†ç›®å½•ç”Ÿæˆç›®å½•æ ‘ï¼Œè¿‡æ»¤æ‰ç‰¹å®šåç¼€çš„æ–‡ä»¶å’Œç‰¹åˆ«å¤§çš„æ–‡ä»¶ä¸è¯»å–ï¼Œå…¶ä»–çš„æ–‡ä»¶å†…å®¹è¯»å– base64 æ ¼å¼è¿”ç»™å‰ç«¯ï¼Œå‰ç«¯å†å base64 å»å±•ç¤ºã€‚ æ ¹æ®æ–‡ä»¶å¤¹è·¯å¾„ï¼Œéå†ç”Ÿæˆç›®å½•æ ‘ğŸ‘‡ package dir import ( \"os\" \"github.com/pkg/errors\" uuid \"github.com/satori/go.uuid\" ) type Tree struct { Title string `json:\"title\"` Children []Tree `json:\"children\"` ID string `json:\"id\"` } func DirTreeJSON(dstPath string) (tree Tree, err error) { dstF, err := os.Open(dstPath) if err != nil { err = errors.Wrapf(err, \"æ‰“å¼€ç›®å½•å¤±è´¥ï¼Œç›®å½•ï¼š%s\", dstPath) return tree, err } defer dstF.Close() fileInfo, err := dstF.Stat() if err != nil { err = errors.Wrapf(err, \"DirTreeJSON dstF.stat err\") return tree, err } if fileInfo.IsDir() == false { //å¦‚æœæ˜¯æ–‡ä»¶ tree.Title = fileInfo.Name() tree.ID = uuid.NewV4().String() return tree, nil } else { //å¦‚æœæ˜¯æ–‡ä»¶å¤¹ dir, err := dstF.Readdir(0) //è·å–æ–‡ä»¶å¤¹ä¸‹å„ä¸ªæ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„fileInfo if err != nil { err = errors.Wrapf(err, \"DirTreeJSON dstF.Readdir err\") return tree, err } for _, fileInfo = range dir { x, err := DirTreeJSON(dstPath + \"/\" + fileInfo.Name()) if err != nil { err = errors.Wrapf(err, \"range DirTreeJSON err\") return tree, err } x.Title = fileInfo.Name() tree.ID = uuid.NewV4().String() tree.Children = append(tree.Children, x) } return tree, nil } } æƒ³ç€å¯ä»¥é€šè¿‡ tgz åŒ…è·å–å„ä¸ªæ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„å’Œæ–‡ä»¶å¤§å°ï¼ˆKBï¼‰ğŸ‘‡ tar tvf ResLoad_phsA-1.0.0.tgz | awk 'BEGIN {print \"{\"} {print \" \\\"\"$6\"\\\": \"$3\",\"} END {print \"}\"}' | sed -zr 's/,([^,]*$)/\\1/' å°†æ–‡ä»¶å†…å®¹è½¬æˆ base64 tar xf ResLoad_phsA-1.0.0.tgz package/ResLoad_phsA.html -O | base64 ç»“æœå±•ç¤º JS ä¸­ base64 è½¬æ¢å¯ä»¥ä½¿ç”¨ var base64Chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".split(\"\") function byteCode(codes) { var codeStr = '', binStr; for (var i = 0; i \u003c codes.length; i += 2) { binStr = parseInt(codes.slice(i, i + 2), 16).toString(2); if (binStr.length \u003c 8) { binStr = ('0000000' + binStr).slice(-8); } codeStr += binStr; } return codeStr } function base64encode(str) { var bb = byteCode(charToUtf8(str)), i, b6 = [], x, base64 = '', n; for (i = 0; i \u003c bb.length; i += 6) { b6.push(bb.slice(i, i + 6)); } for (x in b6) { if (Number(x) + 1 == b6.length) { b6[x] = (b6[x] + '00000').slice(0, 6) } base64 += base64Chars[parseInt(b6[x], 2)] } if (bb.length % 24 != 0) { n = (24 - bb.length % 24) / 8; if (n == 1) base64 += '='; else if (n == 2) base64 += '=='; } return base64; } function base64decode(str) { var bc = str.replace(/=/g, '').split(\"\"), y, z, c, b, bs = ''; for (y in bc) { c = ''; for (z in base64Chars) { if (bc[y] == base64Chars[z]) { c = z; break; } } if (c == '') return 'ç¼–ç æœ‰è¯¯'; b = Number(c).toString(2); if (b.length \u003c 6) { b = ('00000' + b).slice(-6) } bs += b } var j = Math.floor(bs.length / 8), i, ha = '', hb; for (i = 0; i \u003c j; i++) { hb = parseInt(bs.slice(i * 8, i * 8 + 8), 2).toString(16); if (hb.length \u003c 2) hb = ('00' + hb).slice(-2); ha += '%' + hb; } return decodeURIComponent(ha) } function charToUtf8(text) { var index = 0, output = ''; while (index \u003c text.length) { var character = text.charAt(index), charCode = text.charCodeAt(index); if (charCode \u003e= 0xD800 \u0026\u0026 charCode \u003c= 0xDBFF) { output += encodeURI(character + text.charAt(++index)).replace(/%/g, ''); } else { if (charCode \u003e 127) output += encodeURI(character).replace(/%/g, ''); else { var asc = charCode.toString(16).toUpperCase(); if (asc.length \u003c 2) asc = '0' + asc; output += asc; } } ++index } return output; } export {base64encode, base64decode} ","date":"2021-12-20","objectID":"/problems-in-work/:6:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#èŠ‚ç‚¹åŒ…é¢„è§ˆåŠŸèƒ½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" èŠ‚ç‚¹é¡¹ç›®ä»£ç åŠ å¯†å®¢æˆ·æƒ³è®© npm èŠ‚ç‚¹é¡¹ç›®çš„æºç ä¸å¯è¯»ï¼Œæƒ³åœ¨ npm åŒ…å…¬å¼€çš„æ—¶å€™åŠ å¯†ä¸€ä¸‹ã€‚æ‰€ä»¥æ˜¯ä¸æ˜¯å¯ä»¥è€ƒè™‘èŠ‚ç‚¹é¡¹ç›®ï¼Œæœ‰ä¸€ä¸ªsrcæºä»£ç ç›®å½•ï¼Œæ‰€æœ‰çš„æºä»£ç åŒ…æ‹¬ jsï¼Œpythonï¼Œc ä»£ç éƒ½åœ¨ src ç›®å½•ä¸‹ã€‚ å¯¹äº js æ–‡ä»¶ï¼Œç°åœ¨ä¹Ÿåªæœ‰ä¸€ä¸ª js å¯ä»¥æ–‡ä»¶ï¼Œä½¿ç”¨ javascript-obfuscator æ–¹å¼æ··æ·†ï¼ŒæŠŠæ··æ·†åçš„æ–‡ä»¶æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚ å¯¹äº python æ–‡ä»¶ï¼Œä½¿ç”¨ compile è¿›è¡Œç¼–è¯‘ï¼ŒæŠŠæ•´ä¸ªsrcç›®å½•ä¸‹çš„ py æ–‡ä»¶éƒ½ç¼–è¯‘æˆä¸€ä¸ªå•ä¸ªçš„ pyc æ–‡ä»¶ã€‚æŠŠç¼–è¯‘åçš„æ–‡ä»¶æ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•ã€‚ python -m compileall -f ./src/python å¯¹äº c æ–‡ä»¶ï¼ŒæŠŠç¼–è¯‘åçš„ build æ–‡ä»¶å¤¹ä¹Ÿä¸Šä¼ åˆ° npm ä»“åº“ï¼Œè¿™æ ·åœ¨å®‰è£…çš„æ—¶å€™ï¼Œæ˜¯ä¸æ˜¯å°±ä¸ç”¨ç¼–è¯‘äº†ã€‚ è¿™æ ·ï¼Œæºç å°±è·Ÿç¼–è¯‘åçš„æ–‡ä»¶å½»åº•åˆ†å¼€äº†ï¼Œå¯¹äºå…¬å¼€æ˜¯ä¸éœ€è¦å…¬å¼€æºæ–‡ä»¶çš„ï¼Œå¯ä»¥ç›´æ¥æŠŠsrcç›®å½•åˆ é™¤ã€‚ ","date":"2021-12-20","objectID":"/problems-in-work/:7:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#èŠ‚ç‚¹é¡¹ç›®ä»£ç åŠ å¯†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ•°æ®ä¼ è¾“åŠ å¯†å‰ç«¯ var CryptoJS = require(\"crypto-js\"); //msg éœ€è¦è¢«å¯¹ç§°åŠ å¯†çš„æ˜æ–‡ //key aes å¯¹ç§°åŠ å¯†çš„å¯†é’¥ å¿…é¡»æ˜¯16é•¿åº¦,ä¸ºäº†å’Œåç«¯äº¤äº’ keyå­—ç¬¦ä¸²å¿…é¡»æ˜¯16è¿›åˆ¶å­—ç¬¦ä¸²,å¦åœ¨ç»™golangè¿›è¡Œstring -\u003e []byteå¸¦æ¥å›°éš¾ function aseEncrypt(msg, key) { key = PaddingLeft(key, 16);//ä¿è¯keyçš„é•¿åº¦ä¸º16byte,è¿›è¡Œ'0'è¡¥ä½ key = CryptoJS.enc.Utf8.parse(key); // åŠ å¯†ç»“æœè¿”å›çš„æ˜¯CipherParams objectç±»å‹ // key å’Œ iv ä½¿ç”¨åŒä¸€ä¸ªå€¼ var encrypted = CryptoJS.AES.encrypt(msg, key, { iv: key, mode: CryptoJS.mode.CBC,// CBCç®—æ³• padding: CryptoJS.pad.Pkcs7 //ä½¿ç”¨pkcs7 è¿›è¡Œpadding åç«¯éœ€è¦æ³¨æ„ }); // ciphertextæ˜¯å¯†æ–‡,toString()å†…ä¼ ç¼–ç æ ¼å¼,æ¯”å¦‚Base64,è¿™é‡Œç”¨äº†16è¿›åˆ¶ // å¦‚æœå¯†æ–‡è¦æ”¾åœ¨ urlçš„å‚æ•°ä¸­ å»ºè®®è¿›è¡Œ base64-url-encoding å’Œ hex encoding, ä¸å»ºè®®ä½¿ç”¨base64 encoding return encrypted.ciphertext.toString(CryptoJS.enc.Hex) //åç«¯å¿…é¡»è¿›è¡Œç›¸åæ“ä½œ } // ç¡®ä¿keyçš„é•¿åº¦,ä½¿ç”¨ 0 å­—ç¬¦æ¥è¡¥ä½ // length å»ºè®® 16 24 32 function PaddingLeft(key, length) { let pkey = key.toString(); let l = pkey.length; if (l \u003c length) { pkey = new Array(length - l + 1).join('0') + pkey; } else if (l \u003e length) { pkey = pkey.slice(length); } return pkey; } let xpass = aseEncrypt(\"å…ˆå¸åˆ›ä¸šæœªåŠè€Œä¸­é“å´©æ®‚ï¼Œä»Šå¤©ä¸‹ä¸‰åˆ†ï¼Œç›Šå·ç–²å¼Šï¼Œæ­¤è¯šå±æ€¥å­˜äº¡ä¹‹ç§‹ä¹Ÿã€‚ç„¶ä¾å«ä¹‹è‡£ä¸æ‡ˆäºå†…ï¼Œå¿ å¿—ä¹‹å£«å¿˜èº«äºå¤–è€…ï¼Œç›–è¿½å…ˆå¸ä¹‹æ®Šé‡ï¼Œæ¬²æŠ¥ä¹‹äºé™›ä¸‹ä¹Ÿã€‚è¯šå®œå¼€å¼ åœ£å¬ï¼Œä»¥å…‰å…ˆå¸é—å¾·ï¼Œæ¢å¼˜å¿—å£«ä¹‹æ°”ï¼Œä¸å®œå¦„è‡ªè²è–„ï¼Œå¼•å–»å¤±ä¹‰ï¼Œä»¥å¡å¿ è°ä¹‹è·¯ä¹Ÿã€‚å®«ä¸­åºœä¸­ï¼Œä¿±ä¸ºä¸€ä½“ï¼Œé™Ÿç½šè‡§å¦ï¼Œä¸å®œå¼‚åŒã€‚è‹¥æœ‰ä½œå¥¸çŠ¯ç§‘åŠä¸ºå¿ å–„è€…ï¼Œå®œä»˜æœ‰å¸è®ºå…¶åˆ‘èµï¼Œä»¥æ˜­é™›ä¸‹å¹³æ˜ä¹‹ç†ï¼Œä¸å®œåç§ï¼Œä½¿å†…å¤–å¼‚æ³•ä¹Ÿã€‚ä¾ä¸­ã€ä¾éƒéƒ­æ”¸ä¹‹ã€è´¹ç¥ã€è‘£å…ç­‰ï¼Œæ­¤çš†è‰¯å®ï¼Œå¿—è™‘å¿ çº¯ï¼Œæ˜¯ä»¥å…ˆå¸ç®€æ‹”ä»¥é—é™›ä¸‹ã€‚æ„šä»¥ä¸ºå®«ä¸­ä¹‹äº‹ï¼Œäº‹æ— å¤§å°ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œç„¶åæ–½è¡Œï¼Œå¿…èƒ½è£¨è¡¥é˜™æ¼ï¼Œæœ‰æ‰€å¹¿ç›Šã€‚å°†å†›å‘å® ï¼Œæ€§è¡Œæ·‘å‡ï¼Œæ™“ç•…å†›äº‹ï¼Œè¯•ç”¨äºæ˜”æ—¥ï¼Œå…ˆå¸ç§°ä¹‹æ›°èƒ½ï¼Œæ˜¯ä»¥ä¼—è®®ä¸¾å® ä¸ºç£ã€‚æ„šä»¥ä¸ºè¥ä¸­ä¹‹äº‹ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œå¿…èƒ½ä½¿è¡Œé˜µå’Œç¦ï¼Œä¼˜åŠ£å¾—æ‰€ã€‚äº²è´¤è‡£ï¼Œè¿œå°äººï¼Œæ­¤å…ˆæ±‰æ‰€ä»¥å…´éš†ä¹Ÿï¼›äº²å°äººï¼Œè¿œè´¤è‡£ï¼Œæ­¤åæ±‰æ‰€ä»¥å€¾é¢“ä¹Ÿã€‚å…ˆå¸åœ¨æ—¶ï¼Œæ¯ä¸è‡£è®ºæ­¤äº‹ï¼Œæœªå°ä¸å¹æ¯ç—›æ¨äºæ¡“ã€çµä¹Ÿã€‚ä¾ä¸­ã€å°šä¹¦ã€é•¿å²ã€å‚å†›ï¼Œæ­¤æ‚‰è´è‰¯æ­»èŠ‚ä¹‹è‡£ï¼Œæ„¿é™›ä¸‹äº²ä¹‹ä¿¡ä¹‹ï¼Œåˆ™æ±‰å®¤ä¹‹éš†ï¼Œå¯è®¡æ—¥è€Œå¾…ä¹Ÿã€‚è‡£æœ¬å¸ƒè¡£ï¼Œèº¬è€•äºå—é˜³ï¼Œè‹Ÿå…¨æ€§å‘½äºä¹±ä¸–ï¼Œä¸æ±‚é—»è¾¾äºè¯¸ä¾¯ã€‚å…ˆå¸ä¸ä»¥è‡£å‘é„™ï¼ŒçŒ¥è‡ªæ‰å±ˆï¼Œä¸‰é¡¾è‡£äºè‰åºä¹‹ä¸­ï¼Œå’¨è‡£ä»¥å½“ä¸–ä¹‹äº‹ï¼Œç”±æ˜¯æ„Ÿæ¿€ï¼Œé‚è®¸å…ˆå¸ä»¥é©±é©°ã€‚åå€¼å€¾è¦†ï¼Œå—ä»»äºè´¥å†›ä¹‹é™…ï¼Œå¥‰å‘½äºå±éš¾ä¹‹é—´ï¼Œå°”æ¥äºŒåæœ‰ä¸€å¹´çŸ£ã€‚å…ˆå¸çŸ¥è‡£è°¨æ…ï¼Œæ•…ä¸´å´©å¯„è‡£ä»¥å¤§äº‹ä¹Ÿã€‚å—å‘½ä»¥æ¥ï¼Œå¤™å¤œå¿§å¹ï¼Œææ‰˜ä»˜ä¸æ•ˆï¼Œä»¥ä¼¤å…ˆå¸ä¹‹æ˜ï¼Œæ•…äº”æœˆæ¸¡æ³¸ï¼Œæ·±å…¥ä¸æ¯›ã€‚ä»Šå—æ–¹å·²å®šï¼Œå…µç”²å·²è¶³ï¼Œå½“å¥–ç‡ä¸‰å†›ï¼ŒåŒ—å®šä¸­åŸï¼Œåº¶ç«­é©½é’ï¼Œæ”˜é™¤å¥¸å‡¶ï¼Œå…´å¤æ±‰å®¤ï¼Œè¿˜äºæ—§éƒ½ã€‚æ­¤è‡£æ‰€ä»¥æŠ¥å…ˆå¸è€Œå¿ é™›ä¸‹ä¹‹èŒåˆ†ä¹Ÿã€‚è‡³äºæ–Ÿé…ŒæŸç›Šï¼Œè¿›å°½å¿ è¨€ï¼Œåˆ™æ”¸ä¹‹ã€ç¥ã€å…ä¹‹ä»»ä¹Ÿã€‚æ„¿é™›ä¸‹æ‰˜è‡£ä»¥è®¨è´¼å…´å¤ä¹‹æ•ˆï¼Œä¸æ•ˆï¼Œåˆ™æ²»è‡£ä¹‹ç½ªï¼Œä»¥å‘Šå…ˆå¸ä¹‹çµã€‚è‹¥æ— å…´å¾·ä¹‹è¨€ï¼Œåˆ™è´£æ”¸ä¹‹ã€ç¥ã€å…ç­‰ä¹‹æ…¢ï¼Œä»¥å½°å…¶å’ï¼›é™›ä¸‹äº¦å®œè‡ªè°‹ï¼Œä»¥å’¨è¯¹å–„é“ï¼Œå¯Ÿçº³é›…è¨€ï¼Œæ·±è¿½å…ˆå¸é—è¯ï¼Œè‡£ä¸èƒœå—æ©æ„Ÿæ¿€ã€‚ä»Šå½“è¿œç¦»ï¼Œä¸´è¡¨æ¶•é›¶ï¼Œä¸çŸ¥æ‰€è¨€ã€‚å…ˆå¸åˆ›ä¸šæœªåŠè€Œä¸­é“å´©æ®‚ï¼Œä»Šå¤©ä¸‹ä¸‰åˆ†ï¼Œç›Šå·ç–²å¼Šï¼Œæ­¤è¯šå±æ€¥å­˜äº¡ä¹‹ç§‹ä¹Ÿã€‚ç„¶ä¾å«ä¹‹è‡£ä¸æ‡ˆäºå†…ï¼Œå¿ å¿—ä¹‹å£«å¿˜èº«äºå¤–è€…ï¼Œç›–è¿½å…ˆå¸ä¹‹æ®Šé‡ï¼Œæ¬²æŠ¥ä¹‹äºé™›ä¸‹ä¹Ÿã€‚è¯šå®œå¼€å¼ åœ£å¬ï¼Œä»¥å…‰å…ˆå¸é—å¾·ï¼Œæ¢å¼˜å¿—å£«ä¹‹æ°”ï¼Œä¸å®œå¦„è‡ªè²è–„ï¼Œå¼•å–»å¤±ä¹‰ï¼Œä»¥å¡å¿ è°ä¹‹è·¯ä¹Ÿã€‚å®«ä¸­åºœä¸­ï¼Œä¿±ä¸ºä¸€ä½“ï¼Œé™Ÿç½šè‡§å¦ï¼Œä¸å®œå¼‚åŒã€‚è‹¥æœ‰ä½œå¥¸çŠ¯ç§‘åŠä¸ºå¿ å–„è€…ï¼Œå®œä»˜æœ‰å¸è®ºå…¶åˆ‘èµï¼Œä»¥æ˜­é™›ä¸‹å¹³æ˜ä¹‹ç†ï¼Œä¸å®œåç§ï¼Œä½¿å†…å¤–å¼‚æ³•ä¹Ÿã€‚ä¾ä¸­ã€ä¾éƒéƒ­æ”¸ä¹‹ã€è´¹ç¥ã€è‘£å…ç­‰ï¼Œæ­¤çš†è‰¯å®ï¼Œå¿—è™‘å¿ çº¯ï¼Œæ˜¯ä»¥å…ˆå¸ç®€æ‹”ä»¥é—é™›ä¸‹ã€‚æ„šä»¥ä¸ºå®«ä¸­ä¹‹äº‹ï¼Œäº‹æ— å¤§å°ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œç„¶åæ–½è¡Œï¼Œå¿…èƒ½è£¨è¡¥é˜™æ¼ï¼Œæœ‰æ‰€å¹¿ç›Šã€‚å°†å†›å‘å® ï¼Œæ€§è¡Œæ·‘å‡ï¼Œæ™“ç•…å†›äº‹ï¼Œè¯•ç”¨äºæ˜”æ—¥ï¼Œå…ˆå¸ç§°ä¹‹æ›°èƒ½ï¼Œæ˜¯ä»¥ä¼—è®®ä¸¾å® ä¸ºç£ã€‚æ„šä»¥ä¸ºè¥ä¸­ä¹‹äº‹ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œå¿…èƒ½ä½¿è¡Œé˜µå’Œç¦ï¼Œä¼˜åŠ£å¾—æ‰€ã€‚äº²è´¤è‡£ï¼Œè¿œå°äººï¼Œæ­¤å…ˆæ±‰æ‰€ä»¥å…´éš†ä¹Ÿï¼›äº²å°äººï¼Œè¿œè´¤è‡£ï¼Œæ­¤åæ±‰æ‰€ä»¥å€¾é¢“ä¹Ÿã€‚å…ˆå¸åœ¨æ—¶ï¼Œæ¯ä¸è‡£è®ºæ­¤äº‹ï¼Œæœªå°ä¸å¹æ¯ç—›æ¨äºæ¡“ã€çµä¹Ÿã€‚ä¾ä¸­ã€å°šä¹¦ã€é•¿å²ã€å‚å†›ï¼Œæ­¤æ‚‰è´è‰¯æ­»èŠ‚ä¹‹è‡£ï¼Œæ„¿é™›ä¸‹äº²ä¹‹ä¿¡ä¹‹ï¼Œåˆ™æ±‰å®¤ä¹‹éš†ï¼Œå¯è®¡æ—¥è€Œå¾…ä¹Ÿã€‚è‡£æœ¬å¸ƒè¡£ï¼Œèº¬è€•äºå—é˜³ï¼Œè‹Ÿå…¨æ€§å‘½äºä¹±ä¸–ï¼Œä¸æ±‚é—»è¾¾äºè¯¸ä¾¯ã€‚å…ˆå¸ä¸ä»¥è‡£å‘é„™ï¼ŒçŒ¥è‡ªæ‰å±ˆï¼Œä¸‰é¡¾è‡£äºè‰åºä¹‹ä¸­ï¼Œå’¨è‡£ä»¥å½“ä¸–ä¹‹äº‹ï¼Œç”±æ˜¯æ„Ÿæ¿€ï¼Œé‚è®¸å…ˆå¸ä»¥é©±é©°ã€‚åå€¼å€¾è¦†ï¼Œå—ä»»äºè´¥å†›ä¹‹é™…ï¼Œå¥‰å‘½äºå±éš¾ä¹‹é—´ï¼Œå°”æ¥äºŒåæœ‰ä¸€å¹´çŸ£ã€‚å…ˆå¸çŸ¥è‡£è°¨æ…ï¼Œæ•…ä¸´å´©å¯„è‡£ä»¥å¤§äº‹ä¹Ÿã€‚å—å‘½ä»¥æ¥ï¼Œå¤™å¤œå¿§å¹ï¼Œææ‰˜ä»˜ä¸æ•ˆï¼Œä»¥ä¼¤å…ˆå¸ä¹‹æ˜ï¼Œæ•…äº”æœˆæ¸¡æ³¸ï¼Œæ·±å…¥ä¸æ¯›ã€‚ä»Šå—æ–¹å·²å®šï¼Œå…µç”²å·²è¶³ï¼Œå½“å¥–ç‡ä¸‰å†›ï¼ŒåŒ—å®šä¸­åŸï¼Œåº¶ç«­é©½é’ï¼Œæ”˜é™¤å¥¸å‡¶ï¼Œå…´å¤æ±‰å®¤ï¼Œè¿˜äºæ—§éƒ½ã€‚æ­¤è‡£æ‰€ä»¥æŠ¥å…ˆå¸è€Œå¿ é™›ä¸‹ä¹‹èŒåˆ†ä¹Ÿã€‚è‡³äºæ–Ÿé…ŒæŸç›Šï¼Œè¿›å°½å¿ è¨€ï¼Œåˆ™æ”¸ä¹‹ã€ç¥ã€å…ä¹‹ä»»ä¹Ÿã€‚æ„¿é™›ä¸‹æ‰˜è‡£ä»¥è®¨è´¼å…´å¤ä¹‹æ•ˆï¼Œä¸æ•ˆï¼Œåˆ™æ²»è‡£ä¹‹ç½ªï¼Œä»¥å‘Šå…ˆå¸ä¹‹çµã€‚è‹¥æ— å…´å¾·ä¹‹è¨€ï¼Œåˆ™è´£æ”¸ä¹‹ã€ç¥ã€å…ç­‰ä¹‹æ…¢ï¼Œä»¥å½°å…¶å’ï¼›é™›ä¸‹äº¦å®œè‡ªè°‹ï¼Œä»¥å’¨è¯¹å–„é“ï¼Œå¯Ÿçº³é›…è¨€ï¼Œæ·±è¿½å…ˆå¸é—è¯ï¼Œè‡£ä¸èƒœå—æ©æ„Ÿæ¿€ã€‚ä»Šå½“è¿œç¦»ï¼Œä¸´è¡¨æ¶•é›¶ï¼Œä¸çŸ¥æ‰€è¨€ã€‚å…ˆå¸åˆ›ä¸šæœªåŠè€Œä¸­é“å´©æ®‚ï¼Œä»Šå¤©ä¸‹ä¸‰åˆ†ï¼Œç›Šå·ç–²å¼Šï¼Œæ­¤è¯šå±æ€¥å­˜äº¡ä¹‹ç§‹ä¹Ÿã€‚ç„¶ä¾å«ä¹‹è‡£ä¸æ‡ˆäºå†…ï¼Œå¿ å¿—ä¹‹å£«å¿˜èº«äºå¤–è€…ï¼Œç›–è¿½å…ˆå¸ä¹‹æ®Šé‡ï¼Œæ¬²æŠ¥ä¹‹äºé™›ä¸‹ä¹Ÿã€‚è¯šå®œå¼€å¼ åœ£å¬ï¼Œä»¥å…‰å…ˆå¸é—å¾·ï¼Œæ¢å¼˜å¿—å£«ä¹‹æ°”ï¼Œä¸å®œå¦„è‡ªè²è–„ï¼Œå¼•å–»å¤±ä¹‰ï¼Œä»¥å¡å¿ è°ä¹‹è·¯ä¹Ÿã€‚å®«ä¸­åºœä¸­ï¼Œä¿±ä¸ºä¸€ä½“ï¼Œé™Ÿç½šè‡§å¦ï¼Œä¸å®œå¼‚åŒã€‚è‹¥æœ‰ä½œå¥¸çŠ¯ç§‘åŠä¸ºå¿ å–„è€…ï¼Œå®œä»˜æœ‰å¸è®ºå…¶åˆ‘èµï¼Œä»¥æ˜­é™›ä¸‹å¹³æ˜ä¹‹ç†ï¼Œä¸å®œåç§ï¼Œä½¿å†…å¤–å¼‚æ³•ä¹Ÿã€‚ä¾ä¸­ã€ä¾éƒéƒ­æ”¸ä¹‹ã€è´¹ç¥ã€è‘£å…ç­‰ï¼Œæ­¤çš†è‰¯å®ï¼Œå¿—è™‘å¿ çº¯ï¼Œæ˜¯ä»¥å…ˆå¸ç®€æ‹”ä»¥é—é™›ä¸‹ã€‚æ„šä»¥ä¸ºå®«ä¸­ä¹‹äº‹ï¼Œäº‹æ— å¤§å°ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œç„¶åæ–½è¡Œï¼Œå¿…èƒ½è£¨è¡¥é˜™æ¼ï¼Œæœ‰æ‰€å¹¿ç›Šã€‚å°†å†›å‘å® ï¼Œæ€§è¡Œæ·‘å‡ï¼Œæ™“ç•…å†›äº‹ï¼Œè¯•ç”¨äºæ˜”æ—¥ï¼Œå…ˆå¸ç§°ä¹‹æ›°èƒ½ï¼Œæ˜¯ä»¥ä¼—è®®ä¸¾å® ä¸ºç£ã€‚æ„šä»¥ä¸ºè¥ä¸­ä¹‹äº‹ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œå¿…èƒ½ä½¿è¡Œé˜µå’Œç¦ï¼Œä¼˜åŠ£å¾—æ‰€ã€‚äº²è´¤è‡£ï¼Œè¿œå°äººï¼Œæ­¤å…ˆæ±‰æ‰€ä»¥å…´éš†ä¹Ÿï¼›äº²å°äººï¼Œè¿œè´¤è‡£ï¼Œæ­¤åæ±‰æ‰€ä»¥å€¾é¢“ä¹Ÿã€‚å…ˆå¸åœ¨æ—¶ï¼Œæ¯ä¸è‡£è®ºæ­¤äº‹ï¼Œæœªå°ä¸å¹æ¯ç—›æ¨äºæ¡“ã€çµä¹Ÿã€‚ä¾ä¸­ã€å°šä¹¦ã€é•¿å²ã€å‚å†›ï¼Œæ­¤æ‚‰è´è‰¯æ­»èŠ‚ä¹‹è‡£ï¼Œæ„¿é™›ä¸‹äº²ä¹‹ä¿¡ä¹‹ï¼Œåˆ™æ±‰å®¤ä¹‹éš†ï¼Œå¯è®¡æ—¥è€Œå¾…ä¹Ÿã€‚è‡£æœ¬å¸ƒè¡£ï¼Œèº¬è€•äºå—é˜³ï¼Œè‹Ÿå…¨æ€§å‘½äºä¹±ä¸–ï¼Œä¸æ±‚é—»è¾¾äºè¯¸ä¾¯ã€‚å…ˆå¸ä¸ä»¥è‡£å‘é„™ï¼ŒçŒ¥è‡ªæ‰å±ˆï¼Œä¸‰é¡¾è‡£äºè‰åºä¹‹ä¸­ï¼Œå’¨è‡£ä»¥å½“ä¸–ä¹‹äº‹ï¼Œç”±æ˜¯æ„Ÿæ¿€ï¼Œé‚è®¸å…ˆå¸ä»¥é©±é©°ã€‚åå€¼å€¾è¦†ï¼Œå—ä»»äºè´¥å†›ä¹‹é™…ï¼Œå¥‰å‘½äºå±éš¾ä¹‹é—´ï¼Œå°”æ¥äºŒåæœ‰ä¸€å¹´çŸ£ã€‚å…ˆå¸çŸ¥è‡£è°¨æ…ï¼Œæ•…ä¸´å´©å¯„è‡£ä»¥å¤§äº‹ä¹Ÿã€‚å—å‘½ä»¥æ¥ï¼Œå¤™å¤œå¿§å¹ï¼Œææ‰˜ä»˜ä¸æ•ˆï¼Œä»¥ä¼¤å…ˆå¸ä¹‹æ˜ï¼Œæ•…äº”æœˆæ¸¡æ³¸ï¼Œæ·±å…¥ä¸æ¯›ã€‚ä»Šå—æ–¹å·²å®šï¼Œå…µç”²å·²è¶³ï¼Œå½“å¥–ç‡ä¸‰å†›ï¼ŒåŒ—å®šä¸­åŸï¼Œåº¶ç«­é©½é’ï¼Œæ”˜é™¤å¥¸å‡¶ï¼Œå…´å¤æ±‰å®¤ï¼Œè¿˜äºæ—§éƒ½ã€‚æ­¤è‡£æ‰€ä»¥æŠ¥å…ˆå¸è€Œå¿ é™›ä¸‹ä¹‹èŒåˆ†ä¹Ÿã€‚è‡³äºæ–Ÿé…ŒæŸç›Šï¼Œè¿›å°½å¿ è¨€ï¼Œåˆ™æ”¸ä¹‹ã€ç¥ã€å…ä¹‹ä»»ä¹Ÿã€‚æ„¿é™›ä¸‹æ‰˜è‡£ä»¥è®¨è´¼å…´å¤ä¹‹æ•ˆï¼Œä¸æ•ˆï¼Œåˆ™æ²»è‡£ä¹‹ç½ªï¼Œä»¥å‘Šå…ˆå¸ä¹‹çµã€‚è‹¥æ— å…´å¾·ä¹‹è¨€ï¼Œåˆ™è´£æ”¸ä¹‹ã€ç¥ã€å…ç­‰ä¹‹æ…¢ï¼Œä»¥å½°å…¶å’ï¼›é™›ä¸‹äº¦å®œè‡ªè°‹ï¼Œä»¥å’¨è¯¹å–„é“ï¼Œå¯Ÿçº³é›…è¨€ï¼Œæ·±è¿½å…ˆå¸é—è¯ï¼Œè‡£ä¸èƒœå—æ©æ„Ÿæ¿€ã€‚ä»Šå½“è¿œç¦»ï¼Œä¸´è¡¨æ¶•é›¶ï¼Œä¸çŸ¥æ‰€è¨€ã€‚å…ˆå¸åˆ›ä¸šæœªåŠè€Œä¸­é“å´©æ®‚ï¼Œä»Šå¤©ä¸‹ä¸‰åˆ†ï¼Œç›Šå·ç–²å¼Šï¼Œæ­¤è¯šå±æ€¥å­˜äº¡ä¹‹ç§‹ä¹Ÿã€‚ç„¶ä¾å«ä¹‹è‡£ä¸æ‡ˆäºå†…ï¼Œå¿ å¿—ä¹‹å£«å¿˜èº«äºå¤–è€…ï¼Œç›–è¿½å…ˆå¸ä¹‹æ®Šé‡ï¼Œæ¬²æŠ¥ä¹‹äºé™›ä¸‹ä¹Ÿã€‚è¯šå®œå¼€å¼ åœ£å¬ï¼Œä»¥å…‰å…ˆå¸é—å¾·ï¼Œæ¢å¼˜å¿—å£«ä¹‹æ°”ï¼Œä¸å®œå¦„è‡ªè²è–„ï¼Œå¼•å–»å¤±ä¹‰ï¼Œä»¥å¡å¿ è°ä¹‹è·¯ä¹Ÿã€‚å®«ä¸­åºœä¸­ï¼Œä¿±ä¸ºä¸€ä½“ï¼Œé™Ÿç½šè‡§å¦ï¼Œä¸å®œå¼‚åŒã€‚è‹¥æœ‰ä½œå¥¸çŠ¯ç§‘åŠä¸ºå¿ å–„è€…ï¼Œå®œä»˜æœ‰å¸è®ºå…¶åˆ‘èµï¼Œä»¥æ˜­é™›ä¸‹å¹³æ˜ä¹‹ç†ï¼Œä¸å®œåç§ï¼Œä½¿å†…å¤–å¼‚æ³•ä¹Ÿã€‚ä¾ä¸­ã€ä¾éƒéƒ­æ”¸ä¹‹ã€è´¹ç¥ã€è‘£å…ç­‰ï¼Œæ­¤çš†è‰¯å®ï¼Œå¿—è™‘å¿ çº¯ï¼Œæ˜¯ä»¥å…ˆå¸ç®€æ‹”ä»¥é—é™›ä¸‹ã€‚æ„šä»¥ä¸ºå®«ä¸­ä¹‹äº‹ï¼Œäº‹æ— å¤§å°ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œç„¶åæ–½è¡Œï¼Œå¿…èƒ½è£¨è¡¥é˜™æ¼ï¼Œæœ‰æ‰€å¹¿ç›Šã€‚å°†å†›å‘å® ï¼Œæ€§è¡Œæ·‘å‡ï¼Œæ™“ç•…å†›äº‹ï¼Œè¯•ç”¨äºæ˜”æ—¥ï¼Œå…ˆå¸ç§°ä¹‹æ›°èƒ½ï¼Œæ˜¯ä»¥ä¼—è®®ä¸¾å® ä¸ºç£ã€‚æ„šä»¥ä¸ºè¥ä¸­ä¹‹äº‹ï¼Œæ‚‰ä»¥å’¨ä¹‹ï¼Œå¿…èƒ½ä½¿è¡Œé˜µå’Œç¦ï¼Œä¼˜åŠ£å¾—æ‰€ã€‚äº²è´¤è‡£ï¼Œè¿œå°äººï¼Œæ­¤å…ˆæ±‰æ‰€ä»¥å…´éš†ä¹Ÿï¼›äº²å°äººï¼Œè¿œè´¤è‡£ï¼Œæ­¤åæ±‰æ‰€ä»¥å€¾é¢“ä¹Ÿã€‚å…ˆå¸åœ¨æ—¶ï¼Œæ¯ä¸è‡£è®ºæ­¤äº‹ï¼Œæœªå°ä¸å¹æ¯ç—›æ¨äºæ¡“ã€çµä¹Ÿã€‚ä¾ä¸­ã€å°šä¹¦ã€é•¿å²ã€å‚å†›ï¼Œæ­¤æ‚‰è´è‰¯æ­»èŠ‚ä¹‹è‡£ï¼Œæ„¿é™›ä¸‹äº²ä¹‹ä¿¡ä¹‹ï¼Œåˆ™æ±‰å®¤ä¹‹éš†ï¼Œå¯è®¡æ—¥è€Œå¾…ä¹Ÿã€‚è‡£æœ¬å¸ƒè¡£ï¼Œèº¬è€•äºå—é˜³ï¼Œè‹Ÿå…¨æ€§å‘½äºä¹±ä¸–ï¼Œä¸æ±‚é—»è¾¾äºè¯¸ä¾¯ã€‚å…ˆå¸ä¸ä»¥è‡£å‘é„™ï¼ŒçŒ¥è‡ªæ‰å±ˆï¼Œä¸‰é¡¾è‡£äºè‰åºä¹‹ä¸­ï¼Œå’¨è‡£ä»¥å½“ä¸–ä¹‹äº‹ï¼Œç”±æ˜¯æ„Ÿæ¿€ï¼Œé‚è®¸å…ˆå¸ä»¥é©±é©°ã€‚åå€¼å€¾è¦†ï¼Œå—ä»»äºè´¥å†›ä¹‹é™…ï¼Œå¥‰å‘½äºå±éš¾ä¹‹é—´ï¼Œå°”æ¥äºŒåæœ‰ä¸€å¹´çŸ£ã€‚å…ˆå¸çŸ¥è‡£è°¨æ…ï¼Œæ•…ä¸´å´©å¯„è‡£ä»¥å¤§äº‹ä¹Ÿã€‚å—å‘½ä»¥æ¥ï¼Œå¤™å¤œå¿§å¹ï¼Œææ‰˜ä»˜ä¸æ•ˆï¼Œä»¥ä¼¤å…ˆå¸ä¹‹æ˜ï¼Œæ•…äº”æœˆæ¸¡æ³¸ï¼Œæ·±å…¥ä¸æ¯›ã€‚ä»Šå—æ–¹å·²å®šï¼Œå…µç”²å·²è¶³ï¼Œå½“å¥–ç‡ä¸‰å†›ï¼ŒåŒ—å®šä¸­åŸï¼Œåº¶ç«­é©½é’ï¼Œæ”˜é™¤å¥¸å‡¶ï¼Œå…´å¤æ±‰å®¤ï¼Œè¿˜äºæ—§éƒ½ã€‚æ­¤è‡£æ‰€ä»¥æŠ¥å…ˆå¸è€Œå¿ é™›ä¸‹ä¹‹èŒåˆ†ä¹Ÿã€‚è‡³äºæ–Ÿé…ŒæŸç›Šï¼Œè¿›å°½å¿ è¨€ï¼Œåˆ™æ”¸ä¹‹ã€ç¥ã€å…ä¹‹ä»»ä¹Ÿã€‚æ„¿é™›ä¸‹æ‰˜è‡£ä»¥è®¨è´¼å…´å¤ä¹‹æ•ˆï¼Œä¸æ•ˆï¼Œåˆ™æ²»è‡£ä¹‹ç½ªï¼Œä»¥å‘Šå…ˆå¸ä¹‹çµã€‚è‹¥æ— å…´å¾·ä¹‹è¨€ï¼Œåˆ™è´£æ”¸ä¹‹ã€ç¥ã€å…ç­‰ä¹‹æ…¢ï¼Œä»¥å½°å…¶å’ï¼›é™›ä¸‹äº¦å®œè‡ªè°‹ï¼Œä»¥å’¨è¯¹å–„é“ï¼Œå¯Ÿçº³é›…è¨€ï¼Œæ·±è¿½å…ˆå¸é—è¯ï¼Œè‡£ä¸èƒœå—æ©æ„Ÿæ¿€ã€‚ä»Šå½“è¿œç¦»ï¼Œä¸´è¡¨æ¶•é›¶ï¼Œä¸çŸ¥æ‰€è¨€ã€‚å…ˆå¸åˆ›ä¸šæœªåŠè€Œä¸­é“å´©æ®‚ï¼Œä»Šå¤©ä¸‹ä¸‰åˆ†ï¼Œç›Šå·ç–²å¼Šï¼Œæ­¤è¯šå±æ€¥å­˜äº¡ä¹‹ç§‹ä¹Ÿã€‚ç„¶ä¾å«ä¹‹è‡£ä¸æ‡ˆäºå†…ï¼Œå¿ å¿—ä¹‹å£«å¿˜èº«äºå¤–è€…ï¼Œç›–è¿½å…ˆå¸ä¹‹æ®Šé‡ï¼Œæ¬²æŠ¥ä¹‹äºé™›ä¸‹ä¹Ÿã€‚è¯šå®œå¼€","date":"2021-12-20","objectID":"/problems-in-work/:8:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#æ•°æ®ä¼ è¾“åŠ å¯†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ AESå¯¹ç§° Crypto-JS åŠ å¯†å’ŒGoè§£å¯† python ä»£ç ç¼–è¯‘ã€æ‰“åŒ… ","date":"2021-12-20","objectID":"/problems-in-work/:9:0","series":[],"tags":["é¢è¯•"],"title":"å·¥ä½œä¸­é—®é¢˜æ€»ç»“","uri":"/problems-in-work/#å‚è€ƒ"},{"categories":["web"],"content":"xiaobinqt,node-addon-api,js è°ƒç”¨ c è¯­è¨€,jc call c function,How to call C function from nodeJS,node è°ƒç”¨C/C++ æ–¹æ³•","date":"2021-11-18","objectID":"/js-call-c/","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/"},{"categories":["web"],"content":"æœ€è¿‘åœ¨ node é¡¹ç›®å¼€å‘ä¸­ï¼Œæœ‰ä¸ªéœ€æ±‚æ˜¯ nodeJS éœ€è¦æ”¯æŒè°ƒç”¨ C è¯­è¨€çš„å‡½æ•°ï¼Œnode-addon-api å¯ä»¥æ”¯æŒè¿™ä¸ªéœ€æ±‚ã€‚ ","date":"2021-11-18","objectID":"/js-call-c/:0:0","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#"},{"categories":["web"],"content":" å¼€å‘ç¯å¢ƒæˆ‘ç”¨çš„å¼€å‘ç¯å¢ƒ docker èµ·çš„ code-server ç¯å¢ƒï¼Œcode-server ç‰ˆæœ¬ä¸º code-server:version-v3.11.1 ã€‚å¯ä»¥æŠŠ code-server ç†è§£æˆä¸€ä¸ªåœ¨çº¿ vscode ç¯å¢ƒï¼Œå°±åƒ github çš„åœ¨çº¿ web ç¼–è¾‘å™¨ä¸€æ ·ã€‚ docker pull linuxserver/code-server:version-v3.11.1 code-server github web ç¼–è¾‘å™¨ ","date":"2021-11-18","objectID":"/js-call-c/:1:0","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#å¼€å‘ç¯å¢ƒ"},{"categories":["web"],"content":" åŠ æ³•å™¨ç¤ºä¾‹å¼€å‘ç¯å¢ƒæ­å»ºæˆåŠŸåï¼Œå¯ä»¥å®ç°ä¸€ä¸ªå°åŠŸèƒ½ï¼Œä»¥ç†Ÿæ‚‰ node-addon-api çš„ä½¿ç”¨ã€‚ ç°åœ¨å®ç°ä¸€ä¸ªåŠ æ³•å™¨ï¼ŒJS è°ƒç”¨ C è¯­è¨€çš„ add æ–¹æ³•ï¼Œä¼ å…¥ 2 ä¸ªå‚æ•°ï¼ŒC è¯­è¨€ç´¯åŠ åè¿”å›ç»“æœã€‚ ","date":"2021-11-18","objectID":"/js-call-c/:2:0","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#åŠ æ³•å™¨ç¤ºä¾‹"},{"categories":["web"],"content":" é¡¹ç›®åˆå§‹åŒ–åˆ›å»ºé¡¹ç›®å¹¶è¿›è¡Œ npm init åˆå§‹åŒ–ï¼š åˆ›å»ºé¡¹ç›®å¹¶åˆå§‹åŒ– å®‰è£… node-addon-apiï¼š npm i node-addon-api å®‰è£… npm ä¾èµ–åŒ… ","date":"2021-11-18","objectID":"/js-call-c/:2:1","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#é¡¹ç›®åˆå§‹åŒ–"},{"categories":["web"],"content":" c ä»£ç æ–°å»ºä¸€ä¸ª cal.cc æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š #include \u003cnapi.h\u003e // å®šä¹‰ä¸€ä¸ª Add() æ–¹æ³• Napi::Value Add(const Napi::CallbackInfo\u0026 info) { Napi::Env env = info.Env(); // è·å– js ä¸Šä¸‹æ–‡ä¿¡æ¯ if (info.Length() \u003c 2) { Napi::TypeError::New(env, \"Wrong number of arguments\") .ThrowAsJavaScriptException(); return env.Null(); } if (!info[0].IsNumber() || !info[1].IsNumber()) { Napi::TypeError::New(env, \"Wrong arguments\").ThrowAsJavaScriptException(); return env.Null(); } int arg0 = info[0].As\u003cNapi::Number\u003e().Int32Value(); int arg1 = info[1].As\u003cNapi::Number\u003e().Int32Value(); int arg2 = arg0 + arg1; Napi::Number num = Napi::Number::New(env, arg2); return num; } // å¯¼å‡ºå‡½æ•°ï¼Œå¯ä½¿ç”¨ exports.Set() å¯¼å‡ºå¤šä¸ªå‡½æ•° Napi::Object Init(Napi::Env env, Napi::Object exports) { exports.Set(Napi::String::New(env, \"add\"), Napi::Function::New(env, Add)); return exports; } NODE_API_MODULE(addon, Init) ","date":"2021-11-18","objectID":"/js-call-c/:2:2","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#c-ä»£ç "},{"categories":["web"],"content":" binding.gypç¼–è¯‘å¸¦ç¬¬ä¸‰æ–¹æ‰©å±•åº“çš„ c/c++ ç¨‹åºï¼Œé€šå¸¸éœ€è¦åœ¨ç¼–è¯‘æ—¶æŒ‡å®šé¢å¤–çš„å¤´æ–‡ä»¶åŒ…å«è·¯å¾„å’Œé“¾æ¥ç¬¬ä¸‰æ–¹åº“ï¼Œè¿™äº›éƒ½æ˜¯åœ¨ binding.gyp æ–‡ä»¶ä¸­æŒ‡å®šçš„ï¼Œè¿™äº›æŒ‡å®šåœ¨ nodeJS è‡ªåŠ¨ç¼–è¯‘çš„æ—¶å€™ï¼Œä¼šè§£æå¹¶åº”ç”¨åœ¨å‘½ä»¤è¡Œçš„ç¼–è¯‘å·¥å…·ä¸­ã€‚ æ–°å»ºä¸€ä¸ª binding.gyp æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š { \"targets\": [ { \"target_name\": \"test\", \"sources\": [ \"cal.cc\" ], \"include_dirs\": [ \"\u003c!@(node -p \\\"require('node-addon-api').include\\\")\" ], \"libraries\": [ ], \"dependencies\": [ \"\u003c!(node -p \\\"require('node-addon-api').gyp\\\")\" ], \"cflags!\": [ \"-fno-exceptions\" ], \"cflags_cc!\": [ \"-fno-exceptions\" ], \"defines\": [ \"NAPI_CPP_EXCEPTIONS\" ], \"xcode_settings\": { \"GCC_ENABLE_CPP_EXCEPTIONS\": \"YES\" } } ] } target_name æŒ‡å®šäº†ç¼–è¯‘ä¹‹åæ¨¡å—çš„åç§°ã€‚ sources æŒ‡æ˜ c/c++ çš„æºæ–‡ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªæ–‡ä»¶ï¼Œéœ€è¦ç”¨é€—å·éš”å¼€ï¼Œæ”¾åˆ°åŒä¸€ä¸ªæ•°ç»„ä¸­ã€‚ include_dirs æ˜¯ç¼–è¯‘æ—¶ä½¿ç”¨çš„å¤´æ–‡ä»¶å¼•å…¥è·¯å¾„ï¼Œè¿™é‡Œä½¿ç”¨ node -p æ‰§è¡Œ node-addon-api æ¨¡å—ä¸­çš„é¢„ç½®å˜é‡ã€‚ dependencies æ˜¯å¿…é¡»çš„ï¼Œä¸€èˆ¬ä¸è¦æ”¹å˜ã€‚ cflags!ï¼Œcflags_cc!ï¼Œdefines ä¸‰è¡ŒæŒ‡å®šå¦‚æœc++ç¨‹åºç¢°åˆ°æ„å¤–é”™è¯¯çš„æ—¶å€™ï¼Œç”± NAPI æ¥å£æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯é€šå¸¸çš„ç”± c/c++ ç¨‹åºè‡ªå·±å¤„ç†ã€‚è¿™é˜²æ­¢å› ä¸º c/c++ éƒ¨åˆ†ç¨‹åºç¢°åˆ°æ„å¤–ç›´æ¥å°±é€€å‡ºäº†ç¨‹åºï¼Œè€Œæ˜¯ç”± nodeJS ç¨‹åºæ¥æ•è·å¤„ç†ï¼Œå¦‚æœæ˜¯åœ¨Linuxä¸­ç¼–è¯‘ä½¿ç”¨ï¼Œæœ‰è¿™ä¸‰è¡Œå°±å¤Ÿäº†ã€‚ ","date":"2021-11-18","objectID":"/js-call-c/:2:3","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#bindinggyp"},{"categories":["web"],"content":" ç¼–è¯‘è°ƒç”¨ ç¼–è¯‘ æ¯æ¬¡ä¿®æ”¹ä»£ç åéƒ½éœ€è¦æ‰§è¡Œ npm i é‡æ–°ç¼–è¯‘ npm i ç¼–è¯‘åï¼Œè¿›å…¥ nodeJS ä¸­å¯ä»¥ç›´æ¥ require è°ƒç”¨ã€‚ è°ƒç”¨ è¿™é‡Œ require çš„ test.nodeï¼Œ.node åç¼€æ˜¯å›ºå®šçš„ï¼Œtest å°±æ˜¯ binding.gyp æ–‡ä»¶é‡Œ target_name çš„å€¼ã€‚ 1+3=4 ä»è°ƒç”¨ç»“æœæ¥çœ‹ï¼Œç¬¦åˆé¢„æœŸã€‚ ","date":"2021-11-18","objectID":"/js-call-c/:2:4","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#ç¼–è¯‘è°ƒç”¨"},{"categories":["web"],"content":" bindings åŒ…ç°åœ¨æˆ‘ä»¬ require ç¼–è¯‘åçš„ node éœ€è¦è¿™æ ·å†™ï¼š require('./build/Release/nodecamera.node'); å¯ä»¥ç”¨ bindings åŒ…ç®€åŒ– require ã€‚ npm i bindings --save é€šä¼°ğŸ‘†å‘½ä»¤å®‰è£… bindings åŒ…ã€‚ bindings åŒ…ä½¿ç”¨ æ‰€ä»¥ä»¥ä¸Šç¤ºä¾‹ç®€åŒ–åçš„ require ä¸ºï¼š const addon = require('bindings')('test.node'); ","date":"2021-11-18","objectID":"/js-call-c/:2:5","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#bindings-åŒ…"},{"categories":["web"],"content":" å¸¸è§æ•°æ®ç±»å‹è½¬æ¢JS ä¸ C çš„æ•°æ®ç±»å‹æœ‰è¾ƒå¤§å·®åˆ«ï¼Œæ¯”å¦‚ C ä¸­æ²¡æœ‰å­—ç¬¦ä¸²çš„æ¦‚å¿µï¼Œåªæœ‰å­—èŠ‚æ•°ç»„ç­‰ã€‚node-addon-api å¯ä»¥å¾ˆå¥½çš„æ”¯æŒ JS ä¸ C æ•°æ®ç±»å‹çš„è½¬æ¢ã€‚ ","date":"2021-11-18","objectID":"/js-call-c/:3:0","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#å¸¸è§æ•°æ®ç±»å‹è½¬æ¢"},{"categories":["web"],"content":" å­—ç¬¦ä¸² std::string temp = info[0].As\u003cNapi::String\u003e().ToString(); å­—ç¬¦ä¸²è½¬æ¢ç¤ºä¾‹ ","date":"2021-11-18","objectID":"/js-call-c/:3:1","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#å­—ç¬¦ä¸²"},{"categories":["web"],"content":" ArrayBuffer Napi::ArrayBuffer ABuffer(const Napi::CallbackInfo\u0026 info) { Napi::Env env = info.Env(); int8_t num[4] = {14,25,45,88}; Napi::ArrayBuffer x = Napi::ArrayBuffer::New(env,num,4); return x; } ArrayBuffer ç¤ºä¾‹ ","date":"2021-11-18","objectID":"/js-call-c/:3:2","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#arraybuffer"},{"categories":["web"],"content":" æ•°ç»„JS å°†æ•°ç»„ä½œä¸º C å‡½æ•°å‚æ•°ã€‚ Napi::Value ArrayArg(const Napi::CallbackInfo\u0026 info) { Napi::Env env = info.Env(); Napi::Array b = info[0].As\u003cNapi::Array\u003e(); for (int i = 0; i \u003c b.Length(); i++) { Napi::Value v = b[i]; if (v.IsString()){ std::string value = (std::string)v.As\u003cNapi::String\u003e(); return Napi::String::New(env,value); } } } ç¼–è¯‘å¯èƒ½æœ‰ warning ç¼–è¯‘æ—¶å¯èƒ½æœ‰ warningï¼Œä½†æ˜¯ä¸å½±å“ã€‚ æ•°ç»„å‚æ•° ","date":"2021-11-18","objectID":"/js-call-c/:3:3","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#æ•°ç»„"},{"categories":["web"],"content":" FAQ","date":"2021-11-18","objectID":"/js-call-c/:4:0","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#faq"},{"categories":["web"],"content":" æŒä¹…åŒ–å‡½æ•°è¿™ä¸ªåŠŸèƒ½å¯ä»¥ç†è§£æˆåœ¨ C çš„å†…å­˜ç©ºé—´ä¸­æœ‰ä¸€ä¸ª JS çš„å‡½æ•°å¯¹è±¡ä¸”åœ¨ç”Ÿå‘½å‘¨æœŸå†…ä¸ä¼šè¢« C åƒåœ¾å›æ”¶ï¼Œå¯ä»¥ç›´æ¥åœ¨ C ä¸­è°ƒç”¨è¿™ä¸ª JS å‡½æ•°ã€‚ ä»¥ä¸‹ç¤ºä¾‹ï¼ŒC æä¾›äº† debug å‡½æ•°ï¼Œä½†æ˜¯å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šæŒä¹…åœ¨ C çš„å†…å­˜ä¸­ï¼Œåœ¨ C çš„ Str å‡½æ•°ä¸­ç”¨ Call æ¥è°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶ä¼ å…¥å¯¹åº”çš„å‚æ•°ã€‚ js-call-c-demo.js const addon = require('bindings')('test.node'); // è°ƒç”¨ c ä¸­çš„ debug å‡½æ•°ï¼Œå°†å‡½æ•°æ³¨å…¥åˆ° c ä¸­ addon.debug(msg =\u003e { console.log(\"debug console, c ä¸­ä¼ å…¥çš„ msg éœ€è¦æ‰“å°çš„å‚æ•°å€¼ä¸ºï¼š\", msg) }) // è°ƒç”¨ c çš„ str å‡½æ•°ï¼Œåœ¨ str å‡½æ•°ä¸­ä¼šè°ƒç”¨ debug å‡½æ•°ä¸­çš„ console.log() console.log(\"str å‡½æ•°çš„è¿”å›å€¼ä¸º: \", addon.str(\"xiaobinqt\")) cal.cc #include \u003cnapi.h\u003e Napi::FunctionReference Debug; napi_env DebugEnv; Napi::Value DebugFun(const Napi::CallbackInfo\u0026 info) { Napi::Env env = info.Env(); Debug = Napi::Persistent(info[0].As\u003cNapi::Function\u003e()); DebugEnv = env; return Napi::String::New(env,\"OK\"); } Napi::Value Str(const Napi::CallbackInfo\u0026 info) { Napi::Env env = info.Env(); std::string temp = info[0].As\u003cNapi::String\u003e().ToString(); Napi::String s = Napi::String::New(env, temp); // è°ƒç”¨ Debug å‡½æ•° Debug.Call({Napi::String::New(DebugEnv,\"æˆ‘æ˜¯ä¸€ä¸ªæµ‹è¯• debug\")}); return s; } // å®šä¹‰ä¸€ä¸ª Add() æ–¹æ³• Napi::Value Add(const Napi::CallbackInfo\u0026 info) { Napi::Env env = info.Env(); // è·å– js ä¸Šä¸‹æ–‡ä¿¡æ¯ if (info.Length() \u003c 2) { Napi::TypeError::New(env, \"Wrong number of arguments\") .ThrowAsJavaScriptException(); return env.Null(); } if (!info[0].IsNumber() || !info[1].IsNumber()) { Napi::TypeError::New(env, \"Wrong arguments\").ThrowAsJavaScriptException(); return env.Null(); } int arg0 = info[0].As\u003cNapi::Number\u003e().Int32Value(); int arg1 = info[1].As\u003cNapi::Number\u003e().Int32Value(); int arg2 = arg0 + arg1; Napi::Number num = Napi::Number::New(env, arg2); return num; } Napi::ArrayBuffer ABuffer(const Napi::CallbackInfo\u0026 info) { Napi::Env env = info.Env(); int8_t num[4] = {14,25,45,88}; Napi::ArrayBuffer x = Napi::ArrayBuffer::New(env,num,4); return x; } Napi::Value ArrayArg(const Napi::CallbackInfo\u0026 info) { Napi::Env env = info.Env(); Napi::Array b = info[0].As\u003cNapi::Array\u003e(); for (int i = 0; i \u003c b.Length(); i++) { Napi::Value v = b[i]; if (v.IsString()){ std::string value = (std::string)v.As\u003cNapi::String\u003e(); return Napi::String::New(env,value); } } } // å¯¼å‡ºå‡½æ•°ï¼Œå¯ä½¿ç”¨ exports.Set() å¯¼å‡ºå¤šä¸ªå‡½æ•° Napi::Object Init(Napi::Env env, Napi::Object exports) { exports.Set(Napi::String::New(env, \"add\"), Napi::Function::New(env, Add)); exports.Set(Napi::String::New(env, \"str\"), Napi::Function::New(env, Str)); exports.Set(Napi::String::New(env, \"ab\"), Napi::Function::New(env, ABuffer)); exports.Set(Napi::String::New(env, \"arr\"), Napi::Function::New(env, ArrayArg)); exports.Set(Napi::String::New(env, \"debug\"), Napi::Function::New(env, DebugFun)); return exports; } NODE_API_MODULE(addon, Init) æµ‹è¯•ç»“æœ ","date":"2021-11-18","objectID":"/js-call-c/:4:1","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#æŒä¹…åŒ–å‡½æ•°"},{"categories":["web"],"content":" å‚è€ƒ ç®€å•ä¸Šæ‰‹nodejsè°ƒç”¨c++(c++å’Œjsçš„æ··åˆç¼–ç¨‹) node-addon-api-doc https://github.com/nodejs/node-addon-api https://nodejs.github.io/node-addon-examples/special-topics/object-function-refs#persistent-reference ","date":"2021-11-18","objectID":"/js-call-c/:5:0","series":null,"tags":["js"],"title":"nodeJS è°ƒç”¨ C è¯­è¨€","uri":"/js-call-c/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"Node-red,Low-code,è‡ªå®šä¹‰noderedèŠ‚ç‚¹,nodered,èŠ‚ç‚¹å¼€å‘,how to create node-red node","date":"2021-11-01","objectID":"/node-red-glance/","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ¦‚è¿°Node-RED æ˜¯æ„å»ºç‰©è”ç½‘ (IOT,Internet of Things) åº”ç”¨ç¨‹åºçš„ä¸€ä¸ªå¼ºå¤§å·¥å…·ï¼Œå…¶é‡ç‚¹æ˜¯ç®€åŒ–ä»£ç å—çš„â€œè¿æ¥\"ä»¥æ‰§è¡Œä»»åŠ¡ã€‚å®ƒä½¿ç”¨å¯è§† åŒ–ç¼–ç¨‹æ–¹æ³•ï¼Œå…è®¸å¼€å‘äººå‘˜å°†é¢„å®šä¹‰çš„ä»£ç å—ï¼ˆç§°ä¸ºâ€œèŠ‚ç‚¹â€ï¼ŒNode) è¿æ¥èµ·æ¥æ‰§è¡Œä»»åŠ¡ã€‚è¿æ¥çš„èŠ‚ç‚¹ï¼Œé€šå¸¸æ˜¯è¾“å…¥èŠ‚ç‚¹ã€å¤„ç†èŠ‚ç‚¹å’Œè¾“å‡ºèŠ‚ç‚¹çš„ç»„åˆï¼Œå½“å®ƒä»¬è¿æ¥åœ¨ä¸€èµ·æ—¶ï¼Œæ„æˆä¸€ä¸ªâ€œæµâ€(Flows)ã€‚ ","date":"2021-11-01","objectID":"/node-red-glance/:1:0","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#æ¦‚è¿°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£…node-redå®‰è£… node-red çš„æ–¹å¼å¤§è‡´æœ‰ 2 ç§ï¼Œä½¿ç”¨ docker å’Œ npm ï¼Œdocker å®‰è£…å¯ä»¥å‚è€ƒã€‚è¿™é‡Œä½¿ç”¨ npm å®‰è£…ã€‚ä¸ªäººè§‰å¾—åœ¨æœ¬åœ°è°ƒè¯• npm æ¯” docker æ›´æ–¹ä¾¿ä¸€ç‚¹ï¼Œæºç éƒ½åœ¨æœ¬åœ°ï¼Œdocker çš„è¯è¿˜éœ€è¦æŠŠç›®å½•æ˜ å°„å‡ºæ¥ã€‚ npm å®‰è£…ç›´æ¥ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥æå®šï¼Œå…·ä½“å¯ä»¥å‚è€ƒ npm i node-red å®‰è£…æˆåŠŸåï¼Œä¼šåœ¨ç”¨æˆ·ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª .node-red ç›®å½•ï¼Œæˆ‘ç”¨çš„æ˜¯ Windows ç³»ç»Ÿï¼Œæ‰€ä»¥è¿™é‡Œçš„ç›®å½•æ˜¯ C:\\Users\\weibin\\.node-redï¼Œè¿™ä¸ªç›®å½•ä¸‹æœ‰é…ç½®æ–‡ä»¶ settings.jsï¼Œé‡Œé¢æœ‰ä¸€äº› node-red é…ç½®é¡¹ï¼Œæ¯”å¦‚é»˜è®¤ç«¯å£ç­‰ã€‚ node-red ç›®å½• ","date":"2021-11-01","objectID":"/node-red-glance/:2:0","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#å®‰è£…node-red"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¯åŠ¨å®‰è£…å®Œæˆåï¼Œç›´æ¥æ‰§è¡Œ node-red å°±å¯ä»¥å¯åŠ¨æœåŠ¡ã€‚ cmd å¯åŠ¨ node-red node-red çš„é»˜è®¤ç«¯å£æ˜¯ 1880ï¼Œç›´æ¥ç”¨æµè§ˆå™¨è®¿é—® http://127.0.0.1:1880 å°±å¯ä»¥çœ‹åˆ° node-red çš„é¡µé¢ã€‚ node-red ç•Œé¢ ","date":"2021-11-01","objectID":"/node-red-glance/:3:0","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#å¯åŠ¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆ›å»ºè‡ªå®šä¹‰èŠ‚ç‚¹æ¯ä¸€ä¸ª node-red èŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª npm åŒ…ï¼Œå¼€å‘ npm èŠ‚ç‚¹è·Ÿå¼€å‘ npm ç»„ä»¶åŒ…æ˜¯ä¸€æ ·ã€‚ ä¸€ä¸ª node-red èŠ‚ç‚¹ä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ html æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ js æ–‡ä»¶ã€‚html æ˜¯ç•Œé¢é…ç½®ï¼Œjs å¤„ç†é€»è¾‘ï¼ŒåŠ ä¸Š npm çš„ package.json æ–‡ä»¶ï¼Œæ­£å¸¸ä¸‰ä¸ªæ–‡ä»¶å°±å¯ä»¥å®ç°ä¸€ä¸ª node-red èŠ‚ç‚¹ã€‚ ","date":"2021-11-01","objectID":"/node-red-glance/:4:0","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#åˆ›å»ºè‡ªå®šä¹‰èŠ‚ç‚¹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åŠ æ³•å™¨èŠ‚ç‚¹å¼€å‘æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰èŠ‚ç‚¹å®ç°ä¸€ä¸ªåŠ æ³•å™¨ï¼Œè¾“å…¥ä¸¤ä¸ªæ•°å­—ï¼Œè¾“å‡ºä¸¤ä¸ªæ•°å­—çš„å’Œã€‚ ","date":"2021-11-01","objectID":"/node-red-glance/:4:1","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#åŠ æ³•å™¨èŠ‚ç‚¹å¼€å‘"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ–°å»ºé¡¹ç›®æˆ‘ä»¬æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹é¡¹ç›® node-sumï¼Œè¿™ä¸ªé¡¹ç›®éšä¾¿æ”¾åœ¨é‚£ä¸ªç›®å½•ä¸‹éƒ½è¡Œï¼Œè¿™é‡Œæˆ‘çš„ç›®å½•æ˜¯ D:\\tmp\\node-sumã€‚ æ–°å»ºé¡¹ç›® ","date":"2021-11-01","objectID":"/node-red-glance/:4:2","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#æ–°å»ºé¡¹ç›®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" npm åˆå§‹åŒ–åˆ‡åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ npm init å°†é¡¹ç›®è¿›è¡Œ npm åˆå§‹åŒ–ï¼Œç„¶åæ ¹æ®æç¤ºå¡«å†™å³å¯ã€‚ npm init ç”¨ IDE æ‰“å¼€ node-sum é¡¹ç›®å°±å¯ä»¥çœ‹åˆ°å·²ç»ç»™æˆ‘ä»¬åˆå§‹åŒ–å¥½äº† package.json æ–‡ä»¶ã€‚ package.json ","date":"2021-11-01","objectID":"/node-red-glance/:4:3","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#npm-åˆå§‹åŒ–"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åŠŸèƒ½å®ç°sum.html \u003cscript type=\"text/javascript\"\u003e RED.nodes.registerType('sum', { // è¿™ä¸ªå€¼ å¿…é¡»å’Œ js ä¸­ RED.nodes.registerType çš„å€¼ä¸€è‡´ category: 'è‡ªå®šä¹‰èŠ‚ç‚¹', // åˆ†ç±» color: '#a6bbcf', // èŠ‚ç‚¹é¢œè‰² defaults: { name: {value: \"\"}, // name é»˜è®¤æ˜¯ç©º add1: {value: 0}, // add1 é»˜è®¤å€¼ 0 add2: {value: 0}, // add2 é»˜è®¤å€¼ 0 }, inputs: 0, // èŠ‚ç‚¹æœ‰å¤šå°‘è¾“å…¥ 0 æˆ–è€…å¤šä¸ª outputs: 1, // èŠ‚ç‚¹æœ‰å¤šå°‘è¾“å‡º 0 æˆ–è€…å¤šä¸ª icon: \"file.png\", // èŠ‚ç‚¹ä½¿ç”¨çš„å›¾æ ‡ paletteLabel: \"åŠ æ³•å™¨\", // èŠ‚ç‚¹æ˜¾ç¤ºçš„åç§° label: function () { // èŠ‚ç‚¹çš„å·¥ä½œåŒºçš„æ ‡ç­¾ return this.name || \"åŠ æ³•å™¨\"; }, // é’©å­å‡½æ•°,åŒèŠ‚èŠ‚ç‚¹è°ƒå‡º template æ—¶è§¦å‘ oneditprepare: function () { console.log(\"oneditprepare è¢«è°ƒç”¨\"); }, // é’©å­å‡½æ•°,ç‚¹å‡» template ä¸­çš„å®ŒæˆæŒ‰é’®æ—¶è§¦å‘ oneditsave: function () { console.log(\"oneditsave è¢«è°ƒç”¨\"); } }); \u003c/script\u003e \u003c!--data-template-name å¿…é¡»å’Œ js ä¸­ RED.nodes.registerType çš„å€¼ä¸€è‡´ --\u003e \u003c!--template æ˜¯æ¨¡æ¿ï¼Œå¯ä»¥ç†è§£æˆè¡¨å•ï¼ŒèŠ‚ç‚¹éœ€è¦çš„ä¿¡æ¯å¯ä»¥ä»è¿™é‡Œè¾“å…¥--\u003e \u003cscript type=\"text/html\" data-template-name=\"sum\"\u003e \u003cdiv class=\"form-row\"\u003e \u003clabel for=\"node-input-name\"\u003e\u003ci class=\"fa fa-tag\"\u003e\u003c/i\u003e Name\u003c/label\u003e \u003cinput type=\"text\" id=\"node-input-name\" placeholder=\"Name\"\u003e \u003c/div\u003e \u003cdiv class=\"form-row\"\u003e \u003clabel for=\"node-input-add1\"\u003e\u003ci class=\"fa fa-tag\"\u003e\u003c/i\u003eåŠ æ•°1\u003c/label\u003e \u003cinput type=\"text\" id=\"node-input-add1\" placeholder=\"åŠ æ•°1\"\u003e \u003c/div\u003e \u003cdiv class=\"form-row\"\u003e \u003clabel for=\"node-input-add2\"\u003e\u003ci class=\"fa fa-tag\"\u003e\u003c/i\u003eåŠ æ•°2\u003c/label\u003e \u003cinput type=\"text\" id=\"node-input-add2\" placeholder=\"åŠ æ•°2\"\u003e \u003c/div\u003e \u003c/script\u003e \u003c!--data-help-name å¿…é¡»å’Œ js ä¸­ RED.nodes.registerType çš„å€¼ä¸€è‡´ --\u003e \u003c!--help æ˜¯èŠ‚ç‚¹çš„å¸®åŠ©æ–‡æ¡£--\u003e \u003cscript type=\"text/html\" data-help-name=\"sum\"\u003e \u003cp\u003eä¸€ä¸ªç®€å•çš„åŠ æ³•å™¨\u003c/p\u003e \u003c/script\u003e sum.js module.exports = function (RED) { function Sum(config) { RED.nodes.createNode(this, config); var node = this; // è·å–è¾“å…¥çš„å‚æ•° let add1 = parseInt(config.add1) let add2 = parseInt(config.add2) node.send({ // å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹è¾“å‡ºä¿¡æ¯ payload: `${add1} + ${add2} ç»“æœä¸º ` + (add1 + add2) }); node.on('input', function (msg) { // æ¥æ”¶ä¸Šæ¸¸èŠ‚ç‚¹æ¥æ”¶æ¶ˆæ¯ }); } // æ³¨å†Œä¸€ä¸ªèŠ‚ç‚¹ sum,æ³¨å†Œçš„èŠ‚ç‚¹ä¸èƒ½é‡å¤ä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ª node-red é¡¹ç›®ä¸èƒ½æœ‰ 2 ä¸ª registerType sum èŠ‚ç‚¹ RED.nodes.registerType(\"sum\", Sum); } éœ€è¦åœ¨ package.json æ–‡ä»¶é‡Œæ·»åŠ  node-red ä¿¡æ¯ï¼Œå®Œæ•´çš„ package.json å¦‚ä¸‹ï¼š { \"name\": \"node-sum\", \"version\": \"1.0.0\", \"description\": \"node-red åŠ æ³•å™¨\", \"main\": \"index.js\", \"scripts\": { \"test\": \"echo \\\"Error: no test specified\\\" \u0026\u0026 exit 1\" }, \"keywords\": [ \"node-red\", \"add\" ], \"author\": \"xiaobinqt@163.com\", \"license\": \"ISC\", \"node-red\": { \"nodes\": { \"sum\": \"sum.js\" } } } åœ¨ package.json ä¸­æ·»åŠ çš„ node-red ä¿¡æ¯æ˜¯å›ºå®šå†™æ³•ï¼Œå¯ä»¥ç†è§£æˆå‘ node-red ä¸­æ³¨å†Œäº† nodes çš„åç§°ä¸º sumï¼Œæ³¨å†Œçš„ js æ–‡ä»¶ä¸º sum.jsã€‚ \"node-red\": { \"nodes\": { \"sum\": \"sum.js\" } } ","date":"2021-11-01","objectID":"/node-red-glance/:4:4","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#åŠŸèƒ½å®ç°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æœ¬åœ°å®‰è£…å¯ä»¥é€šè¿‡ npm i å®‰è£…åˆšæ‰çš„ sum èŠ‚ç‚¹åˆ° node-red ä¸­ã€‚åˆ‡åˆ°.node-red ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ npm i d:\\tmp\\node-sum å®‰è½¬æœ¬åœ°èŠ‚ç‚¹å¹¶é‡å¯ ç„¶åé‡å¯ node-red å°±å¯ä»¥çœ‹åˆ°åˆšæ‰å®‰è£…çš„èŠ‚ç‚¹äº†ã€‚ èŠ‚ç‚¹å®‰è£…æˆåŠŸ ","date":"2021-11-01","objectID":"/node-red-glance/:4:5","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#æœ¬åœ°å®‰è£…"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æµ‹è¯•åŠŸèƒ½æŠŠèŠ‚ç‚¹æ‹–åˆ°å·¥ä½œåŒºï¼ŒåŒå‡»èŠ‚ç‚¹ï¼ˆä¼šè§¦å‘oneditprepareå‡½æ•°ï¼‰æ‰“å¼€ç¼–è¾‘åŒº åŒèŠ‚èŠ‚ç‚¹å¡«å†™ç¼–è¾‘åŒº å¡«å†™å®Œç¼–è¾‘åŒºå†…å®¹åç‚¹å‡»å®Œæˆï¼ˆä¼šè§¦å‘oneditsaveå‡½æ•°ï¼‰ï¼Œç‚¹å‡»éƒ¨ç½²å°±ä¼šåœ¨è°ƒè¯•çª—å£è¾“å‡º node.send ä¿¡æ¯ã€‚ éƒ¨ç½² ","date":"2021-11-01","objectID":"/node-red-glance/:4:6","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#æµ‹è¯•åŠŸèƒ½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Creating your first node Design: i18n ","date":"2021-11-01","objectID":"/node-red-glance/:5:0","series":null,"tags":["low-code","node-red"],"title":"Node-RED èŠ‚ç‚¹å¼€å‘","uri":"/node-red-glance/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":"xiaobinqt,","date":"2021-10-20","objectID":"/design-patterns/","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" åˆ›å»ºå‹æ¨¡å¼","date":"2021-10-20","objectID":"/design-patterns/:1:0","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#åˆ›å»ºå‹æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" å•ä¾‹æ¨¡å¼ä¿è¯ä¸€ä¸ªç±»æ°¸è¿œåªèƒ½æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ï¼Œä¸”è¯¥å¯¹è±¡çš„åŠŸèƒ½ä¾ç„¶èƒ½è¢«å…¶ä»–æ¨¡å—ä½¿ç”¨ã€‚ å› ä¸ºåœ¨ç³»ç»Ÿå†…å­˜ä¸­åªå­˜åœ¨ä¸€ä¸ªå¯¹è±¡ï¼Œå•ä¾‹å¯ä»¥èŠ‚çœç³»ç»Ÿèµ„æºã€‚ package main import ( \"fmt\" \"sync\" \"sync/atomic\" ) //æ ‡è®° var ( initialized uint32 lock sync.Mutex instance *singelton ) type singelton struct{} func GetInstance() *singelton { //å¦‚æœæ ‡è®°ä¸ºè¢«è®¾ç½®ï¼Œç›´æ¥è¿”å›ï¼Œä¸åŠ é” if atomic.LoadUint32(\u0026initialized) == 1 { return instance } //å¦‚æœæ²¡æœ‰ï¼Œåˆ™åŠ é”ç”³è¯· lock.Lock() defer lock.Unlock() if initialized == 0 { instance = new(singelton) //è®¾ç½®æ ‡è®°ä½ atomic.StoreUint32(\u0026initialized, 1) } return instance } func (s *singelton) SomeThing() { fmt.Println(\"å•ä¾‹å¯¹è±¡çš„æŸæ–¹æ³•\") } func main() { s := GetInstance() s.SomeThing() } ","date":"2021-10-20","objectID":"/design-patterns/:1:1","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#å•ä¾‹æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" ç®€å•å·¥å‚æ¨¡å¼ func NewFruit(name string) *Fruit { fruit := new(Fruit) if name == \"apple\" { //åˆ›å»ºappleé€»è¾‘ } else if name == \"banana\" { //åˆ›å»ºbananaé€»è¾‘ } else if name == \"pear\" { //åˆ›å»ºpearé€»è¾‘ } return fruit } å¦‚æœæ²¡æœ‰å·¥å‚ï¼Œå°†å¯¹è±¡çš„åˆå§‹åŒ–ä»£ç éƒ½é›†ä¸­åœ¨ä¸€ä¸ªç±»ä¸­å®ç°ï¼Œè¿åäº†å•ä¸€èŒè´£åŸåˆ™ï¼Œä¸åˆ©äºç±»çš„é‡ç”¨å’Œç»´æŠ¤ã€‚å½“éœ€è¦åŠ å…¥æ–°çš„å¯¹è±¡æ—¶ï¼Œå¿…é¡»ä¿®æ”¹åŸºç¡€ç±»çš„ New æ„é€ å‡½æ•°å’Œå…¶ä»–ç›¸å…³çš„æºä»£ç ï¼Œè¿åäº†å¼€é—­åŸåˆ™ã€‚ ç®€å•å·¥å‚æ¨¡å¼åœ¨ä¸­é—´åŠ äº†ä¸€ä¸ªå·¥å‚æ¨¡å—ï¼Œè§£å†³äº†ä¸šåŠ¡é€»è¾‘ä¸åŸºç¡€ç±»çš„å¼ºè€¦åˆã€‚ç®€å•å·¥å‚æ¨¡å¼åˆå«é™æ€æ–¹æ³•æ¨¡å¼ï¼Œå› ä¸ºå·¥å‚ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ã€‚ç®€å•å·¥å‚è®©ä½¿ç”¨è€…ä¸ç”¨çŸ¥é“å…·ä½“çš„å‚æ•°å°±å¯ä»¥åˆ›å»ºå‡ºæ‰€éœ€çš„â€œäº§å“â€ç±»ï¼Œå³ä½¿ç”¨è€…å¯ä»¥ç›´æ¥æ¶ˆè´¹äº§å“è€Œä¸éœ€è¦çŸ¥é“äº§å“çš„å…·ä½“ç”Ÿäº§ç»†èŠ‚ã€‚ ç”±ğŸ‘‡ä»£ç å¯çŸ¥ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼è™½ç„¶è§£å†³äº†å¯¹è±¡åˆ›å»ºå’Œä½¿ç”¨çš„åˆ†ç¦»ï¼Œä½†æ˜¯åŒæ ·è¿åå¼€é—­åŸåˆ™ï¼Œå› ä¸ºæ·»åŠ æ–°äº§å“éœ€è¦ä¿®æ”¹å·¥å‚é€»è¾‘ï¼Œè€Œä¸”å·¥å‚ä¼šè¶Šæ¥è¶Šå¤æ‚ã€‚ package main import \"fmt\" // ======= æŠ½è±¡å±‚ ========= //æ°´æœç±»(æŠ½è±¡æ¥å£) type Fruit interface { Show() //æ¥å£çš„æŸæ–¹æ³• } // ======= åŸºç¡€ç±»æ¨¡å— ========= type Apple struct { Fruit //ä¸ºäº†æ˜“äºç†è§£æ˜¾ç¤ºç»§æ‰¿(æ­¤è¡Œå¯ä»¥çœç•¥) } func (apple *Apple) Show() { fmt.Println(\"æˆ‘æ˜¯è‹¹æœ\") } type Banana struct { Fruit } func (banana *Banana) Show() { fmt.Println(\"æˆ‘æ˜¯é¦™è•‰\") } type Pear struct { Fruit } func (pear *Pear) Show() { fmt.Println(\"æˆ‘æ˜¯æ¢¨\") } // ========= å·¥å‚æ¨¡å— ========= //ä¸€ä¸ªå·¥å‚ï¼Œ æœ‰ä¸€ä¸ªç”Ÿäº§æ°´æœçš„æœºå™¨ï¼Œè¿”å›ä¸€ä¸ªæŠ½è±¡æ°´æœçš„æŒ‡é’ˆ type Factory struct{} func (fac *Factory) CreateFruit(kind string) Fruit { var fruit Fruit if kind == \"apple\" { fruit = new(Apple) } else if kind == \"banana\" { fruit = new(Banana) } else if kind == \"pear\" { fruit = new(Pear) } return fruit } // ==========ä¸šåŠ¡é€»è¾‘å±‚============== func main() { factory := new(Factory) apple := factory.CreateFruit(\"apple\") apple.Show() banana := factory.CreateFruit(\"banana\") banana.Show() pear := factory.CreateFruit(\"pear\") pear.Show() } ","date":"2021-10-20","objectID":"/design-patterns/:1:2","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#ç®€å•å·¥å‚æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" å·¥å‚æ–¹æ³•æ¨¡å¼ç®€å•å·¥å‚æ¨¡å¼ + å¼€é—­åŸåˆ™ = å·¥å‚æ–¹æ³•æ¨¡å¼Factory Method Pattern åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œå·¥å‚çˆ¶ç±»è´Ÿè´£å®šä¹‰åˆ›å»ºäº§å“å¯¹è±¡çš„å…¬å…±æ¥å£ï¼Œè€Œå·¥å‚å­ç±»åˆ™è´Ÿè´£ç”Ÿæˆå…·ä½“çš„äº§å“å¯¹è±¡ï¼Œè¿™æ ·åšçš„ç›®çš„æ˜¯å°†äº§å“ç±»çš„å®ä¾‹åŒ–æ“ä½œå»¶è¿Ÿåˆ°å·¥å‚å­ç±»ä¸­å®Œæˆï¼Œå³é€šè¿‡å·¥å‚å­ç±»æ¥ç¡®å®šç©¶ç«Ÿåº”è¯¥å®ä¾‹åŒ–å“ªä¸€ä¸ªå…·ä½“äº§å“ç±»ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼ package main import \"fmt\" // ======= æŠ½è±¡å±‚ ========= //æ°´æœç±»(æŠ½è±¡æ¥å£) type Fruit interface { Show() //æ¥å£çš„æŸæ–¹æ³• } //å·¥å‚ç±»(æŠ½è±¡æ¥å£) type AbstractFactory interface { CreateFruit() Fruit //ç”Ÿäº§æ°´æœç±»(æŠ½è±¡)çš„ç”Ÿäº§å™¨æ–¹æ³• } // ======= åŸºç¡€ç±»æ¨¡å— ========= type Apple struct { Fruit //ä¸ºäº†æ˜“äºç†è§£æ˜¾ç¤ºç»§æ‰¿(æ­¤è¡Œå¯ä»¥çœç•¥) } func (apple *Apple) Show() { fmt.Println(\"æˆ‘æ˜¯è‹¹æœ\") } type Banana struct { Fruit } func (banana *Banana) Show() { fmt.Println(\"æˆ‘æ˜¯é¦™è•‰\") } type Pear struct { Fruit } func (pear *Pear) Show() { fmt.Println(\"æˆ‘æ˜¯æ¢¨\") } // ========= å·¥å‚æ¨¡å— ========= //å…·ä½“çš„è‹¹æœå·¥å‚ type AppleFactory struct { AbstractFactory } func (fac *AppleFactory) CreateFruit() Fruit { var fruit Fruit //ç”Ÿäº§ä¸€ä¸ªå…·ä½“çš„è‹¹æœ fruit = new(Apple) return fruit } //å…·ä½“çš„é¦™è•‰å·¥å‚ type BananaFactory struct { AbstractFactory } func (fac *BananaFactory) CreateFruit() Fruit { var fruit Fruit //ç”Ÿäº§ä¸€ä¸ªå…·ä½“çš„é¦™è•‰ fruit = new(Banana) return fruit } //å…·ä½“çš„æ¢¨å·¥å‚ type PearFactory struct { AbstractFactory } func (fac *PearFactory) CreateFruit() Fruit { var fruit Fruit //ç”Ÿäº§ä¸€ä¸ªå…·ä½“çš„æ¢¨ fruit = new(Pear) return fruit } //======= ä¸šåŠ¡é€»è¾‘å±‚ ======= func main() { /* ä¸ºäº†çªå‡ºæ ¹æ®ä¾èµ–å€’è½¬åŸåˆ™ä¸é¢å‘æ¥å£ç¼–ç¨‹ç‰¹æ€§ã€‚ ä¸€äº›å˜é‡çš„å®šä¹‰å°†ä½¿ç”¨æ˜¾ç¤ºç±»å‹å£°æ˜æ–¹å¼ */ //éœ€æ±‚1ï¼šéœ€è¦ä¸€ä¸ªå…·ä½“çš„è‹¹æœå¯¹è±¡ //1-å…ˆè¦ä¸€ä¸ªå…·ä½“çš„è‹¹æœå·¥å‚ var appleFac AbstractFactory appleFac = new(AppleFactory) //2-ç”Ÿäº§ç›¸å¯¹åº”çš„å…·ä½“æ°´æœ var apple Fruit apple = appleFac.CreateFruit() apple.Show() //éœ€æ±‚2ï¼šéœ€è¦ä¸€ä¸ªå…·ä½“çš„é¦™è•‰å¯¹è±¡ //1-å…ˆè¦ä¸€ä¸ªå…·ä½“çš„é¦™è•‰å·¥å‚ var bananaFac AbstractFactory bananaFac = new(BananaFactory) //2-ç”Ÿäº§ç›¸å¯¹åº”çš„å…·ä½“æ°´æœ var banana Fruit banana = bananaFac.CreateFruit() banana.Show() //éœ€æ±‚3ï¼šéœ€è¦ä¸€ä¸ªå…·ä½“çš„æ¢¨å¯¹è±¡ //1-å…ˆè¦ä¸€ä¸ªå…·ä½“çš„æ¢¨å·¥å‚ var pearFac AbstractFactory pearFac = new(PearFactory) //2-ç”Ÿäº§ç›¸å¯¹åº”çš„å…·ä½“æ°´æœ var pear Fruit pear = pearFac.CreateFruit() pear.Show() } ","date":"2021-10-20","objectID":"/design-patterns/:1:3","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#å·¥å‚æ–¹æ³•æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" æŠ½è±¡å·¥å‚æ–¹æ³•æ¨¡å¼æŠ½è±¡å·¥å‚æ¨¡Abstract Factory Patternï¼Œæä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼é€šè¿‡å¼•å…¥å·¥å‚ç»“æ„ï¼Œè§£å†³äº†ç®€å•å·¥å‚æ¨¡å¼ä¸­å·¥å‚ç±»èŒè´£å¤ªé‡çš„é—®é¢˜ï¼Œä½†ç”±äºå·¥å‚æ–¹æ³•æ¨¡å¼ä¸­çš„æ¯ä¸ªå·¥å‚åªç”Ÿäº§ä¸€ç±»äº§å“ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡çš„å·¥å‚ç±»ï¼ŒåŠ¿å¿…ä¼šå¢åŠ ç³»ç»Ÿçš„å¼€é”€ã€‚å› æ­¤ï¼Œå¯ä»¥è€ƒè™‘å°†ä¸€äº›ç›¸å…³çš„äº§å“ç»„æˆä¸€ä¸ªâ€œäº§å“æ—â€ï¼Œç”±åŒä¸€ä¸ªå·¥å‚æ¥ç»Ÿä¸€ç”Ÿäº§ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªå·¥å‚å¯ä»¥æä¾›å¤šä¸ªäº§å“å¯¹è±¡ï¼Œè€Œä¸æ˜¯å•ä¸€çš„äº§å“å¯¹è±¡ã€‚ å…·ä½“å¯ä»¥å‚çœ‹ æŠ½è±¡å·¥å‚æ–¹æ³•æ¨¡å¼ è®¾è®¡ä¸€ä¸ªç”µè„‘ä¸»æ¿æ¶æ„ï¼Œç”µè„‘åŒ…æ‹¬ï¼šæ˜¾å¡ï¼Œå†…å­˜ï¼ŒCPU 3 ä¸ªå›ºå®šçš„æ’å£ï¼Œæ˜¾å¡å…·æœ‰æ˜¾ç¤ºåŠŸèƒ½displayï¼ˆåŠŸèƒ½å®ç°åªè¦æ‰“å°å‡ºæ„ä¹‰å³å¯ï¼‰ï¼Œå†…å­˜å…·æœ‰å­˜å‚¨åŠŸèƒ½storageï¼Œcpu å…·æœ‰è®¡ç®—åŠŸèƒ½calculateã€‚ ç°æœ‰ Intel å‚å•†ï¼Œnvidia å‚å•†ï¼ŒKingston å‚å•†ï¼Œå‡ä¼šç”Ÿäº§ä»¥ä¸Šä¸‰ç§ç¡¬ä»¶ã€‚ è¦æ±‚ç»„è£…ä¸¤å°ç”µè„‘ï¼Œ 1å°ï¼ˆIntelçš„CPUï¼ŒIntelçš„æ˜¾å¡ï¼ŒIntelçš„å†…å­˜ï¼‰ 1å°ï¼ˆIntelçš„CPUï¼Œ nvidiaçš„æ˜¾å¡ï¼ŒKingstonçš„å†…å­˜ï¼‰ ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°ã€‚ package main import \"fmt\" /** è®¾è®¡ä¸€ä¸ªç”µè„‘ä¸»æ¿æ¶æ„ï¼Œç”µè„‘åŒ…æ‹¬ï¼ˆæ˜¾å¡ï¼Œå†…å­˜ï¼ŒCPUï¼‰3ä¸ªå›ºå®šçš„æ’å£ï¼Œæ˜¾å¡å…·æœ‰æ˜¾ç¤ºåŠŸèƒ½ï¼ˆdisplayï¼ŒåŠŸèƒ½å®ç°åªè¦æ‰“å°å‡ºæ„ä¹‰å³å¯ï¼‰ï¼Œ å†…å­˜å…·æœ‰å­˜å‚¨åŠŸèƒ½ï¼ˆstorageï¼‰ï¼Œcpu å…·æœ‰è®¡ç®—åŠŸèƒ½ï¼ˆcalculateï¼‰ã€‚ ç°æœ‰ Intel å‚å•†ï¼Œnvidia å‚å•†ï¼ŒKingston å‚å•†ï¼Œå‡ä¼šç”Ÿäº§ä»¥ä¸Šä¸‰ç§ç¡¬ä»¶ã€‚ è¦æ±‚ç»„è£…ä¸¤å°ç”µè„‘ï¼Œ 1å°ï¼ˆIntelçš„CPUï¼ŒIntelçš„æ˜¾å¡ï¼ŒIntelçš„å†…å­˜ï¼‰ 1å°ï¼ˆIntelçš„CPUï¼Œ nvidiaçš„æ˜¾å¡ï¼ŒKingstonçš„å†…å­˜ï¼‰ ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°ã€‚ */ type AbstractGPU interface { Display() } type AbstractMemory interface { Storage() } type AbstractCPU interface { Calculate() } type AbstractFactory interface { CreateGPU() AbstractGPU CreateMemory() AbstractMemory CreateCPU() AbstractCPU } // Intel ----------- type IntelGPU struct { } type IntelMemory struct { } type IntelCPU struct { } func (IntelGPU) Display() { fmt.Println(\"Intel æ˜¾å¡\") } func (IntelMemory) Storage() { fmt.Println(\"Intel å†…å­˜\") } func (IntelCPU) Calculate() { fmt.Println(\"Intel å¤„ç†å™¨\") } type IntelFactory struct { AbstractFactory } func (IntelFactory) CreateGPU() AbstractGPU { return new(IntelGPU) } func (IntelFactory) CreateMemory() AbstractMemory { return new(IntelMemory) } func (IntelFactory) CreateCPU() AbstractCPU { return new(IntelCPU) } // Nvidia ------------- type NvidiaGPU struct { } type NvidiaMemory struct { } type NvidiaCPU struct { } func (NvidiaGPU) Display() { fmt.Println(\"Nvidia æ˜¾å¡\") } func (NvidiaMemory) Storage() { fmt.Println(\"Nvidia å†…å­˜\") } func (NvidiaCPU) Calculate() { fmt.Println(\"Nvidia å¤„ç†å™¨\") } type NvidiaFactory struct { AbstractFactory } func (NvidiaFactory) CreateGPU() AbstractGPU { return new(NvidiaGPU) } func (NvidiaFactory) CreateMemory() AbstractMemory { return new(NvidiaMemory) } func (NvidiaFactory) CreateCPU() AbstractCPU { return new(NvidiaCPU) } // Kingston ---------- type KingstonGPU struct { } type KingstonMemory struct { } type KingstonCPU struct { } func (KingstonGPU) Display() { fmt.Println(\"Kingston æ˜¾å¡\") } func (KingstonMemory) Storage() { fmt.Println(\"Kingston å†…å­˜\") } func (KingstonCPU) Calculate() { fmt.Println(\"Kingston å¤„ç†å™¨\") } type KingstonFactory struct { AbstractFactory } func (KingstonFactory) CreateGPU() AbstractGPU { return new(KingstonGPU) } func (KingstonFactory) CreateMemory() AbstractMemory { return new(KingstonMemory) } func (KingstonFactory) CreateCPU() AbstractCPU { return new(KingstonCPU) } func main() { /** 1å°ï¼ˆIntelçš„CPUï¼ŒIntelçš„æ˜¾å¡ï¼ŒIntelçš„å†…å­˜ï¼‰ 1å°ï¼ˆIntelçš„CPUï¼Œ nvidiaçš„æ˜¾å¡ï¼ŒKingstonçš„å†…å­˜ï¼‰ */ var ( intel AbstractFactory nvidia AbstractFactory kingston AbstractFactory ) intel = new(IntelFactory) nvidia = new(NvidiaFactory) kingston = new(KingstonFactory) intel.CreateCPU().Calculate() intel.CreateGPU().Display() intel.CreateMemory().Storage() fmt.Println(\"---------------\") intel.CreateCPU().Calculate() nvidia.CreateGPU().Display() kingston.CreateMemory().Storage() } ","date":"2021-10-20","objectID":"/design-patterns/:1:4","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#æŠ½è±¡å·¥å‚æ–¹æ³•æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" ç»“æ„å‹æ¨¡å¼","date":"2021-10-20","objectID":"/design-patterns/:2:0","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#ç»“æ„å‹æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" ä»£ç†æ¨¡å¼ ä»£ç†æ¨¡å¼ ä»£ç†æ¨¡å¼åˆå« Proxy æ¨¡å¼ï¼Œå®ƒå¯ä»¥ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç† Proxy ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ä»£ç†éœ€è¦å…·æœ‰ä¸è¢«ä»£ç†çš„å¯¹è±¡ç›¸åŒçš„æ¥å£çš„ç±»ï¼Œå®¢æˆ·ç«¯å¿…é¡»é€šè¿‡ä»£ç†ä¸è¢«ä»£ç†çš„ç›®æ ‡ç±»äº¤äº’ï¼Œè€Œä»£ç†ä¸€èˆ¬åœ¨äº¤äº’çš„è¿‡ç¨‹ä¸­ï¼ˆäº¤äº’å‰åï¼‰ï¼Œè¿›è¡ŒæŸäº›ç‰¹åˆ«çš„å¤„ç†ã€‚ package main import \"fmt\" type Goods struct { Kind string //å•†å“ç§ç±» Fact bool //å•†å“çœŸä¼ª } // =========== æŠ½è±¡å±‚ =========== //æŠ½è±¡çš„è´­ç‰©ä¸»é¢˜Subject type Shopping interface { Buy(goods *Goods) //æŸä»»åŠ¡ } // =========== å®ç°å±‚ =========== //å…·ä½“çš„è´­ç‰©ä¸»é¢˜ï¼Œ å®ç°äº†shoppingï¼Œ å»éŸ©å›½è´­ç‰© type KoreaShopping struct{} func (ks *KoreaShopping) Buy(goods *Goods) { fmt.Println(\"å»éŸ©å›½è¿›è¡Œäº†è´­ç‰©, ä¹°äº† \", goods.Kind) } //å…·ä½“çš„è´­ç‰©ä¸»é¢˜ï¼Œ å®ç°äº†shoppingï¼Œ å»ç¾å›½è´­ç‰© type AmericanShopping struct{} func (as *AmericanShopping) Buy(goods *Goods) { fmt.Println(\"å»ç¾å›½è¿›è¡Œäº†è´­ç‰©, ä¹°äº† \", goods.Kind) } //å…·ä½“çš„è´­ç‰©ä¸»é¢˜ï¼Œ å®ç°äº†shoppingï¼Œ å»éæ´²è´­ç‰© type AfricaShopping struct{} func (as *AfricaShopping) Buy(goods *Goods) { fmt.Println(\"å»éæ´²è¿›è¡Œäº†è´­ç‰©, ä¹°äº† \", goods.Kind) } //æµ·å¤–çš„ä»£ç† type OverseasProxy struct { shopping Shopping //ä»£ç†æŸä¸ªä¸»é¢˜ï¼Œè¿™é‡Œæ˜¯æŠ½è±¡ç±»å‹ } func (op *OverseasProxy) Buy(goods *Goods) { // 1. å…ˆéªŒè´§ if op.distinguish(goods) == true { //2. è¿›è¡Œè´­ä¹° op.shopping.Buy(goods) //è°ƒç”¨åŸè¢«ä»£ç†çš„å…·ä½“ä¸»é¢˜ä»»åŠ¡ //3 æµ·å…³å®‰æ£€ op.check(goods) } } //åˆ›å»ºä¸€ä¸ªä»£ç†,å¹¶ä¸”é…ç½®å…³è”è¢«ä»£ç†çš„ä¸»é¢˜ func NewProxy(shopping Shopping) Shopping { return \u0026OverseasProxy{shopping} } //éªŒè´§æµç¨‹ func (op *OverseasProxy) distinguish(goods *Goods) bool { fmt.Println(\"å¯¹ [\", goods.Kind, \"] è¿›è¡Œäº†è¾¨åˆ«çœŸä¼ª.\") if goods.Fact == false { fmt.Println(\"å‘ç°å‡è´§\", goods.Kind, \", ä¸åº”è¯¥è´­ä¹°ã€‚\") } return goods.Fact } //å®‰æ£€æµç¨‹ func (op *OverseasProxy) check(goods *Goods) { fmt.Println(\"å¯¹[\", goods.Kind, \"] è¿›è¡Œäº†æµ·å…³æ£€æŸ¥ï¼Œ æˆåŠŸçš„å¸¦å›ç¥–å›½\") } func main() { g1 := Goods{ Kind: \"éŸ©å›½é¢è†œ\", Fact: true, } g2 := Goods{ Kind: \"CET4è¯ä¹¦\", Fact: false, } //å¦‚æœä¸ä½¿ç”¨ä»£ç†æ¥å®Œæˆä»éŸ©å›½è´­ä¹°ä»»åŠ¡ var shopping Shopping shopping = new(KoreaShopping) //å…·ä½“çš„è´­ä¹°ä¸»é¢˜ //1-å…ˆéªŒè´§ if g1.Fact == true { fmt.Println(\"å¯¹[\", g1.Kind, \"] è¿›è¡Œäº†è¾¨åˆ«çœŸä¼ª.\") //2-å»éŸ©å›½è´­ä¹° shopping.Buy(\u0026g1) //3-æµ·å…³å®‰æ£€ fmt.Println(\"å¯¹[\", g1.Kind, \"] è¿›è¡Œäº†æµ·å…³æ£€æŸ¥ï¼Œ æˆåŠŸçš„å¸¦å›ç¥–å›½\") } fmt.Println(\"---------------ä»¥ä¸‹æ˜¯ ä½¿ç”¨ ä»£ç†æ¨¡å¼-------\") var overseasProxy Shopping overseasProxy = NewProxy(shopping) overseasProxy.Buy(\u0026g1) overseasProxy.Buy(\u0026g2) } ","date":"2021-10-20","objectID":"/design-patterns/:2:1","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#ä»£ç†æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" è£…é¥°æ¨¡å¼åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„èŒè´£ï¼Œå°±å¢åŠ å¯¹è±¡åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°æ¨¡å¼æ¯”ç”Ÿæˆå­ç±»å®ç°æ›´ä¸ºçµæ´»ã€‚ æ¯”å¦‚Iæ¥å£ä¸­æœ‰Create()æ–¹æ³•ï¼Œå½“Aå¯¹è±¡å®ç°äº†Iæ¥å£å¹¶è°ƒç”¨äº†Create()ï¼Œä½†æ˜¯ç°åœ¨å¢åŠ ï¼Œåœ¨è°ƒç”¨Create()åæ‰“å°ä¸‹æ—¥å¿—çš„åŠŸèƒ½ï¼Œå°±å¯ä»¥ç”¨è£…é¥°å™¨ã€‚ package main import \"fmt\" type I interface { Create() } type A struct { } func (A) Create() { fmt.Println(\"A create æ–¹æ³•\") return } type Decorator struct { i I } func (d *Decorator) Create() { d.i.Create() // å…¶ä»–çš„äº‹... fmt.Println(\"è¿˜èƒ½åšç‚¹å…¶ä»–çš„äº‹,æ¯”å¦‚æ‰“å°æ—¥å¿—...\") } func main() { var a I a = new(A) a.Create() fmt.Println(\"----- åŠ ä¸Šè£…é¥°å™¨ ----------\") var d Decorator d = Decorator{ i: a, } d.Create() } ","date":"2021-10-20","objectID":"/design-patterns/:2:2","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#è£…é¥°æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" é€‚é…å™¨æ¨¡å¼å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»èƒ½ä¸€èµ·å·¥ä½œã€‚ é€‚é…å™¨æ¨¡å¼ package main import ( \"fmt\" ) type OldInterface interface { InsertToDatabase(Data interface{}) (bool, error) } type AddCustomInfoToMysql struct { DbName string } func (pA *AddCustomInfoToMysql) InsertToDatabase(info interface{}) (bool, error) { switch info.(type) { case string: fmt.Println(\"add \", info.(string), \" to \", pA.DbName, \" successful!\") } return true, nil } type NewInterface interface { SaveData(Data interface{}) (bool, error) } type Adapter struct { old OldInterface } func (pA *Adapter) SaveData(Data interface{}) (bool, error) { fmt.Println(\"In Adapter\") return pA.old.InsertToDatabase(Data) } func main() { var ( iNew NewInterface ) iNew = \u0026Adapter{ old: \u0026AddCustomInfoToMysql{ DbName: \"mysql\", }} iNew.SaveData(\"helloworld\") } ","date":"2021-10-20","objectID":"/design-patterns/:2:3","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#é€‚é…å™¨æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" å¤–è§‚æ¨¡å¼ å¤–è§‚æ¨¡å¼ å¤–è§‚æ¨¡å¼Facade Patternåˆç§°ä¸º Facade é—¨é¢æ¨¡å¼ã€‚Facade æ¨¡å¼ä¸ºä¸€ç»„å…·æœ‰ç±»ä¼¼åŠŸèƒ½çš„ç±»ç¾¤ï¼Œæ¯”å¦‚ç±»åº“ï¼Œå­ç³»ç»Ÿç­‰ï¼Œæä¾›ä¸€ä¸ªä¸€è‡´çš„ç®€å•çš„ç•Œé¢ï¼Œè¿™ä¸ªä¸€è‡´çš„ç®€å•çš„ç•Œé¢è¢«ç§°ä½œ facadeã€‚ å¤–è§‚æ¨¡å¼å¯¹å®¢æˆ·ç«¯å±è”½äº†å­ç³»ç»Ÿç»„ä»¶ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯æ‰€éœ€å¤„ç†çš„å¯¹è±¡æ•°ç›®ï¼Œå¹¶ä½¿å¾—å­ç³»ç»Ÿä½¿ç”¨èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚é€šè¿‡å¼•å…¥å¤–è§‚æ¨¡å¼ï¼Œå®¢æˆ·ç«¯ä»£ç å°†å˜å¾—å¾ˆç®€å•ï¼Œä¸ä¹‹å…³è”çš„å¯¹è±¡ä¹Ÿå¾ˆå°‘ã€‚ å¤–è§‚æ¨¡å¼å®ç°äº†å­ç³»ç»Ÿä¸å®¢æˆ·ç«¯ä¹‹é—´çš„æ¾è€¦åˆå…³ç³»ï¼Œè¿™ä½¿å¾—å­ç³»ç»Ÿçš„å˜åŒ–ä¸ä¼šå½±å“åˆ°è°ƒç”¨å®ƒçš„å®¢æˆ·ç«¯ï¼Œåªéœ€è¦è°ƒæ•´å¤–è§‚ç±»å³å¯ã€‚ package main import \"fmt\" //ç”µè§†æœº type TV struct{} func (t *TV) On() { fmt.Println(\"æ‰“å¼€ ç”µè§†æœº\") } func (t *TV) Off() { fmt.Println(\"å…³é—­ ç”µè§†æœº\") } //ç”µè§†æœº type VoiceBox struct{} func (v *VoiceBox) On() { fmt.Println(\"æ‰“å¼€ éŸ³ç®±\") } func (v *VoiceBox) Off() { fmt.Println(\"å…³é—­ éŸ³ç®±\") } //ç¯å…‰ type Light struct{} func (l *Light) On() { fmt.Println(\"æ‰“å¼€ ç¯å…‰\") } func (l *Light) Off() { fmt.Println(\"å…³é—­ ç¯å…‰\") } //æ¸¸æˆæœº type Xbox struct{} func (x *Xbox) On() { fmt.Println(\"æ‰“å¼€ æ¸¸æˆæœº\") } func (x *Xbox) Off() { fmt.Println(\"å…³é—­ æ¸¸æˆæœº\") } //éº¦å…‹é£ type MicroPhone struct{} func (m *MicroPhone) On() { fmt.Println(\"æ‰“å¼€ éº¦å…‹é£\") } func (m *MicroPhone) Off() { fmt.Println(\"å…³é—­ éº¦å…‹é£\") } //æŠ•å½±ä»ª type Projector struct{} func (p *Projector) On() { fmt.Println(\"æ‰“å¼€ æŠ•å½±ä»ª\") } func (p *Projector) Off() { fmt.Println(\"å…³é—­ æŠ•å½±ä»ª\") } //å®¶åº­å½±é™¢(å¤–è§‚) type HomePlayerFacade struct { tv TV vb VoiceBox light Light xbox Xbox mp MicroPhone pro Projector } //KTVæ¨¡å¼ func (hp *HomePlayerFacade) DoKTV() { fmt.Println(\"å®¶åº­å½±é™¢è¿›å…¥KTVæ¨¡å¼\") hp.tv.On() hp.pro.On() hp.mp.On() hp.light.Off() hp.vb.On() } //æ¸¸æˆæ¨¡å¼ func (hp *HomePlayerFacade) DoGame() { fmt.Println(\"å®¶åº­å½±é™¢è¿›å…¥Gameæ¨¡å¼\") hp.tv.On() hp.light.On() hp.xbox.On() } func main() { homePlayer := new(HomePlayerFacade) homePlayer.DoKTV() fmt.Println(\"------------\") homePlayer.DoGame() } ","date":"2021-10-20","objectID":"/design-patterns/:2:4","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#å¤–è§‚æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" è¡Œä¸ºå‹æ¨¡å¼","date":"2021-10-20","objectID":"/design-patterns/:3:0","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#è¡Œä¸ºå‹æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" å‘½ä»¤æ¨¡å¼ å‘½ä»¤æ¨¡å¼ å‘½ä»¤æ¨¡å¼å¯ä»¥å°†è¯·æ±‚å‘é€è€…å’Œæ¥æ”¶è€…å®Œå…¨è§£è€¦ï¼Œå‘é€è€…ä¸æ¥æ”¶è€…ä¹‹é—´æ²¡æœ‰ç›´æ¥å¼•ç”¨å…³ç³»ï¼Œå‘é€è¯·æ±‚çš„å¯¹è±¡åªéœ€è¦çŸ¥é“å¦‚ä½•å‘é€è¯·æ±‚ï¼Œè€Œä¸å¿…çŸ¥é“å¦‚ä½•å®Œæˆè¯·æ±‚ã€‚å‘½ä»¤æ¨¡å¼å¯ä»¥è¿›è¡Œå­˜å‚¨ï¼Œå»¶åæ‰§è¡Œã€‚ package main import \"fmt\" type Command interface { Execute() } type MoveCommand struct { x, y int64 } func (m *MoveCommand) Execute() { fmt.Printf(\"å‘å³ç§»åŠ¨%dï¼Œå‘ä¸Šç§»åŠ¨%d \\n\", m.x, m.y) } type AttackCommand struct { skill string } func (a *AttackCommand) Execute() { fmt.Printf(\"ä½¿ç”¨æŠ€èƒ½%s\\n\", a.skill) } func AddCommand(action string) Command { if action == \"attack\" { return \u0026AttackCommand{ skill: \"é‡è›®å†²æ’\", } } else { //é»˜è®¤æ˜¯ç§»åŠ¨ return \u0026MoveCommand{ x: 10, y: 20, } } } func main() { //å°†å‘½ä»¤è®°å½• lc := make([]Command, 0) lc = append(lc, AddCommand(\"attack\")) lc = append(lc, AddCommand(\"move\")) lc = append(lc, AddCommand(\"move\")) lc = append(lc, AddCommand(\"attack\")) //æ‰§è¡Œå‘½ä»¤ for _, c := range lc { c.Execute() } } ","date":"2021-10-20","objectID":"/design-patterns/:3:1","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#å‘½ä»¤æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" è§‚å¯Ÿè€…æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ è§‚å¯Ÿè€…æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ï¼Œè¿™ä¸ªä¸»é¢˜å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶å°±ä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä½¿å¾—å®ƒä»¬èƒ½å¤Ÿè‡ªåŠ¨æ›´æ–°è‡ªå·±ã€‚ è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ç”¨äºå»ºç«‹ä¸€ç§å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜æ—¶å°†è‡ªåŠ¨é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œå…¶ä»–å¯¹è±¡å°†ç›¸åº”ä½œå‡ºååº”ã€‚åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œå‘ç”Ÿæ”¹å˜çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿç›®æ ‡ï¼Œè€Œè¢«é€šçŸ¥çš„å¯¹è±¡ç§°ä¸ºè§‚å¯Ÿè€…ï¼Œä¸€ä¸ªè§‚å¯Ÿç›®æ ‡å¯ä»¥å¯¹åº”å¤šä¸ªè§‚å¯Ÿè€…ï¼Œè€Œä¸”è¿™äº›è§‚å¯Ÿè€…ä¹‹é—´å¯ä»¥æ²¡æœ‰ä»»ä½•ç›¸äº’è”ç³»ï¼Œå¯ä»¥æ ¹æ®éœ€è¦å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…ï¼Œä½¿å¾—ç³»ç»Ÿæ›´æ˜“äºæ‰©å±•ã€‚ package main import \"fmt\" //--------- æŠ½è±¡å±‚ -------- // Observer è§‚å¯Ÿè€… type Observer interface { OnTeacherComming() // è§‚å¯Ÿè€…å¾—åˆ°é€šçŸ¥åè¦è§¦å‘çš„åŠ¨ä½œ } // è¢«è§‚å¯Ÿè€… type Notifier interface { AddObserver(observer Observer) RemoveObserver(observer Observer) Notify() } //--------- å®ç°å±‚ -------- //è§‚å¯Ÿè€…å­¦ç”Ÿ type StuZhang3 struct { Badthing string } func (s *StuZhang3) OnTeacherComming() { fmt.Println(\"å¼ 3 åœæ­¢ \", s.Badthing) } func (s *StuZhang3) DoBadthing() { fmt.Println(\"å¼ 3 æ­£åœ¨\", s.Badthing) } type StuZhao4 struct { Badthing string } func (s *StuZhao4) OnTeacherComming() { fmt.Println(\"èµµ4 åœæ­¢ \", s.Badthing) } func (s *StuZhao4) DoBadthing() { fmt.Println(\"èµµ4 æ­£åœ¨\", s.Badthing) } type StuWang5 struct { Badthing string } func (s *StuWang5) OnTeacherComming() { fmt.Println(\"ç‹5 åœæ­¢ \", s.Badthing) } func (s *StuWang5) DoBadthing() { fmt.Println(\"ç‹5 æ­£åœ¨\", s.Badthing) } // å…·ä½“çš„è¢«è§‚å¯Ÿè€…ç­é•¿ type ClassMonitor struct { ObserverList []Observer //éœ€è¦é€šçŸ¥çš„å…¨éƒ¨è§‚å¯Ÿè€…é›†åˆ } func (m *ClassMonitor) AddObserver(observer Observer) { m.ObserverList = append(m.ObserverList, observer) } func (m *ClassMonitor) RemoveObserver(observer Observer) { for index, l := range m.ObserverList { //æ‰¾åˆ°è¦åˆ é™¤çš„å…ƒç´ ä½ç½® if observer == l { //å°†åˆ é™¤çš„ç‚¹å‰åçš„å…ƒç´ é“¾æ¥èµ·æ¥ m.ObserverList = append(m.ObserverList[:index], m.ObserverList[index+1:]...) break } } } func (m *ClassMonitor) Notify() { for _, observer := range m.ObserverList { //ä¾æ¬¡è°ƒç”¨å…¨éƒ¨è§‚å¯Ÿçš„å…·ä½“åŠ¨ä½œ observer.OnTeacherComming() } } func main() { s1 := \u0026StuZhang3{ Badthing: \"æŠ„ä½œä¸š\", } s2 := \u0026StuZhao4{ Badthing: \"ç©ç‹è€…è£è€€\", } s3 := \u0026StuWang5{ Badthing: \"çœ‹èµµå››ç©ç‹è€…è£è€€\", } classMonitor := new(ClassMonitor) fmt.Println(\"ä¸Šè¯¾äº†ï¼Œä½†æ˜¯è€å¸ˆæ²¡æœ‰æ¥ï¼Œå­¦ç”Ÿä»¬éƒ½åœ¨å¿™è‡ªå·±çš„äº‹...\") s1.DoBadthing() s2.DoBadthing() s3.DoBadthing() classMonitor.AddObserver(s1) classMonitor.AddObserver(s2) classMonitor.AddObserver(s3) fmt.Println(\"è¿™æ—¶å€™è€å¸ˆæ¥äº†ï¼Œç­é•¿ç»™å­¦ä»€ä¹ˆä½¿äº†ä¸€ä¸ªçœ¼ç¥...\") classMonitor.Notify() } ","date":"2021-10-20","objectID":"/design-patterns/:3:2","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#è§‚å¯Ÿè€…æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" ç­–ç•¥æ¨¡å¼ å‡ºè¡Œç­–ç•¥ ç­–ç•¥æ¨¡å¼Strategy Patternï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼Œå°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œå¹¶è®©å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è®©ç®—æ³•ç‹¬ç«‹äºä½¿ç”¨å®ƒçš„å®¢æˆ·è€Œå˜åŒ–ï¼Œä¹Ÿç§°ä¸ºæ”¿ç­–æ¨¡å¼(Policy)ã€‚ å•†åœºä¿ƒé”€æœ‰ç­–ç•¥ Aï¼ˆ0.8æŠ˜ï¼‰ç­–ç•¥ Bï¼ˆæ¶ˆè´¹æ»¡200ï¼Œè¿”ç°100ï¼‰ï¼Œç”¨ç­–ç•¥æ¨¡å¼æ¨¡æ‹Ÿåœºæ™¯ package main import \"fmt\" //é”€å”®ç­–ç•¥ type SellStrategy interface { //æ ¹æ®åŸä»·å¾—åˆ°å”®å–ä»· GetPrice(price float64) float64 } type StrategyA struct{} func (sa *StrategyA) GetPrice(price float64) float64 { fmt.Println(\"æ‰§è¡Œç­–ç•¥A, æ‰€æœ‰å•†å“æ‰“å…«æŠ˜\") return price * 0.8 } type StrategyB struct{} func (sb *StrategyB) GetPrice(price float64) float64 { fmt.Println(\"æ‰§è¡Œç­–ç•¥B, æ‰€æœ‰å•†å“æ»¡200 å‡100\") if price \u003e= 200 { price -= 100 } return price } //ç¯å¢ƒç±» type Goods struct { Price float64 Strategy SellStrategy } func (g *Goods) SetStrategy(s SellStrategy) { g.Strategy = s } func (g *Goods) SellPrice() float64 { fmt.Println(\"åŸä»·å€¼ \", g.Price, \" .\") return g.Strategy.GetPrice(g.Price) } func main() { nike := Goods{ Price: 200.0, } //ä¸Šåˆ ï¼Œå•†åœºæ‰§è¡Œç­–ç•¥A nike.SetStrategy(new(StrategyA)) fmt.Println(\"ä¸Šåˆnikeé‹å–\", nike.SellPrice()) //ä¸‹åˆï¼Œ å•†åœºæ‰§è¡Œç­–ç•¥B nike.SetStrategy(new(StrategyB)) fmt.Println(\"ä¸‹åˆnikeé‹å–\", nike.SellPrice()) } ","date":"2021-10-20","objectID":"/design-patterns/:3:3","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#ç­–ç•¥æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" æ¨¡æ¿æ–¹å¼æ¨¡å¼ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”±æŠ½è±¡çˆ¶ç±»å’Œå…·ä½“çš„å®ç°å­ç±»æ„æˆã€‚é€šå¸¸åœ¨æŠ½è±¡çˆ¶ç±»ä¸­å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼Œä¹ŸåŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•ä»¥åŠå°è£…å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåºã€‚å­ç±»é€šè¿‡ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»ï¼Œä¹Ÿç»§æ‰¿äº†æ•´ä¸ªç®—æ³•ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚ æ¨¡æ¿æ–¹æ³•æ¨¡å¼å»ºè®®å°†ç®—æ³•åˆ†è§£ä¸ºä¸€ç³»åˆ—æ­¥éª¤ï¼Œç„¶åå°†è¿™äº›æ­¥éª¤æ”¹å†™ä¸ºæ–¹æ³•ï¼Œæœ€ååœ¨â€œæ¨¡æ¿æ–¹æ³•â€ä¸­ä¾æ¬¡è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚æ­¥éª¤å¯ä»¥æ˜¯æŠ½è±¡çš„ï¼Œä¹Ÿå¯ä»¥æœ‰ä¸€äº›é»˜è®¤çš„å®ç°ã€‚ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ç®—æ³•ï¼Œ å®¢æˆ·ç«¯éœ€è¦è‡ªè¡Œæä¾›å­ç±»å¹¶å®ç°æ‰€æœ‰çš„æŠ½è±¡æ­¥éª¤ã€‚å¦‚æœæœ‰å¿…è¦è¿˜éœ€é‡å†™ä¸€äº›æ­¥éª¤ã€‚ package main import \"fmt\" //æŠ½è±¡ç±»ï¼Œåˆ¶ä½œé¥®æ–™,åŒ…è£¹ä¸€ä¸ªæ¨¡æ¿çš„å…¨éƒ¨å®ç°æ­¥éª¤ type Beverage interface { BoilWater() //ç…®å¼€æ°´ Brew() //å†²æ³¡ PourInCup() //å€’å…¥æ¯ä¸­ AddThings() //æ·»åŠ é…Œæ–™ WantAddThings() bool //æ˜¯å¦åŠ å…¥é…Œæ–™Hook } //å°è£…ä¸€å¥—æµç¨‹æ¨¡æ¿ï¼Œè®©å…·ä½“çš„åˆ¶ä½œæµç¨‹ç»§æ‰¿ä¸”å®ç° type template struct { b Beverage } //å°è£…çš„å›ºå®šæ¨¡æ¿ func (t *template) MakeBeverage() { if t == nil { return } t.b.BoilWater() t.b.Brew() t.b.PourInCup() //å­ç±»å¯ä»¥é‡å†™è¯¥æ–¹æ³•æ¥å†³å®šæ˜¯å¦æ‰§è¡Œä¸‹é¢åŠ¨ä½œ if t.b.WantAddThings() == true { t.b.AddThings() } } //å…·ä½“çš„æ¨¡æ¿å­ç±» åˆ¶ä½œå’–å•¡ type MakeCaffee struct { template //ç»§æ‰¿æ¨¡æ¿ } func NewMakeCaffee() *MakeCaffee { makeCaffe := new(MakeCaffee) //b ä¸ºBeverageï¼Œæ˜¯MakeCaffeeçš„æ¥å£ï¼Œè¿™é‡Œéœ€è¦ç»™æ¥å£èµ‹å€¼ï¼ŒæŒ‡å‘å…·ä½“çš„å­ç±»å¯¹è±¡ //æ¥è§¦å‘bå…¨éƒ¨æ¥å£æ–¹æ³•çš„å¤šæ€ç‰¹æ€§ã€‚ makeCaffe.b = makeCaffe return makeCaffe } func (mc *MakeCaffee) BoilWater() { fmt.Println(\"å°†æ°´ç…®åˆ°100æ‘„æ°åº¦\") } func (mc *MakeCaffee) Brew() { fmt.Println(\"ç”¨æ°´å†²å’–å•¡è±†\") } func (mc *MakeCaffee) PourInCup() { fmt.Println(\"å°†å……å¥½çš„å’–å•¡å€’å…¥é™¶ç“·æ¯ä¸­\") } func (mc *MakeCaffee) AddThings() { fmt.Println(\"æ·»åŠ ç‰›å¥¶å’Œç³–\") } func (mc *MakeCaffee) WantAddThings() bool { return true //å¯åŠ¨Hookæ¡ä»¶ } //å…·ä½“çš„æ¨¡æ¿å­ç±» åˆ¶ä½œèŒ¶ type MakeTea struct { template //ç»§æ‰¿æ¨¡æ¿ } func NewMakeTea() *MakeTea { makeTea := new(MakeTea) //b ä¸ºBeverageï¼Œæ˜¯MakeTeaï¼Œè¿™é‡Œéœ€è¦ç»™æ¥å£èµ‹å€¼ï¼ŒæŒ‡å‘å…·ä½“çš„å­ç±»å¯¹è±¡ //æ¥è§¦å‘bå…¨éƒ¨æ¥å£æ–¹æ³•çš„å¤šæ€ç‰¹æ€§ã€‚ makeTea.b = makeTea return makeTea } func (mt *MakeTea) BoilWater() { fmt.Println(\"å°†æ°´ç…®åˆ°80æ‘„æ°åº¦\") } func (mt *MakeTea) Brew() { fmt.Println(\"ç”¨æ°´å†²èŒ¶å¶\") } func (mt *MakeTea) PourInCup() { fmt.Println(\"å°†å……å¥½çš„å’–å•¡å€’å…¥èŒ¶å£¶ä¸­\") } func (mt *MakeTea) AddThings() { fmt.Println(\"æ·»åŠ æŸ æª¬\") } func (mt *MakeTea) WantAddThings() bool { return false //å…³é—­Hookæ¡ä»¶ } func main() { //1. åˆ¶ä½œä¸€æ¯å’–å•¡ makeCoffee := NewMakeCaffee() makeCoffee.MakeBeverage() //è°ƒç”¨å›ºå®šæ¨¡æ¿æ–¹æ³• fmt.Println(\"------------\") //2. åˆ¶ä½œèŒ¶ makeTea := NewMakeTea() makeTea.MakeBeverage() } ","date":"2021-10-20","objectID":"/design-patterns/:3:4","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#æ¨¡æ¿æ–¹å¼æ¨¡å¼"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" FAQ è£…é¥°æ¨¡å¼å’Œä»£ç†æ¨¡å¼æœ‰ä½•ä¸åŒâ“ ä»£ç†æ¨¡å¼æ³¨é‡å¯¹å¯¹è±¡æŸä¸€åŠŸèƒ½çš„æµç¨‹æŠŠæ§å’Œè¾…åŠ©ã€‚å®ƒå¯ä»¥æ§åˆ¶å¯¹è±¡åšæŸäº›äº‹ï¼Œé‡å¿ƒæ˜¯ä¸ºäº†å€Ÿç”¨å¯¹è±¡çš„åŠŸèƒ½å®ŒæˆæŸä¸€æµç¨‹ï¼Œè€Œéå¯¹è±¡åŠŸèƒ½å¦‚ä½•ã€‚ è£…é¥°æ¨¡å¼æ³¨é‡å¯¹å¯¹è±¡åŠŸèƒ½çš„æ‰©å±•ï¼Œå®ƒä¸å…³å¿ƒå¤–ç•Œå¦‚ä½•è°ƒç”¨ï¼Œåªæ³¨é‡å¯¹å¯¹è±¡åŠŸèƒ½çš„åŠ å¼ºï¼Œè£…é¥°åè¿˜æ˜¯å¯¹è±¡æœ¬èº«ã€‚ ","date":"2021-10-20","objectID":"/design-patterns/:4:0","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#faq"},{"categories":["å¼€å‘è€…æ‰‹å†Œ","golang"],"content":" å‚è€ƒ Easy æå®š Golangè®¾è®¡æ¨¡å¼ è®¾è®¡æ¨¡å¼-é€‚é…å™¨æ¨¡å¼ä¸å¤–è§‚æ¨¡å¼ è®¾è®¡æ¨¡å¼-refactoringguru.cn/design-patterns å›¾è§£ä¹ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ å›¾è¯´è®¾è®¡æ¨¡å¼ Easyæå®šGolangè®¾è®¡æ¨¡å¼ ","date":"2021-10-20","objectID":"/design-patterns/:5:0","series":[],"tags":["golang","è®¾è®¡æ¨¡å¼"],"title":"å¸¸è§è®¾è®¡æ¨¡å¼-Goå®ç°","uri":"/design-patterns/#å‚è€ƒ"},{"categories":["mysql"],"content":"xiaobinqt,å®‰è£…mysql8.0,docker å®‰è£…mysql8,å¦‚ä½•è®¾ç½®dockerå›½å†…é•œåƒï¼Œå¦‚æœå¼€å¯mysqlè¿œç¨‹è¿æ¥ï¼Œå¦‚æœä¿®æ”¹mysql8å¯†ç ï¼Œflush privileges","date":"2021-09-08","objectID":"/docker-install-mysql8.0/","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/"},{"categories":["mysql"],"content":" è®¾ç½®é•œåƒæºå›½å†…çš„ç½‘ç»œç¯å¢ƒï¼Œä½¿ç”¨å®˜æ–¹çš„é•œåƒæºï¼Œä¸‹è½½é€Ÿåº¦å¾ˆæ…¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨å›½å†…çš„é•œåƒæºã€‚ cat /etc/docker/daemon.json å¦‚æœæ²¡æœ‰daemon.jsonæ–‡ä»¶å¯ä»¥æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªã€‚å¯ä»¥è®¾ç½®ä¸­å›½åŒºé•œåƒæˆ–æ˜¯ç½‘æ˜“é•œåƒï¼Œä¹Ÿå¯ä»¥è®¾ç½®é˜¿é‡Œäº‘é•œåƒï¼ˆæ¨èä½¿ç”¨é˜¿é‡Œäº‘çš„åŠ é€Ÿå™¨ï¼Œå› ä¸ºå¿«ğŸ¤£ï¼‰ã€‚ ä¸­å›½åŒºé•œåƒ { \"registry-mirrors\": [ \"https://registry.docker-cn.com\" ] } ç½‘æ˜“é•œåƒ { \"registry-mirrors\": [ \"https://hub-mirror.c.163.com\" ] } é˜¿é‡Œäº‘é•œåƒ é˜¿é‡Œäº‘é•œåƒåœ°å€ è®¾ç½®é•œåƒæº è®¾ç½®å®Œæˆåï¼Œé‡å¯dockeræœåŠ¡ã€‚ systemctl restart docker å¯ä»¥é€šè¿‡ docker info æŸ¥çœ‹é•œåƒæºæ˜¯å¦è®¾ç½®æˆåŠŸã€‚ docker info | grep Mirrors -A 1 æŸ¥çœ‹é•œåƒæº ","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:1:0","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#è®¾ç½®é•œåƒæº"},{"categories":["mysql"],"content":" ä¸‹è½½é•œåƒå¯ä»¥å» https://hub.docker.com/_/mysql/tags ä»“åº“æ‰¾éœ€è¦çš„ mysql ç‰ˆæœ¬ğŸ‘‡ é•œåƒä¸‹è½½ é€šè¿‡ docker pullä¸‹è½½éœ€è¦çš„é•œåƒã€‚ ä¸‹è½½é•œåƒ ","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:2:0","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#ä¸‹è½½é•œåƒ"},{"categories":["mysql"],"content":" é…ç½®å¹¶å¯åŠ¨å®¹å™¨","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:3:0","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#é…ç½®å¹¶å¯åŠ¨å®¹å™¨"},{"categories":["mysql"],"content":" ä¸»æœºæŒ‚è½½ç›®å½• mkdir -p mysql8.0/{conf,data} # conf å­˜æ”¾é…ç½®æ–‡ä»¶,data å­˜æ”¾æ•°æ®åº“æ–‡ä»¶ touch mysql8.0/conf/my.cnf # åˆ›å»ºé…ç½®æ–‡ä»¶ chown -R 999:999 mysql8.0 # ä¿®æ”¹æƒé™ å°†my.cnfæ–‡ä»¶ä¸­å†™å…¥ä»¥ä¸‹é…ç½® [mysqld] pid-file = /var/run/mysqld/mysqld.pid socket = /var/run/mysqld/mysqld.sock datadir = /var/lib/mysql secure-file-priv= /var/lib/mysql å…·ä½“å¯ä»¥å‚è€ƒhttps://github.com/docker-library/mysql/blob/master/8.0/config/my.cnf secure-file-priv è®¾ç½®ä¸º /var/lib/mysqlæ˜¯ä¸ºäº†è§£å†³ MySQL 8 docker-compose :Failed to access directory for â€“secure-file-priv é—®é¢˜ã€‚ è®¾ç½®æŒ‚è½½ç›®å½• ","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:3:1","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#ä¸»æœºæŒ‚è½½ç›®å½•"},{"categories":["mysql"],"content":" å¯åŠ¨å®¹å™¨ docker run -d \\ -p 3310:3306 \\ --name mysql8.0 \\ -v /root/weibin/mysql8.0/conf/my.cnf:/etc/mysql/my.cnf \\ -v /root/weibin/mysql8.0/data:/var/lib/mysql \\ -e MYSQL_ROOT_PASSWORD=123456 \\ mysql:8.0 å¯åŠ¨å®¹å™¨ è¿™é‡Œè¿˜å¯ä»¥åœ¨å¯åŠ¨å®¹å™¨æ—¶åˆå§‹åŒ–ä¸€äº›å·¥ä½œï¼Œæ¯”å¦‚å»ºåº“å»ºè¡¨ï¼Œå¯ä»¥æŠŠ sql æˆ–æ˜¯ sh æ–‡ä»¶æ”¾åœ¨å®¹å™¨çš„/docker-entrypoint-initdb.dç›®å½•ä¸‹ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡å®¿ä¸»æœºæ˜ å°„åˆ°å®¹å™¨ç›®å½•ï¼Œæ¯”å¦‚ -v /root/dockerdata/mysql/docker-entrypoint-initdb.d:/docker-entrypoint-initdb.d docker-entrypoint-initdb.d ç›®å½• ","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:3:2","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#å¯åŠ¨å®¹å™¨"},{"categories":["mysql"],"content":" å¼€å¯è¿œç¨‹è¿æ¥å¦‚æœä¸èƒ½è¿œç¨‹è¿æ¥å¯ä»¥è¿›å…¥å®¹å™¨åè¿æ¥æ•°æ®åº“ï¼Œä¿®æ”¹ mysql åº“çš„ user è¡¨ã€‚ docker exec -it å®¹å™¨ID bash è¿›å…¥å®¹å™¨ æŸ¥çœ‹ user è¡¨ä¸­çš„user='root'çš„è´¦å·çš„ host æ˜¯å¦æ˜¯%ï¼Œå¦‚æœä¸æ˜¯åˆ™è®¾ç½®ä¸º%ã€‚å¦‚æœå·²å­˜åœ¨å¤šä¸ª root è´¦å·ï¼Œå…¶ä¸­åªè¦æœ‰ä¸€ä¸ªçš„ host ä¸º%å°±å¯ä»¥äº†ã€‚ è®¾ç½®host update user set host='%' where user = 'root'; å¦‚æœä¿®æ”¹äº†ç”¨æˆ·éœ€è¦æ‰§è¡Œ flush privileges; è¿™æ ·åœ¨ä¸é‡å¯çš„ mysql æœåŠ¡çš„æƒ…å†µä¸‹å°±å¯ä»¥ç”Ÿæ•ˆã€‚ ","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:4:0","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#å¼€å¯è¿œç¨‹è¿æ¥"},{"categories":["mysql"],"content":" ä¿®æ”¹å¯†ç  ALTER USER 'root'@'localhost' IDENTIFIED WITH caching_sha2_password BY 'yourpasswd'; ä¿®æ”¹å¯†ç  ","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:5:0","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#ä¿®æ”¹å¯†ç "},{"categories":["mysql"],"content":" FAQ â“ secure-file-priv Failed to access directory for --secure-file-priv. Please make sure that directory exists and is accessible by MySQL Server. Supplied value : /var/lib/mysql-files FAQ1 å®¿ä¸»æœºçš„æ˜ å°„ç›®å½•éœ€è¦è®¾ç½®ç”¨æˆ·å’Œç”¨æˆ·ç»„ä¸º999:999ï¼Œå› ä¸º docker å®¹å™¨é‡Œçš„ç”¨æˆ·ä¹Ÿæ˜¯ 999ï¼Œå¯ä»¥å¯åŠ¨ä¸€ä¸ªä¸´æ—¶å®¹å™¨è¿›å»æŸ¥çœ‹ã€‚ 999:999 â“ flush privileges flush privilegeså‘½ä»¤æœ¬è´¨ä¸Šçš„ä½œç”¨æ˜¯å°†å½“å‰ user å’Œ privilige è¡¨ä¸­çš„ç”¨æˆ·ä¿¡æ¯/æƒé™è®¾ç½®ä» mysql åº“ä¸­æå–åˆ°å†…å­˜é‡Œã€‚ MySQL ç”¨æˆ·æ•°æ®å’Œæƒé™æœ‰ä¿®æ”¹åï¼Œå¸Œæœ›åœ¨ä¸é‡å¯MySQLæœåŠ¡çš„æƒ…å†µä¸‹ç›´æ¥ç”Ÿæ•ˆï¼Œå°±å¯ä»¥æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ã€‚ ","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:6:0","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#faq"},{"categories":["mysql"],"content":" å‚è€ƒ Docker Hub é•œåƒåŠ é€Ÿå™¨ MySQL 8 docker-compose :Failed to access directory for â€“secure-file-priv dockerå®‰è£…mysql 8 How to reset the root password in MySQL 8.0.11? How To Create a New User and Grant Permissions in MySQL8 on CentOS8 ","date":"2021-09-08","objectID":"/docker-install-mysql8.0/:7:0","series":[],"tags":["mysql","docker"],"title":"Docker å®‰è£… mysql8.0","uri":"/docker-install-mysql8.0/#å‚è€ƒ"},{"categories":["web","å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,","date":"2021-09-08","objectID":"/go-use-sse/","series":null,"tags":["sse","golang"],"title":"Go ä½¿ç”¨ sse","uri":"/go-use-sse/"},{"categories":["web","å¼€å‘è€…æ‰‹å†Œ"],"content":" SSE çš„æœ¬è´¨ä¸¥æ ¼åœ°è¯´ï¼ŒHTTP åè®®æ— æ³•åšåˆ°æœåŠ¡å™¨ä¸»åŠ¨æ¨é€ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§å˜é€šæ–¹æ³•ï¼Œå°±æ˜¯æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å£°æ˜ï¼Œæ¥ä¸‹æ¥è¦å‘é€çš„æ˜¯æµä¿¡æ¯ï¼ˆstreamingï¼‰ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå‘é€çš„ä¸æ˜¯ä¸€æ¬¡æ€§çš„æ•°æ®åŒ…ï¼Œè€Œæ˜¯ä¸€ä¸ªæ•°æ®æµï¼Œä¼šè¿ç»­ä¸æ–­åœ°å‘é€è¿‡æ¥ã€‚è¿™æ—¶ï¼Œå®¢æˆ·ç«¯ä¸ä¼šå…³é—­è¿æ¥ï¼Œä¼šä¸€ç›´ç­‰ç€æœåŠ¡å™¨å‘è¿‡æ¥çš„æ–°çš„æ•°æ®æµï¼Œè§†é¢‘æ’­æ”¾å°±æ˜¯è¿™æ ·çš„ä¾‹å­ã€‚æœ¬è´¨ä¸Šï¼Œè¿™ç§é€šä¿¡å°±æ˜¯ä»¥æµä¿¡æ¯çš„æ–¹å¼ï¼Œå®Œæˆä¸€æ¬¡ç”¨æ—¶å¾ˆé•¿çš„ä¸‹è½½ã€‚ SSE å°±æ˜¯åˆ©ç”¨è¿™ç§æœºåˆ¶ï¼Œä½¿ç”¨æµä¿¡æ¯å‘æµè§ˆå™¨æ¨é€ä¿¡æ¯ã€‚å®ƒåŸºäº HTTP åè®®ï¼Œç›®å‰é™¤äº† IE/Edgeï¼Œå…¶ä»–æµè§ˆå™¨éƒ½æ”¯æŒã€‚ ","date":"2021-09-08","objectID":"/go-use-sse/:1:0","series":null,"tags":["sse","golang"],"title":"Go ä½¿ç”¨ sse","uri":"/go-use-sse/#sse-çš„æœ¬è´¨"},{"categories":["web","å¼€å‘è€…æ‰‹å†Œ"],"content":" SSE çš„ç‰¹ç‚¹SSE ä¸ WebSocket ä½œç”¨ç›¸ä¼¼ï¼Œéƒ½æ˜¯å»ºç«‹æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ¸ é“ï¼Œç„¶åæœåŠ¡å™¨å‘æµè§ˆå™¨æ¨é€ä¿¡æ¯ã€‚ æ€»ä½“æ¥è¯´ï¼ŒWebSocket æ›´å¼ºå¤§å’Œçµæ´»ã€‚å› ä¸ºå®ƒæ˜¯å…¨åŒå·¥é€šé“ï¼Œå¯ä»¥åŒå‘é€šä¿¡ï¼›SSE æ˜¯å•å‘é€šé“ï¼Œåªèƒ½æœåŠ¡å™¨å‘æµè§ˆå™¨å‘é€ï¼Œå› ä¸ºæµä¿¡æ¯æœ¬è´¨ä¸Šå°±æ˜¯ä¸‹è½½ã€‚å¦‚æœæµè§ˆå™¨å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œå°±å˜æˆäº†å¦ä¸€æ¬¡ HTTP è¯·æ±‚ã€‚ ","date":"2021-09-08","objectID":"/go-use-sse/:2:0","series":null,"tags":["sse","golang"],"title":"Go ä½¿ç”¨ sse","uri":"/go-use-sse/#sse-çš„ç‰¹ç‚¹"},{"categories":["web","å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¼˜ç‚¹ SSE ä½¿ç”¨ HTTP åè®®ï¼Œç°æœ‰çš„æœåŠ¡å™¨è½¯ä»¶éƒ½æ”¯æŒã€‚WebSocket æ˜¯ä¸€ä¸ªç‹¬ç«‹åè®®ã€‚ SSE å±äºè½»é‡çº§ï¼Œä½¿ç”¨ç®€å•ï¼›WebSocket åè®®ç›¸å¯¹å¤æ‚ã€‚ SSE é»˜è®¤æ”¯æŒæ–­çº¿é‡è¿ï¼ŒWebSocket éœ€è¦è‡ªå·±å®ç°ã€‚ SSE ä¸€èˆ¬åªç”¨æ¥ä¼ é€æ–‡æœ¬ï¼ŒäºŒè¿›åˆ¶æ•°æ®éœ€è¦ç¼–ç åä¼ é€ï¼ŒWebSocket é»˜è®¤æ”¯æŒä¼ é€äºŒè¿›åˆ¶æ•°æ®ã€‚ SSE æ”¯æŒè‡ªå®šä¹‰å‘é€çš„æ¶ˆæ¯ç±»å‹ã€‚ ","date":"2021-09-08","objectID":"/go-use-sse/:2:1","series":null,"tags":["sse","golang"],"title":"Go ä½¿ç”¨ sse","uri":"/go-use-sse/#ä¼˜ç‚¹"},{"categories":["web","å¼€å‘è€…æ‰‹å†Œ"],"content":" go å®ç° package main import ( \"fmt\" \"net/http\" \"time\" ) type SSE struct { } func (sse *SSE) ServeHTTP(rw http.ResponseWriter, req *http.Request) { flusher, ok := rw.(http.Flusher) if !ok { http.Error(rw, \"Streaming unsupported!\", http.StatusInternalServerError) return } rw.Header().Set(\"Content-Type\", \"text/event-stream\") rw.Header().Set(\"Cache-Control\", \"no-cache\") rw.Header().Set(\"Connection\", \"keep-alive\") rw.Header().Set(\"Access-Control-Allow-Origin\", \"*\") for { select { case \u003c-req.Context().Done(): fmt.Println(\"req done...\") return case \u003c-time.After(500 * time.Millisecond): fmt.Fprintf(rw, \"id: %d\\nevent: ping \\ndata: %d\\n\\n\", time.Now().Unix(), time.Now().Unix()) flusher.Flush() } } } func main() { //route := gin.New() //route.GET(\"sse\", gin.WrapH(\u0026SSE{})) //route.Run(\":8080\") http.Handle(\"/sse\", \u0026SSE{}) http.ListenAndServe(\":8080\", nil) } index.html \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003ctitle\u003eTitle\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003ch2\u003eSSE\u003c/h2\u003e \u003c/body\u003e \u003cscript\u003e const source = new EventSource('http://127.0.0.1:8080/sse'); source.onopen = () =\u003e { console.log('é“¾æ¥æˆåŠŸ'); } source.onmessage = (res) =\u003e { console.log('è·å¾—çš„æ•°æ®æ˜¯:' + res.data); } source.onerror = (err) =\u003e { console.log(err); } \u003c/script\u003e \u003c/html\u003e ç›´æ¥è®¿é—® å‰ç«¯è®¿é—® ","date":"2021-09-08","objectID":"/go-use-sse/:3:0","series":null,"tags":["sse","golang"],"title":"Go ä½¿ç”¨ sse","uri":"/go-use-sse/#go-å®ç°"},{"categories":["web","å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Example SSE server in Golang Server-Sent Events æ•™ç¨‹ ","date":"2021-09-08","objectID":"/go-use-sse/:4:0","series":null,"tags":["sse","golang"],"title":"Go ä½¿ç”¨ sse","uri":"/go-use-sse/#å‚è€ƒ"},{"categories":["golang"],"content":"goæ„é€ å‡½æ•°,goåˆå§‹åŒ–å‡½æ•°,goå‡½æ•°å¼é€‰é¡¹æ¨¡å¼,golangå‡½æ•°å¼ç¼–ç¨‹","date":"2021-08-23","objectID":"/functional-options-pattern/","series":null,"tags":["golang"],"title":"go å‡½æ•°å¼é€‰é¡¹æ¨¡å¼","uri":"/functional-options-pattern/"},{"categories":["golang"],"content":"Go è¯­è¨€æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œä¸€èˆ¬é€šè¿‡å®šä¹‰ New å‡½æ•°æ¥å……å½“æ„é€ å‡½æ•°ã€‚ä½†æ˜¯ï¼Œå¦‚æœç»“æ„æœ‰è¾ƒå¤šå­—æ®µï¼Œè¦åˆå§‹åŒ–è¿™äº›å­—æ®µï¼Œå°±æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œæœ‰ä¸€ç§æ–¹å¼è¢«è®¤ä¸ºæ˜¯æœ€ä¼˜é›…çš„ï¼Œå°±æ˜¯å‡½æ•°å¼é€‰é¡¹æ¨¡å¼ï¼ˆFunctional Options Patternï¼‰ã€‚ å‡½æ•°å¼é€‰é¡¹æ¨¡å¼ç”¨äºæ„é€ å‡½æ•°å’Œå…¶ä»–å…¬å…± API ä¸­çš„å¯é€‰å‚æ•°ï¼Œä½ é¢„è®¡è¿™äº›å‚æ•°éœ€è¦æ‰©å±•ï¼Œå°¤å…¶æ˜¯åœ¨è¿™äº›å‡½æ•°ä¸Šå·²ç»æœ‰ä¸‰ä¸ªæˆ–æ›´å¤šå‚æ•°çš„æƒ…å†µä¸‹ã€‚ ","date":"2021-08-23","objectID":"/functional-options-pattern/:0:0","series":null,"tags":["golang"],"title":"go å‡½æ•°å¼é€‰é¡¹æ¨¡å¼","uri":"/functional-options-pattern/#"},{"categories":["golang"],"content":" å¸¸è§„æ–¹å¼æˆ‘ä»¬æœ‰å¦‚ä¸‹ç»“æ„ä½“ï¼š type Server struct { host string // å¿…å¡« port int // å¿…å¡« timeout time.Duration // å¯é€‰ maxConn int // å¯é€‰ } host å’Œ port å­—æ®µæ˜¯å¿…é¡»çš„ï¼Œtimeout å’Œ maxConn å­—æ®µæ˜¯å¯é€‰çš„ã€‚ ä¹‹å‰æˆ‘çš„åšæ³•æ˜¯è¿™æ ·å¤„ç†çš„ï¼Œå®šä¹‰ä¸€ä¸ª New å‡½æ•°ï¼Œåˆå§‹åŒ–å¿…å¡«å­—æ®µï¼Œå¯¹æ¯ä¸ªå¯é€‰å­—æ®µéƒ½å®šä¹‰äº†ä¸€ä¸ª SetXXX å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š package main import \"time\" type Server struct { host string // å¿…å¡« port int // å¿…å¡« timeout time.Duration // å¯é€‰ maxConn int // å¯é€‰ } func New(host string, port int) *Server { return \u0026Server{ host: host, port: port, timeout: 0, maxConn: 0, } } func (s *Server) SetTimeout(timeout time.Duration) { s.timeout = timeout } func (s *Server) SetMaxConn(maxConn int) { s.maxConn = maxConn } func main() { } ä¸ªäººè§‰å¾—è¿™ç§æ–¹å¼å…¶å®å·²ç»å¾ˆä¼˜é›…äº†ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¹Ÿæ˜¯å¤Ÿç”¨çš„ã€‚ ","date":"2021-08-23","objectID":"/functional-options-pattern/:1:0","series":null,"tags":["golang"],"title":"go å‡½æ•°å¼é€‰é¡¹æ¨¡å¼","uri":"/functional-options-pattern/#å¸¸è§„æ–¹å¼"},{"categories":["golang"],"content":" Functional Option Pattern package main import ( \"log\" \"time\" ) type Server struct { host string // å¿…å¡« port int // å¿…å¡« timeout time.Duration // å¯é€‰ maxConn int // å¯é€‰ } type Option func(*Server) func New(options ...Option) *Server { svr := \u0026Server{} for _, f := range options { f(svr) } return svr } func WithHost(host string) Option { return func(s *Server) { s.host = host } } func WithPort(port int) Option { return func(s *Server) { s.port = port } } func WithTimeout(timeout time.Duration) Option { return func(s *Server) { s.timeout = timeout } } func WithMaxConn(maxConn int) Option { return func(s *Server) { s.maxConn = maxConn } } func (s *Server) Run() error { // ... return nil } func main() { svr := New( WithHost(\"localhost\"), WithPort(8080), WithTimeout(time.Minute), WithMaxConn(120), ) if err := svr.Run(); err != nil { log.Fatal(err) } } åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Option å‡½æ•°ç±»å‹ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š*Serverã€‚ç„¶åï¼ŒServer çš„æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ª Option ç±»å‹çš„ä¸å®šå‚æ•°ã€‚ func New(options ...Option) *Server { svr := \u0026Server{} for _, f := range options { f(svr) } return svr } é€‰é¡¹çš„å®šä¹‰éœ€è¦å®šä¹‰ä¸€ç³»åˆ—ç›¸å…³è¿”å› Option çš„å‡½æ•°ï¼Œå¦‚ï¼š func WithPort(port int) Option { return func(s *Server) { s.port = port } } å¦‚æœå¢åŠ é€‰é¡¹ï¼Œåªéœ€è¦å¢åŠ å¯¹åº”çš„ WithXXX å‡½æ•°å³å¯ã€‚ ","date":"2021-08-23","objectID":"/functional-options-pattern/:2:0","series":null,"tags":["golang"],"title":"go å‡½æ•°å¼é€‰é¡¹æ¨¡å¼","uri":"/functional-options-pattern/#functional-option-pattern"},{"categories":["golang"],"content":" å‚è€ƒ Golang Functional Options Pattern ","date":"2021-08-23","objectID":"/functional-options-pattern/:3:0","series":null,"tags":["golang"],"title":"go å‡½æ•°å¼é€‰é¡¹æ¨¡å¼","uri":"/functional-options-pattern/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,Failed to start LSB: Bring up/down networking","date":"2021-08-15","objectID":"/lsb-bring-networking-err/","series":[],"tags":["linux"],"title":"Failed to start LSB: Bring up/down networking é—®é¢˜è§£å†³","uri":"/lsb-bring-networking-err/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆšåœ¨è™šæ‹Ÿæœºä¸Šæ‰§è¡Œ service network restart æ—¶æŠ¥äº†ä»¥ä¸‹é”™è¯¯ğŸ‘‡ 2æœˆ 04 11:09:16 192.168.48.151 postfix/pickup[19414]: fatal: unable to use my own hostname 2æœˆ 04 11:09:17 192.168.48.151 postfix/master[7179]: warning: process /usr/libexec/postfix/pickup pid 19414 exit status 1 2æœˆ 04 11:09:17 192.168.48.151 postfix/master[7179]: warning: /usr/libexec/postfix/pickup: bad command startup -- throttling 2æœˆ 04 11:10:17 192.168.48.151 postfix/pickup[19416]: warning: valid_hostname: numeric hostname: 192.168.48.151 2æœˆ 04 11:10:17 192.168.48.151 postfix/pickup[19416]: fatal: unable to use my own hostname 2æœˆ 04 11:10:18 192.168.48.151 postfix/master[7179]: warning: process /usr/libexec/postfix/pickup pid 19416 exit status 1 2æœˆ 04 11:10:18 192.168.48.151 postfix/master[7179]: warning: /usr/libexec/postfix/pickup: bad command startup -- throttling 2æœˆ 04 11:11:18 192.168.48.151 postfix/pickup[19441]: warning: valid_hostname: numeric hostname: 192.168.48.151 2æœˆ 04 11:11:18 192.168.48.151 postfix/pickup[19441]: fatal: unable to use my own hostname 2æœˆ 04 11:11:19 192.168.48.151 postfix/master[7179]: warning: process /usr/libexec/postfix/pickup pid 19441 exit status 1 2æœˆ 04 11:11:19 192.168.48.151 postfix/master[7179]: warning: /usr/libexec/postfix/pickup: bad command startup -- throttling 2æœˆ 04 11:12:19 192.168.48.151 postfix/pickup[19442]: warning: valid_hostname: numeric hostname: 192.168.48.151 2æœˆ 04 11:12:19 192.168.48.151 postfix/pickup[19442]: fatal: unable to use my own hostname 2æœˆ 04 11:12:20 192.168.48.151 postfix/master[7179]: warning: process /usr/libexec/postfix/pickup pid 19442 exit status 1 2æœˆ 04 11:12:20 192.168.48.151 postfix/master[7179]: warning: /usr/libexec/postfix/pickup: bad command startup -- throttling 2æœˆ 04 11:13:20 192.168.48.151 postfix/pickup[19443]: warning: valid_hostname: numeric hostname: 192.168.48.151 2æœˆ 04 11:13:20 192.168.48.151 postfix/pickup[19443]: fatal: unable to use my own hostname 2æœˆ 04 11:13:21 192.168.48.151 postfix/master[7179]: warning: process /usr/libexec/postfix/pickup pid 19443 exit status 1 2æœˆ 04 11:13:21 192.168.48.151 postfix/master[7179]: warning: /usr/libexec/postfix/pickup: bad command startup -- throttling 2æœˆ 04 11:13:32 192.168.48.151 polkitd[6082]: Registered Authentication Agent for unix-process:19457:2442477 (system bus name :1.95 [/usr/bin/pkttyagent --notify-fd 5 --fallback], object path /org/freedesktop/ 2æœˆ 04 11:13:32 192.168.48.151 systemd[1]: Starting LSB: Bring up/down networking... -- Subject: Unit network.service has begun start-up -- Defined-By: systemd -- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-devel -- -- Unit network.service has begun starting up. 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: æ­£åœ¨æ‰“å¼€ç¯å›æ¥å£ï¼š [ ç¡®å®š ] 2æœˆ 04 11:13:33 192.168.48.151 NetworkManager[6504]: \u003cinfo\u003e [1675480413.4150] audit: op=\"connection-activate\" uuid=\"8740e83d-258d-4030-a9d6-8433e9cfccbb\" name=\"ens33\" result=\"fail\" reason=\"No suitable device 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: æ­£åœ¨æ‰“å¼€æ¥å£ ens33ï¼š é”™è¯¯ï¼šæ¿€æ´»è¿æ¥å¤±è´¥ï¼šNo suitable device found for this connection. 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: [å¤±è´¥] 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 network[19463]: RTNETLINK answers: File exists 2æœˆ 04 11:13:33 192.168.48.151 systemd[1]: network.service: control process exited, code=exited status=1 2æœˆ 04 11:13:33 192.168.48.151 systemd[1]: Failed to start LSB: Bring up/down networking. -- Subject: Unit network.","date":"2021-08-15","objectID":"/lsb-bring-networking-err/:0:0","series":[],"tags":["linux"],"title":"Failed to start LSB: Bring up/down networking é—®é¢˜è§£å†³","uri":"/lsb-bring-networking-err/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,centos 7.9 å®‰è£… Redis 6.0.16,centos å®‰è£… redis","date":"2021-07-13","objectID":"/centos-7.9-install-redis-6.0.16/","series":null,"tags":["redis","linux"],"title":"Centos 7.9 å®‰è£… Redis 6.0.16","uri":"/centos-7.9-install-redis-6.0.16/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æœåŠ¡å™¨ç‰ˆæœ¬ linux version ","date":"2021-07-13","objectID":"/centos-7.9-install-redis-6.0.16/:1:0","series":null,"tags":["redis","linux"],"title":"Centos 7.9 å®‰è£… Redis 6.0.16","uri":"/centos-7.9-install-redis-6.0.16/#æœåŠ¡å™¨ç‰ˆæœ¬"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¸‹è½½å¯ä»¥ç›´æ¥å»å®˜ç½‘ä¸‹è½½éœ€è¦çš„ç‰ˆæœ¬å³å¯ï¼Œè¿™é‡Œå·² 6.0.16 ç‰ˆæœ¬ä¸ºå‡†ã€‚ redis download ","date":"2021-07-13","objectID":"/centos-7.9-install-redis-6.0.16/:2:0","series":null,"tags":["redis","linux"],"title":"Centos 7.9 å®‰è£… Redis 6.0.16","uri":"/centos-7.9-install-redis-6.0.16/#ä¸‹è½½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£…æˆ‘æŠŠä¸‹è½½çš„ tar åŒ…æ”¾åœ¨äº† /root ç›®å½•ä¸‹ï¼Œè¿™é‡Œå¯ä»¥è‡ªè¡Œä¿®æ”¹ã€‚ tar -xzf redis-6.0.16.tar.gz cd redis-6.0.16 make \u0026\u0026 make install å®‰è£…æˆåŠŸå¯åŠ¨æœåŠ¡ï¼š install success redis start ","date":"2021-07-13","objectID":"/centos-7.9-install-redis-6.0.16/:3:0","series":null,"tags":["redis","linux"],"title":"Centos 7.9 å®‰è£… Redis 6.0.16","uri":"/centos-7.9-install-redis-6.0.16/#å®‰è£…"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸è§é—®é¢˜","date":"2021-07-13","objectID":"/centos-7.9-install-redis-6.0.16/:4:0","series":null,"tags":["redis","linux"],"title":"Centos 7.9 å®‰è£… Redis 6.0.16","uri":"/centos-7.9-install-redis-6.0.16/#å¸¸è§é—®é¢˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" cc: command not foundéœ€è¦å®‰è£… gccğŸ‘‡ yum -y install gcc gcc-c++ libstdc++-devel ","date":"2021-07-13","objectID":"/centos-7.9-install-redis-6.0.16/:4:1","series":null,"tags":["redis","linux"],"title":"Centos 7.9 å®‰è£… Redis 6.0.16","uri":"/centos-7.9-install-redis-6.0.16/#cc-command-not-found"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" struct redisServer server_xxxéœ€è¦å‡çº§ gcc åˆ° 9 ç‰ˆæœ¬ğŸ‘‡ yum -y install centos-release-scl yum -y install devtoolset-9-gcc devtoolset-9-gcc-c++ devtoolset-9-binutils scl enable devtoolset-9 bash è®¾ç½®æ°¸ä¹…å‡çº§ echo \"source /opt/rh/devtoolset-9/enable\" \u003e\u003e/etc/profile ","date":"2021-07-13","objectID":"/centos-7.9-install-redis-6.0.16/:4:2","series":null,"tags":["redis","linux"],"title":"Centos 7.9 å®‰è£… Redis 6.0.16","uri":"/centos-7.9-install-redis-6.0.16/#struct-redisserver-server_xxx"},{"categories":["golang"],"content":"go make å’Œ new çš„åŒºåˆ«,golang make,golang new,defference with golang make and new","date":"2021-06-21","objectID":"/new-make-difference/","series":null,"tags":["golang"],"title":"golang make å’Œ new çš„åŒºåˆ«","uri":"/new-make-difference/"},{"categories":["golang"],"content":" make çš„ä½œç”¨æ˜¯åˆå§‹åŒ–å†…ç½®çš„æ•°æ®ç»“æ„ï¼Œä¹Ÿå°±æ˜¯ sliceã€mapå’Œ channelã€‚ new çš„ä½œç”¨æ˜¯æ ¹æ®ä¼ å…¥çš„ç±»å‹åˆ†é…ä¸€ç‰‡å†…å­˜ç©ºé—´å¹¶è¿”å›æŒ‡å‘è¿™ç‰‡å†…å­˜ç©ºé—´çš„æŒ‡é’ˆã€‚ ","date":"2021-06-21","objectID":"/new-make-difference/:0:0","series":null,"tags":["golang"],"title":"golang make å’Œ new çš„åŒºåˆ«","uri":"/new-make-difference/#"},{"categories":["golang"],"content":" makeå†…ç½®å‡½æ•° make ä»…æ”¯æŒ sliceã€mapã€channel ä¸‰ç§æ•°æ®ç±»å‹çš„å†…å­˜åˆ›å»ºï¼Œå…¶è¿”å›å€¼æ˜¯æ‰€åˆ›å»ºç±»å‹çš„æœ¬èº«ï¼Œè€Œä¸æ˜¯æ–°çš„æŒ‡é’ˆå¼•ç”¨ã€‚ func make(t Type, size ...IntegerType) Type func main() { v1 := make([]int, 1, 5) v2 := make(map[int]bool, 5) v3 := make(chan int, 1) fmt.Println(v1, v2, v3) } åœ¨â˜ï¸ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«å¯¹ä¸‰ç§ç±»å‹è°ƒç”¨äº† make å‡½æ•°è¿›è¡Œäº†åˆå§‹åŒ–ã€‚ä¼šå‘ç°æœ‰çš„å…¥å‚æ˜¯æœ‰å¤šä¸ªé•¿åº¦æŒ‡å®šï¼Œæœ‰çš„æ²¡æœ‰ã€‚è¿™é‡Œçš„åŒºåˆ«ä¸»è¦æ˜¯é•¿åº¦ï¼ˆlenï¼‰å’Œå®¹é‡ï¼ˆcapï¼‰çš„æŒ‡å®šï¼Œ æœ‰çš„ç±»å‹æ˜¯æ²¡æœ‰å®¹é‡è¿™ä¸€è¯´æ³•ã€‚ è¾“å‡ºç»“æœï¼š [0] map[] 0xc000044070 è°ƒç”¨ makeå‡½æ•°å»åˆå§‹åŒ–åˆ‡ç‰‡ï¼ˆsliceï¼‰çš„ç±»å‹æ—¶ï¼Œä¼šå¸¦æœ‰é›¶å€¼ã€‚ ","date":"2021-06-21","objectID":"/new-make-difference/:1:0","series":null,"tags":["golang"],"title":"golang make å’Œ new çš„åŒºåˆ«","uri":"/new-make-difference/#make"},{"categories":["golang"],"content":" newå†…ç½®å‡½æ•° new å¯ä»¥å¯¹ä»»æ„ç±»å‹è¿›è¡Œå†…å­˜åˆ›å»ºå’Œåˆå§‹åŒ–ã€‚å…¶è¿”å›å€¼æ˜¯æ‰€åˆ›å»ºç±»å‹çš„æŒ‡é’ˆå¼•ç”¨ã€‚ func new(Type) *Type new(T) å’Œ \u0026T{} æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ ","date":"2021-06-21","objectID":"/new-make-difference/:2:0","series":null,"tags":["golang"],"title":"golang make å’Œ new çš„åŒºåˆ«","uri":"/new-make-difference/#new"},{"categories":["golang"],"content":" åŒºåˆ«make å‡½æ•°åœ¨åˆå§‹åŒ–æ—¶ï¼Œä¼šåˆå§‹åŒ– sliceã€chanã€map ç±»å‹çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œnew å‡½æ•°å¹¶ä¸ä¼šã€‚ ä¾‹å¦‚ï¼Œåœ¨ map ç±»å‹ä¸­ï¼Œåˆç†çš„é•¿åº¦ï¼ˆlenï¼‰å’Œå®¹é‡ï¼ˆcapï¼‰å¯ä»¥æé«˜æ•ˆç‡å’Œå‡å°‘å¼€é”€ã€‚ make å‡½æ•°ï¼š èƒ½å¤Ÿåˆ†é…å¹¶åˆå§‹åŒ–ç±»å‹æ‰€éœ€çš„å†…å­˜ç©ºé—´å’Œç»“æ„ï¼Œè¿”å›å¼•ç”¨ç±»å‹çš„æœ¬èº«ã€‚ å…·æœ‰ä½¿ç”¨èŒƒå›´çš„å±€é™æ€§ï¼Œä»…æ”¯æŒ channelã€mapã€slice ä¸‰ç§ç±»å‹ã€‚ å…·æœ‰ç‹¬ç‰¹çš„ä¼˜åŠ¿ï¼Œmake å‡½æ•°ä¼šå¯¹ä¸‰ç§ç±»å‹çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼ˆé•¿åº¦ã€å®¹é‡ç­‰ï¼‰èµ‹å€¼ã€‚ new å‡½æ•°ï¼š èƒ½å¤Ÿåˆ†é…ç±»å‹æ‰€éœ€çš„å†…å­˜ç©ºé—´ï¼Œè¿”å›æŒ‡é’ˆå¼•ç”¨ï¼ˆæŒ‡å‘å†…å­˜çš„æŒ‡é’ˆï¼‰ï¼ŒåŒæ—¶æŠŠåˆ†é…çš„å†…å­˜ç½®ä¸ºé›¶ï¼Œä¹Ÿå°±æ˜¯ç±»å‹çš„é›¶å€¼ã€‚ å¯è¢«æ›¿ä»£ï¼Œå…¶å®ä¸å¸¸ç”¨ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½æ˜¯é‡‡ç”¨çŸ­è¯­å¥å£°æ˜ä»¥åŠç»“æ„ä½“çš„å­—é¢é‡è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼Œæ¯”å¦‚ï¼š i := 0 u := \u0026user{} ","date":"2021-06-21","objectID":"/new-make-difference/:3:0","series":null,"tags":["golang"],"title":"golang make å’Œ new çš„åŒºåˆ«","uri":"/new-make-difference/#åŒºåˆ«"},{"categories":["golang"],"content":" é›¶å€¼ arrayã€struct æ¯ä¸ªå…ƒç´ æˆ–å­—æ®µéƒ½æ˜¯å¯¹åº”è¯¥ç±»å‹çš„é›¶å€¼ sliceã€map å¯¹äºé›¶å€¼ nil ","date":"2021-06-21","objectID":"/new-make-difference/:4:0","series":null,"tags":["golang"],"title":"golang make å’Œ new çš„åŒºåˆ«","uri":"/new-make-difference/#é›¶å€¼"},{"categories":["golang"],"content":" å‚è€ƒ makeã€newæ“ä½œ Go make å’Œ newçš„åŒºåˆ« Go - var \u0026 make \u0026 new åœ¨å¤æ‚ç±»å‹ä¸Šçš„ä½¿ç”¨åŒºåˆ« Go é¢è¯•é¢˜ï¼š new å’Œ make æ˜¯ä»€ä¹ˆï¼Œå·®å¼‚åœ¨å“ªï¼Ÿ ","date":"2021-06-21","objectID":"/new-make-difference/:5:0","series":null,"tags":["golang"],"title":"golang make å’Œ new çš„åŒºåˆ«","uri":"/new-make-difference/#å‚è€ƒ"},{"categories":["golang"],"content":"xiaobinqt,go,go build,go build æ·»åŠ ç‰ˆæœ¬ç­‰ä¿¡æ¯,golang æ„å»ºæ·»åŠ é¢å¤–çš„å‚æ•°","date":"2021-05-24","objectID":"/go-build-add-ldflags/","series":null,"tags":["golang"],"title":"Go build æ·»åŠ ç‰ˆæœ¬ç­‰ä¿¡æ¯","uri":"/go-build-add-ldflags/"},{"categories":["golang"],"content":" Go åœ¨ç¼–è¯‘æ—¶å¯ä»¥æ·»åŠ ä¸€äº›é¢å¤–çš„å‚æ•°ï¼Œè¿™äº›å‚æ•°å¯ä»¥ç”¨æ¥æ·»åŠ å¦‚ç‰ˆæœ¬ç­‰ä¿¡æ¯ã€‚ æ¯”å¦‚æœ‰ä»¥ä¸‹çš„ t.go æ–‡ä»¶æºç ğŸ‘‡ package main import ( \"flag\" \"fmt\" \"runtime\" ) var ( version string buildTime string commitID string ) func init() { flag.StringVar(\u0026version, \"version\", \"\", \"ç‰ˆæœ¬ä¿¡æ¯\") } func main() { flag.Parse() if version == \"version\" || version == \"v\" { fmt.Printf(\"Git commit: %s\\nGo version: %s\\nBuilt: %s\\nOS/Arch: %s/%s\\n \", commitID, runtime.Version(), buildTime, runtime.GOOS, runtime.GOARCH) return } fmt.Println(\"hello world\") } ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ğŸ‘‡ æ³¨æ„ï¼š-X åé¢è¦å†™å®Œæ•´çš„åŒ…è·¯å¾„ï¼Œç¤ºä¾‹ä¸­æ˜¯ main åŒ…ã€‚ go build -ldflags \"-X 'main.version=1.0.0' -X 'main.buildTime=$(date +\"%Y-%m-%d %H:%M:%S\")' -X 'main.commitID=1234567890'\" -o t t.go ç¤ºä¾‹ç»“æœ å¯ä»¥çœ‹åˆ°ï¼Œç¼–è¯‘åçš„æ–‡ä»¶ä¸­åŒ…å«äº†ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚ç‰ˆæœ¬å·ã€ç¼–è¯‘æ—¶é—´ã€æäº¤ ID ç­‰ã€‚ ","date":"2021-05-24","objectID":"/go-build-add-ldflags/:0:0","series":null,"tags":["golang"],"title":"Go build æ·»åŠ ç‰ˆæœ¬ç­‰ä¿¡æ¯","uri":"/go-build-add-ldflags/#"},{"categories":["golang"],"content":"xiaobinqt,go web æ¡†æ¶ martini,martini,go-martini/martini","date":"2021-05-20","objectID":"/go-web-martini-glance/","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/"},{"categories":["golang"],"content":" ä¹‹å‰åœ¨CSDNå†™è¿‡ä¸€ä¸ªå…³äº martini çš„ç¬”è®°golang martini åŒ…çš„ç®€å•ä½¿ç”¨ ï¼Œæœ€è¿‘è¯»æ¥æ„Ÿè§‰ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œè€Œä¸”ä¹Ÿæœ‰ä¸€äº›é”™è¯¯ï¼ŒèŠ±äº†ç‚¹æ—¶é—´é‡æ–°æ•´ç†äº†ä¸‹é‚£ç¯‡ç¬”è®°ã€‚ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:0:0","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#"},{"categories":["golang"],"content":" ä¸­é—´ä»¶çš„ä½¿ç”¨æ ¹æ®æ–‡æ¡£ä¸­é—´ä»¶çš„ä½¿ç”¨æœ‰ 2 ç§æ–¹æ³•ï¼Œæˆ‘æ€»ç»“ä¸ºé€šè¿‡ Handlers å‡½æ•°æ–¹æ³•å’Œé Handlers å‡½æ•°æ–¹æ³•ï¼Œå…¶å®ä¸»è¦åŒºåˆ«å°±æ˜¯ Handlers å‡½æ•°æ–¹æ³•ä¼˜å…ˆçº§æ›´é«˜ï¼Œå®ƒå°†ä¼šæ›¿æ¢æ‰ä¹‹å‰çš„ä»»ä½•è®¾ç½®è¿‡çš„ä¸­é—´ä»¶ï¼Œä½†æ˜¯groupç»„ä¸­çš„ä¸­é—´ä»¶è¿˜æ˜¯ä¼šæ‰§è¡Œã€‚ã€‚ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:1:0","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#ä¸­é—´ä»¶çš„ä½¿ç”¨"},{"categories":["golang"],"content":" é Handlers æ–¹å¼çš„ä¸­é—´ä»¶ package main import ( \"github.com/go-martini/martini\" \"fmt\" ) func main() { m := martini.Classic() m.Use(func(c martini.Context) { fmt.Println(\"ç¬¬ 1 ä¸ªä¸­é—´ä»¶ before a request\") }) m.Use(func() { fmt.Println(\"ç¬¬ 2 ä¸ªä¸­é—´ä»¶ 111111111111\") }) m.Use(func(c martini.Context) { fmt.Println(\"ç¬¬ 3 ä¸ªä¸­é—´ä»¶ group middleware\") }) m.Group(\"/api\", func(r martini.Router) { r.Get(\"/test\", func() string { return \"...... return success .....\" }) }, func() { fmt.Println(\"ç¬¬ 4 ä¸ªä¸­é—´ä»¶ group middleware\") }) m.RunOnAddr(\":8081\") } â˜ï¸æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œä»è¯·æ±‚åçš„æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºæ˜¯æŒ‰ç€ä»£ç é¡ºåºæ‰§è¡Œçš„ã€‚ æ‰§è¡Œç»“æœ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:1:1","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#é-handlers-æ–¹å¼çš„ä¸­é—´ä»¶"},{"categories":["golang"],"content":" Handlers æ–¹å¼çš„ä¸­é—´ä»¶å¯ä»¥æŠŠä¸Šé¢ä»£ç ç¨å¾®æ”¹ä¸‹ï¼Œå¦‚ä¸‹ï¼š package main import ( \"github.com/go-martini/martini\" \"fmt\" ) func main() { m := martini.Classic() m.Use(func(c martini.Context) { fmt.Println(\"ç¬¬ 1 ä¸ªä¸­é—´ä»¶ before a request\") }) m.Use(func() { fmt.Println(\"ç¬¬ 2 ä¸ªä¸­é—´ä»¶ 111111111111\") }) m.Use(func(c martini.Context) { fmt.Println(\"ç¬¬ 3 ä¸ªä¸­é—´ä»¶ group middleware\") }) m.Handlers( func() { fmt.Println(\"å…¶ä»–ä¸­é—´ä»¶éƒ½å¤±æ•ˆï¼Œåªæœ‰æˆ‘æ‰§è¡Œäº†..\") }, ) m.Group(\"/api\", func(r martini.Router) { r.Get(\"/test\", func() string { return \"...... return success .....\" }) }, func() { fmt.Println(\"ç¬¬ 4 ä¸ªä¸­é—´ä»¶ group middleware\") }) m.RunOnAddr(\":8081\") } æ‰§è¡Œåæ‰“å°ç»“æœå¦‚ä¸‹ğŸ‘‡ï¼Œè¯´æ˜åªæ‰§è¡Œäº† Handlers å‡½æ•°ä¸­çš„ä¸­é—´ä»¶å’Œ group ç»„ä¸­çš„ä¸­é—´ä»¶ã€‚ ç¤ºä¾‹ç»“æœ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:1:2","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#handlers-æ–¹å¼çš„ä¸­é—´ä»¶"},{"categories":["golang"],"content":" Next å‡½æ•°çš„ä½¿ç”¨Context.Next()æ˜¯ä¸€ä¸ªå¯é€‰çš„å‡½æ•°ç”¨äºä¸­é—´ä»¶å¤„ç†å™¨æš‚æ—¶æ”¾å¼ƒæ‰§è¡Œç›´åˆ°å…¶ä»–çš„å¤„ç†å™¨éƒ½æ‰§è¡Œå®Œæ¯•. è¿™æ ·å°±å¯ä»¥å¾ˆå¥½çš„å¤„ç†åœ¨ http è¯·æ±‚å®Œæˆåéœ€è¦åšçš„æ“ä½œã€‚ å¯¹äº Next æˆ‘è§‰å¾—å¯ä»¥ç†è§£æˆé‡åˆ° Next() åå°±å…¥æ ˆï¼Œå…ˆè¿›åå‡ºã€‚ ä»¥ä¸‹æˆ‘ä¹Ÿæ˜¯é€šè¿‡æœ‰æ²¡æœ‰ Handlers å‡½æ•°ä¸­é—´ä»¶æ¥ä¸¾ä¾‹ã€‚ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:2:0","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#next-å‡½æ•°çš„ä½¿ç”¨"},{"categories":["golang"],"content":" Next åœ¨é Handlers ä¸­é—´ä»¶ä¸­ä½¿ç”¨ package main import ( \"github.com/go-martini/martini\" \"fmt\" ) func main() { m := martini.Classic() m.Use(func(c martini.Context) { fmt.Println(\"ç¬¬ 1 ä¸ªä¸­é—´ä»¶ before a request\") c.Next() fmt.Println(\"ç¬¬ 6 ä¸ªä¸­é—´ä»¶ after a request\") // å…¥æ ˆç­‰å¾…å¤„ç† }) m.Use(func() { fmt.Println(\"ç¬¬ 2 ä¸ªä¸­é—´ä»¶ 111111111111\") }) m.Use(func(c martini.Context) { fmt.Println(\"ç¬¬ 3 ä¸ªä¸­é—´ä»¶ group middleware\") c.Next() fmt.Println(\"ç¬¬ 5 ä¸ªä¸­é—´ä»¶ group middleware\") // å…¥æ ˆç­‰å¾…å¤„ç† }) m.Group(\"/api\", func(r martini.Router) { r.Get(\"/test\", func() string { fmt.Println(\"......last æœ€åæ‰§è¡Œ........\") return \"...... return success .....\" }) }, func() { fmt.Println(\"åˆ†ç»„ä¸­çš„ä¸­é—´ä»¶ group middleware\") }) m.RunOnAddr(\":8080\") } æ‰§è¡Œåçš„æ‰“å°ç»“æœå¦‚ä¸‹ï¼š ç¤ºä¾‹ç»“æœ è¯·æ³¨æ„ç¬¬ 5 å’Œç¬¬ 6 ä¸ªä¸­é—´ä»¶æ˜¯æœ€åæ‰§è¡Œçš„ï¼Œæ˜¯åœ¨ httpè¯·æ±‚å®Œæˆå æ‰§è¡Œçš„ã€‚ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:2:1","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#next-åœ¨é-handlers-ä¸­é—´ä»¶ä¸­ä½¿ç”¨"},{"categories":["golang"],"content":" Next åœ¨ Handlers ä¸­é—´ä»¶ä¸­ä½¿ç”¨ package main import ( \"github.com/go-martini/martini\" \"fmt\" ) func main() { m := martini.Classic() m.Handlers( func() { fmt.Println(\"ç¬¬ 1 æ¬¡æ‰§è¡Œ....\") }, func(c martini.Context) { c.Next() fmt.Println(\"http è¯·æ±‚å®Œæˆåæ‰§è¡Œ....\") }, func() { fmt.Println(\"ç¬¬ 2 æ¬¡æ‰§è¡Œ....\") }, ) m.Group(\"/api\", func(r martini.Router) { r.Get(\"/test\", func() string { fmt.Println(\"......last........\") return \"...... return success .....\" }) }, func() { fmt.Println(\"ç»„ä¸­çš„ä¸­é—´ä»¶ group middleware\") }) m.RunOnAddr(\":8081\") } æ‰§è¡Œåçš„æ‰“å°ç»“æœå¦‚ä¸‹ï¼š ç¤ºä¾‹ç»“æœ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:2:2","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#next-åœ¨-handlers-ä¸­é—´ä»¶ä¸­ä½¿ç”¨"},{"categories":["golang"],"content":" ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¯¹å‡½æ•°æˆ–æ–¹æ³•çš„è°ƒç”¨æ˜¯è°ƒç”¨æ–¹çš„ä¸»åŠ¨ç›´æ¥è¡Œä¸ºï¼Œè°ƒç”¨æ–¹æ¸…æ¥šåœ°çŸ¥é“è¢«è°ƒçš„å‡½æ•°åæ˜¯ä»€ä¹ˆï¼Œå‚æ•°æœ‰å“ªäº›ç±»å‹ï¼Œç›´æ¥ä¸»åŠ¨åœ°è°ƒç”¨ï¼›åŒ…æ‹¬å¯¹è±¡çš„åˆå§‹åŒ–ä¹Ÿæ˜¯æ˜¾å¼åœ°ç›´æ¥åˆå§‹åŒ–ã€‚æ‰€è°“çš„â€œæ§åˆ¶åè½¬â€å°±æ˜¯å°†è¿™ç§ä¸»åŠ¨è¡Œä¸ºå˜ä¸ºé—´æ¥çš„è¡Œä¸ºï¼Œä¸»è°ƒæ–¹ä¸æ˜¯ç›´æ¥è°ƒç”¨å‡½æ•°æˆ–å¯¹è±¡ï¼Œè€Œæ˜¯å€ŸåŠ©æ¡†æ¶ä»£ç è¿›è¡Œé—´æ¥çš„è°ƒç”¨å’Œåˆå§‹åŒ–ï¼Œè¿™ç§è¡Œä¸ºè¢«ç§°ä¸ºâ€œæ§åˆ¶åè½¬â€ï¼Œæ§åˆ¶åè½¬å¯ä»¥è§£è€¦è°ƒç”¨æ–¹å’Œè¢«è°ƒæ–¹ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½¿ç”¨åº“çš„ç¨‹åºæ˜¯ç¨‹åºä¸»åŠ¨åœ°è°ƒç”¨åº“çš„åŠŸèƒ½ï¼Œä½†ä½¿ç”¨æ¡†æ¶çš„ç¨‹åºå¸¸å¸¸ç”±æ¡†æ¶é©±åŠ¨æ•´ä¸ªç¨‹åºï¼Œåœ¨æ¡†æ¶ä¸‹å†™çš„ä¸šåŠ¡ä»£ç æ˜¯è¢«æ¡†æ¶é©±åŠ¨çš„ï¼Œè¿™ç§æ¨¡å¼å°±æ˜¯â€œæ§åˆ¶åè½¬â€ã€‚ â€œä¾èµ–æ³¨å…¥â€æ˜¯å®ç°â€œæ§åˆ¶åè½¬â€çš„ä¸€ç§æ–¹æ³•ï¼Œæ˜¯é€šè¿‡æ³¨å…¥çš„å‚æ•°æˆ–å®ä¾‹çš„æ–¹å¼å®ç°æ§åˆ¶åè½¬ã€‚ æ§åˆ¶åè½¬çš„ä»·å€¼åœ¨å“ªé‡Œï¼Ÿä¸€å¥è¯å°±æ˜¯â€œè§£è€¦â€ï¼Œå¯ä»¥è®©æ§åˆ¶åè½¬çš„æ¡†æ¶ä»£ç è¯»å–é…ç½®ï¼ŒåŠ¨æ€åœ°æ„å»ºå¯¹è±¡ã€‚ æ§åˆ¶åè½¬æ˜¯è§£å†³å¤æ‚é—®é¢˜çš„ä¸€ç§æ–¹æ³•ï¼Œç‰¹åˆ«æ˜¯åœ¨ web æ¡†æ¶ä¸­ä¸ºè·¯ç”±å’Œä¸­é—´ä»¶çš„çµæ´»æ³¨å…¥æä¾›äº†å¾ˆå¥½çš„æ–¹æ³•ã€‚ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:3:0","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬"},{"categories":["golang"],"content":" æœåŠ¡æœåŠ¡å³æ˜¯è¢«æ³¨å…¥åˆ°å¤„ç†å™¨ä¸­çš„å‚æ•°ï¼Œä½ å¯ä»¥æ˜ å°„ä¸€ä¸ªæœåŠ¡åˆ°å…¨å±€æˆ–è€…è¯·æ±‚çš„çº§åˆ«ã€‚ å…³äºæœåŠ¡æœ€å¼ºæ‚çš„åœ°æ–¹ä¹‹ä¸€å°±æ˜¯å®ƒèƒ½å¤Ÿæ˜ å°„æœåŠ¡åˆ°æ¥å£ã€‚ä¾‹å¦‚è¯´ï¼Œå‡è®¾ä½ æƒ³è¦è¦†ç›–http.ResponseWriteræˆä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä½ å¯ä»¥å°è£…å®ƒå¹¶åŒ…å«ä½ è‡ªå·±çš„é¢å¤–æ“ä½œã€‚ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:4:0","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#æœåŠ¡"},{"categories":["golang"],"content":" å…¨å±€æ˜ å°„ package main import ( \"fmt\" \"net/http\" \"github.com/go-martini/martini\" ) func myHandle(w http.ResponseWriter, ttt int, s1, s2 string) { ret := fmt.Sprintf(\"Hello, World! %d,%s , %s\", ttt, s1, s2) w.Write([]byte(ret)) } func registerMyRouter(r martini.Router) { r.Group(\"/api\", func(r martini.Router) { r.Get(\"/test\", myHandle) }, func() { fmt.Println(\"ç»„ä¸­çš„ä¸­é—´ä»¶ group middleware\") }) } func main() { m := martini.Classic() gv1 := \"1111111\" gv2 := \"2222222\" m.Map(gv1) m.Map(gv2) age := 23 m.Map(age) registerMyRouter(m) m.RunOnAddr(\":8083\") } è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å…¨å±€æ˜ å°„çš„æœåŠ¡ï¼Œgv1ï¼Œgv2ï¼Œage è¿™å‡ ä¸ªæœåŠ¡(å‚æ•°) å°†å¯ä»¥åœ¨æ‰€æœ‰çš„å¤„ç†å™¨ä¸­è¢«ä½¿ç”¨åˆ°ã€‚æˆ‘ä»¬çš„ myHandle() å¤„ç†å™¨(æ–¹æ³•) å°±ç›´æ¥ç”¨äº†ï¼Œä¸”æ²¡æœ‰æŠ¥é”™ã€‚æ‰§è¡Œåæ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼š ç¤ºä¾‹ç»“æœ âš ï¸è¿™é‡Œæœ‰ä¸ªç‚¹éœ€è¦æ³¨æ„ï¼ŒåŒä¸€ä¸ªç±»å‹çš„æœåŠ¡ï¼Œå¦‚æœå¤šæ¬¡ map æ˜ å°„ï¼Œåé¢çš„å€¼ä¼šæŠŠå‰é¢çš„è¦†ç›–ï¼Œâ˜ï¸ä¸Šé¢çš„ï¼Œgv2 çš„å€¼å°±æŠŠ gv1çš„å€¼è¦†ç›–äº†ã€‚ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:4:1","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#å…¨å±€æ˜ å°„"},{"categories":["golang"],"content":" è¯·æ±‚çº§åˆ«çš„æ˜ å°„ package main import ( \"github.com/go-martini/martini\" \"fmt\" \"net/http\" \"time\" ) type ReqContext struct { ExString string Req *http.Request } func do(reqCtx *ReqContext) string { return fmt.Sprintf(`handle return....%s, ex val= :%s `, reqCtx.Req.URL.Query().Encode(), reqCtx.ExString) } func myHandle(req *http.Request, c martini.Context) { reqC := \u0026ReqContext{ ExString: \"1112323 \" + time.Now().Format(\"2006-01-02 15:04:05\"), Req: req, } c.Map(reqC) } func myHandle2(reqCtx *ReqContext) string { return fmt.Sprintf(`handle return....%s, ex val= :%s `, reqCtx.Req.URL.Query().Encode(), reqCtx.ExString) } func myHandle3(req *http.Request) string { return fmt.Sprintf(`handle return....%s`, req.URL.Query().Encode()) } func registerMyRouter(r martini.Router) { r.Group(\"/api\", func(r martini.Router) { r.Get(\"/test\", myHandle, do) r.Get(\"/test2\", myHandle2) r.Get(\"/test3\", myHandle3) }, func() { fmt.Println(\"ç»„ä¸­çš„ä¸­é—´ä»¶ group middleware\") }) } func main() { m := martini.Classic() registerMyRouter(m) m.RunOnAddr(\":8085\") } æ‰§è¡Œåæ‰“å°ç»“æœå¦‚ä¸‹ï¼š æ‰§è¡Œç»“æœ âœ”ï¸è¿™æ˜¯ä¸€ä¸ªç®€å•çš„è¯·æ±‚çº§åˆ«çš„æ˜ å°„ï¼Œæˆ‘ä»¬å¯¹ /api/test åšäº†æ˜ å°„ï¼Œæ‰€ä»¥åœ¨ /api/test è¯·æ±‚ä¸­ ReqContext å‚æ•°æ˜¯å…¨å±€å¯ä»¥ç”¨ï¼Œè¿™ä¹Ÿå°±æ˜¯ do() æ–¹æ³•ä¸­çš„å‚æ•° do(reqCtx *ReqContext) ä¸­çš„æ¥å†ã€‚ âœ”ï¸åœ¨ /api/test3 ä¸­æˆ‘ä»¬æ²¡æœ‰ç”¨ä»»ä½•å…¶ä»–çš„å‚æ•°ï¼Œä¸Šä¸‹æ–‡ç”¨çš„æ˜¯*http.Requestï¼Œæ‰€ä»¥å¯ä»¥æ­£ç¡®æ‰§è¡Œè¯·æ±‚ã€‚ âŒåœ¨ /api/test2 ä¸­æˆ‘ä»¬ç”¨åˆ°äº† ReqContext å‚æ•°ï¼Œè¿™æ˜¯ /api/test è¯·æ±‚æ˜ å°„çš„ï¼Œåªèƒ½åœ¨ /api/test ä¸­ä½¿ç”¨ï¼Œè¿™å°±æ˜¯æŠ¥é”™æ˜¯åŸå› ã€‚ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:4:2","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#è¯·æ±‚çº§åˆ«çš„æ˜ å°„"},{"categories":["golang"],"content":" æ˜ å°„å€¼åˆ°æ¥å£å‡è®¾ä½ æƒ³è¦è¦†ç›–http.ResponseWriteræˆä¸ºä¸€ä¸ªå¯¹è±¡, é‚£ä¹ˆä½ å¯ä»¥å°è£…å®ƒå¹¶åŒ…å«ä½ è‡ªå·±çš„é¢å¤–æ“ä½œã€‚ æˆ‘ä¸ªäººç†è§£çš„å°±æ˜¯ä¸€ç§ç±»å‹è¦†ç›–ã€‚ package main import ( \"github.com/go-martini/martini\" \"fmt\" \"net/http\" \"time\" ) type ReqContext struct { Svr interface{} ExString string Req *http.Request } type ServiceGetXIImpl interface { GetXI() } type Tmp struct { } func (s *Tmp) GetXI() { fmt.Println(\"tmp GetXI()\") } type Service struct { Name string Age int } func (s *Service) printXX() { fmt.Println(\"æˆ‘æ˜¯ service printXX() æ–¹æ³•\") } func (s *Service) GetXI() { fmt.Println(\"æˆ‘æ˜¯ Service å®ç°äº† ServiceGetXIImpl æ¥å£ä¸­çš„ GetXI() æ–¹æ³•\") } func myHandle(reqCtx *ReqContext) string { fmt.Printf(\"æœ€å myHandle ä¸­çš„ reqCtx.Svr ç±»å‹ä¸º %T \\n \", reqCtx.Svr) return fmt.Sprintf(`handle return....%s, ex val= :%s `, reqCtx.Req.URL.Query().Encode(), reqCtx.ExString) } func registerMyRouter(r martini.Router) { r.Group(\"/api\", func(r martini.Router) { r.Get(\"/test\", myHandle) }, func() { fmt.Println(\"ç»„ä¸­çš„ä¸­é—´ä»¶ group middleware\") }) } func ExecMapTo(ctx *ReqContext) *ReqContext { ctx.Svr = \u0026Service{} return ctx } func WrapMapTo(reqCtx *ReqContext, c martini.Context) { fmt.Printf(\"MapTo å‰ Svr ç±»å‹ä¸º: %T \\n\", reqCtx.Svr) rw := ExecMapTo(reqCtx) c.MapTo(rw, (*ServiceGetXIImpl)(nil)) // è¦†ç›– reqCtx.Svr çš„ Tmp ç±»å‹ä¸º Service fmt.Printf(\"MapTo å Svr ç±»å‹ä¸º: %T \\n\", reqCtx.Svr) } func main() { m := martini.Classic() m.Use(func(req *http.Request, c martini.Context) { reqC := \u0026ReqContext{ Svr: Tmp{}, ExString: \"1112323 \" + time.Now().Format(\"2006-01-02 15:04:05\"), Req: req, } c.Map(reqC) }) m.Use(func(reqCtx *ReqContext, c martini.Context) { WrapMapTo(reqCtx, c) }) registerMyRouter(m) m.RunOnAddr(\":8086\") } è¿™ä¸ªä¾‹å­ä¸»è¦æ˜¯æƒ³æŠŠ ReqContext ä¸­çš„ Svr ä» Tmp ç±»å‹æ›¿æ¢ä¸º Service ç±»å‹ã€‚ æ‰§è¡Œåçš„æ‰“å°ç»“æœå¦‚ä¸‹ï¼š æ‰§è¡Œç»“æœ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:4:3","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#æ˜ å°„å€¼åˆ°æ¥å£"},{"categories":["golang"],"content":" å‚è€ƒ https://github.com/go-martini/martini/blob/master/translations/README_zh_cn.md injectåº“ ","date":"2021-05-20","objectID":"/go-web-martini-glance/:5:0","series":null,"tags":["golang","martini"],"title":"Go Web æ¡†æ¶ martini ç¬”è®°","uri":"/go-web-martini-glance/#å‚è€ƒ"},{"categories":["golang"],"content":"xiaobinqt,golang æ‰“å°pdf,go æ‰“å° pdf,chromedp ä½¿ç”¨","date":"2021-05-11","objectID":"/go-print-pdf/","series":null,"tags":["golang","pdf"],"title":"Go åˆ©ç”¨ chromedp ç”Ÿæˆ pdf","uri":"/go-print-pdf/"},{"categories":["golang"],"content":" chromedpPackage chromedp is a faster, simpler way to drive browsers supporting the Chrome DevTools Protocol in Go without external dependencies. å¯ä»¥æŸ¥çœ‹å®˜æ–¹çš„ç¤ºä¾‹ã€‚ ä»¥ä¸‹ç¤ºä¾‹ç”¨çš„ç‰ˆæœ¬ä¸º github.com/chromedp/chromedp v0.8.4ã€‚ ","date":"2021-05-11","objectID":"/go-print-pdf/:1:0","series":null,"tags":["golang","pdf"],"title":"Go åˆ©ç”¨ chromedp ç”Ÿæˆ pdf","uri":"/go-print-pdf/#chromedp"},{"categories":["golang"],"content":" ç¤ºä¾‹","date":"2021-05-11","objectID":"/go-print-pdf/:2:0","series":null,"tags":["golang","pdf"],"title":"Go åˆ©ç”¨ chromedp ç”Ÿæˆ pdf","uri":"/go-print-pdf/#ç¤ºä¾‹"},{"categories":["golang"],"content":" æ‰“å°åœ¨çº¿é¡µé¢ğŸ‘‡ æœ‰æ—¶éœ€è¦æ‰“å°ä¸€ä¸ªåœ¨çº¿é¡µé¢æˆ pdfï¼Œæ¯”å¦‚æŠŠhttps://www.baidu.com/è¿™ä¸ªé¡µé¢æ‰“å°æˆ pdfï¼Œå¦‚ä¸‹ package main import ( \"bufio\" \"bytes\" \"context\" \"fmt\" \"net/http\" \"github.com/chromedp/cdproto/page\" \"github.com/chromedp/chromedp\" \"github.com/gin-gonic/gin\" \"github.com/pkg/errors\" ) func dp(c *gin.Context) { var ( err error buf = make([]byte, 0) ) ctx, cancel := chromedp.NewContext(context.Background()) defer cancel() err = chromedp.Run(ctx, chromedp.Tasks{ chromedp.Navigate(\"https://www.baidu.com/\"), chromedp.ActionFunc(func(ctx context.Context) error { buf, _, err = page.PrintToPDF(). WithPrintBackground(true). Do(ctx) return err }), }) if err != nil { err = errors.Wrapf(err, \"chromedp Run failed\") c.JSON(http.StatusInternalServerError, gin.H{ \"msg\": err.Error(), }) return } buffer := \u0026bytes.Buffer{} buffer.WriteString(\"\\xEF\\xBB\\xBF\") // é˜²æ­¢ä¸­æ–‡ä¹±ç  writer := bufio.NewWriter(buffer) _, err = writer.Write(buf) if err != nil { err = errors.Wrapf(err, \"bufio Write err\") c.JSON(http.StatusInternalServerError, gin.H{ \"msg\": err.Error(), }) return } _ = writer.Flush() fileName := fmt.Sprintf(\"1111.pdf\") c.Header(\"Content-Type\", \"text/pdf\") c.Header(\"Content-Disposition\", \"attachment;filename=\"+fileName) _, _ = c.Writer.Write(buffer.Bytes()) return } func main() { route := gin.New() route.GET(\"/dp\", dp) route.Run(\":8080\") } ","date":"2021-05-11","objectID":"/go-print-pdf/:2:1","series":null,"tags":["golang","pdf"],"title":"Go åˆ©ç”¨ chromedp ç”Ÿæˆ pdf","uri":"/go-print-pdf/#æ‰“å°åœ¨çº¿é¡µé¢"},{"categories":["golang"],"content":" æ‰“å°æœ¬åœ°æ–‡ä»¶æœ‰æ—¶éœ€è¦å°†ä¸€ä¸ªæœ¬åœ°çš„ html æ–‡ä»¶æ¸²æŸ“åï¼Œæä¾›ä¸‹è½½é“¾æ¥ï¼Œä¸‹è½½æˆä¸€ä¸ª pdf æ ¼å¼çš„æ–‡ä»¶ã€‚ package main import ( \"bufio\" \"bytes\" \"context\" \"fmt\" \"html/template\" \"net/http\" \"net/http/httptest\" \"os\" \"github.com/chromedp/cdproto/page\" \"github.com/chromedp/chromedp\" \"github.com/gin-gonic/gin\" \"github.com/pkg/errors\" ) type Content struct { ChannelLogo template.URL ProductLogo template.URL Title string Content string UserName string OrgName string ChannelName string Number string Date string BackgroundImage template.URL } func writeHTML(content Content) http.Handler { return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) { w.Header().Set(\"Content-Type\", \"text/html\") var ( wd string err error tmpl *template.Template ) wd, _ = os.Getwd() tmpl, err = template.ParseFiles(wd + \"/tmp.html\") if err != nil { err = errors.Wrapf(err, \"template.ParseFiles err\") _, _ = w.Write([]byte(err.Error())) return } buffer := \u0026bytes.Buffer{} err = tmpl.Execute(buffer, content) if err != nil { err = errors.Wrapf(err, \"tmpl.Execute err\") _, _ = w.Write([]byte(err.Error())) return } _, _ = w.Write(buffer.Bytes()) }) } func dp(c *gin.Context) { var ( err error buf = make([]byte, 0) ) ctx, cancel := chromedp.NewContext(context.Background()) defer cancel() mux := http.NewServeMux() mux.Handle(\"/pre\", writeHTML(Content{ ChannelLogo: \"\", ProductLogo: \"\", Title: \"æˆ‘æ˜¯title\", Content: \"æˆ‘æ˜¯å†…å®¹\", UserName: \"1111\", OrgName: \"2222\", ChannelName: \"3333\", Number: \"4444\", Date: \"2006-01-02 15:04:05\", BackgroundImage: \"\", })) ts := httptest.NewServer(mux) defer ts.Close() url := fmt.Sprintf(\"%s/pre\", ts.URL) err = chromedp.Run(ctx, chromedp.Tasks{ chromedp.Navigate(url), chromedp.WaitReady(\"body\"), chromedp.ActionFunc(func(ctx context.Context) error { var err error buf, _, err = page.PrintToPDF(). WithPrintBackground(true). WithPageRanges(\"1\"). Do(ctx) return err }), }) if err != nil { err = errors.Wrapf(err, \"chromedp Run failed\") c.JSON(http.StatusInternalServerError, gin.H{ \"msg\": err.Error(), }) return } buffer := \u0026bytes.Buffer{} buffer.WriteString(\"\\xEF\\xBB\\xBF\") // é˜²æ­¢ä¸­æ–‡ä¹±ç  writer := bufio.NewWriter(buffer) _, err = writer.Write(buf) if err != nil { err = errors.Wrapf(err, \"bufio Write err\") c.JSON(http.StatusInternalServerError, gin.H{ \"msg\": err.Error(), }) return } _ = writer.Flush() fileName := fmt.Sprintf(\"1111.pdf\") c.Header(\"Content-Type\", \"text/pdf\") c.Header(\"Content-Disposition\", \"attachment;filename=\"+fileName) _, _ = c.Writer.Write(buffer.Bytes()) return } func main() { route := gin.New() route.GET(\"/dp\", dp) route.Run(\":8080\") } æœ¬åœ°æ–‡ä»¶ tmp.htmlï¼š \u003c!DOCTYPE html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003cmeta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"\u003e \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"\u003e \u003ctitle\u003eDocument\u003c/title\u003e \u003cstyle\u003e .root { width: 210mm; height: 276mm; padding: 0; margin: 0 auto; background-color: white; /*background-image: url();*/ /* background-size: 210mm 276mm; */ position: relative; overflow: hidden; } .background-box { position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 0; } .background-box img { width: 210mm; } .container { position: absolute; top: 0; left: 0; bottom: 0; right: 0; z-index: 1; /*border: 1px solid #000;*/ } .title { font-size: 38px; text-align: center; margin-top: 100px; } .content { margin-top: 50px; font-size: 22px; line-height: 2em; padding: 0 108px; } .content p { text-indent: 2em; white-space: normal; word-break: break-all; } p strong { font-weight: normal; text-indent: 0; padding: 2px 1em; border-bottom: 1px solid #000; } .logo-box { padding: 130px 100px 0 100px; display: flex; justify-content: space-between; } .logo-box img { max-width: 260px; } .signature { padding: 36px 100px 0 100px; font-size: 22px; display: flex; justify-content: space-between; text-align: center; } .signature p { line-height: 2em; width: 48%; } .footer { font-size: 14px; position: absolute; bottom: 36px; left: 100px; right: 100px; top: auto; line-height: 1.8em; } @media screen { .root { width: 210mm; height: 276mm; displa","date":"2021-05-11","objectID":"/go-print-pdf/:2:2","series":null,"tags":["golang","pdf"],"title":"Go åˆ©ç”¨ chromedp ç”Ÿæˆ pdf","uri":"/go-print-pdf/#æ‰“å°æœ¬åœ°æ–‡ä»¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,nginx","date":"2021-05-06","objectID":"/nginx-glance/","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx æ¦‚è¿°Nginx æ˜¯å¼€æºã€é«˜æ€§èƒ½ã€é«˜å¯é çš„ Web å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œè€Œä¸”æ”¯æŒçƒ­éƒ¨ç½²ï¼Œå‡ ä¹å¯ä»¥åšåˆ° 7 * 24 å°æ—¶ä¸é—´æ–­è¿è¡Œï¼Œå³ä½¿è¿è¡Œå‡ ä¸ªæœˆä¹Ÿä¸éœ€è¦é‡æ–°å¯åŠ¨ï¼Œè¿˜èƒ½åœ¨ä¸é—´æ–­æœåŠ¡çš„æƒ…å†µä¸‹å¯¹è½¯ä»¶ç‰ˆæœ¬è¿›è¡Œçƒ­æ›´æ–°ã€‚æ€§èƒ½æ˜¯ Nginx æœ€é‡è¦çš„è€ƒé‡ï¼Œå…¶å ç”¨å†…å­˜å°‘ã€å¹¶å‘èƒ½åŠ›å¼ºã€èƒ½æ”¯æŒé«˜è¾¾ 5w ä¸ªå¹¶å‘è¿æ¥æ•°ï¼Œæœ€é‡è¦çš„æ˜¯ï¼Œ Nginx æ˜¯å…è´¹çš„å¹¶å¯ä»¥å•†ä¸šåŒ–ï¼Œé…ç½®ä½¿ç”¨ä¹Ÿæ¯”è¾ƒç®€å•ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:1:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-æ¦‚è¿°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx ç‰¹ç‚¹ é«˜å¹¶å‘ã€é«˜æ€§èƒ½ï¼› æ¨¡å—åŒ–æ¶æ„ä½¿å¾—å®ƒçš„æ‰©å±•æ€§éå¸¸å¥½ï¼› å¼‚æ­¥éé˜»å¡çš„äº‹ä»¶é©±åŠ¨æ¨¡å‹è¿™ç‚¹å’Œ Node.js ç›¸ä¼¼ï¼› ç›¸å¯¹äºå…¶å®ƒæœåŠ¡å™¨æ¥è¯´å®ƒå¯ä»¥è¿ç»­å‡ ä¸ªæœˆç”šè‡³æ›´é•¿è€Œä¸éœ€è¦é‡å¯æœåŠ¡å™¨ä½¿å¾—å®ƒå…·æœ‰é«˜å¯é æ€§ï¼› çƒ­éƒ¨ç½²ã€å¹³æ»‘å‡çº§ï¼› å®Œå…¨å¼€æºï¼Œç”Ÿæ€ç¹è£ï¼› ","date":"2021-05-06","objectID":"/nginx-glance/:2:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-ç‰¹ç‚¹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx ä½œç”¨Nginx çš„æœ€é‡è¦çš„å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š é™æ€èµ„æºæœåŠ¡ï¼Œé€šè¿‡æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæä¾›æœåŠ¡ï¼› åå‘ä»£ç†æœåŠ¡ï¼Œå»¶ä¼¸å‡ºåŒ…æ‹¬ç¼“å­˜ã€è´Ÿè½½å‡è¡¡ç­‰ï¼› API æœåŠ¡ï¼Œ OpenResty ï¼› å¯¹äºå‰ç«¯æ¥è¯´ Node.js å¹¶ä¸é™Œç”Ÿï¼Œ Nginx å’Œ Node.js çš„å¾ˆå¤šç†å¿µç±»ä¼¼ï¼Œ HTTP æœåŠ¡å™¨ã€äº‹ä»¶é©±åŠ¨ã€å¼‚æ­¥éé˜»å¡ç­‰ï¼Œä¸” Nginx çš„å¤§éƒ¨åˆ†åŠŸèƒ½ä½¿ç”¨ Node.js ä¹Ÿå¯ä»¥å®ç°ï¼Œä½† Nginx å’Œ Node.js å¹¶ä¸å†²çªï¼Œéƒ½æœ‰è‡ªå·±æ“…é•¿çš„é¢†åŸŸã€‚ Nginx æ“…é•¿äºåº•å±‚æœåŠ¡å™¨ç«¯èµ„æºçš„å¤„ç†ï¼ˆé™æ€èµ„æºå¤„ç†è½¬å‘ã€åå‘ä»£ç†ï¼Œè´Ÿè½½å‡è¡¡ç­‰ï¼‰ï¼Œ Node.js æ›´æ“…é•¿ä¸Šå±‚å…·ä½“ä¸šåŠ¡é€»è¾‘çš„å¤„ç†ï¼Œä¸¤è€…å¯ä»¥å®Œç¾ç»„åˆã€‚ ç”¨ä¸€å¼ å›¾è¡¨ç¤ºï¼š ","date":"2021-05-06","objectID":"/nginx-glance/:3:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-ä½œç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx å®‰è£…æœ¬æ–‡æ¼”ç¤ºçš„æ˜¯ Linux centOS 7.x çš„æ“ä½œç³»ç»Ÿä¸Šå®‰è£… Nginx ï¼Œè‡³äºåœ¨å…¶å®ƒæ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œå®‰è£…å¯ä»¥ç½‘ä¸Šè‡ªè¡Œæœç´¢ï¼Œéƒ½éå¸¸ç®€å•çš„ã€‚ ä½¿ç”¨ yum å®‰è£… Nginx ï¼š yum install nginx -y å®‰è£…å®Œæˆåï¼Œé€šè¿‡ rpm -ql nginx å‘½ä»¤æŸ¥çœ‹ Nginx çš„å®‰è£…ä¿¡æ¯ï¼š # Nginxé…ç½®æ–‡ä»¶ /etc/nginx/nginx.conf # nginx ä¸»é…ç½®æ–‡ä»¶ /etc/nginx/nginx.conf.default # å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶ /usr/bin/nginx-upgrade /usr/sbin/nginx # nginxåº“æ–‡ä»¶ /usr/lib/systemd/system/nginx.service # ç”¨äºé…ç½®ç³»ç»Ÿå®ˆæŠ¤è¿›ç¨‹ /usr/lib64/nginx/modules # Nginxæ¨¡å—ç›®å½• # å¸®åŠ©æ–‡æ¡£ /usr/share/doc/nginx-1.16.1 /usr/share/doc/nginx-1.16.1/CHANGES /usr/share/doc/nginx-1.16.1/README /usr/share/doc/nginx-1.16.1/README.dynamic /usr/share/doc/nginx-1.16.1/UPGRADE-NOTES-1.6-to-1.10 # é™æ€èµ„æºç›®å½• /usr/share/nginx/html/404.html /usr/share/nginx/html/50x.html /usr/share/nginx/html/index.html # å­˜æ”¾Nginxæ—¥å¿—æ–‡ä»¶ /var/log/nginx ä¸»è¦å…³æ³¨çš„æ–‡ä»¶å¤¹æœ‰ä¸¤ä¸ªï¼š /etc/nginx/conf.d/ æ˜¯å­é…ç½®é¡¹å­˜æ”¾å¤„ï¼Œ /etc/nginx/nginx.conf ä¸»é…ç½®æ–‡ä»¶ä¼šé»˜è®¤æŠŠè¿™ä¸ªæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰å­é…ç½®é¡¹éƒ½å¼•å…¥ï¼› /usr/share/nginx/html/ é™æ€æ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥æ ¹æ®ä½ è‡ªå·±çš„ä¹ æƒ¯æ”¾åœ¨å…¶ä»–åœ°æ–¹ï¼› ","date":"2021-05-06","objectID":"/nginx-glance/:4:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-å®‰è£…"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx å¸¸ç”¨å‘½ä»¤systemctl ç³»ç»Ÿå‘½ä»¤ï¼š # å¼€æœºé…ç½® systemctl enable nginx # å¼€æœºè‡ªåŠ¨å¯åŠ¨ systemctl disable nginx # å…³é—­å¼€æœºè‡ªåŠ¨å¯åŠ¨ # å¯åŠ¨Nginx systemctl start nginx # å¯åŠ¨NginxæˆåŠŸåï¼Œå¯ä»¥ç›´æ¥è®¿é—®ä¸»æœºIPï¼Œæ­¤æ—¶ä¼šå±•ç¤ºNginxé»˜è®¤é¡µé¢ # åœæ­¢Nginx systemctl stop nginx # é‡å¯Nginx systemctl restart nginx # é‡æ–°åŠ è½½Nginx systemctl reload nginx # æŸ¥çœ‹ Nginx è¿è¡ŒçŠ¶æ€ systemctl status nginx # æŸ¥çœ‹Nginxè¿›ç¨‹ ps -ef | grep nginx # æ€æ­»Nginxè¿›ç¨‹ kill -9 pid # æ ¹æ®ä¸Šé¢æŸ¥çœ‹åˆ°çš„Nginxè¿›ç¨‹å·ï¼Œæ€æ­»Nginxè¿›ç¨‹ï¼Œ-9 è¡¨ç¤ºå¼ºåˆ¶ç»“æŸè¿›ç¨‹ Nginx åº”ç”¨ç¨‹åºå‘½ä»¤ï¼š nginx -s reload # å‘ä¸»è¿›ç¨‹å‘é€ä¿¡å·ï¼Œé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ï¼Œçƒ­é‡å¯ nginx -s reopen # é‡å¯ Nginx nginx -s stop # å¿«é€Ÿå…³é—­ nginx -s quit # ç­‰å¾…å·¥ä½œè¿›ç¨‹å¤„ç†å®Œæˆåå…³é—­ nginx -T # æŸ¥çœ‹å½“å‰ Nginx æœ€ç»ˆçš„é…ç½® nginx -t # æ£€æŸ¥é…ç½®æ˜¯å¦æœ‰é—®é¢˜ ","date":"2021-05-06","objectID":"/nginx-glance/:5:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-å¸¸ç”¨å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx æ ¸å¿ƒé…ç½®","date":"2021-05-06","objectID":"/nginx-glance/:6:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-æ ¸å¿ƒé…ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ç»“æ„Nginx çš„å…¸å‹é…ç½®ç¤ºä¾‹ï¼š # mainæ®µé…ç½®ä¿¡æ¯ user nginx; # è¿è¡Œç”¨æˆ·ï¼Œé»˜è®¤å³æ˜¯nginxï¼Œå¯ä»¥ä¸è¿›è¡Œè®¾ç½® worker_processes auto; # Nginx è¿›ç¨‹æ•°ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºå’Œ CPU æ ¸æ•°ä¸€æ · error_log /var/log/nginx/error.log warn; # Nginx çš„é”™è¯¯æ—¥å¿—å­˜æ”¾ç›®å½• pid /var/run/nginx.pid; # Nginx æœåŠ¡å¯åŠ¨æ—¶çš„ pid å­˜æ”¾ä½ç½® # eventsæ®µé…ç½®ä¿¡æ¯ events { use epoll; # ä½¿ç”¨epollçš„I/Oæ¨¡å‹(å¦‚æœä½ ä¸çŸ¥é“Nginxè¯¥ä½¿ç”¨å“ªç§è½®è¯¢æ–¹æ³•ï¼Œä¼šè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªæœ€é€‚åˆä½ æ“ä½œç³»ç»Ÿçš„) worker_connections 1024; # æ¯ä¸ªè¿›ç¨‹å…è®¸æœ€å¤§å¹¶å‘æ•° } # httpæ®µé…ç½®ä¿¡æ¯ # é…ç½®ä½¿ç”¨æœ€é¢‘ç¹çš„éƒ¨åˆ†ï¼Œä»£ç†ã€ç¼“å­˜ã€æ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®éƒ½åœ¨è¿™é‡Œè®¾ç½® http { # è®¾ç½®æ—¥å¿—æ¨¡å¼ log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' '$status $body_bytes_sent \"$http_referer\" ' '\"$http_user_agent\" \"$http_x_forwarded_for\"'; access_log /var/log/nginx/access.log main; # Nginxè®¿é—®æ—¥å¿—å­˜æ”¾ä½ç½® sendfile on; # å¼€å¯é«˜æ•ˆä¼ è¾“æ¨¡å¼ tcp_nopush on; # å‡å°‘ç½‘ç»œæŠ¥æ–‡æ®µçš„æ•°é‡ tcp_nodelay on; keepalive_timeout 65; # ä¿æŒè¿æ¥çš„æ—¶é—´ï¼Œä¹Ÿå«è¶…æ—¶æ—¶é—´ï¼Œå•ä½ç§’ types_hash_max_size 2048; include /etc/nginx/mime.types; # æ–‡ä»¶æ‰©å±•åä¸ç±»å‹æ˜ å°„è¡¨ default_type application/octet-stream; # é»˜è®¤æ–‡ä»¶ç±»å‹ include /etc/nginx/conf.d/*.conf; # åŠ è½½å­é…ç½®é¡¹ # serveræ®µé…ç½®ä¿¡æ¯ server { listen 80; # é…ç½®ç›‘å¬çš„ç«¯å£ server_name localhost; # é…ç½®çš„åŸŸå # locationæ®µé…ç½®ä¿¡æ¯ location / { root /usr/share/nginx/html; # ç½‘ç«™æ ¹ç›®å½• index index.html index.htm; # é»˜è®¤é¦–é¡µæ–‡ä»¶ deny 172.168.22.11; # ç¦æ­¢è®¿é—®çš„ipåœ°å€ï¼Œå¯ä»¥ä¸ºall allow 172.168.33.44ï¼›# å…è®¸è®¿é—®çš„ipåœ°å€ï¼Œå¯ä»¥ä¸ºall } error_page 500 502 503 504 /50x.html; # é»˜è®¤50xå¯¹åº”çš„è®¿é—®é¡µé¢ error_page 400 404 error.html; # åŒä¸Š } } main å…¨å±€é…ç½®ï¼Œå¯¹å…¨å±€ç”Ÿæ•ˆï¼› events é…ç½®å½±å“ Nginx æœåŠ¡å™¨ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ï¼› http é…ç½®ä»£ç†ï¼Œç¼“å­˜ï¼Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ï¼› server é…ç½®è™šæ‹Ÿä¸»æœºçš„ç›¸å…³å‚æ•°ï¼Œä¸€ä¸ª http å—ä¸­å¯ä»¥æœ‰å¤šä¸ª server å—ï¼› location ç”¨äºé…ç½®åŒ¹é…çš„ uri ï¼› upstream é…ç½®åç«¯æœåŠ¡å™¨å…·ä½“åœ°å€ï¼Œè´Ÿè½½å‡è¡¡é…ç½®ä¸å¯æˆ–ç¼ºçš„éƒ¨åˆ†ï¼› ç”¨ä¸€å¼ å›¾æ¸…æ™°çš„å±•ç¤ºå®ƒçš„å±‚çº§ç»“æ„ï¼š ","date":"2021-05-06","objectID":"/nginx-glance/:6:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®æ–‡ä»¶ç»“æ„"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®æ–‡ä»¶-main-æ®µæ ¸å¿ƒå‚æ•°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#user"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#pid"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#worker_rlimit_nofile_number"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#worker_rlimit_core"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#worker_processes_number"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#worker_cpu_affinity"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#worker_priority"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#worker_shutdown_timeout"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#timer_resolution"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ main æ®µæ ¸å¿ƒå‚æ•° useræŒ‡å®šè¿è¡Œ Nginx çš„ woker å­è¿›ç¨‹çš„å±ä¸»å’Œå±ç»„ï¼Œå…¶ä¸­ç»„å¯ä»¥ä¸æŒ‡å®šã€‚ user USERNAME [GROUP] user nginx lion; # ç”¨æˆ·æ˜¯nginx;ç»„æ˜¯lion pidæŒ‡å®šè¿è¡Œ Nginx master ä¸»è¿›ç¨‹çš„ pid æ–‡ä»¶å­˜æ”¾è·¯å¾„ã€‚ pid /opt/nginx/logs/nginx.pid # masterä¸»è¿›ç¨‹çš„çš„pidå­˜æ”¾åœ¨nginx.pidçš„æ–‡ä»¶ worker_rlimit_nofile_numberæŒ‡å®š worker å­è¿›ç¨‹å¯ä»¥æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶å¥æŸ„æ•°ã€‚ worker_rlimit_nofile 20480; # å¯ä»¥ç†è§£æˆæ¯ä¸ªworkerå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°é‡ã€‚ worker_rlimit_coreæŒ‡å®š worker å­è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢åçš„ core æ–‡ä»¶ï¼Œç”¨äºè®°å½•åˆ†æé—®é¢˜ã€‚ worker_rlimit_core 50M; # å­˜æ”¾å¤§å°é™åˆ¶ working_directory /opt/nginx/tmp; # å­˜æ”¾ç›®å½• worker_processes_numberæŒ‡å®š Nginx å¯åŠ¨çš„ worker å­è¿›ç¨‹æ•°é‡ã€‚ worker_processes 4; # æŒ‡å®šå…·ä½“å­è¿›ç¨‹æ•°é‡ worker_processes auto; # ä¸å½“å‰cpuç‰©ç†æ ¸å¿ƒæ•°ä¸€è‡´ worker_cpu_affinityå°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸æˆ‘ä»¬çš„ cpu ç‰©ç†æ ¸å¿ƒç»‘å®šã€‚ worker_cpu_affinity 0001 0010 0100 1000; # 4ä¸ªç‰©ç†æ ¸å¿ƒï¼Œ4ä¸ªworkerå­è¿›ç¨‹ å°†æ¯ä¸ª worker å­è¿›ç¨‹ä¸ç‰¹å®š CPU ç‰©ç†æ ¸å¿ƒç»‘å®šï¼Œä¼˜åŠ¿åœ¨äºï¼Œé¿å…åŒä¸€ä¸ª worker å­è¿›ç¨‹åœ¨ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šåˆ‡æ¢ï¼Œç¼“å­˜å¤±æ•ˆï¼Œé™ä½æ€§èƒ½ã€‚ä½†å…¶å¹¶ä¸èƒ½çœŸæ­£çš„é¿å…è¿›ç¨‹åˆ‡æ¢ã€‚ worker_priorityæŒ‡å®š worker å­è¿›ç¨‹çš„ nice å€¼ï¼Œä»¥è°ƒæ•´è¿è¡Œ Nginx çš„ä¼˜å…ˆçº§ï¼Œé€šå¸¸è®¾å®šä¸ºè´Ÿå€¼ï¼Œä»¥ä¼˜å…ˆè°ƒç”¨ Nginx ã€‚ worker_priority -10; # 120-10=110ï¼Œ110å°±æ˜¯æœ€ç»ˆçš„ä¼˜å…ˆçº§ Linux é»˜è®¤è¿›ç¨‹çš„ä¼˜å…ˆçº§å€¼æ˜¯120ï¼Œå€¼è¶Šå°è¶Šä¼˜å…ˆï¼› nice å®šèŒƒå›´ä¸º -20 åˆ° +19 ã€‚ [å¤‡æ³¨] åº”ç”¨çš„é»˜è®¤ä¼˜å…ˆçº§å€¼æ˜¯120åŠ ä¸Š nice å€¼ç­‰äºå®ƒæœ€ç»ˆçš„å€¼ï¼Œè¿™ä¸ªå€¼è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ worker_shutdown_timeoutæŒ‡å®š worker å­è¿›ç¨‹ä¼˜é›…é€€å‡ºæ—¶çš„è¶…æ—¶æ—¶é—´ã€‚ worker_shutdown_timeout 5s; timer_resolutionworker å­è¿›ç¨‹å†…éƒ¨ä½¿ç”¨çš„è®¡æ—¶å™¨ç²¾åº¦ï¼Œè°ƒæ•´æ—¶é—´é—´éš”è¶Šå¤§ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå°‘ï¼Œæœ‰åˆ©äºæ€§èƒ½æå‡ï¼›åä¹‹ï¼Œç³»ç»Ÿè°ƒç”¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™ã€‚ timer_resolution 100ms; åœ¨ Linux ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·éœ€è¦è·å–è®¡æ—¶å™¨æ—¶éœ€è¦å‘æ“ä½œç³»ç»Ÿå†…æ ¸å‘é€è¯·æ±‚ï¼Œæœ‰è¯·æ±‚å°±å¿…ç„¶ä¼šæœ‰å¼€é”€ï¼Œå› æ­¤è¿™ä¸ªé—´éš”è¶Šå¤§å¼€é”€å°±è¶Šå°ã€‚ daemonæŒ‡å®š Nginx çš„è¿è¡Œæ–¹å¼ï¼Œå‰å°è¿˜æ˜¯åå°ï¼Œå‰å°ç”¨äºè°ƒè¯•ï¼Œåå°ç”¨äºç”Ÿäº§ã€‚ daemon off; # é»˜è®¤æ˜¯onï¼Œåå°è¿è¡Œæ¨¡å¼ ","date":"2021-05-06","objectID":"/nginx-glance/:6:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#daemon"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ events æ®µæ ¸å¿ƒå‚æ•° useNginx ä½¿ç”¨ä½•ç§äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚ use method; # ä¸æ¨èé…ç½®å®ƒï¼Œè®©nginxè‡ªå·±é€‰æ‹© method å¯é€‰å€¼ä¸ºï¼šselectã€pollã€kqueueã€epollã€/dev/pollã€eventport worker_connectionsworker å­è¿›ç¨‹èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚ worker_connections 1024 # æ¯ä¸ªå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ä¸º1024 accept_mutexæ˜¯å¦æ‰“å¼€è´Ÿè½½å‡è¡¡äº’æ–¥é”ã€‚ accept_mutex on # é»˜è®¤æ˜¯offå…³é—­çš„ï¼Œè¿™é‡Œæ¨èæ‰“å¼€ ","date":"2021-05-06","objectID":"/nginx-glance/:6:3","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®æ–‡ä»¶-events-æ®µæ ¸å¿ƒå‚æ•°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ events æ®µæ ¸å¿ƒå‚æ•° useNginx ä½¿ç”¨ä½•ç§äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚ use method; # ä¸æ¨èé…ç½®å®ƒï¼Œè®©nginxè‡ªå·±é€‰æ‹© method å¯é€‰å€¼ä¸ºï¼šselectã€pollã€kqueueã€epollã€/dev/pollã€eventport worker_connectionsworker å­è¿›ç¨‹èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚ worker_connections 1024 # æ¯ä¸ªå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ä¸º1024 accept_mutexæ˜¯å¦æ‰“å¼€è´Ÿè½½å‡è¡¡äº’æ–¥é”ã€‚ accept_mutex on # é»˜è®¤æ˜¯offå…³é—­çš„ï¼Œè¿™é‡Œæ¨èæ‰“å¼€ ","date":"2021-05-06","objectID":"/nginx-glance/:6:3","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#use"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ events æ®µæ ¸å¿ƒå‚æ•° useNginx ä½¿ç”¨ä½•ç§äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚ use method; # ä¸æ¨èé…ç½®å®ƒï¼Œè®©nginxè‡ªå·±é€‰æ‹© method å¯é€‰å€¼ä¸ºï¼šselectã€pollã€kqueueã€epollã€/dev/pollã€eventport worker_connectionsworker å­è¿›ç¨‹èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚ worker_connections 1024 # æ¯ä¸ªå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ä¸º1024 accept_mutexæ˜¯å¦æ‰“å¼€è´Ÿè½½å‡è¡¡äº’æ–¥é”ã€‚ accept_mutex on # é»˜è®¤æ˜¯offå…³é—­çš„ï¼Œè¿™é‡Œæ¨èæ‰“å¼€ ","date":"2021-05-06","objectID":"/nginx-glance/:6:3","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#worker_connections"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶ events æ®µæ ¸å¿ƒå‚æ•° useNginx ä½¿ç”¨ä½•ç§äº‹ä»¶é©±åŠ¨æ¨¡å‹ã€‚ use method; # ä¸æ¨èé…ç½®å®ƒï¼Œè®©nginxè‡ªå·±é€‰æ‹© method å¯é€‰å€¼ä¸ºï¼šselectã€pollã€kqueueã€epollã€/dev/pollã€eventport worker_connectionsworker å­è¿›ç¨‹èƒ½å¤Ÿå¤„ç†çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ã€‚ worker_connections 1024 # æ¯ä¸ªå­è¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ä¸º1024 accept_mutexæ˜¯å¦æ‰“å¼€è´Ÿè½½å‡è¡¡äº’æ–¥é”ã€‚ accept_mutex on # é»˜è®¤æ˜¯offå…³é—­çš„ï¼Œè¿™é‡Œæ¨èæ‰“å¼€ ","date":"2021-05-06","objectID":"/nginx-glance/:6:3","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#accept_mutex"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" server_name æŒ‡ä»¤æŒ‡å®šè™šæ‹Ÿä¸»æœºåŸŸåã€‚ server_name name1 name2 name3 # ç¤ºä¾‹ï¼š server_name www.nginx.com; åŸŸååŒ¹é…çš„å››ç§å†™æ³•ï¼š ç²¾ç¡®åŒ¹é…ï¼š server_name www.nginx.com ; å·¦ä¾§é€šé…ï¼š server_name *.nginx.com ; å³ä¾§ç»Ÿé…ï¼š server_name www.nginx.* ; æ­£åˆ™åŒ¹é…ï¼š server_name ~^www\\.nginx\\.*$ ; åŒ¹é…ä¼˜å…ˆçº§ï¼šç²¾ç¡®åŒ¹é… \u003e å·¦ä¾§é€šé…ç¬¦åŒ¹é… \u003e å³ä¾§é€šé…ç¬¦åŒ¹é… \u003e æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… server_name é…ç½®å®ä¾‹ï¼š 1ã€é…ç½®æœ¬åœ° DNS è§£æ vim /etc/hosts ï¼ˆ macOS ç³»ç»Ÿï¼‰ # æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå…¶ä¸­ 121.42.11.34 æ˜¯é˜¿é‡Œäº‘æœåŠ¡å™¨IPåœ°å€ 121.42.11.34 www.nginx-test.com 121.42.11.34 mail.nginx-test.com 121.42.11.34 www.nginx-test.org 121.42.11.34 doc.nginx-test.com 121.42.11.34 www.nginx-test.cn 121.42.11.34 fe.nginx-test.club [æ³¨æ„] è¿™é‡Œä½¿ç”¨çš„æ˜¯è™šæ‹ŸåŸŸåè¿›è¡Œæµ‹è¯•ï¼Œå› æ­¤éœ€è¦é…ç½®æœ¬åœ° DNS è§£æï¼Œå¦‚æœä½¿ç”¨é˜¿é‡Œäº‘ä¸Šè´­ä¹°çš„åŸŸåï¼Œåˆ™éœ€è¦åœ¨é˜¿é‡Œäº‘ä¸Šè®¾ç½®å¥½åŸŸåè§£æã€‚ 2ã€é…ç½®é˜¿é‡Œäº‘ Nginx ï¼Œvim /etc/nginx/nginx.conf # è¿™é‡Œåªåˆ—ä¸¾äº†httpç«¯ä¸­çš„severç«¯é…ç½® # å·¦åŒ¹é… server { listen80; server_name*.nginx-test.com; root/usr/share/nginx/html/nginx-test/left-match/; location / { index index.html; } } # æ­£åˆ™åŒ¹é… server { listen80; server_name~^.*\\.nginx-test\\..*$; root/usr/share/nginx/html/nginx-test/reg-match/; location / { index index.html; } } # å³åŒ¹é… server { listen80; server_namewww.nginx-test.*; root/usr/share/nginx/html/nginx-test/right-match/; location / { index index.html; } } # å®Œå…¨åŒ¹é… server { listen80; server_namewww.nginx-test.com; root/usr/share/nginx/html/nginx-test/all-match/; location / { index index.html; } } 3ã€è®¿é—®åˆ†æ å½“è®¿é—® www.nginx-test.com æ—¶ï¼Œéƒ½å¯ä»¥è¢«åŒ¹é…ä¸Šï¼Œå› æ­¤é€‰æ‹©ä¼˜å…ˆçº§æœ€é«˜çš„â€œå®Œå…¨åŒ¹é…â€ï¼› å½“è®¿é—® mail.nginx-test.com æ—¶ï¼Œä¼šè¿›è¡Œâ€œå·¦åŒ¹é…â€ï¼› å½“è®¿é—® www.nginx-test.org æ—¶ï¼Œä¼šè¿›è¡Œâ€œå³åŒ¹é…â€ï¼› å½“è®¿é—® doc.nginx-test.com æ—¶ï¼Œä¼šè¿›è¡Œâ€œå·¦åŒ¹é…â€ï¼› å½“è®¿é—® www.nginx-test.cn æ—¶ï¼Œä¼šè¿›è¡Œâ€œå³åŒ¹é…â€ï¼› å½“è®¿é—® fe.nginx-test.club æ—¶ï¼Œä¼šè¿›è¡Œâ€œæ­£åˆ™åŒ¹é…â€ï¼› ","date":"2021-05-06","objectID":"/nginx-glance/:6:4","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#server_name-æŒ‡ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" rootæŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®ï¼Œå®ƒå¯ä»¥å†™åœ¨ http ã€ server ã€ location ç­‰é…ç½®ä¸­ã€‚ root path ä¾‹å¦‚ï¼š location /image { root /opt/nginx/static; } å½“ç”¨æˆ·è®¿é—® www.test.com/image/1.png æ—¶ï¼Œå®é™…åœ¨æœåŠ¡å™¨æ‰¾çš„è·¯å¾„æ˜¯ /opt/nginx/static/image/1.png [æ³¨æ„] root ä¼šå°†å®šä¹‰è·¯å¾„ä¸ URI å åŠ ï¼Œ alias åˆ™åªå–å®šä¹‰è·¯å¾„ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:6:5","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#root"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" aliaså®ƒä¹Ÿæ˜¯æŒ‡å®šé™æ€èµ„æºç›®å½•ä½ç½®ï¼Œå®ƒåªèƒ½å†™åœ¨ location ä¸­ã€‚ location /image { alias /opt/nginx/static/image/; } å½“ç”¨æˆ·è®¿é—® www.test.com/image/1.png æ—¶ï¼Œå®é™…åœ¨æœåŠ¡å™¨æ‰¾çš„è·¯å¾„æ˜¯ /opt/nginx/static/image/1.png [æ³¨æ„] ä½¿ç”¨ alias æœ«å°¾ä¸€å®šè¦æ·»åŠ  / ï¼Œå¹¶ä¸”å®ƒåªèƒ½ä½äº location ä¸­ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:6:6","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#alias"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" locationé…ç½®è·¯å¾„ã€‚ location [ = | ~ | ~* | ^~ ] uri { ... } åŒ¹é…è§„åˆ™ï¼š = ç²¾ç¡®åŒ¹é…ï¼› ~ æ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™ï¼› ~* æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼› ^~ åŒ¹é…åˆ°å³åœæ­¢æœç´¢ï¼› åŒ¹é…ä¼˜å…ˆçº§ï¼š = \u003e ^~ \u003e ~ \u003e ~* \u003e ä¸å¸¦ä»»ä½•å­—ç¬¦ã€‚ å®ä¾‹ï¼š server { listen80; server_namewww.nginx-test.com; # åªæœ‰å½“è®¿é—® www.nginx-test.com/match_all/ æ—¶æ‰ä¼šåŒ¹é…åˆ°/usr/share/nginx/html/match_all/index.html location = /match_all/ { root/usr/share/nginx/html index index.html } # å½“è®¿é—® www.nginx-test.com/1.jpg ç­‰è·¯å¾„æ—¶ä¼šå» /usr/share/nginx/images/1.jpg æ‰¾å¯¹åº”çš„èµ„æº location ~ \\.(jpeg|jpg|png|svg)$ { root /usr/share/nginx/images; } # å½“è®¿é—® www.nginx-test.com/bbs/ æ—¶ä¼šåŒ¹é…ä¸Š /usr/share/nginx/html/bbs/index.html location ^~ /bbs/ { root /usr/share/nginx/html; index index.html index.htm; } } location ä¸­çš„åæ–œçº¿ location /test { ... } location /test/ { ... } ä¸å¸¦ / å½“è®¿é—® www.nginx-test.com/test æ—¶ï¼Œ Nginx å…ˆæ‰¾æ˜¯å¦æœ‰ test ç›®å½•ï¼Œå¦‚æœæœ‰åˆ™æ‰¾ test ç›®å½•ä¸‹çš„ index.html ï¼›å¦‚æœæ²¡æœ‰ test ç›®å½•ï¼Œ nginx åˆ™ä¼šæ‰¾æ˜¯å¦æœ‰ test æ–‡ä»¶ã€‚ å¸¦ / å½“è®¿é—® www.nginx-test.com/test æ—¶ï¼Œ Nginx å…ˆæ‰¾æ˜¯å¦æœ‰ test ç›®å½•ï¼Œå¦‚æœæœ‰åˆ™æ‰¾ test ç›®å½•ä¸‹çš„ index.html ï¼Œå¦‚æœæ²¡æœ‰å®ƒä¹Ÿä¸ä¼šå»æ‰¾æ˜¯å¦å­˜åœ¨ test æ–‡ä»¶ã€‚ returnåœæ­¢å¤„ç†è¯·æ±‚ï¼Œç›´æ¥è¿”å›å“åº”ç æˆ–é‡å®šå‘åˆ°å…¶ä»– URL ï¼›æ‰§è¡Œ return æŒ‡ä»¤åï¼Œ location ä¸­åç»­æŒ‡ä»¤å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚ return code [text]; return code URL; return URL; ä¾‹å¦‚ï¼š location / { return 404; # ç›´æ¥è¿”å›çŠ¶æ€ç  } location / { return 404 \"pages not found\"; # è¿”å›çŠ¶æ€ç  + ä¸€æ®µæ–‡æœ¬ } location / { return 302 /bbs ; # è¿”å›çŠ¶æ€ç  + é‡å®šå‘åœ°å€ } location / { return https://www.baidu.com ; # è¿”å›é‡å®šå‘åœ°å€ } ","date":"2021-05-06","objectID":"/nginx-glance/:6:7","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#location"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" locationé…ç½®è·¯å¾„ã€‚ location [ = | ~ | ~* | ^~ ] uri { ... } åŒ¹é…è§„åˆ™ï¼š = ç²¾ç¡®åŒ¹é…ï¼› ~ æ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™ï¼› ~* æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼› ^~ åŒ¹é…åˆ°å³åœæ­¢æœç´¢ï¼› åŒ¹é…ä¼˜å…ˆçº§ï¼š = \u003e ^~ \u003e ~ \u003e ~* \u003e ä¸å¸¦ä»»ä½•å­—ç¬¦ã€‚ å®ä¾‹ï¼š server { listen80; server_namewww.nginx-test.com; # åªæœ‰å½“è®¿é—® www.nginx-test.com/match_all/ æ—¶æ‰ä¼šåŒ¹é…åˆ°/usr/share/nginx/html/match_all/index.html location = /match_all/ { root/usr/share/nginx/html index index.html } # å½“è®¿é—® www.nginx-test.com/1.jpg ç­‰è·¯å¾„æ—¶ä¼šå» /usr/share/nginx/images/1.jpg æ‰¾å¯¹åº”çš„èµ„æº location ~ \\.(jpeg|jpg|png|svg)$ { root /usr/share/nginx/images; } # å½“è®¿é—® www.nginx-test.com/bbs/ æ—¶ä¼šåŒ¹é…ä¸Š /usr/share/nginx/html/bbs/index.html location ^~ /bbs/ { root /usr/share/nginx/html; index index.html index.htm; } } location ä¸­çš„åæ–œçº¿ location /test { ... } location /test/ { ... } ä¸å¸¦ / å½“è®¿é—® www.nginx-test.com/test æ—¶ï¼Œ Nginx å…ˆæ‰¾æ˜¯å¦æœ‰ test ç›®å½•ï¼Œå¦‚æœæœ‰åˆ™æ‰¾ test ç›®å½•ä¸‹çš„ index.html ï¼›å¦‚æœæ²¡æœ‰ test ç›®å½•ï¼Œ nginx åˆ™ä¼šæ‰¾æ˜¯å¦æœ‰ test æ–‡ä»¶ã€‚ å¸¦ / å½“è®¿é—® www.nginx-test.com/test æ—¶ï¼Œ Nginx å…ˆæ‰¾æ˜¯å¦æœ‰ test ç›®å½•ï¼Œå¦‚æœæœ‰åˆ™æ‰¾ test ç›®å½•ä¸‹çš„ index.html ï¼Œå¦‚æœæ²¡æœ‰å®ƒä¹Ÿä¸ä¼šå»æ‰¾æ˜¯å¦å­˜åœ¨ test æ–‡ä»¶ã€‚ returnåœæ­¢å¤„ç†è¯·æ±‚ï¼Œç›´æ¥è¿”å›å“åº”ç æˆ–é‡å®šå‘åˆ°å…¶ä»– URL ï¼›æ‰§è¡Œ return æŒ‡ä»¤åï¼Œ location ä¸­åç»­æŒ‡ä»¤å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚ return code [text]; return code URL; return URL; ä¾‹å¦‚ï¼š location / { return 404; # ç›´æ¥è¿”å›çŠ¶æ€ç  } location / { return 404 \"pages not found\"; # è¿”å›çŠ¶æ€ç  + ä¸€æ®µæ–‡æœ¬ } location / { return 302 /bbs ; # è¿”å›çŠ¶æ€ç  + é‡å®šå‘åœ°å€ } location / { return https://www.baidu.com ; # è¿”å›é‡å®šå‘åœ°å€ } ","date":"2021-05-06","objectID":"/nginx-glance/:6:7","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#location-ä¸­çš„åæ–œçº¿"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" locationé…ç½®è·¯å¾„ã€‚ location [ = | ~ | ~* | ^~ ] uri { ... } åŒ¹é…è§„åˆ™ï¼š = ç²¾ç¡®åŒ¹é…ï¼› ~ æ­£åˆ™åŒ¹é…ï¼ŒåŒºåˆ†å¤§å°å†™ï¼› ~* æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼› ^~ åŒ¹é…åˆ°å³åœæ­¢æœç´¢ï¼› åŒ¹é…ä¼˜å…ˆçº§ï¼š = \u003e ^~ \u003e ~ \u003e ~* \u003e ä¸å¸¦ä»»ä½•å­—ç¬¦ã€‚ å®ä¾‹ï¼š server { listen80; server_namewww.nginx-test.com; # åªæœ‰å½“è®¿é—® www.nginx-test.com/match_all/ æ—¶æ‰ä¼šåŒ¹é…åˆ°/usr/share/nginx/html/match_all/index.html location = /match_all/ { root/usr/share/nginx/html index index.html } # å½“è®¿é—® www.nginx-test.com/1.jpg ç­‰è·¯å¾„æ—¶ä¼šå» /usr/share/nginx/images/1.jpg æ‰¾å¯¹åº”çš„èµ„æº location ~ \\.(jpeg|jpg|png|svg)$ { root /usr/share/nginx/images; } # å½“è®¿é—® www.nginx-test.com/bbs/ æ—¶ä¼šåŒ¹é…ä¸Š /usr/share/nginx/html/bbs/index.html location ^~ /bbs/ { root /usr/share/nginx/html; index index.html index.htm; } } location ä¸­çš„åæ–œçº¿ location /test { ... } location /test/ { ... } ä¸å¸¦ / å½“è®¿é—® www.nginx-test.com/test æ—¶ï¼Œ Nginx å…ˆæ‰¾æ˜¯å¦æœ‰ test ç›®å½•ï¼Œå¦‚æœæœ‰åˆ™æ‰¾ test ç›®å½•ä¸‹çš„ index.html ï¼›å¦‚æœæ²¡æœ‰ test ç›®å½•ï¼Œ nginx åˆ™ä¼šæ‰¾æ˜¯å¦æœ‰ test æ–‡ä»¶ã€‚ å¸¦ / å½“è®¿é—® www.nginx-test.com/test æ—¶ï¼Œ Nginx å…ˆæ‰¾æ˜¯å¦æœ‰ test ç›®å½•ï¼Œå¦‚æœæœ‰åˆ™æ‰¾ test ç›®å½•ä¸‹çš„ index.html ï¼Œå¦‚æœæ²¡æœ‰å®ƒä¹Ÿä¸ä¼šå»æ‰¾æ˜¯å¦å­˜åœ¨ test æ–‡ä»¶ã€‚ returnåœæ­¢å¤„ç†è¯·æ±‚ï¼Œç›´æ¥è¿”å›å“åº”ç æˆ–é‡å®šå‘åˆ°å…¶ä»– URL ï¼›æ‰§è¡Œ return æŒ‡ä»¤åï¼Œ location ä¸­åç»­æŒ‡ä»¤å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚ return code [text]; return code URL; return URL; ä¾‹å¦‚ï¼š location / { return 404; # ç›´æ¥è¿”å›çŠ¶æ€ç  } location / { return 404 \"pages not found\"; # è¿”å›çŠ¶æ€ç  + ä¸€æ®µæ–‡æœ¬ } location / { return 302 /bbs ; # è¿”å›çŠ¶æ€ç  + é‡å®šå‘åœ°å€ } location / { return https://www.baidu.com ; # è¿”å›é‡å®šå‘åœ°å€ } ","date":"2021-05-06","objectID":"/nginx-glance/:6:7","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#return"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" rewriteæ ¹æ®æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è§„åˆ™ï¼Œé‡å†™ URL ã€‚ è¯­æ³•ï¼šrewrite æ­£åˆ™è¡¨è¾¾å¼ è¦æ›¿æ¢çš„å†…å®¹ [flag]; ä¸Šä¸‹æ–‡ï¼šserverã€locationã€if ç¤ºä¾‹ï¼šrewirte /images/(.*\\.jpg)$ /pic/$1; # $1æ˜¯å‰é¢æ‹¬å·(.*\\.jpg)çš„åå‘å¼•ç”¨ flag å¯é€‰å€¼çš„å«ä¹‰ï¼š last é‡å†™åçš„ URL å‘èµ·æ–°è¯·æ±‚ï¼Œå†æ¬¡è¿›å…¥ server æ®µï¼Œé‡è¯• location çš„ä¸­çš„åŒ¹é…ï¼› break ç›´æ¥ä½¿ç”¨é‡å†™åçš„ URL ï¼Œä¸å†åŒ¹é…å…¶å®ƒ location ä¸­è¯­å¥ï¼› redirect è¿”å›302ä¸´æ—¶é‡å®šå‘ï¼› permanent è¿”å›301æ°¸ä¹…é‡å®šå‘ï¼› server{ listen 80; server_name fe.lion.club; # è¦åœ¨æœ¬åœ°hostsæ–‡ä»¶è¿›è¡Œé…ç½® root html; location /search { rewrite ^/(.*) https://www.baidu.com redirect; } location /images { rewrite /images/(.*) /pics/$1; } location /pics { rewrite /pics/(.*) /photos/$1; } location /photos { } } æŒ‰ç…§è¿™ä¸ªé…ç½®æˆ‘ä»¬æ¥åˆ†æï¼š å½“è®¿é—® fe.lion.club/search æ—¶ï¼Œä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬é‡å®šå‘åˆ° https://www.baidu.comã€‚ å½“è®¿é—® fe.lion.club/images/1.jpg æ—¶ï¼Œç¬¬ä¸€æ­¥é‡å†™ URL ä¸º fe.lion.club/pics/1.jpg ï¼Œæ‰¾åˆ° pics çš„ location ï¼Œç»§ç»­é‡å†™ URL ä¸º fe.lion.club/photos/1.jpg ï¼Œæ‰¾åˆ° /photos çš„ location åï¼Œå» html/photos ç›®å½•ä¸‹å¯»æ‰¾ 1.jpg é™æ€èµ„æºã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:6:8","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#rewrite"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" if æŒ‡ä»¤ è¯­æ³•ï¼šif (condition) {...} ä¸Šä¸‹æ–‡ï¼šserverã€location ç¤ºä¾‹ï¼š if($http_user_agent ~ Chrome){ rewrite /(.*)/browser/$1 break; } condition åˆ¤æ–­æ¡ä»¶ï¼š $variable ä»…ä¸ºå˜é‡æ—¶ï¼Œå€¼ä¸ºç©ºæˆ–ä»¥0å¼€å¤´å­—ç¬¦ä¸²éƒ½ä¼šè¢«å½“åš false å¤„ç†ï¼› = æˆ– != ç›¸ç­‰æˆ–ä¸ç­‰ï¼› ~ æ­£åˆ™åŒ¹é…ï¼› ! ~ éæ­£åˆ™åŒ¹é…ï¼› ~* æ­£åˆ™åŒ¹é…ï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼› -f æˆ– ! -f æ£€æµ‹æ–‡ä»¶å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼› -d æˆ– ! -d æ£€æµ‹ç›®å½•å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼› -e æˆ– ! -e æ£€æµ‹æ–‡ä»¶ã€ç›®å½•ã€ç¬¦å·é“¾æ¥ç­‰å­˜åœ¨æˆ–ä¸å­˜åœ¨ï¼› -x æˆ– ! -x æ£€æµ‹æ–‡ä»¶å¯ä»¥æ‰§è¡Œæˆ–ä¸å¯æ‰§è¡Œï¼› å®ä¾‹ï¼š server { listen 8080; server_name localhost; root html; location / { if ( $uri = \"/images/\" ){ rewrite (.*) /pics/ break; } } } å½“è®¿é—® localhost:8080/images/ æ—¶ï¼Œä¼šè¿›å…¥ if åˆ¤æ–­é‡Œé¢æ‰§è¡Œ rewrite å‘½ä»¤ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:6:9","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#if-æŒ‡ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" autoindexç”¨æˆ·è¯·æ±‚ä»¥ / ç»“å°¾æ—¶ï¼Œåˆ—å‡ºç›®å½•ç»“æ„ï¼Œå¯ä»¥ç”¨äºå¿«é€Ÿæ­å»ºé™æ€èµ„æºä¸‹è½½ç½‘ç«™ã€‚ autoindex.conf é…ç½®ä¿¡æ¯ï¼š server { listen 80; server_name fe.lion-test.club; location /download/ { root /opt/source; autoindex on; # æ‰“å¼€ autoindexï¼Œï¼Œå¯é€‰å‚æ•°æœ‰ on | off autoindex_exact_size on; # ä¿®æ”¹ä¸ºoffï¼Œä»¥KBã€MBã€GBæ˜¾ç¤ºæ–‡ä»¶å¤§å°ï¼Œé»˜è®¤ä¸ºonï¼Œä»¥bytesæ˜¾ç¤ºå‡ºâ½‚ä»¶çš„ç¡®åˆ‡â¼¤â¼© autoindex_format html; # ä»¥htmlçš„æ–¹å¼è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¯é€‰å‚æ•°æœ‰ html | json | xml autoindex_localtime off; # æ˜¾ç¤ºçš„â½‚ä»¶æ—¶é—´ä¸ºâ½‚ä»¶çš„æœåŠ¡å™¨æ—¶é—´ã€‚é»˜è®¤ä¸ºoffï¼Œæ˜¾ç¤ºçš„â½‚ä»¶æ—¶é—´ä¸ºGMTæ—¶é—´ } } å½“è®¿é—® fe.lion.com/download/ æ—¶ï¼Œä¼šæŠŠæœåŠ¡å™¨ /opt/source/download/ è·¯å¾„ä¸‹çš„æ–‡ä»¶å±•ç¤ºå‡ºæ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ","date":"2021-05-06","objectID":"/nginx-glance/:6:10","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#autoindex"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å˜é‡Nginx æä¾›ç»™ä½¿ç”¨è€…çš„å˜é‡éå¸¸å¤šï¼Œä½†æ˜¯ç»ˆç©¶æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚è¿‡ç¨‹æ‰€äº§ç”Ÿæ•°æ®ï¼Œ Nginx å°†è¿™äº›æ•°æ®ä»¥å˜é‡çš„å½¢å¼æä¾›ç»™ä½¿ç”¨è€…ã€‚ ä¸‹é¢åˆ—ä¸¾äº›é¡¹ç›®ä¸­å¸¸ç”¨çš„å˜é‡ï¼š å˜é‡å å«ä¹‰ remote_addr å®¢æˆ·ç«¯ IP åœ°å€ remote_port å®¢æˆ·ç«¯ç«¯å£ server_addr æœåŠ¡ç«¯ IP åœ°å€ server_port æœåŠ¡ç«¯ç«¯å£ server_protocol æœåŠ¡ç«¯åè®® binary_remote_addr äºŒè¿›åˆ¶æ ¼å¼çš„å®¢æˆ·ç«¯ IP åœ°å€ connection TCP è¿æ¥çš„åºå·ï¼Œé€’å¢ connection_request TCP è¿æ¥å½“å‰çš„è¯·æ±‚æ•°é‡ uri è¯·æ±‚çš„URLï¼Œä¸åŒ…å«å‚æ•° request_uri è¯·æ±‚çš„URLï¼ŒåŒ…å«å‚æ•° scheme åè®®åï¼Œ http æˆ– https request_method è¯·æ±‚æ–¹æ³• request_length å…¨éƒ¨è¯·æ±‚çš„é•¿åº¦ï¼ŒåŒ…å«è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“ args å…¨éƒ¨å‚æ•°å­—ç¬¦ä¸² arg_å‚æ•°å è·å–ç‰¹å®šå‚æ•°å€¼ is_args URL ä¸­æ˜¯å¦æœ‰å‚æ•°ï¼Œæœ‰çš„è¯è¿”å› ? ï¼Œå¦åˆ™è¿”å›ç©º query_string ä¸ args ç›¸åŒ host è¯·æ±‚ä¿¡æ¯ä¸­çš„ Host ï¼Œå¦‚æœè¯·æ±‚ä¸­æ²¡æœ‰ Host è¡Œï¼Œåˆ™åœ¨è¯·æ±‚å¤´ä¸­æ‰¾ï¼Œæœ€åä½¿ç”¨ nginx ä¸­è®¾ç½®çš„ server_name ã€‚ http_user_agent ç”¨æˆ·æµè§ˆå™¨ http_referer ä»å“ªäº›é“¾æ¥è¿‡æ¥çš„è¯·æ±‚ http_via æ¯ç»è¿‡ä¸€å±‚ä»£ç†æœåŠ¡å™¨ï¼Œéƒ½ä¼šæ·»åŠ ç›¸åº”çš„ä¿¡æ¯ http_cookie è·å–ç”¨æˆ· cookie request_time å¤„ç†è¯·æ±‚å·²æ¶ˆè€—çš„æ—¶é—´ https æ˜¯å¦å¼€å¯äº† https ï¼Œæ˜¯åˆ™è¿”å› on ï¼Œå¦åˆ™è¿”å›ç©º request_filename ç£ç›˜æ–‡ä»¶ç³»ç»Ÿå¾…è®¿é—®æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ document_root ç”± URI å’Œ root/alias è§„åˆ™ç”Ÿæˆçš„æ–‡ä»¶å¤¹è·¯å¾„ limit_rate è¿”å›å“åº”æ—¶çš„é€Ÿåº¦ä¸Šé™å€¼ å®ä¾‹æ¼”ç¤º var.conf ï¼š server{ listen 8081; server_name var.lion-test.club; root /usr/share/nginx/html; location / { return 200 \" remote_addr: $remote_addr remote_port: $remote_port server_addr: $server_addr server_port: $server_port server_protocol: $server_protocol binary_remote_addr: $binary_remote_addr connection: $connection uri: $uri request_uri: $request_uri scheme: $scheme request_method: $request_method request_length: $request_length args: $args arg_pid: $arg_pid is_args: $is_args query_string: $query_string host: $host http_user_agent: $http_user_agent http_referer: $http_referer http_via: $http_via request_time: $request_time https: $https request_filename: $request_filename document_root: $document_root \"; } } å½“æˆ‘ä»¬è®¿é—® http://var.lion-test.club:8081/test?pid=121414\u0026cid=sadasd æ—¶ï¼Œç”±äº Nginx ä¸­å†™äº† return æ–¹æ³•ï¼Œå› æ­¤ chrome æµè§ˆå™¨ä¼šé»˜è®¤ä¸ºæˆ‘ä»¬ä¸‹è½½ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸‹é¢å±•ç¤ºçš„å°±æ˜¯ä¸‹è½½çš„æ–‡ä»¶å†…å®¹ï¼š remote_addr: 27.16.220.84 remote_port: 56838 server_addr: 172.17.0.2 server_port: 8081 server_protocol: HTTP/1.1 binary_remote_addr: èŒ‰ connection: 126 uri: /test/ request_uri: /test/?pid=121414\u0026cid=sadasd scheme: http request_method: GET request_length: 518 args: pid=121414\u0026cid=sadasd arg_pid: 121414 is_args: ? query_string: pid=121414\u0026cid=sadasd host: var.lion-test.club http_user_agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.182 Safari/537.36 http_referer: http_via: request_time: 0.000 https: request_filename: /usr/share/nginx/html/test/ document_root: /usr/share/nginx/html Nginx çš„é…ç½®è¿˜æœ‰éå¸¸å¤šï¼Œä»¥ä¸Šåªæ˜¯ç½—åˆ—äº†ä¸€äº›å¸¸ç”¨çš„é…ç½®ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­è¿˜æ˜¯è¦å­¦ä¼šæŸ¥é˜…æ–‡æ¡£ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:6:11","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#å˜é‡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx åº”ç”¨æ ¸å¿ƒæ¦‚å¿µä»£ç†æ˜¯åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´å‡è®¾çš„ä¸€å±‚æœåŠ¡å™¨ï¼Œä»£ç†å°†æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚å¹¶å°†å®ƒè½¬å‘ç»™æœåŠ¡å™¨ï¼Œç„¶åå°†æœåŠ¡ç«¯çš„å“åº”è½¬å‘ç»™å®¢æˆ·ç«¯ã€‚ ä¸ç®¡æ˜¯æ­£å‘ä»£ç†è¿˜æ˜¯åå‘ä»£ç†ï¼Œå®ç°çš„éƒ½æ˜¯ä¸Šé¢çš„åŠŸèƒ½ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:7:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-åº”ç”¨æ ¸å¿ƒæ¦‚å¿µ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ­£å‘ä»£ç† æ­£å‘ä»£ç†ï¼Œæ„æ€æ˜¯ä¸€ä¸ªä½äºå®¢æˆ·ç«¯å’ŒåŸå§‹æœåŠ¡å™¨(origin server)ä¹‹é—´çš„æœåŠ¡å™¨ï¼Œä¸ºäº†ä»åŸå§‹æœåŠ¡å™¨å–å¾—å†…å®¹ï¼Œå®¢æˆ·ç«¯å‘ä»£ç†å‘é€ä¸€ä¸ªè¯·æ±‚å¹¶æŒ‡å®šç›®æ ‡(åŸå§‹æœåŠ¡å™¨)ï¼Œç„¶åä»£ç†å‘åŸå§‹æœåŠ¡å™¨è½¬äº¤è¯·æ±‚å¹¶å°†è·å¾—çš„å†…å®¹è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ æ­£å‘ä»£ç†æ˜¯ä¸ºæˆ‘ä»¬æœåŠ¡çš„ï¼Œå³ä¸ºå®¢æˆ·ç«¯æœåŠ¡çš„ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®æ­£å‘ä»£ç†è®¿é—®åˆ°å®ƒæœ¬èº«æ— æ³•è®¿é—®åˆ°çš„æœåŠ¡å™¨èµ„æºã€‚ æ­£å‘ä»£ç†å¯¹æˆ‘ä»¬æ˜¯é€æ˜çš„ï¼Œå¯¹æœåŠ¡ç«¯æ˜¯éé€æ˜çš„ï¼Œå³æœåŠ¡ç«¯å¹¶ä¸çŸ¥é“è‡ªå·±æ”¶åˆ°çš„æ˜¯æ¥è‡ªä»£ç†çš„è®¿é—®è¿˜æ˜¯æ¥è‡ªçœŸå®å®¢æˆ·ç«¯çš„è®¿é—®ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:7:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#æ­£å‘ä»£ç†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åå‘ä»£ç† åå‘ä»£ç†*ï¼ˆReverse Proxyï¼‰æ–¹å¼æ˜¯æŒ‡ä»¥ä»£ç†æœåŠ¡å™¨æ¥æ¥å—internetä¸Šçš„è¿æ¥è¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚è½¬å‘ç»™å†…éƒ¨ç½‘ç»œä¸Šçš„æœåŠ¡å™¨ï¼Œå¹¶å°†ä»æœåŠ¡å™¨ä¸Šå¾—åˆ°çš„ç»“æœè¿”å›ç»™internetä¸Šè¯·æ±‚è¿æ¥çš„å®¢æˆ·ç«¯ï¼Œæ­¤æ—¶ä»£ç†æœåŠ¡å™¨å¯¹å¤–å°±è¡¨ç°ä¸ºä¸€ä¸ªåå‘ä»£ç†æœåŠ¡å™¨ã€‚ åå‘ä»£ç†æ˜¯ä¸ºæœåŠ¡ç«¯æœåŠ¡çš„ï¼Œåå‘ä»£ç†å¯ä»¥å¸®åŠ©æœåŠ¡å™¨æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¸®åŠ©æœåŠ¡å™¨åšè¯·æ±‚è½¬å‘ï¼Œè´Ÿè½½å‡è¡¡ç­‰ã€‚ åå‘ä»£ç†å¯¹æœåŠ¡ç«¯æ˜¯é€æ˜çš„ï¼Œå¯¹æˆ‘ä»¬æ˜¯éé€æ˜çš„ï¼Œå³æˆ‘ä»¬å¹¶ä¸çŸ¥é“è‡ªå·±è®¿é—®çš„æ˜¯ä»£ç†æœåŠ¡å™¨ï¼Œè€ŒæœåŠ¡å™¨çŸ¥é“åå‘ä»£ç†åœ¨ä¸ºä»–æœåŠ¡ã€‚ åå‘ä»£ç†çš„ä¼˜åŠ¿ï¼š éšè—çœŸå®æœåŠ¡å™¨ï¼› è´Ÿè½½å‡è¡¡ä¾¿äºæ¨ªå‘æ‰©å……åç«¯åŠ¨æ€æœåŠ¡ï¼› åŠ¨é™åˆ†ç¦»ï¼Œæå‡ç³»ç»Ÿå¥å£®æ€§ï¼› é‚£ä¹ˆâ€œåŠ¨é™åˆ†ç¦»â€æ˜¯ä»€ä¹ˆï¼Ÿè´Ÿè½½å‡è¡¡åˆæ˜¯ä»€ä¹ˆï¼Ÿ ","date":"2021-05-06","objectID":"/nginx-glance/:7:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#åå‘ä»£ç†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åŠ¨é™åˆ†ç¦»åŠ¨é™åˆ†ç¦»æ˜¯æŒ‡åœ¨ web æœåŠ¡å™¨æ¶æ„ä¸­ï¼Œå°†é™æ€é¡µé¢ä¸åŠ¨æ€é¡µé¢æˆ–è€…é™æ€å†…å®¹æ¥å£å’ŒåŠ¨æ€å†…å®¹æ¥å£åˆ†å¼€ä¸åŒç³»ç»Ÿè®¿é—®çš„æ¶æ„è®¾è®¡æ–¹æ³•ï¼Œè¿›è€Œæç¤ºæ•´ä¸ªæœåŠ¡çš„è®¿é—®æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œéƒ½éœ€è¦å°†åŠ¨æ€èµ„æºå’Œé™æ€èµ„æºåˆ†å¼€ï¼Œç”±äº Nginx çš„é«˜å¹¶å‘å’Œé™æ€èµ„æºç¼“å­˜ç­‰ç‰¹æ€§ï¼Œç»å¸¸å°†é™æ€èµ„æºéƒ¨ç½²åœ¨ Nginx ä¸Šã€‚å¦‚æœè¯·æ±‚çš„æ˜¯é™æ€èµ„æºï¼Œç›´æ¥åˆ°é™æ€èµ„æºç›®å½•è·å–èµ„æºï¼Œå¦‚æœæ˜¯åŠ¨æ€èµ„æºçš„è¯·æ±‚ï¼Œåˆ™åˆ©ç”¨åå‘ä»£ç†çš„åŸç†ï¼ŒæŠŠè¯·æ±‚è½¬å‘ç»™å¯¹åº”åå°åº”ç”¨å»å¤„ç†ï¼Œä»è€Œå®ç°åŠ¨é™åˆ†ç¦»ã€‚ ä½¿ç”¨å‰åç«¯åˆ†ç¦»åï¼Œå¯ä»¥å¾ˆå¤§ç¨‹åº¦æå‡é™æ€èµ„æºçš„è®¿é—®é€Ÿåº¦ï¼Œå³ä½¿åŠ¨æ€æœåŠ¡ä¸å¯ç”¨ï¼Œé™æ€èµ„æºçš„è®¿é—®ä¹Ÿä¸ä¼šå—åˆ°å½±å“ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:7:3","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#åŠ¨é™åˆ†ç¦»"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è´Ÿè½½å‡è¡¡ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å‘é€å¤šä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¤„ç†è¯·æ±‚ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†å¯èƒ½è¦æ“ä½œä¸€äº›èµ„æºæ¯”å¦‚æ•°æ®åº“ã€é™æ€èµ„æºç­‰ï¼ŒæœåŠ¡å™¨å¤„ç†å®Œæ¯•åï¼Œå†å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ è¿™ç§æ¨¡å¼å¯¹äºæ—©æœŸçš„ç³»ç»Ÿæ¥è¯´ï¼ŒåŠŸèƒ½è¦æ±‚ä¸å¤æ‚ï¼Œä¸”å¹¶å‘è¯·æ±‚ç›¸å¯¹è¾ƒå°‘çš„æƒ…å†µä¸‹è¿˜èƒ½èƒœä»»ï¼Œæˆæœ¬ä¹Ÿä½ã€‚éšç€ä¿¡æ¯æ•°é‡ä¸æ–­å¢é•¿ï¼Œè®¿é—®é‡å’Œæ•°æ®é‡é£é€Ÿå¢é•¿ï¼Œä»¥åŠç³»ç»Ÿä¸šåŠ¡å¤æ‚åº¦æŒç»­å¢åŠ ï¼Œè¿™ç§åšæ³•å·²æ— æ³•æ»¡è¶³è¦æ±‚ï¼Œå¹¶å‘é‡ç‰¹åˆ«å¤§æ—¶ï¼ŒæœåŠ¡å™¨å®¹æ˜“å´©ã€‚ å¾ˆæ˜æ˜¾è¿™æ˜¯ç”±äºæœåŠ¡å™¨æ€§èƒ½çš„ç“¶é¢ˆé€ æˆçš„é—®é¢˜ï¼Œé™¤äº†å †æœºå™¨ä¹‹å¤–ï¼Œæœ€é‡è¦çš„åšæ³•å°±æ˜¯è´Ÿè½½å‡è¡¡ã€‚ è¯·æ±‚çˆ†å‘å¼å¢é•¿çš„æƒ…å†µä¸‹ï¼Œå•ä¸ªæœºå™¨æ€§èƒ½å†å¼ºåŠ²ä¹Ÿæ— æ³•æ»¡è¶³è¦æ±‚äº†ï¼Œè¿™ä¸ªæ—¶å€™é›†ç¾¤çš„æ¦‚å¿µäº§ç”Ÿäº†ï¼Œå•ä¸ªæœåŠ¡å™¨è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ªæœåŠ¡å™¨ï¼Œç„¶åå°†è¯·æ±‚åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ä¸Šï¼Œå°†è´Ÿè½½åˆ†å‘åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œè¿™å°±æ˜¯è´Ÿè½½å‡è¡¡ï¼Œæ ¸å¿ƒæ˜¯ã€Œåˆ†æ‘Šå‹åŠ›ã€ã€‚ Nginx å®ç°è´Ÿè½½å‡è¡¡ï¼Œä¸€èˆ¬æ¥è¯´æŒ‡çš„æ˜¯å°†è¯·æ±‚è½¬å‘ç»™æœåŠ¡å™¨é›†ç¾¤ã€‚ ä¸¾ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œæ™šé«˜å³°ä¹˜ååœ°é“çš„æ—¶å€™ï¼Œå…¥ç«™å£ç»å¸¸ä¼šæœ‰åœ°é“å·¥ä½œäººå‘˜å¤§å–‡å­â€œè¯·èµ° B å£ï¼Œ B å£äººå°‘è½¦ç©ºâ€¦.â€ï¼Œè¿™ä¸ªå·¥ä½œäººå‘˜çš„ä½œç”¨å°±æ˜¯è´Ÿè½½å‡è¡¡ã€‚ Nginx å®ç°è´Ÿè½½å‡è¡¡çš„ç­–ç•¥ï¼š è½®è¯¢ç­–ç•¥ï¼šé»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨çš„ç­–ç•¥ï¼Œå°†æ‰€æœ‰å®¢æˆ·ç«¯è¯·æ±‚è½®è¯¢åˆ†é…ç»™æœåŠ¡ç«¯ã€‚è¿™ç§ç­–ç•¥æ˜¯å¯ä»¥æ­£å¸¸å·¥ä½œçš„ï¼Œä½†æ˜¯å¦‚æœå…¶ä¸­æŸä¸€å°æœåŠ¡å™¨å‹åŠ›å¤ªå¤§ï¼Œå‡ºç°å»¶è¿Ÿï¼Œä¼šå½±å“æ‰€æœ‰åˆ†é…åœ¨è¿™å°æœåŠ¡å™¨ä¸‹çš„ç”¨æˆ·ã€‚ æœ€å°è¿æ¥æ•°ç­–ç•¥ï¼šå°†è¯·æ±‚ä¼˜å…ˆåˆ†é…ç»™å‹åŠ›è¾ƒå°çš„æœåŠ¡å™¨ï¼Œå®ƒå¯ä»¥å¹³è¡¡æ¯ä¸ªé˜Ÿåˆ—çš„é•¿åº¦ï¼Œå¹¶é¿å…å‘å‹åŠ›å¤§çš„æœåŠ¡å™¨æ·»åŠ æ›´å¤šçš„è¯·æ±‚ã€‚ æœ€å¿«å“åº”æ—¶é—´ç­–ç•¥ï¼šä¼˜å…ˆåˆ†é…ç»™å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡å™¨ã€‚ å®¢æˆ·ç«¯ ip ç»‘å®šç­–ç•¥ï¼šæ¥è‡ªåŒä¸€ä¸ª ip çš„è¯·æ±‚æ°¸è¿œåªåˆ†é…ä¸€å°æœåŠ¡å™¨ï¼Œæœ‰æ•ˆè§£å†³äº†åŠ¨æ€ç½‘é¡µå­˜åœ¨çš„ session å…±äº«é—®é¢˜ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:7:4","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#è´Ÿè½½å‡è¡¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx å®æˆ˜é…ç½®åœ¨é…ç½®åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ç­‰ç­‰åŠŸèƒ½ä¹‹å‰ï¼Œæœ‰ä¸¤ä¸ªæ ¸å¿ƒæ¨¡å—æ˜¯æˆ‘ä»¬å¿…é¡»è¦æŒæ¡çš„ï¼Œè¿™ä¸¤ä¸ªæ¨¡å—åº”è¯¥è¯´æ˜¯ Nginx åº”ç”¨é…ç½®ä¸­çš„æ ¸å¿ƒï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š upstream ã€proxy_pass ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:8:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-å®æˆ˜é…ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" upstreamç”¨äºå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆæŒ‡çš„å°±æ˜¯åå°æä¾›çš„åº”ç”¨æœåŠ¡å™¨ï¼‰çš„ç›¸å…³ä¿¡æ¯ã€‚ è¯­æ³•ï¼šupstream name { ... } ä¸Šä¸‹æ–‡ï¼šhttp ç¤ºä¾‹ï¼š upstream back_end_server{ server 192.168.100.33:8081 } åœ¨ upstream å†…å¯ä½¿ç”¨çš„æŒ‡ä»¤ï¼š server å®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ï¼› zone å®šä¹‰å…±äº«å†…å­˜ï¼Œç”¨äºè·¨ worker å­è¿›ç¨‹ï¼› keepalive å¯¹ä¸Šæ¸¸æœåŠ¡å¯ç”¨é•¿è¿æ¥ï¼› keepalive_requests ä¸€ä¸ªé•¿è¿æ¥æœ€å¤šè¯·æ±‚ HTTP çš„ä¸ªæ•°ï¼› keepalive_timeout ç©ºé—²æƒ…å½¢ä¸‹ï¼Œä¸€ä¸ªé•¿è¿æ¥çš„è¶…æ—¶æ—¶é•¿ï¼› hash å“ˆå¸Œè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› ip_hash ä¾æ® IP è¿›è¡Œå“ˆå¸Œè®¡ç®—çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_conn æœ€å°‘è¿æ¥æ•°è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_time æœ€çŸ­å“åº”æ—¶é—´è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› random éšæœºè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› serverå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ã€‚ è¯­æ³•ï¼šserver address [parameters] ä¸Šä¸‹æ–‡ï¼šupstream parameters å¯é€‰å€¼ï¼š weight=number æƒé‡å€¼ï¼Œé»˜è®¤ä¸º1ï¼› max_conns=number ä¸Šæ¸¸æœåŠ¡å™¨çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ï¼› fail_timeout=time æœåŠ¡å™¨ä¸å¯ç”¨çš„åˆ¤å®šæ—¶é—´ï¼› max_fails=numer æœåŠ¡å™¨ä¸å¯ç”¨çš„æ£€æŸ¥æ¬¡æ•°ï¼› backup å¤‡ä»½æœåŠ¡å™¨ï¼Œä»…å½“å…¶ä»–æœåŠ¡å™¨éƒ½ä¸å¯ç”¨æ—¶æ‰ä¼šå¯ç”¨ï¼› down æ ‡è®°æœåŠ¡å™¨é•¿æœŸä¸å¯ç”¨ï¼Œç¦»çº¿ç»´æŠ¤ï¼› keepaliveé™åˆ¶æ¯ä¸ª worker å­è¿›ç¨‹ä¸ä¸Šæ¸¸æœåŠ¡å™¨ç©ºé—²é•¿è¿æ¥çš„æœ€å¤§æ•°é‡ã€‚ keepalive connections; ä¸Šä¸‹æ–‡ï¼šupstream ç¤ºä¾‹ï¼škeepalive 16; keepalive_requestså•ä¸ªé•¿è¿æ¥å¯ä»¥å¤„ç†çš„æœ€å¤š HTTP è¯·æ±‚ä¸ªæ•°ã€‚ è¯­æ³•ï¼škeepalive_requests number; é»˜è®¤å€¼ï¼škeepalive_requests 100; ä¸Šä¸‹æ–‡ï¼šupstream keepalive_timeoutç©ºé—²é•¿è¿æ¥çš„æœ€é•¿ä¿æŒæ—¶é—´ã€‚ è¯­æ³•ï¼škeepalive_timeout time; é»˜è®¤å€¼ï¼škeepalive_timeout 60s; ä¸Šä¸‹æ–‡ï¼šupstream é…ç½®å®ä¾‹ upstream back_end{ server 127.0.0.1:8081 weight=3 max_conns=1000 fail_timeout=10s max_fails=2; keepalive 32; keepalive_requests 50; keepalive_timeout 30s; } ","date":"2021-05-06","objectID":"/nginx-glance/:8:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#upstream"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" upstreamç”¨äºå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆæŒ‡çš„å°±æ˜¯åå°æä¾›çš„åº”ç”¨æœåŠ¡å™¨ï¼‰çš„ç›¸å…³ä¿¡æ¯ã€‚ è¯­æ³•ï¼šupstream name { ... } ä¸Šä¸‹æ–‡ï¼šhttp ç¤ºä¾‹ï¼š upstream back_end_server{ server 192.168.100.33:8081 } åœ¨ upstream å†…å¯ä½¿ç”¨çš„æŒ‡ä»¤ï¼š server å®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ï¼› zone å®šä¹‰å…±äº«å†…å­˜ï¼Œç”¨äºè·¨ worker å­è¿›ç¨‹ï¼› keepalive å¯¹ä¸Šæ¸¸æœåŠ¡å¯ç”¨é•¿è¿æ¥ï¼› keepalive_requests ä¸€ä¸ªé•¿è¿æ¥æœ€å¤šè¯·æ±‚ HTTP çš„ä¸ªæ•°ï¼› keepalive_timeout ç©ºé—²æƒ…å½¢ä¸‹ï¼Œä¸€ä¸ªé•¿è¿æ¥çš„è¶…æ—¶æ—¶é•¿ï¼› hash å“ˆå¸Œè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› ip_hash ä¾æ® IP è¿›è¡Œå“ˆå¸Œè®¡ç®—çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_conn æœ€å°‘è¿æ¥æ•°è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_time æœ€çŸ­å“åº”æ—¶é—´è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› random éšæœºè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› serverå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ã€‚ è¯­æ³•ï¼šserver address [parameters] ä¸Šä¸‹æ–‡ï¼šupstream parameters å¯é€‰å€¼ï¼š weight=number æƒé‡å€¼ï¼Œé»˜è®¤ä¸º1ï¼› max_conns=number ä¸Šæ¸¸æœåŠ¡å™¨çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ï¼› fail_timeout=time æœåŠ¡å™¨ä¸å¯ç”¨çš„åˆ¤å®šæ—¶é—´ï¼› max_fails=numer æœåŠ¡å™¨ä¸å¯ç”¨çš„æ£€æŸ¥æ¬¡æ•°ï¼› backup å¤‡ä»½æœåŠ¡å™¨ï¼Œä»…å½“å…¶ä»–æœåŠ¡å™¨éƒ½ä¸å¯ç”¨æ—¶æ‰ä¼šå¯ç”¨ï¼› down æ ‡è®°æœåŠ¡å™¨é•¿æœŸä¸å¯ç”¨ï¼Œç¦»çº¿ç»´æŠ¤ï¼› keepaliveé™åˆ¶æ¯ä¸ª worker å­è¿›ç¨‹ä¸ä¸Šæ¸¸æœåŠ¡å™¨ç©ºé—²é•¿è¿æ¥çš„æœ€å¤§æ•°é‡ã€‚ keepalive connections; ä¸Šä¸‹æ–‡ï¼šupstream ç¤ºä¾‹ï¼škeepalive 16; keepalive_requestså•ä¸ªé•¿è¿æ¥å¯ä»¥å¤„ç†çš„æœ€å¤š HTTP è¯·æ±‚ä¸ªæ•°ã€‚ è¯­æ³•ï¼škeepalive_requests number; é»˜è®¤å€¼ï¼škeepalive_requests 100; ä¸Šä¸‹æ–‡ï¼šupstream keepalive_timeoutç©ºé—²é•¿è¿æ¥çš„æœ€é•¿ä¿æŒæ—¶é—´ã€‚ è¯­æ³•ï¼škeepalive_timeout time; é»˜è®¤å€¼ï¼škeepalive_timeout 60s; ä¸Šä¸‹æ–‡ï¼šupstream é…ç½®å®ä¾‹ upstream back_end{ server 127.0.0.1:8081 weight=3 max_conns=1000 fail_timeout=10s max_fails=2; keepalive 32; keepalive_requests 50; keepalive_timeout 30s; } ","date":"2021-05-06","objectID":"/nginx-glance/:8:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#server"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" upstreamç”¨äºå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆæŒ‡çš„å°±æ˜¯åå°æä¾›çš„åº”ç”¨æœåŠ¡å™¨ï¼‰çš„ç›¸å…³ä¿¡æ¯ã€‚ è¯­æ³•ï¼šupstream name { ... } ä¸Šä¸‹æ–‡ï¼šhttp ç¤ºä¾‹ï¼š upstream back_end_server{ server 192.168.100.33:8081 } åœ¨ upstream å†…å¯ä½¿ç”¨çš„æŒ‡ä»¤ï¼š server å®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ï¼› zone å®šä¹‰å…±äº«å†…å­˜ï¼Œç”¨äºè·¨ worker å­è¿›ç¨‹ï¼› keepalive å¯¹ä¸Šæ¸¸æœåŠ¡å¯ç”¨é•¿è¿æ¥ï¼› keepalive_requests ä¸€ä¸ªé•¿è¿æ¥æœ€å¤šè¯·æ±‚ HTTP çš„ä¸ªæ•°ï¼› keepalive_timeout ç©ºé—²æƒ…å½¢ä¸‹ï¼Œä¸€ä¸ªé•¿è¿æ¥çš„è¶…æ—¶æ—¶é•¿ï¼› hash å“ˆå¸Œè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› ip_hash ä¾æ® IP è¿›è¡Œå“ˆå¸Œè®¡ç®—çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_conn æœ€å°‘è¿æ¥æ•°è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_time æœ€çŸ­å“åº”æ—¶é—´è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› random éšæœºè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› serverå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ã€‚ è¯­æ³•ï¼šserver address [parameters] ä¸Šä¸‹æ–‡ï¼šupstream parameters å¯é€‰å€¼ï¼š weight=number æƒé‡å€¼ï¼Œé»˜è®¤ä¸º1ï¼› max_conns=number ä¸Šæ¸¸æœåŠ¡å™¨çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ï¼› fail_timeout=time æœåŠ¡å™¨ä¸å¯ç”¨çš„åˆ¤å®šæ—¶é—´ï¼› max_fails=numer æœåŠ¡å™¨ä¸å¯ç”¨çš„æ£€æŸ¥æ¬¡æ•°ï¼› backup å¤‡ä»½æœåŠ¡å™¨ï¼Œä»…å½“å…¶ä»–æœåŠ¡å™¨éƒ½ä¸å¯ç”¨æ—¶æ‰ä¼šå¯ç”¨ï¼› down æ ‡è®°æœåŠ¡å™¨é•¿æœŸä¸å¯ç”¨ï¼Œç¦»çº¿ç»´æŠ¤ï¼› keepaliveé™åˆ¶æ¯ä¸ª worker å­è¿›ç¨‹ä¸ä¸Šæ¸¸æœåŠ¡å™¨ç©ºé—²é•¿è¿æ¥çš„æœ€å¤§æ•°é‡ã€‚ keepalive connections; ä¸Šä¸‹æ–‡ï¼šupstream ç¤ºä¾‹ï¼škeepalive 16; keepalive_requestså•ä¸ªé•¿è¿æ¥å¯ä»¥å¤„ç†çš„æœ€å¤š HTTP è¯·æ±‚ä¸ªæ•°ã€‚ è¯­æ³•ï¼škeepalive_requests number; é»˜è®¤å€¼ï¼škeepalive_requests 100; ä¸Šä¸‹æ–‡ï¼šupstream keepalive_timeoutç©ºé—²é•¿è¿æ¥çš„æœ€é•¿ä¿æŒæ—¶é—´ã€‚ è¯­æ³•ï¼škeepalive_timeout time; é»˜è®¤å€¼ï¼škeepalive_timeout 60s; ä¸Šä¸‹æ–‡ï¼šupstream é…ç½®å®ä¾‹ upstream back_end{ server 127.0.0.1:8081 weight=3 max_conns=1000 fail_timeout=10s max_fails=2; keepalive 32; keepalive_requests 50; keepalive_timeout 30s; } ","date":"2021-05-06","objectID":"/nginx-glance/:8:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#keepalive"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" upstreamç”¨äºå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆæŒ‡çš„å°±æ˜¯åå°æä¾›çš„åº”ç”¨æœåŠ¡å™¨ï¼‰çš„ç›¸å…³ä¿¡æ¯ã€‚ è¯­æ³•ï¼šupstream name { ... } ä¸Šä¸‹æ–‡ï¼šhttp ç¤ºä¾‹ï¼š upstream back_end_server{ server 192.168.100.33:8081 } åœ¨ upstream å†…å¯ä½¿ç”¨çš„æŒ‡ä»¤ï¼š server å®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ï¼› zone å®šä¹‰å…±äº«å†…å­˜ï¼Œç”¨äºè·¨ worker å­è¿›ç¨‹ï¼› keepalive å¯¹ä¸Šæ¸¸æœåŠ¡å¯ç”¨é•¿è¿æ¥ï¼› keepalive_requests ä¸€ä¸ªé•¿è¿æ¥æœ€å¤šè¯·æ±‚ HTTP çš„ä¸ªæ•°ï¼› keepalive_timeout ç©ºé—²æƒ…å½¢ä¸‹ï¼Œä¸€ä¸ªé•¿è¿æ¥çš„è¶…æ—¶æ—¶é•¿ï¼› hash å“ˆå¸Œè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› ip_hash ä¾æ® IP è¿›è¡Œå“ˆå¸Œè®¡ç®—çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_conn æœ€å°‘è¿æ¥æ•°è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_time æœ€çŸ­å“åº”æ—¶é—´è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› random éšæœºè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› serverå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ã€‚ è¯­æ³•ï¼šserver address [parameters] ä¸Šä¸‹æ–‡ï¼šupstream parameters å¯é€‰å€¼ï¼š weight=number æƒé‡å€¼ï¼Œé»˜è®¤ä¸º1ï¼› max_conns=number ä¸Šæ¸¸æœåŠ¡å™¨çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ï¼› fail_timeout=time æœåŠ¡å™¨ä¸å¯ç”¨çš„åˆ¤å®šæ—¶é—´ï¼› max_fails=numer æœåŠ¡å™¨ä¸å¯ç”¨çš„æ£€æŸ¥æ¬¡æ•°ï¼› backup å¤‡ä»½æœåŠ¡å™¨ï¼Œä»…å½“å…¶ä»–æœåŠ¡å™¨éƒ½ä¸å¯ç”¨æ—¶æ‰ä¼šå¯ç”¨ï¼› down æ ‡è®°æœåŠ¡å™¨é•¿æœŸä¸å¯ç”¨ï¼Œç¦»çº¿ç»´æŠ¤ï¼› keepaliveé™åˆ¶æ¯ä¸ª worker å­è¿›ç¨‹ä¸ä¸Šæ¸¸æœåŠ¡å™¨ç©ºé—²é•¿è¿æ¥çš„æœ€å¤§æ•°é‡ã€‚ keepalive connections; ä¸Šä¸‹æ–‡ï¼šupstream ç¤ºä¾‹ï¼škeepalive 16; keepalive_requestså•ä¸ªé•¿è¿æ¥å¯ä»¥å¤„ç†çš„æœ€å¤š HTTP è¯·æ±‚ä¸ªæ•°ã€‚ è¯­æ³•ï¼škeepalive_requests number; é»˜è®¤å€¼ï¼škeepalive_requests 100; ä¸Šä¸‹æ–‡ï¼šupstream keepalive_timeoutç©ºé—²é•¿è¿æ¥çš„æœ€é•¿ä¿æŒæ—¶é—´ã€‚ è¯­æ³•ï¼škeepalive_timeout time; é»˜è®¤å€¼ï¼škeepalive_timeout 60s; ä¸Šä¸‹æ–‡ï¼šupstream é…ç½®å®ä¾‹ upstream back_end{ server 127.0.0.1:8081 weight=3 max_conns=1000 fail_timeout=10s max_fails=2; keepalive 32; keepalive_requests 50; keepalive_timeout 30s; } ","date":"2021-05-06","objectID":"/nginx-glance/:8:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#keepalive_requests"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" upstreamç”¨äºå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆæŒ‡çš„å°±æ˜¯åå°æä¾›çš„åº”ç”¨æœåŠ¡å™¨ï¼‰çš„ç›¸å…³ä¿¡æ¯ã€‚ è¯­æ³•ï¼šupstream name { ... } ä¸Šä¸‹æ–‡ï¼šhttp ç¤ºä¾‹ï¼š upstream back_end_server{ server 192.168.100.33:8081 } åœ¨ upstream å†…å¯ä½¿ç”¨çš„æŒ‡ä»¤ï¼š server å®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ï¼› zone å®šä¹‰å…±äº«å†…å­˜ï¼Œç”¨äºè·¨ worker å­è¿›ç¨‹ï¼› keepalive å¯¹ä¸Šæ¸¸æœåŠ¡å¯ç”¨é•¿è¿æ¥ï¼› keepalive_requests ä¸€ä¸ªé•¿è¿æ¥æœ€å¤šè¯·æ±‚ HTTP çš„ä¸ªæ•°ï¼› keepalive_timeout ç©ºé—²æƒ…å½¢ä¸‹ï¼Œä¸€ä¸ªé•¿è¿æ¥çš„è¶…æ—¶æ—¶é•¿ï¼› hash å“ˆå¸Œè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› ip_hash ä¾æ® IP è¿›è¡Œå“ˆå¸Œè®¡ç®—çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_conn æœ€å°‘è¿æ¥æ•°è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_time æœ€çŸ­å“åº”æ—¶é—´è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› random éšæœºè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› serverå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ã€‚ è¯­æ³•ï¼šserver address [parameters] ä¸Šä¸‹æ–‡ï¼šupstream parameters å¯é€‰å€¼ï¼š weight=number æƒé‡å€¼ï¼Œé»˜è®¤ä¸º1ï¼› max_conns=number ä¸Šæ¸¸æœåŠ¡å™¨çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ï¼› fail_timeout=time æœåŠ¡å™¨ä¸å¯ç”¨çš„åˆ¤å®šæ—¶é—´ï¼› max_fails=numer æœåŠ¡å™¨ä¸å¯ç”¨çš„æ£€æŸ¥æ¬¡æ•°ï¼› backup å¤‡ä»½æœåŠ¡å™¨ï¼Œä»…å½“å…¶ä»–æœåŠ¡å™¨éƒ½ä¸å¯ç”¨æ—¶æ‰ä¼šå¯ç”¨ï¼› down æ ‡è®°æœåŠ¡å™¨é•¿æœŸä¸å¯ç”¨ï¼Œç¦»çº¿ç»´æŠ¤ï¼› keepaliveé™åˆ¶æ¯ä¸ª worker å­è¿›ç¨‹ä¸ä¸Šæ¸¸æœåŠ¡å™¨ç©ºé—²é•¿è¿æ¥çš„æœ€å¤§æ•°é‡ã€‚ keepalive connections; ä¸Šä¸‹æ–‡ï¼šupstream ç¤ºä¾‹ï¼škeepalive 16; keepalive_requestså•ä¸ªé•¿è¿æ¥å¯ä»¥å¤„ç†çš„æœ€å¤š HTTP è¯·æ±‚ä¸ªæ•°ã€‚ è¯­æ³•ï¼škeepalive_requests number; é»˜è®¤å€¼ï¼škeepalive_requests 100; ä¸Šä¸‹æ–‡ï¼šupstream keepalive_timeoutç©ºé—²é•¿è¿æ¥çš„æœ€é•¿ä¿æŒæ—¶é—´ã€‚ è¯­æ³•ï¼škeepalive_timeout time; é»˜è®¤å€¼ï¼škeepalive_timeout 60s; ä¸Šä¸‹æ–‡ï¼šupstream é…ç½®å®ä¾‹ upstream back_end{ server 127.0.0.1:8081 weight=3 max_conns=1000 fail_timeout=10s max_fails=2; keepalive 32; keepalive_requests 50; keepalive_timeout 30s; } ","date":"2021-05-06","objectID":"/nginx-glance/:8:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#keepalive_timeout"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" upstreamç”¨äºå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆæŒ‡çš„å°±æ˜¯åå°æä¾›çš„åº”ç”¨æœåŠ¡å™¨ï¼‰çš„ç›¸å…³ä¿¡æ¯ã€‚ è¯­æ³•ï¼šupstream name { ... } ä¸Šä¸‹æ–‡ï¼šhttp ç¤ºä¾‹ï¼š upstream back_end_server{ server 192.168.100.33:8081 } åœ¨ upstream å†…å¯ä½¿ç”¨çš„æŒ‡ä»¤ï¼š server å®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ï¼› zone å®šä¹‰å…±äº«å†…å­˜ï¼Œç”¨äºè·¨ worker å­è¿›ç¨‹ï¼› keepalive å¯¹ä¸Šæ¸¸æœåŠ¡å¯ç”¨é•¿è¿æ¥ï¼› keepalive_requests ä¸€ä¸ªé•¿è¿æ¥æœ€å¤šè¯·æ±‚ HTTP çš„ä¸ªæ•°ï¼› keepalive_timeout ç©ºé—²æƒ…å½¢ä¸‹ï¼Œä¸€ä¸ªé•¿è¿æ¥çš„è¶…æ—¶æ—¶é•¿ï¼› hash å“ˆå¸Œè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› ip_hash ä¾æ® IP è¿›è¡Œå“ˆå¸Œè®¡ç®—çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_conn æœ€å°‘è¿æ¥æ•°è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› least_time æœ€çŸ­å“åº”æ—¶é—´è´Ÿè½½å‡è¡¡ç®—æ³•ï¼› random éšæœºè´Ÿè½½å‡è¡¡ç®—æ³•ï¼› serverå®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨åœ°å€ã€‚ è¯­æ³•ï¼šserver address [parameters] ä¸Šä¸‹æ–‡ï¼šupstream parameters å¯é€‰å€¼ï¼š weight=number æƒé‡å€¼ï¼Œé»˜è®¤ä¸º1ï¼› max_conns=number ä¸Šæ¸¸æœåŠ¡å™¨çš„æœ€å¤§å¹¶å‘è¿æ¥æ•°ï¼› fail_timeout=time æœåŠ¡å™¨ä¸å¯ç”¨çš„åˆ¤å®šæ—¶é—´ï¼› max_fails=numer æœåŠ¡å™¨ä¸å¯ç”¨çš„æ£€æŸ¥æ¬¡æ•°ï¼› backup å¤‡ä»½æœåŠ¡å™¨ï¼Œä»…å½“å…¶ä»–æœåŠ¡å™¨éƒ½ä¸å¯ç”¨æ—¶æ‰ä¼šå¯ç”¨ï¼› down æ ‡è®°æœåŠ¡å™¨é•¿æœŸä¸å¯ç”¨ï¼Œç¦»çº¿ç»´æŠ¤ï¼› keepaliveé™åˆ¶æ¯ä¸ª worker å­è¿›ç¨‹ä¸ä¸Šæ¸¸æœåŠ¡å™¨ç©ºé—²é•¿è¿æ¥çš„æœ€å¤§æ•°é‡ã€‚ keepalive connections; ä¸Šä¸‹æ–‡ï¼šupstream ç¤ºä¾‹ï¼škeepalive 16; keepalive_requestså•ä¸ªé•¿è¿æ¥å¯ä»¥å¤„ç†çš„æœ€å¤š HTTP è¯·æ±‚ä¸ªæ•°ã€‚ è¯­æ³•ï¼škeepalive_requests number; é»˜è®¤å€¼ï¼škeepalive_requests 100; ä¸Šä¸‹æ–‡ï¼šupstream keepalive_timeoutç©ºé—²é•¿è¿æ¥çš„æœ€é•¿ä¿æŒæ—¶é—´ã€‚ è¯­æ³•ï¼škeepalive_timeout time; é»˜è®¤å€¼ï¼škeepalive_timeout 60s; ä¸Šä¸‹æ–‡ï¼šupstream é…ç½®å®ä¾‹ upstream back_end{ server 127.0.0.1:8081 weight=3 max_conns=1000 fail_timeout=10s max_fails=2; keepalive 32; keepalive_requests 50; keepalive_timeout 30s; } ","date":"2021-05-06","objectID":"/nginx-glance/:8:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®å®ä¾‹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" proxy_passç”¨äºé…ç½®ä»£ç†æœåŠ¡å™¨ã€‚ è¯­æ³•ï¼šproxy_pass URL; ä¸Šä¸‹æ–‡ï¼šlocationã€ifã€limit_except ç¤ºä¾‹ï¼š proxy_pass http://127.0.0.1:8081 proxy_pass http://127.0.0.1:8081/proxy URL å‚æ•°åŸåˆ™ URL å¿…é¡»ä»¥ http æˆ– https å¼€å¤´ï¼› URL ä¸­å¯ä»¥æºå¸¦å˜é‡ï¼› URL ä¸­æ˜¯å¦å¸¦ URI ï¼Œä¼šç›´æ¥å½±å“å‘å¾€ä¸Šæ¸¸è¯·æ±‚çš„ URL ï¼› æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸¤ç§å¸¸è§çš„ URL ç”¨æ³•ï¼š proxy_pass http://192.168.100.33:8081 proxy_pass http://192.168.100.33:8081/ è¿™ä¸¤ç§ç”¨æ³•çš„åŒºåˆ«å°±æ˜¯å¸¦ / å’Œä¸å¸¦ / ï¼Œåœ¨é…ç½®ä»£ç†æ—¶å®ƒä»¬çš„åŒºåˆ«å¯å¤§äº†ï¼š ä¸å¸¦ / æ„å‘³ç€ Nginx ä¸ä¼šä¿®æ”¹ç”¨æˆ· URL ï¼Œè€Œæ˜¯ç›´æ¥é€ä¼ ç»™ä¸Šæ¸¸çš„åº”ç”¨æœåŠ¡å™¨ï¼› å¸¦ / æ„å‘³ç€ Nginx ä¼šä¿®æ”¹ç”¨æˆ· URL ï¼Œä¿®æ”¹æ–¹æ³•æ˜¯å°† location åçš„ URL ä»ç”¨æˆ· URL ä¸­åˆ é™¤ï¼› ä¸å¸¦ / çš„ç”¨æ³•ï¼š location /bbs/{ proxy_pass http://127.0.0.1:8080; } åˆ†æï¼š ç”¨æˆ·è¯·æ±‚ URL ï¼š /bbs/abc/test.html è¯·æ±‚åˆ°è¾¾ Nginx çš„ URL ï¼š /bbs/abc/test.html è¯·æ±‚åˆ°è¾¾ä¸Šæ¸¸åº”ç”¨æœåŠ¡å™¨çš„ URL ï¼š /bbs/abc/test.html å¸¦ / çš„ç”¨æ³•ï¼š location /bbs/{ proxy_pass http://127.0.0.1:8080/; } åˆ†æï¼š ç”¨æˆ·è¯·æ±‚ URL ï¼š /bbs/abc/test.html è¯·æ±‚åˆ°è¾¾ Nginx çš„ URL ï¼š /bbs/abc/test.html è¯·æ±‚åˆ°è¾¾ä¸Šæ¸¸åº”ç”¨æœåŠ¡å™¨çš„ URL ï¼š /abc/test.html å¹¶æ²¡æœ‰æ‹¼æ¥ä¸Š /bbs ï¼Œè¿™ç‚¹å’Œ root ä¸ alias ä¹‹é—´çš„åŒºåˆ«æ˜¯ä¿æŒä¸€è‡´çš„ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:8:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#proxy_pass"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®åå‘ä»£ç†è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ›´åŠ æ¥è¿‘å®é™…ï¼Œä½œè€…å‡†å¤‡äº†ä¸¤å°äº‘æœåŠ¡å™¨ï¼Œå®ƒä»¬çš„å…¬ç½‘ IP åˆ†åˆ«æ˜¯ï¼š 121.42.11.34 ä¸ 121.5.180.193 ã€‚ æˆ‘ä»¬æŠŠ 121.42.11.34 æœåŠ¡å™¨ä½œä¸ºä¸Šæ¸¸æœåŠ¡å™¨ï¼Œåšå¦‚ä¸‹é…ç½®ï¼š # /etc/nginx/conf.d/proxy.conf server{ listen 8080; server_name localhost; location /proxy/ { root /usr/share/nginx/html/proxy; index index.html; } } # /usr/share/nginx/html/proxy/index.html \u003ch1\u003e 121.42.11.34 proxy html \u003c/h1\u003e é…ç½®å®Œæˆåé‡å¯ Nginx æœåŠ¡å™¨ nginx -s reload ã€‚ æŠŠ 121.5.180.193 æœåŠ¡å™¨ä½œä¸ºä»£ç†æœåŠ¡å™¨ï¼Œåšå¦‚ä¸‹é…ç½®ï¼š # /etc/nginx/conf.d/proxy.conf upstream back_end { server 121.42.11.34:8080 weight=2 max_conns=1000 fail_timeout=10s max_fails=3; keepalive 32; keepalive_requests 80; keepalive_timeout 20s; } server { listen 80; server_name proxy.lion.club; location /proxy { proxy_pass http://back_end/proxy; } } æœ¬åœ°æœºå™¨è¦è®¿é—® proxy.lion.club åŸŸåï¼Œå› æ­¤éœ€è¦é…ç½®æœ¬åœ° hosts ï¼Œé€šè¿‡å‘½ä»¤ï¼švim /etc/hosts è¿›å…¥é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š 121.5.180.193 proxy.lion.club åˆ†æï¼š å½“è®¿é—® proxy.lion.club/proxy æ—¶é€šè¿‡ upstream çš„é…ç½®æ‰¾åˆ° 121.42.11.34:8080 ï¼› å› æ­¤è®¿é—®åœ°å€å˜ä¸º http://121.42.11.34:8080/proxy ï¼› è¿æ¥åˆ° 121.42.11.34 æœåŠ¡å™¨ï¼Œæ‰¾åˆ° 8080 ç«¯å£æä¾›çš„ server ï¼› é€šè¿‡ server æ‰¾åˆ° /usr/share/nginx/html/proxy/index.html èµ„æºï¼Œæœ€ç»ˆå±•ç¤ºå‡ºæ¥ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:8:3","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®åå‘ä»£ç†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®è´Ÿè½½å‡è¡¡é…ç½®è´Ÿè½½å‡è¡¡ä¸»è¦æ˜¯è¦ä½¿ç”¨ upstream æŒ‡ä»¤ã€‚ æˆ‘ä»¬æŠŠ 121.42.11.34 æœåŠ¡å™¨ä½œä¸ºä¸Šæ¸¸æœåŠ¡å™¨ï¼Œåšå¦‚ä¸‹é…ç½®ï¼ˆ /etc/nginx/conf.d/balance.conf ï¼‰ï¼š server{ listen 8020; location / { return 200 'return 8020 \\n'; } } server{ listen 8030; location / { return 200 'return 8030 \\n'; } } server{ listen 8040; location / { return 200 'return 8040 \\n'; } } é…ç½®å®Œæˆåï¼š nginx -t æ£€æµ‹é…ç½®æ˜¯å¦æ­£ç¡®ï¼› nginx -s reload é‡å¯ Nginx æœåŠ¡å™¨ï¼› æ‰§è¡Œ ss -nlt å‘½ä»¤æŸ¥çœ‹ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œä»è€Œåˆ¤æ–­ Nginx æœåŠ¡æ˜¯å¦æ­£ç¡®å¯åŠ¨ã€‚ æŠŠ 121.5.180.193 æœåŠ¡å™¨ä½œä¸ºä»£ç†æœåŠ¡å™¨ï¼Œåšå¦‚ä¸‹é…ç½®ï¼ˆ /etc/nginx/conf.d/balance.conf ï¼‰ï¼š upstream demo_server { server 121.42.11.34:8020; server 121.42.11.34:8030; server 121.42.11.34:8040; } server { listen 80; server_name balance.lion.club; location /balance/ { proxy_pass http://demo_server; } } é…ç½®å®Œæˆåé‡å¯ Nginx æœåŠ¡å™¨ã€‚å¹¶ä¸”åœ¨éœ€è¦è®¿é—®çš„å®¢æˆ·ç«¯é…ç½®å¥½ ip å’ŒåŸŸåçš„æ˜ å°„å…³ç³»ã€‚ # /etc/hosts 121.5.180.193 balance.lion.club åœ¨å®¢æˆ·ç«¯æœºå™¨æ‰§è¡Œ curl http://balance.lion.club/balance/ å‘½ä»¤ï¼š ä¸éš¾çœ‹å‡ºï¼Œè´Ÿè½½å‡è¡¡çš„é…ç½®å·²ç»ç”Ÿæ•ˆäº†ï¼Œæ¯æ¬¡ç»™æˆ‘ä»¬åˆ†å‘çš„ä¸Šæ¸¸æœåŠ¡å™¨éƒ½ä¸ä¸€æ ·ã€‚å°±æ˜¯é€šè¿‡ç®€å•çš„è½®è¯¢ç­–ç•¥è¿›è¡Œä¸Šæ¸¸æœåŠ¡å™¨åˆ†å‘ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥äº†è§£ä¸‹ Nginx çš„å…¶å®ƒåˆ†å‘ç­–ç•¥ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:8:4","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®è´Ÿè½½å‡è¡¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" hash ç®—æ³•é€šè¿‡åˆ¶å®šå…³é”®å­—ä½œä¸º hash key ï¼ŒåŸºäº hash ç®—æ³•æ˜ å°„åˆ°ç‰¹å®šçš„ä¸Šæ¸¸æœåŠ¡å™¨ä¸­ã€‚å…³é”®å­—å¯ä»¥åŒ…å«æœ‰å˜é‡ã€å­—ç¬¦ä¸²ã€‚ upstream demo_server { hash $request_uri; server 121.42.11.34:8020; server 121.42.11.34:8030; server 121.42.11.34:8040; } server { listen 80; server_name balance.lion.club; location /balance/ { proxy_pass http://demo_server; } } hash $request_uri è¡¨ç¤ºä½¿ç”¨ request_uri å˜é‡ä½œä¸º hash çš„ key å€¼ï¼Œåªè¦è®¿é—®çš„ URI ä¿æŒä¸å˜ï¼Œå°±ä¼šä¸€ç›´åˆ†å‘ç»™åŒä¸€å°æœåŠ¡å™¨ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:8:5","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#hash-ç®—æ³•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ip_hashæ ¹æ®å®¢æˆ·ç«¯çš„è¯·æ±‚ ip è¿›è¡Œåˆ¤æ–­ï¼Œåªè¦ ip åœ°å€ä¸å˜å°±æ°¸è¿œåˆ†é…åˆ°åŒä¸€å°ä¸»æœºã€‚å®ƒå¯ä»¥æœ‰æ•ˆè§£å†³åå°æœåŠ¡å™¨ session ä¿æŒçš„é—®é¢˜ã€‚ upstream demo_server { ip_hash; server 121.42.11.34:8020; server 121.42.11.34:8030; server 121.42.11.34:8040; } server { listen 80; server_name balance.lion.club; location /balance/ { proxy_pass http://demo_server; } } ","date":"2021-05-06","objectID":"/nginx-glance/:8:6","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#ip_hash"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æœ€å°‘è¿æ¥æ•°ç®—æ³•å„ä¸ª worker å­è¿›ç¨‹é€šè¿‡è¯»å–å…±äº«å†…å­˜çš„æ•°æ®ï¼Œæ¥è·å–åç«¯æœåŠ¡å™¨çš„ä¿¡æ¯ã€‚æ¥æŒ‘é€‰ä¸€å°å½“å‰å·²å»ºç«‹è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨è¿›è¡Œåˆ†é…è¯·æ±‚ã€‚ è¯­æ³•ï¼šleast_conn; ä¸Šä¸‹æ–‡ï¼šupstream; ç¤ºä¾‹ï¼š upstream demo_server { zone test 10M; # zoneå¯ä»¥è®¾ç½®å…±äº«å†…å­˜ç©ºé—´çš„åå­—å’Œå¤§å° least_conn; server 121.42.11.34:8020; server 121.42.11.34:8030; server 121.42.11.34:8040; } server { listen 80; server_name balance.lion.club; location /balance/ { proxy_pass http://demo_server; } } æœ€åä½ ä¼šå‘ç°ï¼Œè´Ÿè½½å‡è¡¡çš„é…ç½®å…¶å®ä¸€ç‚¹éƒ½ä¸å¤æ‚ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:8:7","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#æœ€å°‘è¿æ¥æ•°ç®—æ³•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®ç¼“å­˜ç¼“å­˜å¯ä»¥éå¸¸æœ‰æ•ˆçš„æå‡æ€§èƒ½ï¼Œå› æ­¤ä¸è®ºæ˜¯å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œè¿˜æ˜¯ä»£ç†æœåŠ¡å™¨ï¼ˆ Nginx ï¼‰ï¼Œä¹ƒè‡³ä¸Šæ¸¸æœåŠ¡å™¨éƒ½å¤šå°‘ä¼šæ¶‰åŠåˆ°ç¼“å­˜ã€‚å¯è§ç¼“å­˜åœ¨æ¯ä¸ªç¯èŠ‚éƒ½æ˜¯éå¸¸é‡è¦çš„ã€‚ä¸‹é¢è®©æˆ‘ä»¬æ¥å­¦ä¹  Nginx ä¸­å¦‚ä½•è®¾ç½®ç¼“å­˜ç­–ç•¥ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:9:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®ç¼“å­˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" proxy_cacheå­˜å‚¨ä¸€äº›ä¹‹å‰è¢«è®¿é—®è¿‡ã€è€Œä¸”å¯èƒ½å°†è¦è¢«å†æ¬¡è®¿é—®çš„èµ„æºï¼Œä½¿ç”¨æˆ·å¯ä»¥ç›´æ¥ä»ä»£ç†æœåŠ¡å™¨è·å¾—ï¼Œä»è€Œå‡å°‘ä¸Šæ¸¸æœåŠ¡å™¨çš„å‹åŠ›ï¼ŒåŠ å¿«æ•´ä¸ªè®¿é—®é€Ÿåº¦ã€‚ è¯­æ³•ï¼šproxy_cache zone | off ; # zone æ˜¯å…±äº«å†…å­˜çš„åç§° é»˜è®¤å€¼ï¼šproxy_cache off; ä¸Šä¸‹æ–‡ï¼šhttpã€serverã€location ","date":"2021-05-06","objectID":"/nginx-glance/:9:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#proxy_cache"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" proxy_cache_pathè®¾ç½®ç¼“å­˜æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ã€‚ è¯­æ³•ï¼šproxy_cache_path path [level=levels] ...å¯é€‰å‚æ•°çœç•¥ï¼Œä¸‹é¢ä¼šè¯¦ç»†åˆ—ä¸¾ é»˜è®¤å€¼ï¼šproxy_cache_path off ä¸Šä¸‹æ–‡ï¼šhttp å‚æ•°å«ä¹‰ï¼š path ç¼“å­˜æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼› level path çš„ç›®å½•å±‚çº§ï¼› keys_zone è®¾ç½®å…±äº«å†…å­˜ï¼› inactive åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰è¢«è®¿é—®ï¼Œç¼“å­˜ä¼šè¢«æ¸…ç†ï¼Œé»˜è®¤10åˆ†é’Ÿï¼› ","date":"2021-05-06","objectID":"/nginx-glance/:9:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#proxy_cache_path"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" proxy_cache_keyè®¾ç½®ç¼“å­˜æ–‡ä»¶çš„ key ã€‚ è¯­æ³•ï¼šproxy_cache_key é»˜è®¤å€¼ï¼šproxy_cache_key $scheme$proxy_host$request_uri; ä¸Šä¸‹æ–‡ï¼šhttpã€serverã€location ","date":"2021-05-06","objectID":"/nginx-glance/:9:3","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#proxy_cache_key"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" proxy_cache_validé…ç½®ä»€ä¹ˆçŠ¶æ€ç å¯ä»¥è¢«ç¼“å­˜ï¼Œä»¥åŠç¼“å­˜æ—¶é•¿ã€‚ è¯­æ³•ï¼šproxy_cache_valid [code...] time; ä¸Šä¸‹æ–‡ï¼šhttpã€serverã€location é…ç½®ç¤ºä¾‹ï¼šproxy_cache_valid 200 304 2m;; # è¯´æ˜å¯¹äºçŠ¶æ€ä¸º200å’Œ304çš„ç¼“å­˜æ–‡ä»¶çš„ç¼“å­˜æ—¶é—´æ˜¯2åˆ†é’Ÿ ","date":"2021-05-06","objectID":"/nginx-glance/:9:4","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#proxy_cache_valid"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" proxy_no_cacheå®šä¹‰ç›¸åº”ä¿å­˜åˆ°ç¼“å­˜çš„æ¡ä»¶ï¼Œå¦‚æœå­—ç¬¦ä¸²å‚æ•°çš„è‡³å°‘ä¸€ä¸ªå€¼ä¸ä¸ºç©ºä¸”ä¸ç­‰äºâ€œ 0â€ï¼Œåˆ™å°†ä¸ä¿å­˜è¯¥å“åº”åˆ°ç¼“å­˜ã€‚ è¯­æ³•ï¼šproxy_no_cache string; ä¸Šä¸‹æ–‡ï¼šhttpã€serverã€location ç¤ºä¾‹ï¼šproxy_no_cache $http_pragma $http_authorization; ","date":"2021-05-06","objectID":"/nginx-glance/:9:5","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#proxy_no_cache"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" proxy_cache_bypasså®šä¹‰æ¡ä»¶ï¼Œåœ¨è¯¥æ¡ä»¶ä¸‹å°†ä¸ä¼šä»ç¼“å­˜ä¸­è·å–å“åº”ã€‚ è¯­æ³•ï¼šproxy_cache_bypass string; ä¸Šä¸‹æ–‡ï¼šhttpã€serverã€location ç¤ºä¾‹ï¼šproxy_cache_bypass $http_pragma $http_authorization; ","date":"2021-05-06","objectID":"/nginx-glance/:9:6","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#proxy_cache_bypass"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" upstream_cache_status å˜é‡å®ƒå­˜å‚¨äº†ç¼“å­˜æ˜¯å¦å‘½ä¸­çš„ä¿¡æ¯ï¼Œä¼šè®¾ç½®åœ¨å“åº”å¤´ä¿¡æ¯ä¸­ï¼Œåœ¨è°ƒè¯•ä¸­éå¸¸æœ‰ç”¨ã€‚ MISS: æœªå‘½ä¸­ç¼“å­˜ HITï¼š å‘½ä¸­ç¼“å­˜ EXPIRED: ç¼“å­˜è¿‡æœŸ STALE: å‘½ä¸­äº†é™ˆæ—§ç¼“å­˜ REVALIDDATED: NginxéªŒè¯é™ˆæ—§ç¼“å­˜ä¾ç„¶æœ‰æ•ˆ UPDATING: å†…å®¹é™ˆæ—§ï¼Œä½†æ­£åœ¨æ›´æ–° BYPASS: Xå“åº”ä»åŸå§‹æœåŠ¡å™¨è·å– ","date":"2021-05-06","objectID":"/nginx-glance/:9:7","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#upstream_cache_status-å˜é‡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®å®ä¾‹æˆ‘ä»¬æŠŠ 121.42.11.34 æœåŠ¡å™¨ä½œä¸ºä¸Šæ¸¸æœåŠ¡å™¨ï¼Œåšå¦‚ä¸‹é…ç½®ï¼ˆ /etc/nginx/conf.d/cache.conf ï¼‰ï¼š server { listen 1010; root /usr/share/nginx/html/1010; location / { index index.html; } } server { listen 1020; root /usr/share/nginx/html/1020; location / { index index.html; } } æŠŠ 121.5.180.193 æœåŠ¡å™¨ä½œä¸ºä»£ç†æœåŠ¡å™¨ï¼Œåšå¦‚ä¸‹é…ç½®ï¼ˆ /etc/nginx/conf.d/cache.conf ï¼‰ï¼š proxy_cache_path /etc/nginx/cache_temp levels=2:2 keys_zone=cache_zone:30m max_size=2g inactive=60m use_temp_path=off; upstream cache_server{ server 121.42.11.34:1010; server 121.42.11.34:1020; } server { listen 80; server_name cache.lion.club; location / { proxy_cache cache_zone; # è®¾ç½®ç¼“å­˜å†…å­˜ï¼Œä¸Šé¢é…ç½®ä¸­å·²ç»å®šä¹‰å¥½çš„ proxy_cache_valid 200 5m; # ç¼“å­˜çŠ¶æ€ä¸º200çš„è¯·æ±‚ï¼Œç¼“å­˜æ—¶é•¿ä¸º5åˆ†é’Ÿ proxy_cache_key $request_uri; # ç¼“å­˜æ–‡ä»¶çš„keyä¸ºè¯·æ±‚çš„URI add_header Nginx-Cache-Status $upstream_cache_status # æŠŠç¼“å­˜çŠ¶æ€è®¾ç½®ä¸ºå¤´éƒ¨ä¿¡æ¯ï¼Œå“åº”ç»™å®¢æˆ·ç«¯ proxy_pass http://cache_server; # ä»£ç†è½¬å‘ } } ç¼“å­˜å°±æ˜¯è¿™æ ·é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ /etc/nginx/cache_temp è·¯å¾„ä¸‹æ‰¾åˆ°ç›¸åº”çš„ç¼“å­˜æ–‡ä»¶ã€‚ å¯¹äºä¸€äº›å®æ—¶æ€§è¦æ±‚éå¸¸é«˜çš„é¡µé¢æˆ–æ•°æ®æ¥è¯´ï¼Œå°±ä¸åº”è¯¥å»è®¾ç½®ç¼“å­˜ï¼Œä¸‹é¢æ¥çœ‹çœ‹å¦‚ä½•é…ç½®ä¸ç¼“å­˜çš„å†…å®¹ã€‚ ... server { listen 80; server_name cache.lion.club; # URI ä¸­åç¼€ä¸º .txt æˆ– .text çš„è®¾ç½®å˜é‡å€¼ä¸º \"no cache\" if ($request_uri ~ \\.(txt|text)$) { set $cache_name \"no cache\" } location / { proxy_no_cache $cache_name; # åˆ¤æ–­è¯¥å˜é‡æ˜¯å¦æœ‰å€¼ï¼Œå¦‚æœæœ‰å€¼åˆ™ä¸è¿›è¡Œç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰å€¼åˆ™è¿›è¡Œç¼“å­˜ proxy_cache cache_zone; # è®¾ç½®ç¼“å­˜å†…å­˜ proxy_cache_valid 200 5m; # ç¼“å­˜çŠ¶æ€ä¸º200çš„è¯·æ±‚ï¼Œç¼“å­˜æ—¶é•¿ä¸º5åˆ†é’Ÿ proxy_cache_key $request_uri; # ç¼“å­˜æ–‡ä»¶çš„keyä¸ºè¯·æ±‚çš„URI add_header Nginx-Cache-Status $upstream_cache_status # æŠŠç¼“å­˜çŠ¶æ€è®¾ç½®ä¸ºå¤´éƒ¨ä¿¡æ¯ï¼Œå“åº”ç»™å®¢æˆ·ç«¯ proxy_pass http://cache_server; # ä»£ç†è½¬å‘ } } ","date":"2021-05-06","objectID":"/nginx-glance/:9:8","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®å®ä¾‹-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" HTTPSåœ¨å­¦ä¹ å¦‚ä½•é…ç½® HTTPS ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥ç®€å•å›é¡¾ä¸‹ HTTPS çš„å·¥ä½œæµç¨‹æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿå®ƒæ˜¯å¦‚ä½•è¿›è¡ŒåŠ å¯†ä¿è¯å®‰å…¨çš„ï¼Ÿ ","date":"2021-05-06","objectID":"/nginx-glance/:10:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#https"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" HTTPS å·¥ä½œæµç¨‹ å®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰è®¿é—® https://www.baidu.com ç™¾åº¦ç½‘ç«™ï¼› ç™¾åº¦æœåŠ¡å™¨è¿”å› HTTPS ä½¿ç”¨çš„ CA è¯ä¹¦ï¼› æµè§ˆå™¨éªŒè¯ CA è¯ä¹¦æ˜¯å¦ä¸ºåˆæ³•è¯ä¹¦ï¼› éªŒè¯é€šè¿‡ï¼Œè¯ä¹¦åˆæ³•ï¼Œç”Ÿæˆä¸€ä¸²éšæœºæ•°å¹¶ä½¿ç”¨å…¬é’¥ï¼ˆè¯ä¹¦ä¸­æä¾›çš„ï¼‰è¿›è¡ŒåŠ å¯†ï¼› å‘é€å…¬é’¥åŠ å¯†åçš„éšæœºæ•°ç»™ç™¾åº¦æœåŠ¡å™¨ï¼› ç™¾åº¦æœåŠ¡å™¨æ‹¿åˆ°å¯†æ–‡ï¼Œé€šè¿‡ç§é’¥è¿›è¡Œè§£å¯†ï¼Œè·å–åˆ°éšæœºæ•°ï¼ˆå…¬é’¥åŠ å¯†ï¼Œç§é’¥è§£å¯†ï¼Œåä¹‹ä¹Ÿå¯ä»¥ï¼‰ï¼› ç™¾åº¦æœåŠ¡å™¨æŠŠè¦å‘é€ç»™æµè§ˆå™¨çš„å†…å®¹ï¼Œä½¿ç”¨éšæœºæ•°è¿›è¡ŒåŠ å¯†åä¼ è¾“ç»™æµè§ˆå™¨ï¼› æ­¤æ—¶æµè§ˆå™¨å¯ä»¥ä½¿ç”¨éšæœºæ•°è¿›è¡Œè§£å¯†ï¼Œè·å–åˆ°æœåŠ¡å™¨çš„çœŸå®ä¼ è¾“å†…å®¹ï¼› è¿™å°±æ˜¯ HTTPS çš„åŸºæœ¬è¿ä½œåŸç†ï¼Œä½¿ç”¨å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°æœºå¯†é…åˆä½¿ç”¨ï¼Œä¿è¯ä¼ è¾“å†…å®¹çš„å®‰å…¨æ€§ã€‚ å…³äºHTTPSæ›´å¤šçŸ¥è¯†ï¼Œå¯ä»¥æŸ¥çœ‹ä½œè€…çš„å¦å¤–ä¸€ç¯‡æ–‡ç« ã€Šå­¦ä¹  HTTP åè®®ã€‹ ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:10:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#https-å·¥ä½œæµç¨‹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®è¯ä¹¦ä¸‹è½½è¯ä¹¦çš„å‹ç¼©æ–‡ä»¶ï¼Œé‡Œé¢æœ‰ä¸ª Nginx æ–‡ä»¶å¤¹ï¼ŒæŠŠ xxx.crt å’Œ xxx.key æ–‡ä»¶æ‹·è´åˆ°æœåŠ¡å™¨ç›®å½•ï¼Œå†è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š server { listen 443 ssl http2 default_server; # SSL è®¿é—®ç«¯å£å·ä¸º 443 server_name lion.club; # å¡«å†™ç»‘å®šè¯ä¹¦çš„åŸŸå(æˆ‘è¿™é‡Œæ˜¯éšä¾¿å†™çš„) ssl_certificate /etc/nginx/https/lion.club_bundle.crt; # è¯ä¹¦åœ°å€ ssl_certificate_key /etc/nginx/https/lion.club.key; # ç§é’¥åœ°å€ ssl_session_timeout 10m; ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # æ”¯æŒsslåè®®ç‰ˆæœ¬ï¼Œé»˜è®¤ä¸ºåä¸‰ä¸ªï¼Œä¸»æµç‰ˆæœ¬æ˜¯[TLSv1.2] location / { root /usr/share/nginx/html; index index.html index.htm; } } å¦‚æ­¤é…ç½®åå°±èƒ½æ­£å¸¸è®¿é—® HTTPS ç‰ˆçš„ç½‘ç«™äº†ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:10:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®è¯ä¹¦"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®è·¨åŸŸ CORSå…ˆç®€å•å›é¡¾ä¸‹è·¨åŸŸç©¶ç«Ÿæ˜¯æ€ä¹ˆå›äº‹ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:11:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®è·¨åŸŸ-cors"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è·¨åŸŸçš„å®šä¹‰åŒæºç­–ç•¥é™åˆ¶äº†ä»åŒä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„é‡è¦å®‰å…¨æœºåˆ¶ã€‚é€šå¸¸ä¸å…è®¸ä¸åŒæºé—´çš„è¯»æ“ä½œã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:11:1","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#è·¨åŸŸçš„å®šä¹‰"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åŒæºçš„å®šä¹‰å¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’ŒåŸŸåéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„æºã€‚ ä¸‹é¢ç»™å‡ºäº†ä¸ URL http://store.company.com/dir/page.html çš„æºè¿›è¡Œå¯¹æ¯”çš„ç¤ºä¾‹: http://store.company.com/dir2/other.html åŒæº https://store.company.com/secure.html ä¸åŒæºï¼Œåè®®ä¸åŒ http://store.company.com:81/dir/etc.html ä¸åŒæºï¼Œç«¯å£ä¸åŒ http://news.company.com/dir/other.html ä¸åŒæºï¼Œä¸»æœºä¸åŒ ä¸åŒæºä¼šæœ‰å¦‚ä¸‹é™åˆ¶ï¼š Web æ•°æ®å±‚é¢ï¼ŒåŒæºç­–ç•¥é™åˆ¶äº†ä¸åŒæºçš„ç«™ç‚¹è¯»å–å½“å‰ç«™ç‚¹çš„ Cookie ã€ IndexDB ã€ LocalStorage ç­‰æ•°æ®ã€‚ DOM å±‚é¢ï¼ŒåŒæºç­–ç•¥é™åˆ¶äº†æ¥è‡ªä¸åŒæºçš„ JavaScript è„šæœ¬å¯¹å½“å‰ DOM å¯¹è±¡è¯»å’Œå†™çš„æ“ä½œã€‚ ç½‘ç»œå±‚é¢ï¼ŒåŒæºç­–ç•¥é™åˆ¶äº†é€šè¿‡ XMLHttpRequest ç­‰æ–¹å¼å°†ç«™ç‚¹çš„æ•°æ®å‘é€ç»™ä¸åŒæºçš„ç«™ç‚¹ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:11:2","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#åŒæºçš„å®šä¹‰"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx è§£å†³è·¨åŸŸçš„åŸç†ä¾‹å¦‚ï¼š å‰ç«¯ server çš„åŸŸåä¸ºï¼š fe.server.com åç«¯æœåŠ¡çš„åŸŸåä¸ºï¼š dev.server.com ç°åœ¨æˆ‘åœ¨ fe.server.com å¯¹ dev.server.com å‘èµ·è¯·æ±‚ä¸€å®šä¼šå‡ºç°è·¨åŸŸã€‚ ç°åœ¨æˆ‘ä»¬åªéœ€è¦å¯åŠ¨ä¸€ä¸ª Nginx æœåŠ¡å™¨ï¼Œå°† server_name è®¾ç½®ä¸º fe.server.com ç„¶åè®¾ç½®ç›¸åº”çš„ location ä»¥æ‹¦æˆªå‰ç«¯éœ€è¦è·¨åŸŸçš„è¯·æ±‚ï¼Œæœ€åå°†è¯·æ±‚ä»£ç†å› dev.server.com ã€‚å¦‚ä¸‹é¢çš„é…ç½®ï¼š server { listen 80; server_name fe.server.com; location / { proxy_pass dev.server.com; } } è¿™æ ·å¯ä»¥å®Œç¾ç»•è¿‡æµè§ˆå™¨çš„åŒæºç­–ç•¥ï¼š fe.server.com è®¿é—® Nginx çš„ fe.server.com å±äºåŒæºè®¿é—®ï¼Œè€Œ Nginx å¯¹æœåŠ¡ç«¯è½¬å‘çš„è¯·æ±‚ä¸ä¼šè§¦å‘æµè§ˆå™¨çš„åŒæºç­–ç•¥ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:11:3","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-è§£å†³è·¨åŸŸçš„åŸç†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®å¼€å¯ gzip å‹ç¼©GZIP æ˜¯è§„å®šçš„ä¸‰ç§æ ‡å‡† HTTP å‹ç¼©æ ¼å¼ä¹‹ä¸€ã€‚ç›®å‰ç»å¤§å¤šæ•°çš„ç½‘ç«™éƒ½åœ¨ä½¿ç”¨ GZIP ä¼ è¾“ HTML ã€CSS ã€ JavaScript ç­‰èµ„æºæ–‡ä»¶ã€‚ å¯¹äºæ–‡æœ¬æ–‡ä»¶ï¼Œ GZiP çš„æ•ˆæœéå¸¸æ˜æ˜¾ï¼Œå¼€å¯åä¼ è¾“æ‰€éœ€æµé‡å¤§çº¦ä¼šé™è‡³ 1/4~1/3 ã€‚ å¹¶ä¸æ˜¯æ¯ä¸ªæµè§ˆå™¨éƒ½æ”¯æŒ gzip çš„ï¼Œå¦‚ä½•çŸ¥é“å®¢æˆ·ç«¯æ˜¯å¦æ”¯æŒ gzip å‘¢ï¼Œè¯·æ±‚å¤´ä¸­çš„ Accept-Encoding æ¥æ ‡è¯†å¯¹å‹ç¼©çš„æ”¯æŒã€‚ å¯ç”¨ gzip åŒæ—¶éœ€è¦å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„æ”¯æŒï¼Œå¦‚æœå®¢æˆ·ç«¯æ”¯æŒ gzip çš„è§£æï¼Œé‚£ä¹ˆåªè¦æœåŠ¡ç«¯èƒ½å¤Ÿè¿”å› gzip çš„æ–‡ä»¶å°±å¯ä»¥å¯ç”¨ gzip äº†,æˆ‘ä»¬å¯ä»¥é€šè¿‡ Nginx çš„é…ç½®æ¥è®©æœåŠ¡ç«¯æ”¯æŒ gzip ã€‚ä¸‹é¢çš„ respone ä¸­ content-encoding:gzip ï¼ŒæŒ‡æœåŠ¡ç«¯å¼€å¯äº† gzip çš„å‹ç¼©æ–¹å¼ã€‚ åœ¨ /etc/nginx/conf.d/ æ–‡ä»¶å¤¹ä¸­æ–°å»ºé…ç½®æ–‡ä»¶ gzip.conf ï¼š # # é»˜è®¤offï¼Œæ˜¯å¦å¼€å¯gzip gzip on; # è¦é‡‡ç”¨ gzip å‹ç¼©çš„ MIME æ–‡ä»¶ç±»å‹ï¼Œå…¶ä¸­ text/html è¢«ç³»ç»Ÿå¼ºåˆ¶å¯ç”¨ï¼› gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/xml+rss text/javascript; # ---- ä»¥ä¸Šä¸¤ä¸ªå‚æ•°å¼€å¯å°±å¯ä»¥æ”¯æŒGzipå‹ç¼©äº† ---- # # é»˜è®¤ offï¼Œè¯¥æ¨¡å—å¯ç”¨åï¼ŒNginx é¦–å…ˆæ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯·æ±‚é™æ€æ–‡ä»¶çš„ gz ç»“å°¾çš„æ–‡ä»¶ï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥è¿”å›è¯¥ .gz æ–‡ä»¶å†…å®¹ï¼› gzip_static on; # é»˜è®¤ offï¼Œnginxåšä¸ºåå‘ä»£ç†æ—¶å¯ç”¨ï¼Œç”¨äºè®¾ç½®å¯ç”¨æˆ–ç¦ç”¨ä»ä»£ç†æœåŠ¡å™¨ä¸Šæ”¶åˆ°ç›¸åº”å†…å®¹ gzip å‹ç¼©ï¼› gzip_proxied any; # ç”¨äºåœ¨å“åº”æ¶ˆæ¯å¤´ä¸­æ·»åŠ  Varyï¼šAccept-Encodingï¼Œä½¿ä»£ç†æœåŠ¡å™¨æ ¹æ®è¯·æ±‚å¤´ä¸­çš„ Accept-Encoding è¯†åˆ«æ˜¯å¦å¯ç”¨ gzip å‹ç¼©ï¼› gzip_vary on; # gzip å‹ç¼©æ¯”ï¼Œå‹ç¼©çº§åˆ«æ˜¯ 1-9ï¼Œ1 å‹ç¼©çº§åˆ«æœ€ä½ï¼Œ9 æœ€é«˜ï¼Œçº§åˆ«è¶Šé«˜å‹ç¼©ç‡è¶Šå¤§ï¼Œå‹ç¼©æ—¶é—´è¶Šé•¿ï¼Œå»ºè®® 4-6ï¼› gzip_comp_level 6; # è·å–å¤šå°‘å†…å­˜ç”¨äºç¼“å­˜å‹ç¼©ç»“æœï¼Œ16 8k è¡¨ç¤ºä»¥ 8k*16 ä¸ºå•ä½è·å¾—ï¼› gzip_buffers 16 8k; # å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°ï¼Œé¡µé¢å­—èŠ‚æ•°ä»headerå¤´ä¸­çš„ Content-Length ä¸­è¿›è¡Œè·å–ã€‚é»˜è®¤å€¼æ˜¯ 0ï¼Œä¸ç®¡é¡µé¢å¤šå¤§éƒ½å‹ç¼©ã€‚å»ºè®®è®¾ç½®æˆå¤§äº 1k çš„å­—èŠ‚æ•°ï¼Œå°äº 1k å¯èƒ½ä¼šè¶Šå‹è¶Šå¤§ï¼› # gzip_min_length 1k; # é»˜è®¤ 1.1ï¼Œå¯ç”¨ gzip æ‰€éœ€çš„ HTTP æœ€ä½ç‰ˆæœ¬ï¼› gzip_http_version 1.1; å…¶å®ä¹Ÿå¯ä»¥é€šè¿‡å‰ç«¯æ„å»ºå·¥å…·ä¾‹å¦‚ webpack ã€rollup ç­‰åœ¨æ‰“ç”Ÿäº§åŒ…æ—¶å°±åšå¥½ Gzip å‹ç¼©ï¼Œç„¶åæ”¾åˆ° Nginx æœåŠ¡å™¨ä¸­ï¼Œè¿™æ ·å¯ä»¥å‡å°‘æœåŠ¡å™¨çš„å¼€é”€ï¼ŒåŠ å¿«è®¿é—®é€Ÿåº¦ã€‚ å…³äº Nginx çš„å®é™…åº”ç”¨å°±å­¦ä¹ åˆ°è¿™é‡Œï¼Œç›¸ä¿¡é€šè¿‡æŒæ¡äº† Nginx æ ¸å¿ƒé…ç½®ä»¥åŠå®æˆ˜é…ç½®ï¼Œä¹‹åå†é‡åˆ°ä»€ä¹ˆéœ€æ±‚ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½è½»æ¾åº”å¯¹ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬å†æ·±å…¥ä¸€ç‚¹å­¦ä¹ ä¸‹ Nginx çš„æ¶æ„ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:12:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®å¼€å¯-gzip-å‹ç¼©"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx æ¶æ„","date":"2021-05-06","objectID":"/nginx-glance/:13:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-æ¶æ„"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è¿›ç¨‹ç»“æ„å¤šè¿›ç¨‹ç»“æ„ Nginx çš„è¿›ç¨‹æ¨¡å‹å›¾ï¼š å¤šè¿›ç¨‹ä¸­çš„ Nginx è¿›ç¨‹æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¼šæœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹ï¼ˆ Master Process ï¼‰ï¼Œå®ƒä¼šæœ‰å¾ˆå¤šå­è¿›ç¨‹ï¼ˆ Child Processes ï¼‰ã€‚ Master Process ç”¨æ¥ç®¡ç†å­è¿›ç¨‹çš„ï¼Œå…¶æœ¬èº«å¹¶ä¸çœŸæ­£å¤„ç†ç”¨æˆ·è¯·æ±‚ã€‚ æŸä¸ªå­è¿›ç¨‹ down æ‰çš„è¯ï¼Œå®ƒä¼šå‘ Master è¿›ç¨‹å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œè¡¨æ˜è‡ªå·±ä¸å¯ç”¨äº†ï¼Œæ­¤æ—¶ Master è¿›ç¨‹ä¼šå»æ–°èµ·ä¸€ä¸ªå­è¿›ç¨‹ã€‚ æŸä¸ªé…ç½®æ–‡ä»¶è¢«ä¿®æ”¹äº† Master è¿›ç¨‹ä¼šå»é€šçŸ¥ work è¿›ç¨‹è·å–æ–°çš„é…ç½®ä¿¡æ¯ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„çƒ­éƒ¨ç½²ã€‚ å­è¿›ç¨‹é—´æ˜¯é€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼è¿›è¡Œé€šä¿¡çš„ã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:14:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#è¿›ç¨‹ç»“æ„"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®æ–‡ä»¶é‡è½½åŸç†reload é‡è½½é…ç½®æ–‡ä»¶çš„æµç¨‹ï¼š å‘ master è¿›ç¨‹å‘é€ HUP ä¿¡å·ï¼ˆ reload å‘½ä»¤ï¼‰ï¼› master è¿›ç¨‹æ£€æŸ¥é…ç½®è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼› master è¿›ç¨‹æ‰“å¼€ç›‘å¬ç«¯å£ï¼› master è¿›ç¨‹ä½¿ç”¨æ–°çš„é…ç½®æ–‡ä»¶å¯åŠ¨æ–°çš„ worker å­è¿›ç¨‹ï¼› master è¿›ç¨‹å‘è€çš„ worker å­è¿›ç¨‹å‘é€ QUIT ä¿¡å·ï¼› è€çš„ worker è¿›ç¨‹å…³é—­ç›‘å¬å¥æŸ„ï¼Œå¤„ç†å®Œå½“å‰è¿æ¥åå…³é—­è¿›ç¨‹ï¼› æ•´ä¸ªè¿‡ç¨‹ Nginx å§‹ç»ˆå¤„äºå¹³ç¨³è¿è¡Œä¸­ï¼Œå®ç°äº†å¹³æ»‘å‡çº§ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥ï¼› ","date":"2021-05-06","objectID":"/nginx-glance/:15:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#é…ç½®æ–‡ä»¶é‡è½½åŸç†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Nginx æ¨¡å—åŒ–ç®¡ç†æœºåˆ¶Nginx çš„å†…éƒ¨ç»“æ„æ˜¯ç”±æ ¸å¿ƒéƒ¨åˆ†å’Œä¸€ç³»åˆ—çš„åŠŸèƒ½æ¨¡å—æ‰€ç»„æˆã€‚è¿™æ ·åˆ’åˆ†æ˜¯ä¸ºäº†ä½¿å¾—æ¯ä¸ªæ¨¡å—çš„åŠŸèƒ½ç›¸å¯¹ç®€å•ï¼Œä¾¿äºå¼€å‘ï¼ŒåŒæ—¶ä¹Ÿä¾¿äºå¯¹ç³»ç»Ÿè¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚Nginx çš„æ¨¡å—æ˜¯äº’ç›¸ç‹¬ç«‹çš„,ä½è€¦åˆé«˜å†…èšã€‚ ","date":"2021-05-06","objectID":"/nginx-glance/:16:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#nginx-æ¨¡å—åŒ–ç®¡ç†æœºåˆ¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ ä¸‡å­—æ€»ç»“ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx ï¼ ","date":"2021-05-06","objectID":"/nginx-glance/:17:0","series":["reproduce"],"tags":["nginx"],"title":"Nginx ç¬”è®°ï¼Œä½“ç³»åŒ–å¸¦ä½ å…¨é¢è®¤è¯† Nginx","uri":"/nginx-glance/#å‚è€ƒ"},{"categories":["python"],"content":"xiaobinqt","date":"2021-05-06","objectID":"/py-glance/","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/"},{"categories":["python"],"content":" å®‰è£… pip","date":"2021-05-06","objectID":"/py-glance/:1:0","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#å®‰è£…-pip"},{"categories":["python"],"content":" å®‰è£… pip3ç¯å¢ƒä¸º armv7l apt-get install python3-pip å®‰è£… pip3 å®‰è£…æˆåŠŸ ","date":"2021-05-06","objectID":"/py-glance/:1:1","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#å®‰è£…-pip3"},{"categories":["python"],"content":" å®‰è£… pipå¯¹äº python2 æ¥è¯´å¯ä»¥å®‰è£… pipï¼š apt install python-pip ","date":"2021-05-06","objectID":"/py-glance/:1:2","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#å®‰è£…-pip-1"},{"categories":["python"],"content":" conda å’Œ pip çš„åŒºåˆ« pip ä»…ä»…æ˜¯åŒ…ç®¡ç†å·¥å…·ï¼Œè€Œ conda ä¸ä»…ä»…æ˜¯åŒ…ç®¡ç†å·¥å…·ï¼Œconda çš„åŠŸèƒ½æ¯” pip æ›´å¤šã€‚ pip ä»…é™äº python åŒ…çš„å®‰è£…æ›´æ–°å¸è½½ï¼Œconda åŒ…æ‹¬ä¸”ä¸é™äº Pythonã€Cã€R ç­‰è¯­è¨€ã€‚ pip èƒ½å®‰è£… pypi é‡Œçš„ä¸€åˆ‡ python åŒ…ã€‚è€Œ conda å¯å®‰è£…çš„ python åŒ…æ•°é‡ç›¸æ¯” pip è¦å°‘å¾ˆå¤šã€‚ pip ä¸æ”¯æŒåˆ›å»º python è™šæ‹Ÿç¯å¢ƒï¼Œå¾—å®‰è£…äº† virtualenv åŒ…æ‰å¯ä»¥ï¼Œè€Œ conda æ”¯æŒåˆ›å»º python è™šæ‹Ÿç¯å¢ƒã€‚ pip install -r requirements.txtæ›´åŠ æµç•…ï¼Œè€Œ conda install -ræ—¶ä¸€æ—¦æœªæ‰¾åˆ°æŸä¸ªåŒ…ï¼Œä¾¿ä¼šä¸­æ–­ã€‚ ","date":"2021-05-06","objectID":"/py-glance/:2:0","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#conda-å’Œ-pip-çš„åŒºåˆ«"},{"categories":["python"],"content":" é•œåƒ","date":"2021-05-06","objectID":"/py-glance/:3:0","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#é•œåƒ"},{"categories":["python"],"content":" å›½å†…é•œåƒæº https://pypi.douban.com/simple/ è±†ç“£ https://mirrors.aliyun.com/pypi/simple/ é˜¿é‡Œ https://pypi.hustunique.com/simple/ åä¸­ç†å·¥å¤§å­¦ https://pypi.sdutlinux.org/simple/ å±±ä¸œç†å·¥å¤§å­¦ https://pypi.mirrors.ustc.edu.cn/simple/ ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ https://pypi.tuna.tsinghua.edu.cn/simple æ¸…å ","date":"2021-05-06","objectID":"/py-glance/:3:1","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#å›½å†…é•œåƒæº"},{"categories":["python"],"content":" ä½¿ç”¨é•œåƒå®‰è£…å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« https://www.runoob.com/w3cnote/pip-cn-mirror.html ","date":"2021-05-06","objectID":"/py-glance/:3:2","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#ä½¿ç”¨é•œåƒå®‰è£…"},{"categories":["python"],"content":" æ›´æ–° pip3 pip3 install --upgrade pip æˆ–è€… python3 -m pip install --upgrade pip ","date":"2021-05-06","objectID":"/py-glance/:4:0","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#æ›´æ–°-pip3"},{"categories":["python"],"content":" å‚è€ƒ python condaå®‰è£…ä¸ä½¿ç”¨æ•™ç¨‹ ","date":"2021-05-06","objectID":"/py-glance/:5:0","series":null,"tags":["python"],"title":"python å­¦ä¹ ç¬”è®°","uri":"/py-glance/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,github PR,PR,pull request,å¦‚ä½•ä½¿ç”¨ PR, Canâ€™t automatically merge ","date":"2021-04-29","objectID":"/pull-request/","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ€»è§ˆä¹‹å‰åœ¨ CSDN ä¸Šå†™è¿‡ä¸€ç¯‡å…³äº RP çš„ç¬”è®° github fork PR çš„ç®€å•ä½¿ç”¨ ï¼Œé‚£ç¯‡æ–‡ç« å†™çš„æ¯”è¾ƒéšæ„ä¸”ä¸æ˜¯ç”¨å‘½ä»¤è¡Œæ“ä½œçš„ï¼Œå¤§éƒ¨åˆ†æ“ä½œéƒ½æ˜¯åŸºäº IDEï¼Œæ‰€ä»¥æƒ³ç€é‡æ–°æ•´ç†ä¸‹é‚£ç¯‡æ–‡ç« ï¼ŒåŒæ—¶ä¹Ÿå¤ä¹ ä¸‹ git å¸¸ç”¨å‘½ä»¤ã€‚ pull request ","date":"2021-04-29","objectID":"/pull-request/:1:0","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ€»è§ˆ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ¨¡æ‹Ÿåœºæ™¯å…¬å¸æœ‰ä¸ªé¡¹ç›®ä¸º xiao1996cc/git-dev ï¼Œæœ‰ä¸¤ä¸ªå¼€å‘è€…ï¼Œåˆ†åˆ«ä¸º xiaobinqt å’Œ lovenarcissus å¯¹è¿™ä¸ªé¡¹ç›®è¿›è¡Œå¼€å‘ï¼Œå¼€å‘çš„æ–°åŠŸèƒ½éƒ½ä¼šæäº¤ PR è¯·æ±‚åˆå¹¶ã€‚ ","date":"2021-04-29","objectID":"/pull-request/:2:0","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ¨¡æ‹Ÿåœºæ™¯"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" forkä¸¤ä¸ªå¼€å‘è€…åˆ†åˆ«æŠŠé¡¹ç›® fork é¡¹ç›®åˆ°è‡ªå·±çš„è´¦å·ä¸‹ï¼Œä»¥ xiaobinqt ä¸ºä¾‹ï¼š forking fork æˆåŠŸå xiaobinqt ç°åœ¨å·²ç» fork äº† xiao1996cc/git-dev é¡¹ç›®åˆ°è‡ªå·±çš„è´¦å·ä¸‹ xiaobinqt/git-dev ã€‚ ","date":"2021-04-29","objectID":"/pull-request/:3:0","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#fork"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" xiaobinqt å¼€å‘æ–°åŠŸèƒ½ æ¯æ¬¡å¼€å‘æ–°åŠŸèƒ½ä¹‹å‰ä¸€å®šè¦å…ˆ fetch ä¸‹è¿œç¨‹ä»“åº“ã€‚ ","date":"2021-04-29","objectID":"/pull-request/:4:0","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#xiaobinqt-å¼€å‘æ–°åŠŸèƒ½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" clonexiaobinqt fork å®Œæˆåï¼Œclone é¡¹ç›®åˆ°æœ¬åœ°ã€‚ clone ","date":"2021-04-29","objectID":"/pull-request/:4:1","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#clone"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ·»åŠ è¿œç¨‹ä»“åº“æ·»åŠ è¿œç¨‹ä»“åº“ xiao1996cc/git-dev git remote add upstream git@github.com:xiao1996cc/git-dev.git æ·»åŠ è¿œç¨‹ä»“åº“ fetch è¿œç¨‹ä»“åº“ git fetch upstream fetch è¿œç¨‹ä»“åº“ ","date":"2021-04-29","objectID":"/pull-request/:4:2","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ·»åŠ è¿œç¨‹ä»“åº“"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ–°å»ºåˆ†æ”¯å¹¶å¼€å‘åŸºäº upstream/main åˆ›å»ºæ–°åˆ†æ”¯ dev_xiaobinqt git checkout -b dev_xiaobinqt upstream/main åˆ›å»º dev_xiaobinqt åˆ†æ”¯ æ–°å»ºæ–°æ–‡ä»¶ xiaobinqt.txt å¹¶æäº¤ æ–°å»ºæ–‡ä»¶å¹¶æäº¤ push æˆåŠŸåå† github é¡¹ç›®ä¸‹å¯ä»¥çœ‹åˆ°æˆåŠŸæç¤º push æˆåŠŸæç¤º ","date":"2021-04-29","objectID":"/pull-request/:4:3","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ–°å»ºåˆ†æ”¯å¹¶å¼€å‘"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ–°å»º PR new pull request é€‰æ‹©è¦åˆå¹¶çš„åˆ†æ”¯å¹¶åˆ›å»º pull requestï¼Œè¿™é‡Œæˆ‘ä»¬å°† xiabinqt/git-dev ä¸‹é¢çš„ dev_xiaobinqt åˆ†æ”¯é‡Œçš„ä»£ç åˆå¹¶åˆ° xiao1996cc/git-dev ä¸‹çš„ main åˆ†æ”¯ã€‚ åˆ›å»º pull request åˆ›å»º pull request æˆåŠŸ ","date":"2021-04-29","objectID":"/pull-request/:4:4","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ–°å»º-pr"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆå¹¶ PRxiao1996cc/git-dev é¡¹ç›®ä¸‹çš„ PR åªæœ‰ç®¡ç†è¿™ä¸ªé¡¹ç›®çš„ç”¨æˆ·æ‰æœ‰æƒé™å¤„ç†ã€‚ç®¡ç†å‘˜çœ‹åˆ°çš„ç•Œé¢æ˜¯å¦‚ä¸‹è¿™æ ·çš„ï¼š ç®¡ç†è€…çœ‹åˆ°çš„ PR ç•Œé¢ å¤„ç†å®Œçš„ PR çŠ¶æ€ä¼šå˜æˆ Merged Merge PR è‡³æ­¤ xiaobinqt å¼€å‘çš„ä¸€ä¸ªåŠŸèƒ½å·²ç»æˆåŠŸæäº¤åˆ°è¿œç¨‹ upstream ä»“åº“ï¼Œä¹Ÿå°±æ˜¯ xiao1996cc/git-dev ä»“åº“ï¼Œè™½ç„¶åªæ–°å»ºäº†ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯ä¸€ä¸ªå®Œæ•´çš„ pull request æµç¨‹ã€‚ ","date":"2021-04-29","objectID":"/pull-request/:4:5","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#åˆå¹¶-pr"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" lovenarcissus å¼€å‘æ–°åŠŸèƒ½å¯¹äº lovenarcissus å¼€å‘è€…æ¥è¯´ï¼Œä¹Ÿæ˜¯å…ˆ fork é¡¹ç›®å† clone é¡¹ç›®åˆ°æœ¬åœ°ã€‚ å¯ä»¥çœ‹åˆ° lovenarcissus fork åçš„é¡¹ç›®æ˜¯æœ‰ xiaobinqt.txt è¿™ä¸ªæ–‡ä»¶çš„ï¼ŒåŒæ—¶ä¹ŸéªŒè¯äº† xiaobinqt å¼€å‘è€…æˆåŠŸå‘è¿œç¨‹ä»“åº“æäº¤äº†ä»£ç ã€‚è¿™é‡Œé»˜è®¤å·²ç» clone åˆ°äº†æœ¬åœ°ä»“åº“ã€‚ lovenarcissus fork ","date":"2021-04-29","objectID":"/pull-request/:5:0","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#lovenarcissus-å¼€å‘æ–°åŠŸèƒ½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ·»åŠ è¿œç¨‹ä»“åº“ æ·»åŠ è¿œç¨‹ä»“åº“ fetch è¿œç¨‹ä»“åº“ä»£ç  git fetch upsteam ","date":"2021-04-29","objectID":"/pull-request/:5:1","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ·»åŠ è¿œç¨‹ä»“åº“-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ–°å»ºåˆ†æ”¯å¹¶å¼€å‘åŸºäº upstream/main åˆ›å»ºæ–°åˆ†æ”¯ dev_lovenarcissus å¼€å‘åˆ†æ”¯ git checkout -b dev_lovenarcissus upstream/main æ–°å»ºå¼€å‘åˆ†æ”¯ æ–°å»º lovenarcissus.txt æ–‡ä»¶å¹¶ä¿®æ”¹ xiaobinqt.txt æ–‡ä»¶ å¼€å‘ä»£ç  æäº¤ä»£ç  æäº¤ä»£ç  ","date":"2021-04-29","objectID":"/pull-request/:5:2","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ–°å»ºåˆ†æ”¯å¹¶å¼€å‘-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ–°å»º PR æ–°å»º pull request ","date":"2021-04-29","objectID":"/pull-request/:5:3","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ–°å»º-pr-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆå¹¶ PR Merge pull request ","date":"2021-04-29","objectID":"/pull-request/:5:4","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#åˆå¹¶-pr-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ¨¡æ‹Ÿå¹¶è§£å†³å†²çª","date":"2021-04-29","objectID":"/pull-request/:6:0","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#æ¨¡æ‹Ÿå¹¶è§£å†³å†²çª"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‡ºç°å†²çªç°åœ¨å¼€å‘è€… xiaobinqt å’Œå¼€å‘è€… lovenarcissus éƒ½æäº†ä»£ç åˆ°è¿œç¨‹ä»“åº“ xiao1996cc/git-devï¼Œä»“åº“é‡Œæ–‡ä»¶å¦‚ä¸‹ï¼š è¿œç¨‹ä»£ç ä»“åº“ ç°åœ¨å¼€å‘è€… xiaobinqt éœ€è¦å¼€å‘ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œæ–°å¢ä¸€ä¸ª xiaobinqt2.txt æ–‡ä»¶ï¼Œå¹¶ä¸”ä¿®æ”¹ xiaobinqt.txt æ–‡ä»¶ï¼Œä½†æ˜¯è¿™æ—¶ xiaobinqt å¹¶æ²¡æœ‰ fetch åˆå¹¶è¿œç¨‹ä»“åº“çš„ä»£ç ï¼Œxiaobinqt æœ¬åœ°ä»“åº“æ–‡ä»¶å¦‚ä¸‹ï¼š æ–‡ä»¶åˆ—è¡¨ ç›´æ¥æ–°å»º xiaobinqt2.txt æ–‡ä»¶ï¼Œå¹¶ä¸”ä¿®æ”¹ xiaobinqt.txt æ–‡ä»¶ æ–°å»ºå¹¶ä¿®æ”¹æ–‡ä»¶ push ä»£ç åˆ°è¿œç¨‹ä»“åº“ï¼Œå¹¶åˆ›å»º pull request push ä»£ç  å¯ä»¥çœ‹åˆ°åœ¨åˆ›å»º pull request æ—¶å‡ºç°äº†å†²çªï¼Œæç¤º Canâ€™t automatically merge ï¼Œ PR å‡ºç°å†²çª ","date":"2021-04-29","objectID":"/pull-request/:6:1","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#å‡ºç°å†²çª"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³å†²çªå‡ºç°å†²çªçš„åŸå› æ˜¯æœ¬åœ°ä»£ç è·Ÿ origin ä»“åº“çš„ä»£ç æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ origin ä»“åº“è·Ÿ upstream ä»“åº“ä»£ç ä¸ä¸€è‡´ã€‚æˆ‘ä»¬éœ€è¦å…ˆ fetch ä¸‹ upstream ä»“åº“çš„ä»£ç è·Ÿæœ¬åœ°ä»£ç åˆå¹¶åå† push åˆ° origin ä»“åº“ï¼Œå†ä» origin ä»“åº“æ pull request åˆ° upsteam ä»“åº“ã€‚ ç”±ğŸ‘‡å›¾å¯çŸ¥ï¼Œåœ¨ merge upstream/main åˆ†æ”¯æ—¶å‡ºç°äº†å†²çª Automatic merge failed; fix conflicts and then commit the result. merge conflicts vim æ‰“å¼€å†²çªæ–‡ä»¶ xiaobinqt.txt è§£å†³å†²çª å†²çªæ–‡ä»¶å†…å®¹ è§£å†³å†²çªåçš„æ–‡ä»¶ ğŸ‘‡ è§£å†³å†²çªåçš„æ–‡ä»¶ ä»¥ä¸‹ğŸ‘‡æ˜¯è§£å†³è¿™æ¬¡å†²çªçš„å…·ä½“æ­¥éª¤ï¼š è§£å†³å†²çªå…·ä½“æ­¥éª¤ ","date":"2021-04-29","objectID":"/pull-request/:6:2","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#è§£å†³å†²çª"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é‡æ PRè¿™æ—¶å¯¹äº xiaobinqt å¼€å‘è€…æ¥è¯´ï¼Œå†²çªå·²ç»è§£å†³ï¼Œå¯ä»¥é‡æ–°æ pull request ğŸ‘‡ï¼Œå¯ä»¥çœ‹åˆ°ç°åœ¨çš„çŠ¶æ€æ˜¯ Able to merge.ã€‚ é‡æ PR åˆ›å»ºæ–°çš„ pull request æˆåŠŸ åˆ›å»ºæ–°çš„ PR æˆåŠŸ ","date":"2021-04-29","objectID":"/pull-request/:6:3","series":null,"tags":["git"],"title":"github pull request","uri":"/pull-request/#é‡æ-pr"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"mongodb , mongodb æ¦‚å¿µ,mongodb æŸ¥è¯¢è¯­å¥,golang æ“ä½œ mongodb,globalsign/mgo ä½¿ç”¨","date":"2021-04-14","objectID":"/mongodb-glance/","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" win10 å®‰è£…åœ¨ windows ä¸‹å®‰è£…å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« mongodb-window-installã€‚ ","date":"2021-04-14","objectID":"/mongodb-glance/:1:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#win10-å®‰è£…"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å°å‘æˆ‘ä½¿ç”¨çš„æ˜¯ windows 10 ä¼ä¸šç‰ˆï¼Œåœ¨å®‰è£…æ—¶å‡ºç°äº†ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹ï¼š é—®é¢˜æˆªå›¾ æˆ‘æ˜¯åœ¨ç½‘ä¸Šæ‰¾äº†å¤§åŠå¤©æ²¡æœ‰æ‰¾åˆ°è§£å†³çš„åŠæ³•ï¼Œéƒ½æ˜¯å†™æ–‡ç« ä½œè€…å¯ç”¨ï¼Œä½†æ˜¯æˆ‘ä¸€ç›´ä¸ç”Ÿæ•ˆï¼Œæˆ‘è§‰å¾—çš„å¿…é¡»è¦ç”¨ç®¡ç†å‘˜æƒé™å®‰è£…å¯¼è‡´çš„ã€‚åæ¥æˆ‘ç›´æ¥å¿½ç•¥äº†ï¼Œç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œã€‚ ","date":"2021-04-14","objectID":"/mongodb-glance/:1:1","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#å°å‘"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è¿è¡ŒæœåŠ¡ç«¯ç”¨ç®¡ç†å‘˜ power shell è¿è¡Œ å…·ä½“å‘½ä»¤å¯ä»¥å‚çœ‹æ–‡æ¡£ è¿è¡Œ mongodb æœåŠ¡ 01 .\\mongod.exe --dbpath D:\\mySoft\\mongoDB\\data\\db è¿è¡Œ mongodb æœåŠ¡ 02 ","date":"2021-04-14","objectID":"/mongodb-glance/:1:2","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#è¿è¡ŒæœåŠ¡ç«¯"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è¿è¡Œå®¢æˆ·ç«¯ .\\mongo.exe å®¢æˆ·ç«¯è¿æ¥ ","date":"2021-04-14","objectID":"/mongodb-glance/:1:3","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#è¿è¡Œå®¢æˆ·ç«¯"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Navicat Premiumnavicat premium æ˜¯ä¸€ä¸ªæ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œå¯ä»¥æ”¯æŒ mysqlï¼Œmongodbï¼Œoracle ç­‰å‡ ä¹æ‰€æœ‰çš„æ•°æ®åº“ã€‚ navicat premium navicat premuim ä½¿ç”¨ windows å®‰è½¬æ•™ç¨‹å¯ä»¥å‚è€ƒnavicat premium15ç ´è§£æ•™ç¨‹ ","date":"2021-04-14","objectID":"/mongodb-glance/:2:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#navicat-premium"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ¦‚å¿µè§£æ SQLæœ¯è¯­/æ¦‚å¿µ MongoDBæœ¯è¯­/æ¦‚å¿µ è¯´æ˜ database database æ•°æ®åº“ table collection æ•°æ®åº“è¡¨/é›†åˆ row document æ•°æ®è®°å½•è¡Œ/æ–‡æ¡£ column field æ•°æ®å­—æ®µ/åŸŸ index index ç´¢å¼• table joins - è¡¨è¿æ¥ï¼ŒMongoDB ä¸æ”¯æŒ primary key primary key ä¸»é”®ï¼ŒMongoDB è‡ªåŠ¨å°† _id å­—æ®µè®¾ç½®ä¸ºä¸»é”® RDBMSï¼ˆå…³ç³»å‹æ•°æ®åº“ï¼‰ MongoDB æ•°æ®åº“ æ•°æ®åº“ è¡¨æ ¼ é›†åˆ è¡Œ æ–‡æ¡£ åˆ— å­—æ®µ è¡¨è”åˆ åµŒå…¥æ–‡æ¡£ ä¸»é”® ä¸»é”® (MongoDB æä¾›äº† key ä¸º _id ) å¯¹æ¯”å›¾ ","date":"2021-04-14","objectID":"/mongodb-glance/:3:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#æ¦‚å¿µè§£æ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ CMD è¯´æ˜ db.help() æŸ¥çœ‹å‘½ä»¤å¸®åŠ© show dbs æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ use db_name å¦‚æœæ•°æ®åº“ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºæ•°æ®åº“ï¼Œå¦åˆ™åˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®åº“ show tables æŸ¥çœ‹è¯¥åº“ä¸‹çš„æ‰€æœ‰è¡¨ db.getName() æŸ¥çœ‹å½“å‰æ‰€åœ¨çš„åº“ db å‘½ä»¤å¯ä»¥æ˜¾ç¤ºå½“å‰æ•°æ®åº“å¯¹è±¡æˆ–é›†åˆ db.version() å½“å‰dbç‰ˆæœ¬ db.stats() å½“å‰dbçŠ¶æ€ db.getMongo() æŸ¥çœ‹å½“å‰dbçš„é“¾æ¥æœºå™¨åœ°å€ db.dropDatabase() åˆ é™¤å½“å‰ä½¿ç”¨çš„æ•°æ®åº“ db.copyDatabase(\"mydb\", \"temp\", \"127.0.0.1\") ä»æŒ‡å®šçš„æœºå™¨ä¸Šå¤åˆ¶æŒ‡å®šæ•°æ®åº“æ•°æ®åˆ°æŸä¸ªæ•°æ®åº“ï¼Œæœ¬ç¤ºä¾‹ä¸ºï¼šå°†æœ¬æœºçš„ mydb çš„æ•°æ®å¤åˆ¶åˆ° temp æ•°æ®åº“ä¸­ db.cloneDatabase(\"127.0.0.1\") å°†æŒ‡å®šæœºå™¨ä¸Šçš„æ•°æ®åº“çš„æ•°æ®å…‹éš†åˆ°å½“å‰æ•°æ®åº“ db.repairDatabase() ä¿®å¤å½“å‰æ•°æ®åº“ show collections/show tables æŸ¥çœ‹å·²æœ‰é›†åˆ db.yourColl.help() æŸ¥çœ‹å¸®åŠ© db.yourColl.count() æŸ¥è¯¢å½“å‰é›†åˆçš„æ•°æ®æ¡æ•° db.yourColl.dataSize() æŸ¥çœ‹æ•°æ®ç©ºé—´å¤§å° db.yourColl.getDB() å¾—åˆ°å½“å‰èšé›†é›†åˆæ‰€åœ¨çš„ db db.yourColl.stats() å¾—åˆ°å½“å‰é›†åˆçš„çŠ¶æ€ db.yourColl.totalSize() å¾—åˆ°é›†åˆæ€»å¤§å° db.yourColl.storageSize() èšé›†é›†åˆå‚¨å­˜ç©ºé—´å¤§å° db.yourColl.getShardVersion() Shardç‰ˆæœ¬ä¿¡æ¯ db.userInfo.renameCollection(\"users\") é›†åˆé‡å‘½åã€‚ç¤ºä¾‹ä¸ºï¼šå°† userInfo é‡å‘½åä¸º users db.yourColl.drop() åˆ é™¤å½“å‰é›†åˆ yourColl è¡¨ç¤ºé›†åˆå ","date":"2021-04-14","objectID":"/mongodb-glance/:4:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#å¸¸ç”¨å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é›†åˆæŸ¥è¯¢ ğŸ“Œ æŸ¥è¯¢æ‰€æœ‰è®°å½• db.mgotest.find() # æ ¼å¼åŒ–è¾“å‡º db.mgotest.find().pretty() å¯¹æ¯” SQLï¼šselect * from mgotest; ğŸ“Œ æŸ¥è¯¢å»æ‰åçš„å½“å‰é›†åˆä¸­çš„æŸåˆ—çš„é‡å¤æ•°æ® db.mgotest.distinct(\"interests\") å¯¹æ¯” SQLï¼šselect distinct interests from mgotest; distinct ğŸ“Œ æŸ¥è¯¢ age = 22 çš„è®°å½• db.userInfo.find({\"age\": 22}); å¯¹æ¯” SQLï¼šselect * from userInfo where age = 22; ğŸ“Œ æŸ¥è¯¢ age \u003e 22 çš„è®°å½• db.userInfo.find({age: {$gt: 22}}) å¯¹æ¯” SQLï¼šselect * from userInfo where age \u003e22; ğŸ“Œ æŸ¥è¯¢ age \u003c 22 çš„è®°å½• db.userInfo.find({age: {$lt: 22}}); å¯¹æ¯” SQLï¼šselect * from userInfo where age \u003c 22; ğŸ“Œ æŸ¥è¯¢ age \u003e= 25 çš„è®°å½• db.userInfo.find({age: {$gte: 25}}); å¯¹æ¯” SQLï¼šselect * from userInfo where age \u003e= 25; ğŸ“Œ æŸ¥è¯¢ age \u003c= 25 çš„è®°å½• db.userInfo.find({age: {$lte: 25}}); ğŸ“Œ æŸ¥è¯¢ age \u003e= 23 å¹¶ä¸” age \u003c= 26 db.userInfo.find({age: {$gte: 23, $lte: 26}}); ğŸ“Œ æŸ¥è¯¢ name ä¸­åŒ…å« mongo çš„æ•°æ® db.userInfo.find({name: /mongo/}); å¯¹æ¯” SQLï¼šselect * from userInfo where name like â€˜%mongo%'; ğŸ“Œ æŸ¥è¯¢ name ä¸­ä»¥ mongo å¼€å¤´çš„ db.userInfo.find({name: /^mongo/}); å¯¹æ¯” SQLï¼šselect * from userInfo where name like â€˜mongo%'; ğŸ“Œ æŸ¥è¯¢æŒ‡å®šåˆ— nameã€age æ•°æ® db.userInfo.find({}, {name: 1, age: 1}); å¯¹æ¯” SQLï¼šselect name, age from userInfo; ğŸ“Œ æŸ¥è¯¢æŒ‡å®šåˆ— nameã€age æ•°æ®, age \u003e 25 db.userInfo.find({age: {$gt: 25}}, {name: 1, age: 1}); å¯¹æ¯” SQLï¼šselect name, age from userInfo where age \u003e25; ğŸ“Œ æŒ‰ç…§å¹´é¾„æ’åº # å‡åº db.userInfo.find().sort({age: 1}); # é™åº db.userInfo.find().sort({age: -1}); ğŸ“Œ æŸ¥è¯¢ name = zhangsan, age = 22 çš„æ•°æ® db.userInfo.find({name: 'zhangsan', age: 22}); å¯¹æ¯” SQLï¼šselect * from userInfo where name = 'zhangsan' and age = '22'; ğŸ“Œ æŸ¥è¯¢å‰ 5 æ¡æ•°æ® db.userInfo.find().limit(5); å¯¹æ¯” SQLï¼šselect * from userInfo limit 5; ğŸ“Œ æŸ¥è¯¢ 10 æ¡ä»¥åçš„æ•°æ® db.userInfo.find().skip(10); å¯¹æ¯” SQLï¼š select * from userInfo where id not in (select id from userInfo limit 10 ); ğŸ“Œ æŸ¥è¯¢åœ¨ 5-10 ä¹‹é—´çš„æ•°æ® db.userInfo.find().limit(10).skip(5); å¯ç”¨äºåˆ†é¡µï¼Œlimit æ˜¯ pageSizeï¼Œskip æ˜¯ (ç¬¬å‡ é¡µ * pageSize) ğŸ“Œ or æŸ¥è¯¢ db.userInfo.find({$or: [{age: 22}, {age: 25}]}); å¯¹æ¯” SQLï¼šselect * from userInfo where age = 22 or age = 25; ğŸ“Œ æŸ¥è¯¢æŸä¸ªç»“æœé›†çš„è®°å½•æ¡æ•° db.userInfo.find({age: {$gte: 25}}).count(); å¯¹æ¯” SQLï¼šselect count(*) from userInfo where age \u003e= 20; ğŸ“Œ æŒ‰ç…§æŸåˆ—è¿›è¡Œæ’åº db.userInfo.find({sex: {$exists: true}}).count(); å¯¹æ¯” SQLï¼šselect count(sex) from userInfo; ","date":"2021-04-14","objectID":"/mongodb-glance/:5:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#é›†åˆæŸ¥è¯¢"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ›´æ–°æ–‡æ¡£ db.collection.update( \u003cquery\u003e, \u003cupdate\u003e, { upsert: \u003cboolean\u003e, multi: \u003cboolean\u003e, writeConcern: \u003cdocument\u003e } ) # ç¤ºä¾‹ db.col.update({'title':'MongoDB æ•™ç¨‹'},{$set:{'title':'MongoDB'}}) å‚æ•°è¯´æ˜ï¼š query : update çš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼ sql update æŸ¥è¯¢å†… where åé¢çš„ã€‚ update : update çš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$incâ€¦ï¼‰ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º sql update æŸ¥è¯¢å†… set åé¢çš„ upsert : å¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨ update çš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥ objNew, true ä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯ false ï¼Œä¸æ’å…¥ã€‚ multi : å¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯ false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸º true, å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚ writeConcern :å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚ ","date":"2021-04-14","objectID":"/mongodb-glance/:6:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#æ›´æ–°æ–‡æ¡£"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" $push$push æ“ä½œç¬¦æ·»åŠ æŒ‡å®šçš„å€¼åˆ°æ•°ç»„ä¸­ï¼Œä¸å»é‡ã€‚ ","date":"2021-04-14","objectID":"/mongodb-glance/:6:1","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#push"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" $addToSet$addToSet è¿™ä¸ªæ–¹æ³•å‘æ•°ç»„ä¸­å¢åŠ å€¼ï¼Œè‡ªåŠ¨å»é‡ã€‚ ","date":"2021-04-14","objectID":"/mongodb-glance/:6:2","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#addtoset"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" globalsign/mgo ä½¿ç”¨globalsign/mgo æ˜¯ Go çš„ MongoDB é©±åŠ¨ï¼Œæˆ‘ç°åœ¨ç»´æŠ¤çš„é¡¹ç›®ä¹Ÿåœ¨ä½¿ç”¨è¿™ä¸ªï¼Œåœ¨è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ã€‚ package main import ( \"fmt\" \"time\" \"github.com/globalsign/mgo\" \"github.com/globalsign/mgo/bson\" ) type User struct { Id bson.ObjectId `bson:\"_id\" json:\"id\"` Username string `bson:\"name\" json:\"username\"` Pass string `bson:\"pass\" json:\"pass\"` Regtime int64 `bson:\"regtime\" json:\"regtime\"` Interests []string `bson:\"interests\" json:\"interests\"` } const URL string = \"127.0.0.1:27017\" var ( c *mgo.Collection session *mgo.Session ) func (user User) ToString() string { return fmt.Sprintf(\"%#v\", user) } func init() { session, _ = mgo.Dial(URL) // åˆ‡æ¢åˆ°æ•°æ®åº“ db := session.DB(\"blog\") // åˆ‡æ¢åˆ°collection c = db.C(\"mgotest\") } // æ–°å¢æ•°æ® func add() { // defer session.Close() stu1 := new(User) stu1.Id = bson.NewObjectId() stu1.Username = \"stu_name\" + time.Now().String() stu1.Pass = \"stu1_pass\" stu1.Regtime = time.Now().Unix() stu1.Interests = []string{\"è±¡æ£‹\", \"æ¸¸æ³³\", \"è·‘æ­¥\"} err := c.Insert(stu1) if err == nil { fmt.Println(\"insert success\") } else { fmt.Printf(\"insert error:%s \\n\", err.Error()) } } // æŸ¥è¯¢ func find() { // defer session.Close() var ( users []User err error ) // c.Find(nil).All(\u0026users) err = c.Find(bson.M{\"name\": \"stu_name\"}).All(\u0026users) if err != nil { fmt.Printf(\"find err:%s \\n\", err.Error()) return } for index, value := range users { fmt.Printf(\"index:%d,val:%s \\n\", index, value.ToString()) } // æ ¹æ®ObjectIdè¿›è¡ŒæŸ¥è¯¢ // idStr := \"577fb2d1cde67307e819133d\" // objectId := bson.ObjectIdHex(idStr) // user := new(User) // err = c.Find(bson.M{\"_id\": objectId}).One(user) // if err != nil { // fmt.Printf(\"db find err:%s \\n\", err.Error()) // return // } // fmt.Println(\"æŸ¥æ‰¾æˆåŠŸ..\", user) } // æ ¹æ®idè¿›è¡Œä¿®æ”¹ func update() { interests := []string{\"è±¡æ£‹\", \"æ¸¸æ³³\", \"è·‘æ­¥\"} err := c.Update(bson.M{\"_id\": bson.ObjectIdHex(\"6076c3954e947b3944d4a38b\")}, bson.M{\"$set\": bson.M{ \"name\": \"ä¿®æ”¹åçš„name\", \"pass\": \"ä¿®æ”¹åçš„pass\", \"regtime\": time.Now().Unix(), \"interests\": interests, }}) if err != nil { fmt.Println(\"ä¿®æ”¹å¤±è´¥\") } else { fmt.Println(\"ä¿®æ”¹æˆåŠŸ\") } } // åˆ é™¤ func del() { err := c.Remove(bson.M{\"_id\": bson.ObjectIdHex(\"6076c3954e947b3944d4a38b\")}) if err != nil { fmt.Println(\"åˆ é™¤å¤±è´¥\" + err.Error()) } else { fmt.Println(\"åˆ é™¤æˆåŠŸ\") } } func main() { add() find() update() del() } ","date":"2021-04-14","objectID":"/mongodb-glance/:7:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#globalsignmgo-ä½¿ç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§’è‰²å¯¹äºé admin åº“ï¼Œä¸èƒ½æ‹¥æœ‰clusterAdminã€readAnyDatabaseã€readWriteAnyDatabaseã€userAdminAnyDatabaseã€dbAdminAnyDatabaseè¿™äº›è§’è‰²ã€‚ MongoDB ç›®å‰å†…ç½®äº† 7 ä¸ªè§’è‰²ã€‚ æ•°æ®åº“ç”¨æˆ·è§’è‰²ï¼šreadã€readWrite; æ•°æ®åº“ç®¡ç†è§’è‰²ï¼šdbAdminã€dbOwnerã€userAdminï¼› é›†ç¾¤ç®¡ç†è§’è‰²ï¼šclusterAdminã€clusterManagerã€clusterMonitorã€hostManagerï¼› å¤‡ä»½æ¢å¤è§’è‰²ï¼šbackupã€restoreï¼› æ‰€æœ‰æ•°æ®åº“è§’è‰²ï¼šreadAnyDatabaseã€readWriteAnyDatabaseã€userAdminAnyDatabaseã€dbAdminAnyDatabase è¶…çº§ç”¨æˆ·è§’è‰² rootï¼›è¿™é‡Œè¿˜æœ‰å‡ ä¸ªè§’è‰²é—´æ¥æˆ–ç›´æ¥æä¾›äº†ç³»ç»Ÿè¶…çº§ç”¨æˆ·çš„è®¿é—®ï¼ˆdbOwnerã€userAdminã€userAdminAnyDatabaseï¼‰ å†…éƒ¨è§’è‰²ï¼š__system è¿™äº›è§’è‰²å¯¹åº”çš„ä½œç”¨å¦‚ä¸‹ï¼š Readï¼šå…è®¸ç”¨æˆ·è¯»å–æŒ‡å®šæ•°æ®åº“ readWriteï¼šå…è®¸ç”¨æˆ·è¯»å†™æŒ‡å®šæ•°æ®åº“ dbAdminï¼šå…è®¸ç”¨æˆ·åœ¨æŒ‡å®šæ•°æ®åº“ä¸­æ‰§è¡Œç®¡ç†å‡½æ•°ï¼Œå¦‚ç´¢å¼•åˆ›å»ºã€åˆ é™¤ï¼ŒæŸ¥çœ‹ç»Ÿè®¡æˆ–è®¿é—®system.profile userAdminï¼šå…è®¸ç”¨æˆ·å‘system.usersé›†åˆå†™å…¥ï¼Œå¯ä»¥æ‰¾æŒ‡å®šæ•°æ®åº“é‡Œåˆ›å»ºã€åˆ é™¤å’Œç®¡ç†ç”¨æˆ· clusterAdminï¼šåªåœ¨ admin æ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰åˆ†ç‰‡å’Œå¤åˆ¶é›†ç›¸å…³å‡½æ•°çš„ç®¡ç†æƒé™ã€‚ readAnyDatabaseï¼šåªåœ¨ admin æ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„è¯»æƒé™ readWriteAnyDatabaseï¼šåªåœ¨ admin æ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„è¯»å†™æƒé™ userAdminAnyDatabaseï¼šåªåœ¨ admin æ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„ userAdmin æƒé™ dbAdminAnyDatabaseï¼šåªåœ¨ admin æ•°æ®åº“ä¸­å¯ç”¨ï¼Œèµ‹äºˆç”¨æˆ·æ‰€æœ‰æ•°æ®åº“çš„ dbAdmin æƒé™ã€‚ rootï¼šåªåœ¨ admin æ•°æ®åº“ä¸­å¯ç”¨ã€‚è¶…çº§è´¦å·ï¼Œè¶…çº§æƒé™ ä¸€èˆ¬åœ¨æ–°å»ºç”¨æˆ·æ—¶å¸¸è§çš„é”™è¯¯æœ‰ğŸ‘‡ uncaught exception: Error: couldnâ€™t add user: No role named userAdminAnyDatabase@xxxxxx ","date":"2021-04-14","objectID":"/mongodb-glance/:8:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#è§’è‰²"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" FAQ","date":"2021-04-14","objectID":"/mongodb-glance/:9:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#faq"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç©ºåº“ä¸æ˜¾ç¤º show dbs ä¸Šå›¾ğŸ‘†ç”¨ use test1 æ–°å»ºäº†ä¸€ä¸ªæ•°æ®åº“ test1ï¼Œä½†æ˜¯ç”¨ show dbs å´æ²¡æœ‰æ˜¾ç¤º test1ï¼Œè¿™æ˜¯å› ä¸º test1 æ˜¯ç©ºçš„ï¼Œæ’å…¥ä¸€æ¡æ•°æ®å°±å¯ä»¥æ˜¾ç¤ºã€‚ æ˜¾ç¤ºæ–°å»ºçš„åº“ ","date":"2021-04-14","objectID":"/mongodb-glance/:9:1","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#ç©ºåº“ä¸æ˜¾ç¤º"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®šé•¿è¡¨æœ€è¿‘æœ‰ä¸ªéœ€æ±‚æ˜¯ï¼Œéœ€è¦æŸä¸ªé›†åˆå®ç°åªä¿ç•™å›ºå®šæ•°é‡çš„è®°å½•ï¼Œè‡ªåŠ¨æ·˜æ±°è€æ—§æ•°æ®ã€‚ é€šè¿‡åˆ›å»ºé›†åˆçš„å‘½ä»¤ db.createCollection(name, options) å¯çŸ¥ï¼Œæœ‰ä¸ªå¯é€‰çš„ options å‚æ•°ï¼š å‚æ•°è¯´æ˜ï¼š name: è¦åˆ›å»ºçš„é›†åˆåç§° options: å¯é€‰å‚æ•°, æŒ‡å®šæœ‰å…³å†…å­˜å¤§å°åŠç´¢å¼•çš„é€‰é¡¹ options å¯ä»¥æ˜¯å¦‚ä¸‹å‚æ•°ï¼š å­—æ®µ ç±»å‹ æè¿° capped å¸ƒå°” ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸º trueï¼Œåˆ™åˆ›å»ºå›ºå®šé›†åˆã€‚å›ºå®šé›†åˆæ˜¯æŒ‡æœ‰ç€å›ºå®šå¤§å°çš„é›†åˆï¼Œå½“è¾¾åˆ°æœ€å¤§å€¼æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è¦†ç›–æœ€æ—©çš„æ–‡æ¡£ã€‚å½“è¯¥å€¼ä¸º true æ—¶ï¼Œå¿…é¡»æŒ‡å®š size å‚æ•°ã€‚ autoIndexId å¸ƒå°” 3.2 ä¹‹åä¸å†æ”¯æŒè¯¥å‚æ•°ã€‚ï¼ˆå¯é€‰ï¼‰å¦‚ä¸º trueï¼Œè‡ªåŠ¨åœ¨ _id å­—æ®µåˆ›å»ºç´¢å¼•ã€‚é»˜è®¤ä¸º falseã€‚ size æ•°å€¼ ï¼ˆå¯é€‰ï¼‰ä¸ºå›ºå®šé›†åˆæŒ‡å®šä¸€ä¸ªæœ€å¤§å€¼ï¼Œå³å­—èŠ‚æ•° ã€‚å¦‚æœ capped ä¸º trueï¼Œä¹Ÿéœ€è¦æŒ‡å®šè¯¥å­—æ®µã€‚ max æ•°å€¼ ï¼ˆå¯é€‰ï¼‰æŒ‡å®šå›ºå®šé›†åˆä¸­åŒ…å«æ–‡æ¡£çš„æœ€å¤§æ•°é‡ã€‚ å¦‚æœæ˜¯æ–°å»ºä¸€ä¸ªé›†åˆï¼Œè¿™ç§æ–¹å¼è‚¯å®šæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœè¦åŒæ­¥è€æ•°æ®å‘¢ï¼Ÿ æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ªé›†åˆ daily_report é›†åˆï¼Œé‡Œé¢æœ‰ä¸€äº›è€æ•°æ®ï¼š daily_report é›†åˆ æˆ‘çš„æƒ³æ³•æ˜¯ï¼Œå°† daily_report é‡å‘½åä¸º daily_report_bakï¼Œæ–°å»ºé›†åˆ daily_reportï¼Œå°± daily_report_bak æ•°æ®åŒæ­¥åˆ° daily_reportã€‚ æµç¨‹ é‡å‘½åé›†åˆï¼š db.daily_report.renameCollection(\"daily_report_bak\") æ–°å»ºé›†åˆï¼š db.createCollection(\"daily_report\", {capped:true,size:6142800,max:4}) è¯¥é›†åˆæœ€å¤§å€¼å­—èŠ‚æ•°ä¸ºï¼š6142800å­—èŠ‚ = 6142800B â‰ˆ 6000KB â‰ˆ 5M ã€‚ è¯¥é›†åˆä¸­åŒ…å«æ–‡æ¡£çš„æœ€å¤§æ•°é‡ä¸º 4 æ¡ã€‚ åŒæ­¥æ—§æ•°æ® db.daily_report_bak.find().forEach(function(doc){db.daily_report.insert(doc)}) ","date":"2021-04-14","objectID":"/mongodb-glance/:9:2","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#å®šé•¿è¡¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ MongoDB æ•™ç¨‹ MongoDBé«˜çº§æŸ¥è¯¢ MongoDBå¸¸ç”¨æ“ä½œå‘½ä»¤å¤§å…¨ æŸ¥è¯¢, æ›´æ–°, æŠ•å°„, å’Œé›†åˆç®—ç¬¦ Field Update Operators è§£å†³ Error: couldnâ€™t add user: No role named userAdminAnyDatabase@ å¼‚å¸¸é—®é¢˜ ","date":"2021-04-14","objectID":"/mongodb-glance/:10:0","series":null,"tags":["mongodb"],"title":"Mongodb å­¦ä¹ ç¬”è®°","uri":"/mongodb-glance/#å‚è€ƒ"},{"categories":["golang"],"content":"golang grpc,golang,rpc,grpc,grpc å…¥é—¨","date":"2021-04-05","objectID":"/grpc-demo/","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/"},{"categories":["golang"],"content":"RPC æ˜¯ä¸€ç§è·¨è¯­è¨€çš„åè®®ï¼Œå®ƒå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸åŒçš„è¯­è¨€ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚ è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆè‹±è¯­ï¼šRemote Procedure Callï¼Œç¼©å†™ä¸º RPCï¼‰æ˜¯ä¸€ä¸ªè®¡ç®—æœºé€šä¿¡åè®®ã€‚è¯¥åè®®å…è®¸è¿è¡Œäºä¸€å°è®¡ç®—æœºçš„ç¨‹åºè°ƒç”¨å¦ä¸€ä¸ª åœ°å€ç©ºé—´ï¼ˆé€šå¸¸ä¸ºä¸€ä¸ªå¼€æ”¾ç½‘ç»œçš„ä¸€å°è®¡ç®—æœºï¼‰çš„å­ç¨‹åºï¼Œè€Œç¨‹åºå‘˜å°±åƒè°ƒç”¨æœ¬åœ°ç¨‹åºä¸€æ ·ï¼Œæ— éœ€é¢å¤–åœ°ä¸ºè¿™ä¸ªäº¤äº’ä½œç”¨ç¼–ç¨‹ï¼ˆæ— éœ€å…³æ³¨ç»†èŠ‚ï¼‰ã€‚ RPCæ˜¯ä¸€ç§æœåŠ¡å™¨-å®¢æˆ·ç«¯ï¼ˆClient/Serverï¼‰æ¨¡å¼ï¼Œç»å…¸å®ç°æ˜¯ä¸€ä¸ªé€šè¿‡å‘é€è¯·æ±‚-æ¥å—å›åº”è¿›è¡Œä¿¡æ¯äº¤äº’çš„ç³»ç»Ÿã€‚ ","date":"2021-04-05","objectID":"/grpc-demo/:0:0","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/#"},{"categories":["golang"],"content":" å®‰è£… go install github.com/golang/protobuf/protoc-gen-go@v1.4.0 go install google.golang.org/grpc/cmd/protoc-gen-go-grpc@v1.1 ä¸æ¨èä½¿ç”¨ google.golang.org/protobuf/cmd/protoc-gen-go@v1.26 è¿™ä¸ªç‰ˆæœ¬å¤ªé«˜äº†ï¼Œå¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œ --go_out: protoc-gen-go: plugins are not supported; use 'protoc --go-grpc_out=...' to generate gRPC See https://grpc.io/docs/languages/go/quickstart/#regenerate-grpc-code for more information. å‚è€ƒè§£å†³æ–¹æ¡ˆè®°ä¸€æ¬¡å¥‡å¦™çš„go-protobufåŒ…å‡çº§ä¹‹æ—… protoc å·¥å…·å®‰è£… ä¸‹è½½åœ°å€ï¼Œä¸‹è½½è§£å‹å°† bin ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚ ","date":"2021-04-05","objectID":"/grpc-demo/:1:0","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/#å®‰è£…"},{"categories":["golang"],"content":" å®šä¹‰ proto æ–‡ä»¶ syntax = \"proto3\"; // ä½¿ç”¨protobufç‰ˆæœ¬3 option go_package = \"./protobuf\"; // è¿™ä¸ªå½±å“ç”Ÿæˆçš„ç›®å½•åŠgoçš„packageå‘½å // å®šä¹‰ä¸€ä¸ªè®¡ç®—æœåŠ¡, è¾“å…¥ä¸ºCalcRequest, è¾“å‡ºä¸ºCalcResponse service CalculatorService { rpc calc(CalcRequest) returns (CalcResponse) {}; } // è®¡ç®—ä¸¤ä¸ªæ•°æŸç§è¿ç®—(å¦‚åŠ æ³•)çš„å‚æ•° message CalcRequest { double a = 1; double b = 2; string op = 3; } // è®¡ç®—ç»“æœ message CalcResponse { double r = 1; } ","date":"2021-04-05","objectID":"/grpc-demo/:2:0","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/#å®šä¹‰-proto-æ–‡ä»¶"},{"categories":["golang"],"content":" ç”Ÿæˆ .pb.go æ–‡ä»¶ protoc --go_out=plugins=grpc:. calculator.proto ","date":"2021-04-05","objectID":"/grpc-demo/:3:0","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/#ç”Ÿæˆ-pbgo-æ–‡ä»¶"},{"categories":["golang"],"content":" rpc server package main import ( \"context\" \"fmt\" \"net\" \"go.src/grpc/calculator/protobuf\" \"google.golang.org/grpc\" ) // å®ç°: CalculatorServiceServeræ¥å£, åœ¨calculator.pb.goä¸­å®šä¹‰ type server struct{} func (s server) Calc(ctx context.Context, req *protobuf.CalcRequest) (resp *protobuf.CalcResponse, err error) { a := req.GetA() b := req.GetB() op := req.GetOp() resp = \u0026protobuf.CalcResponse{} switch op { case \"+\": resp.R = a + b case \"-\": resp.R = a - b case \"*\": resp.R = a * b case \"/\": if b == 0 { err = fmt.Errorf(\"divided by zero\") return } resp.R = a / b } return } // å¯åŠ¨rpc server func main() { listener, err := net.Listen(\"tcp\", \"localhost:3233\") if err != nil { panic(err) } s := grpc.NewServer() protobuf.RegisterCalculatorServiceServer(s, \u0026server{}) fmt.Println(\"server start\") err = s.Serve(listener) if err != nil { panic(err) } } ","date":"2021-04-05","objectID":"/grpc-demo/:4:0","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/#rpc-server"},{"categories":["golang"],"content":" rpc client package main import ( \"context\" \"fmt\" \"log\" \"go.src/grpc/calculator/protobuf\" \"google.golang.org/grpc\" \"google.golang.org/grpc/credentials/insecure\" ) func main() { // è¿ä¸Šgrpc server //conn, err := grpc.Dial(\"localhost:3233\", grpc.WithInsecure()) conn, err := grpc.Dial(\"localhost:3233\", grpc.WithTransportCredentials(insecure.NewCredentials())) if err != nil { log.Fatalf(\"did not connect: %v\", err) } defer conn.Close() c := protobuf.NewCalculatorServiceClient(conn) // è°ƒç”¨è¿œç¨‹æ–¹æ³• resp, err := c.Calc(context.Background(), \u0026protobuf.CalcRequest{ A: 1, B: 2, Op: \"+\", }) if err != nil { fmt.Println(\"calc err: \", err.Error()) return } fmt.Println(\"calc success,respR: \", resp.GetR()) // 3 } ","date":"2021-04-05","objectID":"/grpc-demo/:5:0","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/#rpc-client"},{"categories":["golang"],"content":" è¿è¡Œæµ‹è¯• server client ","date":"2021-04-05","objectID":"/grpc-demo/:6:0","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/#è¿è¡Œæµ‹è¯•"},{"categories":["golang"],"content":" ç¤ºä¾‹ä¸‹è½½ç¤ºä¾‹æºç åœ°å€ ","date":"2021-04-05","objectID":"/grpc-demo/:7:0","series":null,"tags":["golang"],"title":"grpc å…¥é—¨åº”ç”¨","uri":"/grpc-demo/#ç¤ºä¾‹ä¸‹è½½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é˜»å¡IOæœåŠ¡ç«¯ä¸ºäº†å¤„ç†å®¢æˆ·ç«¯çš„è¿æ¥å’Œè¯·æ±‚çš„æ•°æ®ï¼Œå†™äº†å¦‚ä¸‹ä»£ç ã€‚ listenfd = socket(); // æ‰“å¼€ä¸€ä¸ªç½‘ç»œé€šä¿¡ç«¯å£ bind(listenfd); // ç»‘å®š listen(listenfd); // ç›‘å¬ while(1) { connfd = accept(listenfd); // é˜»å¡å»ºç«‹è¿æ¥ int n = read(connfd, buf); // é˜»å¡è¯»æ•°æ® doSomeThing(buf); // åˆ©ç”¨è¯»åˆ°çš„æ•°æ®åšäº›ä»€ä¹ˆ close(connfd); // å…³é—­è¿æ¥ï¼Œå¾ªç¯ç­‰å¾…ä¸‹ä¸€ä¸ªè¿æ¥ } è¿™æ®µä»£ç ä¼šæ‰§è¡Œå¾—ç£•ç£•ç»Šç»Šï¼Œå°±åƒè¿™æ ·ã€‚ é˜»å¡IO å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡ç«¯çš„çº¿ç¨‹é˜»å¡åœ¨äº†ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯acceptå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯readå‡½æ•°ã€‚ å¦‚æœå†æŠŠreadå‡½æ•°çš„ç»†èŠ‚å±•å¼€ï¼Œæˆ‘ä»¬ä¼šå‘ç°å…¶é˜»å¡åœ¨äº†ä¸¤ä¸ªé˜¶æ®µã€‚ä¸€ä¸ªé˜¶æ®µæ˜¯æ•°æ®ä»ç½‘å¡æ‹·è´åˆ°å†…æ ¸ç¼“å†²åŒºï¼Œç¬¬äºŒä¸ªé˜¶æ®µæ˜¯æ•°æ®ä»å†…æ ¸ç¼“å†²åŒºæ‹·è´åˆ°ç”¨æˆ·ç¼“å†²åŒºã€‚ read é˜»å¡ è¿™å°±æ˜¯ä¼ ç»Ÿçš„é˜»å¡ IOã€‚æ•´ä½“æµç¨‹å¦‚ä¸‹å›¾ğŸ‘‡ é˜»å¡IOæµç¨‹ å¦‚æœè¿™ä¸ªè¿æ¥çš„å®¢æˆ·ç«¯ä¸€ç›´ä¸å‘æ•°æ®ï¼Œé‚£ä¹ˆæœåŠ¡ç«¯çº¿ç¨‹å°†ä¼šä¸€ç›´é˜»å¡åœ¨readå‡½æ•°ä¸Šä¸è¿”å›ï¼Œä¹Ÿæ— æ³•æ¥å—å…¶ä»–å®¢æˆ·ç«¯è¿æ¥ï¼Œè¿™è‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:1:0","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#é˜»å¡io"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" éé˜»å¡IOä¸ºäº†è§£å†³é˜»å¡ IO çš„é—®é¢˜ï¼Œå…¶å…³é”®åœ¨äºæ”¹é€ readå‡½æ•°ã€‚æœ‰ä¸€ç§èªæ˜çš„åŠæ³•æ˜¯ï¼Œæ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹æˆ–çº¿ç¨‹ï¼Œå»è°ƒç”¨readå‡½æ•°ï¼Œå¹¶åšä¸šåŠ¡å¤„ç†ã€‚ while(1) { connfd = accept(listenfd); // é˜»å¡å»ºç«‹è¿æ¥ pthread_createï¼ˆdoWork); // åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ } void doWork() { int n = read(connfd, buf); // é˜»å¡è¯»æ•°æ® doSomeThing(buf); // åˆ©ç”¨è¯»åˆ°çš„æ•°æ®åšäº›ä»€ä¹ˆ close(connfd); // å…³é—­è¿æ¥ï¼Œå¾ªç¯ç­‰å¾…ä¸‹ä¸€ä¸ªè¿æ¥ } è¿™æ ·ï¼Œå½“ç»™ä¸€ä¸ªå®¢æˆ·ç«¯å»ºç«‹å¥½è¿æ¥åï¼Œå°±å¯ä»¥ç«‹åˆ»ç­‰å¾…æ–°çš„å®¢æˆ·ç«¯è¿æ¥ï¼Œè€Œä¸ç”¨é˜»å¡åœ¨åŸå®¢æˆ·ç«¯çš„readè¯·æ±‚ä¸Šã€‚ å‡éé˜»å¡IO ä¸è¿‡ï¼Œè¿™ä¸å«éé˜»å¡ IOï¼Œåªä¸è¿‡ç”¨äº†å¤šçº¿ç¨‹çš„æ‰‹æ®µä½¿å¾—ä¸»çº¿ç¨‹æ²¡æœ‰å¡åœ¨readå‡½æ•°ä¸Šä¸å¾€ä¸‹èµ°ç½¢äº†ã€‚æ“ä½œç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›çš„readå‡½æ•°ä»ç„¶æ˜¯é˜»å¡çš„ã€‚ çœŸæ­£çš„éé˜»å¡ IOï¼Œä¸èƒ½æ˜¯é€šè¿‡æˆ‘ä»¬ç”¨æˆ·å±‚çš„å°æŠŠæˆï¼Œè€Œæ˜¯è¦æ³è¯·æ“ä½œç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªéé˜»å¡çš„readå‡½æ•°ã€‚ è¿™ä¸ªreadå‡½æ•°çš„æ•ˆæœæ˜¯ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®åˆ°è¾¾æ—¶ï¼ˆåˆ°è¾¾ç½‘å¡å¹¶æ‹·è´åˆ°äº†å†…æ ¸ç¼“å†²åŒºï¼‰ï¼Œç«‹åˆ»è¿”å›ä¸€ä¸ªé”™è¯¯å€¼ï¼ˆ-1ï¼‰ï¼Œè€Œä¸æ˜¯é˜»å¡åœ°ç­‰å¾…ã€‚æ“ä½œç³»ç»Ÿæä¾›äº†è¿™æ ·çš„åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨è°ƒç”¨readå‰ï¼Œå°†æ–‡ä»¶æè¿°ç¬¦ï¼ˆä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯çš„è¿æ¥ï¼‰è®¾ç½®ä¸ºéé˜»å¡å³å¯ã€‚ fcntl(connfd, F_SETFL, O_NONBLOCK); int n = read(connfd, buffer) != SUCCESS); è¿™æ ·ï¼Œå°±éœ€è¦ç”¨æˆ·çº¿ç¨‹å¾ªç¯è°ƒç”¨readï¼Œç›´åˆ°è¿”å›å€¼ä¸ä¸º -1ï¼Œå†å¼€å§‹å¤„ç†ä¸šåŠ¡ã€‚ éé˜»å¡IO è¿™é‡Œæœ‰ä¸€ä¸ªç»†èŠ‚â˜ï¸ã€‚éé˜»å¡çš„readï¼ŒæŒ‡çš„æ˜¯åœ¨æ•°æ®åˆ°è¾¾å‰ï¼Œå³æ•°æ®è¿˜æœªåˆ°è¾¾ç½‘å¡ï¼Œæˆ–è€…åˆ°è¾¾ç½‘å¡ä½†è¿˜æ²¡æœ‰æ‹·è´åˆ°å†…æ ¸ç¼“å†²åŒºä¹‹å‰ï¼Œè¿™ä¸ªé˜¶æ®µæ˜¯éé˜»å¡çš„ï¼Œä¸€æ—¦æ•°æ®å·²åˆ°è¾¾å†…æ ¸ç¼“å†²åŒºï¼Œæ­¤æ—¶è°ƒç”¨readå‡½æ•°ä»ç„¶æ˜¯é˜»å¡çš„ï¼Œéœ€è¦ç­‰å¾…æ•°æ®ä»å†…æ ¸ç¼“å†²åŒºæ‹·è´åˆ°ç”¨æˆ·ç¼“å†²åŒºï¼Œæ‰èƒ½è¿”å›ã€‚æ•´ä½“æµç¨‹å¦‚ä¸‹å›¾ğŸ‘‡ éé˜»å¡IOæµç¨‹ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:2:0","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#éé˜»å¡io"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" IOå¤šè·¯å¤ç”¨ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼ŒæœåŠ¡å™¨ç«¯çš„çº¿ç¨‹èµ„æºå¾ˆå®¹æ˜“è¢«è€—å…‰ã€‚ çº¿ç¨‹èµ„æº å½“ç„¶è¿˜æœ‰ä¸ªèªæ˜çš„åŠæ³•ï¼Œæˆ‘ä»¬å¯ä»¥æ¯ä¸ªacceptå®¢æˆ·ç«¯è¿æ¥åï¼Œå°†è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼ˆconnfdï¼‰æ”¾åˆ°ä¸€ä¸ªæ•°ç»„é‡Œã€‚ fdlist.add(connfd); ç„¶åå¼€ä¸€ä¸ªæ–°çš„çº¿ç¨‹å»ä¸æ–­éå†è¿™ä¸ªæ•°ç»„ï¼Œè°ƒç”¨æ¯ä¸€ä¸ªå…ƒç´ çš„éé˜»å¡readæ–¹æ³•ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æˆåŠŸç”¨ä¸€ä¸ªçº¿ç¨‹å¤„ç†äº†å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ã€‚ while(1) { for(fd \u003c-- fdlist) { if(read(fd) != -1) { doSomeThing(); } } } fdlist è¿™æ ·çœ‹èµ·æ¥æ˜¯ä¸æ˜¯è§‰å¾—è¿™æœ‰äº›å¤šè·¯å¤ç”¨çš„æ„æ€ï¼Ÿ ä½†è¿™å’Œæˆ‘ä»¬ç”¨å¤šçº¿ç¨‹å»å°†é˜»å¡ IO æ”¹é€ æˆçœ‹èµ·æ¥æ˜¯éé˜»å¡ IO ä¸€æ ·ï¼Œè¿™ç§éå†æ–¹å¼ä¹Ÿåªæ˜¯æˆ‘ä»¬ç”¨æˆ·è‡ªå·±æƒ³å‡ºçš„å°æŠŠæˆï¼Œæ¯æ¬¡éå†é‡åˆ°readè¿”å› -1 æ—¶ä»ç„¶æ˜¯ä¸€æ¬¡æµªè´¹èµ„æºçš„ç³»ç»Ÿè°ƒç”¨ã€‚åœ¨whileå¾ªç¯é‡Œåšç³»ç»Ÿè°ƒç”¨ï¼Œæ˜¯ä¸åˆ’ç®—çš„ã€‚æ‰€ä»¥ï¼Œè¿˜æ˜¯å¾—æ³è¯·æ“ä½œç³»ç»Ÿè€å¤§ï¼Œæä¾›ç»™æˆ‘ä»¬ä¸€ä¸ªæœ‰è¿™æ ·æ•ˆæœçš„å‡½æ•°ï¼Œæˆ‘ä»¬å°†ä¸€æ‰¹æ–‡ä»¶æè¿°ç¬¦é€šè¿‡ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨ä¼ ç»™å†…æ ¸ï¼Œç”±å†…æ ¸å±‚å»éå†ï¼Œæ‰èƒ½çœŸæ­£è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:3:0","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#ioå¤šè·¯å¤ç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" selectselect æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ç³»ç»Ÿè°ƒç”¨å‡½æ•°ï¼Œé€šè¿‡å®ƒï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„æ•°ç»„å‘ç»™æ“ä½œç³»ç»Ÿï¼Œè®©æ“ä½œç³»ç»Ÿå»éå†ï¼Œç¡®å®šå“ªä¸ªæ–‡ä»¶æè¿°ç¬¦å¯ä»¥è¯»å†™ï¼Œç„¶åå‘Šè¯‰æˆ‘ä»¬å»å¤„ç†ï¼š select selectç³»ç»Ÿè°ƒç”¨çš„å‡½æ•°å®šä¹‰å¦‚ä¸‹ï¼š int select( int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout); // nfds:ç›‘æ§çš„æ–‡ä»¶æè¿°ç¬¦é›†é‡Œæœ€å¤§æ–‡ä»¶æè¿°ç¬¦åŠ 1 // readfdsï¼šç›‘æ§æœ‰è¯»æ•°æ®åˆ°è¾¾æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œä¼ å…¥ä¼ å‡ºå‚æ•° // writefdsï¼šç›‘æ§å†™æ•°æ®åˆ°è¾¾æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œä¼ å…¥ä¼ å‡ºå‚æ•° // exceptfdsï¼šç›‘æ§å¼‚å¸¸å‘ç”Ÿè¾¾æ–‡ä»¶æè¿°ç¬¦é›†åˆ, ä¼ å…¥ä¼ å‡ºå‚æ•° // timeoutï¼šå®šæ—¶é˜»å¡ç›‘æ§æ—¶é—´ï¼Œ3ç§æƒ…å†µ // 1.NULLï¼Œæ°¸è¿œç­‰ä¸‹å» // 2.è®¾ç½®timevalï¼Œç­‰å¾…å›ºå®šæ—¶é—´ // 3.è®¾ç½®timevalé‡Œæ—¶é—´å‡ä¸º0ï¼Œæ£€æŸ¥æè¿°å­—åç«‹å³è¿”å›ï¼Œè½®è¯¢ é‚£ä¹ˆæˆ‘ä»¬çš„æœåŠ¡ç«¯ä»£ç ï¼Œå°±è¿™æ ·æ¥å†™ï¼Œé¦–å…ˆä¸€ä¸ªçº¿ç¨‹ä¸æ–­æ¥å—å®¢æˆ·ç«¯è¿æ¥ï¼Œå¹¶æŠŠ socket æ–‡ä»¶æè¿°ç¬¦æ”¾åˆ°ä¸€ä¸ª list é‡Œã€‚ while(1) { connfd = accept(listenfd); fcntl(connfd, F_SETFL, O_NONBLOCK); fdlist.add(connfd); } ç„¶åï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¸å†è‡ªå·±éå†ï¼Œè€Œæ˜¯è°ƒç”¨ selectï¼Œå°†è¿™æ‰¹æ–‡ä»¶æè¿°ç¬¦ list äº¤ç»™æ“ä½œç³»ç»Ÿå»éå†ã€‚ while(1) { // æŠŠä¸€å †æ–‡ä»¶æè¿°ç¬¦ list ä¼ ç»™ select å‡½æ•° // æœ‰å·²å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦å°±è¿”å›ï¼Œnready è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªå°±ç»ªçš„ nready = select(list); ... } ä¸è¿‡ï¼Œå½“ select å‡½æ•°è¿”å›åï¼Œç”¨æˆ·ä¾ç„¶éœ€è¦éå†åˆšåˆšæäº¤ç»™æ“ä½œç³»ç»Ÿçš„ listï¼Œåªä¸è¿‡ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†å‡†å¤‡å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦åšä¸Šæ ‡è¯†ï¼Œç”¨æˆ·å±‚å°†ä¸ä¼šå†æœ‰æ— æ„ä¹‰çš„ç³»ç»Ÿè°ƒç”¨å¼€é”€ã€‚ while(1) { nready = select(list); // ç”¨æˆ·å±‚ä¾ç„¶è¦éå†ï¼Œåªä¸è¿‡å°‘äº†å¾ˆå¤šæ— æ•ˆçš„ç³»ç»Ÿè°ƒç”¨ for(fd \u003c-- fdlist) { if(fd != -1) { // åªè¯»å·²å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ read(fd, buf); // æ€»å…±åªæœ‰ nready ä¸ªå·²å°±ç»ªæè¿°ç¬¦ï¼Œä¸ç”¨è¿‡å¤šéå† if(--nready == 0) break; } } } æ­£å¦‚åˆšåˆšçš„åŠ¨å›¾ä¸­æ‰€æè¿°çš„ï¼Œå…¶ç›´è§‚æ•ˆæœå¦‚ä¸‹ã€‚ select å¯ä»¥çœ‹å‡ºå‡ ä¸ªç»†èŠ‚ï¼š select è°ƒç”¨éœ€è¦ä¼ å…¥ fd æ•°ç»„ï¼Œéœ€è¦æ‹·è´ä¸€ä»½åˆ°å†…æ ¸ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹è¿™æ ·çš„æ‹·è´æ¶ˆè€—çš„èµ„æºæ˜¯æƒŠäººçš„ã€‚ï¼ˆå¯ä¼˜åŒ–ä¸ºä¸å¤åˆ¶ï¼‰ select åœ¨å†…æ ¸å±‚ä»ç„¶æ˜¯é€šè¿‡éå†çš„æ–¹å¼æ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦çš„å°±ç»ªçŠ¶æ€ï¼Œæ˜¯ä¸ªåŒæ­¥è¿‡ç¨‹ï¼Œåªä¸è¿‡æ— ç³»ç»Ÿè°ƒç”¨åˆ‡æ¢ä¸Šä¸‹æ–‡çš„å¼€é”€ã€‚ï¼ˆå†…æ ¸å±‚å¯ä¼˜åŒ–ä¸ºå¼‚æ­¥äº‹ä»¶é€šçŸ¥ï¼‰ select ä»…ä»…è¿”å›å¯è¯»æ–‡ä»¶æè¿°ç¬¦çš„ä¸ªæ•°ï¼Œå…·ä½“å“ªä¸ªå¯è¯»è¿˜æ˜¯è¦ç”¨æˆ·è‡ªå·±éå†ã€‚ï¼ˆå¯ä¼˜åŒ–ä¸ºåªè¿”å›ç»™ç”¨æˆ·å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ— éœ€ç”¨æˆ·åšæ— æ•ˆçš„éå†ï¼‰ æ•´ä¸ª select çš„æµç¨‹å›¾å¦‚ä¸‹ğŸ‘‡ selectæµç¨‹å›¾ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§æ–¹å¼ï¼Œæ—¢åšåˆ°äº†ä¸€ä¸ªçº¿ç¨‹å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼ˆæ–‡ä»¶æè¿°ç¬¦ï¼‰ï¼Œåˆå‡å°‘äº†ç³»ç»Ÿè°ƒç”¨çš„å¼€é”€ï¼ˆå¤šä¸ªæ–‡ä»¶æè¿°ç¬¦åªæœ‰ä¸€æ¬¡ select çš„ç³»ç»Ÿè°ƒç”¨ + n æ¬¡å°±ç»ªçŠ¶æ€çš„æ–‡ä»¶æè¿°ç¬¦çš„readç³»ç»Ÿè°ƒç”¨ï¼‰ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:3:1","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#select"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" pollpoll ä¹Ÿæ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ç³»ç»Ÿè°ƒç”¨å‡½æ•°ã€‚ int poll(struct pollfd *fds, nfds_tnfds, int timeout); struct pollfd { intfd; /*æ–‡ä»¶æè¿°ç¬¦*/ shortevents; /*ç›‘æ§çš„äº‹ä»¶*/ shortrevents; /*ç›‘æ§äº‹ä»¶ä¸­æ»¡è¶³æ¡ä»¶è¿”å›çš„äº‹ä»¶*/ }; å®ƒå’Œ select çš„ä¸»è¦åŒºåˆ«å°±æ˜¯ï¼Œå»æ‰äº† select åªèƒ½ç›‘å¬ 1024 ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„é™åˆ¶ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:3:2","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#poll"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" epollepoll æ˜¯æœ€ç»ˆçš„å¤§ bossï¼Œå®ƒè§£å†³äº† select å’Œ poll çš„ä¸€äº›é—®é¢˜ã€‚ è¿˜è®°å¾—ä¸Šé¢è¯´çš„ select çš„ä¸‰ä¸ªç»†èŠ‚ä¹ˆâ“ select è°ƒç”¨éœ€è¦ä¼ å…¥ fd æ•°ç»„ï¼Œéœ€è¦æ‹·è´ä¸€ä»½åˆ°å†…æ ¸ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹è¿™æ ·çš„æ‹·è´æ¶ˆè€—çš„èµ„æºæ˜¯æƒŠäººçš„ã€‚ï¼ˆå¯ä¼˜åŒ–ä¸ºä¸å¤åˆ¶ï¼‰ select åœ¨å†…æ ¸å±‚ä»ç„¶æ˜¯é€šè¿‡éå†çš„æ–¹å¼æ£€æŸ¥æ–‡ä»¶æè¿°ç¬¦çš„å°±ç»ªçŠ¶æ€ï¼Œæ˜¯ä¸ªåŒæ­¥è¿‡ç¨‹ï¼Œåªä¸è¿‡æ— ç³»ç»Ÿè°ƒç”¨åˆ‡æ¢ä¸Šä¸‹æ–‡çš„å¼€é”€ã€‚ï¼ˆå†…æ ¸å±‚å¯ä¼˜åŒ–ä¸ºå¼‚æ­¥äº‹ä»¶é€šçŸ¥ï¼‰ select ä»…ä»…è¿”å›å¯è¯»æ–‡ä»¶æè¿°ç¬¦çš„ä¸ªæ•°ï¼Œå…·ä½“å“ªä¸ªå¯è¯»è¿˜æ˜¯è¦ç”¨æˆ·è‡ªå·±éå†ã€‚ï¼ˆå¯ä¼˜åŒ–ä¸ºåªè¿”å›ç»™ç”¨æˆ·å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæ— éœ€ç”¨æˆ·åšæ— æ•ˆçš„éå†ï¼‰ã€‚ æ‰€ä»¥ epoll ä¸»è¦å°±æ˜¯é’ˆå¯¹è¿™ä¸‰ç‚¹è¿›è¡Œäº†æ”¹è¿›ã€‚ å†…æ ¸ä¸­ä¿å­˜ä¸€ä»½æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œæ— éœ€ç”¨æˆ·æ¯æ¬¡éƒ½é‡æ–°ä¼ å…¥ï¼Œåªéœ€å‘Šè¯‰å†…æ ¸ä¿®æ”¹çš„éƒ¨åˆ†å³å¯ã€‚ å†…æ ¸ä¸å†é€šè¿‡è½®è¯¢çš„æ–¹å¼æ‰¾åˆ°å°±ç»ªçš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œæ˜¯é€šè¿‡å¼‚æ­¥ IO äº‹ä»¶å”¤é†’ã€‚ å†…æ ¸ä»…ä¼šå°†æœ‰ IO äº‹ä»¶çš„æ–‡ä»¶æè¿°ç¬¦è¿”å›ç»™ç”¨æˆ·ï¼Œç”¨æˆ·ä¹Ÿæ— éœ€éå†æ•´ä¸ªæ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚ epoll ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:3:3","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#epoll"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å°ç»“ä¸€åˆ‡çš„å¼€å§‹ï¼Œéƒ½èµ·æºäºè¿™ä¸ªreadå‡½æ•°æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ï¼Œè€Œä¸”æ˜¯é˜»å¡çš„ï¼Œæˆ‘ä»¬å«å®ƒé˜»å¡ IOã€‚ä¸ºäº†ç ´è¿™ä¸ªå±€ï¼Œç¨‹åºå‘˜åœ¨ç”¨æˆ·æ€é€šè¿‡å¤šçº¿ç¨‹æ¥é˜²æ­¢ä¸»çº¿ç¨‹å¡æ­»ã€‚ åæ¥æ“ä½œç³»ç»Ÿå‘ç°è¿™ä¸ªéœ€æ±‚æ¯”è¾ƒå¤§ï¼Œäºæ˜¯åœ¨æ“ä½œç³»ç»Ÿå±‚é¢æä¾›äº†éé˜»å¡çš„readå‡½æ•°ï¼Œè¿™æ ·ç¨‹åºå‘˜å°±å¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹å†…å®Œæˆå¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„è¯»å–ï¼Œè¿™å°±æ˜¯éé˜»å¡ IOã€‚ ä½†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„è¯»å–å°±éœ€è¦éå†ï¼Œå½“é«˜å¹¶å‘åœºæ™¯è¶Šæ¥è¶Šå¤šæ—¶ï¼Œç”¨æˆ·æ€éå†çš„æ–‡ä»¶æè¿°ç¬¦ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œç›¸å½“äºåœ¨whileå¾ªç¯é‡Œè¿›è¡Œäº†è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿè°ƒç”¨ã€‚ åæ¥æ“ä½œç³»ç»Ÿåˆå‘ç°è¿™ä¸ªåœºæ™¯éœ€æ±‚é‡è¾ƒå¤§ï¼Œäºæ˜¯åˆåœ¨æ“ä½œç³»ç»Ÿå±‚é¢æä¾›äº†è¿™æ ·çš„éå†æ–‡ä»¶æè¿°ç¬¦çš„æœºåˆ¶ï¼Œè¿™å°±æ˜¯ IO å¤šè·¯å¤ç”¨ã€‚ å¤šè·¯å¤ç”¨æœ‰ä¸‰ä¸ªå‡½æ•°ï¼Œæœ€å¼€å§‹æ˜¯ selectï¼Œç„¶ååˆå‘æ˜äº† poll è§£å†³äº† select æ–‡ä»¶æè¿°ç¬¦çš„é™åˆ¶ï¼Œç„¶ååˆå‘æ˜äº† epoll è§£å†³ select çš„ä¸‰ä¸ªä¸è¶³ã€‚ æ‰€ä»¥ï¼ŒIO æ¨¡å‹çš„æ¼”è¿›ï¼Œå…¶å®å°±æ˜¯æ—¶ä»£çš„å˜åŒ–ï¼Œå€’é€¼ç€æ“ä½œç³»ç»Ÿå°†æ›´å¤šçš„åŠŸèƒ½åŠ åˆ°è‡ªå·±çš„å†…æ ¸è€Œå·²ã€‚ å¦‚æœä½ å»ºç«‹äº†è¿™æ ·çš„æ€ç»´ï¼Œå¾ˆå®¹æ˜“å‘ç°ç½‘ä¸Šçš„ä¸€äº›é”™è¯¯ã€‚æ¯”å¦‚å¥½å¤šæ–‡ç« è¯´ï¼Œå¤šè·¯å¤ç”¨ä¹‹æ‰€ä»¥æ•ˆç‡é«˜ï¼Œæ˜¯å› ä¸ºç”¨ä¸€ä¸ªçº¿ç¨‹å°±å¯ä»¥ç›‘æ§å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ã€‚ è¿™æ˜¾ç„¶æ˜¯çŸ¥å…¶ç„¶è€Œä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œå¤šè·¯å¤ç”¨äº§ç”Ÿçš„æ•ˆæœï¼Œå®Œå…¨å¯ä»¥ç”±ç”¨æˆ·æ€å»éå†æ–‡ä»¶æè¿°ç¬¦å¹¶è°ƒç”¨å…¶éé˜»å¡çš„ read å‡½æ•°å®ç°ã€‚è€Œå¤šè·¯å¤ç”¨å¿«çš„åŸå› åœ¨äºï¼Œæ“ä½œç³»ç»Ÿæä¾›äº†è¿™æ ·çš„ç³»ç»Ÿè°ƒç”¨ï¼Œä½¿å¾—åŸæ¥çš„ while å¾ªç¯é‡Œå¤šæ¬¡ç³»ç»Ÿè°ƒç”¨ï¼Œå˜æˆäº†ä¸€æ¬¡ç³»ç»Ÿè°ƒç”¨ + å†…æ ¸å±‚éå†è¿™äº›æ–‡ä»¶æè¿°ç¬¦ã€‚å°±å¥½æ¯”å¹³æ—¶å†™ä¸šåŠ¡ä»£ç ï¼ŒæŠŠåŸæ¥ while å¾ªç¯é‡Œè°ƒ http æ¥å£è¿›è¡Œæ‰¹é‡ï¼Œæ”¹æˆäº†è®©å¯¹æ–¹æä¾›ä¸€ä¸ªæ‰¹é‡æ·»åŠ çš„ http æ¥å£ï¼Œç„¶åä¸€æ¬¡ rpc è¯·æ±‚å°±å®Œæˆäº†æ‰¹é‡æ·»åŠ ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:3:4","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#å°ç»“"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å•çº¿ç¨‹çš„Redisä¸ºä»€ä¹ˆå¿« çº¯å†…å­˜æ“ä½œ å•çº¿ç¨‹æ“ä½œï¼Œé¿å…äº†é¢‘ç¹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢ é‡‡ç”¨äº†éé˜»å¡ I/O å¤šè·¯å¤ç”¨æœºåˆ¶ Redis ä½œä¸ºä¸€ä¸ªå†…å­˜æœåŠ¡å™¨ï¼Œå®ƒéœ€è¦å¤„ç†å¾ˆå¤šæ¥è‡ªå¤–éƒ¨çš„ç½‘ç»œè¯·æ±‚ï¼Œå®ƒä½¿ç”¨ I/O å¤šè·¯å¤ç”¨æœºåˆ¶åŒæ—¶ç›‘å¬å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„å¯è¯»å’Œå¯å†™çŠ¶æ€ï¼Œä¸€æ—¦æ”¶åˆ°ç½‘ç»œè¯·æ±‚å°±ä¼šåœ¨å†…å­˜ä¸­å¿«é€Ÿå¤„ç†ï¼Œç”±äºç»å¤§å¤šæ•°çš„æ“ä½œéƒ½æ˜¯çº¯å†…å­˜çš„ï¼Œæ‰€ä»¥å¤„ç†çš„é€Ÿåº¦ä¼šéå¸¸åœ°å¿«ã€‚ åœ¨ Redis 4.0 ä¹‹åçš„ç‰ˆæœ¬ï¼Œæƒ…å†µå°±æœ‰äº†ä¸€äº›å˜åŠ¨ï¼Œæ–°ç‰ˆçš„ Redis æœåŠ¡åœ¨æ‰§è¡Œä¸€äº›å‘½ä»¤æ—¶å°±ä¼šä½¿ç”¨ã€ä¸»å¤„ç†çº¿ç¨‹ã€ä¹‹å¤–çš„å…¶ä»–çº¿ç¨‹ã€‚è™½ç„¶ Redis åœ¨è¾ƒæ–°çš„ç‰ˆæœ¬ä¸­å¼•å…¥äº†å¤šçº¿ç¨‹ï¼Œä¸è¿‡æ˜¯åœ¨éƒ¨åˆ†å‘½ä»¤ä¸Šå¼•å…¥çš„ï¼Œå…¶ä¸­åŒ…æ‹¬éé˜»å¡çš„åˆ é™¤æ“ä½œï¼Œåœ¨æ•´ä½“çš„æ¶æ„è®¾è®¡ä¸Šï¼Œä¸»å¤„ç†ç¨‹åºè¿˜æ˜¯å•çº¿ç¨‹æ¨¡å‹çš„ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:4:0","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#å•çº¿ç¨‹çš„redisä¸ºä»€ä¹ˆå¿«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å•çº¿ç¨‹æ¨¡å‹Redis ä»ä¸€å¼€å§‹å°±é€‰æ‹©ä½¿ç”¨å•çº¿ç¨‹æ¨¡å‹å¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„ç»å¤§å¤šæ•°ç½‘ç»œè¯·æ±‚ï¼Œè¿™ç§è€ƒè™‘å…¶å®æ˜¯å¤šæ–¹é¢çš„ï¼Œå…¶ä¸­æœ€é‡è¦çš„å‡ ä¸ªåŸå› å¦‚ä¸‹ğŸ‘‡ ä½¿ç”¨å•çº¿ç¨‹æ¨¡å‹èƒ½å¸¦æ¥æ›´å¥½çš„å¯ç»´æŠ¤æ€§ï¼Œæ–¹ä¾¿å¼€å‘å’Œè°ƒè¯•ï¼› ä½¿ç”¨å•çº¿ç¨‹æ¨¡å‹ä¹Ÿèƒ½å¹¶å‘çš„å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼› Redis æœåŠ¡ä¸­è¿è¡Œçš„ç»å¤§å¤šæ•°æ“ä½œçš„æ€§èƒ½ç“¶é¢ˆéƒ½ä¸æ˜¯ CPUï¼› ä¸Šè¿°ä¸‰ä¸ªåŸå› ä¸­çš„æœ€åä¸€ä¸ªæ˜¯æœ€ç»ˆä½¿ç”¨å•çº¿ç¨‹æ¨¡å‹çš„å†³å®šæ€§å› ç´ ï¼Œå…¶ä»–çš„ä¸¤ä¸ªåŸå› éƒ½æ˜¯ä½¿ç”¨å•çº¿ç¨‹æ¨¡å‹é¢å¤–å¸¦æ¥çš„å¥½å¤„ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:4:1","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#å•çº¿ç¨‹æ¨¡å‹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¯ç»´æŠ¤æ€§å¯ç»´æŠ¤æ€§å¯¹äºä¸€ä¸ªé¡¹ç›®æ¥è¯´éå¸¸é‡è¦ï¼Œå¦‚æœä»£ç éš¾ä»¥è°ƒè¯•å’Œæµ‹è¯•ï¼Œé—®é¢˜ä¹Ÿç»å¸¸éš¾ä»¥å¤ç°ï¼Œè¿™å¯¹äºä»»ä½•ä¸€ä¸ªé¡¹ç›®æ¥è¯´éƒ½ä¼šä¸¥é‡åœ°å½±å“é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ã€‚å¤šçº¿ç¨‹æ¨¡å‹è™½ç„¶åœ¨æŸäº›æ–¹é¢è¡¨ç°ä¼˜å¼‚ï¼Œä½†æ˜¯å®ƒå´å¼•å…¥äº†ç¨‹åºæ‰§è¡Œé¡ºåºçš„ä¸ç¡®å®šæ€§ï¼Œä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ä¸å†æ˜¯ä¸²è¡Œçš„ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®çš„å˜é‡å¦‚æœæ²¡æœ‰è°¨æ…å¤„ç†å°±ä¼šå¸¦æ¥è¯¡å¼‚çš„é—®é¢˜ã€‚ å¼•å…¥äº†å¤šçº¿ç¨‹ï¼Œå°±å¿…é¡»è¦åŒæ—¶å¼•å…¥å¹¶å‘æ§åˆ¶æ¥ä¿è¯åœ¨å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®æ•°æ®æ—¶ç¨‹åºè¡Œä¸ºçš„æ­£ç¡®æ€§ï¼Œè¿™å°±éœ€è¦å·¥ç¨‹å¸ˆé¢å¤–ç»´æŠ¤å¹¶å‘æ§åˆ¶çš„ç›¸å…³ä»£ç ï¼Œä¾‹å¦‚ï¼Œéœ€è¦åœ¨å¯èƒ½è¢«å¹¶å‘è¯»å†™çš„å˜é‡ä¸Šå¢åŠ äº’æ–¥é”ã€‚åœ¨è®¿é—®è¿™äº›å˜é‡æˆ–è€…å†…å­˜ä¹‹å‰ä¹Ÿéœ€è¦å…ˆå¯¹è·å–äº’æ–¥é”ï¼Œä¸€æ—¦å¿˜è®°è·å–é”æˆ–è€…å¿˜è®°é‡Šæ”¾é”å°±å¯èƒ½ä¼šå¯¼è‡´å„ç§è¯¡å¼‚çš„é—®é¢˜ï¼Œç®¡ç†ç›¸å…³çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ä¹Ÿéœ€è¦ä»˜å‡ºé¢å¤–çš„ç ”å‘æˆæœ¬å’Œè´Ÿæ‹…ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:4:2","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#å¯ç»´æŠ¤æ€§"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ€§èƒ½ç“¶é¢ˆå¤šçº¿ç¨‹æŠ€æœ¯èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å……åˆ†åˆ©ç”¨ CPU çš„è®¡ç®—èµ„æºæ¥å¹¶å‘çš„æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œä½†æ˜¯ CPU èµ„æºå¾€å¾€éƒ½ä¸æ˜¯ Redis æœåŠ¡å™¨çš„æ€§èƒ½ç“¶é¢ˆã€‚å“ªæ€•åœ¨ä¸€ä¸ªæ™®é€šçš„ Linux æœåŠ¡å™¨ä¸Šå¯åŠ¨ Redis æœåŠ¡ï¼Œå®ƒä¹Ÿèƒ½åœ¨ 1s çš„æ—¶é—´å†…å¤„ç† 1,000,000 ä¸ªç”¨æˆ·è¯·æ±‚ã€‚ Redis å¹¶ä¸æ˜¯ CPU å¯†é›†å‹çš„æœåŠ¡ï¼Œå¦‚æœä¸å¼€å¯ AOF å¤‡ä»½ï¼Œæ‰€æœ‰ Redis çš„æ“ä½œéƒ½ä¼šåœ¨å†…å­˜ä¸­å®Œæˆä¸ä¼šæ¶‰åŠä»»ä½•çš„ I/O æ“ä½œï¼Œè¿™äº›æ•°æ®çš„è¯»å†™ç”±äºåªå‘ç”Ÿåœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥å¤„ç†é€Ÿåº¦æ˜¯éå¸¸å¿«çš„ï¼›æ•´ä¸ªæœåŠ¡çš„ç“¶é¢ˆåœ¨äºç½‘ç»œä¼ è¾“å¸¦æ¥çš„å»¶è¿Ÿå’Œç­‰å¾…å®¢æˆ·ç«¯çš„æ•°æ®ä¼ è¾“ï¼Œä¹Ÿå°±æ˜¯ç½‘ç»œ I/Oï¼Œæ‰€ä»¥ä½¿ç”¨å¤šçº¿ç¨‹æ¨¡å‹å¤„ç†å…¨éƒ¨çš„å¤–éƒ¨è¯·æ±‚å¯èƒ½ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ–¹æ¡ˆã€‚ AOF æ˜¯ Redis çš„ä¸€ç§æŒä¹…åŒ–æœºåˆ¶ï¼Œå®ƒä¼šåœ¨æ¯æ¬¡æ”¶åˆ°æ¥è‡ªå®¢æˆ·ç«¯çš„å†™è¯·æ±‚æ—¶ï¼Œå°†å…¶è®°å½•åˆ°æ—¥å¿—ä¸­ï¼Œæ¯æ¬¡ Redis æœåŠ¡å™¨å¯åŠ¨æ—¶éƒ½ä¼šé‡æ”¾ AOF æ—¥å¿—æ„å»ºåŸå§‹çš„æ•°æ®é›†ï¼Œä¿è¯æ•°æ®çš„æŒä¹…æ€§ã€‚ å¤šçº¿ç¨‹è™½ç„¶ä¼šå¸®åŠ©æˆ‘ä»¬æ›´å……åˆ†åœ°åˆ©ç”¨ CPU èµ„æºï¼Œä½†æ˜¯æ“ä½œç³»ç»Ÿä¸Šçº¿ç¨‹çš„åˆ‡æ¢ä¹Ÿä¸æ˜¯å…è´¹çš„ï¼Œçº¿ç¨‹åˆ‡æ¢å…¶å®ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ã€‚é¢‘ç¹çš„å¯¹çº¿ç¨‹çš„ä¸Šä¸‹æ–‡è¿›è¡Œåˆ‡æ¢å¯èƒ½è¿˜ä¼šå¯¼è‡´æ€§èƒ½åœ°æ€¥å‰§ä¸‹é™ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æˆ‘ä»¬ä¸ä»…æ²¡æœ‰æå‡è¯·æ±‚å¤„ç†çš„å¹³å‡é€Ÿåº¦ï¼Œåè€Œè¿›è¡Œäº†è´Ÿä¼˜åŒ–ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Redis å¯¹äºä½¿ç”¨å¤šçº¿ç¨‹æŠ€æœ¯éå¸¸è°¨æ…ã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:4:3","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#æ€§èƒ½ç“¶é¢ˆ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¼•å…¥å¤šçº¿ç¨‹å¯¹äº Redis ä¸­çš„ä¸€äº›è¶…å¤§é”®å€¼å¯¹ï¼Œå‡ å MB æˆ–è€…å‡ ç™¾ MB çš„æ•°æ®å¹¶ä¸èƒ½åœ¨å‡ æ¯«ç§’çš„æ—¶é—´å†…å¤„ç†å®Œï¼ŒRedis å¯èƒ½ä¼šéœ€è¦åœ¨é‡Šæ”¾å†…å­˜ç©ºé—´ä¸Šæ¶ˆè€—è¾ƒå¤šçš„æ—¶é—´ï¼Œè¿™äº›æ“ä½œå°±ä¼šé˜»å¡å¾…å¤„ç†çš„ä»»åŠ¡ï¼Œç„¶è€Œé‡Šæ”¾å†…å­˜ç©ºé—´çš„å·¥ä½œå…¶å®å¯ä»¥ç”±åå°çº¿ç¨‹å¼‚æ­¥è¿›è¡Œå¤„ç†ï¼Œè¿™ä¹Ÿå°±æ˜¯ UNLINK å‘½ä»¤çš„å®ç°åŸç†ï¼Œå®ƒåªä¼šå°†é”®ä»å…ƒæ•°æ®ä¸­åˆ é™¤ï¼ŒçœŸæ­£çš„åˆ é™¤æ“ä½œä¼šåœ¨åå°å¼‚æ­¥æ‰§è¡Œã€‚ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:5:0","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#å¼•å…¥å¤šçº¿ç¨‹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ åœ¨çº¿rediså·¥å…· ä½ ç®¡è¿™ç ´ç©æ„å« IO å¤šè·¯å¤ç”¨ï¼Ÿ ä¸ºä»€ä¹ˆ Redis é€‰æ‹©å•çº¿ç¨‹æ¨¡å‹ Redis å¸¸è§é—®é¢˜æ€»ç»“ ","date":"2021-04-03","objectID":"/redis-single-thread-why-so-fast/:6:0","series":["reproduce"],"tags":["redis","IOå¤šè·¯å¤ç”¨"],"title":"Redis ä¸ºä»€ä¹ˆå¿«","uri":"/redis-single-thread-why-so-fast/#å‚è€ƒ"},{"categories":["golang"],"content":"golang upd ç®€å•ä½¿ç”¨,UDP,HTTP","date":"2021-04-01","objectID":"/upd-demo/","series":null,"tags":["golang"],"title":"Go udp ç®€å•ä½¿ç”¨","uri":"/upd-demo/"},{"categories":["golang"],"content":" server package main import ( \"fmt\" \"net\" \"time\" ) func main() { // åˆ›å»ºç›‘å¬ socket, err := net.ListenUDP(\"udp4\", \u0026net.UDPAddr{ IP: []byte{127, 0, 0, 1}, Port: 8080, }) if err != nil { fmt.Println(\"ç›‘å¬å¤±è´¥!\", err) return } defer socket.Close() for { // è¯»å–æ•°æ® data := make([]byte, 4096) read, remoteAddr, err := socket.ReadFromUDP(data) if err != nil { fmt.Println(\"è¯»å–æ•°æ®å¤±è´¥!\", err) continue } fmt.Println(read, remoteAddr) fmt.Printf(\"æ¥æ”¶åˆ°å®¢æˆ·ç«¯æ•°æ®ï¼Œ%s\\n\\n\", data) // å‘é€æ•°æ® senddata := []byte(\"server send dataï¼Œhello client!\" + time.Now().Format(\"2006-01-02 15:04:05\")) _, err = socket.WriteToUDP(senddata, remoteAddr) if err != nil { fmt.Println(\"å‘é€æ•°æ®å¤±è´¥!\", err.Error()) return } } } ","date":"2021-04-01","objectID":"/upd-demo/:1:0","series":null,"tags":["golang"],"title":"Go udp ç®€å•ä½¿ç”¨","uri":"/upd-demo/#server"},{"categories":["golang"],"content":" client package main import ( \"fmt\" \"net\" \"time\" ) func main() { // åˆ›å»ºè¿æ¥ socket, err := net.DialUDP(\"udp4\", nil, \u0026net.UDPAddr{ IP: []byte{127, 0, 0, 1}, Port: 8080, }) if err != nil { fmt.Println(\"è¿æ¥å¤±è´¥!\", err) return } defer socket.Close() // å‘é€æ•°æ® senddata := []byte(\"client send messageï¼Œhello server!\" + time.Now().Format(\"2006-01-02 15:04:05\")) _, err = socket.Write(senddata) if err != nil { fmt.Println(\"å‘é€æ•°æ®å¤±è´¥!\", err) return } // æ¥æ”¶æ•°æ® data := make([]byte, 4096) read, remoteAddr, err := socket.ReadFromUDP(data) if err != nil { fmt.Println(\"è¯»å–æ•°æ®å¤±è´¥!\", err) return } fmt.Println(read, remoteAddr) fmt.Printf(\"æ¥æ”¶åˆ°æœåŠ¡å™¨ç«¯æ•°æ®ï¼Œ%s\\n\", data) } ","date":"2021-04-01","objectID":"/upd-demo/:2:0","series":null,"tags":["golang"],"title":"Go udp ç®€å•ä½¿ç”¨","uri":"/upd-demo/#client"},{"categories":["golang"],"content":" æºç æºç åœ°å€ ","date":"2021-04-01","objectID":"/upd-demo/:3:0","series":null,"tags":["golang"],"title":"Go udp ç®€å•ä½¿ç”¨","uri":"/upd-demo/#æºç "},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,vmware,centos 7.9,é™æ€ ip,vmware å®‰è£…,vmware å®‰è£… CentOS 7.x,vmware è®¾ç½®é™æ€ ip,centos7,ifconfig command not found,ä¿®æ”¹ç½‘å¡ä¸º eth0","date":"2021-03-08","objectID":"/vmware-install-centos7.x/","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¸‹è½½é•œåƒåœ¨ CentOS çš„å®˜ç½‘ https://wiki.centos.org/Download å¯ä»¥ä¸‹è½½ CentOS å„ä¸ªç‰ˆæœ¬çš„é•œåƒæ–‡ä»¶ã€‚ CentOS Download åŒ…æ‹¬å·²ç»ä¸åœ¨ç»´æŠ¤çš„å„ä¸ªç‰ˆæœ¬ï¼š Archived Versions ä¹Ÿå¯ä»¥å»é˜¿é‡Œçš„é•œåƒä»“åº“å»ä¸‹è½½ mirrors.aliyun.com/centosã€‚ ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:1:0","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#ä¸‹è½½é•œåƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£… CentOS 7.9ä¸‹è½½å®Œ CentOS-7-x86_64-Minimal-2009 å°±å¯ä»¥å®‰è£…äº†ï¼Œè¿™é‡Œç”¨çš„æ˜¯ Minimal ç‰ˆæœ¬ï¼Œå®‰è£…å®Œæˆåï¼Œç³»ç»Ÿä¸­åªæœ‰æœ€åŸºæœ¬çš„ç»„ä»¶ï¼Œæ–¹ä¾¿å­¦ä¹ ã€‚ æ–°å»ºè™šæ‹Ÿæœº å…¸å‹é…ç½® é€‰æ‹© ios æ–‡ä»¶ å‘½åè™šæ‹Ÿæœºå¹¶é€‰æ‹©ç³»ç»Ÿæ–‡ä»¶ä¿å­˜è·¯å¾„ï¼š å‘½åè™šæ‹Ÿæœº å¦‚æœç‰©ç†æœºæ”¯æŒå¤§ä¸ 4GB ä»¥ä¸Šçš„å•æ–‡ä»¶ï¼Œå¯ä»¥é€‰æ‹©â€œå°†è™šæ‹Ÿç£ç›˜å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶â€ æŒ‡å®šç£ç›˜å®¹é‡ è‡ªå®šä¹‰ç¡¬ä»¶ ç”±äºæœåŠ¡å™¨ç”¨ä¸åˆ°å£°å¡ï¼ŒUSB æ§åˆ¶å™¨ï¼Œæ‰“å°æœºè¿™äº›è®¾å¤‡ï¼Œå¯ä»¥å°†è¿™äº›è®¾å¤‡ç§»é™¤ï¼š ç§»é™¤ç¡¬ä»¶ ç§»é™¤åçš„ç¡¬ä»¶ å¯ä»¥ä¸ç”¨å‹¾é€‰ã€Œåˆ›å»ºåå¼€å¯æ­¤è™šæ‹Ÿæœºé€‰é¡¹ã€ï¼š å®Œæˆ å¼€å¯è™šæ‹Ÿæœº Install CentOS7 å®‰è£…ä¸­ é€‰æ‹©è¯­è¨€ ç‚¹å‡» INSTALLATION DESTINATION INSTALLATION DESTINATION INSTALLATION DESTINATION é»˜è®¤å€¼ä¸ç”¨æ”¹ï¼Œç›´æ¥ç‚¹ Done INSTALLATION DESTINATION Done Begin Installation å¦‚æœæƒ³è¦åˆ›å»ºå¸¦æ¡Œé¢çš„è™šæ‹Ÿæœºï¼Œå¯ä»¥åœ¨ SOFTWARE SELECTION ä¸­é€‰æ‹© GNOME Desktopï¼š GNOME Desktop è®¾ç½® ROOT å¯†ç å’Œåˆ›å»ºç”¨æˆ· è®¾ç½® ROOT å¯†ç å’Œåˆ›å»ºç”¨æˆ· åˆ›å»ºç”¨æˆ· ç­‰å¾…å®‰è£…ä»»åŠ¡ ç­‰å¾…å®‰è£…ä»»åŠ¡ å®‰è£…ä»»åŠ¡å®Œæˆé‡å¯ é‡å¯å®Œæˆç™»å½• root Login ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:2:0","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#å®‰è£…-centos-79"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç½‘ç»œé…ç½®ä¸€èˆ¬æ–°è£…çš„æœ€å°åŒ–çš„ CentOS 7.x ç³»ç»Ÿæ˜¯æ²¡æœ‰ç½‘ç»œé…ç½®çš„ï¼Œè€Œå®‰è£…å‘½ä»¤å°±æ˜¯è”ç½‘ä¸‹è½½è½¯ä»¶ï¼Œæ‰€ä»¥ç½‘ç»œé…ç½®æ˜¯å¿…é¡»çš„ã€‚ ping CentOS 7.x çš„é»˜è®¤ç½‘å¡æ˜¯ essxxï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ /etc/syconfig/network-scripts ä¸­çœ‹åˆ°ï¼š network-scripts å¯ä»¥å…ˆæŠŠ ifcfg-ensxx è¿™ä¸ªæ–‡ä»¶å¤‡ä»½ä¸‹ï¼Œç„¶åä¿®æ”¹ onboot å‚æ•°ä» no ä¿®æ”¹ä¸º yes ï¼Œä¿å­˜ï¼Œé‡å¯æœºå™¨ã€‚ update onboot é‡å¯å®Œåå°±å¯ä»¥ ping é€šç½‘ç»œäº†ï¼š ping 2 ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:3:0","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#ç½‘ç»œé…ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ifconfig command not foundå®‰è£… net-tools å·¥å…· yum install -y net-tools net-tools install ifconfig ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:4:0","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#ifconfig-command-not-found"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¿®æ”¹ç½‘å¡ä¸º eth0CentOS 7.x çš„ç½‘å¡ä¸æ˜¯ eth0 è€Œæ˜¯ ensxxï¼Œè¿™æ˜¯ CentOS 7.x çš„ä¸€è‡´æ€§ç½‘ç»œè®¾å¤‡å‘½åå¯¼è‡´çš„ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼Œå°†ç½‘å¡åç§°å›åˆ° eth0 æ ¼å¼ã€‚ ensxx ä¿®æ”¹é…ç½® vim /etc/default/grub ä¸­æ·»åŠ  biosdevname=0 net.ifnames=0 biosdevname=0 net.ifnames=0 æ‰§è¡Œå‘½ä»¤ grub2-mkconfig -o /boot/grub2/grub.cfg æ‰§è¡Œå‘½ä»¤ reboot é‡å¯æœºå™¨ ä¿®æ”¹æˆåŠŸ ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:5:0","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#ä¿®æ”¹ç½‘å¡ä¸º-eth0"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è®¾ç½®é™æ€ IPNAT æ¨¡å¼æ˜¯ VMware è™šæ‹Ÿæœºé»˜è®¤ä½¿ç”¨çš„æ¨¡å¼ï¼Œå…¶æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯è™šæ‹Ÿæœºæ¥å…¥ç½‘ç»œéå¸¸ç®€å•ï¼Œåªè¦ç‰©ç†æœºå¯ä»¥è®¿é—®ç½‘ç»œï¼Œè™šæ‹Ÿæœºå°±å¯ä»¥è®¿é—®ç½‘ç»œã€‚ç½‘ç»œç»“æ„å¦‚ä¸‹å›¾ï¼š NATæ¨¡å¼ æ‰€è°“çš„é™æ€ ip ï¼Œå°±æ˜¯è®¾ç½®åå›ºå®šä¸å˜çš„ï¼Œå› ä¸ºåœ¨çœŸå®ç¯å¢ƒä¸­ï¼Œéœ€è¦ä¸ºæ‰€æœ‰çš„æœåŠ¡å™¨é…ç½®é™æ€ ipï¼Œä»è€Œç¡®ä¿é€šè¿‡ä¸€ä¸ª ip åœ°å€åªèƒ½æ‰¾åˆ°ä¸€å°æœåŠ¡å™¨ã€‚ ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:6:0","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#è®¾ç½®é™æ€-ip"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è®¾ç½®åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹å‰ï¼Œä¸ºäº†é˜²æ­¢é…ç½®å‡ºé”™ï¼Œå»ºè®®æå‰å¤‡ä»½é…ç½®æ–‡ä»¶ ifcfg-eth0ã€‚æˆ‘æŠŠåŸæ¥çš„ ifcfg-ens32 é‡å‘½åä¸ºäº† ifcfg-eth0ã€‚ cp /etc/sysconfig/network-scripts/ifcfg-eth0 /etc/sysconfig/network-scripts/ifcfg-eth0.bak æˆ‘ä»¬éœ€è¦æŠŠ ifcfg-eth0 é…ç½®æ–‡ä»¶ä¸­çš„ BOOTPROTO çš„å€¼è®¾ç½®ä¸º staticï¼Œå°† IPADDR(IP åœ°å€)çš„å€¼è®¾ç½®ä¸ºå…¶æ‰€åœ¨çš„å­ç½‘ä¸­æ­£ç¡®çš„ï¼Œæ— å†²çªçš„ ip åœ°å€å³å¯ã€‚ åœ¨ NAT æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ° 4 ä¸ªåœ°å€æ‰èƒ½ç¡®å®šæˆ‘ä»¬çš„æ— å†²çªçš„ ip åˆ°åº•æ˜¯å“ªäº›ã€‚ å­ç½‘ ip VMnet8 è™šæ‹Ÿç½‘å¡ ip NAT ç½‘å…³ ip DHCP åœ°å€æ±  æ¥ä¸‹æ¥æ‰¾è¿™å‡ ä¸ªå‚æ•°ï¼š å›¾ 1 å›¾ 2 ç‚¹å‡»ã€NATè®¾ç½®ã€‘æŸ¥çœ‹å­ç½‘æ©ç å’Œç½‘å…³ IPã€‚ç‚¹å‡»ã€DHCP è®¾ç½®ã€‘æŸ¥çœ‹èµ·å§‹ IP åœ°å€å’Œç»“æŸ IP åœ°å€ã€‚ å›¾ 3 å›¾ 4 æ‰“å¼€ç‰©ç†æœºçš„ cmd è¾“å…¥ ipconfig å‘½ä»¤ï¼š å›¾ 5 å¦‚æœå‘ç°ç‰©ç†æœºçš„ VMnet8 è·Ÿè™šæ‹Ÿæœºçš„ä¸åœ¨ä¸€ä¸ªç½‘æ®µï¼Œå¯ä»¥åœ¨ã€Œè™šæ‹Ÿç½‘ç»œé€‚é…å™¨ã€ä¸­ã€Œè¿˜åŸé»˜è®¤è®¾ç½®ã€ï¼š è¿˜åŸé»˜è®¤è®¾ç½® æ‰€ä»¥ï¼Œé™¤å»è¿™å‡ ä¸ªåœ°å€ï¼Œ192.168.48.3 ~ 192.168.48.127 èŒƒå›´å†…çš„ ip éƒ½å¯ä»¥ä½œä¸ºé™æ€ ip ä½¿ç”¨ã€‚ vi ifcfg-eth0 éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ä¸ºï¼š å°† ONBOOT æ”¹ä¸º yes BOOTPROTO ç”± dhcp æ”¹ä¸º static å¢åŠ  IPADDR(ip åœ°å€) å¢åŠ  NETMASK(å­ç½‘æ©ç ) å¢åŠ  GATEWAY(ç½‘å…³) å¢åŠ  DNS1(é¦–é€‰åŸŸåæœåŠ¡å™¨) å…¶ä¸­ï¼Œç½‘å…³ä¸è®¾ç½®ï¼Œè™šæ‹Ÿæœºåªèƒ½åœ¨å±€åŸŸç½‘å†…è®¿é—®ï¼Œæ— æ³•è®¿é—®å¤–éƒ¨ç½‘ç»œã€‚DNS ä¸è®¾ç½®åˆ™æ— æ³•è§£æåŸŸåã€‚ DNS å¯ä»¥è®¾ç½®æˆè·Ÿç½‘å…³ä¸€æ ·çš„åœ°å€ã€‚ å›¾ 6 è®¾ç½®å®Œæˆåæ‰§è¡Œï¼šsystemctl restart network å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆã€‚ å›¾ 7 ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:6:1","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#è®¾ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è®¿é—®æµ‹è¯•","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:6:2","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#è®¿é—®æµ‹è¯•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç‰©ç†æœºæµ‹è¯•åœ¨ç‰©ç†æœºä¸­ ping è™šæ‹Ÿæœº ip åœ°å€ï¼š å›¾ 8 ç‰©ç†æœºå…±å‘ ip åœ°å€ 192.168.48.8 å‘é€äº† 4 æ¬¡ ping è¯·æ±‚ï¼Œ4 æ¬¡éƒ½æ˜¯æˆåŠŸçš„ï¼Œå‘é€çš„æ•°æ®åŒ…ä¸º 32 å­—èŠ‚ï¼ŒTTL(ç”Ÿå­˜æ—¶é—´å€¼)ä¸º 64ï¼Œå…¶ä¸­ TTL åœ¨å‘é€æ—¶çš„é»˜è®¤å€¼ä¸º 64ï¼Œæ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±åˆ™å‡ 1 ï¼Œæ­¤æ¬¡æ˜¾ç¤ºæœ€ç»ˆç»“æœä¸º 64 è¯´æ˜ä¸­é—´æ²¡æœ‰ç»è¿‡è·¯ç”±ã€‚ ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:6:3","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#ç‰©ç†æœºæµ‹è¯•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è™šæ‹Ÿæœºæµ‹è¯• å›¾ 9 ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:6:4","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#è™šæ‹Ÿæœºæµ‹è¯•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è¯´æ˜å› ä¸ºæˆ‘æŠŠé»˜è®¤ç½‘å¡ä» ensxx æ”¹æˆäº† eth0 æ‰€ä»¥åœ¨ä¿®æ”¹é™æ€ ip æ˜¯æŠŠé…ç½®æ–‡ä»¶ä¹Ÿæ”¹æˆäº† ifcfg-eth0 å›¾ 10 ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:6:5","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#è¯´æ˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" FAQ â“é‡å¯ç½‘å¡é—®é¢˜ loaded (/etc/rc.d/init.d/network; bad; vendor preset: disabled) network err â˜ï¸ ä»¥ä¸Šè¿™ä¸ªé—®é¢˜å¯ä»¥å‚è€ƒcentos7é‡å¯ç½‘å¡æç¤ºé”™è¯¯çš„è§£å†³æ–¹æ³•è¿™ç¯‡æ–‡ç« ã€‚ ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:7:0","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#faq"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ How To Configure Static IP Address in CentOS 7 / RHEL 7 è™šæ‹Ÿæœºå®‰è£…CentOS 7ï¼ˆå¸¦ç•Œé¢ï¼‰ ","date":"2021-03-08","objectID":"/vmware-install-centos7.x/:8:0","series":null,"tags":["CentOS 7.x","VMware","linux"],"title":"VMware å®‰è£… CentOS 7.x","uri":"/vmware-install-centos7.x/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"Redis, Redis æ•°æ®ç»“æ„,redis ç¼“å­˜å‡»ç©¿,redis å¸ƒéš†è¿‡æ»¤å™¨,redis æ·˜æ±°æœºåˆ¶,redis æŒä¹…åŒ–æœºåˆ¶,redis åˆ†å¸ƒå¼ç¼“å­˜","date":"2021-02-20","objectID":"/redis-glance-faq/","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"Redis æ˜¯ä¸€ä¸ªä½¿ç”¨ C è¯­è¨€å¼€å‘çš„æ•°æ®åº“ï¼Œä¸ä¼ ç»Ÿæ•°æ®åº“ä¸åŒçš„æ˜¯ Redis çš„æ•°æ®æ˜¯å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œæˆ‘ä»¬æŠŠè¿™ç§æ•°æ®åº“å«åšå†…å­˜æ•°æ®åº“ã€‚å› ä¸ºåœ¨å†…å­˜ä¸­ï¼Œæ‰€ä»¥è¯»å†™é€Ÿåº¦éå¸¸å¿«ï¼Œå› æ­¤ Redis è¢«å¹¿æ³›åº”ç”¨äºç¼“å­˜æ–¹å‘ã€‚ Redis æä¾›äº†å¤šç§æ•°æ®ç±»å‹æ¥æ”¯æŒä¸åŒçš„ä¸šåŠ¡åœºæ™¯ï¼Œæ‰€ä»¥ Redis é™¤äº†åšç¼“å­˜ä¹‹å¤–ï¼ŒRedis è¿˜ç»å¸¸ç”¨æ¥åšåˆ†å¸ƒå¼é”ï¼Œæ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚Redis è¿˜æ”¯æŒäº‹åŠ¡ã€æŒä¹…åŒ–ã€Lua è„šæœ¬ã€å¤šé›†ç¾¤æ–¹æ¡ˆã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:0:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ•°æ®ç»“æ„ Redis äº”ç§æ•°æ®ç»“æ„ åœ¨ Redis ä¸­ï¼Œæ‰€æœ‰çš„ key éƒ½æ˜¯å­—ç¬¦ä¸²ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:1:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#æ•°æ®ç»“æ„"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å­—ç¬¦ä¸²å­—ç¬¦ä¸²ç±»å‹æ˜¯ Redis ä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ï¼Œä¸€ä¸ª key å¯¹åº”ä¸€ä¸ª valueã€‚ å­—ç¬¦ä¸²ç±»å‹æ˜¯äºŒè¿›åˆ¶å®‰å…¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ Redis ä¸­çš„å­—ç¬¦ä¸²å¯ä»¥åŒ…å«ä»»ä½•æ•°æ®ã€‚å¦‚æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œjpg å›¾ç‰‡æˆ–è€…åºåˆ—åŒ–çš„å¯¹è±¡ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:2:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å­—ç¬¦ä¸²"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ SET key valueï¼šè®¾ç½®æŒ‡å®š key çš„å€¼ä¸ºç»™å®šçš„ valueã€‚ GET keyï¼šè·å–æŒ‡å®š key çš„å€¼ã€‚ DEL keyï¼šåˆ é™¤æŒ‡å®š key åŠå…¶å¯¹åº”çš„å€¼ã€‚ INCR keyï¼šå°†æŒ‡å®š key çš„å€¼é€’å¢ 1ã€‚ INCRBY key incrementï¼šå°†æŒ‡å®š key çš„å€¼å¢åŠ æŒ‡å®šçš„ increment å€¼ã€‚ DECR keyï¼šå°†æŒ‡å®š key çš„å€¼é€’å‡ 1ã€‚ DECRBY key decrementï¼šå°†æŒ‡å®š key çš„å€¼å‡å»æŒ‡å®šçš„ decrement å€¼ã€‚ APPEND key valueï¼šå°†ç»™å®šçš„ value è¿½åŠ åˆ°æŒ‡å®š key çš„å€¼çš„æœ«å°¾ã€‚ STRLEN keyï¼šè¿”å›æŒ‡å®š key çš„å€¼çš„é•¿åº¦ã€‚ GETRANGE key start endï¼šè·å–æŒ‡å®š key çš„å­å­—ç¬¦ä¸²ï¼Œä» start åˆ° end çš„ä½ç½®ã€‚ SETEX key seconds valueï¼šè®¾ç½®æŒ‡å®š key çš„å€¼ï¼Œå¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´ï¼ˆå•ä½ä¸ºç§’ï¼‰ã€‚ SETNX key valueï¼šåªæœ‰å½“æŒ‡å®š key ä¸å­˜åœ¨æ—¶ï¼Œè®¾ç½® key çš„å€¼ä¸ºç»™å®šçš„ valueã€‚ MSET key value [key value â€¦]ï¼šè®¾ç½®å¤šä¸ª key-value å¯¹ã€‚ MGET key [key â€¦]ï¼šè·å–å¤šä¸ª key å¯¹åº”çš„å€¼ã€‚ STRCMP key1 key2ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„ key çš„å€¼ï¼Œå¦‚æœç›¸åŒè¿”å› 0ï¼Œå¦åˆ™è¿”å›é 0 å€¼ã€‚ GETSET key valueï¼šè®¾ç½®æŒ‡å®š key çš„æ–°å€¼ï¼Œå¹¶è¿”å›æ—§å€¼ã€‚ SETBIT key offset valueï¼šè®¾ç½®æˆ–æ¸…é™¤æŒ‡å®š key åç§»é‡ä¸Šçš„ä½ï¼ˆbitï¼‰ã€‚ BITCOUNT key [start end]ï¼šç»Ÿè®¡æŒ‡å®š key çš„å€¼ä¸­ï¼Œè¢«è®¾ç½®ä¸º 1 çš„ä½çš„æ•°é‡ã€‚ BITOP operation destkey key [key â€¦]ï¼šå¯¹ä¸€ä¸ªæˆ–å¤šä¸ª key è¿›è¡Œä½æ“ä½œï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ° destkey ä¸­ã€‚ SETRANGE key offset valueï¼šç”¨æŒ‡å®šçš„ value æ›¿æ¢æŒ‡å®š key å€¼ä»åç§»é‡ offset å¼€å§‹çš„å­å­—ç¬¦ä¸²ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:2:1","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å¸¸ç”¨å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Hashhash å€¼æœ¬èº«åˆæ˜¯ä¸€ç§é”®å€¼å¯¹ç»“æ„ï¼š hash æ‰€æœ‰ hash çš„å‘½ä»¤éƒ½æ˜¯ h å¼€å¤´ï¼Œå¦‚ hgetã€hsetã€hdel ç­‰ ","date":"2021-02-20","objectID":"/redis-glance-faq/:3:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#hash"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ HSET key field valueï¼šè®¾ç½®æŒ‡å®š key ä¸­çš„ field å­—æ®µçš„å€¼ä¸º valueã€‚ HGET key fieldï¼šè·å–æŒ‡å®š key ä¸­çš„ field å­—æ®µçš„å€¼ã€‚ HMSET key field value [field value â€¦]ï¼šåŒæ—¶è®¾ç½®å¤šä¸ª field-value å¯¹ã€‚ HMGET key field [field â€¦]ï¼šè·å–æŒ‡å®š key ä¸­å¤šä¸ªå­—æ®µçš„å€¼ã€‚ HDEL key field [field â€¦]ï¼šåˆ é™¤æŒ‡å®š key ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µã€‚ HLEN keyï¼šè·å–æŒ‡å®š key ä¸­å­—æ®µçš„æ•°é‡ã€‚ HEXISTS key fieldï¼šæ£€æŸ¥æŒ‡å®š key æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ fieldã€‚ HINCRBY key field incrementï¼šå°†æŒ‡å®š key ä¸­çš„ field å­—æ®µçš„å€¼å¢åŠ æŒ‡å®šçš„ increment å€¼ã€‚ HINCRBYFLOAT key field incrementï¼šå°†æŒ‡å®š key ä¸­çš„ field å­—æ®µçš„å€¼å¢åŠ æŒ‡å®šçš„æµ®ç‚¹æ•° increment å€¼ã€‚ HKEYS keyï¼šè·å–æŒ‡å®š key ä¸­æ‰€æœ‰å­—æ®µçš„åç§°ã€‚ HVALS keyï¼šè·å–æŒ‡å®š key ä¸­æ‰€æœ‰å­—æ®µçš„å€¼ã€‚ HGETALL keyï¼šè·å–æŒ‡å®š key ä¸­æ‰€æœ‰å­—æ®µå’Œå¯¹åº”çš„å€¼ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰å­—æ®µå’Œå€¼çš„åˆ—è¡¨ã€‚ HSTRLEN key fieldï¼šè·å–æŒ‡å®š key ä¸­æŒ‡å®š field å­—æ®µçš„å€¼çš„é•¿åº¦ã€‚ HSCAN key cursor [MATCH pattern] [COUNT count]ï¼šè¿­ä»£æŒ‡å®š key ä¸­çš„ Hash å­—æ®µã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:3:1","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å¸¸ç”¨å‘½ä»¤-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ListList å°±æ˜¯é“¾è¡¨ï¼ˆredis ä½¿ç”¨åŒç«¯é“¾è¡¨å®ç°çš„ Listï¼‰ï¼Œæ˜¯æœ‰åºçš„ï¼Œvalueå¯ä»¥é‡å¤ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡å–å‡ºå¯¹åº”çš„ value å€¼ï¼Œå·¦å³ä¸¤è¾¹éƒ½èƒ½è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ•°æ®ã€‚ List List åœ¨ Redis ä¸­æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç”¨äºå®ç°æ¶ˆæ¯é˜Ÿåˆ—ã€ä»»åŠ¡é˜Ÿåˆ—ã€æœ€æ–°æ¶ˆæ¯åˆ—è¡¨ç­‰åœºæ™¯ã€‚å®ƒçš„æ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½æ˜¯å¸¸æ•°æ—¶é—´å¤æ‚åº¦ï¼Œæ”¯æŒä»ä¸¤ç«¯è¿›è¡Œæ“ä½œï¼Œéå¸¸é«˜æ•ˆã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:4:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#list"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ LPUSH key element [element â€¦]ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ä»åˆ—è¡¨çš„å·¦ä¾§æ’å…¥ï¼ˆæ¨å…¥ï¼‰ã€‚ RPUSH key element [element â€¦]ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ä»åˆ—è¡¨çš„å³ä¾§æ’å…¥ï¼ˆæ¨å…¥ï¼‰ã€‚ LPOP keyï¼šç§»é™¤å¹¶è·å–åˆ—è¡¨çš„æœ€å·¦ä¾§å…ƒç´ ã€‚ RPOP keyï¼šç§»é™¤å¹¶è·å–åˆ—è¡¨çš„æœ€å³ä¾§å…ƒç´ ã€‚ LINDEX key indexï¼šè·å–åˆ—è¡¨åœ¨ç»™å®šç´¢å¼•ä¸Šçš„å…ƒç´ ã€‚ LLEN keyï¼šè·å–åˆ—è¡¨çš„é•¿åº¦ï¼ˆå…ƒç´ æ•°é‡ï¼‰ã€‚ LRANGE key start stopï¼šè·å–åˆ—è¡¨ä¸­æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ï¼Œæ ¹æ® start å’Œ stop çš„ç´¢å¼•ä½ç½®è·å–ã€‚ LINSERT key BEFORE|AFTER pivot elementï¼šåœ¨åˆ—è¡¨ä¸­æŸä¸ªå…ƒç´ çš„å‰é¢æˆ–åé¢æ’å…¥æ–°çš„å…ƒç´ ã€‚ LSET key index elementï¼šå°†åˆ—è¡¨åœ¨ç»™å®šç´¢å¼•ä¸Šçš„å…ƒç´ è®¾ç½®ä¸ºæ–°çš„å€¼ã€‚ LREM key count elementï¼šä»åˆ—è¡¨ä¸­åˆ é™¤æŒ‡å®šæ•°é‡çš„å…ƒç´ ã€‚ LTRIM key start stopï¼šä¿®å‰ªï¼ˆæˆªå–ï¼‰åˆ—è¡¨ï¼Œåªä¿ç•™æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚ RPOPLPUSH source destinationï¼šå°†æºåˆ—è¡¨ä¸­çš„æœ€å³ä¾§å…ƒç´ å¼¹å‡ºå¹¶æ¨å…¥ç›®æ ‡åˆ—è¡¨çš„æœ€å·¦ä¾§ã€‚ BLPOP key [key â€¦] timeoutï¼šé˜»å¡å¼åœ°ä»å¤šä¸ªåˆ—è¡¨çš„æœ€å·¦ä¾§å¼¹å‡ºå…ƒç´ ã€‚ BRPOP key [key â€¦] timeoutï¼šé˜»å¡å¼åœ°ä»å¤šä¸ªåˆ—è¡¨çš„æœ€å³ä¾§å¼¹å‡ºå…ƒç´ ã€‚ BRPOPLPUSH source destination timeoutï¼šé˜»å¡å¼åœ°å°†æºåˆ—è¡¨ä¸­çš„æœ€å³ä¾§å…ƒç´ å¼¹å‡ºå¹¶æ¨å…¥ç›®æ ‡åˆ—è¡¨çš„æœ€å·¦ä¾§ã€‚ LLEN keyï¼šè·å–åˆ—è¡¨çš„é•¿åº¦ï¼ˆå…ƒç´ æ•°é‡ï¼‰ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:4:1","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å¸¸ç”¨å‘½ä»¤-2"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä½¿ç”¨æŠ€å·§ lpush + lpop = Stackï¼ˆæ ˆï¼‰ lpush + rpop = Queueï¼ˆé˜Ÿåˆ—ï¼‰ lpush + ltrim = Capped Collectionï¼ˆæœ‰é™é›†åˆï¼‰ lpush + brpop = Message Queueï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ ","date":"2021-02-20","objectID":"/redis-glance-faq/:4:2","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#ä½¿ç”¨æŠ€å·§"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Set Set é›†åˆç±»å‹ä¹Ÿæ˜¯ç”¨æ¥ä¿å­˜å¤šä¸ªå­—ç¬¦ä¸²çš„å…ƒç´ ï¼Œä½†å’Œåˆ—è¡¨æœ‰å‡ ä¸ªä¸åŒçš„ç‚¹ï¼š ğŸ‘‰ ä¸å…è®¸æœ‰é‡å¤çš„å…ƒç´  ğŸ‘‰ é›†åˆä¸­çš„å…ƒç´ æ˜¯æ— åºçš„ï¼Œä¸èƒ½é€šè¿‡ç´¢å¼•ä¸‹æ ‡è·å–å…ƒç´  ğŸ‘‰ æ”¯æŒé›†åˆé—´çš„æ“ä½œï¼Œå¯ä»¥å–å¤šä¸ªé›†åˆå–äº¤é›†ã€å¹¶é›†ã€å·®é›† ","date":"2021-02-20","objectID":"/redis-glance-faq/:5:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#set"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ SADD key member [member â€¦]ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°é›†åˆä¸­ã€‚ SMEMBERS keyï¼šè·å–é›†åˆä¸­æ‰€æœ‰çš„æˆå‘˜ï¼ˆå…ƒç´ ï¼‰ã€‚ SISMEMBER key memberï¼šæ£€æŸ¥ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¯é›†åˆçš„æˆå‘˜ã€‚ SCARD keyï¼šè·å–é›†åˆçš„æˆå‘˜æ•°é‡ã€‚ SREM key member [member â€¦]ï¼šä»é›†åˆä¸­ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚ SPOP key [count]ï¼šéšæœºç§»é™¤å¹¶è·å–é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚ SRANDMEMBER key [count]ï¼šéšæœºè·å–é›†åˆä¸­ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œä½†ä¸ç§»é™¤å®ƒä»¬ã€‚ SMOVE source destination memberï¼šå°†ä¸€ä¸ªå…ƒç´ ä»æºé›†åˆç§»åŠ¨åˆ°ç›®æ ‡é›†åˆã€‚ SINTER key [key â€¦]ï¼šè®¡ç®—å¤šä¸ªé›†åˆçš„äº¤é›†ã€‚ SINTERSTORE destination key [key â€¦]ï¼šå°†å¤šä¸ªé›†åˆçš„äº¤é›†å­˜å‚¨åˆ°æ–°çš„é›†åˆä¸­ã€‚ SUNION key [key â€¦]ï¼šè®¡ç®—å¤šä¸ªé›†åˆçš„å¹¶é›†ã€‚ SUNIONSTORE destination key [key â€¦]ï¼šå°†å¤šä¸ªé›†åˆçš„å¹¶é›†å­˜å‚¨åˆ°æ–°çš„é›†åˆä¸­ã€‚ SDIFF key [key â€¦]ï¼šè®¡ç®—å¤šä¸ªé›†åˆçš„å·®é›†ã€‚ SDIFFSTORE destination key [key â€¦]ï¼šå°†å¤šä¸ªé›†åˆçš„å·®é›†å­˜å‚¨åˆ°æ–°çš„é›†åˆä¸­ã€‚ SSCAN key cursor [MATCH pattern] [COUNT count]ï¼šè¿­ä»£é›†åˆä¸­çš„å…ƒç´ ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:5:1","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å¸¸ç”¨å‘½ä»¤-3"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ZSetæœ‰åºé›†åˆå’Œé›†åˆæœ‰ç€å¿…ç„¶çš„è”ç³»ï¼Œä¿ç•™äº†é›†åˆä¸èƒ½æœ‰é‡å¤æˆå‘˜çš„ç‰¹æ€§ã€‚ åŒºåˆ«æ˜¯ï¼Œæœ‰åºé›†åˆä¸­çš„å…ƒç´ æ˜¯å¯ä»¥æ’åºçš„ï¼Œå®ƒç»™æ¯ä¸ªå…ƒç´ è®¾ç½®ä¸€ä¸ªåˆ†æ•°ï¼Œä½œä¸ºæ’åºçš„ä¾æ®ã€‚ æœ‰åºé›†åˆä¸­çš„å…ƒç´ ä¸å¯ä»¥é‡å¤ï¼Œä½†æ˜¯ score åˆ†æ•°å¯ä»¥é‡å¤ï¼Œå°±å’Œä¸€ä¸ªç­é‡Œçš„åŒå­¦å­¦å·ä¸èƒ½é‡å¤ï¼Œä½†è€ƒè¯•æˆç»©å¯ä»¥ç›¸åŒã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:6:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#zset"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ ZADD key score member [score member â€¦]ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜åŠå…¶å¯¹åº”çš„åˆ†æ•°æ·»åŠ åˆ°æœ‰åºé›†åˆä¸­ã€‚ ZRANGE key start stop [WITHSCORES]ï¼šæŒ‰ç…§å…ƒç´ çš„åˆ†æ•°ä»ä½åˆ°é«˜ï¼Œè·å–æœ‰åºé›†åˆä¸­æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚å¦‚æœä½¿ç”¨ WITHSCORES å‚æ•°ï¼Œè¿˜ä¼šè¿”å›å…ƒç´ çš„åˆ†æ•°ã€‚ ZREVRANGE key start stop [WITHSCORES]ï¼šæŒ‰ç…§å…ƒç´ çš„åˆ†æ•°ä»é«˜åˆ°ä½ï¼Œè·å–æœ‰åºé›†åˆä¸­æŒ‡å®šèŒƒå›´å†…çš„å…ƒç´ ã€‚å¦‚æœä½¿ç”¨ WITHSCORES å‚æ•°ï¼Œè¿˜ä¼šè¿”å›å…ƒç´ çš„åˆ†æ•°ã€‚ ZRANGEBYSCORE key min max [WITHSCORES] [LIMIT offset count]ï¼šæ ¹æ®åˆ†æ•°èŒƒå›´è·å–æœ‰åºé›†åˆä¸­çš„å…ƒç´ ã€‚å¯ä»¥æŒ‡å®šæœ€å°å’Œæœ€å¤§åˆ†æ•°ï¼Œå¹¶å¯é€‰åœ°ä½¿ç”¨ WITHSCORES å‚æ•°è¿”å›å…ƒç´ çš„åˆ†æ•°ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ LIMIT å‚æ•°é™åˆ¶ç»“æœæ•°é‡ã€‚ ZREVRANGEBYSCORE key max min [WITHSCORES] [LIMIT offset count]ï¼šæ ¹æ®åˆ†æ•°èŒƒå›´ä»é«˜åˆ°ä½è·å–æœ‰åºé›†åˆä¸­çš„å…ƒç´ ã€‚ ZCOUNT key min maxï¼šç»Ÿè®¡æœ‰åºé›†åˆä¸­åˆ†æ•°åœ¨ç»™å®šèŒƒå›´å†…çš„å…ƒç´ æ•°é‡ã€‚ ZCARD keyï¼šè·å–æœ‰åºé›†åˆä¸­å…ƒç´ çš„æ•°é‡ã€‚ ZSCORE key memberï¼šè·å–æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„åˆ†æ•°ã€‚ ZINCRBY key increment memberï¼šä¸ºæœ‰åºé›†åˆä¸­çš„æŒ‡å®šæˆå‘˜å¢åŠ åˆ†æ•°ã€‚ ZREM key member [member â€¦]ï¼šä»æœ‰åºé›†åˆä¸­ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæˆå‘˜ã€‚ ZREMRANGEBYRANK key start stopï¼šæ ¹æ®å…ƒç´ åœ¨æœ‰åºé›†åˆä¸­çš„æ’åèŒƒå›´ï¼Œç§»é™¤å…ƒç´ ã€‚ ZREMRANGEBYSCORE key min maxï¼šæ ¹æ®åˆ†æ•°èŒƒå›´ï¼Œç§»é™¤æœ‰åºé›†åˆä¸­çš„å…ƒç´ ã€‚ ZRANK key memberï¼šè·å–æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼ˆä»ä½åˆ°é«˜ï¼‰ã€‚ ZREVRANK key memberï¼šè·å–æœ‰åºé›†åˆä¸­æŒ‡å®šæˆå‘˜çš„æ’åï¼ˆä»é«˜åˆ°ä½ï¼‰ã€‚ ZSCAN key cursor [MATCH pattern] [COUNT count]ï¼šè¿­ä»£æœ‰åºé›†åˆä¸­çš„å…ƒç´ ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:6:1","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å¸¸ç”¨å‘½ä»¤-4"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" FAQ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#faq"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆ†å¸ƒå¼ç¼“å­˜åˆ†å¸ƒå¼ç¼“å­˜ä¸»è¦è§£å†³çš„æ˜¯å•æœºç¼“å­˜çš„å®¹é‡å—æœåŠ¡å™¨é™åˆ¶å¹¶ä¸”æ— æ³•ä¿å­˜é€šç”¨çš„ä¿¡æ¯ ï¼Œå› ä¸ºï¼Œæœ¬åœ°ç¼“å­˜åªåœ¨å½“å‰æœåŠ¡é‡Œæœ‰æ•ˆã€‚æ¯”å¦‚éƒ¨ç½²äº†ä¸¤ä¸ªç›¸åŒçš„æœåŠ¡ï¼Œä»–ä»¬ä¸¤è€…ä¹‹é—´çš„ç¼“å­˜æ•°æ®æ˜¯æ— æ³•å…±åŒçš„ã€‚ åˆ†å¸ƒå¼ç¼“å­˜çš„è¯ï¼Œä½¿ç”¨çš„è¾ƒå¤šçš„è¾ƒå¤šçš„è§£å†³æ–¹æ¡ˆæ˜¯æ˜¯ Memcached å’Œ Redisã€‚ä¸è¿‡ï¼Œéšç€è¿‘äº›å¹´ Redis çš„å‘å±•ï¼Œå¤§å®¶æ…¢æ…¢éƒ½è½¬è€Œä½¿ç”¨æ›´åŠ å¼ºå¤§çš„ Redis è€Œæ”¾å¼ƒ Memcachedã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:1","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#åˆ†å¸ƒå¼ç¼“å­˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Redis å’Œ Memcached çš„åŒºåˆ« å…±åŒç‚¹ éƒ½æ˜¯åŸºäºå†…å­˜çš„æ•°æ®åº“ã€‚ éƒ½æœ‰è¿‡æœŸç­–ç•¥ã€‚ ä¸¤è€…çš„æ€§èƒ½éƒ½éå¸¸é«˜ã€‚ åŒºåˆ« Redis æ”¯æŒæ›´ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æ”¯æŒæ›´å¤æ‚çš„åº”ç”¨åœºæ™¯ã€‚Redis ä¸ä»…ä»…æ”¯æŒç®€å•çš„ k/v ç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾› listï¼Œsetï¼Œzsetï¼Œhash ç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚è€Œ Memcached åªæ”¯æŒæœ€ç®€å•çš„ k/v æ•°æ®ç±»å‹ã€‚ Redis çš„å®¹ç¾æ›´å¥½ï¼Œæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ï¼Œè€Œ Memecache æŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¸­ã€‚ Memcached æ²¡æœ‰åŸç”Ÿçš„é›†ç¾¤æ¨¡å¼ï¼Œéœ€è¦ä¾é å®¢æˆ·ç«¯æ¥å®ç°å¾€é›†ç¾¤ä¸­åˆ†ç‰‡å†™å…¥æ•°æ®ï¼Œä½†æ˜¯ Redis ç›®å‰æ˜¯åŸç”Ÿæ”¯æŒ cluster æ¨¡å¼çš„ã€‚ âš ï¸Redis åœ¨æœåŠ¡å™¨å†…å­˜ä½¿ç”¨å®Œä¹‹åï¼Œå¯ä»¥å°†ä¸ç”¨çš„æ•°æ®æ”¾åˆ°ç£ç›˜ä¸Šã€‚è€Œ Memcached åœ¨æœåŠ¡å™¨å†…å­˜ä½¿ç”¨å®Œä¹‹åï¼Œå°±ä¼šç›´æ¥æŠ¥å¼‚å¸¸ã€‚ Memcached æ˜¯å¤šçº¿ç¨‹ï¼Œéé˜»å¡ IO å¤ç”¨çš„ç½‘ç»œæ¨¡å‹ï¼ŒRedis ä½¿ç”¨å•çº¿ç¨‹çš„å¤šè·¯ IO å¤ç”¨æ¨¡å‹ï¼ˆRedis 6.0 å¼•å…¥äº†å¤šçº¿ç¨‹ IO ï¼‰ã€‚ Memcached è¿‡æœŸæ•°æ®çš„åˆ é™¤ç­–ç•¥åªç”¨äº†æƒ°æ€§åˆ é™¤ï¼Œè€Œ Redis åŒæ—¶ä½¿ç”¨äº†æƒ°æ€§åˆ é™¤ä¸å®šæœŸåˆ é™¤ã€‚ Redis æ”¯æŒå‘å¸ƒè®¢é˜…æ¨¡å‹ã€Lua è„šæœ¬ã€äº‹åŠ¡ç­‰åŠŸèƒ½ï¼Œè€Œ Memcached ä¸æ”¯æŒã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:2","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#redis-å’Œ-memcached-çš„åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Redis å’Œ Memcached çš„åŒºåˆ« å…±åŒç‚¹ éƒ½æ˜¯åŸºäºå†…å­˜çš„æ•°æ®åº“ã€‚ éƒ½æœ‰è¿‡æœŸç­–ç•¥ã€‚ ä¸¤è€…çš„æ€§èƒ½éƒ½éå¸¸é«˜ã€‚ åŒºåˆ« Redis æ”¯æŒæ›´ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æ”¯æŒæ›´å¤æ‚çš„åº”ç”¨åœºæ™¯ã€‚Redis ä¸ä»…ä»…æ”¯æŒç®€å•çš„ k/v ç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾› listï¼Œsetï¼Œzsetï¼Œhash ç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚è€Œ Memcached åªæ”¯æŒæœ€ç®€å•çš„ k/v æ•°æ®ç±»å‹ã€‚ Redis çš„å®¹ç¾æ›´å¥½ï¼Œæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ï¼Œè€Œ Memecache æŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¸­ã€‚ Memcached æ²¡æœ‰åŸç”Ÿçš„é›†ç¾¤æ¨¡å¼ï¼Œéœ€è¦ä¾é å®¢æˆ·ç«¯æ¥å®ç°å¾€é›†ç¾¤ä¸­åˆ†ç‰‡å†™å…¥æ•°æ®ï¼Œä½†æ˜¯ Redis ç›®å‰æ˜¯åŸç”Ÿæ”¯æŒ cluster æ¨¡å¼çš„ã€‚ âš ï¸Redis åœ¨æœåŠ¡å™¨å†…å­˜ä½¿ç”¨å®Œä¹‹åï¼Œå¯ä»¥å°†ä¸ç”¨çš„æ•°æ®æ”¾åˆ°ç£ç›˜ä¸Šã€‚è€Œ Memcached åœ¨æœåŠ¡å™¨å†…å­˜ä½¿ç”¨å®Œä¹‹åï¼Œå°±ä¼šç›´æ¥æŠ¥å¼‚å¸¸ã€‚ Memcached æ˜¯å¤šçº¿ç¨‹ï¼Œéé˜»å¡ IO å¤ç”¨çš„ç½‘ç»œæ¨¡å‹ï¼ŒRedis ä½¿ç”¨å•çº¿ç¨‹çš„å¤šè·¯ IO å¤ç”¨æ¨¡å‹ï¼ˆRedis 6.0 å¼•å…¥äº†å¤šçº¿ç¨‹ IO ï¼‰ã€‚ Memcached è¿‡æœŸæ•°æ®çš„åˆ é™¤ç­–ç•¥åªç”¨äº†æƒ°æ€§åˆ é™¤ï¼Œè€Œ Redis åŒæ—¶ä½¿ç”¨äº†æƒ°æ€§åˆ é™¤ä¸å®šæœŸåˆ é™¤ã€‚ Redis æ”¯æŒå‘å¸ƒè®¢é˜…æ¨¡å‹ã€Lua è„šæœ¬ã€äº‹åŠ¡ç­‰åŠŸèƒ½ï¼Œè€Œ Memcached ä¸æ”¯æŒã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:2","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å…±åŒç‚¹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Redis å’Œ Memcached çš„åŒºåˆ« å…±åŒç‚¹ éƒ½æ˜¯åŸºäºå†…å­˜çš„æ•°æ®åº“ã€‚ éƒ½æœ‰è¿‡æœŸç­–ç•¥ã€‚ ä¸¤è€…çš„æ€§èƒ½éƒ½éå¸¸é«˜ã€‚ åŒºåˆ« Redis æ”¯æŒæ›´ä¸°å¯Œçš„æ•°æ®ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥æ”¯æŒæ›´å¤æ‚çš„åº”ç”¨åœºæ™¯ã€‚Redis ä¸ä»…ä»…æ”¯æŒç®€å•çš„ k/v ç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜æä¾› listï¼Œsetï¼Œzsetï¼Œhash ç­‰æ•°æ®ç»“æ„çš„å­˜å‚¨ã€‚è€Œ Memcached åªæ”¯æŒæœ€ç®€å•çš„ k/v æ•°æ®ç±»å‹ã€‚ Redis çš„å®¹ç¾æ›´å¥½ï¼Œæ”¯æŒæ•°æ®çš„æŒä¹…åŒ–ï¼Œå¯ä»¥å°†å†…å­˜ä¸­çš„æ•°æ®ä¿æŒåœ¨ç£ç›˜ä¸­ï¼Œé‡å¯çš„æ—¶å€™å¯ä»¥å†æ¬¡åŠ è½½è¿›è¡Œä½¿ç”¨ï¼Œè€Œ Memecache æŠŠæ•°æ®å…¨éƒ¨å­˜åœ¨å†…å­˜ä¸­ã€‚ Memcached æ²¡æœ‰åŸç”Ÿçš„é›†ç¾¤æ¨¡å¼ï¼Œéœ€è¦ä¾é å®¢æˆ·ç«¯æ¥å®ç°å¾€é›†ç¾¤ä¸­åˆ†ç‰‡å†™å…¥æ•°æ®ï¼Œä½†æ˜¯ Redis ç›®å‰æ˜¯åŸç”Ÿæ”¯æŒ cluster æ¨¡å¼çš„ã€‚ âš ï¸Redis åœ¨æœåŠ¡å™¨å†…å­˜ä½¿ç”¨å®Œä¹‹åï¼Œå¯ä»¥å°†ä¸ç”¨çš„æ•°æ®æ”¾åˆ°ç£ç›˜ä¸Šã€‚è€Œ Memcached åœ¨æœåŠ¡å™¨å†…å­˜ä½¿ç”¨å®Œä¹‹åï¼Œå°±ä¼šç›´æ¥æŠ¥å¼‚å¸¸ã€‚ Memcached æ˜¯å¤šçº¿ç¨‹ï¼Œéé˜»å¡ IO å¤ç”¨çš„ç½‘ç»œæ¨¡å‹ï¼ŒRedis ä½¿ç”¨å•çº¿ç¨‹çš„å¤šè·¯ IO å¤ç”¨æ¨¡å‹ï¼ˆRedis 6.0 å¼•å…¥äº†å¤šçº¿ç¨‹ IO ï¼‰ã€‚ Memcached è¿‡æœŸæ•°æ®çš„åˆ é™¤ç­–ç•¥åªç”¨äº†æƒ°æ€§åˆ é™¤ï¼Œè€Œ Redis åŒæ—¶ä½¿ç”¨äº†æƒ°æ€§åˆ é™¤ä¸å®šæœŸåˆ é™¤ã€‚ Redis æ”¯æŒå‘å¸ƒè®¢é˜…æ¨¡å‹ã€Lua è„šæœ¬ã€äº‹åŠ¡ç­‰åŠŸèƒ½ï¼Œè€Œ Memcached ä¸æ”¯æŒã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:2","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Redis å¦‚ä½•åˆ¤æ–­æ•°æ®æ˜¯å¦è¿‡æœŸRedis é€šè¿‡ä¸€ä¸ªå«åšè¿‡æœŸå­—å…¸ï¼ˆå¯ä»¥çœ‹ä½œæ˜¯ hash è¡¨ï¼‰æ¥ä¿å­˜æ•°æ®è¿‡æœŸçš„æ—¶é—´ã€‚è¿‡æœŸå­—å…¸çš„é”®æŒ‡å‘ Redis æ•°æ®åº“ä¸­çš„æŸä¸ªkeyï¼ˆé”®ï¼‰ï¼Œè¿‡æœŸå­—å…¸çš„å€¼æ˜¯ä¸€ä¸ª long long ç±»å‹çš„æ•´æ•°ï¼Œè¿™ä¸ªæ•´æ•°ä¿å­˜äº† key æ‰€æŒ‡å‘çš„æ•°æ®åº“é”®çš„è¿‡æœŸæ—¶é—´ï¼ˆæ¯«ç§’ç²¾åº¦çš„ UNIX æ—¶é—´æˆ³ï¼‰ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:3","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#redis-å¦‚ä½•åˆ¤æ–­æ•°æ®æ˜¯å¦è¿‡æœŸ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è¿‡æœŸåˆ é™¤ç­–ç•¥å¦‚æœ Redis ä¸­ä¸€æ‰¹ key åªèƒ½å­˜æ´» 1 åˆ†é’Ÿï¼Œé‚£ä¹ˆ 1 åˆ†é’Ÿåï¼ŒRedis æ˜¯æ€ä¹ˆå¯¹è¿™æ‰¹ key è¿›è¡Œåˆ é™¤çš„å‘¢ï¼Ÿ æƒ°æ€§åˆ é™¤ï¼šåªä¼šåœ¨å–å‡º key çš„æ—¶å€™æ‰å¯¹æ•°æ®è¿›è¡Œè¿‡æœŸæ£€æŸ¥ã€‚è¿™æ ·å¯¹ CPU æœ€å‹å¥½ï¼Œä½†æ˜¯å¯èƒ½ä¼šé€ æˆå¤ªå¤šè¿‡æœŸ key æ²¡æœ‰è¢«åˆ é™¤ã€‚ å®šæœŸåˆ é™¤ï¼šæ¯éš”ä¸€æ®µæ—¶é—´æŠ½å–ä¸€æ‰¹ key æ‰§è¡Œåˆ é™¤è¿‡æœŸ key æ“ä½œã€‚Redis åº•å±‚ä¼šé€šè¿‡é™åˆ¶åˆ é™¤æ“ä½œæ‰§è¡Œçš„æ—¶é•¿å’Œé¢‘ç‡æ¥å‡å°‘åˆ é™¤æ“ä½œå¯¹ CPU æ—¶é—´çš„å½±å“ã€‚ å®šæœŸåˆ é™¤å¯¹å†…å­˜æ›´åŠ å‹å¥½ï¼Œæƒ°æ€§åˆ é™¤å¯¹ CPU æ›´åŠ å‹å¥½ã€‚Redis é‡‡ç”¨çš„æ˜¯å®šæœŸåˆ é™¤â•æƒ°æ€§åˆ é™¤ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:4","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#è¿‡æœŸåˆ é™¤ç­–ç•¥"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å†…å­˜æ·˜æ±°æœºåˆ¶æˆ‘ä»¬é€šè¿‡ç»™ key è®¾ç½®è¿‡æœŸæ—¶é—´è¿˜æ˜¯æœ‰é—®é¢˜çš„ï¼Œå› ä¸ºè¿˜æ˜¯å¯èƒ½å­˜åœ¨å®šæœŸåˆ é™¤å’Œæƒ°æ€§åˆ é™¤æ¼æ‰ äº†å¾ˆå¤šè¿‡æœŸ key çš„æƒ…å†µã€‚è¿™æ ·å°±å¯¼è‡´å¤§é‡è¿‡æœŸ key å †ç§¯åœ¨å†…å­˜é‡Œï¼Œç„¶åå°± OOM äº†ï¼ŒRedis çš„æ•°æ®æ·˜æ±°æœºåˆ¶å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ç­–ç•¥ è¯´æ˜ volatile-lru ï¼ˆleast recently usedï¼‰ï¼Œä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ®æ·˜æ±° volatile-ttl ä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­æŒ‘é€‰å°†è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±° volatile-random ä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†ï¼ˆserver.db[i].expiresï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±° allkeys-lru ï¼ˆleast recently usedï¼‰ï¼Œå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ keyï¼ˆè¿™ä¸ªæ˜¯æœ€å¸¸ç”¨çš„ï¼‰ allkeys-random ä»æ•°æ®é›†ï¼ˆserver.db[i].dictï¼‰ä¸­ä»»æ„é€‰æ‹©æ•°æ®æ·˜æ±° no-eviction ç¦æ­¢é©±é€æ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´å½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œæ–°å†™å…¥æ“ä½œä¼šæŠ¥é”™ğŸ˜±ã€‚ volatile-lfu ï¼ˆleast frequently usedï¼‰ï¼Œä»å·²è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®é›†(server.db[i].expires)ä¸­æŒ‘é€‰æœ€ä¸ç»å¸¸ä½¿ç”¨çš„æ•°æ®æ·˜æ±° allkeys-lfu ï¼ˆleast frequently usedï¼‰ï¼Œå½“å†…å­˜ä¸è¶³ä»¥å®¹çº³æ–°å†™å…¥æ•°æ®æ—¶ï¼Œåœ¨é”®ç©ºé—´ä¸­ï¼Œç§»é™¤æœ€ä¸ç»å¸¸ä½¿ç”¨çš„ key LRU æ˜¯åŸºäºæœ€è¿‘çš„è®¿é—®æ—¶é—´æ¥æ·˜æ±°é”®ï¼Œå³æ·˜æ±°æœ€è¿‘æœ€å°‘è¢«ä½¿ç”¨çš„é”®ã€‚ LFU æ˜¯åŸºäºè®¿é—®é¢‘ç‡æ¥æ·˜æ±°é”®ï¼Œå³æ·˜æ±°è®¿é—®æ¬¡æ•°æœ€å°‘çš„é”®ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:5","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å†…å­˜æ·˜æ±°æœºåˆ¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æŒä¹…åŒ–æœºåˆ¶å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦æŒä¹…åŒ–æ•°æ®ä¹Ÿå°±æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥åˆ°ç¡¬ç›˜é‡Œé¢ï¼Œå¤§éƒ¨åˆ†åŸå› æ˜¯ä¸ºäº†å¤‡ä»½æ•°æ®ï¼Œæ¯”å¦‚ä¸ºäº†é˜²æ­¢ç³»ç»Ÿæ•…éšœè€Œå°†æ•°æ®å¤‡ä»½åˆ°ä¸€ä¸ªå¦ä¸€å°æœºå™¨ã€‚ Redis ä¸¤ç§ä¸åŒçš„æŒä¹…åŒ–æ“ä½œã€‚ä¸€ç§æŒä¹…åŒ–æ–¹å¼å«å¿«ç…§ï¼ˆsnapshottingï¼ŒRDBï¼‰ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯åªè¿½åŠ æ–‡ä»¶ï¼ˆappend-only file, AOFï¼‰ã€‚ RDBå¿«ç…§æŒä¹…åŒ–æ˜¯ Redis é»˜è®¤é‡‡ç”¨çš„æŒä¹…åŒ–æ–¹å¼ï¼Œåœ¨ Redis.conf é…ç½®æ–‡ä»¶ä¸­é»˜è®¤æœ‰æ­¤ä¸‹é…ç½®ï¼š save 900 1 # åœ¨ 900 ç§’(15åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 1 ä¸ª key å‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ save 300 10 # åœ¨ 300 ç§’(5åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 10 ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ save 60 10000 # åœ¨ 60 ç§’(1åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 10000 ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ Redis å¯ä»¥é€šè¿‡åˆ›å»ºå¿«ç…§æ¥è·å¾—å­˜å‚¨åœ¨å†…å­˜é‡Œé¢çš„æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„å‰¯æœ¬ã€‚ Redis åˆ›å»ºå¿«ç…§ä¹‹åï¼Œå¯ä»¥å¯¹å¿«ç…§è¿›è¡Œå¤‡ä»½ï¼Œå¯ä»¥å°†å¿«ç…§å¤åˆ¶åˆ°å…¶ä»–æœåŠ¡å™¨ä»è€Œåˆ›å»ºå…·æœ‰ç›¸åŒæ•°æ®çš„æœåŠ¡å™¨å‰¯æœ¬ï¼Œè¿˜å¯ä»¥å°†å¿«ç…§ç•™åœ¨åŸåœ°ä»¥ä¾¿é‡å¯æœåŠ¡å™¨çš„æ—¶å€™ä½¿ç”¨ã€‚ AOFä¸å¿«ç…§æŒä¹…åŒ– RDB ç›¸æ¯”ï¼ŒAOF æŒä¹…åŒ– çš„å®æ—¶æ€§æ›´å¥½ï¼ŒåŸºæœ¬å·²æˆä¸ºä¸»æµçš„æŒä¹…åŒ–æ–¹æ¡ˆã€‚é»˜è®¤æƒ…å†µä¸‹ Redis æ²¡æœ‰å¼€å¯ AOFæ–¹å¼çš„æŒä¹…åŒ–ã€‚ å¼€å¯ AOF æŒä¹…åŒ–åæ¯æ‰§è¡Œä¸€æ¡ä¼šæ›´æ”¹ Redis ä¸­çš„æ•°æ®çš„å‘½ä»¤ï¼ŒRedis å°±ä¼šå°†è¯¥å‘½ä»¤å†™å…¥ç¡¬ç›˜ä¸­çš„ AOF æ–‡ä»¶ã€‚AOF æ–‡ä»¶çš„ä¿å­˜ä½ç½®å’Œ RDB æ–‡ä»¶çš„ä½ç½®ç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡ dir å‚æ•°è®¾ç½®çš„ï¼Œé»˜è®¤çš„æ–‡ä»¶åæ˜¯ appendonly.aofã€‚ Redis çš„é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨ä¸‰ç§ä¸åŒçš„ AOF æŒä¹…åŒ–æ–¹å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š appendfsync always # æ¯æ¬¡æœ‰æ•°æ®ä¿®æ”¹å‘ç”Ÿæ—¶éƒ½ä¼šå†™å…¥ AOF æ–‡ä»¶,è¿™æ ·ä¼šä¸¥é‡é™ä½ Redis çš„é€Ÿåº¦ appendfsync everysec # æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œæ˜¾ç¤ºåœ°å°†å¤šä¸ªå†™å‘½ä»¤åŒæ­¥åˆ°ç¡¬ç›˜ appendfsync no # è®©æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶è¿›è¡ŒåŒæ­¥ ä¸ºäº†å…¼é¡¾æ•°æ®å’Œå†™å…¥æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘ appendfsync everysec é€‰é¡¹ ï¼Œè®© Redis æ¯ç§’åŒæ­¥ä¸€æ¬¡ AOF æ–‡ä»¶ï¼ŒRedis æ€§èƒ½å‡ ä¹æ²¡å—åˆ°ä»»ä½•å½±å“ã€‚ è¿™æ ·å³ä½¿å‡ºç°ç³»ç»Ÿå´©æºƒï¼Œç”¨æˆ·æœ€å¤šåªä¼šä¸¢å¤±ä¸€ç§’ä¹‹å†…äº§ç”Ÿçš„æ•°æ®ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:6","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#æŒä¹…åŒ–æœºåˆ¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æŒä¹…åŒ–æœºåˆ¶å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦æŒä¹…åŒ–æ•°æ®ä¹Ÿå°±æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥åˆ°ç¡¬ç›˜é‡Œé¢ï¼Œå¤§éƒ¨åˆ†åŸå› æ˜¯ä¸ºäº†å¤‡ä»½æ•°æ®ï¼Œæ¯”å¦‚ä¸ºäº†é˜²æ­¢ç³»ç»Ÿæ•…éšœè€Œå°†æ•°æ®å¤‡ä»½åˆ°ä¸€ä¸ªå¦ä¸€å°æœºå™¨ã€‚ Redis ä¸¤ç§ä¸åŒçš„æŒä¹…åŒ–æ“ä½œã€‚ä¸€ç§æŒä¹…åŒ–æ–¹å¼å«å¿«ç…§ï¼ˆsnapshottingï¼ŒRDBï¼‰ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯åªè¿½åŠ æ–‡ä»¶ï¼ˆappend-only file, AOFï¼‰ã€‚ RDBå¿«ç…§æŒä¹…åŒ–æ˜¯ Redis é»˜è®¤é‡‡ç”¨çš„æŒä¹…åŒ–æ–¹å¼ï¼Œåœ¨ Redis.conf é…ç½®æ–‡ä»¶ä¸­é»˜è®¤æœ‰æ­¤ä¸‹é…ç½®ï¼š save 900 1 # åœ¨ 900 ç§’(15åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 1 ä¸ª key å‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ save 300 10 # åœ¨ 300 ç§’(5åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 10 ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ save 60 10000 # åœ¨ 60 ç§’(1åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 10000 ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ Redis å¯ä»¥é€šè¿‡åˆ›å»ºå¿«ç…§æ¥è·å¾—å­˜å‚¨åœ¨å†…å­˜é‡Œé¢çš„æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„å‰¯æœ¬ã€‚ Redis åˆ›å»ºå¿«ç…§ä¹‹åï¼Œå¯ä»¥å¯¹å¿«ç…§è¿›è¡Œå¤‡ä»½ï¼Œå¯ä»¥å°†å¿«ç…§å¤åˆ¶åˆ°å…¶ä»–æœåŠ¡å™¨ä»è€Œåˆ›å»ºå…·æœ‰ç›¸åŒæ•°æ®çš„æœåŠ¡å™¨å‰¯æœ¬ï¼Œè¿˜å¯ä»¥å°†å¿«ç…§ç•™åœ¨åŸåœ°ä»¥ä¾¿é‡å¯æœåŠ¡å™¨çš„æ—¶å€™ä½¿ç”¨ã€‚ AOFä¸å¿«ç…§æŒä¹…åŒ– RDB ç›¸æ¯”ï¼ŒAOF æŒä¹…åŒ– çš„å®æ—¶æ€§æ›´å¥½ï¼ŒåŸºæœ¬å·²æˆä¸ºä¸»æµçš„æŒä¹…åŒ–æ–¹æ¡ˆã€‚é»˜è®¤æƒ…å†µä¸‹ Redis æ²¡æœ‰å¼€å¯ AOFæ–¹å¼çš„æŒä¹…åŒ–ã€‚ å¼€å¯ AOF æŒä¹…åŒ–åæ¯æ‰§è¡Œä¸€æ¡ä¼šæ›´æ”¹ Redis ä¸­çš„æ•°æ®çš„å‘½ä»¤ï¼ŒRedis å°±ä¼šå°†è¯¥å‘½ä»¤å†™å…¥ç¡¬ç›˜ä¸­çš„ AOF æ–‡ä»¶ã€‚AOF æ–‡ä»¶çš„ä¿å­˜ä½ç½®å’Œ RDB æ–‡ä»¶çš„ä½ç½®ç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡ dir å‚æ•°è®¾ç½®çš„ï¼Œé»˜è®¤çš„æ–‡ä»¶åæ˜¯ appendonly.aofã€‚ Redis çš„é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨ä¸‰ç§ä¸åŒçš„ AOF æŒä¹…åŒ–æ–¹å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š appendfsync always # æ¯æ¬¡æœ‰æ•°æ®ä¿®æ”¹å‘ç”Ÿæ—¶éƒ½ä¼šå†™å…¥ AOF æ–‡ä»¶,è¿™æ ·ä¼šä¸¥é‡é™ä½ Redis çš„é€Ÿåº¦ appendfsync everysec # æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œæ˜¾ç¤ºåœ°å°†å¤šä¸ªå†™å‘½ä»¤åŒæ­¥åˆ°ç¡¬ç›˜ appendfsync no # è®©æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶è¿›è¡ŒåŒæ­¥ ä¸ºäº†å…¼é¡¾æ•°æ®å’Œå†™å…¥æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘ appendfsync everysec é€‰é¡¹ ï¼Œè®© Redis æ¯ç§’åŒæ­¥ä¸€æ¬¡ AOF æ–‡ä»¶ï¼ŒRedis æ€§èƒ½å‡ ä¹æ²¡å—åˆ°ä»»ä½•å½±å“ã€‚ è¿™æ ·å³ä½¿å‡ºç°ç³»ç»Ÿå´©æºƒï¼Œç”¨æˆ·æœ€å¤šåªä¼šä¸¢å¤±ä¸€ç§’ä¹‹å†…äº§ç”Ÿçš„æ•°æ®ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:6","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#rdb"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æŒä¹…åŒ–æœºåˆ¶å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦æŒä¹…åŒ–æ•°æ®ä¹Ÿå°±æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®å†™å…¥åˆ°ç¡¬ç›˜é‡Œé¢ï¼Œå¤§éƒ¨åˆ†åŸå› æ˜¯ä¸ºäº†å¤‡ä»½æ•°æ®ï¼Œæ¯”å¦‚ä¸ºäº†é˜²æ­¢ç³»ç»Ÿæ•…éšœè€Œå°†æ•°æ®å¤‡ä»½åˆ°ä¸€ä¸ªå¦ä¸€å°æœºå™¨ã€‚ Redis ä¸¤ç§ä¸åŒçš„æŒä¹…åŒ–æ“ä½œã€‚ä¸€ç§æŒä¹…åŒ–æ–¹å¼å«å¿«ç…§ï¼ˆsnapshottingï¼ŒRDBï¼‰ï¼Œå¦ä¸€ç§æ–¹å¼æ˜¯åªè¿½åŠ æ–‡ä»¶ï¼ˆappend-only file, AOFï¼‰ã€‚ RDBå¿«ç…§æŒä¹…åŒ–æ˜¯ Redis é»˜è®¤é‡‡ç”¨çš„æŒä¹…åŒ–æ–¹å¼ï¼Œåœ¨ Redis.conf é…ç½®æ–‡ä»¶ä¸­é»˜è®¤æœ‰æ­¤ä¸‹é…ç½®ï¼š save 900 1 # åœ¨ 900 ç§’(15åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 1 ä¸ª key å‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ save 300 10 # åœ¨ 300 ç§’(5åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 10 ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ save 60 10000 # åœ¨ 60 ç§’(1åˆ†é’Ÿ)ä¹‹åï¼Œå¦‚æœè‡³å°‘æœ‰ 10000 ä¸ªkeyå‘ç”Ÿå˜åŒ–ï¼ŒRedis å°±ä¼šè‡ªåŠ¨è§¦å‘ BGSAVE å‘½ä»¤åˆ›å»ºå¿«ç…§ã€‚ Redis å¯ä»¥é€šè¿‡åˆ›å»ºå¿«ç…§æ¥è·å¾—å­˜å‚¨åœ¨å†…å­˜é‡Œé¢çš„æ•°æ®åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¸Šçš„å‰¯æœ¬ã€‚ Redis åˆ›å»ºå¿«ç…§ä¹‹åï¼Œå¯ä»¥å¯¹å¿«ç…§è¿›è¡Œå¤‡ä»½ï¼Œå¯ä»¥å°†å¿«ç…§å¤åˆ¶åˆ°å…¶ä»–æœåŠ¡å™¨ä»è€Œåˆ›å»ºå…·æœ‰ç›¸åŒæ•°æ®çš„æœåŠ¡å™¨å‰¯æœ¬ï¼Œè¿˜å¯ä»¥å°†å¿«ç…§ç•™åœ¨åŸåœ°ä»¥ä¾¿é‡å¯æœåŠ¡å™¨çš„æ—¶å€™ä½¿ç”¨ã€‚ AOFä¸å¿«ç…§æŒä¹…åŒ– RDB ç›¸æ¯”ï¼ŒAOF æŒä¹…åŒ– çš„å®æ—¶æ€§æ›´å¥½ï¼ŒåŸºæœ¬å·²æˆä¸ºä¸»æµçš„æŒä¹…åŒ–æ–¹æ¡ˆã€‚é»˜è®¤æƒ…å†µä¸‹ Redis æ²¡æœ‰å¼€å¯ AOFæ–¹å¼çš„æŒä¹…åŒ–ã€‚ å¼€å¯ AOF æŒä¹…åŒ–åæ¯æ‰§è¡Œä¸€æ¡ä¼šæ›´æ”¹ Redis ä¸­çš„æ•°æ®çš„å‘½ä»¤ï¼ŒRedis å°±ä¼šå°†è¯¥å‘½ä»¤å†™å…¥ç¡¬ç›˜ä¸­çš„ AOF æ–‡ä»¶ã€‚AOF æ–‡ä»¶çš„ä¿å­˜ä½ç½®å’Œ RDB æ–‡ä»¶çš„ä½ç½®ç›¸åŒï¼Œéƒ½æ˜¯é€šè¿‡ dir å‚æ•°è®¾ç½®çš„ï¼Œé»˜è®¤çš„æ–‡ä»¶åæ˜¯ appendonly.aofã€‚ Redis çš„é…ç½®æ–‡ä»¶ä¸­å­˜åœ¨ä¸‰ç§ä¸åŒçš„ AOF æŒä¹…åŒ–æ–¹å¼ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š appendfsync always # æ¯æ¬¡æœ‰æ•°æ®ä¿®æ”¹å‘ç”Ÿæ—¶éƒ½ä¼šå†™å…¥ AOF æ–‡ä»¶,è¿™æ ·ä¼šä¸¥é‡é™ä½ Redis çš„é€Ÿåº¦ appendfsync everysec # æ¯ç§’åŒæ­¥ä¸€æ¬¡ï¼Œæ˜¾ç¤ºåœ°å°†å¤šä¸ªå†™å‘½ä»¤åŒæ­¥åˆ°ç¡¬ç›˜ appendfsync no # è®©æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶è¿›è¡ŒåŒæ­¥ ä¸ºäº†å…¼é¡¾æ•°æ®å’Œå†™å…¥æ€§èƒ½ï¼Œå¯ä»¥è€ƒè™‘ appendfsync everysec é€‰é¡¹ ï¼Œè®© Redis æ¯ç§’åŒæ­¥ä¸€æ¬¡ AOF æ–‡ä»¶ï¼ŒRedis æ€§èƒ½å‡ ä¹æ²¡å—åˆ°ä»»ä½•å½±å“ã€‚ è¿™æ ·å³ä½¿å‡ºç°ç³»ç»Ÿå´©æºƒï¼Œç”¨æˆ·æœ€å¤šåªä¼šä¸¢å¤±ä¸€ç§’ä¹‹å†…äº§ç”Ÿçš„æ•°æ®ã€‚ ","date":"2021-02-20","objectID":"/redis-glance-faq/:7:6","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#aof"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Redis å‘½ä»¤å‚è€ƒ Redis(ä¸€)ã€Redisäº”ç§æ•°æ®ç»“æ„ Redis ","date":"2021-02-20","objectID":"/redis-glance-faq/:8:0","series":null,"tags":["redis"],"title":"Redis å­¦ä¹ ç¬”è®°","uri":"/redis-glance-faq/#å‚è€ƒ"},{"categories":["mysql"],"content":"xiaobinqt,Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","date":"2020-12-20","objectID":"/mysql-server-exec-client-raw-sql/","series":null,"tags":["mysql"],"title":"Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","uri":"/mysql-server-exec-client-raw-sql/"},{"categories":["mysql"],"content":" ä¸è®ºå®¢æˆ·ç«¯è¿›ç¨‹å’ŒæœåŠ¡å™¨è¿›ç¨‹æ˜¯é‡‡ç”¨å“ªç§æ–¹å¼è¿›è¡Œé€šä¿¡ï¼Œæœ€åå®ç°çš„æ•ˆæœéƒ½æ˜¯ï¼šå®¢æˆ·ç«¯è¿›ç¨‹å‘æœåŠ¡å™¨è¿›ç¨‹å‘é€ä¸€æ®µæ–‡æœ¬ï¼ˆMySQLè¯­å¥ï¼‰ï¼ŒæœåŠ¡å™¨è¿›ç¨‹å¤„ç†åå†å‘å®¢æˆ·ç«¯è¿›ç¨‹å‘é€ä¸€æ®µæ–‡æœ¬ï¼ˆå¤„ç†ç»“æœï¼‰ã€‚ é‚£æœåŠ¡å™¨è¿›ç¨‹å¯¹å®¢æˆ·ç«¯è¿›ç¨‹å‘é€çš„è¯·æ±‚åšäº†ä»€ä¹ˆå¤„ç†ï¼Œæ‰èƒ½äº§ç”Ÿæœ€åçš„å¤„ç†ç»“æœå‘¢ï¼Ÿå®¢æˆ·ç«¯å¯ä»¥å‘æœåŠ¡å™¨å‘é€å¢åˆ æ”¹æŸ¥å„ç±»è¯·æ±‚ï¼Œè¿™é‡Œä»¥æŸ¥è¯¢è¯·æ±‚ä¸ºä¾‹ï¼Œå›¾ç¤ºä¸€ä¸‹å¤§è‡´çš„è¿‡ç¨‹ğŸ‘‡ client-server ","date":"2020-12-20","objectID":"/mysql-server-exec-client-raw-sql/:0:0","series":null,"tags":["mysql"],"title":"Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","uri":"/mysql-server-exec-client-raw-sql/#"},{"categories":["mysql"],"content":" è¿æ¥ç®¡ç†æ¯å½“æœ‰ä¸€ä¸ªå®¢æˆ·ç«¯è¿›ç¨‹è¿æ¥åˆ°æœåŠ¡å™¨è¿›ç¨‹æ—¶ï¼ŒæœåŠ¡å™¨è¿›ç¨‹éƒ½ä¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥ä¸“é—¨å¤„ç†ä¸è¿™ä¸ªå®¢æˆ·ç«¯çš„äº¤äº’ï¼Œå½“è¯¥å®¢æˆ·ç«¯é€€å‡ºæ—¶ä¼šä¸æœåŠ¡å™¨æ–­å¼€è¿æ¥ï¼ŒæœåŠ¡å™¨å¹¶ä¸ä¼šç«‹å³æŠŠä¸è¯¥å®¢æˆ·ç«¯äº¤äº’çš„çº¿ç¨‹é”€æ¯æ‰ï¼Œè€Œæ˜¯æŠŠå®ƒç¼“å­˜èµ·æ¥ï¼Œåœ¨å¦ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯å†è¿›è¡Œè¿æ¥æ—¶ï¼ŒæŠŠè¿™ä¸ªç¼“å­˜çš„çº¿ç¨‹åˆ†é…ç»™è¯¥æ–°å®¢æˆ·ç«¯ã€‚è¿™æ ·å°±èµ·åˆ°äº†ä¸é¢‘ç¹åˆ›å»ºå’Œé”€æ¯çº¿ç¨‹çš„æ•ˆæœï¼Œä»è€ŒèŠ‚çœå¼€é”€ã€‚ MySQLæœåŠ¡å™¨ä¼šä¸ºæ¯ä¸€ä¸ªè¿æ¥è¿›æ¥çš„å®¢æˆ·ç«¯åˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯çº¿ç¨‹åˆ†é…çš„å¤ªå¤šäº†ä¼šä¸¥é‡å½±å“ç³»ç»Ÿæ€§èƒ½ï¼Œæ‰€ä»¥ä¹Ÿéœ€è¦é™åˆ¶ä¸€ä¸‹å¯ä»¥åŒæ—¶è¿æ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯æ•°é‡ã€‚max_connectionså¯ä»¥è®¾ç½®å…è®¸åŒæ—¶è¿å…¥çš„å®¢æˆ·ç«¯æ•°é‡ã€‚ åœ¨å®¢æˆ·ç«¯ç¨‹åºå‘èµ·è¿æ¥çš„æ—¶å€™ï¼Œéœ€è¦æºå¸¦ä¸»æœºä¿¡æ¯ã€ç”¨æˆ·åã€å¯†ç ï¼ŒæœåŠ¡å™¨ç¨‹åºä¼šå¯¹å®¢æˆ·ç«¯ç¨‹åºæä¾›çš„è¿™äº›ä¿¡æ¯è¿›è¡Œè®¤è¯ï¼Œå¦‚æœè®¤è¯å¤±è´¥ï¼ŒæœåŠ¡å™¨ç¨‹åºä¼šæ‹’ç»è¿æ¥ã€‚ å½“è¿æ¥å»ºç«‹åï¼Œä¸è¯¥å®¢æˆ·ç«¯å…³è”çš„æœåŠ¡å™¨çº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ï¼ŒMySQLæœåŠ¡å™¨æ¥æ”¶åˆ°çš„è¯·æ±‚åªæ˜¯ä¸€ä¸ªæ–‡æœ¬æ¶ˆæ¯ï¼Œè¯¥æ–‡æœ¬æ¶ˆæ¯è¿˜è¦ç»è¿‡å„ç§å¤„ç†ã€‚ ","date":"2020-12-20","objectID":"/mysql-server-exec-client-raw-sql/:1:0","series":null,"tags":["mysql"],"title":"Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","uri":"/mysql-server-exec-client-raw-sql/#è¿æ¥ç®¡ç†"},{"categories":["mysql"],"content":" è§£æä¸ä¼˜åŒ–","date":"2020-12-20","objectID":"/mysql-server-exec-client-raw-sql/:2:0","series":null,"tags":["mysql"],"title":"Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","uri":"/mysql-server-exec-client-raw-sql/#è§£æä¸ä¼˜åŒ–"},{"categories":["mysql"],"content":" æŸ¥è¯¢ç¼“å­˜MySQLæœåŠ¡å™¨ç¨‹åºå¤„ç†æŸ¥è¯¢è¯·æ±‚æ—¶ï¼Œä¼šæŠŠåˆšåˆšå¤„ç†è¿‡çš„æŸ¥è¯¢è¯·æ±‚å’Œç»“æœç¼“å­˜èµ·æ¥ï¼Œå¦‚æœä¸‹ä¸€æ¬¡æœ‰ä¸€æ¨¡ä¸€æ ·çš„è¯·æ±‚è¿‡æ¥ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æŸ¥æ‰¾ç»“æœå°±å¥½äº†ï¼Œå°±ä¸ç”¨å†å»åº•å±‚çš„è¡¨ä¸­æŸ¥æ‰¾äº†ã€‚è¿™ä¸ªæŸ¥è¯¢ç¼“å­˜å¯ä»¥åœ¨ä¸åŒå®¢æˆ·ç«¯ä¹‹é—´å…±äº«ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå®¢æˆ·ç«¯AåˆšåˆšæŸ¥è¯¢äº†ä¸€ä¸ªè¯­å¥ï¼Œè€Œå®¢æˆ·ç«¯Bä¹‹åå‘é€äº†åŒæ ·çš„æŸ¥è¯¢è¯·æ±‚ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯Bçš„è¿™æ¬¡æŸ¥è¯¢å°±å¯ä»¥ç›´æ¥ä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ä¸­çš„æ•°æ®ã€‚ å½“ç„¶ï¼ŒMySQLæœåŠ¡å™¨å¹¶æ²¡æœ‰äººèªæ˜ï¼Œå¦‚æœä¸¤ä¸ªæŸ¥è¯¢è¯·æ±‚åœ¨ä»»ä½•å­—ç¬¦ä¸Šçš„ä¸åŒï¼ˆä¾‹å¦‚ï¼šç©ºæ ¼ã€æ³¨é‡Šã€å¤§å°å†™ï¼‰ï¼Œéƒ½ä¼šå¯¼è‡´ç¼“å­˜ä¸ä¼šå‘½ä¸­ã€‚å¦å¤–ï¼Œå¦‚æœæŸ¥è¯¢è¯·æ±‚ä¸­åŒ…å«æŸäº›ç³»ç»Ÿå‡½æ•°ã€ç”¨æˆ·è‡ªå®šä¹‰å˜é‡å’Œå‡½æ•°ã€ä¸€äº›ç³»ç»Ÿè¡¨ï¼Œå¦‚ mysql ã€information_schemaã€ performance_schema æ•°æ®åº“ä¸­çš„è¡¨ï¼Œé‚£è¿™ä¸ªè¯·æ±‚å°±ä¸ä¼šè¢«ç¼“å­˜ã€‚ä»¥æŸäº›ç³»ç»Ÿå‡½æ•°ä¸¾ä¾‹ï¼Œå¯èƒ½åŒæ ·çš„å‡½æ•°çš„ä¸¤æ¬¡è°ƒç”¨ä¼šäº§ç”Ÿä¸ä¸€æ ·çš„ç»“æœï¼Œæ¯”å¦‚å‡½æ•°NOW ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šäº§ç”Ÿæœ€æ–°çš„å½“å‰æ—¶é—´ï¼Œå¦‚æœåœ¨ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚ä¸­è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°ï¼Œé‚£å³ä½¿æŸ¥è¯¢è¯·æ±‚çš„æ–‡æœ¬ä¿¡æ¯éƒ½ä¸€æ ·ï¼Œé‚£ä¸åŒæ—¶é—´çš„ä¸¤æ¬¡æŸ¥è¯¢ä¹Ÿåº”è¯¥å¾—åˆ°ä¸åŒçš„ç»“æœï¼Œå¦‚æœåœ¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢æ—¶å°±ç¼“å­˜äº†ï¼Œé‚£ç¬¬äºŒæ¬¡æŸ¥è¯¢çš„æ—¶å€™ç›´æ¥ä½¿ç”¨ç¬¬ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœå°±æ˜¯é”™è¯¯çš„ï¼ æ—¢ç„¶æ˜¯ç¼“å­˜ï¼Œå°±æœ‰ç¼“å­˜å¤±æ•ˆçš„æ—¶å€™ã€‚MySQLçš„ç¼“å­˜ç³»ç»Ÿä¼šç›‘æµ‹æ¶‰åŠåˆ°çš„æ¯å¼ è¡¨ï¼Œåªè¦è¯¥è¡¨çš„ç»“æ„æˆ–è€…æ•°æ®è¢«ä¿®æ”¹ï¼Œå¦‚å¯¹è¯¥è¡¨ä½¿ç”¨äº†INSERTã€ UPDATEã€DELETEã€TRUNCATE TABLEã€ALTER TABLE ã€DROP TABLEæˆ– DROP DATABASEè¯­å¥ï¼Œé‚£ä½¿ç”¨è¯¥è¡¨çš„æ‰€æœ‰é«˜é€Ÿç¼“å­˜æŸ¥è¯¢éƒ½å°†å˜ä¸ºæ— æ•ˆå¹¶ä»é«˜é€Ÿç¼“å­˜ä¸­åˆ é™¤ï¼ è™½ç„¶æŸ¥è¯¢ç¼“å­˜æœ‰æ—¶å¯ä»¥æå‡ç³»ç»Ÿæ€§èƒ½ï¼Œä½†ä¹Ÿä¸å¾—ä¸å› ç»´æŠ¤è¿™å—ç¼“å­˜è€Œé€ æˆä¸€äº›å¼€é”€ï¼Œæ¯”å¦‚æ¯æ¬¡éƒ½è¦å»æŸ¥è¯¢ç¼“å­˜ä¸­æ£€ç´¢ï¼ŒæŸ¥è¯¢è¯·æ±‚å¤„ç†å®Œéœ€è¦æ›´æ–°æŸ¥è¯¢ç¼“å­˜ï¼Œç»´æŠ¤è¯¥æŸ¥è¯¢ç¼“å­˜å¯¹åº”çš„å†…å­˜åŒºåŸŸã€‚ä»MySQL 5.7.20å¼€å§‹ï¼Œä¸æ¨èä½¿ç”¨æŸ¥è¯¢ç¼“å­˜ï¼Œå¹¶åœ¨MySQL 8.0ä¸­åˆ é™¤ã€‚ ","date":"2020-12-20","objectID":"/mysql-server-exec-client-raw-sql/:2:1","series":null,"tags":["mysql"],"title":"Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","uri":"/mysql-server-exec-client-raw-sql/#æŸ¥è¯¢ç¼“å­˜"},{"categories":["mysql"],"content":" è¯­æ³•è§£æå¦‚æœæŸ¥è¯¢ç¼“å­˜æ²¡æœ‰å‘½ä¸­ï¼Œæ¥ä¸‹æ¥å°±éœ€è¦è¿›å…¥æ­£å¼çš„æŸ¥è¯¢é˜¶æ®µäº†ã€‚å› ä¸ºå®¢æˆ·ç«¯ç¨‹åºå‘é€è¿‡æ¥çš„è¯·æ±‚åªæ˜¯ä¸€æ®µæ–‡æœ¬ï¼Œæ‰€ä»¥MySQLæœåŠ¡å™¨ç¨‹åºé¦–å…ˆè¦å¯¹è¿™æ®µæ–‡æœ¬åšåˆ†æï¼Œåˆ¤æ–­è¯·æ±‚çš„è¯­æ³•æ˜¯å¦æ­£ç¡®ï¼Œç„¶åä»æ–‡æœ¬ä¸­å°†è¦æŸ¥è¯¢çš„è¡¨ã€å„ç§æŸ¥è¯¢æ¡ä»¶éƒ½æå–å‡ºæ¥æ”¾åˆ°MySQLæœåŠ¡å™¨å†…éƒ¨ä½¿ç”¨çš„ä¸€äº›æ•°æ®ç»“æ„ä¸Šæ¥ã€‚ ","date":"2020-12-20","objectID":"/mysql-server-exec-client-raw-sql/:2:2","series":null,"tags":["mysql"],"title":"Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","uri":"/mysql-server-exec-client-raw-sql/#è¯­æ³•è§£æ"},{"categories":["mysql"],"content":" æŸ¥è¯¢ä¼˜åŒ–è¯­æ³•è§£æä¹‹åï¼ŒæœåŠ¡å™¨ç¨‹åºè·å¾—åˆ°äº†éœ€è¦çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¦æŸ¥è¯¢çš„åˆ—æ˜¯å“ªäº›ï¼Œè¡¨æ˜¯å“ªä¸ªï¼Œæœç´¢æ¡ä»¶æ˜¯ä»€ä¹ˆç­‰ç­‰ï¼Œä½†å…‰æœ‰è¿™äº›æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸ºæˆ‘ä»¬å†™çš„MySQLè¯­å¥æ‰§è¡Œèµ·æ¥æ•ˆç‡å¯èƒ½å¹¶ä¸æ˜¯å¾ˆé«˜ï¼ŒMySQLçš„ä¼˜åŒ–ç¨‹åºä¼šå¯¹æˆ‘ä»¬çš„è¯­å¥åšä¸€äº›ä¼˜åŒ–ï¼Œå¦‚å¤–è¿æ¥è½¬æ¢ä¸ºå†…è¿æ¥ã€è¡¨è¾¾å¼ç®€åŒ–ç­‰ã€‚ ä¼˜åŒ–çš„ç»“æœå°±æ˜¯ç”Ÿæˆä¸€ä¸ªæ‰§è¡Œè®¡åˆ’ï¼Œè¿™ä¸ªæ‰§è¡Œè®¡åˆ’è¡¨æ˜äº†åº”è¯¥ä½¿ç”¨å“ªäº›ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢ï¼Œè¡¨ä¹‹é—´çš„è¿æ¥é¡ºåºæ˜¯ä»€ä¹ˆæ ·çš„ã€‚å¯ä»¥ä½¿ç”¨EXPLAINè¯­å¥æ¥æŸ¥çœ‹æŸä¸ªè¯­å¥çš„æ‰§è¡Œè®¡åˆ’ã€‚ ","date":"2020-12-20","objectID":"/mysql-server-exec-client-raw-sql/:2:3","series":null,"tags":["mysql"],"title":"Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","uri":"/mysql-server-exec-client-raw-sql/#æŸ¥è¯¢ä¼˜åŒ–"},{"categories":["mysql"],"content":" å­˜å‚¨å¼•æ“å½“æœåŠ¡å™¨ç¨‹åºå®Œæˆäº†æŸ¥è¯¢ä¼˜åŒ–ï¼Œè¿™æ—¶è¿˜æ²¡æœ‰çœŸæ­£çš„å»è®¿é—®çœŸå®çš„æ•°æ®è¡¨ï¼ŒMySQLæœåŠ¡å™¨æŠŠæ•°æ®çš„å­˜å‚¨å’Œæå–æ“ä½œéƒ½å°è£…åˆ°äº†ä¸€ä¸ªå«å­˜å‚¨å¼•æ“çš„æ¨¡å—é‡Œã€‚ æˆ‘ä»¬çŸ¥é“è¡¨æ˜¯ç”±ä¸€è¡Œä¸€è¡Œçš„è®°å½•ç»„æˆçš„ï¼Œä½†è¿™åªæ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚å¿µï¼Œç‰©ç†ä¸Šå¦‚ä½•è¡¨ç¤ºè®°å½•ï¼Œæ€ä¹ˆä»è¡¨ä¸­è¯»å–æ•°æ®ï¼Œæ€ä¹ˆæŠŠæ•°æ®å†™å…¥å…·ä½“çš„ç‰©ç†å­˜å‚¨å™¨ä¸Šï¼Œè¿™éƒ½æ˜¯å­˜å‚¨å¼•æ“è´Ÿè´£çš„äº‹æƒ…ã€‚ä¸ºäº†å®ç°ä¸åŒçš„åŠŸèƒ½ï¼ŒMySQLæä¾›äº†å„å¼å„æ ·çš„å­˜å‚¨å¼•æ“ï¼Œä¸åŒå­˜å‚¨å¼•æ“ç®¡ç†çš„è¡¨å…·ä½“çš„å­˜å‚¨ç»“æ„å¯èƒ½ä¸åŒï¼Œé‡‡ç”¨çš„å­˜å–ç®—æ³•ä¹Ÿå¯èƒ½ä¸åŒã€‚ ä¸ºäº†ç®¡ç†æ–¹ä¾¿ï¼ŒæŠŠè¿æ¥ç®¡ç†ã€æŸ¥è¯¢ç¼“å­˜ã€è¯­æ³•è§£æã€æŸ¥è¯¢ä¼˜åŒ–è¿™äº›å¹¶ä¸æ¶‰åŠçœŸå®æ•°æ®å­˜å‚¨çš„åŠŸèƒ½åˆ’åˆ†ä¸ºMySQL serverçš„åŠŸèƒ½ï¼ŒæŠŠçœŸå®å­˜å–æ•°æ®çš„åŠŸèƒ½åˆ’åˆ†ä¸ºå­˜å‚¨å¼•æ“çš„åŠŸèƒ½ã€‚å„ç§ä¸åŒçš„å­˜å‚¨å¼•æ“å‘ä¸Šè¾¹çš„MySQL server å±‚æä¾›ç»Ÿä¸€çš„è°ƒç”¨æ¥å£ï¼ˆä¹Ÿå°±æ˜¯å­˜å‚¨å¼•æ“APIï¼‰ï¼ŒåŒ…å«äº†å‡ åä¸ªåº•å±‚å‡½æ•°ï¼Œåƒ\"è¯»å–ç´¢å¼•ç¬¬ä¸€æ¡å†…å®¹\"ã€â€œè¯»å–ç´¢å¼•ä¸‹ä¸€æ¡å†…å®¹â€ã€â€œæ’å…¥è®°å½•\"ç­‰ç­‰ã€‚ æ‰€ä»¥åœ¨MySQL serverå®Œæˆäº†æŸ¥è¯¢ä¼˜åŒ–åï¼Œåªéœ€æŒ‰ç…§ç”Ÿæˆçš„æ‰§è¡Œè®¡åˆ’è°ƒç”¨åº•å±‚å­˜å‚¨å¼•æ“æä¾›çš„APIï¼Œè·å–åˆ°æ•°æ®åè¿”å›ç»™å®¢æˆ·ç«¯å°±å¥½äº†ã€‚ ","date":"2020-12-20","objectID":"/mysql-server-exec-client-raw-sql/:3:0","series":null,"tags":["mysql"],"title":"Mysql æœåŠ¡ç«¯å¦‚ä½•å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚","uri":"/mysql-server-exec-client-raw-sql/#å­˜å‚¨å¼•æ“"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,linux å¸¸ç”¨å‘½ä»¤ï¼Œclocç»Ÿè®¡ä»£ç è¡Œæ•°ï¼Œgrep,curl,mktempç”¨æ³•","date":"2020-11-19","objectID":"/linux-common-concept/","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" linux å’Œ unix çš„åŒºåˆ«Linuxå’ŒUnixä¹‹é—´çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ ","date":"2020-11-19","objectID":"/linux-common-concept/:1:0","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#linux-å’Œ-unix-çš„åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" musl å’Œ glibc çš„åŒºåˆ«musl å’Œ glibc éƒ½æ˜¯ Linux çš„æ ‡å‡†åº“ï¼ŒåŒºåˆ«æ˜¯ musl æ˜¯ä¸€ä¸ª mini ç‰ˆæœ¬ï¼Œæˆ–æ˜¯å«åšåŸºäº glibc çš„åº“ï¼Œè€Œ glibc æ˜¯ä¸€ä¸ªå®Œæ•´ç‰ˆæœ¬ã€‚ ","date":"2020-11-19","objectID":"/linux-common-concept/:2:0","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#musl-å’Œ-glibc-çš„åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ubuntu","date":"2020-11-19","objectID":"/linux-common-concept/:3:0","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#ubuntu"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è·å–ç³»ç»Ÿä»£å· lsb_release -cs è·å–ç³»ç»Ÿä»£å· ","date":"2020-11-19","objectID":"/linux-common-concept/:3:1","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#è·å–ç³»ç»Ÿä»£å·"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯ uname -a # æˆ–è€… cat /proc/version å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯ ","date":"2020-11-19","objectID":"/linux-common-concept/:3:2","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#å†…æ ¸ç‰ˆæœ¬ä¿¡æ¯"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" lsb_releaseLSBLinux Standard Base æ˜¯ Linux æ ‡å‡†åº“çš„ç¼©å†™ï¼Œ lsb_release å‘½ä»¤ ç”¨æ¥ä¸å…·ä½“ Linux å‘è¡Œç‰ˆç›¸å…³çš„ Linux æ ‡å‡†åº“ä¿¡æ¯ã€‚ CentOS æœ€å°åŒ–å®‰è£…æ—¶é»˜è®¤æ²¡æœ‰è¿™ä¸ªå‘½ä»¤ï¼Œéœ€è¦å®‰è£… lsb_release ä½¿ç”¨å‘½ä»¤ï¼ŒğŸ‘‡ä»¥ä¸‹æ˜¯å¸¸è§ç³»ç»Ÿçš„å®‰è£… lsb_release å‘½ä»¤ã€‚ ","date":"2020-11-19","objectID":"/linux-common-concept/:4:0","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#lsb_release"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Ubuntu, Debian sudo apt-get update \u0026\u0026 sudo apt-get install lsb-core ","date":"2020-11-19","objectID":"/linux-common-concept/:4:1","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#ubuntu-debian"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" CentOS sudo yum update \u0026\u0026 sudo yum install redhat-lsb-core ","date":"2020-11-19","objectID":"/linux-common-concept/:4:2","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#centos"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Fedora sudo dnf update \u0026\u0026 sudo dnf install redhat-lsb-core ","date":"2020-11-19","objectID":"/linux-common-concept/:4:3","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#fedora"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚æ•° lsb_release å‚æ•° -vï¼šæ˜¾ç¤ºä¸ä½  Linux å‘è¡Œç‰ˆç›¸å¯¹åº”çš„ Linux ç‰ˆæœ¬åº“æè¿°ä¿¡æ¯ã€‚Linux ç‰ˆæœ¬åº“æ¨¡å—æè¿°ä½¿ç”¨å†’å· : åˆ†åˆ†éš” -iï¼šæ˜¾ç¤ºè¯¥ Linux ç³»ç»Ÿçš„å‘è¡Œå•† -dï¼šæ˜¾ç¤º Linux å‘è¡Œç‰ˆæè¿°ä¿¡æ¯ -rï¼šæ˜¾ç¤ºå½“å‰ Linux å‘è¡Œç‰ˆç‰ˆæœ¬å· -cï¼šæ˜¾ç¤ºå½“å‰ Linux å‘è¡Œç‰ˆä»£å·codename -aï¼šæ˜¾ç¤ºå…¨éƒ¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬ LSBã€ç‰ˆæœ¬å·ã€ä»£å·ã€ç‰ˆæœ¬æè¿°ä¿¡æ¯ ","date":"2020-11-19","objectID":"/linux-common-concept/:4:4","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#å‚æ•°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ä»¥ä¸‹å‘½ä»¤éƒ½æ˜¯ç¬”è€…åœ¨å·¥ä½œä¸­ç”¨åˆ°è¿‡çš„ï¼Œå› ä¸ºä¸æ˜¯ä¸“ä¸šçš„ shell å·¥ç¨‹å¸ˆï¼Œæ‰€ä»¥ä¾¿é€šè¿‡ç¬”è®°è®°å½•ä¸‹æ¥é˜²æ­¢å¿˜è®°ã€‚ ","date":"2020-11-19","objectID":"/linux-common-concept/:5:0","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#å¸¸ç”¨å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" cutcut å‘½ä»¤ä»æ–‡ä»¶çš„æ¯ä¸€è¡Œå‰ªåˆ‡å­—èŠ‚ã€å­—ç¬¦å’Œå­—æ®µå¹¶å°†è¿™äº›å­—èŠ‚ã€å­—ç¬¦å’Œå­—æ®µå†™è‡³æ ‡å‡†è¾“å‡ºã€‚ -d ï¼šè‡ªå®šä¹‰åˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºåˆ¶è¡¨ç¬¦ã€‚ -f ï¼šä¸-dä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‡å®šæ˜¾ç¤ºå“ªä¸ªåŒºåŸŸã€‚ cut -d -f ","date":"2020-11-19","objectID":"/linux-common-concept/:5:1","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#cut"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" grep grep -v name # è¡¨ç¤ºæŸ¥çœ‹é™¤äº†å«æœ‰nameä¹‹å¤–çš„è¡Œå†…å®¹ grep -v ","date":"2020-11-19","objectID":"/linux-common-concept/:5:2","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#grep"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" curl curl -o /dev/null -s -w %{http_code} https://www.baidu.com -o ï¼šè¾“å‡ºæ–‡ä»¶ï¼Œé»˜è®¤ä¸ºæ ‡å‡†è¾“å‡ºã€‚ -s ï¼šå±è”½æ‰è¾“å‡ºï¼Œä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚ -w ï¼šè¾“å‡ºhttpçŠ¶æ€ç ã€‚ -k : å¿½ç•¥è¯ä¹¦ -v å‚æ•°è¾“å‡ºé€šä¿¡çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œç”¨äºè°ƒè¯• æ·»åŠ è¯·æ±‚ cookie --cookie \"TOKEN1=Yes;TOKEN2=no\" å¯ä»¥è®¾ç½®è¯·æ±‚ cookieï¼Œå¤šä¸ª cookie ç”¨;åˆ†éš”ã€‚ æ¯”å¦‚ï¼š curl -v --cookie 'LG=1cabdaad-e522-417c-8ee4-6d5c53daa043;U=2f2f01d2-4fb3-462b-8e38-1b1e11e7bc53' 'http://example.com:42225/api/projects/819c4030-184f-42d2-924a-53184e903acd/jobs/3/artifacts/switch_app_test.tar?token=MYTOKEN' -o testsssss.tar ","date":"2020-11-19","objectID":"/linux-common-concept/:5:3","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#curl"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" sed -eå¤šé‡ç¼–è¾‘ tail /etc/services | sed -e '1,2d' -e 's/blp5/test/' 1,2dï¼šåˆ é™¤ç¬¬ä¸€è¡Œå’Œç¬¬äºŒè¡Œ s/blp5/test/ï¼šå°†blp5æ›¿æ¢ä¸ºtest å¯ä»¥ç”¨;åˆ†éš”å¤šä¸ªå‘½ä»¤ğŸ‘‡æ•ˆæœä¸€æ ·ï¼š tail /etc/services | sed '1,2d;s/blp5/test/' sedå¤šè¡Œç¼–è¾‘ è¯»å–ä¸‹ä¸€è¡Œ n è¯»å–ä¸‹ä¸€è¡Œåˆ°æ¨¡å¼ç©ºé—´ seq 6 | sed -n 'n;p' sed å…ˆè¯»å–ç¬¬ä¸€è¡Œ 1ï¼Œæ‰§è¡Œ n å‘½ä»¤ï¼Œè·å–ä¸‹ä¸€è¡Œ 2ï¼Œæ­¤æ—¶æ¨¡å¼ç©ºé—´æ˜¯ 2ï¼Œæ‰§è¡Œ p å‘½ä»¤ï¼Œæ‰“å°æ¨¡å¼ç©ºé—´ã€‚ç°åœ¨æ¨¡å¼ç©ºé—´æ˜¯ 2ï¼Œ sed å†è¯»å– 3ï¼Œæ‰§è¡Œ n å‘½ä»¤ï¼Œè·å–ä¸‹ä¸€è¡Œ 4ï¼Œæ­¤æ—¶æ¨¡å¼ç©ºé—´ä¸º 4ï¼Œæ‰§è¡Œ p å‘½ä»¤ï¼Œä»¥æ­¤ç±»æ¨ã€‚ æ‰“å°å¶æ•° ","date":"2020-11-19","objectID":"/linux-common-concept/:5:4","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#sed"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" tar ä¸è§£å‹è¯»å–taré‡Œé¢çš„æŸä¸ªæ–‡ä»¶ï¼Œtar xf taråŒ… è·¯å¾„ -O è¯»å–æ–‡ä»¶ ç›®å½•å‹ç¼©æˆ.tgz å‚æ•° è¯´æ˜ -c create å»ºç«‹å‹ç¼©æ¡£æ¡ˆçš„å‚æ•° -x è§£å‹ç¼©å‹ç¼©æ¡£æ¡ˆçš„å‚æ•° -z æ˜¯å¦éœ€è¦ç”¨gzipå‹ç¼© -v å‹ç¼©çš„è¿‡ç¨‹ä¸­æ˜¾ç¤ºæ¡£æ¡ˆ -f ç½®é¡¶æ–‡æ¡£åï¼Œåœ¨fåé¢ç«‹å³æ¥æ–‡ä»¶åï¼Œä¸èƒ½å†åŠ å‚æ•° tar czvf xxxx.tgz ç›®å½• #æ¯”å¦‚ tar czvf node-test.tgz package ","date":"2020-11-19","objectID":"/linux-common-concept/:5:5","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#tar"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" md5sum md5sum ","date":"2020-11-19","objectID":"/linux-common-concept/:5:6","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#md5sum"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" mktemp -d åˆ›å»ºä¸€ä¸ªç›®å½•è€Œéæ–‡ä»¶ mktemp ","date":"2020-11-19","objectID":"/linux-common-concept/:5:7","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#mktemp"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" du du -sh æŸ¥çœ‹å½“å‰ç›®å½•çš„æ€»å¤§å° du -sh * æŸ¥çœ‹å½“å‰ç›®å½•æ‰€æœ‰å­ç›®å½•çš„å¤§å° du -ach * æŸ¥çœ‹å½“å‰ç›®å½•å’Œæ‰€æœ‰å­ç›®å½•å¤§å°ï¼Œæœ€åä¸€è¡Œä¼šæ˜¾ç¤ºå½“å‰ç›®å½•çš„æ€»å¤§å°ï¼Œä¸åŒ…æ‹¬éšè—æ–‡ä»¶ du -sh /* --exclude=\"proc\"ï¼Œdu -sh /* --exclude=\"*proc*\" æ’é™¤åå­—ä¸­åŒ…å« proc çš„æ–‡ä»¶æˆ–ç›®å½• ","date":"2020-11-19","objectID":"/linux-common-concept/:5:8","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#du"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ•°ç»„æ“ä½œ #!/bin/bash let a=0 for i in $(seq 1 10);do array[a]=$i let a++ done echo \"ä¸€ä¸ªæ·»åŠ å¤šä¸ªå…ƒç´ ï¼še f g\" array+=(e f g) echo \"æ•°ç»„æ‰€æœ‰å…ƒç´  ${array[*]}\" # shellcheck disable=SC2145 echo \"æ•°ç»„æ‰€æœ‰ä¸‹æ ‡: ${!array[@]}\" echo \"æ•°ç»„é•¿åº¦ä¸ºï¼š${#array[*]}\" echo \"æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºï¼š${array[0]}\" echo \"åˆ é™¤æ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ \" # shellcheck disable=SC2184 unset array[1] echo \"å†æ¬¡æ•°ç»„æ‰€æœ‰å…ƒç´  ${array[*]}\" æ•°ç»„æ“ä½œ ","date":"2020-11-19","objectID":"/linux-common-concept/:6:0","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#æ•°ç»„æ“ä½œ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" cloccloccount lines of codeï¼Œæ˜¯ä¸€æ¬¾ä½¿ç”¨ Perl è¯­è¨€å¼€å‘çš„å¼€æºä»£ç ç»Ÿè®¡å·¥å…·ï¼Œæ”¯æŒå¤šå¹³å°ä½¿ç”¨ã€å¤šè¯­è¨€è¯†åˆ«ã€‚ä»åå­—å°±èƒ½å¤Ÿç›´è§‚åœ°çŸ¥é“å®ƒçš„åŠŸèƒ½ï¼šå¯ä»¥å¸®åŠ©è®¡ç®—æ–‡ä»¶ä¸­çš„æœ‰æ•ˆä»£ç æ•°é‡ï¼Œè€Œä¸”ä¼šè‡ªåŠ¨æ’é™¤æ³¨é‡Šå’Œç©ºæ ¼ã€‚ cloc git åœ°å€ https://github.com/AlDanial/clocï¼Œå®˜ç½‘åœ°å€ https://cloc.sourceforge.net/ã€‚ cloc è¿˜å¯ä»¥é€šè¿‡ npm å®‰è£…ã€‚ cloc åœ¨æ‰§è¡Œå®Œclocå‘½ä»¤ä»¥åå®ƒä¼šè®¡ç®—ä¸ä¸€æ ·ç¼–ç¨‹è¯­è¨€çš„æ–‡ä»¶æ•°ï¼ˆfilesï¼‰ã€ç©ºè¡Œï¼ˆblankï¼‰ã€æ³¨é‡Šï¼ˆcommentï¼‰å’Œä»£ç è¡Œæ•°ï¼ˆcodeï¼‰ï¼Œè€Œä¸”æœ€åè¿”å› SUM æ€»æ•°ã€‚ ","date":"2020-11-19","objectID":"/linux-common-concept/:7:0","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#cloc"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ å‘½ä»¤ è¯´æ˜ --ignore-whitespace åœ¨ä½¿ç”¨â€“diffæ¯”è¾ƒæ–‡ä»¶æ—¶å¿½ç•¥æ°´å¹³ç©ºæ ¼ --max-file-size=\u003cMB\u003e è‹¥æ˜¯è¦è·³è¿‡å¤§äºç»™å®šå¤§å°MBçš„æ–‡ä»¶ --exclude-dir=\u003cdir1\u003e,\u003cdir2\u003e æ’é™¤ç»™å®šçš„é€—å·åˆ†éš”ç›®å½• --exclude-ext=\u003cext1\u003e,\u003cext2\u003e æ’é™¤ç»™å®šçš„æ–‡ä»¶æ‰©å±•å --out=\u003cfile\u003e å°†ç»“æœä¿å­˜åˆ°\u003cfile\u003e --quiet ç¦æ­¢å…¨éƒ¨ä¿¡æ¯æ¶ˆæ¯å¹¶ä»…æ˜¾ç¤ºæœ€ç»ˆæŠ¥å‘Š --diff\u003cset1\u003e \u003cset2\u003e è®¡ç®—set1å’Œset2çš„æºæ–‡ä»¶ä¹‹é—´çš„ä»£ç å·®åˆ«ã€‚ è¾“å…¥èƒ½å¤Ÿæ˜¯æ–‡ä»¶å’Œç›®å½•çš„æ··åˆ ","date":"2020-11-19","objectID":"/linux-common-concept/:7:1","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#å¸¸ç”¨å‘½ä»¤-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ curl -w,â€“write-outå‚æ•°è¯¦è§£ ã€linuxã€‘æŸ¥çœ‹æ–‡ä»¶ç›®å½•å¤§å° ","date":"2020-11-19","objectID":"/linux-common-concept/:8:0","series":null,"tags":["linux"],"title":"Linux å¸¸ç”¨å‘½ä»¤å¤‡å¿˜","uri":"/linux-common-concept/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,docker IPv4 forwarding is disabled. Networking will not work","date":"2020-11-08","objectID":"/ipv4-forwarding-is-disabled-networking-will-not-work/","series":null,"tags":["docker"],"title":"IPv4 forwarding is disabled. Networking will not work","uri":"/ipv4-forwarding-is-disabled-networking-will-not-work/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é—®é¢˜ä»Šå¤©åœ¨æ“ä½œ docker æ—¶é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜IPv4 forwarding is disabled. Networking will not workğŸ‘‡ æŠ¥é”™ä¿¡æ¯ æˆ‘çš„ç³»ç»Ÿæ˜¯ CentOS7.9 ç³»ç»Ÿä¿¡æ¯ ","date":"2020-11-08","objectID":"/ipv4-forwarding-is-disabled-networking-will-not-work/:1:0","series":null,"tags":["docker"],"title":"IPv4 forwarding is disabled. Networking will not work","uri":"/ipv4-forwarding-is-disabled-networking-will-not-work/#é—®é¢˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³æ–¹æ¡ˆåœ¨å®¿ä¸»æœºæ‰§è¡Œ echo \"net.ipv4.ip_forward=1\" \u003e\u003e/usr/lib/sysctl.d/00-system.conf ç„¶åé‡å¯ç½‘ç»œå’Œ docker systemctl restart network systemctl restart docker é—®é¢˜è§£å†³ ","date":"2020-11-08","objectID":"/ipv4-forwarding-is-disabled-networking-will-not-work/:2:0","series":null,"tags":["docker"],"title":"IPv4 forwarding is disabled. Networking will not work","uri":"/ipv4-forwarding-is-disabled-networking-will-not-work/#è§£å†³æ–¹æ¡ˆ"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":"https,åŠ å¯†ç®—æ³•,ä»€ä¹ˆæ˜¯ https/ssl/tls,ä»€ä¹ˆæ˜¯å®‰å…¨,https ä¸ºä»€ä¹ˆå®‰å…¨,å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†,CA è¯ä¹¦","date":"2020-10-27","objectID":"/what-is-https/","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":"ä¸ºä»€ä¹ˆæœ‰ HTTPSï¼Ÿå› ä¸º HTTP ä¸å®‰å…¨ï¼ ç°åœ¨çš„äº’è”ç½‘å·²ç»ä¸å†æ˜¯ â€œç”°å›­æ—¶ä»£â€ï¼Œâ€œé»‘æš—æ£®æ—â€ å·²ç»åˆ°æ¥ã€‚ä¸Šç½‘çš„è®°å½•ä¼šè¢«è½»æ˜“æˆªè·ï¼Œç½‘ç«™æ˜¯å¦çœŸå®ä¹Ÿæ— æ³•éªŒè¯ï¼Œé»‘å®¢å¯ä»¥ä¼ªè£…æˆé“¶è¡Œç½‘ç«™ï¼Œç›—å–çœŸå®å§“åã€å¯†ç ã€é“¶è¡Œå¡ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œå¨èƒäººèº«å®‰å…¨å’Œè´¢äº§å®‰å…¨ã€‚ ä¸Šç½‘çš„æ—¶å€™å¿…é¡»æ­¥æ­¥ä¸ºè¥ã€å¤„å¤„å°å¿ƒï¼Œå¦åˆ™å°±ä¼šè¢«ä¸çŸ¥é“åŸ‹ä¼åœ¨å“ªé‡Œçš„é»‘å®¢æ‰€â€œçŒæ€â€ã€‚ HTTPS å¦‚ä½•å®ç°å®‰å…¨é€šä¿¡ï¼Ÿå¦‚ä½•æ„å»ºå‡ºå›ºè‹¥é‡‘æ±¤çš„ç½‘ç»œåŸå ¡ï¼Ÿä¸»è¦æ¶‰åŠçš„çŸ¥è¯†ç‚¹å¦‚ä¸‹ï¼š ä»€ä¹ˆæ˜¯ HTTPS ä»€ä¹ˆæ ·çš„æ‰æ˜¯å®‰å…¨çš„é€šä¿¡ å¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†ã€æ‘˜è¦ç®—æ³•ã€æ•°å­—ç­¾åã€å®Œæ•´æ€§æ ¡éªŒæ˜¯ä»€ä¹ˆ è¿ç§» HTTPS çš„å¿…è¦æ€§ ","date":"2020-10-27","objectID":"/what-is-https/:0:0","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä»€ä¹ˆæ˜¯å®‰å…¨åœ¨é€šä¿¡è¿‡ç¨‹ä¸­ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹æ€§åˆ™è®¤ä¸ºå®‰å…¨ï¼šæœºå¯†æ€§ã€å®Œæ•´æ€§ã€ä¸å¯å¦è®¤ã€èº«ä»½è®¤è¯ã€‚ æœºå¯†æ€§ï¼šæ•°æ®å¿…é¡»ä¿å¯†ï¼Œåªèƒ½æœ‰ä¿¡ä»»çš„äººè¯»å–ï¼Œå…¶ä»–äººæ˜¯ä¸å¯è§çš„ç§˜å¯†ã€‚å°±æ˜¯ä¸èƒ½è®©ä¸ç›¸å…³çš„äººçœ‹åˆ°ä¸è¯¥çœ‹çš„ä¸œè¥¿ã€‚ å®Œæ•´æ€§ï¼šä¹Ÿå«ä½œä¸€è‡´æ€§ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ²¡æœ‰è¢«éæ³•ç¯¡æ”¹ï¼Œå†…å®¹ä¸èƒ½å¤šä¹Ÿä¸èƒ½å°‘ï¼Œä¸€äº”ä¸€åçš„ä¿æŒåŸçŠ¶ã€‚ ä¸å¯å¦è®¤ï¼šä¸å¯æŠµèµ–ï¼Œä¸èƒ½å¦è®¤å·²ç»å‘ç”Ÿè¿‡çš„äº‹æƒ…ã€‚ èº«ä»½éªŒè¯ï¼šç¡®è®¤å¯¹æ–¹çš„çœŸå®èº«ä»½ï¼Œâ€œè¯æ˜ä½ æ˜¯çœŸçš„æ˜¯ä½ â€ï¼Œä¿è¯æ¶ˆæ¯å‘é€åˆ°å¯ä¿¡çš„äººï¼Œè€Œä¸æ˜¯éæ³•ä¹‹å¾’ã€‚ æ‰€ä»¥åŒæ—¶å…·å¤‡äº†æœºå¯†æ€§ã€å®Œæ•´æ€§ã€èº«ä»½è®¤è¯ã€ä¸å¯å¦è®¤å››ä¸ªç‰¹æ€§ï¼Œé€šä¿¡åŒæ–¹çš„å®‰å…¨æ‰æœ‰ä¿è¯ï¼Œæ‰æ˜¯çœŸæ­£çš„å®‰å…¨ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:1:0","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#ä»€ä¹ˆæ˜¯å®‰å…¨"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" ä»€ä¹ˆæ˜¯ HTTPSHTTPS å…¶å®æ˜¯ä¸€ä¸ªâ€œéå¸¸ç®€å•â€çš„åè®®ï¼Œè§„å®šäº†æ–°çš„åè®®åâ€œhttpsâ€ï¼Œé»˜è®¤ç«¯å£å· 443ï¼Œè‡³äºå…¶ä»–çš„ä»€ä¹ˆè¯·æ±‚ - åº”ç­”æ¨¡å¼ã€æŠ¥æ–‡ç»“æ„ã€è¯·æ±‚æ–¹æ³•ã€URIã€å¤´å­—æ®µã€è¿æ¥ç®¡ç†ç­‰ç­‰éƒ½å®Œå…¨æ²¿ç”¨ HTTPï¼Œæ²¡æœ‰ä»»ä½•æ–°çš„ä¸œè¥¿ã€‚å”¯ä¸€çš„å·®åˆ«å°±æ˜¯ç«¯å£å·ä¸åŒã€å»æ‰æ˜æ–‡ä¼ è¾“ã€‚ é‚£ HTTPS å‡­å•¥å°±å˜å¾—å®‰å…¨äº†å‘¢ï¼Ÿ å°±æ˜¯å› ä¸ºä»–åœ¨ TCP/IP ä¸ HTTP ä¹‹é—´åŠ ä¸Šäº† SSL/TLS ï¼Œä»åŸæ¥çš„ HTTP over TCP/IP å˜æˆäº† HTTP over SSL/TLSï¼Œè®© HTTP è¿è¡Œåœ¨ å®‰å…¨çš„ SSL/TLS åè®®ä¸Šã€‚ http ä¸ https ","date":"2020-10-27","objectID":"/what-is-https/:2:0","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#ä»€ä¹ˆæ˜¯-https"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" SSL/TLSSSL å³å®‰å…¨å¥—æ¥å±‚ï¼ˆSecure Sockets Layerï¼‰ï¼Œåœ¨ OSI æ¨¡å‹ä¸­å¤„äºç¬¬ 5 å±‚ï¼ˆä¼šè¯å±‚ï¼‰ï¼Œç”±ç½‘æ™¯å…¬å¸äº 1994 å¹´å‘æ˜ï¼Œæœ‰ v2 å’Œ v3 ä¸¤ä¸ªç‰ˆæœ¬ï¼Œè€Œ v1 å› ä¸ºæœ‰ä¸¥é‡çš„ç¼ºé™·ä»æœªå…¬å¼€è¿‡ã€‚ SSL å‘å±•åˆ° v3 æ—¶å·²ç»è¯æ˜äº†å®ƒè‡ªèº«æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„å®‰å…¨é€šä¿¡åè®®ï¼Œäºæ˜¯äº’è”ç½‘å·¥ç¨‹ç»„ IETF åœ¨ 1999 å¹´æŠŠå®ƒæ”¹åä¸º TLSï¼ˆä¼ è¾“å±‚å®‰å…¨ï¼ŒTransport Layer Securityï¼‰ï¼Œæ­£å¼æ ‡å‡†åŒ–ï¼Œç‰ˆæœ¬å·ä» 1.0 é‡æ–°ç®—èµ·ï¼Œæ‰€ä»¥ TLS1.0 å®é™…ä¸Šå°±æ˜¯ SSLv3.1ã€‚ TLS ç”±è®°å½•åè®®ã€æ¡æ‰‹åè®®ã€è­¦å‘Šåè®®ã€å˜æ›´å¯†ç è§„èŒƒåè®®ã€æ‰©å±•åè®®ç­‰å‡ ä¸ªå­åè®®ç»„æˆï¼Œç»¼åˆä½¿ç”¨äº†å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†ã€èº«ä»½è®¤è¯ç­‰è®¸å¤šå¯†ç å­¦å‰æ²¿æŠ€æœ¯ã€‚ æµè§ˆå™¨ä¸æœåŠ¡å™¨åœ¨ä½¿ç”¨ TLS å»ºç«‹è¿æ¥çš„æ—¶å€™å®é™…ä¸Šå°±æ˜¯é€‰äº†ä¸€ç»„åŠ å¯†ç®—æ³•å®ç°å®‰å…¨é€šä¿¡ï¼Œè¿™äº›ç®—æ³•ç»„åˆå«åš â€œå¯†ç å¥—ä»¶ï¼ˆcipher suiteï¼‰â€ã€‚ å¥—ä»¶å‘½åå¾ˆæœ‰è§„å¾‹ï¼Œæ¯”å¦‚â€œECDHE-RSA-AES256-GCM-SHA384â€ã€‚æŒ‰ç…§ å¯†é’¥äº¤æ¢ç®—æ³• + ç­¾åç®—æ³• + å¯¹ç§°åŠ å¯†ç®—æ³• + æ‘˜è¦ç®—æ³•â€ç»„æˆçš„. æ‰€ä»¥è¿™ä¸ªå¥—ä»¶çš„æ„æ€å°±æ˜¯ï¼šä½¿ç”¨ ECDHE ç®—æ³•è¿›è¡Œå¯†é’¥äº¤æ¢ï¼Œä½¿ç”¨ RSA ç­¾åå’Œèº«ä»½éªŒè¯ï¼Œæ¡æ‰‹åä½¿ç”¨ AES å¯¹ç§°åŠ å¯†ï¼Œå¯†é’¥é•¿åº¦ 256 ä½ï¼Œåˆ†ç»„æ¨¡å¼ GCMï¼Œæ¶ˆæ¯è®¤è¯å’Œéšæœºæ•°ç”Ÿæˆä½¿ç”¨æ‘˜è¦ç®—æ³• SHA384ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:0","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#ssltls"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†å‰é¢æåˆ°å››ä¸ªå®ç°å®‰å…¨çš„å¿…è¦æ¡ä»¶ï¼Œå…ˆè¯´æœºå¯†æ€§ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯åªèƒ½ç»™æƒ³ç»™çš„äººçœ‹åˆ°å¹¶ä¸”çœ‹å¾—æ‡‚ã€‚ å®ç°æœºå¯†æ€§çš„æ‰‹æ®µå°±æ˜¯åŠ å¯†ï¼ˆencryptï¼‰ï¼Œä¹Ÿå°±æ˜¯å°†åŸæœ¬æ˜æ–‡æ¶ˆæ¯ä½¿ç”¨åŠ å¯†ç®—æ³•è½¬æ¢æˆåˆ«äººçœ‹ä¸æ‡‚çš„å¯†æ–‡ï¼Œåªæœ‰æŒæ¡ç‰¹æœ‰çš„å¯†é’¥çš„äººæ‰èƒ½è§£å¯†å‡ºåŸå§‹å†…å®¹ã€‚ é’¥åŒ™ä¹Ÿå°±æ˜¯å¯†é’¥ï¼ˆkeyï¼‰ï¼ŒæœªåŠ å¯†çš„æ¶ˆæ¯å«åšæ˜æ–‡ ï¼ˆplain text/clear textï¼‰ï¼ŒåŠ å¯†åçš„å†…å®¹å«åšå¯†æ–‡ï¼ˆcipher textï¼‰ï¼Œé€šè¿‡å¯†é’¥è§£å¯†å‡ºåŸæ–‡çš„è¿‡ç¨‹å«åšè§£å¯†ï¼ˆdecryptï¼‰ ï¼Œè€ŒåŠ è§£å¯†çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯åŠ å¯†ç®—æ³•ã€‚ ç”±äº HTTPSã€TLS éƒ½è¿è¡Œåœ¨è®¡ç®—æœºä¸Šï¼Œæ‰€ä»¥â€œå¯†é’¥â€å°±æ˜¯ä¸€é•¿ä¸²çš„æ•°å­—ï¼Œä½†çº¦å®šä¿—æˆçš„åº¦é‡å•ä½æ˜¯â€œä½â€ï¼ˆbitï¼‰ï¼Œè€Œä¸æ˜¯â€œå­—èŠ‚â€ï¼ˆbyteï¼‰ã€‚æ¯”å¦‚ï¼Œè¯´å¯†é’¥é•¿åº¦æ˜¯ 128ï¼ˆä½ï¼‰ï¼Œå°±æ˜¯ 16 å­—èŠ‚çš„äºŒè¿›åˆ¶ä¸²ï¼Œå¯†é’¥é•¿åº¦ 1024ï¼ˆä½ï¼‰ï¼Œå°±æ˜¯ 128 å­—èŠ‚çš„äºŒè¿›åˆ¶ä¸²ã€‚ åŠ å¯†ç®—æ³•é€šå¸¸æœ‰ä¸¤å¤§ç±»ï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ã€‚ å¯¹ç§°åŠ å¯†åŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„å¯†é’¥éƒ½æ˜¯åŒä¸€ä¸ªï¼Œæ˜¯ â€œå¯¹ç§°çš„â€ã€‚åŒæ–¹åªè¦ä¿è¯ä¸ä¼šæœ‰æ³„éœ²å…¶ä»–äººçŸ¥é“è¿™ä¸ªå¯†é’¥ï¼Œé€šä¿¡å°±å…·æœ‰æœºå¯†æ€§ã€‚ å¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†ç®—æ³•å¸¸è§çš„æœ‰ RC4ã€DESã€3DESã€AESã€ChaCha20 ç­‰ï¼Œä½†å‰ä¸‰ç§ç®—æ³•éƒ½è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œé€šå¸¸éƒ½ç¦æ­¢ä½¿ç”¨ï¼Œç›®å‰å¸¸ç”¨çš„åªæœ‰ AES å’Œ ChaCha20ã€‚ AES çš„æ„æ€æ˜¯â€œé«˜çº§åŠ å¯†æ ‡å‡†â€ï¼ˆAdvanced Encryption Standardï¼‰ï¼Œå¯†é’¥é•¿åº¦å¯ä»¥æ˜¯ 128ã€192 æˆ– 256ã€‚å®ƒæ˜¯ DES ç®—æ³•çš„æ›¿ä»£è€…ï¼Œå®‰å…¨å¼ºåº¦å¾ˆé«˜ï¼Œæ€§èƒ½ä¹Ÿå¾ˆå¥½ï¼Œè€Œä¸”æœ‰çš„ç¡¬ä»¶è¿˜ä¼šåšç‰¹æ®Šä¼˜åŒ–ï¼Œæ‰€ä»¥éå¸¸æµè¡Œï¼Œæ˜¯** åº”ç”¨æœ€å¹¿æ³›çš„å¯¹ç§°åŠ å¯†ç®—æ³•**ã€‚ åŠ å¯†åˆ†ç»„æ¨¡å¼å¯¹ç§°ç®—æ³•è¿˜æœ‰ä¸€ä¸ª â€œåˆ†ç»„æ¨¡å¼â€çš„æ¦‚å¿µï¼Œç›®çš„æ˜¯é€šè¿‡ç®—æ³•ç”¨å›ºå®šé•¿åº¦çš„å¯†é’¥åŠ å¯†ä»»æ„é•¿åº¦çš„æ˜æ–‡ã€‚ æœ€æ–°çš„åˆ†ç»„æ¨¡å¼è¢«ç§°ä¸º AEADï¼ˆAuthenticated Encryption with Associated Dataï¼‰ï¼Œåœ¨åŠ å¯†çš„åŒæ—¶å¢åŠ äº†è®¤è¯çš„åŠŸèƒ½ï¼Œå¸¸ç”¨çš„æ˜¯ GCMã€CCM å’Œ Poly1305ã€‚ éå¯¹ç§°åŠ å¯†æœ‰å¯¹ç§°åŠ å¯†ï¼Œä¸ºä½•è¿˜æå‡ºä¸€ä¸ªéå¯¹ç§°åŠ å¯†å‘¢ï¼Ÿ å¯¹ç§°åŠ å¯†ç¡®å®è§£å†³äº†æœºå¯†æ€§ï¼Œåªæœ‰ç›¸å…³çš„äººæ‰èƒ½è¯»å–å‡ºä¿¡æ¯ã€‚ä½†æ˜¯æœ€å¤§çš„é—®é¢˜æ˜¯ï¼šå¦‚ä½•å®‰å…¨çš„æŠŠå¯†é’¥ä¼ é€’å¯¹æ–¹ï¼Œä¸“ä¸šæœ¯è¯­ â€œå¯†é’¥äº¤æ¢â€ã€‚ æ‰€ä»¥ä¸ºäº†è§£å†³ç§˜é’¥äº¤æ¢ï¼Œéå¯¹ç§°åŠ å¯†è¯ç”Ÿäº†ã€‚ éå¯¹ç§°åŠ å¯†ç”±ä¸¤ä¸ªå¯†é’¥ç»„æˆï¼Œåˆ†åˆ«æ˜¯å…¬é’¥ï¼ˆpublic keyï¼‰å’Œâ€œç§é’¥ï¼ˆprivate keyï¼‰â€ï¼Œä¸¤ä¸ªå¯†é’¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸å¯¹ç§°çš„ç”±æ¥ï¼Œå…¬é’¥å¯ä»¥ä»»ä½•äººä½¿ç”¨ï¼Œç§é’¥åˆ™è‡ªå·±ä¿å¯†ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå…¬é’¥å’Œç§é’¥éƒ½å¯ä»¥ç”¨æ¥åŠ å¯†è§£å¯†ï¼Œå…¬é’¥åŠ å¯†çš„å¯†æ–‡åªèƒ½ç”¨ç§é’¥è§£å¯†ï¼Œåä¹‹äº¦ç„¶ã€‚ æœåŠ¡ç«¯ä¿å­˜ç§é’¥ï¼Œåœ¨äº’è”ç½‘ä¸Šåˆ†å‘å…¬é’¥ï¼Œå½“è®¿é—®æœåŠ¡å™¨ç½‘ç«™çš„æ—¶å€™ä½¿ç”¨æˆäºˆçš„å…¬é’¥åŠ å¯†æ˜æ–‡å³å¯ï¼ŒæœåŠ¡ç«¯åˆ™ä½¿ç”¨å¯¹åº”çš„ç§é’¥æ¥è§£å¯†ã€‚ éå¯¹ç§°åŠ å¯† TLS ä¸­å¸¸è§çš„åŠ å¯†ç®—æ³•æœ‰ DHã€RSAã€ECCã€DSA ç­‰ã€‚å…¶ä¸­çš„ RSA æœ€å¸¸ç”¨ï¼Œå®ƒçš„å®‰å…¨æ€§åŸºäºâ€œæ•´æ•°åˆ†è§£â€çš„æ•°å­¦éš¾é¢˜ï¼Œä½¿ç”¨ä¸¤ä¸ªè¶…å¤§ç´ æ•°çš„ä¹˜ç§¯ä½œä¸ºç”Ÿæˆå¯†é’¥çš„ææ–™ï¼Œæƒ³è¦ä»å…¬é’¥æ¨ç®—å‡ºç§é’¥æ˜¯éå¸¸å›°éš¾çš„ã€‚ ECCï¼ˆElliptic Curve Cryptographyï¼‰æ˜¯éå¯¹ç§°åŠ å¯†é‡Œçš„â€œåèµ·ä¹‹ç§€â€ï¼Œå®ƒåŸºäºâ€œæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°â€çš„æ•°å­¦éš¾é¢˜ï¼Œä½¿ç”¨ç‰¹å®šçš„æ›²çº¿æ–¹ç¨‹å’ŒåŸºç‚¹ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œå­ç®—æ³• ECDHE ç”¨äºå¯†é’¥äº¤æ¢ï¼ŒECDSA ç”¨äºæ•°å­—ç­¾åã€‚ æ¯”èµ· RSAï¼ŒECC åœ¨å®‰å…¨å¼ºåº¦å’Œæ€§èƒ½ä¸Šéƒ½æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚160 ä½çš„ ECC ç›¸å½“äº 1024 ä½çš„ RSAï¼Œè€Œ 224 ä½çš„ ECC åˆ™ç›¸å½“äº 2048 ä½çš„ RSAã€‚å› ä¸ºå¯†é’¥çŸ­ï¼Œæ‰€ä»¥ç›¸åº”çš„è®¡ç®—é‡ã€æ¶ˆè€—çš„å†…å­˜å’Œå¸¦å®½ä¹Ÿå°±å°‘ï¼ŒåŠ å¯†è§£å¯†çš„æ€§èƒ½å°±ä¸Šå»äº†ï¼Œå¯¹äºç°åœ¨çš„ç§»åŠ¨äº’è”ç½‘éå¸¸æœ‰å¸å¼•åŠ›ã€‚ ç°åœ¨æˆ‘ä»¬ä¸ºäº†æœºå¯†æ€§ä»å¯¹ç§°åŠ å¯†åˆ°éå¯¹ç§°åŠ å¯†ï¼Œè€Œéå¯¹ç§°åŠ å¯†è¿˜è§£å†³äº†å¯†é’¥äº¤æ¢ä¸å®‰å…¨çš„é—®é¢˜ã€‚é‚£ä¹ˆæ˜¯å¦å¯ä»¥ç›´æ¥ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ¥å®ç°æœºå¯†æ€§å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼ å› ä¸ºéå¯¹ç§°åŠ å¯†è¿ç®—é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚æ‰€ä»¥éœ€è¦ä¸¤è€…ç»“åˆï¼Œæ··åˆæ¨¡å¼å®ç°æœºå¯†æ€§é—®é¢˜ï¼ŒåŒæ—¶åˆæœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:1","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†å‰é¢æåˆ°å››ä¸ªå®ç°å®‰å…¨çš„å¿…è¦æ¡ä»¶ï¼Œå…ˆè¯´æœºå¯†æ€§ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯åªèƒ½ç»™æƒ³ç»™çš„äººçœ‹åˆ°å¹¶ä¸”çœ‹å¾—æ‡‚ã€‚ å®ç°æœºå¯†æ€§çš„æ‰‹æ®µå°±æ˜¯åŠ å¯†ï¼ˆencryptï¼‰ï¼Œä¹Ÿå°±æ˜¯å°†åŸæœ¬æ˜æ–‡æ¶ˆæ¯ä½¿ç”¨åŠ å¯†ç®—æ³•è½¬æ¢æˆåˆ«äººçœ‹ä¸æ‡‚çš„å¯†æ–‡ï¼Œåªæœ‰æŒæ¡ç‰¹æœ‰çš„å¯†é’¥çš„äººæ‰èƒ½è§£å¯†å‡ºåŸå§‹å†…å®¹ã€‚ é’¥åŒ™ä¹Ÿå°±æ˜¯å¯†é’¥ï¼ˆkeyï¼‰ï¼ŒæœªåŠ å¯†çš„æ¶ˆæ¯å«åšæ˜æ–‡ ï¼ˆplain text/clear textï¼‰ï¼ŒåŠ å¯†åçš„å†…å®¹å«åšå¯†æ–‡ï¼ˆcipher textï¼‰ï¼Œé€šè¿‡å¯†é’¥è§£å¯†å‡ºåŸæ–‡çš„è¿‡ç¨‹å«åšè§£å¯†ï¼ˆdecryptï¼‰ ï¼Œè€ŒåŠ è§£å¯†çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯åŠ å¯†ç®—æ³•ã€‚ ç”±äº HTTPSã€TLS éƒ½è¿è¡Œåœ¨è®¡ç®—æœºä¸Šï¼Œæ‰€ä»¥â€œå¯†é’¥â€å°±æ˜¯ä¸€é•¿ä¸²çš„æ•°å­—ï¼Œä½†çº¦å®šä¿—æˆçš„åº¦é‡å•ä½æ˜¯â€œä½â€ï¼ˆbitï¼‰ï¼Œè€Œä¸æ˜¯â€œå­—èŠ‚â€ï¼ˆbyteï¼‰ã€‚æ¯”å¦‚ï¼Œè¯´å¯†é’¥é•¿åº¦æ˜¯ 128ï¼ˆä½ï¼‰ï¼Œå°±æ˜¯ 16 å­—èŠ‚çš„äºŒè¿›åˆ¶ä¸²ï¼Œå¯†é’¥é•¿åº¦ 1024ï¼ˆä½ï¼‰ï¼Œå°±æ˜¯ 128 å­—èŠ‚çš„äºŒè¿›åˆ¶ä¸²ã€‚ åŠ å¯†ç®—æ³•é€šå¸¸æœ‰ä¸¤å¤§ç±»ï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ã€‚ å¯¹ç§°åŠ å¯†åŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„å¯†é’¥éƒ½æ˜¯åŒä¸€ä¸ªï¼Œæ˜¯ â€œå¯¹ç§°çš„â€ã€‚åŒæ–¹åªè¦ä¿è¯ä¸ä¼šæœ‰æ³„éœ²å…¶ä»–äººçŸ¥é“è¿™ä¸ªå¯†é’¥ï¼Œé€šä¿¡å°±å…·æœ‰æœºå¯†æ€§ã€‚ å¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†ç®—æ³•å¸¸è§çš„æœ‰ RC4ã€DESã€3DESã€AESã€ChaCha20 ç­‰ï¼Œä½†å‰ä¸‰ç§ç®—æ³•éƒ½è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œé€šå¸¸éƒ½ç¦æ­¢ä½¿ç”¨ï¼Œç›®å‰å¸¸ç”¨çš„åªæœ‰ AES å’Œ ChaCha20ã€‚ AES çš„æ„æ€æ˜¯â€œé«˜çº§åŠ å¯†æ ‡å‡†â€ï¼ˆAdvanced Encryption Standardï¼‰ï¼Œå¯†é’¥é•¿åº¦å¯ä»¥æ˜¯ 128ã€192 æˆ– 256ã€‚å®ƒæ˜¯ DES ç®—æ³•çš„æ›¿ä»£è€…ï¼Œå®‰å…¨å¼ºåº¦å¾ˆé«˜ï¼Œæ€§èƒ½ä¹Ÿå¾ˆå¥½ï¼Œè€Œä¸”æœ‰çš„ç¡¬ä»¶è¿˜ä¼šåšç‰¹æ®Šä¼˜åŒ–ï¼Œæ‰€ä»¥éå¸¸æµè¡Œï¼Œæ˜¯** åº”ç”¨æœ€å¹¿æ³›çš„å¯¹ç§°åŠ å¯†ç®—æ³•**ã€‚ åŠ å¯†åˆ†ç»„æ¨¡å¼å¯¹ç§°ç®—æ³•è¿˜æœ‰ä¸€ä¸ª â€œåˆ†ç»„æ¨¡å¼â€çš„æ¦‚å¿µï¼Œç›®çš„æ˜¯é€šè¿‡ç®—æ³•ç”¨å›ºå®šé•¿åº¦çš„å¯†é’¥åŠ å¯†ä»»æ„é•¿åº¦çš„æ˜æ–‡ã€‚ æœ€æ–°çš„åˆ†ç»„æ¨¡å¼è¢«ç§°ä¸º AEADï¼ˆAuthenticated Encryption with Associated Dataï¼‰ï¼Œåœ¨åŠ å¯†çš„åŒæ—¶å¢åŠ äº†è®¤è¯çš„åŠŸèƒ½ï¼Œå¸¸ç”¨çš„æ˜¯ GCMã€CCM å’Œ Poly1305ã€‚ éå¯¹ç§°åŠ å¯†æœ‰å¯¹ç§°åŠ å¯†ï¼Œä¸ºä½•è¿˜æå‡ºä¸€ä¸ªéå¯¹ç§°åŠ å¯†å‘¢ï¼Ÿ å¯¹ç§°åŠ å¯†ç¡®å®è§£å†³äº†æœºå¯†æ€§ï¼Œåªæœ‰ç›¸å…³çš„äººæ‰èƒ½è¯»å–å‡ºä¿¡æ¯ã€‚ä½†æ˜¯æœ€å¤§çš„é—®é¢˜æ˜¯ï¼šå¦‚ä½•å®‰å…¨çš„æŠŠå¯†é’¥ä¼ é€’å¯¹æ–¹ï¼Œä¸“ä¸šæœ¯è¯­ â€œå¯†é’¥äº¤æ¢â€ã€‚ æ‰€ä»¥ä¸ºäº†è§£å†³ç§˜é’¥äº¤æ¢ï¼Œéå¯¹ç§°åŠ å¯†è¯ç”Ÿäº†ã€‚ éå¯¹ç§°åŠ å¯†ç”±ä¸¤ä¸ªå¯†é’¥ç»„æˆï¼Œåˆ†åˆ«æ˜¯å…¬é’¥ï¼ˆpublic keyï¼‰å’Œâ€œç§é’¥ï¼ˆprivate keyï¼‰â€ï¼Œä¸¤ä¸ªå¯†é’¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸å¯¹ç§°çš„ç”±æ¥ï¼Œå…¬é’¥å¯ä»¥ä»»ä½•äººä½¿ç”¨ï¼Œç§é’¥åˆ™è‡ªå·±ä¿å¯†ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå…¬é’¥å’Œç§é’¥éƒ½å¯ä»¥ç”¨æ¥åŠ å¯†è§£å¯†ï¼Œå…¬é’¥åŠ å¯†çš„å¯†æ–‡åªèƒ½ç”¨ç§é’¥è§£å¯†ï¼Œåä¹‹äº¦ç„¶ã€‚ æœåŠ¡ç«¯ä¿å­˜ç§é’¥ï¼Œåœ¨äº’è”ç½‘ä¸Šåˆ†å‘å…¬é’¥ï¼Œå½“è®¿é—®æœåŠ¡å™¨ç½‘ç«™çš„æ—¶å€™ä½¿ç”¨æˆäºˆçš„å…¬é’¥åŠ å¯†æ˜æ–‡å³å¯ï¼ŒæœåŠ¡ç«¯åˆ™ä½¿ç”¨å¯¹åº”çš„ç§é’¥æ¥è§£å¯†ã€‚ éå¯¹ç§°åŠ å¯† TLS ä¸­å¸¸è§çš„åŠ å¯†ç®—æ³•æœ‰ DHã€RSAã€ECCã€DSA ç­‰ã€‚å…¶ä¸­çš„ RSA æœ€å¸¸ç”¨ï¼Œå®ƒçš„å®‰å…¨æ€§åŸºäºâ€œæ•´æ•°åˆ†è§£â€çš„æ•°å­¦éš¾é¢˜ï¼Œä½¿ç”¨ä¸¤ä¸ªè¶…å¤§ç´ æ•°çš„ä¹˜ç§¯ä½œä¸ºç”Ÿæˆå¯†é’¥çš„ææ–™ï¼Œæƒ³è¦ä»å…¬é’¥æ¨ç®—å‡ºç§é’¥æ˜¯éå¸¸å›°éš¾çš„ã€‚ ECCï¼ˆElliptic Curve Cryptographyï¼‰æ˜¯éå¯¹ç§°åŠ å¯†é‡Œçš„â€œåèµ·ä¹‹ç§€â€ï¼Œå®ƒåŸºäºâ€œæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°â€çš„æ•°å­¦éš¾é¢˜ï¼Œä½¿ç”¨ç‰¹å®šçš„æ›²çº¿æ–¹ç¨‹å’ŒåŸºç‚¹ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œå­ç®—æ³• ECDHE ç”¨äºå¯†é’¥äº¤æ¢ï¼ŒECDSA ç”¨äºæ•°å­—ç­¾åã€‚ æ¯”èµ· RSAï¼ŒECC åœ¨å®‰å…¨å¼ºåº¦å’Œæ€§èƒ½ä¸Šéƒ½æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚160 ä½çš„ ECC ç›¸å½“äº 1024 ä½çš„ RSAï¼Œè€Œ 224 ä½çš„ ECC åˆ™ç›¸å½“äº 2048 ä½çš„ RSAã€‚å› ä¸ºå¯†é’¥çŸ­ï¼Œæ‰€ä»¥ç›¸åº”çš„è®¡ç®—é‡ã€æ¶ˆè€—çš„å†…å­˜å’Œå¸¦å®½ä¹Ÿå°±å°‘ï¼ŒåŠ å¯†è§£å¯†çš„æ€§èƒ½å°±ä¸Šå»äº†ï¼Œå¯¹äºç°åœ¨çš„ç§»åŠ¨äº’è”ç½‘éå¸¸æœ‰å¸å¼•åŠ›ã€‚ ç°åœ¨æˆ‘ä»¬ä¸ºäº†æœºå¯†æ€§ä»å¯¹ç§°åŠ å¯†åˆ°éå¯¹ç§°åŠ å¯†ï¼Œè€Œéå¯¹ç§°åŠ å¯†è¿˜è§£å†³äº†å¯†é’¥äº¤æ¢ä¸å®‰å…¨çš„é—®é¢˜ã€‚é‚£ä¹ˆæ˜¯å¦å¯ä»¥ç›´æ¥ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ¥å®ç°æœºå¯†æ€§å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼ å› ä¸ºéå¯¹ç§°åŠ å¯†è¿ç®—é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚æ‰€ä»¥éœ€è¦ä¸¤è€…ç»“åˆï¼Œæ··åˆæ¨¡å¼å®ç°æœºå¯†æ€§é—®é¢˜ï¼ŒåŒæ—¶åˆæœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:1","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#å¯¹ç§°åŠ å¯†"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†å‰é¢æåˆ°å››ä¸ªå®ç°å®‰å…¨çš„å¿…è¦æ¡ä»¶ï¼Œå…ˆè¯´æœºå¯†æ€§ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯åªèƒ½ç»™æƒ³ç»™çš„äººçœ‹åˆ°å¹¶ä¸”çœ‹å¾—æ‡‚ã€‚ å®ç°æœºå¯†æ€§çš„æ‰‹æ®µå°±æ˜¯åŠ å¯†ï¼ˆencryptï¼‰ï¼Œä¹Ÿå°±æ˜¯å°†åŸæœ¬æ˜æ–‡æ¶ˆæ¯ä½¿ç”¨åŠ å¯†ç®—æ³•è½¬æ¢æˆåˆ«äººçœ‹ä¸æ‡‚çš„å¯†æ–‡ï¼Œåªæœ‰æŒæ¡ç‰¹æœ‰çš„å¯†é’¥çš„äººæ‰èƒ½è§£å¯†å‡ºåŸå§‹å†…å®¹ã€‚ é’¥åŒ™ä¹Ÿå°±æ˜¯å¯†é’¥ï¼ˆkeyï¼‰ï¼ŒæœªåŠ å¯†çš„æ¶ˆæ¯å«åšæ˜æ–‡ ï¼ˆplain text/clear textï¼‰ï¼ŒåŠ å¯†åçš„å†…å®¹å«åšå¯†æ–‡ï¼ˆcipher textï¼‰ï¼Œé€šè¿‡å¯†é’¥è§£å¯†å‡ºåŸæ–‡çš„è¿‡ç¨‹å«åšè§£å¯†ï¼ˆdecryptï¼‰ ï¼Œè€ŒåŠ è§£å¯†çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯åŠ å¯†ç®—æ³•ã€‚ ç”±äº HTTPSã€TLS éƒ½è¿è¡Œåœ¨è®¡ç®—æœºä¸Šï¼Œæ‰€ä»¥â€œå¯†é’¥â€å°±æ˜¯ä¸€é•¿ä¸²çš„æ•°å­—ï¼Œä½†çº¦å®šä¿—æˆçš„åº¦é‡å•ä½æ˜¯â€œä½â€ï¼ˆbitï¼‰ï¼Œè€Œä¸æ˜¯â€œå­—èŠ‚â€ï¼ˆbyteï¼‰ã€‚æ¯”å¦‚ï¼Œè¯´å¯†é’¥é•¿åº¦æ˜¯ 128ï¼ˆä½ï¼‰ï¼Œå°±æ˜¯ 16 å­—èŠ‚çš„äºŒè¿›åˆ¶ä¸²ï¼Œå¯†é’¥é•¿åº¦ 1024ï¼ˆä½ï¼‰ï¼Œå°±æ˜¯ 128 å­—èŠ‚çš„äºŒè¿›åˆ¶ä¸²ã€‚ åŠ å¯†ç®—æ³•é€šå¸¸æœ‰ä¸¤å¤§ç±»ï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ã€‚ å¯¹ç§°åŠ å¯†åŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„å¯†é’¥éƒ½æ˜¯åŒä¸€ä¸ªï¼Œæ˜¯ â€œå¯¹ç§°çš„â€ã€‚åŒæ–¹åªè¦ä¿è¯ä¸ä¼šæœ‰æ³„éœ²å…¶ä»–äººçŸ¥é“è¿™ä¸ªå¯†é’¥ï¼Œé€šä¿¡å°±å…·æœ‰æœºå¯†æ€§ã€‚ å¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†ç®—æ³•å¸¸è§çš„æœ‰ RC4ã€DESã€3DESã€AESã€ChaCha20 ç­‰ï¼Œä½†å‰ä¸‰ç§ç®—æ³•éƒ½è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œé€šå¸¸éƒ½ç¦æ­¢ä½¿ç”¨ï¼Œç›®å‰å¸¸ç”¨çš„åªæœ‰ AES å’Œ ChaCha20ã€‚ AES çš„æ„æ€æ˜¯â€œé«˜çº§åŠ å¯†æ ‡å‡†â€ï¼ˆAdvanced Encryption Standardï¼‰ï¼Œå¯†é’¥é•¿åº¦å¯ä»¥æ˜¯ 128ã€192 æˆ– 256ã€‚å®ƒæ˜¯ DES ç®—æ³•çš„æ›¿ä»£è€…ï¼Œå®‰å…¨å¼ºåº¦å¾ˆé«˜ï¼Œæ€§èƒ½ä¹Ÿå¾ˆå¥½ï¼Œè€Œä¸”æœ‰çš„ç¡¬ä»¶è¿˜ä¼šåšç‰¹æ®Šä¼˜åŒ–ï¼Œæ‰€ä»¥éå¸¸æµè¡Œï¼Œæ˜¯** åº”ç”¨æœ€å¹¿æ³›çš„å¯¹ç§°åŠ å¯†ç®—æ³•**ã€‚ åŠ å¯†åˆ†ç»„æ¨¡å¼å¯¹ç§°ç®—æ³•è¿˜æœ‰ä¸€ä¸ª â€œåˆ†ç»„æ¨¡å¼â€çš„æ¦‚å¿µï¼Œç›®çš„æ˜¯é€šè¿‡ç®—æ³•ç”¨å›ºå®šé•¿åº¦çš„å¯†é’¥åŠ å¯†ä»»æ„é•¿åº¦çš„æ˜æ–‡ã€‚ æœ€æ–°çš„åˆ†ç»„æ¨¡å¼è¢«ç§°ä¸º AEADï¼ˆAuthenticated Encryption with Associated Dataï¼‰ï¼Œåœ¨åŠ å¯†çš„åŒæ—¶å¢åŠ äº†è®¤è¯çš„åŠŸèƒ½ï¼Œå¸¸ç”¨çš„æ˜¯ GCMã€CCM å’Œ Poly1305ã€‚ éå¯¹ç§°åŠ å¯†æœ‰å¯¹ç§°åŠ å¯†ï¼Œä¸ºä½•è¿˜æå‡ºä¸€ä¸ªéå¯¹ç§°åŠ å¯†å‘¢ï¼Ÿ å¯¹ç§°åŠ å¯†ç¡®å®è§£å†³äº†æœºå¯†æ€§ï¼Œåªæœ‰ç›¸å…³çš„äººæ‰èƒ½è¯»å–å‡ºä¿¡æ¯ã€‚ä½†æ˜¯æœ€å¤§çš„é—®é¢˜æ˜¯ï¼šå¦‚ä½•å®‰å…¨çš„æŠŠå¯†é’¥ä¼ é€’å¯¹æ–¹ï¼Œä¸“ä¸šæœ¯è¯­ â€œå¯†é’¥äº¤æ¢â€ã€‚ æ‰€ä»¥ä¸ºäº†è§£å†³ç§˜é’¥äº¤æ¢ï¼Œéå¯¹ç§°åŠ å¯†è¯ç”Ÿäº†ã€‚ éå¯¹ç§°åŠ å¯†ç”±ä¸¤ä¸ªå¯†é’¥ç»„æˆï¼Œåˆ†åˆ«æ˜¯å…¬é’¥ï¼ˆpublic keyï¼‰å’Œâ€œç§é’¥ï¼ˆprivate keyï¼‰â€ï¼Œä¸¤ä¸ªå¯†é’¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸å¯¹ç§°çš„ç”±æ¥ï¼Œå…¬é’¥å¯ä»¥ä»»ä½•äººä½¿ç”¨ï¼Œç§é’¥åˆ™è‡ªå·±ä¿å¯†ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå…¬é’¥å’Œç§é’¥éƒ½å¯ä»¥ç”¨æ¥åŠ å¯†è§£å¯†ï¼Œå…¬é’¥åŠ å¯†çš„å¯†æ–‡åªèƒ½ç”¨ç§é’¥è§£å¯†ï¼Œåä¹‹äº¦ç„¶ã€‚ æœåŠ¡ç«¯ä¿å­˜ç§é’¥ï¼Œåœ¨äº’è”ç½‘ä¸Šåˆ†å‘å…¬é’¥ï¼Œå½“è®¿é—®æœåŠ¡å™¨ç½‘ç«™çš„æ—¶å€™ä½¿ç”¨æˆäºˆçš„å…¬é’¥åŠ å¯†æ˜æ–‡å³å¯ï¼ŒæœåŠ¡ç«¯åˆ™ä½¿ç”¨å¯¹åº”çš„ç§é’¥æ¥è§£å¯†ã€‚ éå¯¹ç§°åŠ å¯† TLS ä¸­å¸¸è§çš„åŠ å¯†ç®—æ³•æœ‰ DHã€RSAã€ECCã€DSA ç­‰ã€‚å…¶ä¸­çš„ RSA æœ€å¸¸ç”¨ï¼Œå®ƒçš„å®‰å…¨æ€§åŸºäºâ€œæ•´æ•°åˆ†è§£â€çš„æ•°å­¦éš¾é¢˜ï¼Œä½¿ç”¨ä¸¤ä¸ªè¶…å¤§ç´ æ•°çš„ä¹˜ç§¯ä½œä¸ºç”Ÿæˆå¯†é’¥çš„ææ–™ï¼Œæƒ³è¦ä»å…¬é’¥æ¨ç®—å‡ºç§é’¥æ˜¯éå¸¸å›°éš¾çš„ã€‚ ECCï¼ˆElliptic Curve Cryptographyï¼‰æ˜¯éå¯¹ç§°åŠ å¯†é‡Œçš„â€œåèµ·ä¹‹ç§€â€ï¼Œå®ƒåŸºäºâ€œæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°â€çš„æ•°å­¦éš¾é¢˜ï¼Œä½¿ç”¨ç‰¹å®šçš„æ›²çº¿æ–¹ç¨‹å’ŒåŸºç‚¹ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œå­ç®—æ³• ECDHE ç”¨äºå¯†é’¥äº¤æ¢ï¼ŒECDSA ç”¨äºæ•°å­—ç­¾åã€‚ æ¯”èµ· RSAï¼ŒECC åœ¨å®‰å…¨å¼ºåº¦å’Œæ€§èƒ½ä¸Šéƒ½æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚160 ä½çš„ ECC ç›¸å½“äº 1024 ä½çš„ RSAï¼Œè€Œ 224 ä½çš„ ECC åˆ™ç›¸å½“äº 2048 ä½çš„ RSAã€‚å› ä¸ºå¯†é’¥çŸ­ï¼Œæ‰€ä»¥ç›¸åº”çš„è®¡ç®—é‡ã€æ¶ˆè€—çš„å†…å­˜å’Œå¸¦å®½ä¹Ÿå°±å°‘ï¼ŒåŠ å¯†è§£å¯†çš„æ€§èƒ½å°±ä¸Šå»äº†ï¼Œå¯¹äºç°åœ¨çš„ç§»åŠ¨äº’è”ç½‘éå¸¸æœ‰å¸å¼•åŠ›ã€‚ ç°åœ¨æˆ‘ä»¬ä¸ºäº†æœºå¯†æ€§ä»å¯¹ç§°åŠ å¯†åˆ°éå¯¹ç§°åŠ å¯†ï¼Œè€Œéå¯¹ç§°åŠ å¯†è¿˜è§£å†³äº†å¯†é’¥äº¤æ¢ä¸å®‰å…¨çš„é—®é¢˜ã€‚é‚£ä¹ˆæ˜¯å¦å¯ä»¥ç›´æ¥ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ¥å®ç°æœºå¯†æ€§å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼ å› ä¸ºéå¯¹ç§°åŠ å¯†è¿ç®—é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚æ‰€ä»¥éœ€è¦ä¸¤è€…ç»“åˆï¼Œæ··åˆæ¨¡å¼å®ç°æœºå¯†æ€§é—®é¢˜ï¼ŒåŒæ—¶åˆæœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:1","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#åŠ å¯†åˆ†ç»„æ¨¡å¼"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†å‰é¢æåˆ°å››ä¸ªå®ç°å®‰å…¨çš„å¿…è¦æ¡ä»¶ï¼Œå…ˆè¯´æœºå¯†æ€§ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯åªèƒ½ç»™æƒ³ç»™çš„äººçœ‹åˆ°å¹¶ä¸”çœ‹å¾—æ‡‚ã€‚ å®ç°æœºå¯†æ€§çš„æ‰‹æ®µå°±æ˜¯åŠ å¯†ï¼ˆencryptï¼‰ï¼Œä¹Ÿå°±æ˜¯å°†åŸæœ¬æ˜æ–‡æ¶ˆæ¯ä½¿ç”¨åŠ å¯†ç®—æ³•è½¬æ¢æˆåˆ«äººçœ‹ä¸æ‡‚çš„å¯†æ–‡ï¼Œåªæœ‰æŒæ¡ç‰¹æœ‰çš„å¯†é’¥çš„äººæ‰èƒ½è§£å¯†å‡ºåŸå§‹å†…å®¹ã€‚ é’¥åŒ™ä¹Ÿå°±æ˜¯å¯†é’¥ï¼ˆkeyï¼‰ï¼ŒæœªåŠ å¯†çš„æ¶ˆæ¯å«åšæ˜æ–‡ ï¼ˆplain text/clear textï¼‰ï¼ŒåŠ å¯†åçš„å†…å®¹å«åšå¯†æ–‡ï¼ˆcipher textï¼‰ï¼Œé€šè¿‡å¯†é’¥è§£å¯†å‡ºåŸæ–‡çš„è¿‡ç¨‹å«åšè§£å¯†ï¼ˆdecryptï¼‰ ï¼Œè€ŒåŠ è§£å¯†çš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯åŠ å¯†ç®—æ³•ã€‚ ç”±äº HTTPSã€TLS éƒ½è¿è¡Œåœ¨è®¡ç®—æœºä¸Šï¼Œæ‰€ä»¥â€œå¯†é’¥â€å°±æ˜¯ä¸€é•¿ä¸²çš„æ•°å­—ï¼Œä½†çº¦å®šä¿—æˆçš„åº¦é‡å•ä½æ˜¯â€œä½â€ï¼ˆbitï¼‰ï¼Œè€Œä¸æ˜¯â€œå­—èŠ‚â€ï¼ˆbyteï¼‰ã€‚æ¯”å¦‚ï¼Œè¯´å¯†é’¥é•¿åº¦æ˜¯ 128ï¼ˆä½ï¼‰ï¼Œå°±æ˜¯ 16 å­—èŠ‚çš„äºŒè¿›åˆ¶ä¸²ï¼Œå¯†é’¥é•¿åº¦ 1024ï¼ˆä½ï¼‰ï¼Œå°±æ˜¯ 128 å­—èŠ‚çš„äºŒè¿›åˆ¶ä¸²ã€‚ åŠ å¯†ç®—æ³•é€šå¸¸æœ‰ä¸¤å¤§ç±»ï¼šå¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ã€‚ å¯¹ç§°åŠ å¯†åŠ å¯†å’Œè§£å¯†ä½¿ç”¨çš„å¯†é’¥éƒ½æ˜¯åŒä¸€ä¸ªï¼Œæ˜¯ â€œå¯¹ç§°çš„â€ã€‚åŒæ–¹åªè¦ä¿è¯ä¸ä¼šæœ‰æ³„éœ²å…¶ä»–äººçŸ¥é“è¿™ä¸ªå¯†é’¥ï¼Œé€šä¿¡å°±å…·æœ‰æœºå¯†æ€§ã€‚ å¯¹ç§°åŠ å¯† å¯¹ç§°åŠ å¯†ç®—æ³•å¸¸è§çš„æœ‰ RC4ã€DESã€3DESã€AESã€ChaCha20 ç­‰ï¼Œä½†å‰ä¸‰ç§ç®—æ³•éƒ½è¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„ï¼Œé€šå¸¸éƒ½ç¦æ­¢ä½¿ç”¨ï¼Œç›®å‰å¸¸ç”¨çš„åªæœ‰ AES å’Œ ChaCha20ã€‚ AES çš„æ„æ€æ˜¯â€œé«˜çº§åŠ å¯†æ ‡å‡†â€ï¼ˆAdvanced Encryption Standardï¼‰ï¼Œå¯†é’¥é•¿åº¦å¯ä»¥æ˜¯ 128ã€192 æˆ– 256ã€‚å®ƒæ˜¯ DES ç®—æ³•çš„æ›¿ä»£è€…ï¼Œå®‰å…¨å¼ºåº¦å¾ˆé«˜ï¼Œæ€§èƒ½ä¹Ÿå¾ˆå¥½ï¼Œè€Œä¸”æœ‰çš„ç¡¬ä»¶è¿˜ä¼šåšç‰¹æ®Šä¼˜åŒ–ï¼Œæ‰€ä»¥éå¸¸æµè¡Œï¼Œæ˜¯** åº”ç”¨æœ€å¹¿æ³›çš„å¯¹ç§°åŠ å¯†ç®—æ³•**ã€‚ åŠ å¯†åˆ†ç»„æ¨¡å¼å¯¹ç§°ç®—æ³•è¿˜æœ‰ä¸€ä¸ª â€œåˆ†ç»„æ¨¡å¼â€çš„æ¦‚å¿µï¼Œç›®çš„æ˜¯é€šè¿‡ç®—æ³•ç”¨å›ºå®šé•¿åº¦çš„å¯†é’¥åŠ å¯†ä»»æ„é•¿åº¦çš„æ˜æ–‡ã€‚ æœ€æ–°çš„åˆ†ç»„æ¨¡å¼è¢«ç§°ä¸º AEADï¼ˆAuthenticated Encryption with Associated Dataï¼‰ï¼Œåœ¨åŠ å¯†çš„åŒæ—¶å¢åŠ äº†è®¤è¯çš„åŠŸèƒ½ï¼Œå¸¸ç”¨çš„æ˜¯ GCMã€CCM å’Œ Poly1305ã€‚ éå¯¹ç§°åŠ å¯†æœ‰å¯¹ç§°åŠ å¯†ï¼Œä¸ºä½•è¿˜æå‡ºä¸€ä¸ªéå¯¹ç§°åŠ å¯†å‘¢ï¼Ÿ å¯¹ç§°åŠ å¯†ç¡®å®è§£å†³äº†æœºå¯†æ€§ï¼Œåªæœ‰ç›¸å…³çš„äººæ‰èƒ½è¯»å–å‡ºä¿¡æ¯ã€‚ä½†æ˜¯æœ€å¤§çš„é—®é¢˜æ˜¯ï¼šå¦‚ä½•å®‰å…¨çš„æŠŠå¯†é’¥ä¼ é€’å¯¹æ–¹ï¼Œä¸“ä¸šæœ¯è¯­ â€œå¯†é’¥äº¤æ¢â€ã€‚ æ‰€ä»¥ä¸ºäº†è§£å†³ç§˜é’¥äº¤æ¢ï¼Œéå¯¹ç§°åŠ å¯†è¯ç”Ÿäº†ã€‚ éå¯¹ç§°åŠ å¯†ç”±ä¸¤ä¸ªå¯†é’¥ç»„æˆï¼Œåˆ†åˆ«æ˜¯å…¬é’¥ï¼ˆpublic keyï¼‰å’Œâ€œç§é’¥ï¼ˆprivate keyï¼‰â€ï¼Œä¸¤ä¸ªå¯†é’¥æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸å¯¹ç§°çš„ç”±æ¥ï¼Œå…¬é’¥å¯ä»¥ä»»ä½•äººä½¿ç”¨ï¼Œç§é’¥åˆ™è‡ªå·±ä¿å¯†ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå…¬é’¥å’Œç§é’¥éƒ½å¯ä»¥ç”¨æ¥åŠ å¯†è§£å¯†ï¼Œå…¬é’¥åŠ å¯†çš„å¯†æ–‡åªèƒ½ç”¨ç§é’¥è§£å¯†ï¼Œåä¹‹äº¦ç„¶ã€‚ æœåŠ¡ç«¯ä¿å­˜ç§é’¥ï¼Œåœ¨äº’è”ç½‘ä¸Šåˆ†å‘å…¬é’¥ï¼Œå½“è®¿é—®æœåŠ¡å™¨ç½‘ç«™çš„æ—¶å€™ä½¿ç”¨æˆäºˆçš„å…¬é’¥åŠ å¯†æ˜æ–‡å³å¯ï¼ŒæœåŠ¡ç«¯åˆ™ä½¿ç”¨å¯¹åº”çš„ç§é’¥æ¥è§£å¯†ã€‚ éå¯¹ç§°åŠ å¯† TLS ä¸­å¸¸è§çš„åŠ å¯†ç®—æ³•æœ‰ DHã€RSAã€ECCã€DSA ç­‰ã€‚å…¶ä¸­çš„ RSA æœ€å¸¸ç”¨ï¼Œå®ƒçš„å®‰å…¨æ€§åŸºäºâ€œæ•´æ•°åˆ†è§£â€çš„æ•°å­¦éš¾é¢˜ï¼Œä½¿ç”¨ä¸¤ä¸ªè¶…å¤§ç´ æ•°çš„ä¹˜ç§¯ä½œä¸ºç”Ÿæˆå¯†é’¥çš„ææ–™ï¼Œæƒ³è¦ä»å…¬é’¥æ¨ç®—å‡ºç§é’¥æ˜¯éå¸¸å›°éš¾çš„ã€‚ ECCï¼ˆElliptic Curve Cryptographyï¼‰æ˜¯éå¯¹ç§°åŠ å¯†é‡Œçš„â€œåèµ·ä¹‹ç§€â€ï¼Œå®ƒåŸºäºâ€œæ¤­åœ†æ›²çº¿ç¦»æ•£å¯¹æ•°â€çš„æ•°å­¦éš¾é¢˜ï¼Œä½¿ç”¨ç‰¹å®šçš„æ›²çº¿æ–¹ç¨‹å’ŒåŸºç‚¹ç”Ÿæˆå…¬é’¥å’Œç§é’¥ï¼Œå­ç®—æ³• ECDHE ç”¨äºå¯†é’¥äº¤æ¢ï¼ŒECDSA ç”¨äºæ•°å­—ç­¾åã€‚ æ¯”èµ· RSAï¼ŒECC åœ¨å®‰å…¨å¼ºåº¦å’Œæ€§èƒ½ä¸Šéƒ½æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚160 ä½çš„ ECC ç›¸å½“äº 1024 ä½çš„ RSAï¼Œè€Œ 224 ä½çš„ ECC åˆ™ç›¸å½“äº 2048 ä½çš„ RSAã€‚å› ä¸ºå¯†é’¥çŸ­ï¼Œæ‰€ä»¥ç›¸åº”çš„è®¡ç®—é‡ã€æ¶ˆè€—çš„å†…å­˜å’Œå¸¦å®½ä¹Ÿå°±å°‘ï¼ŒåŠ å¯†è§£å¯†çš„æ€§èƒ½å°±ä¸Šå»äº†ï¼Œå¯¹äºç°åœ¨çš„ç§»åŠ¨äº’è”ç½‘éå¸¸æœ‰å¸å¼•åŠ›ã€‚ ç°åœ¨æˆ‘ä»¬ä¸ºäº†æœºå¯†æ€§ä»å¯¹ç§°åŠ å¯†åˆ°éå¯¹ç§°åŠ å¯†ï¼Œè€Œéå¯¹ç§°åŠ å¯†è¿˜è§£å†³äº†å¯†é’¥äº¤æ¢ä¸å®‰å…¨çš„é—®é¢˜ã€‚é‚£ä¹ˆæ˜¯å¦å¯ä»¥ç›´æ¥ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ¥å®ç°æœºå¯†æ€§å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼ å› ä¸ºéå¯¹ç§°åŠ å¯†è¿ç®—é€Ÿåº¦æ¯”è¾ƒæ…¢ã€‚æ‰€ä»¥éœ€è¦ä¸¤è€…ç»“åˆï¼Œæ··åˆæ¨¡å¼å®ç°æœºå¯†æ€§é—®é¢˜ï¼ŒåŒæ—¶åˆæœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:1","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#éå¯¹ç§°åŠ å¯†"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æ··åˆåŠ å¯†æµç¨‹ å…ˆåˆ›å»ºä¸€ä¸ªéšæœºæ•°çš„å¯¹ç§°åŠ å¯†å¯†é’¥ï¼Œä¼šè¯å¯†é’¥ï¼ˆsession keyï¼‰ï¼› ä½¿ç”¨ä¼šè¯å¯†é’¥åŠ å¯†éœ€è¦ä¼ è¾“çš„æ˜æ–‡æ¶ˆæ¯ï¼Œå› ä¸ºå¯¹ç§°åŠ å¯†æ€§èƒ½è¾ƒå¥½ï¼Œæ¥ç€å†ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„å…¬é’¥å¯¹ä¼šè¯å¯†é’¥åŠ å¯†ï¼Œå› ä¸ºä¼šè¯å¯†é’¥å¾ˆçŸ­ï¼Œé€šå¸¸åªæœ‰ 16 å­—èŠ‚æˆ– 32 å­—èŠ‚ï¼Œæ‰€ä»¥åŠ å¯†ä¹Ÿä¸ä¼šå¤ªæ…¢ ã€‚ è¿™é‡Œä¸»è¦å°±æ˜¯è§£å†³äº†éå¯¹ç§°åŠ å¯†çš„æ€§èƒ½é—®é¢˜ï¼ŒåŒæ—¶å®ç°äº†ä¼šè¯å¯†é’¥çš„æœºå¯†äº¤æ¢ã€‚ å¦ä¸€æ–¹æ¥æ”¶åˆ°å¯†æ–‡åä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„ç§é’¥è§£å¯†å‡ºä¸Šä¸€æ­¥åŠ å¯†çš„ä¼šè¯å¯†é’¥ï¼Œæ¥ç€ä½¿ç”¨ä¼šè¯å¯†é’¥è§£å¯†å‡ºåŠ å¯†çš„æ¶ˆæ¯æ˜æ–‡ã€‚ æ··åˆåŠ å¯† æ€»ç»“ä¸€ä¸‹å°±æ˜¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•æ¥åŠ å¯†ä¼šè¯å¯†é’¥ï¼Œä½¿ç”¨å¯¹ç§°åŠ å¯†ç®—æ³•æ¥åŠ å¯†æ¶ˆæ¯æ˜æ–‡ï¼Œæ¥æ”¶æ–¹åˆ™ä½¿ç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•çš„ç§é’¥è§£å¯†å‡ºä¼šè¯å¯†é’¥ï¼Œå†åˆ©ç”¨ä¼šè¯å¯†é’¥è§£å¯†æ¶ˆæ¯å¯†æ–‡ã€‚ è¿™æ ·æ··åˆåŠ å¯†å°±è§£å†³äº†å¯¹ç§°åŠ å¯†ç®—æ³•çš„å¯†é’¥äº¤æ¢é—®é¢˜ï¼Œè€Œä¸”å®‰å…¨å’Œæ€§èƒ½å…¼é¡¾ï¼Œå®Œç¾åœ°å®ç°äº†æœºå¯†æ€§ã€‚ åé¢è¿˜æœ‰å®Œæ•´æ€§ã€èº«ä»½è®¤è¯ã€ä¸å¯å¦è®¤ç­‰ç‰¹æ€§æ²¡æœ‰å®ç°ï¼Œæ‰€ä»¥ç°åœ¨çš„é€šä¿¡è¿˜ä¸æ˜¯ç»å¯¹å®‰å…¨ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:2","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#æ··åˆåŠ å¯†æµç¨‹"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æ‘˜è¦ç®—æ³•ä¸å®Œæ•´æ€§æ‘˜è¦ç®—æ³•çš„ä¸»è¦ç›®çš„å°±æ˜¯å®ç°å®Œæ•´æ€§ï¼Œé€šè¿‡å¸¸è§çš„æ•£åˆ—å‡½æ•°ã€å“ˆå¸Œå‡½æ•°å®ç°ã€‚ æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£æˆè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‹ç¼©ç®—æ³•ï¼Œå°†ä»»æ„é•¿åº¦çš„æ˜æ–‡æ•°æ®å¤„ç†æˆå›ºå®šé•¿åº¦ã€åˆæ˜¯ç‹¬ä¸€æ— äºŒçš„â€œæ‘˜è¦â€å­—ç¬¦ä¸²ï¼Œå°±æ˜¯è¯¥æ•°æ®çš„æŒ‡çº¹ã€‚ åŒæ—¶æ‘˜è¦ç®—æ³•æ˜¯å•å‘åŠ å¯†ç®—æ³•ï¼Œæ²¡æœ‰å¯†é’¥ï¼ŒåŠ å¯†åçš„æ•°æ®ä¹Ÿæ— æ³•è§£å¯†ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ä»â€œæ‘˜è¦â€æ¨å¯¼å‡ºæ˜æ–‡ã€‚ æ¯”å¦‚æˆ‘ä»¬å¬è¿‡æˆ–è€…ç”¨è¿‡çš„ MD5ï¼ˆMessage-Digest 5ï¼‰ã€SHA-1ï¼ˆSecure Hash Algorithm 1ï¼‰ï¼Œå®ƒä»¬å°±æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ä¸ªæ‘˜è¦ç®—æ³•ï¼Œèƒ½å¤Ÿç”Ÿæˆ 16 å­—èŠ‚å’Œ 20 å­—èŠ‚é•¿åº¦çš„æ•°å­—æ‘˜è¦ã€‚ å®Œæ•´æ€§å®ç°æœ‰äº†æ‘˜è¦ç®—æ³•ç”Ÿæˆçš„æ•°å­—æ‘˜è¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨æ˜æ–‡æ•°æ®é™„ä¸Šå¯¹åº”çš„æ‘˜è¦ï¼Œå°±èƒ½ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚ ä½†æ˜¯ç”±äºæ‘˜è¦ç®—æ³•ä¸å…·æœ‰æœºå¯†æ€§ï¼Œä¸èƒ½æ˜æ–‡ä¼ è¾“ï¼Œå¦åˆ™é»‘å®¢å¯ä»¥ä¿®æ”¹æ¶ˆæ¯åæŠŠæ‘˜è¦ä¹Ÿä¸€èµ·æ”¹äº†ï¼Œç½‘ç«™è¿˜æ˜¯é‰´åˆ«ä¸å‡ºå®Œæ•´æ€§ã€‚ æ‰€ä»¥å®Œæ•´æ€§è¿˜æ˜¯è¦å»ºç«‹åœ¨æœºå¯†æ€§ä¸Šï¼Œæˆ‘ä»¬ç»“åˆä¹‹å‰æåˆ°çš„æ··åˆåŠ å¯†ä½¿ç”¨ â€ä¼šè¯å¯†é’¥â€œ åŠ å¯†æ˜æ–‡æ¶ˆæ¯ + æ‘˜è¦ï¼Œè¿™æ ·çš„è¯é»‘å®¢ä¹Ÿå°±æ— æ³•å¾—åˆ°æ˜æ–‡ï¼Œæ— æ³•åšä¿®æ”¹äº†ã€‚è¿™é‡Œæœ‰ä¸ªä¸“ä¸šæœ¯è¯­å«â€œå“ˆå¸Œæ¶ˆæ¯è®¤è¯ç ï¼ˆHMACï¼‰â€ã€‚ å“ˆå¸Œæ¶ˆæ¯è®¤è¯ç ï¼ˆHMACï¼‰ æ¯”å¦‚è¯¸è‘›äº®ä½¿ç”¨ä¸Šé¢æåˆ°çš„æ··åˆåŠ å¯†è¿‡ç¨‹ç»™å…³äºŒçˆ·å‘æ¶ˆæ¯ï¼šâ€œæ˜å¤©æ”»åŸâ€ + â€œSHA-2 æ‘˜è¦â€ï¼Œå…³äºŒçˆ·æ”¶åˆ°åä½¿ç”¨å¯†é’¥å°†è§£å¯†å‡ºæ¥çš„ä¼šè¯å¯†é’¥è§£å¯†å‡ºæ˜æ–‡æ¶ˆæ¯ï¼ŒåŒæ—¶å¯¹æ˜æ–‡æ¶ˆæ¯ä½¿ç”¨è§£å¯†å‡ºæ¥çš„æ‘˜è¦ç®—æ³•è¿›è¡Œæ‘˜è¦è®¡ç®—ï¼Œæ¥ç€æ¯”å¯¹ä¸¤ä»½â€œæ‘˜è¦â€å­—ç¬¦ä¸²æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´å°±è¯´æ˜æ¶ˆæ¯å®Œæ•´å¯ä¿¡ï¼Œæ²¡æœ‰è¢«æ•Œå†›ä¿®æ”¹è¿‡ã€‚ æ¶ˆæ¯è¢«ä¿®æ”¹æ˜¯å¾ˆå±é™©çš„ï¼Œè¦ä»¥å²ä¸ºé‰´ï¼Œæ¯”å¦‚èµµé«˜ä¸ææ–¯ä¼ªé€ é—è¯ï¼Œç›´æ¥æŠŠæ‰¶è‹ç»™é€è¥¿å¤©äº†ï¼Œè¿™å¤ªå¯æ€•äº†ã€‚ æ€»ç»“ä¸‹å°±æ˜¯é€šè¿‡æ‘˜è¦æ¯”å¯¹é˜²æ­¢ç¯¡æ”¹ï¼ŒåŒæ—¶åˆ©ç”¨æ··åˆåŠ å¯†å®ç°å¯†æ–‡ä¸æ‘˜è¦çš„å®‰å…¨ä¼ è¾“ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:3","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#æ‘˜è¦ç®—æ³•ä¸å®Œæ•´æ€§"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æ‘˜è¦ç®—æ³•ä¸å®Œæ•´æ€§æ‘˜è¦ç®—æ³•çš„ä¸»è¦ç›®çš„å°±æ˜¯å®ç°å®Œæ•´æ€§ï¼Œé€šè¿‡å¸¸è§çš„æ•£åˆ—å‡½æ•°ã€å“ˆå¸Œå‡½æ•°å®ç°ã€‚ æˆ‘ä»¬å¯ä»¥ç®€å•ç†è§£æˆè¿™æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‹ç¼©ç®—æ³•ï¼Œå°†ä»»æ„é•¿åº¦çš„æ˜æ–‡æ•°æ®å¤„ç†æˆå›ºå®šé•¿åº¦ã€åˆæ˜¯ç‹¬ä¸€æ— äºŒçš„â€œæ‘˜è¦â€å­—ç¬¦ä¸²ï¼Œå°±æ˜¯è¯¥æ•°æ®çš„æŒ‡çº¹ã€‚ åŒæ—¶æ‘˜è¦ç®—æ³•æ˜¯å•å‘åŠ å¯†ç®—æ³•ï¼Œæ²¡æœ‰å¯†é’¥ï¼ŒåŠ å¯†åçš„æ•°æ®ä¹Ÿæ— æ³•è§£å¯†ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½ä»â€œæ‘˜è¦â€æ¨å¯¼å‡ºæ˜æ–‡ã€‚ æ¯”å¦‚æˆ‘ä»¬å¬è¿‡æˆ–è€…ç”¨è¿‡çš„ MD5ï¼ˆMessage-Digest 5ï¼‰ã€SHA-1ï¼ˆSecure Hash Algorithm 1ï¼‰ï¼Œå®ƒä»¬å°±æ˜¯æœ€å¸¸ç”¨çš„ä¸¤ä¸ªæ‘˜è¦ç®—æ³•ï¼Œèƒ½å¤Ÿç”Ÿæˆ 16 å­—èŠ‚å’Œ 20 å­—èŠ‚é•¿åº¦çš„æ•°å­—æ‘˜è¦ã€‚ å®Œæ•´æ€§å®ç°æœ‰äº†æ‘˜è¦ç®—æ³•ç”Ÿæˆçš„æ•°å­—æ‘˜è¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦åœ¨æ˜æ–‡æ•°æ®é™„ä¸Šå¯¹åº”çš„æ‘˜è¦ï¼Œå°±èƒ½ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ã€‚ ä½†æ˜¯ç”±äºæ‘˜è¦ç®—æ³•ä¸å…·æœ‰æœºå¯†æ€§ï¼Œä¸èƒ½æ˜æ–‡ä¼ è¾“ï¼Œå¦åˆ™é»‘å®¢å¯ä»¥ä¿®æ”¹æ¶ˆæ¯åæŠŠæ‘˜è¦ä¹Ÿä¸€èµ·æ”¹äº†ï¼Œç½‘ç«™è¿˜æ˜¯é‰´åˆ«ä¸å‡ºå®Œæ•´æ€§ã€‚ æ‰€ä»¥å®Œæ•´æ€§è¿˜æ˜¯è¦å»ºç«‹åœ¨æœºå¯†æ€§ä¸Šï¼Œæˆ‘ä»¬ç»“åˆä¹‹å‰æåˆ°çš„æ··åˆåŠ å¯†ä½¿ç”¨ â€ä¼šè¯å¯†é’¥â€œ åŠ å¯†æ˜æ–‡æ¶ˆæ¯ + æ‘˜è¦ï¼Œè¿™æ ·çš„è¯é»‘å®¢ä¹Ÿå°±æ— æ³•å¾—åˆ°æ˜æ–‡ï¼Œæ— æ³•åšä¿®æ”¹äº†ã€‚è¿™é‡Œæœ‰ä¸ªä¸“ä¸šæœ¯è¯­å«â€œå“ˆå¸Œæ¶ˆæ¯è®¤è¯ç ï¼ˆHMACï¼‰â€ã€‚ å“ˆå¸Œæ¶ˆæ¯è®¤è¯ç ï¼ˆHMACï¼‰ æ¯”å¦‚è¯¸è‘›äº®ä½¿ç”¨ä¸Šé¢æåˆ°çš„æ··åˆåŠ å¯†è¿‡ç¨‹ç»™å…³äºŒçˆ·å‘æ¶ˆæ¯ï¼šâ€œæ˜å¤©æ”»åŸâ€ + â€œSHA-2 æ‘˜è¦â€ï¼Œå…³äºŒçˆ·æ”¶åˆ°åä½¿ç”¨å¯†é’¥å°†è§£å¯†å‡ºæ¥çš„ä¼šè¯å¯†é’¥è§£å¯†å‡ºæ˜æ–‡æ¶ˆæ¯ï¼ŒåŒæ—¶å¯¹æ˜æ–‡æ¶ˆæ¯ä½¿ç”¨è§£å¯†å‡ºæ¥çš„æ‘˜è¦ç®—æ³•è¿›è¡Œæ‘˜è¦è®¡ç®—ï¼Œæ¥ç€æ¯”å¯¹ä¸¤ä»½â€œæ‘˜è¦â€å­—ç¬¦ä¸²æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´å°±è¯´æ˜æ¶ˆæ¯å®Œæ•´å¯ä¿¡ï¼Œæ²¡æœ‰è¢«æ•Œå†›ä¿®æ”¹è¿‡ã€‚ æ¶ˆæ¯è¢«ä¿®æ”¹æ˜¯å¾ˆå±é™©çš„ï¼Œè¦ä»¥å²ä¸ºé‰´ï¼Œæ¯”å¦‚èµµé«˜ä¸ææ–¯ä¼ªé€ é—è¯ï¼Œç›´æ¥æŠŠæ‰¶è‹ç»™é€è¥¿å¤©äº†ï¼Œè¿™å¤ªå¯æ€•äº†ã€‚ æ€»ç»“ä¸‹å°±æ˜¯é€šè¿‡æ‘˜è¦æ¯”å¯¹é˜²æ­¢ç¯¡æ”¹ï¼ŒåŒæ—¶åˆ©ç”¨æ··åˆåŠ å¯†å®ç°å¯†æ–‡ä¸æ‘˜è¦çš„å®‰å…¨ä¼ è¾“ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:3","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#å®Œæ•´æ€§å®ç°"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æ•°å­—ç­¾åå’Œ CAåˆ°è¿™é‡Œå·²ç»å¾ˆå®‰å…¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰æ¼æ´ï¼Œå°±æ˜¯é€šä¿¡çš„ä¸¤å¤´ã€‚é»‘å®¢å¯ä»¥ä¼ªè£…æˆç½‘ç«™æ¥çªƒå–ä¿¡æ¯ã€‚è€Œåè¿‡æ¥ï¼Œä»–ä¹Ÿå¯ä»¥ä¼ªè£…æˆä½ ï¼Œå‘ç½‘ç«™å‘é€æ”¯ä»˜ã€è½¬è´¦ç­‰æ¶ˆæ¯ï¼Œç½‘ç«™æ²¡æœ‰åŠæ³•ç¡®è®¤ä½ çš„èº«ä»½ï¼Œé’±å¯èƒ½å°±è¿™ä¹ˆè¢«å·èµ°äº†ã€‚ ç°åœ¨å¦‚ä½•å®ç°èº«ä»½è®¤è¯å‘¢ï¼Ÿ ç°å®ç”Ÿæ´»ä¸­ï¼Œè§£å†³èº«ä»½è®¤è¯çš„æ‰‹æ®µæ˜¯ç­¾åå’Œå°ç« ï¼Œåªè¦åœ¨çº¸ä¸Šå†™ä¸‹ç­¾åæˆ–è€…ç›–ä¸ªç« ï¼Œå°±èƒ½å¤Ÿè¯æ˜è¿™ä»½æ–‡ä»¶ç¡®å®æ˜¯ç”±æœ¬äººè€Œä¸æ˜¯å…¶ä»–äººå‘å‡ºçš„ã€‚ éå¯¹ç§°åŠ å¯†ä¾ç„¶å¯ä»¥è§£å†³æ­¤é—®é¢˜ï¼Œåªä¸è¿‡è·Ÿä¹‹å‰åè¿‡æ¥ç”¨ï¼Œä½¿ç”¨ç§é’¥å†åŠ ä¸Šæ‘˜è¦ç®—æ³•ï¼Œå°±èƒ½å¤Ÿå®ç°â€œæ•°å­—ç­¾åâ€ï¼ŒåŒæ—¶å®ç°â€œèº«ä»½è®¤è¯â€å’Œâ€œä¸å¯å¦è®¤â€ã€‚ å°±æ˜¯æŠŠå…¬é’¥ç§é’¥çš„ç”¨æ³•åè¿‡æ¥ï¼Œä¹‹å‰æ˜¯å…¬é’¥åŠ å¯†ã€ç§é’¥è§£å¯†ï¼Œç°åœ¨æ˜¯ç§é’¥åŠ å¯†ã€å…¬é’¥è§£å¯†ã€‚ä½†åˆå› ä¸ºéå¯¹ç§°åŠ å¯†æ•ˆç‡å¤ªä½ï¼Œæ‰€ä»¥ç§é’¥åªåŠ å¯†åŸæ–‡çš„æ‘˜è¦ï¼Œè¿™æ ·è¿ç®—é‡å°±å°çš„å¤šï¼Œè€Œä¸”å¾—åˆ°çš„æ•°å­—ç­¾åä¹Ÿå¾ˆå°ï¼Œæ–¹ä¾¿ä¿ç®¡å’Œä¼ è¾“ã€‚ é‡ç‚¹å°±æ˜¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„â€œç§é’¥â€åŠ å¯†åŸæ–‡çš„æ‘˜è¦ï¼Œå¯¹æ–¹åˆ™ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„å…¬é’¥è§£å¯†å‡ºæ‘˜è¦ï¼Œå†æ¯”å¯¹è§£å¯†å‡ºçš„åŸæ–‡é€šè¿‡æ‘˜è¦ç®—æ³•è®¡ç®—æ‘˜è¦ä¸è§£å¯†å‡ºçš„æ‘˜è¦æ¯”å¯¹æ˜¯å¦ä¸€è‡´ã€‚ è¿™æ ·å°±èƒ½åƒç­¾ç½²æ–‡ä»¶ä¸€æ ·è¯æ˜æ¶ˆæ¯ç¡®å®æ˜¯ä½ å‘é€çš„ã€‚ ç­¾åéªŒç­¾ åªè¦ä½ å’Œç½‘ç«™äº’ç›¸äº¤æ¢å…¬é’¥ï¼Œå°±å¯ä»¥ç”¨â€œç­¾åâ€å’Œâ€œéªŒç­¾â€æ¥ç¡®è®¤æ¶ˆæ¯çš„çœŸå®æ€§ï¼Œå› ä¸ºç§é’¥ä¿å¯†ï¼Œé»‘å®¢ä¸èƒ½ä¼ªé€ ç­¾åï¼Œå°±èƒ½å¤Ÿä¿è¯é€šä¿¡åŒæ–¹çš„èº«ä»½ã€‚ CAåˆ°è¿™é‡Œä¼¼ä¹å·²ç»å¤§åŠŸå‘Šæˆï¼Œå¯æƒœè¿˜ä¸æ˜¯ã€‚ ç»¼åˆä½¿ç”¨å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†å’Œæ‘˜è¦ç®—æ³•ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†å®‰å…¨çš„å››å¤§ç‰¹æ€§ï¼Œæ˜¯ä¸æ˜¯å·²ç»å®Œç¾äº†å‘¢ï¼Ÿ ä¸æ˜¯çš„ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªâ€œå…¬é’¥çš„ä¿¡ä»»â€é—®é¢˜ã€‚å› ä¸ºè°éƒ½å¯ä»¥å‘å¸ƒå…¬é’¥ï¼Œæˆ‘ä»¬è¿˜ç¼ºå°‘é˜²æ­¢é»‘å®¢ä¼ªé€ å…¬é’¥çš„æ‰‹æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ€ä¹ˆæ¥åˆ¤æ–­è¿™ä¸ªå…¬é’¥å°±æ˜¯ä½ çš„å…¬é’¥å‘¢ï¼Ÿ æˆ‘ä»¬å¸¸è¯´çš„CAï¼ˆCertificate Authorityï¼Œè¯ä¹¦è®¤è¯æœºæ„ï¼‰ï¼Œå®ƒå°±åƒç½‘ç»œä¸–ç•Œé‡Œçš„å…¬å®‰å±€ã€æ•™è‚²éƒ¨ã€å…¬è¯ä¸­å¿ƒï¼Œå…·æœ‰æé«˜çš„å¯ä¿¡åº¦ï¼Œç”±å®ƒæ¥ç»™å„ä¸ªå…¬é’¥ç­¾åï¼Œç”¨è‡ªèº«çš„ä¿¡èª‰æ¥ä¿è¯å…¬é’¥æ— æ³•ä¼ªé€ ï¼Œæ˜¯å¯ä¿¡çš„ã€‚ CA å¯¹å…¬é’¥çš„ç­¾åè®¤è¯ä¹Ÿæ˜¯æœ‰æ ¼å¼çš„ï¼Œä¸æ˜¯ç®€å•åœ°æŠŠå…¬é’¥ç»‘å®šåœ¨æŒæœ‰è€…èº«ä»½ä¸Šå°±å®Œäº‹äº†ï¼Œè¿˜è¦åŒ…å«åºåˆ—å·ã€ç”¨é€”ã€é¢å‘è€…ã€æœ‰æ•ˆæ—¶é—´ç­‰ç­‰ï¼ŒæŠŠè¿™äº›æ‰“æˆä¸€ä¸ªåŒ…å†ç­¾åï¼Œå®Œæ•´åœ°è¯æ˜å…¬é’¥å…³è”çš„å„ç§ä¿¡æ¯ï¼Œå½¢æˆâ€œæ•°å­—è¯ä¹¦â€ï¼ˆCertificateï¼‰ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:4","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#æ•°å­—ç­¾åå’Œ-ca"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æ•°å­—ç­¾åå’Œ CAåˆ°è¿™é‡Œå·²ç»å¾ˆå®‰å…¨äº†ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰æ¼æ´ï¼Œå°±æ˜¯é€šä¿¡çš„ä¸¤å¤´ã€‚é»‘å®¢å¯ä»¥ä¼ªè£…æˆç½‘ç«™æ¥çªƒå–ä¿¡æ¯ã€‚è€Œåè¿‡æ¥ï¼Œä»–ä¹Ÿå¯ä»¥ä¼ªè£…æˆä½ ï¼Œå‘ç½‘ç«™å‘é€æ”¯ä»˜ã€è½¬è´¦ç­‰æ¶ˆæ¯ï¼Œç½‘ç«™æ²¡æœ‰åŠæ³•ç¡®è®¤ä½ çš„èº«ä»½ï¼Œé’±å¯èƒ½å°±è¿™ä¹ˆè¢«å·èµ°äº†ã€‚ ç°åœ¨å¦‚ä½•å®ç°èº«ä»½è®¤è¯å‘¢ï¼Ÿ ç°å®ç”Ÿæ´»ä¸­ï¼Œè§£å†³èº«ä»½è®¤è¯çš„æ‰‹æ®µæ˜¯ç­¾åå’Œå°ç« ï¼Œåªè¦åœ¨çº¸ä¸Šå†™ä¸‹ç­¾åæˆ–è€…ç›–ä¸ªç« ï¼Œå°±èƒ½å¤Ÿè¯æ˜è¿™ä»½æ–‡ä»¶ç¡®å®æ˜¯ç”±æœ¬äººè€Œä¸æ˜¯å…¶ä»–äººå‘å‡ºçš„ã€‚ éå¯¹ç§°åŠ å¯†ä¾ç„¶å¯ä»¥è§£å†³æ­¤é—®é¢˜ï¼Œåªä¸è¿‡è·Ÿä¹‹å‰åè¿‡æ¥ç”¨ï¼Œä½¿ç”¨ç§é’¥å†åŠ ä¸Šæ‘˜è¦ç®—æ³•ï¼Œå°±èƒ½å¤Ÿå®ç°â€œæ•°å­—ç­¾åâ€ï¼ŒåŒæ—¶å®ç°â€œèº«ä»½è®¤è¯â€å’Œâ€œä¸å¯å¦è®¤â€ã€‚ å°±æ˜¯æŠŠå…¬é’¥ç§é’¥çš„ç”¨æ³•åè¿‡æ¥ï¼Œä¹‹å‰æ˜¯å…¬é’¥åŠ å¯†ã€ç§é’¥è§£å¯†ï¼Œç°åœ¨æ˜¯ç§é’¥åŠ å¯†ã€å…¬é’¥è§£å¯†ã€‚ä½†åˆå› ä¸ºéå¯¹ç§°åŠ å¯†æ•ˆç‡å¤ªä½ï¼Œæ‰€ä»¥ç§é’¥åªåŠ å¯†åŸæ–‡çš„æ‘˜è¦ï¼Œè¿™æ ·è¿ç®—é‡å°±å°çš„å¤šï¼Œè€Œä¸”å¾—åˆ°çš„æ•°å­—ç­¾åä¹Ÿå¾ˆå°ï¼Œæ–¹ä¾¿ä¿ç®¡å’Œä¼ è¾“ã€‚ é‡ç‚¹å°±æ˜¯ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„â€œç§é’¥â€åŠ å¯†åŸæ–‡çš„æ‘˜è¦ï¼Œå¯¹æ–¹åˆ™ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„å…¬é’¥è§£å¯†å‡ºæ‘˜è¦ï¼Œå†æ¯”å¯¹è§£å¯†å‡ºçš„åŸæ–‡é€šè¿‡æ‘˜è¦ç®—æ³•è®¡ç®—æ‘˜è¦ä¸è§£å¯†å‡ºçš„æ‘˜è¦æ¯”å¯¹æ˜¯å¦ä¸€è‡´ã€‚ è¿™æ ·å°±èƒ½åƒç­¾ç½²æ–‡ä»¶ä¸€æ ·è¯æ˜æ¶ˆæ¯ç¡®å®æ˜¯ä½ å‘é€çš„ã€‚ ç­¾åéªŒç­¾ åªè¦ä½ å’Œç½‘ç«™äº’ç›¸äº¤æ¢å…¬é’¥ï¼Œå°±å¯ä»¥ç”¨â€œç­¾åâ€å’Œâ€œéªŒç­¾â€æ¥ç¡®è®¤æ¶ˆæ¯çš„çœŸå®æ€§ï¼Œå› ä¸ºç§é’¥ä¿å¯†ï¼Œé»‘å®¢ä¸èƒ½ä¼ªé€ ç­¾åï¼Œå°±èƒ½å¤Ÿä¿è¯é€šä¿¡åŒæ–¹çš„èº«ä»½ã€‚ CAåˆ°è¿™é‡Œä¼¼ä¹å·²ç»å¤§åŠŸå‘Šæˆï¼Œå¯æƒœè¿˜ä¸æ˜¯ã€‚ ç»¼åˆä½¿ç”¨å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†å’Œæ‘˜è¦ç®—æ³•ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†å®‰å…¨çš„å››å¤§ç‰¹æ€§ï¼Œæ˜¯ä¸æ˜¯å·²ç»å®Œç¾äº†å‘¢ï¼Ÿ ä¸æ˜¯çš„ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä¸ªâ€œå…¬é’¥çš„ä¿¡ä»»â€é—®é¢˜ã€‚å› ä¸ºè°éƒ½å¯ä»¥å‘å¸ƒå…¬é’¥ï¼Œæˆ‘ä»¬è¿˜ç¼ºå°‘é˜²æ­¢é»‘å®¢ä¼ªé€ å…¬é’¥çš„æ‰‹æ®µï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ€ä¹ˆæ¥åˆ¤æ–­è¿™ä¸ªå…¬é’¥å°±æ˜¯ä½ çš„å…¬é’¥å‘¢ï¼Ÿ æˆ‘ä»¬å¸¸è¯´çš„CAï¼ˆCertificate Authorityï¼Œè¯ä¹¦è®¤è¯æœºæ„ï¼‰ï¼Œå®ƒå°±åƒç½‘ç»œä¸–ç•Œé‡Œçš„å…¬å®‰å±€ã€æ•™è‚²éƒ¨ã€å…¬è¯ä¸­å¿ƒï¼Œå…·æœ‰æé«˜çš„å¯ä¿¡åº¦ï¼Œç”±å®ƒæ¥ç»™å„ä¸ªå…¬é’¥ç­¾åï¼Œç”¨è‡ªèº«çš„ä¿¡èª‰æ¥ä¿è¯å…¬é’¥æ— æ³•ä¼ªé€ ï¼Œæ˜¯å¯ä¿¡çš„ã€‚ CA å¯¹å…¬é’¥çš„ç­¾åè®¤è¯ä¹Ÿæ˜¯æœ‰æ ¼å¼çš„ï¼Œä¸æ˜¯ç®€å•åœ°æŠŠå…¬é’¥ç»‘å®šåœ¨æŒæœ‰è€…èº«ä»½ä¸Šå°±å®Œäº‹äº†ï¼Œè¿˜è¦åŒ…å«åºåˆ—å·ã€ç”¨é€”ã€é¢å‘è€…ã€æœ‰æ•ˆæ—¶é—´ç­‰ç­‰ï¼ŒæŠŠè¿™äº›æ‰“æˆä¸€ä¸ªåŒ…å†ç­¾åï¼Œå®Œæ•´åœ°è¯æ˜å…¬é’¥å…³è”çš„å„ç§ä¿¡æ¯ï¼Œå½¢æˆâ€œæ•°å­—è¯ä¹¦â€ï¼ˆCertificateï¼‰ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:4","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#ca"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" OpenSSLå®ƒæ˜¯ä¸€ä¸ªè‘—åçš„å¼€æºå¯†ç å­¦ç¨‹åºåº“å’Œå·¥å…·åŒ…ï¼Œå‡ ä¹æ”¯æŒæ‰€æœ‰å…¬å¼€çš„åŠ å¯†ç®—æ³•å’Œåè®®ï¼Œå·²ç»æˆä¸ºäº†äº‹å®ä¸Šçš„æ ‡å‡†ï¼Œè®¸å¤šåº”ç”¨è½¯ä»¶éƒ½ä¼šä½¿ç”¨å®ƒä½œä¸ºåº•å±‚åº“æ¥å®ç° TLS åŠŸèƒ½ï¼ŒåŒ…æ‹¬å¸¸ç”¨çš„ Web æœåŠ¡å™¨ Apacheã€Nginx ç­‰ã€‚ ç”±äº OpenSSL æ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥å®ƒè¿˜æœ‰ä¸€äº›ä»£ç åˆ†æ”¯ï¼Œæ¯”å¦‚ Google çš„ BoringSSLã€OpenBSD çš„ LibreSSLï¼Œè¿™äº›åˆ†æ”¯åœ¨ OpenSSL çš„åŸºç¡€ä¸Šåˆ é™¤äº†ä¸€äº›è€æ—§ä»£ç ï¼Œä¹Ÿå¢åŠ äº†ä¸€äº›æ–°ç‰¹æ€§ï¼Œè™½ç„¶èƒŒåæœ‰â€œå¤§é‡‘ä¸»â€ï¼Œä½†ç¦»å–ä»£ OpenSSL è¿˜å·®å¾—å¾ˆè¿œã€‚ æ€»ç»“ä¸‹å°±æ˜¯ï¼šOpenSSL æ˜¯è‘—åçš„å¼€æºå¯†ç å­¦å·¥å…·åŒ…ï¼Œæ˜¯ SSL/TLS çš„å…·ä½“å®ç°ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:3:5","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#openssl"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" è¿ç§» HTTPS å¿…è¦æ€§å¦‚æœä½ åšç§»åŠ¨åº”ç”¨å¼€å‘çš„è¯ï¼Œé‚£ä¹ˆå°±ä¸€å®šçŸ¥é“ï¼ŒAppleã€Androidã€æŸä¿¡ç­‰å¼€å‘å¹³å°åœ¨ 2017 å¹´å°±ç›¸ç»§å‘å‡ºé€šçŸ¥ï¼Œè¦æ±‚æ‰€æœ‰çš„åº”ç”¨å¿…é¡»ä½¿ç”¨ HTTPS è¿æ¥ï¼Œç¦æ­¢ä¸å®‰å…¨çš„ HTTPã€‚ åœ¨å°å¼æœºä¸Šï¼Œä¸»æµçš„æµè§ˆå™¨ Chromeã€Firefox ç­‰ä¹Ÿæ—©å°±å¼€å§‹â€œå¼ºæ¨â€HTTPSï¼ŒæŠŠ HTTP ç«™ç‚¹æ‰“ä¸Šâ€œä¸å®‰å…¨â€çš„æ ‡ç­¾ï¼Œç»™ç”¨æˆ·ä»¥â€œå¿ƒç†å‹åŠ›â€ã€‚ Google ç­‰æœç´¢å·¨å¤´è¿˜åˆ©ç”¨è‡ªèº«çš„â€œè¯è¯­æƒâ€ä¼˜åŠ¿ï¼Œé™ä½ HTTP ç«™ç‚¹çš„æ’åï¼Œè€Œç»™ HTTPS æ›´å¤§çš„æƒé‡ï¼ŒåŠ›å›¾è®©ç½‘æ°‘åªè®¿é—®åˆ° HTTPS ç½‘ç«™ã€‚ è¿™äº›æ‰‹æ®µéƒ½é€æ¸â€œæŒ¤å‹â€äº†çº¯æ˜æ–‡ HTTP çš„ç”Ÿå­˜ç©ºé—´ï¼Œâ€œè¿ç§»åˆ° HTTPSâ€å·²ç»ä¸æ˜¯â€œè¦ä¸è¦åšâ€çš„é—®é¢˜ï¼Œè€Œæ˜¯â€œè¦æ€ä¹ˆåšâ€çš„é—®é¢˜äº†ã€‚HTTPS çš„å¤§æ½®æ— æ³•é˜»æŒ¡ï¼Œå¦‚æœè¿˜æ˜¯æ­»å®ˆç€ HTTPï¼Œé‚£ä¹ˆæ— ç–‘ä¼šè¢«å†²åˆ·åˆ°äº’è”ç½‘çš„è§’è½é‡Œã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:4:0","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#è¿ç§»-https-å¿…è¦æ€§"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" é¡¾è™‘é˜»ç¢ HTTPS å®æ–½çš„å› ç´ è¿˜æœ‰ä¸€äº›è¿™æ ·ã€é‚£æ ·çš„é¡¾è™‘ï¼Œä¸‰ä¸ªæ¯”è¾ƒæµè¡Œçš„è§‚ç‚¹ï¼šâ€œæ…¢ã€è´µã€éš¾â€ã€‚ è€Œâ€œæ…¢â€åˆ™æ˜¯æƒ¯æ€§æ€ç»´ï¼Œæ‹¿ä»¥å‰çš„æ•°æ®æ¥è¯„ä¼° HTTPS çš„æ€§èƒ½ï¼Œè®¤ä¸º HTTPS ä¼šå¢åŠ æœåŠ¡å™¨çš„æˆæœ¬ï¼Œå¢åŠ å®¢æˆ·ç«¯çš„æ—¶å»¶ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚ å…¶å®ç°åœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„è¿ç®—èƒ½åŠ›éƒ½å·²ç»æœ‰äº†å¾ˆå¤§çš„æå‡ï¼Œæ€§èƒ½æ–¹é¢å®Œå…¨æ²¡æœ‰æ‹…å¿ƒçš„å¿…è¦ï¼Œè€Œä¸”è¿˜å¯ä»¥åº”ç”¨å¾ˆå¤šçš„ä¼˜åŒ–è§£å†³æ–¹æ¡ˆ æ‰€è°“â€œè´µâ€ï¼Œä¸»è¦æ˜¯æŒ‡è¯ä¹¦ç”³è¯·å’Œç»´æŠ¤çš„æˆæœ¬å¤ªé«˜ï¼Œç½‘ç«™éš¾ä»¥æ‰¿æ‹…ã€‚ è¿™ä¹Ÿå±äºæƒ¯æ€§æ€ç»´ï¼Œåœ¨æ—©å‡ å¹´çš„ç¡®æ˜¯ä¸ªé—®é¢˜ï¼Œå‘ CA ç”³è¯·è¯ä¹¦çš„è¿‡ç¨‹ä¸ä»…éº»çƒ¦ï¼Œè€Œä¸”ä»·æ ¼æ˜‚è´µï¼Œæ¯å¹´è¦äº¤å‡ åƒç”šè‡³å‡ ä¸‡å…ƒã€‚ ä½†ç°åœ¨å°±ä¸ä¸€æ ·äº†ï¼Œä¸ºäº†æ¨å¹¿ HTTPSï¼Œå¾ˆå¤šäº‘æœåŠ¡å‚å•†éƒ½æä¾›äº†ä¸€é”®ç”³è¯·ã€ä»·æ ¼ä½å»‰çš„è¯ä¹¦ï¼Œè€Œä¸”è¿˜å‡ºç°äº†ä¸“é—¨é¢å‘å…è´¹è¯ä¹¦çš„ CAï¼Œå…¶ä¸­æœ€è‘—åçš„å°±æ˜¯â€œLetâ€™s Encryptâ€ã€‚ æ‰€è°“çš„â€œéš¾â€ï¼Œæ˜¯æŒ‡ HTTPS æ¶‰åŠçš„çŸ¥è¯†ç‚¹å¤ªå¤šã€å¤ªå¤æ‚ï¼Œæœ‰ä¸€å®šçš„æŠ€æœ¯é—¨æ§›ï¼Œä¸èƒ½å¾ˆå¿«ä¸Šæ‰‹ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:5:0","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#é¡¾è™‘"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" æ€»ç»“HTTPS ä¸»è¦å°±æ˜¯é€šè¿‡ SSL/TLS å®ç°å®‰å…¨ï¼Œè€Œå®‰å…¨åˆæœ‰å¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†ï¼Œéå¯¹ç§°åŠ å¯†æ€§èƒ½è¾ƒå¼±ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨éå¯¹ç§°åŠ å¯†æ¥åŠ å¯†å¯¹ç§°åŠ å¯†çš„â€œä¼šè¯å¯†é’¥â€ï¼Œåˆ©ç”¨ä¼šè¯å¯†é’¥åŠ å¯†æ˜æ–‡è§£å†³äº†æ€§èƒ½é—®é¢˜ã€‚ é€šè¿‡æ··åˆåŠ å¯†å®ç°äº†æœºå¯†æ€§ï¼Œåˆ©ç”¨æ‘˜è¦ç®—æ³•å®ç°äº†å®Œæ•´æ€§ï¼Œé€šè¿‡æ•°å­—ç­¾åä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„â€œç§é’¥â€åŠ å¯†åŸæ–‡çš„æ‘˜è¦ï¼Œå¯¹æ–¹åˆ™ä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„å…¬é’¥è§£å¯†å‡ºæ‘˜è¦ï¼Œå†æ¯”å¯¹è§£å¯†å‡ºçš„åŸæ–‡é€šè¿‡æ‘˜è¦ç®—æ³•è®¡ç®—æ‘˜è¦ä¸è§£å¯†å‡ºçš„æ‘˜è¦æ¯”å¯¹æ˜¯å¦ä¸€è‡´å®ç°äº†èº«ä»½è®¤è¯ä¸ä¸å¯å¦è®¤ã€‚ ","date":"2020-10-27","objectID":"/what-is-https/:6:0","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#æ€»ç»“"},{"categories":["ç†è§£è®¡ç®—æœº"],"content":" å‚è€ƒ é€è§†HTTPSå»ºé€ å›ºè‹¥é‡‘æ±¤çš„åŸå ¡ ","date":"2020-10-27","objectID":"/what-is-https/:7:0","series":null,"tags":["http/https","SSL","TLS"],"title":"é€è§† HTTPS","uri":"/what-is-https/#å‚è€ƒ"},{"categories":["mysql"],"content":"xiaobinqt,mysql å­˜å‚¨ç¨‹åº,mysql å­˜å‚¨å‡½æ•°,å­˜å‚¨è¿‡ç¨‹,è§¦å‘å™¨,äº‹ä»¶,mysql æ¸¸æ ‡,ä»€ä¹ˆæ˜¯æ¸¸æ ‡,mysql å±€éƒ¨å˜é‡å’Œè‡ªå®šä¹‰å˜é‡","date":"2020-10-08","objectID":"/mysql-stored-routine/","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/"},{"categories":["mysql"],"content":" æ€»è§ˆ å­˜å‚¨ç¨‹åº å­˜å‚¨ç¨‹åºå¯ä»¥å°è£…ä¸€äº›è¯­å¥ï¼Œç„¶åç»™ç”¨æˆ·æä¾›ä¸€ç§ç®€å•çš„æ–¹å¼æ¥è°ƒç”¨è¿™ä¸ªå­˜å‚¨ç¨‹åºï¼Œä»è€Œé—´æ¥åœ°æ‰§è¡ŒæŸäº›è¯­å¥ã€‚æ ¹æ®è°ƒç”¨æ–¹å¼çš„ä¸åŒï¼Œå¯ä»¥æŠŠå­˜å‚¨ç¨‹åºåˆ†ä¸ºå­˜å‚¨ä¾‹ç¨‹ã€è§¦å‘å™¨å’Œäº‹ä»¶ï¼Œå­˜å‚¨ä¾‹ç¨‹åˆåˆ†ä¸ºå­˜å‚¨å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹ï¼Œå¦‚â˜ï¸ ä¸Šå›¾ã€‚ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:1:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#æ€»è§ˆ"},{"categories":["mysql"],"content":" å­˜å‚¨å‡½æ•°å­˜å‚¨å‡½æ•°åªæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œå¯ä»¥ä» mysql å†…ç½®çš„å‡½æ•°ç†è§£ï¼Œæ‰€æœ‰ mysql å†…ç½®çš„å‡½æ•°éƒ½æ˜¯åªæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œæ¯”å¦‚ï¼š mysql å†…ç½®å‡½æ•° å­˜å‚¨å‡½æ•°å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè·Ÿæ™®é€šå‡½æ•°ä¸€æ ·æœ‰å‡½æ•°åï¼Œå‡½æ•°ä½“ï¼Œå‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ã€‚åˆ›å»ºå­˜å‚¨å‡½æ•°è¯­å¥å¦‚ä¸‹ï¼š CREATE FUNCTION å­˜å‚¨å‡½æ•°åç§°([å‚æ•°åˆ—è¡¨]) RETURNS è¿”å›å€¼ç±»å‹ BEGIN å‡½æ•°ä½“å†…å®¹ END CMD è¯´æ˜ SHOW FUNCTION STATUS [LIKE éœ€è¦åŒ¹é…çš„å‡½æ•°å] æŸ¥çœ‹æ‰€æœ‰å­˜å‚¨å‡½æ•° SHOW CREATE FUNCTION å‡½æ•°å æŸ¥çœ‹æŸä¸ªå­˜å‚¨å‡½æ•° DROP FUNCTION å‡½æ•°å åˆ é™¤æŸä¸ªå­˜å‚¨å‡½æ•° ","date":"2020-10-08","objectID":"/mysql-stored-routine/:2:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#å­˜å‚¨å‡½æ•°"},{"categories":["mysql"],"content":" ç¤ºä¾‹ç°åœ¨å†™ä¸€ä¸ªå­˜å‚¨å‡½æ•°ï¼Œè¾“å…¥ç”¨æˆ·å nameï¼Œè¿”å›ç”¨æˆ·æ‰‹æœºå· phoneï¼š CREATE FUNCTION get_phone(qname VARCHAR (45)) RETURNS VARCHAR(11) BEGIN RETURN (SELECT phone from t where name = qname); END EOF å­˜å‚¨å‡½æ•°çš„è°ƒç”¨è·Ÿæ™®é€šå‡½æ•°çš„è°ƒç”¨ä¹Ÿæ˜¯ä¸€æ ·çš„ğŸ‘‡ æ•ˆæœ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:2:1","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#ç¤ºä¾‹"},{"categories":["mysql"],"content":" å±€éƒ¨å˜é‡å’Œè‡ªå®šä¹‰å˜é‡åœ¨å­˜å‚¨å‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨å±€éƒ¨å˜é‡å’Œè‡ªå®šä¹‰å˜é‡ï¼ŒäºŒè€…çš„åŒºåˆ«æ˜¯ï¼Œå±€éƒ¨å˜é‡ç”¨ DECLARE ç”³æ˜ï¼Œä¸ç”¨åŠ  @ç¬¦ï¼Œå±€éƒ¨å˜é‡éšç€å‡½æ•°è°ƒç”¨ç»“æŸï¼Œå˜é‡é”€æ¯ä¸”åªèƒ½åœ¨å­˜å‚¨å‡½æ•°ä¸­ä½¿ç”¨ã€‚è‡ªå®šä¹‰å˜é‡éœ€è¦åŠ  @ ç¬¦ï¼Œä¸”å¯ä»¥åœ¨å‡½æ•°å¤–è°ƒç”¨ã€‚ CREATE FUNCTION get_phone(qname VARCHAR (45)) RETURNS VARCHAR(11) BEGIN DECLARE ph varchar(11) default \"\"; # å±€éƒ¨å˜é‡ SET @ii = 100; # è‡ªå®šä¹‰å˜é‡ SET ph = (select phone from t where name = qname); # ç»™å±€éƒ¨å˜é‡èµ‹å€¼ RETURN ph ; END EOF å±€éƒ¨å˜é‡å’Œè‡ªå®šä¹‰å˜é‡ â˜ï¸ å¯çŸ¥ï¼Œåœ¨å­˜å‚¨å‡½æ•°get_phoneä¸­æœ‰ä¸€ä¸ªå±€éƒ¨å˜é‡ phå’Œè‡ªå®šä¹‰å˜é‡ @iiï¼Œå‡½æ•°è°ƒç”¨ç»“æŸå @ii è¢«èµ‹å€¼ä¸º100 ä¸”å¯ä»¥åœ¨å‡½æ•°æ‰§è¡Œå®Œåè®¿é—®ï¼Œä½†æ˜¯ @ph æ˜¯ç©ºçš„ã€‚ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:3:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#å±€éƒ¨å˜é‡å’Œè‡ªå®šä¹‰å˜é‡"},{"categories":["mysql"],"content":" å­˜å‚¨è¿‡ç¨‹å­˜å‚¨å‡½æ•°ä¾§é‡äºæ‰§è¡ŒæŸäº›è¯­å¥å¹¶è¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æ›´ä¾§é‡äºå•çº¯çš„å»æ‰§è¡Œè¿™äº›è¯­å¥ã€‚å­˜å‚¨è¿‡ç¨‹çš„å®šä¹‰ä¸éœ€è¦å£°æ˜è¿”å›å€¼ç±»å‹ã€‚ CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹åç§°([å‚æ•°åˆ—è¡¨]) BEGIN éœ€è¦æ‰§è¡Œçš„è¯­å¥ END è°ƒç”¨å­˜å‚¨è¿‡ç¨‹ä½¿ç”¨ CALL å…³é”®å­—ã€‚ CMD è¯´æ˜ SHOW PROCEDURE STATUS [LIKE éœ€è¦åŒ¹é…çš„å­˜å‚¨è¿‡ç¨‹åç§°] æŸ¥çœ‹æ‰€æœ‰å­˜å‚¨è¿‡ç¨‹ SHOW CREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹åç§° æŸ¥çœ‹æŸä¸ªå­˜å‚¨è¿‡ç¨‹ DROP PROCEDURE å­˜å‚¨è¿‡ç¨‹åç§° åˆ é™¤æŸä¸ªå­˜å‚¨è¿‡ç¨‹ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:4:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#å­˜å‚¨è¿‡ç¨‹"},{"categories":["mysql"],"content":" ç¤ºä¾‹ä»¥ä¸‹ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ª my_operate çš„å­˜å‚¨è¿‡ç¨‹ï¼š CREATE PROCEDURE my_operate(pname varchar (45)) BEGIN SELECT * FROM t; INSERT INTO t(phone, name) VALUES(\"15214254125\", \"å¢ä¿Šä¹‰\"); SELECT * FROM t; SELECT * from t where name = pname; END EOF å­˜å‚¨è¿‡ç¨‹ â˜ï¸ my_operate å®šä¹‰å¹¶æ‰§è¡Œäº† 4 æ¡ sqlï¼Œå®Œç¾è¯ é‡Šäº†å­˜å‚¨è¿‡ç¨‹æ›´ä¾§é‡äºå•çº¯çš„å»æ‰§è¡Œè¿™äº›è¯­å¥ã€‚ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:4:1","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#ç¤ºä¾‹-1"},{"categories":["mysql"],"content":" å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°å‰ç¼€å­˜å‚¨è¿‡ç¨‹åœ¨å®šä¹‰å‚æ•°çš„æ—¶å€™å¯ä»¥é€‰æ‹©æ·»åŠ ä¸€äº›å‰ç¼€ğŸ‘‡ï¼Œå¦‚æœä¸å†™ï¼Œé»˜è®¤çš„å‰ç¼€æ˜¯INï¼š å‚æ•°ç±»å‹ [IN | OUT | INOUT] å‚æ•°å æ•°æ®ç±»å‹ å‰ç¼€ å®é™…å‚æ•°æ˜¯å¦å¿…é¡»æ˜¯å˜é‡ æè¿° IN å¦ ç”¨äºè°ƒç”¨è€…å‘å­˜å‚¨è¿‡ç¨‹ä¼ é€’æ•°æ®ï¼Œå¦‚æœINå‚æ•°åœ¨è¿‡ç¨‹ä¸­è¢«ä¿®æ”¹ï¼Œè°ƒç”¨è€…ä¸å¯è§ã€‚ OUT æ˜¯ ç”¨äºæŠŠå­˜å‚¨è¿‡ç¨‹è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®èµ‹å€¼ç»™OUTå‚æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹æ‰§è¡Œç»“æŸåï¼Œè°ƒç”¨è€…å¯ä»¥è®¿é—®åˆ°OUTå‚æ•°ã€‚ INOUT æ˜¯ ç»¼åˆINå’ŒOUTçš„ç‰¹ç‚¹ï¼Œæ—¢å¯ä»¥ç”¨äºè°ƒç”¨è€…å‘å­˜å‚¨è¿‡ç¨‹ä¼ é€’æ•°æ®ï¼Œä¹Ÿå¯ä»¥ç”¨äºå­˜æ”¾å­˜å‚¨è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®ä»¥ä¾›è°ƒç”¨è€…ä½¿ç”¨ã€‚ ğŸ‘‡ä»¥ä¸‹çš„ç¤ºä¾‹ï¼Œç»¼åˆäº† inï¼Œoutï¼Œinout å‚æ•°ï¼š CREATE PROCEDURE my_arg( in pname varchar (45), out ophone char(11), inout io_name varchar(45) ) BEGIN SELECT * FROM t; INSERT INTO t(phone, name) VALUES(\"15225632145\", \"å…¬å­™èƒœ\"); SELECT * FROM t; SELECT phone from t where name = pname into ophone; SET pname = \"å…¬å­™èƒœ\"; SET io_name = \"å…¬å­™èƒœ\"; END EOF ç»¼åˆç¤ºä¾‹ ç”±â˜ï¸å¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ä¿®æ”¹äº† pname çš„å€¼ä¸º å…¬å­™èƒœï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç”Ÿæ•ˆï¼Œå€¼ä¾ç„¶æ˜¯æœ€åˆçš„å®‹æ±Ÿã€‚INå‚æ•°åªèƒ½è¢«ç”¨äºè¯»å–ï¼Œå¯¹å®ƒèµ‹å€¼æ˜¯ä¸ä¼šè¢«è°ƒç”¨è€…çœ‹åˆ°çš„ã€‚ out å‚æ•° ophone æœ€åˆæ˜¯ç©ºçš„ï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹èµ‹å€¼æˆåŠŸä¸ºå…¬å­™èƒœã€‚ inout å‚æ•° io_name æœ€åˆæ˜¯ç©ºçš„ï¼Œé€šè¿‡å­˜å‚¨è¿‡ç¨‹èµ‹å€¼æˆåŠŸä¸ºå…¬å­™èƒœï¼Œè¿™é‡Œå¦‚æœ io_name ä¸ä¸ºç©ºï¼Œä¹Ÿä¼šè¢«ä¿®æ”¹ä¸ºå…¬å­™èƒœã€‚ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:5:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#å­˜å‚¨è¿‡ç¨‹çš„å‚æ•°å‰ç¼€"},{"categories":["mysql"],"content":" å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°çš„åŒºåˆ« å­˜å‚¨å‡½æ•°åœ¨å®šä¹‰æ—¶éœ€è¦æ˜¾å¼ç”¨RETURNSè¯­å¥æ ‡æ˜è¿”å›çš„æ•°æ®ç±»å‹ï¼Œè€Œä¸”åœ¨å‡½æ•°ä½“ä¸­å¿…é¡»ä½¿ç”¨RETURNè¯­å¥æ¥æ˜¾å¼æŒ‡å®šè¿”å›çš„å€¼ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹ä¸éœ€è¦ã€‚ å­˜å‚¨å‡½æ•°åªæ”¯æŒINå‚æ•°ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æ”¯æŒINå‚æ•°ã€OUTå‚æ•°ã€å’ŒINOUTå‚æ•°ã€‚ å­˜å‚¨å‡½æ•°åªèƒ½è¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹å¯ä»¥é€šè¿‡è®¾ç½®å¤šä¸ªOUTå‚æ•°æˆ–è€…INOUTå‚æ•°æ¥è¿”å›å¤šä¸ªç»“æœã€‚ å­˜å‚¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ç»“æœé›†å¹¶ä¸ä¼šè¢«æ˜¾ç¤ºåˆ°å®¢æˆ·ç«¯ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„ç»“æœé›†ä¼šè¢«æ˜¾ç¤ºåˆ°å®¢æˆ·ç«¯ã€‚ å­˜å‚¨å‡½æ•°ç›´æ¥åœ¨è¡¨è¾¾å¼ä¸­è°ƒç”¨ï¼Œè€Œå­˜å‚¨è¿‡ç¨‹åªèƒ½é€šè¿‡CALLè¯­å¥æ¥æ˜¾å¼è°ƒç”¨ã€‚ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:6:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#å­˜å‚¨è¿‡ç¨‹å’Œå­˜å‚¨å‡½æ•°çš„åŒºåˆ«"},{"categories":["mysql"],"content":" æ¸¸æ ‡æ¸¸æ ‡æ˜¯ä¸ºäº†æ–¹ä¾¿è®¿é—®ç»“æœé›†ä¸­çš„æŸä¸€æ¡è®°å½•ï¼Œå¯ä»¥ç†è§£æˆå¾ªç¯ã€‚å¦‚æœæŸä¸ªç»“æœé›†ä¸­æœ‰ 10 æ¡è®°å½•ï¼Œä½¿ç”¨æ¸¸æ ‡åï¼Œä¼šä¸€æ¡ä¸€æ¡çš„å»è®¿é—®è¿™ 10 æ¡è®°å½•ã€‚ æ¸¸æ ‡å¯ä»¥åœ¨å­˜å‚¨å‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹ä¸­ä½¿ç”¨ã€‚ cursor ä½¿ç”¨æ¸¸æ ‡åˆ†ä¸º 4 æ­¥ï¼š åˆ›å»ºæ¸¸æ ‡ï¼šDECLARE æ¸¸æ ‡åç§° CURSOR FOR æŸ¥è¯¢è¯­å¥; æ‰“å¼€æ¸¸æ ‡ï¼šOPEN æ¸¸æ ‡åç§°; é€šè¿‡æ¸¸æ ‡è®¿é—®è®°å½• å…³é—­æ¸¸æ ‡ï¼šCLOSE æ¸¸æ ‡åç§°; ä¸æ˜¾å¼çš„ä½¿ç”¨CLOSEè¯­å¥å…³é—­æ¸¸æ ‡çš„è¯ï¼Œåœ¨è¯¥å­˜å‚¨å‡½æ•°æˆ–å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œå®Œä¹‹åä¼šè‡ªåŠ¨å…³é—­æ¸¸æ ‡ã€‚ å¯ä»¥ä½¿ç”¨ğŸ‘‡æ¥è·å–ç»“æœé›†ä¸­çš„è®°å½•ï¼š FETCH æ¸¸æ ‡å INTO å˜é‡1, å˜é‡2, ... å˜é‡n ","date":"2020-10-08","objectID":"/mysql-stored-routine/:7:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#æ¸¸æ ‡"},{"categories":["mysql"],"content":" ç¤ºä¾‹ğŸ¤‘ä»¥ä¸‹åˆ›å»ºä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ï¼Œåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ä½¿ç”¨æ¸¸æ ‡ã€‚ åˆ›å»ºæ¸¸æ ‡t_cursorï¼Œæ¸¸æ ‡æ‰§è¡Œè¯­å¥ä¸º SELECT phone, name FROM tã€‚ DECLARE CONTINUE HANDLER FOR NOT FOUND å¤„ç†è¯­å¥; çš„ä½œç”¨æ˜¯ç»“æœé›†éå†ç»“æŸåä¼šè‡ªåŠ¨æ‰§è¡Œè¿™å¥ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨ WHILE å¾ªç¯éå†ï¼Œä½†æ˜¯ while æœ‰ä¸ªå¼Šç«¯æ˜¯éœ€è¦æå‰çŸ¥é“ç»“æŸæ¡ä»¶ï¼Œæ¯”å¦‚ç»“æœé›†çš„æ€»æ•°æ˜¯å¤šå°‘ã€‚è¿™æ ·å†™çš„å¥½å¤„æ˜¯ç›´æ¥éå†ï¼Œéå†ç»“æŸè‡ªåŠ¨å¤„ç†ï¼Œå°† done å˜é‡è®¾ç½®ä¸º 1ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦ done = 1 å°±è¯´æ˜éå†ç»“æŸäº†ï¼Œåˆ©ç”¨ LEAVE å…³é”®å­—è·³å‡ºå¾ªç¯ã€‚ CREATE PROCEDURE my_cursor() BEGIN DECLARE v_phone char(11); DECLARE v_name varchar(45); DECLARE done INT DEFAULT 0; DECLARE t_cursor CURSOR FOR SELECT `phone`, `name` FROM t; DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1; OPEN t_cursor; flag: LOOP FETCH t_cursor INTO v_phone, v_name; IF done = 1 THEN LEAVE flag; END IF; SELECT v_phone, v_name, done; END LOOP flag; CLOSE t_cursor; END EOF æ‰§è¡Œç»“æœ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:7:1","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#ç¤ºä¾‹-2"},{"categories":["mysql"],"content":" è§¦å‘å™¨å’Œäº‹ä»¶å­˜å‚¨ä¾‹ç¨‹æ˜¯éœ€è¦æ‰‹åŠ¨è°ƒç”¨çš„ï¼Œè€Œè§¦å‘å™¨å’Œäº‹ä»¶æ˜¯ MySQL æœåŠ¡å™¨åœ¨ç‰¹å®šæƒ…å†µä¸‹è‡ªåŠ¨è°ƒç”¨çš„ã€‚ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:8:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#è§¦å‘å™¨å’Œäº‹ä»¶"},{"categories":["mysql"],"content":" è§¦å‘å™¨åˆ›å»ºè§¦å‘å™¨ CREATE TRIGGER è§¦å‘å™¨å {BEFORE|AFTER} {INSERT|DELETE|UPDATE} ON è¡¨å FOR EACH ROW BEGIN è§¦å‘å™¨å†…å®¹ END MySQL ç›®å‰åªæ”¯æŒå¯¹INSERTã€DELETEã€UPDATEè¿™ä¸‰ç§ç±»å‹çš„è¯­å¥è®¾ç½®è§¦å‘å™¨ã€‚ FOR EACH ROW BEGIN ... ENDè¡¨ç¤ºå¯¹å…·ä½“è¯­å¥å½±å“çš„æ¯ä¸€æ¡è®°å½•éƒ½æ‰§è¡Œè§¦å‘å™¨å†…å®¹ã€‚ å¯¹äºINSERTè¯­å¥æ¥è¯´ï¼ŒFOR EACH ROWå½±å“çš„è®°å½•å°±æ˜¯å‡†å¤‡æ’å…¥çš„é‚£äº›æ–°è®°å½•ã€‚ å¯¹äºDELETEè¯­å¥å’ŒUPDATEè¯­å¥æ¥è¯´ï¼ŒFOR EACH ROWå½±å“çš„è®°å½•å°±æ˜¯ç¬¦åˆæ¡ä»¶çš„é‚£äº›è®°å½•ã€‚ é’ˆå¯¹æ¯ä¸€æ¡å—å½±å“çš„è®°å½•ï¼Œéœ€è¦ä¸€ç§è®¿é—®è¯¥è®°å½•ä¸­çš„å†…å®¹çš„æ–¹å¼ï¼ŒMySQLæä¾›äº†NEWå’ŒOLDä¸¤ä¸ªå•è¯æ¥åˆ†åˆ«ä»£è¡¨æ–°è®°å½•å’Œæ—§è®°å½•ï¼Œå®ƒä»¬åœ¨ä¸åŒè¯­å¥ä¸­çš„å«ä¹‰ä¸åŒï¼š å¯¹äºINSERTè¯­å¥è®¾ç½®çš„è§¦å‘å™¨æ¥è¯´ï¼ŒNEWä»£è¡¨å‡†å¤‡æ’å…¥çš„è®°å½•ï¼ŒOLDæ— æ•ˆã€‚ å¯¹äºDELETEè¯­å¥è®¾ç½®çš„è§¦å‘å™¨æ¥è¯´ï¼ŒOLDä»£è¡¨åˆ é™¤å‰çš„è®°å½•ï¼ŒNEWæ— æ•ˆã€‚ å¯¹äºUPDATEè¯­å¥è®¾ç½®çš„è§¦å‘å™¨æ¥è¯´ï¼ŒNEWä»£è¡¨ä¿®æ”¹åçš„è®°å½•ï¼ŒOLDä»£è¡¨ä¿®æ”¹å‰çš„è®°å½•ã€‚ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:9:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#è§¦å‘å™¨"},{"categories":["mysql"],"content":" ç¤ºä¾‹ğŸ¤¦â€â™‚ï¸ä»¥ä¸‹ç¤ºä¾‹ï¼Œå¯¹è¡¨ t åˆ›å»ºä¸€ä¸ª my_triggerè§¦å‘å™¨ï¼Œè¡¨ t æœ‰ä¸‰ä¸ªå­—æ®µï¼Œnameï¼Œphoneï¼Œmy_joinï¼Œå¯¹äºæ¯æ¡ insert çš„è¯­å¥ï¼Œåœ¨æ‰§è¡Œ insert ä¹‹å‰åˆ¤æ–­å¦‚æœ name = admin é‚£ä¹ˆå°†å³å°†æ’å…¥çš„ name å€¼æ”¹ä¸º validï¼Œå¦‚æœ name å€¼ä¸ºç©ºï¼Œå°†å³å°†æ’å…¥çš„ name å€¼æ”¹ä¸ºæ— åæ°ï¼Œé™¤æ­¤ä¹‹å¤–å°† name å’Œ phone æ‹¼æ¥åèµ‹ç»™ my_join å­—æ®µã€‚ CREATE TRIGGER my_trigger BEFORE INSERT ON t FOR EACH ROW BEGIN IF NEW.name = 'admin' THEN SET NEW.name = 'valid'; ELSEIF NEW.name = '' THEN SET NEW.name = 'æ— åæ°'; ELSE SET NEW.my_join = CONCAT(NEW.name, \"--\", NEW.phone); END IF; END EOF ç¤ºä¾‹æ¼”ç¤º CMD è¯´æ˜ SHOW TRIGGERS; æŸ¥çœ‹æ‰€æœ‰è§¦å‘å™¨ SHOW CREATE TRIGGER è§¦å‘å™¨å; æŸ¥çœ‹æŸä¸ªè§¦å‘å™¨ DROP TRIGGER è§¦å‘å™¨å; åˆ é™¤æŸä¸ªè§¦å‘å™¨ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:9:1","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#ç¤ºä¾‹-3"},{"categories":["mysql"],"content":" æ³¨æ„äº‹é¡¹ è§¦å‘å™¨å†…å®¹ä¸­ä¸èƒ½æœ‰è¾“å‡ºç»“æœé›†çš„è¯­å¥ã€‚ è§¦å‘å™¨å†…å®¹ä¸­NEWä»£è¡¨è®°å½•çš„åˆ—çš„å€¼å¯ä»¥è¢«æ›´æ”¹ï¼ŒOLDä»£è¡¨è®°å½•çš„åˆ—çš„å€¼æ— æ³•æ›´æ”¹ã€‚ åœ¨BEFOREè§¦å‘å™¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨SET NEW.åˆ—å = æŸä¸ªå€¼çš„å½¢å¼æ¥æ›´æ”¹å¾…æ’å…¥è®°å½•æˆ–è€…å¾…æ›´æ–°è®°å½•çš„æŸä¸ªåˆ—çš„å€¼ï¼Œä½†æ˜¯è¿™ç§æ“ä½œä¸èƒ½åœ¨AFTERè§¦å‘å™¨ä¸­ä½¿ç”¨ï¼Œå› ä¸ºåœ¨æ‰§è¡ŒAFTER è§¦å‘å™¨çš„å†…å®¹æ—¶è®°å½•å·²ç»è¢«æ’å…¥å®Œæˆæˆ–è€…æ›´æ–°å®Œæˆäº†ã€‚ å¦‚æœæˆ‘ä»¬çš„BEFOREè§¦å‘å™¨å†…å®¹æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°äº†é”™è¯¯ï¼Œé‚£è¿™ä¸ªè§¦å‘å™¨å¯¹åº”çš„å…·ä½“è¯­å¥å°†æ— æ³•æ‰§è¡Œï¼›å¦‚æœå…·ä½“çš„æ“ä½œè¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°äº†é”™è¯¯ï¼Œé‚£ä¸å®ƒå¯¹åº”çš„AFTERè§¦å‘å™¨çš„å†…å®¹å°†æ— æ³•æ‰§è¡Œã€‚ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:9:2","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#æ³¨æ„äº‹é¡¹"},{"categories":["mysql"],"content":" äº‹ä»¶äº‹ä»¶å¯ä»¥è®© MySQL æœåŠ¡å™¨åœ¨æŸä¸ªæ—¶é—´ç‚¹æˆ–è€…æ¯éš”ä¸€æ®µæ—¶é—´è‡ªåŠ¨åœ°æ‰§è¡Œä¸€äº›è¯­å¥ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySQLæœåŠ¡å™¨å¹¶ä¸ä¼šå¸®åŠ©æˆ‘ä»¬æ‰§è¡Œäº‹ä»¶ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯è¯¥åŠŸèƒ½ï¼š SET GLOBAL event_scheduler = ON; å¼€å¯äº‹ä»¶åŠŸèƒ½ CREATE EVENT äº‹ä»¶å ON SCHEDULE { AT æŸä¸ªç¡®å®šçš„æ—¶é—´ç‚¹| EVERY æœŸæœ›çš„æ—¶é—´é—´éš” [STARTS datetime][END datetime] } DO BEGIN å…·ä½“çš„è¯­å¥ END ","date":"2020-10-08","objectID":"/mysql-stored-routine/:10:0","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#äº‹ä»¶"},{"categories":["mysql"],"content":" æŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œ CREATE EVENT insert_t1_event ON SCHEDULE AT '2022-01-03 11:20:11' # æˆ–è€… AT DATE_ADD(NOW(), INTERVAL 2 DAY) DO BEGIN INSERT INTO t(phone, name) VALUES('15210214254', 'å®‹æ±Ÿ'); END ","date":"2020-10-08","objectID":"/mysql-stored-routine/:10:1","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#æŸä¸ªæ—¶é—´ç‚¹æ‰§è¡Œ"},{"categories":["mysql"],"content":" æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œ CREATE EVENT insert_t1 ON SCHEDULE EVERY 1 HOUR STARTS '2019-09-04 15:48:54' ENDS '2019-09-16 15:48:54' DO BEGIN INSERT INTO t(phone, name) VALUES('15210214254', 'å®‹æ±Ÿ'); END åœ¨åˆ›å»ºå¥½äº‹ä»¶ä¹‹åï¼Œåˆ°äº†æŒ‡å®šæ—¶é—´ï¼ŒMySQL æœåŠ¡å™¨ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚ CMD è¯´æ˜ SHOW EVENTS; æŸ¥çœ‹æ‰€æœ‰äº‹ä»¶ SHOW CREATE EVENT äº‹ä»¶å; æŸ¥çœ‹æŸä¸ªäº‹ä»¶ DROP EVENT äº‹ä»¶å; åˆ é™¤æŸä¸ªäº‹ä»¶ ","date":"2020-10-08","objectID":"/mysql-stored-routine/:10:2","series":null,"tags":["mysql"],"title":"mysql å­˜å‚¨ç¨‹åº","uri":"/mysql-stored-routine/#æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œ"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":"xiaobinqt,","date":"2020-09-15","objectID":"/classical-chinese-sentence/","series":[],"tags":["å¤‡å¿˜"],"title":"ç»å…¸åå¥å¤‡å¿˜","uri":"/classical-chinese-sentence/"},{"categories":["è¯»ä¹¦ä¸ç”Ÿæ´»"],"content":" æ³•è«å¦‚æ˜¾ï¼Œè€Œæœ¯ä¸æ¬²è§ æ³•ä¸€å®šè¦è®©äººæ˜äº†ï¼Œè€Œæœ¯ä¸€å®šä¸èƒ½è¢«äººè§‰å¯Ÿã€‚ ã€ŠéŸ©éå­Â·éš¾ä¸‰ã€‹ ä¸€åˆ‡ä¼—ç”Ÿï¼Œçš†å…·å¦‚æ¥æ™ºæ…§å¾·ç›¸ï¼Œåªå› å¦„æƒ³æ‰§ç€ï¼Œè€Œä¸å¾å¾— æ‰€æœ‰ä¼—ç”Ÿéƒ½æ˜¯å¹³ç­‰æ— å¼‚ï¼Œçš†æœ‰ä½›æ€§ï¼Œéƒ½å¯ä»¥æˆä½›ã€‚æˆ‘ä»¬å› æœ‰å¦„æƒ³æ‰§ç€ï¼ŒçœŸå¿ƒè¢«æ ¹æœ¬çƒ¦æ¼ï¼Œè´ªç‹ç—´ä¸‰æ¯’é®è”½äº†ï¼Œåšå‡ºæ¥çš„äº‹éƒ½æ˜¯é¢ å€’çš„ï¼Œæ‰€ä»¥æ²‰æ²¦è‹¦æµ·ï¼Œåœ¨å…­é“è½®å›ã€‚ ã€Šåä¸¥ç»ã€‹ å¾é—»ä½›è¯´ä»¥èº«ä¸ºå¦„ï¼Œè€Œä»¥åˆ©äººä¸ºæ€¥ã€‚ä½¿å…¶çœŸèº«å°šåœ¨ï¼Œè‹Ÿåˆ©äºä¸–ï¼ŒçŠ¹æ¬²å‰²æˆªï¼Œå†µæ­¤é“œåƒï¼Œå²‚æœ‰æ‰€æƒœå“‰ã€‚ å¿è¾ˆå‹¿ä»¥æ¯ä½›ä¸ºç–‘ã€‚å¤«ä½›ï¼Œä»¥å–„é“åŒ–äººï¼Œè‹Ÿå¿—äºå–„ï¼Œæ–¯å¥‰ä½›çŸ£ã€‚å½¼é“œåƒå²‚æ‰€è°“ä½›è€¶ï¼Ÿä¸”å¾é—»ä½›åœ¨åˆ©äººï¼Œè™½å¤´ç›®çŠ¹èˆä»¥å¸ƒæ–½ã€‚è‹¥æœ•èº«å¯ä»¥æµæ°‘ï¼Œäº¦éæ‰€æƒœä¹Ÿã€‚ã€‚ äº”ä»£å‘¨ä¸–å®— ","date":"2020-09-15","objectID":"/classical-chinese-sentence/:0:0","series":[],"tags":["å¤‡å¿˜"],"title":"ç»å…¸åå¥å¤‡å¿˜","uri":"/classical-chinese-sentence/#"},{"categories":["golang"],"content":"xiaobinqt,","date":"2020-08-15","objectID":"/func-receive-value-pointer/","series":["golang"],"tags":["golang"],"title":"Go æ–¹æ³•å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…çš„åŒºåˆ«","uri":"/func-receive-value-pointer/"},{"categories":["golang"],"content":" å¦‚æœæ–¹æ³•çš„æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹ï¼Œæ— è®ºè°ƒç”¨è€…æ˜¯å¯¹è±¡è¿˜æ˜¯å¯¹è±¡æŒ‡é’ˆï¼Œä¿®æ”¹çš„éƒ½æ˜¯å¯¹è±¡æœ¬èº«ï¼Œä¼šå½±å“è°ƒç”¨è€…ï¼› å¦‚æœæ–¹æ³•çš„æ¥æ”¶è€…æ˜¯å€¼ç±»å‹ï¼Œæ— è®ºè°ƒç”¨è€…æ˜¯å¯¹è±¡è¿˜æ˜¯å¯¹è±¡æŒ‡é’ˆï¼Œä¿®æ”¹çš„éƒ½æ˜¯å¯¹è±¡çš„å‰¯æœ¬ï¼Œä¸å½±å“è°ƒç”¨è€…ï¼› package main import \"fmt\" type Person struct { age int } // å¦‚æœå®ç°äº†æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„æ–¹æ³•ï¼Œä¼šéšå«åœ°ä¹Ÿå®ç°äº†æ¥æ”¶è€…æ˜¯å€¼ç±»å‹çš„ IncrAgePointer æ–¹æ³•ã€‚ //ä¼šä¿®æ”¹ age çš„å€¼ func (p *Person) IncrAgePointer() { p.age += 1 } // å¦‚æœå®ç°äº†æ¥æ”¶è€…æ˜¯å€¼ç±»å‹çš„æ–¹æ³•ï¼Œä¼šéšå«åœ°ä¹Ÿå®ç°äº†æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„ IncrAgeValue æ–¹æ³•ã€‚ //ä¸ä¼šä¿®æ”¹ age çš„å€¼ func (p Person) IncrAgeValue() { p.age += 1 } // å¦‚æœå®ç°äº†æ¥æ”¶è€…æ˜¯å€¼ç±»å‹çš„æ–¹æ³•ï¼Œä¼šéšå«åœ°ä¹Ÿå®ç°äº†æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„ GetAge æ–¹æ³•ã€‚ func (p Person) GetAge() int { return p.age } func main() { // p1 æ˜¯å€¼ç±»å‹ p1 := Person{age: 10} // å€¼ç±»å‹ è°ƒç”¨æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„æ–¹æ³• p1.IncrAgePointer() fmt.Println(p1.GetAge()) // å€¼ç±»å‹ è°ƒç”¨æ¥æ”¶è€…æ˜¯å€¼ç±»å‹çš„æ–¹æ³• p1.IncrAgeValue() fmt.Println(p1.GetAge()) fmt.Println(\"------------------------\") //p2 æ˜¯æŒ‡é’ˆç±»å‹ p2 := \u0026Person{age: 20} // æŒ‡é’ˆç±»å‹ è°ƒç”¨æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„æ–¹æ³• p2.IncrAgePointer() fmt.Println(p2.GetAge()) // æŒ‡é’ˆç±»å‹ è°ƒç”¨æ¥æ”¶è€…æ˜¯å€¼ç±»å‹çš„æ–¹æ³• p2.IncrAgeValue() fmt.Println(p2.GetAge()) } è¾“å‡ºç»“æœä¸ºï¼š 11 11 ------------------------ 21 21 ä¸Šè¿°ä»£ç ä¸­ï¼Œå®ç°äº†æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„ IncrAgePointer å‡½æ•°ï¼Œä¸ç®¡è°ƒç”¨è€…æ˜¯å€¼ç±»å‹è¿˜æ˜¯æŒ‡é’ˆç±»å‹ï¼Œéƒ½å¯ä»¥è°ƒç”¨ IncrAgePointer æ–¹æ³•ï¼Œå¹¶ä¸”å®ƒçš„ age å€¼éƒ½æ”¹å˜äº†ã€‚ å®ç°äº†æ¥æ”¶è€…æ˜¯æŒ‡é’ˆç±»å‹çš„ IncrAgeValue å‡½æ•°ï¼Œä¸ç®¡è°ƒç”¨è€…æ˜¯å€¼ç±»å‹è¿˜æ˜¯æŒ‡é’ˆç±»å‹ï¼Œéƒ½å¯ä»¥è°ƒç”¨ IncrAgeValue æ–¹æ³•ï¼Œå¹¶ä¸”å®ƒçš„ age å€¼éƒ½æ²¡æœ‰è¢«æ”¹å˜ã€‚ é€šå¸¸ä½¿ç”¨æŒ‡é’ˆç±»å‹ä½œä¸ºæ–¹æ³•çš„æ¥æ”¶è€…çš„ç†ç”±ï¼š ä½¿ç”¨æŒ‡é’ˆç±»å‹èƒ½å¤Ÿä¿®æ”¹è°ƒç”¨è€…çš„å€¼ã€‚ ä½¿ç”¨æŒ‡é’ˆç±»å‹å¯ä»¥é¿å…åœ¨æ¯æ¬¡è°ƒç”¨æ–¹æ³•æ—¶å¤åˆ¶è¯¥å€¼ï¼Œåœ¨å€¼çš„ç±»å‹ä¸ºå¤§å‹ç»“æ„ä½“æ—¶ï¼Œè¿™æ ·åšä¼šæ›´åŠ é«˜æ•ˆã€‚ ","date":"2020-08-15","objectID":"/func-receive-value-pointer/:0:0","series":["golang"],"tags":["golang"],"title":"Go æ–¹æ³•å€¼æ¥æ”¶è€…å’ŒæŒ‡é’ˆæ¥æ”¶è€…çš„åŒºåˆ«","uri":"/func-receive-value-pointer/#"},{"categories":["golang"],"content":"Linux ç¯å¢ƒä¸‹å®‰è£… Go,Linux Platform Install Go,å¦‚ä½•åœ¨ Linux ç¯å¢ƒä¸‹å®‰è£… Go,go,golang","date":"2020-08-12","objectID":"/linux-platform-install-go/","series":null,"tags":["golang"],"title":"Linux ç¯å¢ƒä¸‹å®‰è£… Go","uri":"/linux-platform-install-go/"},{"categories":["golang"],"content":" å®‰è£…åœ¨å®˜ç½‘ https://go.dev/dl/ï¼Œæ ¹æ®è‡ªå·±çš„ç¯å¢ƒä¸‹è½½å¯¹åº”çš„å®‰è£…åŒ…ï¼š å®˜ç½‘å®‰è£…åŒ…åˆ—è¡¨ å¯ä»¥ç›´æ¥ç”¨ wget ä¸‹è½½ ä¸‹è½½å®‰è£…åŒ… æ‰§è¡Œ tar è§£å‹åˆ° /usr/loaclç›®å½•ä¸‹ï¼ˆå®˜æ–¹æ¨èï¼‰ï¼Œå¾—åˆ° go æ–‡ä»¶å¤¹ç­‰ã€‚ tar -C /usr/local -zxvf go1.17.7.linux-amd64.tar.gz go1.17.7.linux-amd64.tar.gz æ¢æˆä½ è‡ªå·±çš„ go ç‰ˆæœ¬ã€‚ æ·»åŠ  /usr/loacl/go/bin ç›®å½•åˆ° PATH å˜é‡ä¸­ã€‚æ·»åŠ åˆ° /etc/profile æˆ– $HOME/.profile éƒ½å¯ä»¥ã€‚ vim /etc/profile # åœ¨æœ€åä¸€è¡Œæ·»åŠ  export GOROOT=/usr/local/go export PATH=$PATH:$GOROOT/bin æ·»åŠ ç¯å¢ƒå˜é‡ ä¿å­˜é€€å‡ºåsourceä¸€ä¸‹ source /etc/profile go env ","date":"2020-08-12","objectID":"/linux-platform-install-go/:1:0","series":null,"tags":["golang"],"title":"Linux ç¯å¢ƒä¸‹å®‰è£… Go","uri":"/linux-platform-install-go/#å®‰è£…"},{"categories":["golang"],"content":" Goç¯å¢ƒå˜é‡ $GOROOT è¡¨ç¤º Go åœ¨ä½ çš„ç”µè„‘ä¸Šçš„å®‰è£…ä½ç½®ï¼Œå€¼ä¸€èˆ¬éƒ½æ˜¯ $HOME/goï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥å®‰è£…åœ¨åˆ«çš„åœ°æ–¹ã€‚ $GOARCH è¡¨ç¤ºç›®æ ‡æœºå™¨çš„å¤„ç†å™¨æ¶æ„ï¼Œå®ƒçš„å€¼å¯ä»¥æ˜¯ 386ã€amd64 æˆ– armã€‚ $GOOS è¡¨ç¤ºç›®æ ‡æœºå™¨çš„æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„å€¼å¯ä»¥æ˜¯ darwinã€freebsdã€linux æˆ– windowsã€‚ $GOBIN è¡¨ç¤ºç¼–è¯‘å™¨å’Œé“¾æ¥å™¨çš„å®‰è£…ä½ç½®ï¼Œé»˜è®¤æ˜¯ $GOROOT/binï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯ Go 1.0.3 åŠä»¥åçš„ç‰ˆæœ¬ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä½ å¯ä»¥å°†å®ƒçš„å€¼è®¾ç½®ä¸ºç©ºï¼ŒGo å°†ä¼šä½¿ç”¨é»˜è®¤å€¼ã€‚ $GOPATH é»˜è®¤é‡‡ç”¨å’Œ $GOROOT ä¸€æ ·çš„å€¼ï¼Œä½†ä» Go 1.1 ç‰ˆæœ¬å¼€å§‹ï¼Œä½ å¿…é¡»ä¿®æ”¹ä¸ºå…¶å®ƒè·¯å¾„ã€‚å®ƒå¯ä»¥åŒ…å«å¤šä¸ªåŒ…å« Go è¯­è¨€æºç æ–‡ä»¶ã€åŒ…æ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ï¼Œè€Œè¿™äº›è·¯å¾„ä¸‹åˆå¿…é¡»åˆ†åˆ«åŒ…å«ä¸‰ä¸ªè§„å®šçš„ç›®å½•ï¼šsrcã€pkg å’Œ binï¼Œè¿™ä¸‰ä¸ªç›®å½•åˆ†åˆ«ç”¨äºå­˜æ”¾æºç æ–‡ä»¶ã€åŒ…æ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶ã€‚ $GOARM ä¸“é—¨é’ˆå¯¹åŸºäº arm æ¶æ„çš„å¤„ç†å™¨ï¼Œå®ƒçš„å€¼å¯ä»¥æ˜¯ 5~7ï¼Œé»˜è®¤ä¸º 6ã€‚ $GOMAXPROCS ç”¨äºè®¾ç½®åº”ç”¨ç¨‹åºå¯ä½¿ç”¨çš„å¤„ç†å™¨ä¸ªæ•°ä¸æ ¸æ•°ã€‚ ","date":"2020-08-12","objectID":"/linux-platform-install-go/:2:0","series":null,"tags":["golang"],"title":"Linux ç¯å¢ƒä¸‹å®‰è£… Go","uri":"/linux-platform-install-go/#goç¯å¢ƒå˜é‡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,WARNING: bridge-nf-call-iptables is disabled","date":"2020-08-06","objectID":"/bridge-nf-call-iptables-is-disabled/","series":null,"tags":["docker"],"title":"WARNING: bridge-nf-call-iptables is disabled","uri":"/bridge-nf-call-iptables-is-disabled/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é—®é¢˜ä»Šå¤©åœ¨ä½¿ç”¨ docker æ—¶å‡ºç°å¦‚ä¸‹é—®é¢˜ï¼š WARNING: bridge-nf-call-iptables is disabled warning æˆ‘çš„ç³»ç»Ÿç‰ˆæœ¬æ˜¯CentOS 7.9ï¼Œ ç³»ç»Ÿç‰ˆæœ¬ ","date":"2020-08-06","objectID":"/bridge-nf-call-iptables-is-disabled/:1:0","series":null,"tags":["docker"],"title":"WARNING: bridge-nf-call-iptables is disabled","uri":"/bridge-nf-call-iptables-is-disabled/#é—®é¢˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è§£å†³åŠæ³• vim /etc/sysctl.conf åœ¨ /etc/sysctl.conf ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 æ‰§è¡Œ sysctl -p å³å¯ã€‚ ","date":"2020-08-06","objectID":"/bridge-nf-call-iptables-is-disabled/:2:0","series":null,"tags":["docker"],"title":"WARNING: bridge-nf-call-iptables is disabled","uri":"/bridge-nf-call-iptables-is-disabled/#è§£å†³åŠæ³•"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,","date":"2020-07-12","objectID":"/git-common-question/","series":null,"tags":["git"],"title":"Git å¸¸è§é—®é¢˜","uri":"/git-common-question/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" unable to auto-detect email addressè¿™ä¸ªé—®é¢˜ç½‘ä¸Šå›ºå®šçš„è§£å†³æ–¹æ¡ˆæ˜¯å…¨å±€è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ï¼š git config --global user.email \"you@example.com\" git config --global user.name \"Your Name\" å…¶å®è¿™ä¸ªé—®é¢˜ä¹Ÿå¯ä»¥åœ¨æäº¤æ—¶å•ç‹¬è®¾ç½®ï¼š git -c \"user.name=Your Name\" -c \"user.email=Your email\" commit \"Your commit message\" ","date":"2020-07-12","objectID":"/git-common-question/:1:0","series":null,"tags":["git"],"title":"Git å¸¸è§é—®é¢˜","uri":"/git-common-question/#unable-to-auto-detect-email-address"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æŒ‡å®šç§é’¥æ–‡ä»¶ GIT_SSH_COMMAND='ssh -i \"/data/flexcloud/vscode/.ssh/id_rsa\"' git push origin master ","date":"2020-07-12","objectID":"/git-common-question/:2:0","series":null,"tags":["git"],"title":"Git å¸¸è§é—®é¢˜","uri":"/git-common-question/#æŒ‡å®šç§é’¥æ–‡ä»¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" are you sure you want to continue connecting å¦‚ä½•æƒ³è¦å¿½ç•¥è¿™ä¸ªæç¤ºï¼Œå¯ä»¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥ğŸ‘‡ GIT_SSH_COMMAND='ssh -o \"UserKnownHostsFile=/dev/null\" -o \"StrictHostKeyChecking=no\"' git push origin master ","date":"2020-07-12","objectID":"/git-common-question/:3:0","series":null,"tags":["git"],"title":"Git å¸¸è§é—®é¢˜","uri":"/git-common-question/#are-you-sure-you-want-to-continue-connecting"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Override configured user for a single git commit ","date":"2020-07-12","objectID":"/git-common-question/:4:0","series":null,"tags":["git"],"title":"Git å¸¸è§é—®é¢˜","uri":"/git-common-question/#å‚è€ƒ"},{"categories":["golang"],"content":"go interface,golang ä½¿ç”¨ interface,æ¥å£å’Œå®ä¾‹çš„ç›¸äº’è½¬æ¢,æ¥å£çš„å®ç°,æ¥å£æ˜¯å¦å®ç°äº†æŸä¸ªæ¥å£","date":"2020-06-18","objectID":"/go-interface/","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/"},{"categories":["golang"],"content":" å®šä¹‰ interface å¯ä»¥è¡¨ç¤ºä»»æ„ä¸€ç§ç±»å‹ interface æ˜¯æ¥å£çš„æ–¹æ³•é›†åˆï¼Œåªè¦å®ç°äº†æ¥å£ä¸­çš„æ‰€æœ‰æ–¹æ³•ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ç°äº†è¿™ä¸ªæ¥å£ ","date":"2020-06-18","objectID":"/go-interface/:1:0","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#å®šä¹‰"},{"categories":["golang"],"content":" ç”¨é€”","date":"2020-06-18","objectID":"/go-interface/:2:0","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#ç”¨é€”"},{"categories":["golang"],"content":" å®ç°å¤šæ€ package main import ( \"fmt\" ) type animal interface { Say() string Color() string } type Cat struct{} func (c Cat) Say() string { return \"i am a cat\" } func (c Cat) Color() string { return \"i am black\" } type Dog struct{} func (d Dog) Say() string { return \"i am a dog\" } func (d Dog) Color() string { return \"i am white\" } type Car struct{} func introduceSelf(input animal) { fmt.Println(input.Say() + \" and \" + input.Color()) } func main() { c := Cat{} d := Dog{} introduceSelf(c) introduceSelf(d) // car æ²¡æœ‰å®ç° animal æ¥å£ //car := Car{} //introduceSelf(car) } ","date":"2020-06-18","objectID":"/go-interface/:2:1","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#å®ç°å¤šæ€"},{"categories":["golang"],"content":" éšè—å…·ä½“å®ç°ä»¥ go ä¸­çš„ context åŒ…ä¸ºä¾‹ï¼Œcontext.Context() æ˜¯ä¸€ä¸ªæ¥å£ï¼š // A Context carries a deadline, a cancellation signal, and other values across // API boundaries. // // Context's methods may be called by multiple goroutines simultaneously. type Context interface { // Deadline returns the time when work done on behalf of this context // should be canceled. Deadline returns ok==false when no deadline is // set. Successive calls to Deadline return the same results. Deadline() (deadline time.Time, ok bool) // Done returns a channel that's closed when work done on behalf of this // context should be canceled. Done may return nil if this context can // never be canceled. Successive calls to Done return the same value. // The close of the Done channel may happen asynchronously, // after the cancel function returns. // // WithCancel arranges for Done to be closed when cancel is called; // WithDeadline arranges for Done to be closed when the deadline // expires; WithTimeout arranges for Done to be closed when the timeout // elapses. // // Done is provided for use in select statements: // // // Stream generates values with DoSomething and sends them to out // // until DoSomething returns an error or ctx.Done is closed. // func Stream(ctx context.Context, out chan\u003c- Value) error { // for { // v, err := DoSomething(ctx) // if err != nil { // return err // } // select { // case \u003c-ctx.Done(): // return ctx.Err() // case out \u003c- v: // } // } // } // // See https://blog.golang.org/pipelines for more examples of how to use // a Done channel for cancellation. Done() \u003c-chan struct{} // If Done is not yet closed, Err returns nil. // If Done is closed, Err returns a non-nil error explaining why: // Canceled if the context was canceled // or DeadlineExceeded if the context's deadline passed. // After Err returns a non-nil error, successive calls to Err return the same error. Err() error // Value returns the value associated with this context for key, or nil // if no value is associated with key. Successive calls to Value with // the same key returns the same result. // // Use context values only for request-scoped data that transits // processes and API boundaries, not for passing optional parameters to // functions. // // A key identifies a specific value in a Context. Functions that wish // to store values in Context typically allocate a key in a global // variable then use that key as the argument to context.WithValue and // Context.Value. A key can be any type that supports equality; // packages should define keys as an unexported type to avoid // collisions. // // Packages that define a Context key should provide type-safe accessors // for the values stored using that key: // // // Package user defines a User type that's stored in Contexts. // package user // // import \"context\" // // // User is the type of value stored in the Contexts. // type User struct {...} // // // key is an unexported type for keys defined in this package. // // This prevents collisions with keys defined in other packages. // type key int // // // userKey is the key for user.User values in Contexts. It is // // unexported; clients use user.NewContext and user.FromContext // // instead of using this key directly. // var userKey key // // // NewContext returns a new Context that carries value u. // func NewContext(ctx context.Context, u *User) context.Context { // return context.WithValue(ctx, userKey, u) // } // // // FromContext returns the User value stored in ctx, if any. // func FromContext(ctx context.Context) (*User, bool) { // u, ok := ctx.Value(userKey).(*User) // return u, ok // } Value(key interface{}) interface{} } WithCancel å’Œ WithValue è¿”å›çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ contextï¼Œä½†æ˜¯å„è‡ªè¿”å›çš„ Context ç»“æ„ä½“åˆä¸æ˜¯ä¸€æ ·çš„ï¼š WithCancel è¿”å›ç»“æ„ä½“ä¸º cancelCtx WithValue è¿”å›çš„ç»“æ„ä½“ä¸º valueCtx è¿™æ ·çš„è¯å°½ç®¡è¿”å›çš„éƒ½æ˜¯ contextï¼Œä½†æ˜¯å…·ä½“å®ç°å´ä¸ä¸€æ ·ï¼Œå®ç°äº†åŠŸèƒ½çš„å¤šæ ·åŒ–ã€‚ ","date":"2020-06-18","objectID":"/go-interface/:2:2","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#éšè—å…·ä½“å®ç°"},{"categories":["golang"],"content":" è§£è€¦ä¾èµ–ä¸‹é¢çš„ç¤ºä¾‹ğŸ‘‡ï¼Œå¦‚æœç¼“å­˜ä» Redis æ¢æˆäº† MemoryCache, æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ MemoryCache çš„å®ç°å’Œåˆå§‹åŒ–çš„åœ°æ–¹ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹ Redis çš„å®ç°ï¼Œè¿™æ ·å°±è§£è€¦äº†ä¾èµ–ï¼Œæ›´åŠ çµæ´»ã€‚ package main type Cache interface { GetValue(key string) string } // å‡è®¾è¿™æ˜¯rediså®¢æˆ·ç«¯ type Redis struct { } func (r Redis) GetValue(key string) string { panic(\"not implement\") } // å‡è®¾è¿™æ˜¯è‡ªå®šä¹‰çš„ä¸€ä¸ªç¼“å­˜å™¨ type MemoryCache struct { } func (m MemoryCache) GetValue(key string) string { panic(\"not implement\") } // é€šè¿‡æ¥å£å®ç°ï¼šæ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™çš„åŠŸèƒ½ func AuthExpire(token string, cache Cache) bool { res := cache.GetValue(token) if res == \"\" { return false } else { // æ­£å¸¸å¤„ç† return true } } func main() { token := \"test\" cache := Redis{} // cache := MemoryCache{},ä¿®æ”¹è¿™ä¸€å¥å³å¯ AuthExpire(token, cache) } ","date":"2020-06-18","objectID":"/go-interface/:2:3","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#è§£è€¦ä¾èµ–"},{"categories":["golang"],"content":" FAQ","date":"2020-06-18","objectID":"/go-interface/:3:0","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#faq"},{"categories":["golang"],"content":" var _ Interface = (*Type)(nil) var _ Person = (*Student)(nil) ä»¥ä¸Šâ˜ï¸çš„è¯­å¥ï¼šå°†ç©ºå€¼ nil è½¬æ¢ä¸º *Student ç±»å‹ï¼Œå†è½¬æ¢ä¸º Person æ¥å£ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œè¯´æ˜ Student å¹¶æ²¡æœ‰å®ç° Person æ¥å£çš„æ‰€æœ‰æ–¹æ³•ã€‚ è¿™æ˜¯ç¡®ä¿æ¥å£è¢«å®ç°å¸¸ç”¨çš„æ–¹å¼ã€‚å³åˆ©ç”¨å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œç¡®ä¿ struct Student å®ç°äº†æ¥å£ Personã€‚è¿™æ · IDE å’Œç¼–è¯‘æœŸé—´å°±å¯ä»¥æ£€æŸ¥ï¼Œè€Œä¸æ˜¯ç­‰åˆ°ä½¿ç”¨çš„æ—¶å€™ã€‚ ","date":"2020-06-18","objectID":"/go-interface/:3:1","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#var-_-interface--typenil"},{"categories":["golang"],"content":" å®ä¾‹ã€æ¥å£ç›¸äº’è½¬æ¢å®ä¾‹å¯ä»¥å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºæ¥å£ï¼Œæ¥å£ä¹Ÿå¯ä»¥å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºå®ä¾‹ã€‚ package main import \"fmt\" type Student struct { name string age int } type Person interface { getName() string } func (stu *Student) getName() string { return stu.name } func (stu *Student) getAge() int { return stu.age } func main() { var s *Student = \u0026Student{ name: \"narcissus\", age: 20, } var p Person = \u0026Student{ name: \"Tom\", age: 18, } stu := p.(*Student) // æ¥å£è½¬ä¸ºå®ä¾‹ fmt.Println(stu.getName(), \"---\", stu.getAge()) var pp Person = (*Student)(s) // å®ä¾‹è½¬ä¸ºæ¥å£ // var _ Person = s // å®ä¾‹è½¬ä¸ºæ¥å£ fmt.Println(pp.getName()) // è¿™é‡Œä¸èƒ½è°ƒç”¨ pp.getAge() å› ä¸º Person æ¥å£ä¸­æ²¡æœ‰ getAge() æ–¹æ³• } é€šè¿‡è¿è¡Œåçš„æ‰“å°ç»“æœğŸ‘‡å¯çŸ¥ï¼Œç»“æœå¤åˆé¢„æœŸã€‚ è¿è¡Œæ‰“å° ","date":"2020-06-18","objectID":"/go-interface/:3:2","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#å®ä¾‹æ¥å£ç›¸äº’è½¬æ¢"},{"categories":["golang"],"content":" æ¥å£æ˜¯å¦å®ç°äº†æŸä¸ªæ¥å£http/server.go ä¸­æœ‰è¿™æ ·çš„åˆ¤æ–­è¯­å¥ï¼š rw, err := l.Accept() if err != nil { select { case \u003c-srv.getDoneChan(): return ErrServerClosed default: } if ne, ok := err.(net.Error); ok \u0026\u0026 ne.Temporary() { if tempDelay == 0 { tempDelay = 5 * time.Millisecond } else { tempDelay *= 2 } if max := 1 * time.Second; tempDelay \u003e max { tempDelay = max } srv.logf(\"http: Accept error: %v; retrying in %v\", err, tempDelay) time.Sleep(tempDelay) continue } return err } ne, ok := err.(net.Error) å°±æ˜¯åˆ¤æ–­ err å˜é‡æ˜¯ä¸æ˜¯ err.Error æ¥å£ç±»å‹ï¼š // An Error represents a network error. type Error interface { error Timeout() bool // Is the error a timeout? Temporary() bool // Is the error temporary? } ä»¥ä¸‹ç¤ºä¾‹è‡ªå®šäº†ä¸€ä¸ª MyError æ¥å£éªŒè¯ä»¥ä¸Šæ¨æ–­ï¼š package main import \"fmt\" type MyError interface { Msg() string } type myErrorStruct struct { errMsg string } func (e *myErrorStruct) Msg() string { return e.errMsg } func myNew(msg string) MyError { return \u0026myErrorStruct{errMsg: msg} } func main() { err1 := fmt.Errorf(\"error\") e1, ok1 := err1.(MyError) fmt.Println(\"e1 = \", e1, \"ok1 = \", ok1) err2 := myNew(\"æˆ‘æ˜¯ä¸€ä¸ªé”™è¯¯\") e2, ok2 := err2.(MyError) fmt.Printf(\"e2 = %#v ,,ok2: %t\", e2, ok2) } ä» ğŸ‘‡ è¿è¡Œæ‰“å°ç»“æœæ¥çœ‹ï¼Œç¬¦åˆé¢„æœŸã€‚ ","date":"2020-06-18","objectID":"/go-interface/:3:3","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#æ¥å£æ˜¯å¦å®ç°äº†æŸä¸ªæ¥å£"},{"categories":["golang"],"content":" å‚è€ƒ Consider adding â€œvar _ Interface = (*Type)(nil)â€ to the list of recommendations ç±»ä¼¼var _ PeerPicker = (*HTTPPool)(nil)è¿™ç§è®¾è®¡ç›®çš„æ˜¯ä»€ä¹ˆ ","date":"2020-06-18","objectID":"/go-interface/:4:0","series":null,"tags":["golang"],"title":"Go interface","uri":"/go-interface/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,docker swarm","date":"2020-06-14","objectID":"/docker-swarm/","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä½œä¸ºå®¹å™¨é›†ç¾¤ç®¡ç†å™¨ï¼ŒSwarm æœ€å¤§çš„ä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯åŸç”Ÿæ”¯æŒ Docker APIã€‚å„ç§åŸºäºæ ‡å‡† API çš„å·¥å…·æ¯”å¦‚ Composeã€Docker SDKã€å„ç§ç®¡ç†è½¯ä»¶ï¼Œç”šè‡³ Docker æœ¬èº«ç­‰éƒ½å¯ä»¥å¾ˆå®¹æ˜“çš„ä¸ Swarm è¿›è¡Œé›†æˆï¼Œè¿™å¤§å¤§æ–¹ä¾¿äº†ç”¨æˆ·å°†åŸå…ˆåŸºäºå•èŠ‚ç‚¹çš„ç³»ç»Ÿç§»æ¤åˆ° Swarm ä¸Šã€‚åŒæ—¶ Swarm å†…ç½®äº†å¯¹ Docker ç½‘ç»œæ’ä»¶çš„æ”¯æŒï¼Œè¿™æ ·å°±å¯ä»¥å¾ˆå®¹æ˜“åœ°éƒ¨ç½²è·¨ä¸»æœºçš„å®¹å™¨é›†ç¾¤æœåŠ¡ã€‚ ä¸»ä»ç»“æ„ Swarm é‡‡ç”¨äº†å…¸å‹çš„ä¸»ä»ç»“æ„ï¼Œé€šè¿‡ Raft åè®®æ¥åœ¨å¤šä¸ªç®¡ç†èŠ‚ç‚¹Managerä¸­å®ç°å…±è¯†ã€‚å·¥ä½œèŠ‚ç‚¹Worker ä¸Šè¿è¡Œ agent æ¥å—ç®¡ç†èŠ‚ç‚¹çš„ç»Ÿä¸€ç®¡ç†å’Œä»»åŠ¡åˆ†é…ã€‚ç”¨æˆ·æäº¤æœåŠ¡è¯·æ±‚åªéœ€è¦å‘ç»™ç®¡ç†èŠ‚ç‚¹å³å¯ï¼Œç®¡ç†èŠ‚ç‚¹ä¼šæŒ‰ç…§è°ƒåº¦ç­–ç•¥åœ¨é›†ç¾¤ä¸­åˆ†é…èŠ‚ç‚¹æ¥è¿è¡ŒæœåŠ¡ç›¸å…³çš„ä»»åŠ¡ã€‚ ","date":"2020-06-14","objectID":"/docker-swarm/:0:0","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åŸºæœ¬æ¦‚å¿µ","date":"2020-06-14","objectID":"/docker-swarm/:1:0","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#åŸºæœ¬æ¦‚å¿µ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Swarmé›†ç¾¤Swarmé›†ç¾¤Clusterä¸ºä¸€ç»„è¢«ç»Ÿä¸€ç®¡ç†èµ·æ¥çš„ Docker ä¸»æœºã€‚é›†ç¾¤æ˜¯ Swarm æ‰€ç®¡ç†çš„å¯¹è±¡ã€‚è¿™äº›ä¸»æœºé€šè¿‡ Docker å¼•æ“çš„ Swarm æ¨¡å¼ç›¸äº’æ²Ÿé€šï¼Œå…¶ä¸­éƒ¨åˆ†ä¸»æœºå¯èƒ½ä½œä¸ºç®¡ç†èŠ‚ç‚¹managerå“åº”å¤–éƒ¨çš„ç®¡ç†è¯·æ±‚ï¼Œå…¶ä»–ä¸»æœºä½œä¸ºå·¥ä½œèŠ‚ç‚¹worker æ¥å®é™…è¿è¡Œ Docker å®¹å™¨ã€‚åŒä¸€ä¸ªä¸»æœºä¹Ÿå¯ä»¥æ—¢ä½œä¸ºç®¡ç†èŠ‚ç‚¹ï¼ŒåŒæ—¶ä½œä¸ºå·¥ä½œèŠ‚ç‚¹ã€‚ å½“ä½¿ç”¨ Swarm é›†ç¾¤æ—¶ï¼Œé¦–å…ˆå®šä¹‰ä¸€ä¸ªæœåŠ¡ï¼ˆæŒ‡å®šçŠ¶æ€ã€å¤åˆ¶ä¸ªæ•°ã€ç½‘ç»œã€å­˜å‚¨ã€æš´éœ²ç«¯å£ç­‰ï¼‰ï¼Œç„¶åé€šè¿‡ç®¡ç†èŠ‚ç‚¹å‘å‡ºå¯åŠ¨æœåŠ¡çš„æŒ‡ä»¤ï¼Œç®¡ç†èŠ‚ç‚¹éšåä¼šæŒ‰ç…§æŒ‡å®šçš„æœåŠ¡è§„åˆ™è¿›è¡Œè°ƒåº¦ï¼Œåœ¨é›†ç¾¤ä¸­å¯åŠ¨èµ·æ¥æ•´ä¸ªæœåŠ¡ï¼Œå¹¶ç¡®ä¿å®ƒæ­£å¸¸è¿è¡Œã€‚ ","date":"2020-06-14","objectID":"/docker-swarm/:1:1","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#swarmé›†ç¾¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" èŠ‚ç‚¹èŠ‚ç‚¹Nodeæ˜¯ Swarm é›†ç¾¤çš„æœ€å°èµ„æºå•ä½ã€‚æ¯ä¸ªèŠ‚ç‚¹å®é™…ä¸Šéƒ½æ˜¯ä¸€å° Docker ä¸»æœºã€‚Swarm é›†ç¾¤ä¸­èŠ‚ç‚¹åˆ†ä¸ºä¸¤ç§ï¼š ç®¡ç†èŠ‚ç‚¹manager nodeï¼šè´Ÿè´£å“åº”å¤–éƒ¨å¯¹é›†ç¾¤çš„æ“ä½œè¯·æ±‚ï¼Œå¹¶ç»´æŒé›†ç¾¤ä¸­èµ„æºï¼Œåˆ†å‘ä»»åŠ¡ç»™å·¥ä½œèŠ‚ç‚¹ã€‚åŒæ—¶ï¼Œå¤šä¸ªç®¡ç†èŠ‚ç‚¹ä¹‹é—´é€šè¿‡Raftåè®®æ„æˆå…±è¯†ã€‚ä¸€èˆ¬æ¨èæ¯ä¸ªé›†ç¾¤è®¾ç½®5ä¸ªæˆ–7ä¸ªç®¡ç†èŠ‚ç‚¹ã€‚ å·¥ä½œèŠ‚ç‚¹worker nodeï¼šè´Ÿè´£æ‰§è¡Œç®¡ç†èŠ‚ç‚¹å®‰æ’çš„å…·ä½“ä»»åŠ¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œç®¡ç†èŠ‚ç‚¹è‡ªèº«ä¹ŸåŒæ—¶æ˜¯å·¥ä½œèŠ‚ç‚¹ã€‚æ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šè¿è¡Œä»£ç†ï¼ˆagentï¼‰æ¥æ±‡æŠ¥ä»»åŠ¡å®Œæˆæƒ…å†µã€‚ å¯ä»¥é€šè¿‡docker node promoteå‘½ä»¤æ¥æå‡ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸ºç®¡ç†èŠ‚ç‚¹ï¼›æˆ–è€…é€šè¿‡docker node demoteå‘½ä»¤æ¥å°†ä¸€ä¸ªç®¡ç†èŠ‚ç‚¹é™çº§ä¸ºå·¥ä½œèŠ‚ç‚¹ã€‚ ","date":"2020-06-14","objectID":"/docker-swarm/:1:2","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#èŠ‚ç‚¹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æœåŠ¡ä¸€ä¸ªæœåŠ¡Serviceå¯ä»¥ç”±è‹¥å¹²ä¸ªä»»åŠ¡ç»„æˆï¼Œæ¯ä¸ªä»»åŠ¡ä¸ºæŸä¸ªå…·ä½“çš„åº”ç”¨ã€‚æœåŠ¡è¿˜åŒ…æ‹¬å¯¹åº”çš„å­˜å‚¨ã€ç½‘ç»œã€ç«¯å£æ˜ å°„ã€å‰¯æœ¬ä¸ªæ•°ã€è®¿é—®é…ç½®ã€å‡çº§é…ç½®ç­‰é™„åŠ å‚æ•°ã€‚ ä¸€èˆ¬æ¥è¯´ï¼ŒæœåŠ¡éœ€è¦é¢å‘ç‰¹å®šçš„åœºæ™¯ï¼Œä¾‹å¦‚ä¸€ä¸ªå…¸å‹çš„ Web æœåŠ¡å¯èƒ½åŒ…æ‹¬å‰ç«¯åº”ç”¨ã€åç«¯åº”ç”¨ï¼Œä»¥åŠæ•°æ®åº“ç­‰ã€‚è¿™äº›åº”ç”¨éƒ½å±äºè¯¥æœåŠ¡çš„ç®¡ç†èŒƒç•´ã€‚ Swarm é›†ç¾¤ä¸­æœåŠ¡ç±»å‹ä¹Ÿåˆ†ä¸ºä¸¤ç§ï¼ˆå¯ä»¥é€šè¿‡-modeæŒ‡å®šï¼‰ï¼š å¤åˆ¶æœåŠ¡replicated servicesæ¨¡å¼ï¼šé»˜è®¤æ¨¡å¼ï¼Œæ¯ä¸ªä»»åŠ¡åœ¨é›†ç¾¤ä¸­ä¼šå­˜åœ¨è‹¥å¹²å‰¯æœ¬ï¼Œè¿™äº›å‰¯æœ¬ä¼šè¢«ç®¡ç†èŠ‚ç‚¹æŒ‰ç…§è°ƒåº¦ç­–ç•¥åˆ†å‘åˆ°é›†ç¾¤ä¸­çš„å·¥ä½œèŠ‚ç‚¹ä¸Šã€‚æ­¤æ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨-replicaså‚æ•°è®¾ç½®å‰¯æœ¬æ•°é‡ã€‚ å…¨å±€æœåŠ¡global servicesæ¨¡å¼ï¼šè°ƒåº¦å™¨å°†åœ¨æ¯ä¸ªå¯ç”¨èŠ‚ç‚¹éƒ½æ‰§è¡Œä¸€ä¸ªç›¸åŒçš„ä»»åŠ¡ã€‚è¯¥æ¨¡å¼é€‚åˆè¿è¡ŒèŠ‚ç‚¹çš„æ£€æŸ¥ï¼Œå¦‚ç›‘æ§åº”ç”¨ç­‰ ","date":"2020-06-14","objectID":"/docker-swarm/:1:3","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#æœåŠ¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä»»åŠ¡ä»»åŠ¡æ˜¯ Swarm é›†ç¾¤ä¸­æœ€å°çš„è°ƒåº¦å•ä½ï¼Œå³ä¸€ä¸ªæŒ‡å®šçš„åº”ç”¨å®¹å™¨ã€‚ä¾‹å¦‚ä»…ä»…è¿è¡Œå‰ç«¯ä¸šåŠ¡çš„å‰ç«¯å®¹å™¨ã€‚ä»»åŠ¡ä»ç”Ÿå‘½å‘¨æœŸä¸Šå°†å¯èƒ½å¤„äºåˆ›å»ºNEWã€ç­‰å¾…PENDING ã€åˆ†é…ASSIGNEDã€æ¥å—ACCEPTEDã€å‡†å¤‡PREPARINGã€å¼€å§‹STARTINGã€è¿è¡ŒRUNNINGã€å®ŒæˆCOMPLETEã€å¤±è´¥FAILED ã€å…³é—­SHUTDOWNã€æ‹’ç»REJECTEDã€å­¤ç«‹ORPHANEDç­‰ä¸åŒçŠ¶æ€ã€‚ Swarm é›†ç¾¤ä¸­çš„ç®¡ç†èŠ‚ç‚¹ä¼šæŒ‰ç…§è°ƒåº¦è¦æ±‚å°†ä»»åŠ¡åˆ†é…åˆ°å·¥ä½œèŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚æŒ‡å®šå‰¯æœ¬ä¸º 2 æ—¶ï¼Œå¯èƒ½ä¼šè¢«åˆ†é…åˆ°ä¸¤ä¸ªä¸åŒçš„å·¥ä½œèŠ‚ç‚¹ä¸Šã€‚ä¸€æ—¦å½“æŸä¸ªä»»åŠ¡è¢«åˆ†é…åˆ°ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼Œå°†æ— æ³•è¢«è½¬ç§»åˆ°å¦å¤–çš„å·¥ä½œèŠ‚ç‚¹ï¼Œå³ Swarm ä¸­çš„ä»»åŠ¡ä¸æ”¯æŒè¿ç§»ã€‚ ","date":"2020-06-14","objectID":"/docker-swarm/:1:4","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#ä»»åŠ¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¤–éƒ¨è®¿é—®Swarm é›†ç¾¤ä¸­çš„æœåŠ¡è¦è¢«é›†ç¾¤å¤–éƒ¨è®¿é—®ï¼Œå¿…é¡»è¦èƒ½å…è®¸ä»»åŠ¡çš„å“åº”ç«¯å£æ˜ å°„å‡ºæ¥ã€‚Swarm ä¸­æ”¯æŒå…¥å£è´Ÿè½½å‡è¡¡ingress load balancingçš„æ˜ å°„æ¨¡å¼ã€‚è¯¥æ¨¡å¼ä¸‹ï¼Œæ¯ä¸ªæœåŠ¡éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ª[å…¬å¼€ç«¯å£]^( PublishedPort)ï¼Œè¯¥ç«¯å£åœ¨é›†ç¾¤ä¸­ä»»æ„èŠ‚ç‚¹ä¸Šéƒ½å¯ä»¥è®¿é—®åˆ°ï¼Œå¹¶è¢«ä¿ç•™ç»™è¯¥æœåŠ¡ã€‚ å½“æœ‰è¯·æ±‚å‘é€åˆ°ä»»æ„èŠ‚ç‚¹çš„å…¬å¼€ç«¯å£æ—¶ï¼Œè¯¥èŠ‚ç‚¹è‹¥å¹¶æ²¡æœ‰å®é™…æ‰§è¡ŒæœåŠ¡ç›¸å…³çš„å®¹å™¨ï¼Œåˆ™ä¼šé€šè¿‡è·¯ç”±æœºåˆ¶å°†è¯·æ±‚è½¬å‘ç»™å®é™…æ‰§è¡Œäº†æœåŠ¡å®¹å™¨çš„å·¥ä½œèŠ‚ç‚¹ã€‚ ","date":"2020-06-14","objectID":"/docker-swarm/:1:5","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#å¤–éƒ¨è®¿é—®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ­å»ºé›†ç¾¤æˆ‘ç”¨ VMWare æ­å»ºäº† 2 å°ä¸»æœºï¼ŒIP åˆ†åˆ«ä¸º 192.168.48.125 å’Œ 192.168.48.8ï¼Œç°åœ¨å°†192.168.48.128ä½œä¸ºç®¡ç†èŠ‚ç‚¹ï¼Œå°†192.168.48.8ä½œä¸ºå·¥ä½œèŠ‚ç‚¹ã€‚ åœ¨é›†ç¾¤ä¸­ï¼Œæ—¶é—´åŒæ­¥æ˜¯å¾ˆé‡è¦ï¼Œå¯ä»¥ä½¿ç”¨ntpå…ˆåŒæ­¥æ—¶é—´ã€‚ yum -y install ntp systemctl enable ntpd systemctl start ntpd ","date":"2020-06-14","objectID":"/docker-swarm/:2:0","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#æ­å»ºé›†ç¾¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆ›å»ºé›†ç¾¤ docker swarm init --advertise-addr 192.168.48.125 swarm init æ³¨æ„è¿”å›çš„ token ä¸²ï¼Œè¿™æ˜¯é›†ç¾¤çš„å”¯ä¸€ idï¼ŒåŠ å…¥é›†ç¾¤çš„å„ä¸ªèŠ‚ç‚¹å°†éœ€è¦è¿™ä¸ªä¿¡æ¯ã€‚ é»˜è®¤çš„ç®¡ç†æœåŠ¡ç«¯å£ä¸º 2377ï¼Œéœ€è¦èƒ½è¢«å·¥ä½œèŠ‚ç‚¹è®¿é—®åˆ°ï¼›å¦å¤–ï¼Œä¸ºäº†æ”¯æŒé›†ç¾¤çš„æˆå‘˜å‘ç°å’Œå¤–éƒ¨æœåŠ¡æ˜ å°„ï¼Œè¿˜éœ€è¦å†æ‰€æœ‰èŠ‚ç‚¹ä¸Šå¼€å¯ 7946 TCP/UDP ç«¯å£å’Œ 4789 UDP ç«¯å£ã€‚ å¼€å‘ç«¯å£ å…³äº Centos7.x å¼€æ”¾ç«¯å£å¯ä»¥å‚è€ƒhttps://blog.csdn.net/qq_39007083/article/details/106875997 ã€‚ ","date":"2020-06-14","objectID":"/docker-swarm/:2:1","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#åˆ›å»ºé›†ç¾¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åŠ å…¥é›†ç¾¤åœ¨æ‰€æœ‰è¦åŠ å…¥é›†ç¾¤çš„æ™®é€šèŠ‚ç‚¹ä¸Šé¢æ‰§è¡Œswarm joinå‘½ä»¤ï¼Œè¡¨ç¤ºæŠŠè¿™å°æœºå™¨åŠ å…¥æŒ‡å®šé›†ç¾¤å½“ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨192.168.48.8å·¥ä½œèŠ‚ç‚¹ä¸Šï¼Œå°†å…¶åŠ å…¥åˆšåˆ›å»ºçš„é›†ç¾¤ï¼Œåˆ™å¯ä»¥é€šè¿‡ï¼š docker swarm join --token SWMTKN-1-15692f3ho3t3oi68ljnv0fi5nxerox2jsuplmhv0qzerzqpfh1-er9ufvvh4bym5o3iifummtvnf 192.168.48.125:2377 åŠ å…¥é›†ç¾¤ æ­¤æ—¶åœ¨ç®¡ç†èŠ‚ç‚¹å¯ä»¥çœ‹åˆ°åˆšåŠ è¿›æ¥çš„192.168.48.8å·¥ä½œèŠ‚ç‚¹ï¼š å·¥ä½œèŠ‚ç‚¹åŠ å…¥æˆåŠŸ ","date":"2020-06-14","objectID":"/docker-swarm/:2:2","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#åŠ å…¥é›†ç¾¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä½¿ç”¨é›†ç¾¤æœåŠ¡æ­å»ºæˆåŠŸçš„é›†ç¾¤ï¼Œå¯ä»¥ä½¿ç”¨ä½¿ç”¨docker serviceå‘½ä»¤ä½¿ç”¨ Swarm æä¾›çš„æœåŠ¡ã€‚ å¯ä»¥åœ¨ç®¡ç†èŠ‚ç‚¹ä¸Šæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æ¥å¿«é€Ÿåˆ›å»ºä¸€ä¸ªåº”ç”¨æœåŠ¡ï¼Œå¹¶åˆ¶å®šæœåŠ¡çš„å¤åˆ¶ä»½æ•°ä¸º 2ã€‚å¦‚ä¸‹å‘½ä»¤æ‰€ç¤ºï¼Œé»˜è®¤ä¼šè‡ªåŠ¨æ£€æŸ¥ç¡®è®¤æœåŠ¡çŠ¶æ€éƒ½æ­£å¸¸ï¼š docker service create --replicas 2 --name ping_app debian:jessie ping docker.com docker service create åœ¨ç®¡ç†èŠ‚ç‚¹ä¸Šä½¿ç”¨ docker service ls å¯ä»¥æŸ¥çœ‹é›†ç¾¤ä¸­æœåŠ¡æƒ…å†µï¼š service ls å¯ä»¥çœ‹åˆ°ï¼Œç®¡ç†èŠ‚ç‚¹å’Œå·¥ä½œèŠ‚ç‚¹ä¸Šéƒ½è¿è¡Œäº†ä¸€ä¸ªå®¹å™¨ï¼Œé•œåƒä¸ºdebian:jessieï¼š service ps ","date":"2020-06-14","objectID":"/docker-swarm/:2:3","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#ä½¿ç”¨é›†ç¾¤æœåŠ¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ‰©å±•æœåŠ¡å¯ä»¥é€šè¿‡ docker service scale \u003cSERVICE-ID\u003e=\u003cNUMBER-OF-TASKS\u003e å‘½ä»¤æ¥å¯¹æœåŠ¡è¿›è¡Œä¼¸ç¼©ï¼Œä¾‹å¦‚å°†æœåŠ¡å¤åˆ¶ä¸ªæ•°ä» 2 æ”¹ä¸º 1ã€‚ æ‰©å±•æœåŠ¡ ","date":"2020-06-14","objectID":"/docker-swarm/:2:4","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#æ‰©å±•æœåŠ¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¦»å¼€é›†ç¾¤èŠ‚ç‚¹å¯ä»¥åœ¨ä»»ä½•æ—¶å€™é€šè¿‡swarm leaveå‘½ä»¤ç¦»å¼€ä¸€ä¸ªé›†ç¾¤ã€‚å‘½ä»¤æ ¼å¼ä¸ºdockerswarm leave [OPTIONS]ï¼Œæ”¯æŒ-f, --forceæ„å‘³ç€å¼ºåˆ¶ç¦»å¼€é›†ç¾¤ã€‚ ","date":"2020-06-14","objectID":"/docker-swarm/:2:5","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#ç¦»å¼€é›†ç¾¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤Docker é€šè¿‡ service å‘½ä»¤æ¥ç®¡ç†åº”ç”¨æœåŠ¡ï¼Œä¸»è¦åŒ…æ‹¬createã€inspectã€logsã€lsã€psã€rmã€rollbackã€scaleã€updateç­‰è‹¥å¹²å­å‘½ä»¤ï¼š å¸¸ç”¨å‘½ä»¤ ","date":"2020-06-14","objectID":"/docker-swarm/:2:6","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#å¸¸ç”¨å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ Docker Swarm æ·±å…¥æµ…å‡º docker-swarm èŠ‚ç‚¹å¢åŠ ã€åˆ é™¤ã€æƒé™æå‡ã€é™ä½ã€æœåŠ¡éƒ¨ç½²ã€é…ç½®å¯è§†åŒ–ç•Œé¢ã€stackç­‰ä¸€ç³»åˆ—æ“ä½œ https://docs.docker.com/engine/swarm/ ","date":"2020-06-14","objectID":"/docker-swarm/:3:0","series":null,"tags":["docker"],"title":"Docker Swarm ç¬”è®°","uri":"/docker-swarm/#å‚è€ƒ"},{"categories":["golang"],"content":"go,continue,break,goto labelçš„åŒºåˆ«,Golang","date":"2020-05-16","objectID":"/break-continue-goto-label/","series":null,"tags":["golang"],"title":"Go breakï¼Œcontinueï¼Œgoto label çš„åŒºåˆ«","uri":"/break-continue-goto-label/"},{"categories":["golang"],"content":" åœ¨å…¶ä»–è¯­è¨€ï¼Œæ¯”å¦‚ php ä¸­å¯ä»¥ç›´æ¥åœ¨ break å’Œ continue ååŠ  num ï¼Œæ¯”å¦‚ break 2æˆ– continue 2ã€‚ break num æ˜¯ç»“æŸå¤–å±‚ç¬¬ num å±‚æ•´ä¸ªå¾ªç¯ä½“ï¼Œcontinue num æ˜¯ç»“æŸå¤–å±‚ç¬¬ num å±‚å•æ¬¡å¾ªç¯ã€‚ go ä¸­ä¸èƒ½ç›´æ¥åœ¨å…³é”®å­—ååŠ  num ï¼Œä½†æ˜¯å¯ä»¥ç”¨ label å…³é”®ä»£æ›¿ numã€‚æ”¯æŒ goto labelï¼Œä¹Ÿå¯ä»¥ç”¨ break label å’Œ continue labelã€‚ goto å¯ä»¥è·³åˆ°ä»£ç çš„ä»»ä½•åœ°æ–¹ï¼Œæ¯”å¦‚è·³åˆ° A å¤„ï¼Œå†ä» A ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚break label å¦‚æœè·³åˆ°äº†å¾ªç¯å¤–ï¼Œä¸ä¼šå†æ‰§è¡Œå¾ªç¯ã€‚continue label å¦‚æœè·³å‡ºäº†å¾ªç¯ï¼Œä¼šå†æ‰§è¡Œå¾ªç¯ã€‚ ","date":"2020-05-16","objectID":"/break-continue-goto-label/:0:0","series":null,"tags":["golang"],"title":"Go breakï¼Œcontinueï¼Œgoto label çš„åŒºåˆ«","uri":"/break-continue-goto-label/#"},{"categories":["golang"],"content":" continue label package main import ( \"fmt\" \"math\" ) func main() { // æ‰¾å‡º int åˆ‡ç‰‡çš„æœ€å°å€¼ var matrix = []int{10, 2, 4, 0} var min = math.MinInt64 next: for _, v := range matrix { for _, v1 := range matrix { if v \u003e v1 { continue next // ç»ˆæ­¢å½“å‰å¾ªç¯ï¼Œè·³åˆ° label ç»§ç»­ä¸‹ä¸€æ¬¡å¾ªç¯ } } min = v } fmt.Println(\"æœ€å°å€¼ä¸º: \", min) } ","date":"2020-05-16","objectID":"/break-continue-goto-label/:1:0","series":null,"tags":["golang"],"title":"Go breakï¼Œcontinueï¼Œgoto label çš„åŒºåˆ«","uri":"/break-continue-goto-label/#continue-label"},{"categories":["golang"],"content":" break labelğŸ‘‡ ä»¥ä¸‹ä¾‹å­ï¼Œè™½ç„¶ break è·³å‡ºå¾ªç¯åˆ° label å¤„, label åœ¨ for å¾ªç¯ä¸Šï¼Œä½†æ˜¯ä¸ä¼šå†æ‰§è¡Œ for å¾ªç¯ï¼Œç›´æ¥æ‰§è¡Œfmt.Println()ã€‚ package main import ( \"fmt\" \"math\" ) func main() { // è·å– index 2 çš„å€¼ï¼Œè¿™é‡Œä½¿ç”¨ 2 å±‚å¾ªç¯ä¸»è¦æ˜¯ä¸ºäº†è¯´æ˜é—®é¢˜ var matrix = []int{10, 2, 4, 0} var index2Val = math.MinInt64 next: for _, v := range matrix { fmt.Println(v) for index, v1 := range matrix { index2Val = v1 if index == 2 { break next } } } fmt.Println(\"index 3 å€¼ä¸º: \", index2Val) } ","date":"2020-05-16","objectID":"/break-continue-goto-label/:2:0","series":null,"tags":["golang"],"title":"Go breakï¼Œcontinueï¼Œgoto label çš„åŒºåˆ«","uri":"/break-continue-goto-label/#break-label"},{"categories":["golang"],"content":" goto labeléå¿…è¦ä¸ä½¿ç”¨ï¼Œå¯ä»¥è·³åˆ°ä»»ä½•åœ°æ–¹ã€‚ package main import ( \"fmt\" \"math\" ) func main() { var matrix = []int{10, 2, 4, 0} var index2Val = math.MinInt64 for _, v := range matrix { fmt.Println(v) for index, v1 := range matrix { index2Val = v1 if index == 2 { goto next } } } fmt.Println(\"index 3 å€¼ä¸º: \", index2Val) next: fmt.Println(\"goto this....\") } ","date":"2020-05-16","objectID":"/break-continue-goto-label/:3:0","series":null,"tags":["golang"],"title":"Go breakï¼Œcontinueï¼Œgoto label çš„åŒºåˆ«","uri":"/break-continue-goto-label/#goto-label"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,docker rootç”¨æˆ·æ‰§è¡Œ","date":"2020-05-06","objectID":"/docker-summary-of-common-usage/","series":null,"tags":["docker","å¤‡å¿˜"],"title":"Docker å¤‡å¿˜","uri":"/docker-summary-of-common-usage/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" root ç”¨æˆ·æ‰§è¡Œæœ‰æ—¶è¿›å…¥å®¹å™¨åï¼Œç”¨æˆ·å°±æ˜¯å˜æˆé root ç”¨æˆ·ï¼Œè¿™ç§æ—¶å€™åˆæ²¡æœ‰å¯†ç ï¼Œåœ¨æ‰§è¡Œä¸€äº›æ“ä½œçš„æ—¶å€™å°±ä¼šéå¸¸ä¸æ–¹ä¾¿ï¼Œè¿™æ˜¯å¯ä»¥ç”¨ -u root æ¥æŒ‡å®šç”¨æˆ·ã€‚ érootç”¨æˆ· æ‰§è¡Œç®€å•å‘½ä»¤å¯ä»¥è¿™æ ·ğŸ‘‡ å›¾01 å¦‚æœéœ€è¦è¿›å…¥å®¹å™¨ï¼Œå¯ä»¥è¿™æ ·ğŸ‘‡ docker exec -u root -it å®¹å™¨å bash #æˆ–è€… docker exec -u root -it å®¹å™¨å sh å›¾02 ","date":"2020-05-06","objectID":"/docker-summary-of-common-usage/:1:0","series":null,"tags":["docker","å¤‡å¿˜"],"title":"Docker å¤‡å¿˜","uri":"/docker-summary-of-common-usage/#root-ç”¨æˆ·æ‰§è¡Œ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä»“åº“å’Œæ³¨å†ŒæœåŠ¡å™¨æœ‰æ—¶å€™ä¼šæŠŠä»“åº“ï¼ˆRepositoryï¼‰å’Œä»“åº“æ³¨å†ŒæœåŠ¡å™¨ï¼ˆRegistryï¼‰æ··ä¸ºä¸€è°ˆï¼Œå¹¶ä¸ä¸¥æ ¼åŒºåˆ†ã€‚å®é™…ä¸Šï¼Œä»“åº“æ³¨å†ŒæœåŠ¡å™¨ä¸Šå¾€å¾€å­˜æ”¾ç€å¤šä¸ªä»“åº“ï¼Œæ¯ä¸ªä»“åº“ä¸­åˆåŒ…å«äº†å¤šä¸ªé•œåƒï¼Œæ¯ä¸ªé•œåƒæœ‰ä¸åŒçš„æ ‡ç­¾ï¼ˆtagï¼‰ã€‚ ","date":"2020-05-06","objectID":"/docker-summary-of-common-usage/:2:0","series":null,"tags":["docker","å¤‡å¿˜"],"title":"Docker å¤‡å¿˜","uri":"/docker-summary-of-common-usage/#ä»“åº“å’Œæ³¨å†ŒæœåŠ¡å™¨"},{"categories":["golang"],"content":"xiaobinqt,go select ç”¨æ³•,go select é˜»å¡,å¦‚ä½•ä½¿ç”¨ go select,å¦‚ä½•è·³å‡º go select, nil é€šé“å¦‚ä½•å¤„ç†","date":"2020-04-15","objectID":"/go-select/","series":null,"tags":["golang","go-select"],"title":"Go select ç”¨æ³•ç®€è¿°","uri":"/go-select/"},{"categories":["golang"],"content":" select åŠŸèƒ½åœ¨å¤šä¸ªé€šé“ä¸Šè¿›è¡Œè¯»æˆ–å†™æ“ä½œï¼Œè®©å‡½æ•°å¯ä»¥å¤„ç†å¤šä¸ªäº‹æƒ…ï¼Œä½† 1 æ¬¡åªå¤„ç† 1 ä¸ªã€‚select æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š æ¯æ¬¡æ‰§è¡Œ select ï¼Œéƒ½ä¼šåªæ‰§è¡Œå…¶ä¸­ 1 ä¸ª case æˆ–è€…æ‰§è¡Œ default è¯­å¥ã€‚ å½“æ²¡æœ‰ case æˆ–è€… default å¯ä»¥æ‰§è¡Œæ—¶ï¼Œselect åˆ™é˜»å¡ï¼Œç­‰å¾…ç›´åˆ°æœ‰ 1 ä¸ª case å¯ä»¥æ‰§è¡Œã€‚ å½“æœ‰å¤šä¸ª case å¯ä»¥æ‰§è¡Œæ—¶ï¼Œåˆ™éšæœºé€‰æ‹© 1 ä¸ª case æ‰§è¡Œã€‚ caseåé¢è·Ÿçš„å¿…é¡»æ˜¯è¯»æˆ–è€…å†™é€šé“çš„æ“ä½œï¼Œå¦åˆ™ç¼–è¯‘å‡ºé”™ã€‚ ç”±selectå’Œcaseç»„æˆï¼Œdefaultä¸æ˜¯å¿…é¡»çš„ã€‚ package main import \"fmt\" func main() { readCh := make(chan int, 1) writeCh := make(chan int, 1) y := 1 select { case x := \u003c-readCh: fmt.Printf(\"Read %d\\n\", x) case writeCh \u003c- y: fmt.Printf(\"Write %d\\n\", y) default: fmt.Println(\"Do what you want\") } } æˆ‘ä»¬åˆ›å»ºäº†readChå’ŒwriteCh2ä¸ªé€šé“ï¼š readChä¸­æ²¡æœ‰æ•°æ®ï¼Œæ‰€ä»¥case x := \u003c-readChè¯»ä¸åˆ°æ•°æ®ï¼Œæ‰€ä»¥è¿™ä¸ªcaseä¸èƒ½æ‰§è¡Œã€‚ writeChæ˜¯å¸¦ç¼“å†²åŒºçš„é€šé“ï¼Œå®ƒé‡Œé¢æ˜¯ç©ºçš„ï¼Œå¯ä»¥å†™å…¥1ä¸ªæ•°æ®ï¼Œæ‰€ä»¥case writeCh \u003c- yå¯ä»¥æ‰§è¡Œã€‚ æœ‰caseå¯ä»¥æ‰§è¡Œï¼Œæ‰€ä»¥defaultä¸ä¼šæ‰§è¡Œã€‚ è¿™ä¸ªæµ‹è¯•çš„ç»“æœæ˜¯ Î» go run t.go Write 1 ","date":"2020-04-15","objectID":"/go-select/:1:0","series":null,"tags":["golang","go-select"],"title":"Go select ç”¨æ³•ç®€è¿°","uri":"/go-select/#select-åŠŸèƒ½"},{"categories":["golang"],"content":" ç”¨æ‰“è±†è±†å®è·µ selectæœ‰å¥è¯è¯´ï¼Œâ€œåƒé¥­ç¡è§‰æ‰“è±†è±†â€ï¼Œè¿™ä¸€å¥è¯é‡ŒåŒ…å«äº†3ä»¶äº‹ï¼š å¦ˆå¦ˆå–Šä½ åƒé¥­ï¼Œä½ å»åƒé¥­ã€‚ æ—¶é—´åˆ°äº†ï¼Œè¦ç¡è§‰ã€‚ æ²¡äº‹åšï¼Œæ‰“è±†è±†ã€‚ åœ¨Golangé‡Œï¼Œselect å°±æ˜¯å¹²è¿™ä¸ªäº‹çš„ï¼šåˆ°åƒé¥­äº†å»åƒé¥­ï¼Œè¯¥ç¡è§‰äº†å°±ç¡è§‰ï¼Œæ²¡äº‹å¹²å°±æ‰“è±†è±†ã€‚ æˆ‘ä»¬çœ‹çœ‹selectæ€ä¹ˆå®ç°æ‰“è±†è±†ï¼šeat()å‡½æ•°ä¼šå¯åŠ¨1ä¸ªåç¨‹ï¼Œè¯¥åç¨‹å…ˆç¡å‡ ç§’ï¼Œäº‹ä»¶ä¸å®šï¼Œç„¶åå–Šä½ åƒé¥­ï¼Œmain()å‡½æ•°ä¸­çš„sleepæ˜¯ä¸ªå®šæ—¶å™¨ï¼Œæ¯3ç§’å–Šä½ åƒ1æ¬¡é¥­ï¼Œselectåˆ™å¤„ç†3ç§æƒ…å†µï¼š ä»eatChä¸­è¯»åˆ°æ•°æ®ï¼Œä»£è¡¨æœ‰äººå–Šæˆ‘åƒé¥­ï¼Œæˆ‘è¦åƒé¥­äº†ã€‚ ä»sleep.Cä¸­è¯»åˆ°æ•°æ®ï¼Œä»£è¡¨é—¹é’Ÿæ—¶é—´åˆ°äº†ï¼Œæˆ‘è¦ç¡è§‰ã€‚ defaultæ˜¯ï¼Œæ²¡äººå–Šæˆ‘åƒé¥­ï¼Œä¹Ÿä¸åˆ°æ—¶é—´ç¡è§‰ï¼Œæˆ‘å°±æ‰“è±†è±†ã€‚ package main import ( \"fmt\" \"math/rand\" \"time\" ) func eat() chan string { out := make(chan string) go func() { rand.Seed(time.Now().UnixNano()) time.Sleep(time.Duration(rand.Intn(5)) * time.Second) out \u003c- \"Mom call you eating\" close(out) }() return out } func main() { eatCh := eat() sleep := time.NewTimer(time.Second * 3) select { case s := \u003c-eatCh: fmt.Println(s) case \u003c-sleep.C: fmt.Println(\"Time to sleep\") default: fmt.Println(\"Beat DouDou\") } } ç”±äºå‰2ä¸ªcaseéƒ½è¦ç­‰å¾…ä¸€ä¼šï¼Œæ‰€ä»¥éƒ½ä¸èƒ½æ‰§è¡Œï¼Œæ‰€ä»¥æ‰§è¡Œdefaultï¼Œè¿è¡Œç»“æœä¸€ç›´æ˜¯æ‰“è±†è±†ï¼š Î» go run t.go Beat DouDou ç°åœ¨ä¸æ‰“è±†è±†äº†ï¼ŒæŠŠdefaultçš„é€»è¾‘åˆ æ‰ï¼Œå¤šè¿è¡Œå‡ æ¬¡ï¼Œæœ‰æ—¶å€™ä¼šåƒé¥­ï¼Œæœ‰æ—¶å€™ä¼šç¡è§‰ï¼Œæ¯”å¦‚è¿™æ ·ï¼š Î» go run x.go Mom call you eating Î» go run x.go Time to sleep Î» go run x.go Time to sleep ","date":"2020-04-15","objectID":"/go-select/:2:0","series":null,"tags":["golang","go-select"],"title":"Go select ç”¨æ³•ç®€è¿°","uri":"/go-select/#ç”¨æ‰“è±†è±†å®è·µ-select"},{"categories":["golang"],"content":" nilé€šé“æ°¸è¿œé˜»å¡å½“caseä¸Šè¯»ä¸€ä¸ªé€šé“æ—¶ï¼Œå¦‚æœè¿™ä¸ªé€šé“æ˜¯nilï¼Œåˆ™è¯¥caseæ°¸è¿œé˜»å¡ã€‚ è¿™ä¸ªåŠŸèƒ½æœ‰1ä¸ªå¦™ç”¨ï¼Œselecté€šå¸¸å¤„ç†çš„æ˜¯å¤šä¸ªé€šé“ï¼Œå½“æŸä¸ªè¯»é€šé“å…³é—­äº†ï¼Œä½†ä¸æƒ³selectå†ç»§ç»­å…³æ³¨æ­¤caseï¼Œç»§ç»­å¤„ç†å…¶ä»–caseï¼ŒæŠŠè¯¥é€šé“è®¾ç½®ä¸ºnilå³å¯ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªåˆå¹¶ç¨‹åºç­‰å¾…ä¸¤ä¸ªè¾“å…¥é€šé“éƒ½å…³é—­åæ‰é€€å‡ºçš„ä¾‹å­ï¼Œå°±ä½¿ç”¨äº†è¿™ä¸ªç‰¹æ€§ã€‚ package main import ( \"fmt\" \"time\" ) func main() { ch1 := gen(0, 1) ch2 := gen(5, 25) out := combine(ch1, ch2) for x := range out { fmt.Println(x) } time.Sleep(20 * time.Second) } func gen(min, max int) chan int { ch := make(chan int) go func() { defer close(ch) for i := min; i \u003c= max; i++ { x := i ch \u003c- x } }() return ch } // inCh1,inCh2 åªè¯» func combine(inCh1, inCh2 \u003c-chan int) \u003c-chan int { // è¾“å‡ºé€šé“ out := make(chan int) // å¯åŠ¨åç¨‹åˆå¹¶æ•°æ® go func() { defer close(out) for { select { case x, open := \u003c-inCh1: fmt.Printf(\"inCh1: %v, %v\\n\", x, open) if !open { fmt.Println(\"inCh1 closed break\") inCh1 = nil break // è¿™é‡Œ break ä¸ä¼šè·³å‡º for å¾ªç¯ï¼Œåªä¼šè·³å‡º select,ä¸‹æ¬¡å†æ¬¡è¿›å…¥ select å°†ä¼šä» inCh2 ä¸­è¯»å–æ•°æ® } out \u003c- x case x, open := \u003c-inCh2: if !open { fmt.Println(\"inCh2 closed break\") inCh2 = nil break } out \u003c- x } fmt.Println(\"hhhhhhhhhhhhhhhhhhhhhhhhhhhhhhhh\") // å½“ch1å’Œch2éƒ½å…³é—­æ—¶æ‰é€€å‡º if inCh1 == nil \u0026\u0026 inCh2 == nil { fmt.Printf(\"222222222 inCh1:%v, inCh2:%v, inCh1 is nil: %t ,inCh2 is nil: %t \\n\", inCh1, inCh2, inCh1 == nil, inCh2 == nil) break } } }() return out } ","date":"2020-04-15","objectID":"/go-select/:3:0","series":null,"tags":["golang","go-select"],"title":"Go select ç”¨æ³•ç®€è¿°","uri":"/go-select/#nilé€šé“æ°¸è¿œé˜»å¡"},{"categories":["golang"],"content":" å¦‚ä½•è·³å‡ºfor-selectbreakåœ¨selectå†…çš„å¹¶ä¸èƒ½è·³å‡ºfor-selectå¾ªç¯ã€‚ ğŸ‘‡ä¸‹é¢çš„ä¾‹å­ï¼Œconsumeå‡½æ•°ä»é€šé“inChä¸åœè¯»æ•°æ®ï¼ŒæœŸå¾…åœ¨inChå…³é—­åé€€å‡ºfor-selectå¾ªç¯ï¼Œä½†ç»“æœæ˜¯æ°¸è¿œæ²¡æœ‰é€€å‡ºã€‚ package main import ( \"fmt\" \"time\" ) func main() { ch := make(chan int) go func(ch chan int) { defer close(ch) for i := 0; i \u003c 5; i++ { ch \u003c- i time.Sleep(1 * time.Second) } }(ch) consume(ch) time.Sleep(1 * time.Hour) } func consume(inCh \u003c-chan int) { i := 0 for { fmt.Printf(\"for: %d\\n\", i) select { case x, open := \u003c-inCh: if !open { fmt.Println(\"closed................\") time.Sleep(3 * time.Second) break } fmt.Printf(\"read: %d\\n\", x) } i++ } fmt.Println(\"consume-routine exit\") } è¿è¡Œç»“æœï¼š Î» go run t.go for: 0 read: 0 for: 1 read: 1 for: 2 read: 2 for: 3 read: 3 for: 4 read: 4 for: 5 closed................ for: 6 closed................ ... // never stop æ—¢ç„¶breakä¸èƒ½è·³å‡ºfor-selectï¼Œé‚£æ€ä¹ˆåŠå‘¢ğŸ˜¢ï¼Ÿä»¥ä¸‹æ˜¯ä¸‰ç§æ–¹å¼ï¼š åœ¨æ»¡è¶³æ¡ä»¶çš„caseå†…ï¼Œä½¿ç”¨returnï¼Œå¦‚æœæœ‰ç»“å°¾å·¥ä½œï¼Œå°è¯•äº¤ç»™deferã€‚ åœ¨selectå¤–forå†…ä½¿ç”¨breakæŒ‘å‡ºå¾ªç¯ï¼Œå¦‚combineå‡½æ•°ã€‚ ä½¿ç”¨gotoã€‚ ","date":"2020-04-15","objectID":"/go-select/:4:0","series":null,"tags":["golang","go-select"],"title":"Go select ç”¨æ³•ç®€è¿°","uri":"/go-select/#å¦‚ä½•è·³å‡ºfor-select"},{"categories":["golang"],"content":" select{}æ°¸è¿œé˜»å¡ package main import ( \"fmt\" \"time\" ) func main() { ch := make(chan int) go func(ch chan int) { defer close(ch) var i = 0 for { fmt.Printf(\"i: %d\\n\", i) ch \u003c- time.Now().Second() time.Sleep(1 * time.Second) i++ } }(ch) go func(ch \u003c-chan int) { for x := range ch { fmt.Printf(\"read: %d\\n\", x) } }(ch) select {} } select{}çš„æ•ˆæœç­‰ä»·äºåˆ›å»ºäº†1ä¸ªé€šé“ï¼Œç›´æ¥ä»é€šé“è¯»æ•°æ®ğŸ‘‡ ch := make(chan int) \u003c-ch ä½†æ˜¯ï¼Œè¿™ä¸ªå†™èµ·æ¥å¤šéº»çƒ¦ï¼Œæ²¡select{}ç®€æ´ã€‚ æ°¸è¿œé˜»å¡èƒ½æœ‰ä»€ä¹ˆç”¨å‘¢ï¼ï¼Ÿ å½“ä½ å¼€å‘ä¸€ä¸ªå¹¶å‘ç¨‹åºçš„æ—¶å€™ï¼Œmainå‡½æ•°åƒä¸‡ä¸èƒ½åœ¨å­åç¨‹å¹²å®Œæ´»å‰é€€å‡ºå•Šï¼Œä¸ç„¶æ‰€æœ‰çš„åç¨‹éƒ½è¢«è¿«é€€å‡ºäº†ï¼Œè¿˜æ€ä¹ˆæä¾›æœåŠ¡å‘¢ï¼Ÿ æ¯”å¦‚ï¼Œå†™äº†ä¸ªWebæœåŠ¡ç¨‹åºï¼Œç«¯å£ç›‘å¬ã€åç«¯å¤„ç†ç­‰ç­‰éƒ½åœ¨å­åç¨‹è·‘èµ·æ¥äº†ï¼Œmainå‡½æ•°è¿™æ—¶å€™èƒ½é€€å‡ºå—ï¼Ÿ ","date":"2020-04-15","objectID":"/go-select/:5:0","series":null,"tags":["golang","go-select"],"title":"Go select ç”¨æ³•ç®€è¿°","uri":"/go-select/#selectæ°¸è¿œé˜»å¡"},{"categories":["golang"],"content":" å‚è€ƒ https://github.com/Shitaibin/golang_step_by_step/tree/master/golang_select ","date":"2020-04-15","objectID":"/go-select/:6:0","series":null,"tags":["golang","go-select"],"title":"Go select ç”¨æ³•ç®€è¿°","uri":"/go-select/#å‚è€ƒ"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":"å¸¸è§ç¼“å­˜æ·˜æ±°ç­–ç•¥ï¼Œæ·˜æ±°ç­–ç•¥çš„å®ç°ï¼ŒFIFOï¼ŒLRUï¼ŒLFU","date":"2020-03-05","objectID":"/common-cache-strategies/","series":null,"tags":["ç®—æ³•"],"title":"å¸¸è§ç¼“å­˜æ·˜æ±°ç­–ç•¥","uri":"/common-cache-strategies/"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" FIFOFirst In First Out(FIFO)ï¼Œå…ˆè¿›å…ˆå‡ºï¼Œä¹Ÿå°±æ˜¯æ·˜æ±°ç¼“å­˜ä¸­æœ€è€(æœ€æ—©æ·»åŠ )çš„è®°å½•ã€‚FIFO è®¤ä¸ºï¼Œæœ€æ—©æ·»åŠ çš„è®°å½•ï¼Œå…¶ä¸å†è¢«ä½¿ç”¨çš„å¯èƒ½æ€§æ¯”åˆšæ·»åŠ çš„å¯èƒ½æ€§å¤§ã€‚è¿™ç§ç®—æ³•çš„å®ç°ä¹Ÿéå¸¸ç®€å•ï¼Œåˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ–°å¢è®°å½•æ·»åŠ åˆ°é˜Ÿå°¾ï¼Œ æ¯æ¬¡å†…å­˜ä¸å¤Ÿæ—¶ï¼Œæ·˜æ±°é˜Ÿé¦–ã€‚ä½†æ˜¯å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œéƒ¨åˆ†è®°å½•è™½ç„¶æ˜¯æœ€æ—©æ·»åŠ ä½†ä¹Ÿæœ€å¸¸è¢«è®¿é—®ï¼Œè€Œä¸å¾—ä¸å› ä¸ºå‘†çš„æ—¶é—´å¤ªé•¿è€Œè¢«æ·˜æ±°ã€‚è¿™ç±»æ•°æ®ä¼šè¢«é¢‘ç¹åœ°æ·»åŠ è¿›ç¼“å­˜ï¼Œåˆè¢«æ·˜æ±°å‡ºå»ï¼Œå¯¼è‡´ç¼“å­˜å‘½ä¸­ç‡é™ä½ã€‚ ","date":"2020-03-05","objectID":"/common-cache-strategies/:1:0","series":null,"tags":["ç®—æ³•"],"title":"å¸¸è§ç¼“å­˜æ·˜æ±°ç­–ç•¥","uri":"/common-cache-strategies/#fifo"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" LFULeast Frequently Used(LFU)ï¼Œæœ€å°‘ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯æ·˜æ±°ç¼“å­˜ä¸­è®¿é—®é¢‘ç‡æœ€ä½çš„è®°å½•ã€‚LFU è®¤ä¸ºï¼Œå¦‚æœæ•°æ®è¿‡å»è¢«è®¿é—®å¤šæ¬¡ï¼Œ é‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„é¢‘ç‡ä¹Ÿæ›´é«˜ã€‚LFU çš„å®ç°éœ€è¦ç»´æŠ¤ä¸€ä¸ªæŒ‰ç…§è®¿é—®æ¬¡æ•°æ’åºçš„é˜Ÿåˆ—ï¼Œæ¯æ¬¡è®¿é—®ï¼Œè®¿é—®æ¬¡æ•°åŠ 1ï¼Œé˜Ÿåˆ—é‡æ–°æ’åºï¼Œ æ·˜æ±°æ—¶é€‰æ‹©è®¿é—®æ¬¡æ•°æœ€å°‘çš„å³å¯ã€‚LFU ç®—æ³•çš„å‘½ä¸­ç‡æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œä½†ç¼ºç‚¹ä¹Ÿéå¸¸æ˜æ˜¾ï¼Œç»´æŠ¤æ¯ä¸ªè®°å½•çš„è®¿é—®æ¬¡æ•°ï¼Œå¯¹å†…å­˜çš„æ¶ˆè€—æ˜¯å¾ˆé«˜çš„ï¼› å¦å¤–ï¼Œå¦‚æœæ•°æ®çš„è®¿é—®æ¨¡å¼å‘ç”Ÿå˜åŒ–ï¼ŒLFU éœ€è¦è¾ƒé•¿çš„æ—¶é—´å»é€‚åº”ï¼Œä¹Ÿå°±æ˜¯è¯´ LFU ç®—æ³•å—å†å²æ•°æ®çš„å½±å“æ¯”è¾ƒå¤§ã€‚ä¾‹å¦‚æŸä¸ªæ•°æ®å†å²ä¸Šè®¿é—®æ¬¡æ•°å¥‡é«˜ï¼Œä½†åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¹‹åå‡ ä¹ä¸å†è¢«è®¿é—®ï¼Œä½†å› ä¸ºå†å²è®¿é—®æ¬¡æ•°è¿‡é«˜ï¼Œè€Œè¿Ÿè¿Ÿä¸èƒ½è¢«æ·˜æ±°ã€‚ ","date":"2020-03-05","objectID":"/common-cache-strategies/:2:0","series":null,"tags":["ç®—æ³•"],"title":"å¸¸è§ç¼“å­˜æ·˜æ±°ç­–ç•¥","uri":"/common-cache-strategies/#lfu"},{"categories":["ç®—æ³•ä¸æ•°å­¦"],"content":" LRULeast Recently Used(LRU)ï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œç›¸å¯¹äºä»…è€ƒè™‘æ—¶é—´å› ç´ çš„ FIFO å’Œä»…è€ƒè™‘è®¿é—®é¢‘ç‡çš„ LFUï¼ŒLRU ç®—æ³•å¯ä»¥è®¤ä¸ºæ˜¯ç›¸å¯¹å¹³è¡¡çš„ ä¸€ç§æ·˜æ±°ç®—æ³•ã€‚LRU è®¤ä¸ºï¼Œå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„æ¦‚ç‡ä¹Ÿä¼šæ›´é«˜ã€‚LRU ç®—æ³•çš„å®ç°éå¸¸ç®€å•ï¼Œç»´æŠ¤ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¦‚æœæŸæ¡è®°å½•è¢«è®¿é—®äº†ï¼Œ åˆ™ç§»åŠ¨åˆ°é˜Ÿå°¾ï¼Œé‚£ä¹ˆé˜Ÿé¦–åˆ™æ˜¯æœ€è¿‘æœ€å°‘è®¿é—®çš„æ•°æ®ï¼Œæ·˜æ±°è¯¥æ¡è®°å½•å³å¯ã€‚ ","date":"2020-03-05","objectID":"/common-cache-strategies/:3:0","series":null,"tags":["ç®—æ³•"],"title":"å¸¸è§ç¼“å­˜æ·˜æ±°ç­–ç•¥","uri":"/common-cache-strategies/#lru"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"ç¼©å†™,SGTM,PR,LGTM,WIP,QPS,FD,OOM,TTL","date":"2020-02-18","objectID":"/funny-abbreviations/","series":null,"tags":["ç¼©å†™"],"title":"é‚£äº›è¿·ä¹‹ç¼©å†™","uri":"/funny-abbreviations/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"äº’è”ç½‘æ˜¯ä¸ªé€ è¯çš„è¡Œä¸šï¼Œå¨´ç†Ÿçš„å¸æœºä»¬éƒ½ä¼šä½¿ç”¨ç¼©å†™æ¥è¾¾åˆ°æé«˜é€¼æ ¼çš„æ•ˆæœã€‚ æŸäº›ç¼©å†™åœ¨æˆ‘ä»¬ç¬¬ä¸€æ¬¡çœ‹åˆ°æ—¶ä¼šæœ‰ä¸€è„¸æ‡µé€¼çš„æ„Ÿè§‰ï¼Œè¿™é‡Œæ•´ç†ä¸€ä¸‹ä½œè€…åœ¨å·¥ä½œå’Œç”Ÿæ´»ä¸­é‡åˆ°çš„ä¸€äº›ç¼©å†™åŠå…¶å«ä¹‰ï¼Œä»¥åæˆ‘ä»¬ä¹Ÿå¯ä»¥æ¬¢å¿«åœ°è£…é€¼äº†ã€‚ ç¼©å†™ è¯´æ˜ PR Pull Requestï¼Œç»™å…¶ä»–é¡¹ç›®æäº¤ä»£ç  LGTM Looks Good To Me. æœ•çŸ¥é“äº† ä»£ç å·²ç»è¿‡ reviewï¼Œå¯ä»¥åˆå¹¶ SGTM Sounds Good To Me. å’Œä¸Šé¢é‚£å¥æ„æ€å·®ä¸å¤šï¼Œä¹Ÿæ˜¯å·²ç»é€šè¿‡äº† review çš„æ„æ€ WIP Work In Progress. ä¼ è¯´ä¸­æ PR çš„æœ€ä½³å®è·µæ˜¯ï¼Œå¦‚æœä½ æœ‰ä¸ªæ”¹åŠ¨å¾ˆå¤§çš„ PRï¼Œå¯ä»¥åœ¨å†™äº†ä¸€éƒ¨åˆ†çš„æƒ…å†µä¸‹å…ˆæäº¤ï¼Œä½†æ˜¯åœ¨æ ‡é¢˜é‡Œå†™ä¸Š WIPï¼Œä»¥å‘Šè¯‰é¡¹ç›®ç»´æŠ¤è€…è¿™ä¸ªåŠŸèƒ½è¿˜æœªå®Œæˆï¼Œæ–¹ä¾¿ç»´æŠ¤è€…æå‰ review éƒ¨åˆ†æäº¤çš„ä»£ç ã€‚ PTAL Please Take A Look. ä½ æ¥ç…ç…ï¼Ÿç”¨æ¥æç¤ºåˆ«äººæ¥çœ‹ä¸€ä¸‹ TBR To Be Reviewedï¼Œæç¤ºç»´æŠ¤è€…è¿›è¡Œ review TL;DR Too Long; Didnâ€™t Read. å¤ªé•¿æ‡’å¾—çœ‹ã€‚ä¹Ÿæœ‰å¾ˆå¤šæ–‡æ¡£åœ¨åšç®€ç•¥æè¿°ä¹‹å‰ä¼šå†™è¿™ä¹ˆä¸€å¥ TBD To Be Done (or Defined/Discussed/Decided/Determined). æ ¹æ®è¯­å¢ƒä¸åŒæ„ä¹‰æœ‰æ‰€åŒºåˆ«ï¼Œä½†ä¸€èˆ¬éƒ½æ˜¯è¿˜æ²¡æå®šçš„æ„æ€ QPS Query Per Secondï¼ŒæŒ‡æ¯ç§’é’Ÿèƒ½å¤Ÿå¤„ç†çš„æŸ¥è¯¢è¯·æ±‚æ•°é‡ã€‚ é€šå¸¸åœ¨è¯„ä¼°ä¸€ä¸ªç³»ç»Ÿçš„æ€§èƒ½æ—¶ï¼Œä¼šè€ƒè™‘ç³»ç»Ÿçš„QPSæŒ‡æ ‡ï¼Œå°¤å…¶æ˜¯åœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼ŒQPSæ˜¯è¯„ä¼°ç³»ç»Ÿæ€§èƒ½çš„é‡è¦æŒ‡æ ‡ä¹‹ä¸€ã€‚ fd æ–‡ä»¶æè¿°ç¬¦File descriptorï¼Œæ˜¯ä¸€ä¸ªç”¨äºè¡¨è¿°æŒ‡å‘æ–‡ä»¶çš„å¼•ç”¨çš„æŠ½è±¡åŒ–æ¦‚å¿µ OOM Out of memoryï¼Œå†…å­˜ç”¨å®Œäº† TTL the remaining time to live ï¼Œå‰©ä½™å­˜æ´»æ—¶é—´ NFS Network File Systemï¼Œä½¿ç”¨è€…è®¿é—®ç½‘ç»œä¸Šåˆ«å¤„çš„æ–‡ä»¶å°±åƒåœ¨ä½¿ç”¨è‡ªå·±çš„è®¡ç®—æœºä¸€æ · FAQ frequently asked questionsï¼Œå¸¸è§é—®é¢˜ CS/cs cs æ˜¯è®¡ç®—æœºç§‘å­¦çš„ç¼©å†™ï¼Œå…¨ç§°å« Client Server CNCF Cloud Native Computing Foundationï¼Œäº‘åŸç”ŸåŸºé‡‘ä¼š TPS TPSï¼ˆTransactions Per Secondï¼‰æ˜¯ä¸€ä¸ªè¡¡é‡äº‹åŠ¡å¤„ç†èƒ½åŠ›çš„æŒ‡æ ‡ï¼Œé€šå¸¸ç”¨äºè¯„ä¼°æ•°æ®åº“ç³»ç»Ÿçš„æ€§èƒ½ã€‚å®ƒè¡¨ç¤ºåœ¨ä¸€ç§’é’Ÿå†…å®Œæˆçš„äº‹åŠ¡æ•°é‡ï¼Œå…¶ä¸­ä¸€ä¸ªäº‹åŠ¡æ˜¯æŒ‡ä¸€ç»„å…³è”çš„æ“ä½œï¼Œè¿™äº›æ“ä½œå¿…é¡»å…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥ã€‚ TPS è¶Šé«˜ï¼Œæ„å‘³ç€æ•°æ®åº“ç³»ç»Ÿå¯ä»¥æ›´å¿«åœ°å¤„ç†äº‹åŠ¡è¯·æ±‚ï¼Œå…·æœ‰æ›´é«˜çš„å¹¶å‘æ€§å’Œæ›´å¥½çš„æ€§èƒ½ã€‚ä½†æ˜¯ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼ŒTPS ä¸ä¸€å®šæ˜¯å”¯ä¸€çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå› ä¸ºä¸åŒçš„åº”ç”¨åœºæ™¯å¯èƒ½éœ€è¦ä¸åŒçš„æŒ‡æ ‡æ¥è¯„ä¼°ç³»ç»Ÿæ€§èƒ½ï¼Œä¾‹å¦‚å“åº”æ—¶é—´ã€ååé‡ã€å¹¶å‘æ€§ç­‰ã€‚ æ­¤å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTPS çš„è®¡ç®—å¯èƒ½å—åˆ°å¤šç§å› ç´ çš„å½±å“ï¼Œä¾‹å¦‚ç¡¬ä»¶é…ç½®ã€æ•°æ®åº“è®¾è®¡ã€ç½‘ç»œå»¶è¿Ÿç­‰ç­‰ã€‚å› æ­¤ï¼Œä¸ºäº†å‡†ç¡®åœ°è¯„ä¼°æ•°æ®åº“ç³»ç»Ÿçš„æ€§èƒ½ï¼Œéœ€è¦ç»¼åˆè€ƒè™‘å¤šä¸ªæ–¹é¢çš„å› ç´ ï¼Œå¹¶æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯è¿›è¡Œæµ‹è¯•å’Œè°ƒä¼˜ã€‚ ","date":"2020-02-18","objectID":"/funny-abbreviations/:0:0","series":null,"tags":["ç¼©å†™"],"title":"é‚£äº›è¿·ä¹‹ç¼©å†™","uri":"/funny-abbreviations/#"},{"categories":["mysql"],"content":"xiaobinqt, mysql å¸¸è§é—®é¢˜,ä¸»é”®å’Œ unique çš„åŒºåˆ«,ä»€ä¹ˆæ˜¯ mysql ç»“æŸç¬¦,ä»€ä¹ˆæ˜¯ mysql å¤–é”®,ä»€ä¹ˆæ˜¯ ZEROFILLæ˜¾ç¤ºå®½åº¦,limit offset çš„åŒºåˆ«,mysql åˆ¤æ–­è¯­å¥,mysql å¾ªç¯è¯­å¥,mysql DUPLICATE KEY UPDATE ç”¨æ³•,mysql å˜é‡","date":"2019-10-03","objectID":"/mysql-simple-faq/","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/"},{"categories":["mysql"],"content":" ä¸»é”®å’Œ UNIQUE çš„åŒºåˆ«ä¸»é”®å’ŒUNIQUEçº¦æŸéƒ½èƒ½ä¿è¯æŸä¸ªåˆ—æˆ–è€…åˆ—ç»„åˆçš„å”¯ä¸€æ€§ï¼Œä½†æ˜¯ï¼š ä¸€å¼ è¡¨ä¸­åªèƒ½å®šä¹‰ä¸€ä¸ªä¸»é”®ï¼Œå´å¯ä»¥å®šä¹‰å¤šä¸ªUNIQUEçº¦æŸï¼ ä¸»é”®åˆ—ä¸å…è®¸å­˜æ”¾NULLï¼Œè€Œå£°æ˜äº†UNIQUEå±æ€§çš„åˆ—å¯ä»¥å­˜æ”¾NULLï¼Œè€Œä¸”NULLå¯ä»¥é‡å¤åœ°å‡ºç°åœ¨å¤šæ¡è®°å½•ä¸­ã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:1:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#ä¸»é”®å’Œ-unique-çš„åŒºåˆ«"},{"categories":["mysql"],"content":" ç»“æŸç¬¦ delimiter EOF # å°†ç»“æŸç¬¦æ”¹ä¸º EOF ä¿®æ”¹ç»“æŸç¬¦ ç”±â˜ï¸å›¾å¯çŸ¥ï¼Œå°†é»˜è®¤çš„ç»“æŸç¬¦ä» ; æ”¹ä¸º EOFã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:2:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#ç»“æŸç¬¦"},{"categories":["mysql"],"content":" ä»€ä¹ˆæ˜¯å¤–é”®å¦‚æœAè¡¨ä¸­çš„æŸä¸ªåˆ—æˆ–è€…æŸäº›åˆ—ä¾èµ–ä¸Bè¡¨ä¸­çš„æŸä¸ªåˆ—æˆ–è€…æŸäº›åˆ—ï¼Œé‚£ä¹ˆå°±ç§°Aè¡¨ä¸ºå­è¡¨ï¼ŒBè¡¨ä¸ºçˆ¶è¡¨ã€‚å­è¡¨å’Œçˆ¶è¡¨å¯ä»¥ä½¿ç”¨å¤–é”®æ¥å…³è”èµ·æ¥ã€‚ çˆ¶è¡¨ä¸­è¢«å­è¡¨ä¾èµ–çš„åˆ—æˆ–è€…åˆ—ç»„åˆå¿…é¡»å»ºç«‹ç´¢å¼•ï¼Œå¦‚æœè¯¥åˆ—æˆ–è€…åˆ—ç»„åˆå·²ç»æ˜¯ä¸»é”®æˆ–è€…æœ‰UNIQUEå±æ€§ï¼Œé‚£ä¹ˆä¹Ÿå°±è¢«é»˜è®¤å»ºç«‹äº†ç´¢å¼•ã€‚ å®šä¹‰å¤–é”®çš„è¯­æ³•ï¼š CONSTRAINT [å¤–é”®åç§°] FOREIGN KEY(åˆ—1, åˆ—2, ...) REFERENCES çˆ¶è¡¨å(çˆ¶åˆ—1, çˆ¶åˆ—2, ...); ","date":"2019-10-03","objectID":"/mysql-simple-faq/:3:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#ä»€ä¹ˆæ˜¯å¤–é”®"},{"categories":["mysql"],"content":" ç¤ºä¾‹ CREATE TABLE student_score ( number INT, -- å­¦å· subject VARCHAR(30), score TINYINT, PRIMARY KEY (number, subject), CONSTRAINT FOREIGN KEY (number) REFERENCES student_info (number) ); â˜ï¸ å¦‚ä¸Šï¼Œåœ¨å¯¹student_scoreè¡¨æ’å…¥æ•°æ®çš„æ—¶å€™ï¼ŒMySQL éƒ½ä¼šæ£€æŸ¥æ’å…¥çš„å­¦å·æ˜¯å¦èƒ½åœ¨student_info è¡¨ä¸­æ‰¾åˆ°ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¼šæŠ¥é”™ï¼Œå› ä¸ºstudent_scoreè¡¨ä¸­çš„number åˆ—ä¾èµ–äºstudent_infoè¡¨çš„numberåˆ—ï¼Œä¹Ÿå°±æ˜¯ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå­¦ç”Ÿï¼Œä½•æ¥æˆç»©ï¼Ÿ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:3:1","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#ç¤ºä¾‹"},{"categories":["mysql"],"content":" ZEROFILLå¯¹äºæ— ç¬¦å·æ•´æ•°ç±»å‹çš„åˆ—ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™è®©æ•°å­—å·¦è¾¹è¡¥ 0ï¼Œå¦‚æœæƒ³å®ç°è¿™ä¸ªæ•ˆæœéœ€è¦ç»™è¯¥åˆ—åŠ ä¸€ä¸ªZEROFILLå±æ€§ï¼š CREATE TABLE zerofill_table ( i1 INT(10) UNSIGNED ZEROFILL, i2 INT UNSIGNED ); INTåè¾¹çš„(5)ï¼Œè¿™ä¸ª 5 å°±æ˜¯æ˜¾ç¤ºå®½åº¦ï¼Œé»˜è®¤æ˜¯10ï¼Œä¹Ÿå°±æ˜¯ INT ä¹Ÿ INT(10) æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:4:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#zerofill"},{"categories":["mysql"],"content":" æ³¨æ„ è¯¥åˆ—å¿…é¡»æ˜¯æ•´æ•°ç±»å‹ è¯¥åˆ—å¿…é¡»æœ‰ UNSIGNED ZEROFILLçš„å±æ€§ è¯¥åˆ—çš„å®é™…å€¼çš„ä½æ•°å¿…é¡»å°äºæ˜¾ç¤ºå®½åº¦ åœ¨åˆ›å»ºè¡¨çš„æ—¶å€™ï¼Œå¦‚æœå£°æ˜äº†ZEROFILLå±æ€§çš„åˆ—æ²¡æœ‰å£°æ˜UNSIGNEDå±æ€§ï¼ŒMySQL ä¼šä¸ºè¯¥åˆ—è‡ªåŠ¨ç”ŸæˆUNSIGNEDå±æ€§ æ˜¾ç¤ºå®½åº¦å¹¶ä¸ä¼šå½±å“å®é™…ç±»å‹çš„å®é™…å­˜å‚¨ç©ºé—´ å¯¹äºæ²¡æœ‰å£°æ˜ZEROFILLå±æ€§çš„åˆ—ï¼Œæ˜¾ç¤ºå®½åº¦æ²¡æœ‰ä»»ä½•ä½œç”¨ï¼Œåªæœ‰åœ¨æŸ¥è¯¢å£°æ˜äº†ZEROFILLå±æ€§çš„åˆ—æ—¶ï¼Œæ˜¾ç¤ºå®½åº¦æ‰ä¼šèµ·ä½œç”¨ï¼Œå¦åˆ™å¯ä»¥å¿½ç•¥æ˜¾ç¤ºå®½åº¦è¿™ä¸ªä¸œè¥¿çš„å­˜åœ¨ã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:4:1","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#æ³¨æ„"},{"categories":["mysql"],"content":" limitã€offset åŒºåˆ« ä» 0 å¼€å§‹è®¡æ•°ï¼Œç¬¬1æ¡è®°å½•åœ¨ MYSQL ä¸­æ˜¯ç¬¬ 0 æ¡ã€‚ limit å’Œ offset éƒ½å¯ä»¥ç”¨æ¥é™åˆ¶æŸ¥è¯¢æ¡æ•°ï¼Œä¸€èˆ¬ç”¨åšåˆ†é¡µã€‚ å½“ limit åé¢è·Ÿä¸€ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œè¯¥å‚æ•°è¡¨ç¤ºè¦å–çš„æ•°æ®çš„æ•°é‡ select * from user limit 3 è¡¨ç¤ºç›´æ¥å–å‰ä¸‰æ¡æ•°æ®ã€‚ å½“ limit åé¢è·Ÿä¸¤ä¸ªå‚æ•°çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªæ•°è¡¨ç¤ºå¼€å§‹è¡Œï¼Œåä¸€ä½è¡¨ç¤ºè¦å–çš„æ•°é‡ï¼Œä¾‹å¦‚ select * from user limit 1,3; ä» 0 è¡Œå¼€å§‹è®¡ç®—ï¼Œå–ç¬¬ 1 - 3 æ¡æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å– 1,2,3 ä¸‰æ¡æ•°æ®ã€‚ å½“ limit å’Œ offset ç»„åˆä½¿ç”¨çš„æ—¶å€™ï¼Œlimit åé¢åªèƒ½æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¦å–çš„çš„æ•°é‡ï¼Œoffset è¡¨ç¤ºå¼€å§‹è¡Œã€‚ select * from user limit 3 offset 1; ä» 0 è¡Œå¼€å§‹è®¡ç®—ï¼Œå–ç¬¬ 1 - 3 æ¡æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å– 1,2,3 ä¸‰æ¡æ•°æ®ã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:5:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#limitoffset-åŒºåˆ«"},{"categories":["mysql"],"content":" å¸¸ç”¨å‡½æ•°","date":"2019-10-03","objectID":"/mysql-simple-faq/:6:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#å¸¸ç”¨å‡½æ•°"},{"categories":["mysql"],"content":" æ–‡æœ¬å¤„ç†å‡½æ•° åç§° è°ƒç”¨ç¤ºä¾‹ ç¤ºä¾‹ç»“æœ æè¿° LEFT LEFT('abc123', 3) abc ç»™å®šå­—ç¬¦ä¸²ä»å·¦è¾¹å–æŒ‡å®šé•¿åº¦çš„å­ä¸² RIGHT RIGHT('abc123', 3) 123 ç»™å®šå­—ç¬¦ä¸²ä»å³è¾¹å–æŒ‡å®šé•¿åº¦çš„å­ä¸² LENGTH LENGTH('abc') 3 ç»™å®šå­—ç¬¦ä¸²çš„é•¿åº¦ LOWER LOWER('ABC') abc ç»™å®šå­—ç¬¦ä¸²çš„å°å†™æ ¼å¼ UPPER UPPER('abc') ABC ç»™å®šå­—ç¬¦ä¸²çš„å¤§å†™æ ¼å¼ LTRIM LTRIM(' abc') abc ç»™å®šå­—ç¬¦ä¸²å·¦è¾¹ç©ºæ ¼å»é™¤åçš„æ ¼å¼ RTRIM RTRIM('abc ') abc ç»™å®šå­—ç¬¦ä¸²å³è¾¹ç©ºæ ¼å»é™¤åçš„æ ¼å¼ SUBSTRING SUBSTRING('abc123', 2, 3) bc1 ç»™å®šå­—ç¬¦ä¸²ä»æŒ‡å®šä½ç½®æˆªå–æŒ‡å®šé•¿åº¦çš„å­ä¸² CONCAT CONCAT('abc', '123', 'xyz') abc123xyz å°†ç»™å®šçš„å„ä¸ªå­—ç¬¦ä¸²æ‹¼æ¥æˆä¸€ä¸ªæ–°å­—ç¬¦ä¸² ","date":"2019-10-03","objectID":"/mysql-simple-faq/:6:1","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#æ–‡æœ¬å¤„ç†å‡½æ•°"},{"categories":["mysql"],"content":" æ—¶é—´å¤„ç†å‡½æ•° åç§° è°ƒç”¨ç¤ºä¾‹ ç¤ºä¾‹ç»“æœ æè¿° NOW NOW() 2019-08-16 17:10:43 è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´ CURDATE CURDATE() 2019-08-16 è¿”å›å½“å‰æ—¥æœŸ CURTIME CURTIME() 17:10:43 è¿”å›å½“å‰æ—¶é—´ DATE DATE('2019-08-16 17:10:43') 2019-08-16 å°†ç»™å®šæ—¥æœŸå’Œæ—¶é—´å€¼çš„æ—¥æœŸæå–å‡ºæ¥ DATE_ADD DATE_ADD('2019-08-16 17:10:43', INTERVAL 2 DAY) 2019-08-18 17:10:43 å°†ç»™å®šçš„æ—¥æœŸå’Œæ—¶é—´å€¼æ·»åŠ æŒ‡å®šçš„æ—¶é—´é—´éš” DATE_SUB DATE_SUB('2019-08-16 17:10:43', INTERVAL 2 DAY) 2019-08-14 17:10:43 å°†ç»™å®šçš„æ—¥æœŸå’Œæ—¶é—´å€¼å‡å»æŒ‡å®šçš„æ—¶é—´é—´éš” DATEDIFF DATEDIFF('2019-08-16', '2019-08-17') -1 è¿”å›ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•°ï¼ˆè´Ÿæ•°ä»£è¡¨å‰ä¸€ä¸ªå‚æ•°ä»£è¡¨çš„æ—¥æœŸæ¯”è¾ƒå°ï¼‰ DATE_FORMAT DATE_FORMAT(NOW(),'%m-%d-%Y') 08-16-2019 ç”¨ç»™å®šçš„æ ¼å¼æ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ å¸¸è§æ—¶é—´å•ä½ æ—¶é—´å•ä½ æè¿° MICROSECOND æ¯«ç§’ SECOND ç§’ MINUTE åˆ†é’Ÿ HOUR å°æ—¶ DAY å¤© WEEK æ˜ŸæœŸ MONTH æœˆ QUARTER å­£åº¦ YEAR å¹´ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:6:2","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#æ—¶é—´å¤„ç†å‡½æ•°"},{"categories":["mysql"],"content":" æ•°å€¼å¤„ç†å‡½æ•° åç§° è°ƒç”¨ç¤ºä¾‹ ç¤ºä¾‹ç»“æœ æè¿° ABS ABS(-1) 1 å–ç»å¯¹å€¼ Pi PI() 3.141593 è¿”å›åœ†å‘¨ç‡ COS COS(PI()) -1 è¿”å›ä¸€ä¸ªè§’åº¦çš„ä½™å¼¦ EXP EXP(1) 2.718281828459045 è¿”å›eçš„æŒ‡å®šæ¬¡æ–¹ MOD MOD(5,2) 1 è¿”å›é™¤æ³•çš„ä½™æ•° RAND RAND() 0.7537623539136372 è¿”å›ä¸€ä¸ªéšæœºæ•° SIN SIN(PI()/2) 1 è¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£å¼¦ SQRT SQRT(9) 3 è¿”å›ä¸€ä¸ªæ•°çš„å¹³æ–¹æ ¹ TAN TAN(0) 0 è¿”å›ä¸€ä¸ªè§’åº¦çš„æ­£åˆ‡ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:6:3","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#æ•°å€¼å¤„ç†å‡½æ•°"},{"categories":["mysql"],"content":" COUNT å‡½æ•°COUNTå‡½æ•°ä½¿ç”¨æ¥ç»Ÿè®¡è¡Œæ•°çš„ï¼Œæœ‰ä¸‹è¾¹ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š COUNT(*)ï¼šå¯¹è¡¨ä¸­è¡Œçš„æ•°ç›®è¿›è¡Œè®¡æ•°ï¼Œä¸ç®¡åˆ—çš„å€¼æ˜¯ä¸æ˜¯NULLã€‚ COUNT(åˆ—å)ï¼šå¯¹ç‰¹å®šçš„åˆ—è¿›è¡Œè®¡æ•°ï¼Œä¼šå¿½ç•¥æ‰è¯¥åˆ—ä¸ºNULLçš„è¡Œã€‚ ä¸¤è€…çš„åŒºåˆ«æ˜¯ä¼šä¸ä¼šå¿½ç•¥ç»Ÿè®¡åˆ—çš„å€¼ä¸ºNULLçš„è¡Œã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:7:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#count-å‡½æ•°"},{"categories":["mysql"],"content":" æŸ¥è¯¢where ç«Ÿç„¶å¯ä»¥è¿™ä¹ˆå†™ğŸ˜‡ select * from edge where (ip, mode) = ('192.168.50.101', 2); in ç«Ÿç„¶å¯ä»¥è¿™ä¹ˆå†™ğŸ˜‚ select * from edge where (ip, mode) in (select '192.168.50.101', 2); ","date":"2019-10-03","objectID":"/mysql-simple-faq/:8:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#æŸ¥è¯¢"},{"categories":["mysql"],"content":" åˆ¤æ–­è¯­å¥","date":"2019-10-03","objectID":"/mysql-simple-faq/:9:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#åˆ¤æ–­è¯­å¥"},{"categories":["mysql"],"content":" if then IF è¡¨è¾¾å¼ THEN å¤„ç†è¯­å¥åˆ—è¡¨ [ELSEIF è¡¨è¾¾å¼ THEN å¤„ç†è¯­å¥åˆ—è¡¨] ... # è¿™é‡Œå¯ä»¥æœ‰å¤šä¸ªELSEIFè¯­å¥ [ELSE å¤„ç†è¯­å¥åˆ—è¡¨] END IF; ","date":"2019-10-03","objectID":"/mysql-simple-faq/:9:1","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#if-then"},{"categories":["mysql"],"content":" case when CASE WHEN è¡¨è¾¾å¼ THEN å¤„ç†è¯­å¥ else è¡¨è¾¾å¼ end ## æˆ–è€… CASE when è¡¨è¾¾å¼ then å¤„ç†è¯­å¥ when è¡¨è¾¾å¼ then å¤„ç†è¯­å¥ ... å¯ä»¥ä¸å¤šä¸ª when è¡¨è¾¾å¼ then å¤„ç†è¯­å¥ END ç¤ºä¾‹ï¼š select *, CASE WHEN name='å¤§å½¬' THEN 'è§’è‰²1' else 'è§’è‰²2' end as processed_name , case when status = 1 then 'å·²å¤„ç†' when status = 0 then 'æœªå¤„ç†' when status = 2 then 'å¾…å¤„ç†' end as processed_status from user; ","date":"2019-10-03","objectID":"/mysql-simple-faq/:9:2","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#case-when"},{"categories":["mysql"],"content":" å¾ªç¯è¯­å¥","date":"2019-10-03","objectID":"/mysql-simple-faq/:10:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#å¾ªç¯è¯­å¥"},{"categories":["mysql"],"content":" WHILE WHILE è¡¨è¾¾å¼ DO å¤„ç†è¯­å¥åˆ—è¡¨ END WHILE; ","date":"2019-10-03","objectID":"/mysql-simple-faq/:10:1","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#while"},{"categories":["mysql"],"content":" REPEAT REPEAT å¤„ç†è¯­å¥åˆ—è¡¨ UNTIL è¡¨è¾¾å¼ END REPEAT; ","date":"2019-10-03","objectID":"/mysql-simple-faq/:10:2","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#repeat"},{"categories":["mysql"],"content":" LOOP LOOP å¤„ç†è¯­å¥åˆ—è¡¨ END LOOP; åœ¨ä½¿ç”¨ LOOP æ—¶å¯ä»¥ä½¿ç”¨RETURNè¯­å¥ç›´æ¥è®©å‡½æ•°ç»“æŸå°±å¯ä»¥è¾¾åˆ°åœæ­¢å¾ªç¯çš„æ•ˆæœï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨LEAVEè¯­å¥ï¼Œä¸è¿‡ä½¿ç”¨LEAVE æ—¶ï¼Œéœ€è¦å…ˆåœ¨LOOPè¯­å¥å‰è¾¹æ”¾ç½®ä¸€ä¸ªæ‰€è°“çš„æ ‡è®°ã€‚ CREATE FUNCTION sum_all(n INT UNSIGNED) RETURNS INT BEGIN DECLARE result INT DEFAULT 0; DECLARE i INT DEFAULT 1; flag:LOOP IF i \u003e n THEN LEAVE flag; END IF; SET result = result + i; SET i = i + 1; END LOOP flag; RETURN result; END â˜ï¸ç¤ºä¾‹ä¸­ï¼Œåœ¨LOOPè¯­å¥å‰åŠ äº†ä¸€ä¸ªflag:ï¼Œç›¸å½“äºä¸ºè¿™ä¸ªå¾ªç¯æ‰“äº†ä¸€ä¸ªåå«flagçš„æ ‡è®°ï¼Œç„¶ååœ¨å¯¹åº”çš„END LOOP è¯­å¥åè¾¹ä¹ŸæŠŠè¿™ä¸ªæ ‡è®°åflag ç»™å†™ä¸Šäº†ã€‚åœ¨å­˜å‚¨å‡½æ•°çš„å‡½æ•°ä½“ä¸­ä½¿ç”¨LEAVE flagè¯­å¥æ¥ç»“æŸflagè¿™ä¸ªæ ‡è®°æ‰€ä»£è¡¨çš„å¾ªç¯ã€‚ æ ‡è®°ä¸»è¦æ˜¯ä¸ºäº†å¯ä»¥è·³åˆ°æŒ‡å®šçš„è¯­å¥ä¸­ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:10:3","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#loop"},{"categories":["mysql"],"content":" DUPLICATE KEY UPDATEå¯¹äºä¸»é”®æˆ–è€…æœ‰å”¯ä¸€æ€§çº¦æŸçš„åˆ—æˆ–åˆ—ç»„åˆæ¥è¯´ï¼Œæ–°æ’å…¥çš„è®°å½•å¦‚æœå’Œè¡¨ä¸­å·²å­˜åœ¨çš„è®°å½•é‡å¤çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©çš„ç­–ç•¥ä¸ä»…ä»…æ˜¯å¿½ç•¥ï¼ˆINSERT IGNOREï¼‰è¯¥æ¡è®°å½•çš„æ’å…¥ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ›´æ–°è¿™æ¡é‡å¤çš„æ—§è®°å½•ã€‚ CREATE TABLE `t` ( `idt` int(11) NOT NULL AUTO_INCREMENT, `phone` char(11) DEFAULT NULL, `name` varchar(45) DEFAULT NULL, PRIMARY KEY (`idt`), UNIQUE KEY `idt_UNIQUE` (`idt`), UNIQUE KEY `phone_UNIQUE` (`phone`) ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 å¦‚ä¸Šè¡¨ï¼Œidt æ˜¯å”¯ä¸€ä¸»é”®ï¼Œphone æ˜¯ UNIQUE å”¯ä¸€çº¦æŸã€‚ å›¾1 è¡¨é‡Œæœ‰æ¡è®°å½• phone = 15212124125ï¼Œname = 'å´å½¦ç¥–'ï¼Œç°åœ¨å†æ·»åŠ ä¸€æ¡è®°å½•ï¼Œphone è·Ÿ name = 'å´å½¦ç¥–' æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯ name='å®‹æ±Ÿ' INSERT INTO t (phone, name) VALUES ('15212124125', 'å®‹æ±Ÿ') ON DUPLICATE KEY UPDATE name = 'å®‹æ±Ÿ'; -- å¯¹äºæ‰¹é‡æ’å…¥å¯ä»¥è¿™ä¹ˆå†™ï¼Œ`VALUES(åˆ—å)`çš„å½¢å¼æ¥å¼•ç”¨å¾…æ’å…¥è®°å½•ä¸­å¯¹åº”åˆ—çš„å€¼ INSERT INTO t (phone, name) VALUES ('15212124125', 'å®‹æ±Ÿ'), ('15212124126', 'æé€µ') ON DUPLICATE KEY UPDATE name = VALUES (`name`); ç»“æœï¼š å›¾2 ç”±ç»“æœå¯çŸ¥ï¼Œphone ç”µè¯çš„å€¼æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯ name è¢«ä¿®æ”¹æˆäº†å®‹æ±Ÿã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ t è¡¨ä¸­å·²ç»å­˜åœ¨ phone çš„åˆ—å€¼ä¸º 15212124125 çš„è®°å½•ï¼ˆå› ä¸º phoneåˆ—å…·æœ‰UNIQUE çº¦æŸï¼‰ï¼Œé‚£ä¹ˆå°±æŠŠè¯¥è®°å½•çš„ nameåˆ—æ›´æ–°ä¸º'å®‹æ±Ÿ'ã€‚ å¯¹äºé‚£äº›æ˜¯ä¸»é”®æˆ–è€…å…·æœ‰UNIQUEçº¦æŸçš„åˆ—æˆ–è€…åˆ—ç»„åˆæ¥è¯´ï¼Œå¦‚æœè¡¨ä¸­å·²å­˜åœ¨çš„è®°å½•ä¸­æœ‰ä¸å¾…æ’å…¥è®°å½•åœ¨è¿™äº›åˆ—æˆ–è€…åˆ—ç»„åˆä¸Šé‡å¤çš„å€¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨VALUES(åˆ—å)çš„å½¢å¼æ¥å¼•ç”¨å¾…æ’å…¥è®°å½•ä¸­å¯¹åº”åˆ—çš„å€¼ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:11:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#duplicate-key-update"},{"categories":["mysql"],"content":" è‡ªå®šä¹‰å˜é‡","date":"2019-10-03","objectID":"/mysql-simple-faq/:12:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#è‡ªå®šä¹‰å˜é‡"},{"categories":["mysql"],"content":" å•ä¸ªå˜é‡è®¾ç½®å•ä¸ªå˜é‡å¯ä»¥ä½¿ç”¨ SET å…³é”®å­—ã€‚ è®¾ç½®å•ä¸ªå˜é‡ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:12:1","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#å•ä¸ªå˜é‡"},{"categories":["mysql"],"content":" å¤šä¸ªå˜é‡è®¾ç½®å¤šä¸ªå˜é‡å¯ä»¥ä½¿ç”¨ INTO å…³é”®å­—ã€‚ è®¾ç½®å¤šä¸ªå˜é‡ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:12:2","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#å¤šä¸ªå˜é‡"},{"categories":["mysql"],"content":" ç´¢å¼•å»ºç«‹åŸåˆ™ é¢‘ç¹ç”¨ä½œæŸ¥è¯¢æ¡ä»¶çš„å­—æ®µåº”é…Œæƒ…è€ƒè™‘ä¸ºå…¶åˆ›å»ºç´¢å¼•ã€‚ è¡¨çš„ä¸»å¤–é”®æˆ–è¿è¡¨å­—æ®µï¼Œå¿…é¡»å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºèƒ½å¾ˆå¤§ç¨‹åº¦æå‡è¿è¡¨æŸ¥è¯¢çš„æ€§èƒ½ã€‚ å»ºç«‹ç´¢å¼•çš„å­—æ®µï¼Œä¸€èˆ¬å€¼çš„åŒºåˆ†æ€§è¦è¶³å¤Ÿé«˜ï¼Œè¿™æ ·æ‰èƒ½æé«˜ç´¢å¼•çš„æ£€ç´¢æ•ˆç‡ã€‚ å»ºç«‹ç´¢å¼•çš„å­—æ®µï¼Œå€¼ä¸åº”è¯¥è¿‡é•¿ï¼Œå¦‚æœè¾ƒé•¿çš„å­—æ®µè¦å»ºç«‹ç´¢å¼•ï¼Œå¯ä»¥é€‰æ‹©å‰ç¼€ç´¢å¼•ã€‚ å»ºç«‹è”åˆç´¢å¼•ï¼Œåº”å½“éµå¾ªæœ€å·¦å‰ç¼€åŸåˆ™ï¼Œå°†å¤šä¸ªå­—æ®µä¹‹é—´æŒ‰ä¼˜å…ˆçº§é¡ºåºç»„åˆã€‚ ç»å¸¸æ ¹æ®èŒƒå›´å–å€¼ã€æ’åºã€åˆ†ç»„çš„å­—æ®µåº”å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•æœ‰åºï¼Œèƒ½åŠ å¿«æ’åºæ—¶é—´ã€‚ å¯¹äºå”¯ä¸€ç´¢å¼•ï¼Œå¦‚æœç¡®è®¤ä¸ä¼šåˆ©ç”¨è¯¥å­—æ®µæ’åºï¼Œé‚£å¯ä»¥å°†ç»“æ„æ”¹ä¸ºHashç»“æ„ã€‚ å°½é‡ä½¿ç”¨è”åˆç´¢å¼•ä»£æ›¿å•å€¼ç´¢å¼•ï¼Œè”åˆç´¢å¼•æ¯”å¤šä¸ªå•å€¼ç´¢å¼•æŸ¥è¯¢æ•ˆç‡è¦é«˜ã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:13:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#ç´¢å¼•å»ºç«‹åŸåˆ™"},{"categories":["mysql"],"content":" æ–°å»ºç´¢å¼•éœ€è¦æ³¨æ„å“ªäº› å€¼ç»å¸¸ä¼šå¢åˆ æ”¹çš„å­—æ®µï¼Œä¸åˆé€‚å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºæ¯æ¬¡æ”¹å˜åéœ€ç»´æŠ¤ç´¢å¼•ç»“æ„ã€‚ ä¸€ä¸ªå­—æ®µå­˜åœ¨å¤§é‡çš„é‡å¤å€¼æ—¶ï¼Œä¸é€‚åˆå»ºç«‹ç´¢å¼•ï¼Œæ¯”å¦‚æ€§åˆ«å­—æ®µã€‚ ç´¢å¼•ä¸èƒ½å‚ä¸è®¡ç®—ï¼Œå› æ­¤ç»å¸¸å¸¦å‡½æ•°æŸ¥è¯¢çš„å­—æ®µï¼Œå¹¶ä¸é€‚åˆå»ºç«‹ç´¢å¼•ã€‚ ä¸€å¼ è¡¨ä¸­çš„ç´¢å¼•æ•°é‡å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œä¸€èˆ¬æ§åˆ¶åœ¨3ä¸ªï¼Œæœ€å¤šä¸èƒ½è¶…è¿‡5ä¸ªã€‚ å»ºç«‹è”åˆç´¢å¼•æ—¶ï¼Œä¸€å®šè¦è€ƒè™‘ä¼˜å…ˆçº§ï¼ŒæŸ¥è¯¢é¢‘ç‡æœ€é«˜çš„å­—æ®µåº”å½“æ”¾é¦–ä½ã€‚ å½“è¡¨çš„æ•°æ®è¾ƒå°‘ï¼Œä¸åº”å½“å»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºæ•°æ®é‡ä¸å¤§æ—¶ï¼Œç»´æŠ¤ç´¢å¼•åè€Œå¼€é”€æ›´å¤§ã€‚ ç´¢å¼•çš„å­—æ®µå€¼æ— åºæ—¶ï¼Œä¸æ¨èå»ºç«‹ç´¢å¼•ï¼Œå› ä¸ºä¼šé€ æˆé¡µåˆ†è£‚ï¼Œå°¤å…¶æ˜¯ä¸»é”®ç´¢å¼•ã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:14:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#æ–°å»ºç´¢å¼•éœ€è¦æ³¨æ„å“ªäº›"},{"categories":["mysql"],"content":" å¦‚ä½•æ­£ç¡®ä½¿ç”¨ç´¢å¼•ï¼Œå“ªäº›æƒ…å†µä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ æŸ¥è¯¢ SQL ä¸­å°½é‡ä¸è¦ä½¿ç”¨ORå…³é”®å­—ï¼Œå¯ä»¥ä½¿ç”¨å­æŸ¥è¯¢ä»£æ›¿ã€‚ æ¨¡ç³ŠæŸ¥è¯¢å°½é‡ä¸è¦ä»¥%å¼€å¤´ï¼Œå¦‚æœå®åœ¨è¦å®ç°è¿™ä¸ªåŠŸèƒ½å¯ä»¥å»ºç«‹å…¨æ–‡ç´¢å¼•ã€‚ âš ï¸ç¼–å†™ SQL æ—¶ä¸€å®šè¦æ³¨æ„å­—æ®µçš„æ•°æ®ç±»å‹ï¼Œå¦åˆ™ MySQL çš„éšå¼è½¬æ¢ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆã€‚ ä¸€å®šä¸è¦åœ¨ç¼–å†™ SQL æ—¶è®©ç´¢å¼•å­—æ®µæ‰§è¡Œè®¡ç®—å·¥ä½œï¼Œå°½é‡å°†è®¡ç®—å·¥ä½œæ”¾åœ¨å®¢æˆ·ç«¯ä¸­å®Œæˆã€‚ å¯¹äºç´¢å¼•å­—æ®µå°½é‡ä¸è¦ä½¿ç”¨è®¡ç®—ç±»å‡½æ•°ï¼Œä¸€å®šè¦ä½¿ç”¨æ—¶è¯·è®°å¾—å°†å‡½æ•°è®¡ç®—æ”¾åœ¨=åé¢ã€‚ å¤šæ¡ä»¶çš„æŸ¥è¯¢ SQL ä¸€å®šè¦ä½¿ç”¨è”åˆç´¢å¼•ä¸­çš„ç¬¬ä¸€ä¸ªå­—æ®µï¼Œå¦åˆ™ä¼šæ‰“ç ´æœ€å·¦åŒ¹é…åŸåˆ™ã€‚ å¯¹äºéœ€è¦å¯¹æ¯”å¤šä¸ªå­—æ®µçš„æŸ¥è¯¢ä¸šåŠ¡æ—¶ï¼Œå¯ä»¥æ‹†åˆ†ä¸ºè¿è¡¨æŸ¥è¯¢ï¼Œä½¿ç”¨ä¸´æ—¶è¡¨ä»£æ›¿ã€‚ åœ¨ SQL ä¸­ä¸è¦ä½¿ç”¨åèŒƒå›´æ€§çš„æŸ¥è¯¢æ¡ä»¶ï¼Œå¤§éƒ¨åˆ†åèŒƒå›´æ€§ã€ä¸ç­‰æ€§æŸ¥è¯¢éƒ½ä¼šè®©ç´¢å¼•å¤±æ•ˆã€‚ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:15:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#å¦‚ä½•æ­£ç¡®ä½¿ç”¨ç´¢å¼•å“ªäº›æƒ…å†µä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ"},{"categories":["mysql"],"content":" å‚è€ƒ å»ºç«‹ç´¢å¼•çš„æ­£ç¡®å§¿åŠ¿ä¸ä½¿ç”¨ç´¢å¼•çš„æœ€ä½³æŒ‡å—ï¼ ","date":"2019-10-03","objectID":"/mysql-simple-faq/:16:0","series":[],"tags":["mysql"],"title":"MySQL å¸¸è§é—®é¢˜ï¼ˆä¸€ï¼‰","uri":"/mysql-simple-faq/#å‚è€ƒ"},{"categories":[""],"content":"xiaobinqt,","date":"2019-09-26","objectID":"/editorconfig/","series":[],"tags":[""],"title":"ä½¿ç”¨ EditorConfig ç®¡ç†ä»£ç æ ·å¼","uri":"/editorconfig/"},{"categories":[""],"content":" windows æ¯”è¾ƒæ¶å¿ƒçš„ä¸€ç‚¹æ˜¯ï¼Œé»˜è®¤ä½¿ç”¨ CRLF æ¢è¡Œï¼Œæ¯”å¦‚è‹¹æœç”µè„‘å°±æ˜¯ç±» Unix ç³»ç»Ÿï¼Œä½¿ç”¨ LF æ¢è¡Œç¬¦ã€‚æœ‰æ—¶å¯èƒ½è¿˜ä¼šå› ä¸º windows æ¢è¡Œç¬¦çš„é—®é¢˜ï¼Œç¼–è¯‘çš„ shell è„šæœ¬ä¼ åˆ°æœåŠ¡å™¨ä¸Šæ˜¾ç¤ºè¿è¡Œé”™è¯¯ã€‚ EditorConfig æ˜¯ç”¨äºç»Ÿä¸€ä¸åŒ IDE ç¼–ç é£æ ¼é…ç½®çš„ä¸€ç§é…ç½®æ–‡ä»¶ï¼Œå®¹æ˜“é˜…è¯»ï¼Œå¹¶ä¸”æ–¹ä¾¿ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç®¡ç†ï¼Œåªéœ€è¦åœ¨é¡¹ç›®ä¸­æ·»åŠ ä¸€ä¸ª.editorconfig æ–‡ä»¶å³å¯ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå®˜ç½‘çš„ä¾‹å­ï¼Œä½¿ç”¨çš„é…ç½®æ–‡ä»¶æ˜¯ ini æ ¼å¼ # EditorConfig is awesome: https://EditorConfig.org # top-most EditorConfig file root = true # unixæ ¼å¼æ¢è¡Œç¬¦,å¹¶ä¸”åœ¨æ–‡ä»¶æœ«å°¾æ’å…¥æ–°è¡Œ [*] end_of_line = lf insert_final_newline = true # Matches multiple files with brace expansion notation # Set default charset [*.{js,py}] charset = utf-8 # 4 space indentation [*.py] indent_style = space indent_size = 4 # Tab indentation (no size specified) [Makefile] indent_style = tab # Indentation override for all JS under lib directory [lib/**.js] indent_style = space indent_size = 2 # Matches the exact files either package.json or .travis.yml [{package.json,.travis.yml}] indent_style = space indent_size = 2 ","date":"2019-09-26","objectID":"/editorconfig/:0:0","series":[],"tags":[""],"title":"ä½¿ç”¨ EditorConfig ç®¡ç†ä»£ç æ ·å¼","uri":"/editorconfig/#"},{"categories":[""],"content":" æ–‡ä»¶åŒ¹é… å­—ç¬¦æ¨¡å¼ åŒ¹é…å†…å®¹ * åŒ¹é…ä»»æ„å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²,é™¤äº†è·¯å¾„åˆ†éš”ç¬¦/ ** åŒ¹é…ä»»æ„å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸² ? åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ [name] åŒ¹é…æ‹¬å·å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦ [!name] åŒ¹é…é™¤äº†æ‹¬å·å†…çš„å­—ç¬¦ {s1,s2,s3} åŒ¹é…å…¶ä¸­ä»»ä½•ä¸€ä¸ª,ç”¨é€—å·éš”å¼€çš„ (Available since EditorConfig Core 0.11.0) {num1..num2} åŒ¹é…ä¸¤ä¸ªæ•°å­—ä¹‹é—´çš„æ•´æ•° ","date":"2019-09-26","objectID":"/editorconfig/:1:0","series":[],"tags":[""],"title":"ä½¿ç”¨ EditorConfig ç®¡ç†ä»£ç æ ·å¼","uri":"/editorconfig/#æ–‡ä»¶åŒ¹é…"},{"categories":[""],"content":" æ”¯æŒçš„é…ç½®é¡¹EditorConfigæ–‡ä»¶éƒ¨åˆ†åŒ…å«ç”±ç­‰å·ï¼ˆ=ï¼‰åˆ†éš”çš„é”®å€¼å¯¹ã€‚ é™¤ root å¤–ï¼Œæ‰€æœ‰é”®å€¼å¯¹éƒ½å¿…é¡»ä½äºç”Ÿæ•ˆçš„éƒ¨åˆ†ä¸‹ã€‚ Key Supported values indent_style ä½¿ç”¨ tab è¿˜æ˜¯ space indent_size è®¾ç½®ç¼©è¿›å®½åº¦ tab_width è®¾ç½®åˆ¶è¡¨ç¬¦å®½åº¦, é»˜è®¤å’Œ indent_size å€¼ä¸€æ ·,é€šå¸¸ä¸éœ€è¦è®¾å®š end_of_line è®¾ç½®æ¢è¡Œç¬¦lf, cr, or crlf charset è®¾ç½®å­—ç¬¦ç¼–ç latin1, utf-8, utf-8-bom, utf-16beï¼Œutf-16leã€‚ä¸å»ºè®®ä½¿ç”¨utf-8-bom trim_trailing_whitespace è®¾ç½®ä¸º true åˆ é™¤æ‰€æœ‰æ¢è¡Œç¬¦å‰çš„ç©ºç™½å­—ç¬¦ false ä¸åˆ é™¤ insert_final_newline è®¾ç½® true ä¿å­˜çš„æ—¶å€™æ–‡ä»¶ç»“å°¾ä¼šç”Ÿæˆæ–°è¡Œ false ä¸ç”Ÿæˆæ–°è¡Œ root éœ€è¦åœ¨å¼€å¤´æŒ‡å®šï¼Œé€šå¸¸å»ºè®®é¡¹ç›®æœ€é¡¶å±‚çš„é…ç½®æ–‡ä»¶è®¾ç½®è¯¥å€¼ã€‚ è®¾å®šä¸º true ä»¥åæœç´¢ editorconfig åˆ°å½“å‰çš„æ–‡ä»¶å°±ä¼šåœæ­¢ ","date":"2019-09-26","objectID":"/editorconfig/:2:0","series":[],"tags":[""],"title":"ä½¿ç”¨ EditorConfig ç®¡ç†ä»£ç æ ·å¼","uri":"/editorconfig/#æ”¯æŒçš„é…ç½®é¡¹"},{"categories":[""],"content":" å‚è€ƒ ä½¿ç”¨ EditorConfig è®¾ç½®é¡¹ç›®çš„åå¥½è®¾ç½® EditorConfig Specification EditorConfigä½¿ç”¨æŒ‡å— EditorConfig ","date":"2019-09-26","objectID":"/editorconfig/:3:0","series":[],"tags":[""],"title":"ä½¿ç”¨ EditorConfig ç®¡ç†ä»£ç æ ·å¼","uri":"/editorconfig/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,è½¯ä»¶alphaã€betaã€rcã€stableå„ä¸ªç‰ˆæœ¬æœ‰ä»€ä¹ˆåŒºåˆ«","date":"2019-08-06","objectID":"/alpha-beta-rc-stable-diff/","series":null,"tags":["ç‰ˆæœ¬ç®¡ç†"],"title":"ç‰ˆæœ¬ alphaã€betaã€rcã€stable çš„åŒºåˆ«","uri":"/alpha-beta-rc-stable-diff/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç‰ˆæœ¬ç®¡ç† ","date":"2019-08-06","objectID":"/alpha-beta-rc-stable-diff/:0:0","series":null,"tags":["ç‰ˆæœ¬ç®¡ç†"],"title":"ç‰ˆæœ¬ alphaã€betaã€rcã€stable çš„åŒºåˆ«","uri":"/alpha-beta-rc-stable-diff/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" alphaå†…éƒ¨æµ‹è¯•ç‰ˆã€‚Î±æ˜¯å¸Œè…Šå­—æ¯çš„ç¬¬ä¸€ä¸ªï¼Œè¡¨ç¤ºæœ€æ—©çš„ç‰ˆæœ¬ï¼Œä¸€èˆ¬ç”¨æˆ·ä¸è¦ä¸‹è½½è¿™ä¸ªç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬åŒ…å«å¾ˆå¤š bugï¼ŒåŠŸèƒ½ä¹Ÿä¸å…¨ï¼Œä¸»è¦æ˜¯ç»™å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜æµ‹è¯•å’Œæ‰¾ bug ç”¨çš„ã€‚ ","date":"2019-08-06","objectID":"/alpha-beta-rc-stable-diff/:1:0","series":null,"tags":["ç‰ˆæœ¬ç®¡ç†"],"title":"ç‰ˆæœ¬ alphaã€betaã€rcã€stable çš„åŒºåˆ«","uri":"/alpha-beta-rc-stable-diff/#alpha"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" betaå…¬å¼€æµ‹è¯•ç‰ˆã€‚Î²æ˜¯å¸Œè…Šå­—æ¯çš„ç¬¬äºŒä¸ªï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªç‰ˆæœ¬æ¯” alpha ç‰ˆå‘å¸ƒå¾—æ™šä¸€äº›ï¼Œä¸»è¦æ˜¯ç»™â€œéƒ¨è½â€ç”¨æˆ·å’Œå¿ å®ç”¨æˆ·æµ‹è¯•ç”¨çš„ï¼Œè¯¥ç‰ˆæœ¬ä»»ç„¶å­˜åœ¨å¾ˆå¤š bugï¼Œä½†æ˜¯ç›¸å¯¹ alpha ç‰ˆè¦ç¨³å®šä¸€äº›ã€‚è¿™ä¸ªé˜¶æ®µç‰ˆæœ¬çš„è½¯ä»¶è¿˜ä¼šä¸æ–­å¢åŠ æ–°åŠŸèƒ½ã€‚å¦‚æœä½ æ˜¯å‘çƒ§å‹ï¼Œå¯ä»¥ä¸‹è½½è¿™ä¸ªç‰ˆæœ¬ã€‚ ","date":"2019-08-06","objectID":"/alpha-beta-rc-stable-diff/:2:0","series":null,"tags":["ç‰ˆæœ¬ç®¡ç†"],"title":"ç‰ˆæœ¬ alphaã€betaã€rcã€stable çš„åŒºåˆ«","uri":"/alpha-beta-rc-stable-diff/#beta"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" rcRelease Candidateå€™é€‰ç‰ˆæœ¬ï¼Œè¯¥ç‰ˆæœ¬åˆè¾ƒ beta ç‰ˆæ›´è¿›ä¸€æ­¥äº†ï¼Œè¯¥ç‰ˆæœ¬åŠŸèƒ½ä¸å†å¢åŠ ï¼Œå’Œæœ€ç»ˆå‘å¸ƒç‰ˆåŠŸèƒ½ä¸€æ ·ã€‚è¿™ä¸ªç‰ˆæœ¬æœ‰ç‚¹åƒæœ€ç»ˆå‘è¡Œç‰ˆä¹‹å‰çš„ä¸€ä¸ªç±»ä¼¼é¢„è§ˆç‰ˆï¼Œè¿™ä¸ªçš„å‘å¸ƒå°±æ ‡æ˜ç¦»æœ€ç»ˆå‘è¡Œç‰ˆä¸è¿œäº†ã€‚ä½œä¸ºæ™®é€šç”¨æˆ·ï¼Œå¦‚æœä½ å¾ˆæ€¥ç€ç”¨è¿™ä¸ªè½¯ä»¶çš„è¯ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½è¿™ä¸ªç‰ˆæœ¬ã€‚ ","date":"2019-08-06","objectID":"/alpha-beta-rc-stable-diff/:3:0","series":null,"tags":["ç‰ˆæœ¬ç®¡ç†"],"title":"ç‰ˆæœ¬ alphaã€betaã€rcã€stable çš„åŒºåˆ«","uri":"/alpha-beta-rc-stable-diff/#rc"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" stableç¨³å®šç‰ˆã€‚åœ¨å¼€æºè½¯ä»¶ä¸­ï¼Œéƒ½æœ‰ stable ç‰ˆï¼Œè¿™ä¸ªå°±æ˜¯å¼€æºè½¯ä»¶çš„æœ€ç»ˆå‘è¡Œç‰ˆï¼Œç”¨æˆ·å¯ä»¥æ”¾å¿ƒå¤§èƒ†çš„ç”¨äº†ã€‚ ","date":"2019-08-06","objectID":"/alpha-beta-rc-stable-diff/:4:0","series":null,"tags":["ç‰ˆæœ¬ç®¡ç†"],"title":"ç‰ˆæœ¬ alphaã€betaã€rcã€stable çš„åŒºåˆ«","uri":"/alpha-beta-rc-stable-diff/#stable"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" GAGAGeneral Availabilityï¼šæ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬ï¼›åœ¨å›½å¤–éƒ½æ˜¯ç”¨ GA æ¥è¯´æ˜ release ç‰ˆæœ¬çš„ã€‚ ","date":"2019-08-06","objectID":"/alpha-beta-rc-stable-diff/:5:0","series":null,"tags":["ç‰ˆæœ¬ç®¡ç†"],"title":"ç‰ˆæœ¬ alphaã€betaã€rcã€stable çš„åŒºåˆ«","uri":"/alpha-beta-rc-stable-diff/#ga"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" RTMRTMRelease to Manufacturingï¼šç»™ç”Ÿäº§å•†çš„ release ç‰ˆæœ¬ï¼›RTM ç‰ˆæœ¬å¹¶ä¸ä¸€å®šæ„å‘³ç€åˆ›ä½œè€…è§£å†³äº†è½¯ä»¶æ‰€æœ‰é—®é¢˜ï¼Œä»æœ‰å¯èƒ½å‘å…¬ä¼—å‘å¸ƒå‰æ›´æ–°ç‰ˆæœ¬ã€‚ ","date":"2019-08-06","objectID":"/alpha-beta-rc-stable-diff/:6:0","series":null,"tags":["ç‰ˆæœ¬ç®¡ç†"],"title":"ç‰ˆæœ¬ alphaã€betaã€rcã€stable çš„åŒºåˆ«","uri":"/alpha-beta-rc-stable-diff/#rtm"},{"categories":["mysql"],"content":"xiaobinqt,mysql æ•°æ®ç±»å‹","date":"2019-06-15","objectID":"/mysql-data-type/","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/"},{"categories":["mysql"],"content":" MySQL æ˜¯ä»¥å­—èŠ‚ä¸ºå•ä½å­˜å‚¨æ•°æ®çš„ï¼Œä¸€ä¸ªå­—èŠ‚æ‹¥æœ‰8ä¸ªæ¯”ç‰¹ä½ã€‚å¦‚æœå­˜å‚¨çš„ä¸è¶³ 1 ä¸ªå­—èŠ‚ï¼ŒMySQL ä¼šè‡ªåŠ¨å¡«å……æˆ 1 ä¸ªå­—èŠ‚ã€‚ å­—ç¬¦ï¼ˆCharacterï¼‰æ˜¯å„ç§æ–‡å­—å’Œç¬¦å·çš„æ€»ç§°ï¼ŒåŒ…æ‹¬å„å›½å®¶æ–‡å­—ã€æ ‡ç‚¹ç¬¦å·ã€å›¾å½¢ç¬¦å·ã€æ•°å­—ç­‰ã€‚ å­—ç¬¦é›†ï¼ˆCharacter setï¼‰æ˜¯ä¸€ä¸ªç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰æŠ½è±¡å­—ç¬¦çš„é›†åˆã€‚ å­—ç¬¦ç¼–ç ï¼ˆCharacter encodingï¼‰æ˜¯æŠŠå­—ç¬¦é›†ä¸­çš„å­—ç¬¦ç¼–ç ä¸ºç‰¹å®šçš„äºŒè¿›åˆ¶æ•°ï¼Œä»¥ä¾¿åœ¨è®¡ç®—æœºä¸­å­˜å‚¨ã€‚æ¯ä¸ªå­—ç¬¦é›†ä¸­çš„å­—ç¬¦éƒ½å¯¹åº”ä¸€ä¸ªå”¯ä¸€çš„äºŒè¿›åˆ¶ç¼–ç ã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:0:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#"},{"categories":["mysql"],"content":" å­—ç¬¦ç¼–ç å­—ç¬¦æ˜¯é¢å‘äººçš„æ¦‚å¿µï¼Œå­—èŠ‚æ˜¯é¢å‘è®¡ç®—æœºçš„æ¦‚å¿µã€‚å¦‚æœæƒ³åœ¨è®¡ç®—æœºä¸­è¡¨ç¤ºå­—ç¬¦ï¼Œé‚£å°±éœ€è¦å°†è¯¥å­—ç¬¦ä¸ä¸€ä¸ªç‰¹å®šçš„å­—èŠ‚åºåˆ—å¯¹åº”èµ·æ¥ï¼Œè¿™ä¸ªæ˜ å°„è¿‡ç¨‹ç§°ä¹‹ä¸ºç¼–ç ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ˜ å°„å…³ç³»å¹¶ä¸æ˜¯å”¯ä¸€çš„ï¼Œä¸åŒçš„äººåˆ¶ä½œäº†ä¸åŒçš„ç¼–ç æ–¹æ¡ˆã€‚ æ ¹æ®è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ä½¿ç”¨çš„å­—èŠ‚æ•°é‡æ˜¯ä¸æ˜¯å›ºå®šçš„ï¼Œç¼–ç æ–¹æ¡ˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š ","date":"2019-06-15","objectID":"/mysql-data-type/:1:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#å­—ç¬¦ç¼–ç "},{"categories":["mysql"],"content":" å®šé•¿ç¼–ç è¡¨ç¤ºä¸åŒçš„å­—ç¬¦æ‰€éœ€è¦çš„å­—èŠ‚æ•°é‡æ˜¯ç›¸åŒçš„ã€‚æ¯”å¦‚ ASCII ç¼–ç æ–¹æ¡ˆé‡‡ç”¨ 1 ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªå­—ç¬¦ï¼Œucs2 é‡‡ç”¨ 2 ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªå­—ç¬¦ã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:1:1","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#å®šé•¿ç¼–ç "},{"categories":["mysql"],"content":" å˜é•¿ç¼–ç è¡¨ç¤ºä¸åŒçš„å­—ç¬¦æ‰€éœ€è¦çš„å­—èŠ‚æ•°é‡æ˜¯ä¸åŒçš„ã€‚æ¯”æ–¹è¯´ utf8 ç¼–ç æ–¹æ¡ˆé‡‡ç”¨ 1~3 ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªå­—ç¬¦ï¼Œgb2312 é‡‡ç”¨ 1~2 ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªå­—ç¬¦ã€‚ å¯¹äºä¸åŒçš„å­—ç¬¦ç¼–ç æ–¹æ¡ˆæ¥è¯´ï¼ŒåŒä¸€ä¸ªå­—ç¬¦å¯èƒ½è¢«ç¼–ç æˆä¸åŒçš„å­—èŠ‚åºåˆ—ã€‚æ¯”å¦‚åŒæ ·ä¸€ä¸ªå­—ç¬¦ï¼šæˆ‘ï¼Œåœ¨ utf8 å’Œ gb2312 è¿™ä¸¤ç§ç¼–ç æ–¹æ¡ˆä¸‹è¢«æ˜ å°„æˆå¦‚ä¸‹çš„å­—èŠ‚åºåˆ—ï¼š utf8 ç¼–ç æ–¹æ¡ˆ å­—ç¬¦æˆ‘è¢«ç¼–ç æˆ 111001101000100010010001ï¼Œå…±å ç”¨ 3 ä¸ªå­—èŠ‚ï¼Œç”¨åå…­è¿›åˆ¶è¡¨ç¤ºå°±æ˜¯ï¼š0xE68891ã€‚ gb2312 ç¼–ç æ–¹æ¡ˆ å­—ç¬¦æˆ‘è¢«ç¼–ç æˆ 1100111011010010ï¼Œå…±å ç”¨ 2 ä¸ªå­—èŠ‚ï¼Œç”¨åå…­è¿›åˆ¶è¡¨ç¤ºå°±æ˜¯ï¼š0xCED2ã€‚ MySQL å¯¹ç¼–ç æ–¹æ¡ˆå’Œå­—ç¬¦é›†è¿™ä¸¤ä¸ªæ¦‚å¿µå¹¶æ²¡åšä»€ä¹ˆåŒºåˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ utf8 å­—ç¬¦é›†æŒ‡çš„å°±æ˜¯ utf8 ç¼–ç æ–¹æ¡ˆï¼Œgb2312 å­—ç¬¦é›†æŒ‡çš„ä¹Ÿå°±æ˜¯ gb2312 ç¼–ç æ–¹æ¡ˆã€‚ æ­£å®—çš„ utf8 å­—ç¬¦é›†æ˜¯ä½¿ç”¨ 1~4 ä¸ªå­—èŠ‚æ¥ç¼–ç ä¸€ä¸ªå­—ç¬¦çš„ï¼Œä¸è¿‡MySQLä¸­å¯¹utf8å­—ç¬¦é›†åšäº†é˜‰å‰²ï¼Œç¼–ç ä¸€ä¸ªå­—ç¬¦æœ€å¤šä½¿ç”¨3ä¸ªå­—èŠ‚ã€‚ å¦‚æœæœ‰å­˜å‚¨ä½¿ç”¨4ä¸ªå­—èŠ‚æ¥ç¼–ç çš„å­—ç¬¦çš„æƒ…æ™¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ç§ç§°ä¹‹ä¸ºutf8mb4çš„å­—ç¬¦é›†ï¼Œå®ƒæ‰æ˜¯æ­£å®—çš„utf8å­—ç¬¦é›†ã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:1:2","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#å˜é•¿ç¼–ç "},{"categories":["mysql"],"content":" æ•´æ•° ç±»å‹ å ç”¨ç©ºé—´ æ— ç¬¦å·æ•°å–å€¼èŒƒå›´ æœ‰ç¬¦å·æ•°å–å€¼èŒƒå›´ å«ä¹‰ TINYINT 1 0 ~ 2â¸-1 -2â· ~ 2â·-1 éå¸¸å°çš„æ•´æ•° SMALLINT 2 0 ~ 2Â¹â¶-1 -2Â¹âµ ~ 2Â¹âµ-1 å°çš„æ•´æ•° MEDIUMINT 3 0 ~ 2Â²â´-1 -2Â²Â³ ~ 2Â²Â³-1 ä¸­ç­‰å¤§å°çš„æ•´æ•° INTï¼ˆåˆ«åï¼šINTEGERï¼‰ 4 0 ~ 2Â³Â²-1 -2Â³Â¹ ~ 2Â³Â¹-1 æ ‡å‡†çš„æ•´æ•° BIGINT 8 0 ~ 2â¶â´-1 -2â¶Â³ ~ 2â¶Â³-1 å¤§æ•´æ•° ","date":"2019-06-15","objectID":"/mysql-data-type/:2:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#æ•´æ•°"},{"categories":["mysql"],"content":" æµ®ç‚¹æ•° ç±»å‹ å ç”¨ç©ºé—´ ç»å¯¹å€¼æœ€å°é0å€¼ ç»å¯¹å€¼æœ€å¤§é0å€¼ å«ä¹‰ FLOAT 4 Â±1.175494351E-38 Â±3.402823466E+38 å•ç²¾åº¦æµ®ç‚¹æ•° DOUBLE 8 Â±2.2250738585072014E-308 Â±1.7976931348623157E+308 åŒç²¾åº¦æµ®ç‚¹æ•° æœ‰çš„åè¿›åˆ¶å°æ•°ï¼Œæ¯”å¦‚ 1.875 å¯ä»¥è¢«å¾ˆå®¹æ˜“çš„è½¬æ¢æˆäºŒè¿›åˆ¶æ•° 1.111 ï¼Œä½†æ˜¯æ›´å¤šçš„å°æ•°æ˜¯æ— æ³•ç›´æ¥è½¬æ¢æˆäºŒè¿›åˆ¶çš„ï¼Œæ¯”å¦‚è¯´ 0.3 ï¼Œå®ƒè½¬æ¢æˆçš„äºŒè¿›åˆ¶å°æ•°å°±æ˜¯ä¸€ä¸ªæ— é™å°æ•°ï¼Œä½†æ˜¯ç°åœ¨åªèƒ½ç”¨ 4 ä¸ªå­—èŠ‚æˆ–è€… 8 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºè¿™ä¸ªå°æ•°ï¼Œæ‰€ä»¥åªèƒ½è¿›è¡Œä¸€äº›èˆå…¥æ¥è¿‘ä¼¼çš„è¡¨ç¤ºï¼Œæ‰€ä»¥è¯´è®¡ç®—æœºçš„æµ®ç‚¹æ•°è¡¨ç¤ºæœ‰æ—¶æ˜¯ä¸ç²¾ç¡®çš„ã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:3:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#æµ®ç‚¹æ•°"},{"categories":["mysql"],"content":" è®¾ç½®æœ€å¤§æœ€å°ä½æ•°å¯ä»¥ä½¿ç”¨ FLOAT(M, D)æˆ–è€… DOUBLE(M, D) æ¥é™åˆ¶å¯ä»¥å­˜å‚¨åˆ°æœ¬åˆ—ä¸­çš„å°æ•°èŒƒå›´ã€‚å…¶ä¸­ï¼š Mè¡¨ç¤ºè¯¥å°æ•°æœ€å¤šéœ€è¦çš„åè¿›åˆ¶æœ‰æ•ˆæ•°å­—ä¸ªæ•°ã€‚ Dè¡¨ç¤ºè¯¥å°æ•°çš„å°æ•°ç‚¹åçš„åè¿›åˆ¶æ•°å­—ä¸ªæ•°ã€‚ Mçš„å–å€¼èŒƒå›´æ˜¯1~255ï¼ŒDçš„å–å€¼èŒƒå›´æ˜¯0~30ï¼Œè€Œä¸”Dçš„å€¼å¿…é¡»ä¸å¤§äºMã€‚ Må’ŒDéƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœçœç•¥ï¼Œå®ƒä»¬çš„å€¼æŒ‰ç…§æœºå™¨æ”¯æŒçš„æœ€å¤§å€¼æ¥å­˜å‚¨ã€‚ è®¡ç®—åè¿›åˆ¶æœ‰æ•ˆæ•°å­—ä¸ªæ•°æ—¶ï¼Œä¸è®¡å…¥æ­£è´Ÿå·ï¼Œä¸è®¡å…¥æœ€å·¦è¾¹çš„ 0ï¼Œä¹Ÿä¸è®¡å…¥å°æ•°ç‚¹ã€‚æ‰€ä»¥ -2.3 æ¥è¯´æœ‰æ•ˆæ•°å­—ä¸ªæ•°å°±æ˜¯ 2ï¼Œ0.9 æœ‰æ•ˆæ•°å­—ä¸ªæ•°å°±æ˜¯ 1ã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:3:1","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#è®¾ç½®æœ€å¤§æœ€å°ä½æ•°"},{"categories":["mysql"],"content":" å®šç‚¹æ•°å› ä¸ºç”¨æµ®ç‚¹æ•°è¡¨ç¤ºå°æ•°å¯èƒ½ä¼šæœ‰ä¸ç²¾ç¡®çš„æƒ…å†µï¼Œåœ¨ä¸€äº›æƒ…å†µä¸‹æˆ‘ä»¬å¿…é¡»ä¿è¯å°æ•°æ˜¯ç²¾ç¡®çš„ï¼Œå¯ä»¥ä½¿ç”¨å®šç‚¹æ•°çš„æ•°æ®ç±»å‹ã€‚ ä¸æµ®ç‚¹æ•°ç›¸æ¯”ï¼Œå®šç‚¹æ•°éœ€è¦æ›´å¤šçš„ç©ºé—´æ¥å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥å¦‚æœä¸æ˜¯åœ¨æŸäº›éœ€è¦å­˜å‚¨ç²¾ç¡®å°æ•°çš„åœºæ™¯ä¸‹ï¼Œä¸€èˆ¬çš„å°æ•°ç”¨æµ®ç‚¹æ•°è¡¨ç¤ºå°±è¶³å¤Ÿäº†ã€‚ ç±»å‹ å ç”¨ç©ºé—´ å–å€¼èŒƒå›´ DECIMAL(M, D) å–å†³äºMå’ŒD å–å†³äºMå’ŒD DECIMAL å¦‚æœä¸æŒ‡å®šç²¾åº¦ï¼Œé»˜è®¤çš„ M çš„å€¼æ˜¯ 10 ï¼Œé»˜è®¤çš„ D çš„å€¼æ˜¯ 0ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸‹åˆ—ç­‰å¼æ˜¯æˆç«‹çš„ï¼š DECIMAL = DECIMAL(10) = DECIMAL(10, 0) DECIMAL(n) = DECIMAL(n, 0) M çš„èŒƒå›´æ˜¯ 1~65ï¼ŒDçš„èŒƒå›´æ˜¯0~30ï¼Œä¸”Dçš„å€¼ä¸èƒ½è¶…è¿‡Mã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:4:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#å®šç‚¹æ•°"},{"categories":["mysql"],"content":" æ— ç¬¦å·æ•°å€¼å¯¹äºæ•°å€¼ç±»å‹ï¼ŒåŒ…æ‹¬æ•´æ•°ã€æµ®ç‚¹æ•°å’Œå®šç‚¹æ•°ï¼Œæœ‰äº›æƒ…å†µä¸‹åªéœ€è¦ç”¨åˆ°æ— ç¬¦å·æ•°ï¼ˆå°±æ˜¯éè´Ÿæ•°ï¼‰ã€‚ MySQL æä¾›äº†ä¸€ä¸ªè¡¨ç¤ºæ— ç¬¦å·æ•°å€¼ç±»å‹çš„æ–¹å¼ï¼Œå°±æ˜¯åœ¨åŸæ•°å€¼ç±»å‹ååŠ ä¸€ä¸ªå•è¯UNSIGNEDï¼š æ•°å€¼ç±»å‹ UNSIGNED å¯ä»¥æŠŠå®ƒå½“æˆä¸€ç§æ–°ç±»å‹å¯¹å¾…ï¼Œæ¯”å¦‚INT UNSIGNEDå°±è¡¨ç¤ºæ— ç¬¦å·æ•´æ•°ï¼ŒFLOAT UNSIGNEDè¡¨ç¤ºæ— ç¬¦å·æµ®ç‚¹æ•°ï¼ŒDECIMAL UNSIGNEDè¡¨ç¤ºæ— ç¬¦å·å®šç‚¹æ•°ã€‚ åœ¨ä½¿ç”¨çš„å­˜å‚¨ç©ºé—´å¤§å°ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ— ç¬¦å·æ•´æ•°å¯ä»¥è¡¨ç¤ºçš„æ­£æ•´æ•°èŒƒå›´æ¯”æœ‰ç¬¦å·æ•´æ•°èƒ½è¡¨ç¤ºçš„æ­£æ•´æ•°èŒƒå›´å¤§ä¸€å€ã€‚ ä¸è¿‡å—æµ®ç‚¹æ•°å’Œå®šç‚¹æ•°å…·ä½“çš„å­˜å‚¨æ ¼å¼å½±å“ï¼Œæ— ç¬¦å·æµ®ç‚¹æ•°å’Œå®šç‚¹æ•°å¹¶ä¸èƒ½æå‡æ­£æ•°çš„è¡¨ç¤ºèŒƒå›´ã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:5:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#æ— ç¬¦å·æ•°å€¼"},{"categories":["mysql"],"content":" æ—¶é—´å’Œæ—¥æœŸ ç±»å‹ å­˜å‚¨ç©ºé—´ å–å€¼èŒƒå›´ å«ä¹‰ YEAR 1 1901~2155 å¹´ä»½å€¼ DATE 3 1000-01-01~9999-12-31 æ—¥æœŸå€¼ TIME 3 -838:59:59~838:59:59 æ—¶é—´å€¼ DATETIME 8 1000-01-01 00:00:00~9999-12-31 23:59:59 æ—¥æœŸåŠ æ—¶é—´å€¼ TIMESTAMP 4 1970-01-01 00:00:01~2038-01-19 03:14:07 æ—¶é—´æˆ³ TIMEè¡¨ç¤ºæ—¶é—´ï¼Œæ ¼å¼æ˜¯hh:mm:ss[.uuuuuu]æˆ–è€…hhh:mm:ss[.uuuuuu] ç”¨æ—¶é—´æˆ³å­˜å‚¨æ—¶é—´çš„å¥½å¤„å°±æ˜¯ï¼Œå®ƒå±•ç¤ºçš„å€¼å¯ä»¥éšç€æ—¶åŒºçš„å˜åŒ–è€Œå˜åŒ–ã€‚ DATETIME ä¸­çš„æ—¶é—´éƒ¨åˆ†è¡¨ç¤ºçš„æ˜¯ä¸€å¤©å†…çš„æ—¶é—´(00:00:00 ~ 23:59:59)ï¼Œè€Œ TIME è¡¨ç¤ºçš„æ˜¯ä¸€æ®µæ—¶é—´ï¼Œè€Œä¸”å¯ä»¥è¡¨ç¤ºè´Ÿå€¼ã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:6:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#æ—¶é—´å’Œæ—¥æœŸ"},{"categories":["mysql"],"content":" å­—ç¬¦ä¸² ç±»å‹ æœ€å¤§é•¿åº¦ å­˜å‚¨ç©ºé—´è¦æ±‚ å«ä¹‰ CHAR(M) Mä¸ªå­—ç¬¦ MÃ—Wä¸ªå­—èŠ‚ å›ºå®šé•¿åº¦çš„å­—ç¬¦ä¸² VARCHAR(M) Mä¸ªå­—ç¬¦ L+1 æˆ– L+2 ä¸ªå­—èŠ‚ å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸² TINYTEXT 2â¸-1 ä¸ªå­—èŠ‚ L+1ä¸ªå­—èŠ‚ éå¸¸å°å‹çš„å­—ç¬¦ä¸² TEXT 2Â¹â¶-1 ä¸ªå­—èŠ‚ L+2 ä¸ªå­—èŠ‚ å°å‹çš„å­—ç¬¦ä¸² MEDIUMTEXT 2Â²â´-1 ä¸ªå­—èŠ‚ L+3ä¸ªå­—èŠ‚ ä¸­ç­‰å¤§å°çš„å­—ç¬¦ä¸² LONGTEXT 2Â³Â²-1 ä¸ªå­—èŠ‚ L+4ä¸ªå­—èŠ‚ å¤§å‹çš„å­—ç¬¦ä¸² M ä»£è¡¨è¯¥æ•°æ®ç±»å‹æœ€å¤šèƒ½å­˜å‚¨çš„å­—ç¬¦æ•°é‡ï¼ŒL ä»£è¡¨æˆ‘ä»¬å®é™…å‘è¯¥ç±»å‹çš„å±æ€§ä¸­å­˜å‚¨çš„å­—ç¬¦ä¸²åœ¨ç‰¹å®šå­—ç¬¦é›†ä¸‹æ‰€å çš„å­—èŠ‚æ•°ï¼ŒWä»£è¡¨åœ¨è¯¥ç‰¹å®šå­—ç¬¦é›†ä¸‹ï¼Œç¼–ç ä¸€ä¸ªå­—ç¬¦æœ€å¤šéœ€è¦çš„å­—èŠ‚æ•°ã€‚ VARCHAR(M) ä¸­çš„Mä¹Ÿæ˜¯ä»£è¡¨è¯¥ç±»å‹æœ€å¤šå¯ä»¥å­˜å‚¨çš„å­—ç¬¦æ•°é‡ï¼Œç†è®ºä¸Šçš„å–å€¼èŒƒå›´æ˜¯ 1~65535ã€‚ä½†æ˜¯MySQLä¸­è¿˜æœ‰ä¸€ä¸ªè§„å®šï¼Œè¡¨ä¸­æŸä¸€è¡ŒåŒ…å«çš„æ‰€æœ‰åˆ—ä¸­å­˜å‚¨çš„æ•°æ®å¤§å°æ€»å…±ä¸å¾—è¶…è¿‡ 65535 ä¸ªå­—èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´ VARCHAR(M) ç±»å‹å®é™…èƒ½å¤Ÿå®¹çº³çš„å­—ç¬¦æ•°é‡æ˜¯å°äº 65535 çš„ã€‚ ","date":"2019-06-15","objectID":"/mysql-data-type/:7:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#å­—ç¬¦ä¸²"},{"categories":["mysql"],"content":" å‚è€ƒ åœ¨çº¿è¿›åˆ¶è½¬æ¢ MySQLæ•°æ®ç±»å‹ ","date":"2019-06-15","objectID":"/mysql-data-type/:8:0","series":null,"tags":["mysql"],"title":"mysql å¸¸è§æ•°æ®ç±»å‹","uri":"/mysql-data-type/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"é˜¿é‡Œäº‘,SSL,å…è´¹è¯ä¹¦ä½¿ç”¨,aliyun,ali,è¯ä¹¦,TLS","date":"2019-06-07","objectID":"/ali-ssl/","series":null,"tags":["SSL","aliyun"],"title":"é˜¿é‡Œäº‘ SSL å…è´¹è¯ä¹¦ä½¿ç”¨","uri":"/ali-ssl/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç”³è¯·è¯ä¹¦ç”³è¯·åœ°å€ ç”³è¯·å®Œæˆé¡µé¢ å°†ä¸»æœºè®°å½•è§£æ å°†ä¸»æœºè®°å½•å’Œè®°å½•å€¼å¡«å†™ è§£ææˆåŠŸåä¸‹è½½è¯ä¹¦ æˆ‘ç”¨çš„æ˜¯ Apache ,æ‰€ä»¥ä¸‹è½½çš„æ˜¯ Apache ","date":"2019-06-07","objectID":"/ali-ssl/:1:0","series":null,"tags":["SSL","aliyun"],"title":"é˜¿é‡Œäº‘ SSL å…è´¹è¯ä¹¦ä½¿ç”¨","uri":"/ali-ssl/#ç”³è¯·"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¸Šä¼ è¯ä¹¦ç”±äºæœ¬äººä½¿ç”¨çš„æ˜¯ apache ,ä»¥ä¸‹é…ç½®æ˜¯ apache çš„é€šç”¨é…ç½®,å…·ä½“å¯å‚çœ‹å®˜æ–¹ æ–‡æ¡£ åœ¨ apache çš„è·¯å¾„ä¸‹æ–°å»ºä¸€ä¸ª cert ç›®å½•,å…¶å®è¯¥ç›®å½•å»ºåœ¨å“ªé‡Œéƒ½å¯ä»¥,ä½†æ˜¯æ”¾åœ¨ apache ä¸‹æ–¹ä¾¿ç®¡ç†ã€‚ åœ¨ cert ç›®å½•ä¸‹å¯ä»¥å»ºä¸åŒçš„æ–‡ä»¶å¤¹æ”¾åœ¨ä¸åŒåŸŸåæˆ–å­åŸŸåçš„ ssl æ–‡ä»¶ã€‚ æŠŠæˆ‘ä»¬åˆšæ‰ä¸‹è½½çš„è¯ä¹¦ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Š ","date":"2019-06-07","objectID":"/ali-ssl/:2:0","series":null,"tags":["SSL","aliyun"],"title":"é˜¿é‡Œäº‘ SSL å…è´¹è¯ä¹¦ä½¿ç”¨","uri":"/ali-ssl/#ä¸Šä¼ è¯ä¹¦"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®è¿™æ˜¯åŸºæœ¬çš„é…ç½®è¯­å¥ # æ·»åŠ  SSL åè®®æ”¯æŒåè®®ï¼Œå»æ‰ä¸å®‰å…¨çš„åè®® SSLProtocol all -SSLv2 -SSLv3 # ä¿®æ”¹åŠ å¯†å¥—ä»¶å¦‚ä¸‹ SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM SSLHonorCipherOrder on # è¯ä¹¦å…¬é’¥é…ç½® SSLCertificateFile cert/a_public.crt # è¯ä¹¦ç§é’¥é…ç½® SSLCertificateKeyFile cert/a.key # è¯ä¹¦é“¾é…ç½®ï¼Œå¦‚æœè¯¥å±æ€§å¼€å¤´æœ‰ '#'å­—ç¬¦ï¼Œè¯·åˆ é™¤æ‰ SSLCertificateChainFile cert/a_chain.crt æˆ‘ä»¬å°†é»˜è®¤çš„é…ç½® copy ä¸€ä»½å‡ºæ¥,å–ä¸€ä¸ªè·ŸåŸŸåæœ‰å…³çš„æ–‡ä»¶å cp /etc/apache2/sites-available/000-default.conf /etc/apache2/sites-available/www.xiaobinqt.cn.conf å…·ä½“é…ç½®å¯å‚è€ƒ \u003cVirtualHost *:80\u003e ServerName www.xiaobinqt.cn Redirect permanent / https://www.xiaobinqt.cn/ \u003c/VirtualHost\u003e \u003cVirtualHost *:443\u003e SSLEngine On # æ·»åŠ  SSL åè®®æ”¯æŒåè®®ï¼Œå»æ‰ä¸å®‰å…¨çš„åè®® SSLProtocol all -SSLv2 -SSLv3 # ä¿®æ”¹åŠ å¯†å¥—ä»¶å¦‚ä¸‹ SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM SSLHonorCipherOrder on # è¯ä¹¦å…¬é’¥é…ç½® SSLCertificateFile cert/xiaobinqt.cn/2324042_www.xiaobinqt.cn_public.crt # è¯ä¹¦ç§é’¥é…ç½® SSLCertificateKeyFile cert/xiaobinqt.cn/2324042_www.xiaobinqt.cn.key # è¯ä¹¦é“¾é…ç½®ï¼Œå¦‚æœè¯¥å±æ€§å¼€å¤´æœ‰ '#'å­—ç¬¦ï¼Œè¯·åˆ é™¤æ‰ SSLCertificateChainFile cert/xiaobinqt.cn/2324042_www.xiaobinqt.cn_chain.crt # etc ServerName www.xiaobinqt.cn ProxyPreserveHost On ProxyRequests Off ProxyPass / http://localhost:30007/ ProxyPassReverse / http://localhost:30007/ \u003c/VirtualHost\u003e æˆ‘ç”¨çš„æ˜¯ docker æœåŠ¡,å¦‚æœä½ çš„åªæ˜¯é¡¹ç›®æ–‡ä»¶å¤¹å¯ä»¥å‚è€ƒè¿™æ ·é…ç½® \u003cVirtualHost *:80\u003e # The ServerName directive sets the request scheme, hostname and port that # the server uses to identify itself. This is used when creating # redirection URLs. In the context of virtual hosts, the ServerName # specifies what hostname must appear in the request's Host: header to # match this virtual host. For the default virtual host (this file) this # value is not decisive as it is used as a last resort host regardless. # However, you must set it for any further virtual host explicitly. #ServerName www.example.com #ServerAdmin webmaster@localhost ServerName www.xiaobinqt.cn DocumentRoot /var/www/html Redirect permanent / https://www.xiaobinqt.cn/ # Available loglevels: trace8, ..., trace1, debug, info, notice, warn, # error, crit, alert, emerg. # It is also possible to configure the loglevel for particular # modules, e.g. #LogLevel info ssl:warn ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined # For most configuration files from conf-available/, which are # enabled or disabled at a global level, it is possible to # include a line for only one particular virtual host. For example the # following line enables the CGI configuration for this host only # after it has been globally disabled with \"a2disconf\". #Include conf-available/serve-cgi-bin.conf \u003c/VirtualHost\u003e \u003cVirtualHost *:443\u003e SSLEngine On # æ·»åŠ  SSL åè®®æ”¯æŒåè®®ï¼Œå»æ‰ä¸å®‰å…¨çš„åè®® SSLProtocol all -SSLv2 -SSLv3 # ä¿®æ”¹åŠ å¯†å¥—ä»¶å¦‚ä¸‹ SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM SSLHonorCipherOrder on # è¯ä¹¦å…¬é’¥é…ç½® SSLCertificateFile cert/xiaobinqt.cn/public.pem # è¯ä¹¦ç§é’¥é…ç½® SSLCertificateKeyFile cert/xiaobinqt.cn/214792197160511.key # è¯ä¹¦é“¾é…ç½®ï¼Œå¦‚æœè¯¥å±æ€§å¼€å¤´æœ‰ '#'å­—ç¬¦ï¼Œè¯·åˆ é™¤æ‰ SSLCertificateChainFile cert/xiaobinqt.cn/chain.pem # etc ServerName www.xiaobinqt.cn \u003c/VirtualHost\u003e ä»¥ä¸Šé…ç½®å…¨éƒ¨åŸºäº apacheï¼Œå¦‚æœä½ ç”¨çš„ä¸æ˜¯ apacheï¼Œä»¥ä¸Šé…ç½®å¯èƒ½ä¸é€‚åˆä½ ã€‚å…³äº apache æœåŠ¡çš„ä¸€äº›å…¶ä»–çŸ¥è¯†å¯ä»¥å‚è€ƒè¿™ç¯‡ æ–‡ç«  https://www.linode.com/docs/web-servers/lamp/install-lamp-stack-on-ubuntu-16-04/,è¯¥æ–‡ç« å¯èƒ½éœ€è¦ç¿»~å¢™è®¿é—®. é…ç½®å®Œæˆåé‡å¯æœåŠ¡,å¯ä»¥åˆ©ç”¨ curl å‘½ä»¤æŸ¥çœ‹æ˜¯å¦é…ç½®æˆåŠŸ. curl -I localhost:xxx å¯¹äº ssl æ˜¯å¦é…ç½®æˆåŠŸå¯ä»¥é€šè¿‡æµè§ˆå™¨æŸ¥çœ‹ï¼š å¯ä»¥çœ‹åˆ°è¿™æ˜¯æˆ‘ä»¬æœ€æ–°ç”³è¯·çš„ä¸€å¹´çš„ ssl è¯ä¹¦ï¼š ","date":"2019-06-07","objectID":"/ali-ssl/:3:0","series":null,"tags":["SSL","aliyun"],"title":"é˜¿é‡Œäº‘ SSL å…è´¹è¯ä¹¦ä½¿ç”¨","uri":"/ali-ssl/#é…ç½®"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,docker compose ä½¿ç”¨æ–¹æ³•,docker compose å¦‚ä½•æ˜ å°„ç«¯å£,docker compose å¸¸ç”¨å‘½ä»¤,dokcer compose æŒ‡å®šé•œåƒ,æ–‡ä»¶æŒ‚è½½,ä½¿ç”¨æ•°æ®å·","date":"2019-05-21","objectID":"/docker-compose/","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œç»å¸¸ä¼šç¢°åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆæ¥å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æƒ…å†µã€‚ä¾‹å¦‚è¦å®ç°ä¸€ä¸ª Web é¡¹ç›®ï¼Œé™¤äº† Web æœåŠ¡å®¹å™¨æœ¬èº«ï¼Œå¾€å¾€è¿˜éœ€è¦å†åŠ ä¸Šåç«¯çš„æ•°æ®åº“æœåŠ¡å®¹å™¨ï¼Œç”šè‡³è¿˜åŒ…æ‹¬å‰ç«¯çš„è´Ÿè½½å‡è¡¡å®¹å™¨ç­‰ã€‚Compose æ°å¥½æ»¡è¶³äº†è¿™æ ·çš„éœ€æ±‚ã€‚Compose å®šä½æ˜¯å®šä¹‰å’Œè¿è¡Œå¤šä¸ªDockerå®¹å™¨çš„åº”ç”¨ã€‚ Compose å…è®¸ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„ docker-compose.yml æ¨¡æ¿æ–‡ä»¶ï¼ˆYAMLæ ¼å¼ï¼‰æ¥å®šä¹‰ä¸€ç»„ç›¸å…³è”çš„åº”ç”¨å®¹å™¨ä¸ºä¸€ä¸ªæœåŠ¡æ ˆstackã€‚ Composeä¸­æœ‰å‡ ä¸ªé‡è¦çš„æ¦‚å¿µï¼š ä»»åŠ¡taskï¼šä¸€ä¸ªå®¹å™¨è¢«ç§°ä¸ºä¸€ä¸ªä»»åŠ¡ã€‚ä»»åŠ¡æ‹¥æœ‰ç‹¬ä¸€æ— äºŒçš„IDï¼Œåœ¨åŒä¸€ä¸ªæœåŠ¡ä¸­çš„å¤šä¸ªä»»åŠ¡åºå·ä¾æ¬¡é€’å¢ã€‚ æœåŠ¡serviceï¼šæŸä¸ªç›¸åŒåº”ç”¨é•œåƒçš„å®¹å™¨å‰¯æœ¬é›†åˆï¼Œä¸€ä¸ªæœåŠ¡å¯ä»¥æ¨ªå‘æ‰©å±•ä¸ºå¤šä¸ªå®¹å™¨å®ä¾‹ã€‚ æœåŠ¡æ ˆstackï¼šç”±å¤šä¸ªæœåŠ¡ç»„æˆï¼Œç›¸äº’é…åˆå®Œæˆç‰¹å®šä¸šåŠ¡ï¼Œå¦‚Webåº”ç”¨æœåŠ¡ã€æ•°æ®åº“æœåŠ¡å…±åŒæ„æˆWebæœåŠ¡æ ˆï¼Œä¸€èˆ¬ç”±ä¸€ä¸ªdocker-compose.ymlæ–‡ä»¶å®šä¹‰ã€‚ Compose çš„é»˜è®¤ç®¡ç†å¯¹è±¡æ˜¯æœåŠ¡æ ˆï¼Œé€šè¿‡å­å‘½ä»¤å¯¹æ ˆä¸­çš„å¤šä¸ªæœåŠ¡è¿›è¡Œä¾¿æ·çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚ ","date":"2019-05-21","objectID":"/docker-compose/:0:0","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ CMD è¯´æ˜ docker-compose up æ ¹æ® docker-compose.yml ä¸­é…ç½®çš„å†…å®¹ï¼Œåˆ›å»ºæ‰€æœ‰çš„å®¹å™¨ã€ç½‘ç»œã€æ•°æ®å·ç­‰ç­‰å†…å®¹ï¼Œå¹¶å°†å®ƒä»¬å¯åŠ¨ã€‚ docker-compose down åœæ­¢æ‰€æœ‰çš„å®¹å™¨ï¼Œå¹¶å°†å®ƒä»¬åˆ é™¤ï¼ŒåŒæ—¶æ¶ˆé™¤ç½‘ç»œç­‰é…ç½®å†…å®¹ã€‚ docker-compose logs æœåŠ¡å æŸ¥çœ‹æœåŠ¡æ—¥å¿— å¸¸ç”¨ compose å‘½ä»¤ å…·ä½“å¯ä»¥å‚è€ƒ https://yeasy.gitbook.io/docker_practice/compose/commands https://weread.qq.com/web/reader/57f327107162732157facd6kbd432fb02a1bd4c9ab736c3 docker-compose å‘½ä»¤é»˜è®¤ä¼šè¯†åˆ«å½“å‰æ§åˆ¶å°æ‰€åœ¨ç›®å½•å†…çš„ docker-compose.yml æ–‡ä»¶ï¼Œä¼šä»¥è¿™ä¸ªç›®å½•çš„åå­—ä½œä¸ºç»„è£…çš„åº”ç”¨é¡¹ç›®çš„åç§°ã€‚å¦‚æœéœ€è¦æ”¹å˜å®ƒä»¬ï¼Œå¯ä»¥é€šè¿‡é€‰é¡¹ -f æ¥ä¿®æ”¹è¯†åˆ«çš„ Docker Compose é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡ -p é€‰é¡¹æ¥å®šä¹‰é¡¹ç›®åğŸ‘‡ã€‚ docker-compose -f ./compose/docker-compose.yml -p myapp up -d ","date":"2019-05-21","objectID":"/docker-compose/:1:0","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#å¸¸ç”¨å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®é¡¹ å¸¸è§é…ç½®é¡¹ å…·ä½“å¯ä»¥å‚çœ‹ https://yeasy.gitbook.io/docker_practice/compose/compose_file https://weread.qq.com/web/reader/57f327107162732157facd6kb73329202a0b73ce398cadd ","date":"2019-05-21","objectID":"/docker-compose/:2:0","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#é…ç½®é¡¹"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¤ºä¾‹è¯´æ˜ version: \"3\" services: redis: image: redis:3.2 networks: - backend volumes: - ./redis/redis.conf:/etc/redis.conf:ro ports: - \"6379:6379\" command: [ \"redis-server\", \"/etc/redis.conf\" ] database: image: mysql:5.7 networks: - backend volumes: - ./mysql/my.cnf:/etc/mysql/my.cnf:ro - mysql-data:/var/lib/mysql environment: - MYSQL_ROOT_PASSWORD=my-secret-pw ports: - \"3306:3306\" webapp: build: ./webapp networks: - frontend - backend volumes: - ./webapp:/webapp depends_on: - redis - database nginx: image: nginx:1.12 networks: - frontend volumes: - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro - ./nginx/conf.d:/etc/nginx/conf.d:ro - ./webapp/html:/webapp/html depends_on: - webapp ports: - \"80:80\" - \"443:443\" networks: frontend: backend: volumes: mysql-data: â˜ï¸å¦‚ä¸Šï¼š versionï¼Œè¿™ä¸ªé…ç½®æ˜¯å¯é€‰çš„ï¼Œä»£è¡¨å®šä¹‰çš„ docker-compose.yml æ–‡ä»¶å†…å®¹æ‰€é‡‡ç”¨çš„ç‰ˆæœ¬ï¼Œç›®å‰ Docker Compose çš„é…ç½®æ–‡ä»¶å·²ç»è¿­ä»£è‡³äº†ç¬¬ä¸‰ç‰ˆã€‚ services ï¼Œæ˜¯æ•´ä¸ª docker-compose.yml çš„æ ¸å¿ƒï¼Œserviceså®šä¹‰äº†å®¹å™¨çš„å„é¡¹ç»†èŠ‚ã€‚ åœ¨ Docker Compose é‡Œä¸ç›´æ¥ä½“ç°å®¹å™¨è¿™ä¸ªæ¦‚å¿µï¼Œè€Œæ˜¯æŠŠ service ä½œä¸ºé…ç½®çš„æœ€å°å•å…ƒã€‚è™½ç„¶çœ‹ä¸Šå»æ¯ä¸ª service é‡Œçš„é…ç½®å†…å®¹å°±åƒæ˜¯åœ¨é…ç½®å®¹å™¨ï¼Œä½†å…¶å® service ä»£è¡¨çš„æ˜¯ä¸€ä¸ªåº”ç”¨é›†ç¾¤çš„é…ç½®ã€‚ ","date":"2019-05-21","objectID":"/docker-compose/:3:0","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#ç¤ºä¾‹è¯´æ˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®šä¹‰æœåŠ¡åœ¨ä½¿ç”¨ docker compose æ—¶ï¼Œå¯ä»¥ä¸ºä¸ºæ¯ä¸ªæœåŠ¡å®šä¹‰ä¸€ä¸ªåç§°ï¼Œç”¨ä»¥åŒºåˆ«ä¸åŒçš„æœåŠ¡ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œredisã€databaseã€webappã€nginxå°±æ˜¯æœåŠ¡çš„åç§°ã€‚ ","date":"2019-05-21","objectID":"/docker-compose/:3:1","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#å®šä¹‰æœåŠ¡"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æŒ‡å®šé•œåƒå®¹å™¨æœ€åŸºç¡€çš„å°±æ˜¯é•œåƒï¼Œè€Œæ¯ä¸ªæœåŠ¡å¿…é¡»æŒ‡å®šé•œåƒã€‚åœ¨ Docker Compose é‡Œï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼ä¸ºæœåŠ¡æŒ‡å®šæ‰€é‡‡ç”¨çš„é•œåƒã€‚ ä¸€ç§æ˜¯é€šè¿‡ image è¿™ä¸ªé…ç½®ï¼Œç»™å‡ºèƒ½åœ¨é•œåƒä»“åº“ä¸­æ‰¾åˆ°é•œåƒçš„åç§°å³å¯ã€‚ å¦å¤–ä¸€ç§æŒ‡å®šé•œåƒçš„æ–¹å¼å°±æ˜¯ç›´æ¥é‡‡ç”¨ Dockerfile æ¥æ„å»ºé•œåƒï¼Œé€šè¿‡ build è¿™ä¸ªé…ç½®èƒ½å¤Ÿå®šä¹‰æ„å»ºçš„ç¯å¢ƒç›®å½•ï¼Œå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼æŒ‡å®šé•œåƒï¼ŒDocker Compose å…ˆä¼šå¸®åŠ©æˆ‘ä»¬æ‰§è¡Œé•œåƒçš„æ„å»ºï¼Œä¹‹åå†é€šè¿‡è¿™ä¸ªé•œåƒå¯åŠ¨å®¹å™¨ã€‚ åœ¨docker buildé‡Œè¿˜èƒ½é€šè¿‡é€‰é¡¹å®šä¹‰è®¸å¤šå†…å®¹ï¼Œè¿™äº›åœ¨ Docker Compose é‡Œä¾ç„¶å¯ä»¥ğŸ‘‡ï¼Œæˆ‘ä»¬èƒ½å¤ŸæŒ‡å®šæ›´å¤šçš„é•œåƒæ„å»ºå‚æ•°ï¼Œä¾‹å¦‚ Dockerfile çš„æ–‡ä»¶åï¼Œæ„å»ºå‚æ•°ç­‰ç­‰ã€‚ webapp: build: context: ./webapp dockerfile: webapp-dockerfile args: - JAVA_VERSION=1.6 ","date":"2019-05-21","objectID":"/docker-compose/:3:2","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#æŒ‡å®šé•œåƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¾èµ–å£°æ˜å¦‚æœæœåŠ¡é—´æœ‰éå¸¸å¼ºçš„ä¾èµ–å…³ç³»ï¼Œå°±å¿…é¡»å‘ŠçŸ¥ Docker Compose å®¹å™¨çš„å…ˆåå¯åŠ¨é¡ºåºã€‚åªæœ‰å½“è¢«ä¾èµ–çš„å®¹å™¨å®Œå…¨å¯åŠ¨åï¼ŒDocker Compose æ‰ä¼šåˆ›å»ºå’Œå¯åŠ¨è¿™ä¸ªå®¹å™¨ã€‚ å®šä¹‰ä¾èµ–çš„æ–¹å¼å¾ˆç®€å•ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå°±æ˜¯ depends_on è¿™ä¸ªé…ç½®é¡¹ï¼Œåªéœ€è¦é€šè¿‡å®ƒåˆ—å‡ºè¿™ä¸ªæœåŠ¡æ‰€æœ‰ä¾èµ–çš„å…¶ä»–æœåŠ¡å³å¯ã€‚åœ¨ Docker Compose ä¸ºæˆ‘ä»¬å¯åŠ¨é¡¹ç›®çš„æ—¶å€™ï¼Œä¼šæ£€æŸ¥æ‰€æœ‰ä¾èµ–ï¼Œå½¢æˆæ­£ç¡®çš„å¯åŠ¨é¡ºåºå¹¶æŒ‰è¿™ä¸ªé¡ºåºæ¥ä¾æ¬¡å¯åŠ¨å®¹å™¨ã€‚ ","date":"2019-05-21","objectID":"/docker-compose/:3:3","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#ä¾èµ–å£°æ˜"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ–‡ä»¶æŒ‚è½½Docker Compose é‡Œå®šä¹‰æ–‡ä»¶æŒ‚è½½çš„æ–¹å¼ä¸ Docker Engine é‡Œä¹Ÿå¹¶æ²¡æœ‰å¤ªå¤šçš„åŒºåˆ«ï¼Œä½¿ç”¨ volumes é…ç½®å¯ä»¥åƒ docker CLI é‡Œçš„ -v é€‰é¡¹ä¸€æ ·æ¥æŒ‡å®šå¤–éƒ¨æŒ‚è½½å’Œæ•°æ®å·æŒ‚è½½ã€‚ åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œå¯ä»¥çœ‹åˆ°å‡ ç§å¸¸ç”¨æŒ‚è½½çš„æ–¹å¼ã€‚æˆ‘ä»¬èƒ½å¤Ÿç›´æ¥æŒ‚è½½å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç›®å½•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ•°æ®å·çš„å½¢å¼æŒ‚è½½å†…å®¹ã€‚ å¯ä»¥ç›´æ¥æŒ‡å®šç›¸å¯¹ç›®å½•è¿›è¡ŒæŒ‚è½½ï¼Œè¿™é‡Œçš„ç›¸å¯¹ç›®å½•æ˜¯æŒ‡ç›¸å¯¹äº docker-compose.yml æ–‡ä»¶çš„ç›®å½•ã€‚ ","date":"2019-05-21","objectID":"/docker-compose/:3:4","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#æ–‡ä»¶æŒ‚è½½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä½¿ç”¨æ•°æ®å·ç‹¬ç«‹äº services çš„ volumes é…ç½®å°±æ˜¯ç”¨æ¥å£°æ˜æ•°æ®å·çš„ã€‚å®šä¹‰æ•°æ®å·æœ€ç®€å•çš„æ–¹å¼ä»…éœ€è¦æä¾›æ•°æ®å·çš„åç§°ã€‚ å¦‚æœæƒ³æŠŠå±äº Docker Compose é¡¹ç›®ä»¥å¤–çš„æ•°æ®å·å¼•å…¥è¿›æ¥ç›´æ¥ä½¿ç”¨ï¼Œå¯ä»¥å°†æ•°æ®å·å®šä¹‰ä¸ºå¤–éƒ¨å¼•å…¥ï¼Œé€šè¿‡ external è¿™ä¸ªé…ç½®å°±èƒ½å®Œæˆè¿™ä¸ªå®šä¹‰ã€‚ volumes: mysql-data: external: true åœ¨åŠ å…¥ external å®šä¹‰åï¼ŒDocker Compose åœ¨åˆ›å»ºé¡¹ç›®æ—¶ä¸ä¼šç›´æ¥åˆ›å»ºæ•°æ®å·ï¼Œè€Œæ˜¯ä¼˜å…ˆä» Docker Engine ä¸­å·²æœ‰çš„æ•°æ®å·é‡Œå¯»æ‰¾å¹¶ç›´æ¥é‡‡ç”¨ã€‚ ","date":"2019-05-21","objectID":"/docker-compose/:3:5","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#ä½¿ç”¨æ•°æ®å·"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç«¯å£æ˜ å°„ports è¿™ä¸ªé…ç½®é¡¹ï¼Œå®ƒæ˜¯ç”¨æ¥å®šä¹‰ç«¯å£æ˜ å°„çš„ã€‚å¯ä»¥åˆ©ç”¨å®ƒè¿›è¡Œå®¿ä¸»æœºä¸å®¹å™¨ç«¯å£çš„æ˜ å°„ï¼Œè¿™ä¸ªé…ç½®ä¸ docker CLI ä¸­ -p é€‰é¡¹çš„ä½¿ç”¨æ–¹æ³•æ˜¯è¿‘ä¼¼çš„ã€‚ ç”±äº YAML æ ¼å¼å¯¹ xx:yy è¿™ç§æ ¼å¼çš„è§£ææœ‰ç‰¹æ®Šæ€§ï¼Œåœ¨è®¾ç½®å°äº 60 çš„å€¼æ—¶ï¼Œä¼šè¢«å½“æˆæ—¶é—´è€Œä¸æ˜¯å­—ç¬¦ä¸²æ¥å¤„ç†ï¼Œæ‰€ä»¥æœ€å¥½ä½¿ç”¨å¼•å·å°†ç«¯å£æ˜ å°„çš„å®šä¹‰åŒ…è£¹èµ·æ¥ï¼Œé¿å…æ­§ä¹‰ã€‚ ","date":"2019-05-21","objectID":"/docker-compose/:3:6","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#ç«¯å£æ˜ å°„"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ https://docs.docker.com/compose/ Docker-å…¥é—¨åˆ°å®è·µ ","date":"2019-05-21","objectID":"/docker-compose/:4:0","series":null,"tags":["docker"],"title":"Docker Compose ç¬”è®°","uri":"/docker-compose/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"gitä½¿ç”¨ï¼Œgitï¼ŒgitåŸºæœ¬æ“ä½œï¼Œgit clone,git push,git remote,.gitignore,git pull,git status,git add,git commit,git log,git diff,git rebase,git merge,git stash,git rebase,git rebase --continue,git rebase --skip,git rebase --abort,git","date":"2019-03-23","objectID":"/git-glance/","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åŸºæœ¬æ¦‚å¿µ åŸºæœ¬æ¦‚å¿µ git work ","date":"2019-03-23","objectID":"/git-glance/:1:0","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#åŸºæœ¬æ¦‚å¿µ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" .gitignoreæ–‡ä»¶ # æ­¤ä¸ºæ³¨é‡Š â€“ å°†è¢« Git å¿½ç•¥ *.a # å¿½ç•¥æ‰€æœ‰ .a ç»“å°¾çš„æ–‡ä»¶ !lib.a # ä½† lib.a é™¤å¤– /TODO # ä»…ä»…å¿½ç•¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ TODO æ–‡ä»¶ï¼Œä¸åŒ…æ‹¬ subdir/TODO build/ # å¿½ç•¥ build/ ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ doc/*.txt # ä¼šå¿½ç•¥ doc/notes.txt ä½†ä¸åŒ…æ‹¬ doc/server/arch.txt ","date":"2019-03-23","objectID":"/git-glance/:2:0","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#gitignoreæ–‡ä»¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git å¸¸ç”¨å‘½ä»¤","date":"2019-03-23","objectID":"/git-glance/:3:0","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-å¸¸ç”¨å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git resetå½“å·²ç»æŠŠä»£ç ä»æš‚å­˜åŒºæäº¤åˆ°ç‰ˆæœ¬åº“äº†ï¼Œgit restå‘½ä»¤å¯ä»¥æ¢å¤åˆ°æš‚å­˜åŒºçš„çŠ¶æ€ã€‚ git rest --hard HEAD $commit_idï¼Œå¦‚æœåªä¼šé€€ä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^ï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^^ï¼Œå½“ç„¶å¾€ä¸Š100ä¸ªç‰ˆæœ¬å†™100ä¸ª^æ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆHEAD~100ã€‚ å¦‚æœçŸ¥é“ commit id çš„è¯ï¼Œå¯ä»¥ç›´æ¥ç”¨ commit idï¼Œcommit id æ²¡å¿…è¦å†™å…¨ï¼Œå‰6ä½åŸºæœ¬å°±å¯ä»¥ç”¨ï¼Œgitä¼šè‡ªåŠ¨å»æ‰¾ã€‚ commit id å¯ä»¥é€šè¿‡git logå‘½ä»¤æŸ¥çœ‹ï¼Œæ ¼å¼åŒ–logå¯ä»¥ä½¿ç”¨git log --pretty=oneline git log --pretty=oneline --hard å‚æ•°çš„ä½œç”¨å½“æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ï¼Œå¹¶ä¸” add åˆ°äº†æš‚å­˜åŒºï¼Œgit reset å‘½ä»¤ä¼šæŠŠæ–‡ä»¶çŠ¶æ€æ¢å¤åˆ°æœ€åˆçš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä»æš‚å­˜åŒºæ’¤é”€æ‰ï¼Œæ­¤æ—¶è·Ÿgit reset HEAD å‘½ä»¤ä¸€æ ·ã€‚ å¦‚æœæ–‡ä»¶ä»æš‚å­˜åŒº commit äº†ï¼Œè¯´æ˜å·²ç»ç”Ÿæˆäº†æœ€æ–°çš„ç‰ˆæœ¬å·äº†ï¼Œæ­¤æ—¶å›é€€ï¼Œåˆ™éœ€è¦å›é€€åˆ°ä¹‹å‰çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœçŸ¥é“å‰ä¸€ä¸ªç‰ˆæœ¬çš„ç‰ˆæœ¬å·ï¼Œgit reset ç‰ˆæœ¬å·è¿™æ ·å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬ä¸ä¼šå»è®°ç‰ˆæœ¬å·ï¼Œ å¯ä»¥æ‰§è¡Œgit log å‘½ä»¤å»æŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ git reset HEAD^ å‘½ä»¤ç”¨äºå›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œä¼šé‡æ–°å›åˆ°å·¥ä½œåŒºï¼Œä¹Ÿå°±æ˜¯ add ä¹‹å‰çš„çŠ¶æ€ã€‚ å¦‚æœä½¿ç”¨äº† --hard å‚æ•°ä¼šè¿å·¥ä½œåŒºçš„çŠ¶æ€å†…å®¹ä¹Ÿä¿®æ”¹äº†ã€‚ ä»¥ä¸‹æ˜¯åŒæ ·çš„ commit ä¹‹åï¼Œä¸åŠ  --hard å‚æ•°å’Œä½¿ç”¨ --hard å‚æ•°çš„åŒºåˆ«ï¼š ä¸ä½¿ç”¨ --hard å‚æ•° ä½¿ç”¨ --hard å‚æ•° ","date":"2019-03-23","objectID":"/git-glance/:3:1","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-reset"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git resetå½“å·²ç»æŠŠä»£ç ä»æš‚å­˜åŒºæäº¤åˆ°ç‰ˆæœ¬åº“äº†ï¼Œgit restå‘½ä»¤å¯ä»¥æ¢å¤åˆ°æš‚å­˜åŒºçš„çŠ¶æ€ã€‚ git rest --hard HEAD $commit_idï¼Œå¦‚æœåªä¼šé€€ä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^ï¼Œä¸Šä¸Šä¸€ä¸ªç‰ˆæœ¬å°±æ˜¯HEAD^^ï¼Œå½“ç„¶å¾€ä¸Š100ä¸ªç‰ˆæœ¬å†™100ä¸ª^æ¯”è¾ƒå®¹æ˜“æ•°ä¸è¿‡æ¥ï¼Œæ‰€ä»¥å†™æˆHEAD~100ã€‚ å¦‚æœçŸ¥é“ commit id çš„è¯ï¼Œå¯ä»¥ç›´æ¥ç”¨ commit idï¼Œcommit id æ²¡å¿…è¦å†™å…¨ï¼Œå‰6ä½åŸºæœ¬å°±å¯ä»¥ç”¨ï¼Œgitä¼šè‡ªåŠ¨å»æ‰¾ã€‚ commit id å¯ä»¥é€šè¿‡git logå‘½ä»¤æŸ¥çœ‹ï¼Œæ ¼å¼åŒ–logå¯ä»¥ä½¿ç”¨git log --pretty=oneline git log --pretty=oneline --hard å‚æ•°çš„ä½œç”¨å½“æ–‡ä»¶è¢«ä¿®æ”¹è¿‡ï¼Œå¹¶ä¸” add åˆ°äº†æš‚å­˜åŒºï¼Œgit reset å‘½ä»¤ä¼šæŠŠæ–‡ä»¶çŠ¶æ€æ¢å¤åˆ°æœ€åˆçš„çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯ä»æš‚å­˜åŒºæ’¤é”€æ‰ï¼Œæ­¤æ—¶è·Ÿgit reset HEAD å‘½ä»¤ä¸€æ ·ã€‚ å¦‚æœæ–‡ä»¶ä»æš‚å­˜åŒº commit äº†ï¼Œè¯´æ˜å·²ç»ç”Ÿæˆäº†æœ€æ–°çš„ç‰ˆæœ¬å·äº†ï¼Œæ­¤æ—¶å›é€€ï¼Œåˆ™éœ€è¦å›é€€åˆ°ä¹‹å‰çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœçŸ¥é“å‰ä¸€ä¸ªç‰ˆæœ¬çš„ç‰ˆæœ¬å·ï¼Œgit reset ç‰ˆæœ¬å·è¿™æ ·å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ä¸€èˆ¬æˆ‘ä»¬ä¸ä¼šå»è®°ç‰ˆæœ¬å·ï¼Œ å¯ä»¥æ‰§è¡Œgit log å‘½ä»¤å»æŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ git reset HEAD^ å‘½ä»¤ç”¨äºå›é€€åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬ï¼Œä¼šé‡æ–°å›åˆ°å·¥ä½œåŒºï¼Œä¹Ÿå°±æ˜¯ add ä¹‹å‰çš„çŠ¶æ€ã€‚ å¦‚æœä½¿ç”¨äº† --hard å‚æ•°ä¼šè¿å·¥ä½œåŒºçš„çŠ¶æ€å†…å®¹ä¹Ÿä¿®æ”¹äº†ã€‚ ä»¥ä¸‹æ˜¯åŒæ ·çš„ commit ä¹‹åï¼Œä¸åŠ  --hard å‚æ•°å’Œä½¿ç”¨ --hard å‚æ•°çš„åŒºåˆ«ï¼š ä¸ä½¿ç”¨ --hard å‚æ•° ä½¿ç”¨ --hard å‚æ•° ","date":"2019-03-23","objectID":"/git-glance/:3:1","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#--hard-å‚æ•°çš„ä½œç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git diff cmd è¯´æ˜ git diff [file] æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚ git diff --cached [file]/git diff --staged [file] æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€æ¬¡æäº¤(commit)çš„å·®å¼‚ ","date":"2019-03-23","objectID":"/git-glance/:3:2","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-diff"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git refloggit reflog ç”¨æ¥è®°å½•ä½ çš„æ¯ä¸€æ¬¡å‘½ä»¤ï¼Œå¯ä»¥æŸ¥çœ‹ä½ æœ€è¿‘æ‰§è¡Œè¿‡çš„å‘½ä»¤ï¼Œå¯ä»¥ç”¨æ¥å›é€€åˆ°æŸä¸€ä¸ªæ—¶åˆ»ã€‚æ‰€ä»¥ä¸ºäº†å¥½æŸ¥è®°å½•ï¼Œcommit -m çš„æäº¤è¯´æ˜æ–‡æ¡ˆå°½é‡å†™æ¸…æ¥šã€‚ git reflog cmd è¯´æ˜ git reflog â€“date=local â€“all | grep dev æŸ¥çœ‹ dev åˆ†æ”¯æ˜¯åŸºäºå“ªä¸ªåˆ†æ”¯åˆ›å»ºçš„ Tips markdown è¡¨æ ¼ä¸­ä½¿ç”¨ | å¯ä»¥ä½¿ç”¨\u0026#124; ","date":"2019-03-23","objectID":"/git-glance/:3:3","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-reflog"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git log git logä¸ä¼ å…¥ä»»ä½•å‚æ•°çš„é»˜è®¤æƒ…å†µä¸‹ï¼Œgit log ä¼šæŒ‰æ—¶é—´å…ˆåé¡ºåºåˆ—å‡ºæ‰€æœ‰çš„æäº¤ï¼Œæœ€è¿‘çš„æ›´æ–°æ’åœ¨æœ€ä¸Šé¢ï¼Œå½“è®°å½•å¤ªå¤šæ—¶ä¼šå‡ºç°åˆ†é¡µï¼Œå¯ä»¥æŒ‰ç©ºæ ¼é”®ç¿»é¡µï¼ŒæŒ‰ q é”®é€€å‡ºã€‚ git log git log --pretty=onelineå°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œåœ¨æµè§ˆå¤§é‡çš„æäº¤æ—¶éå¸¸æœ‰ç”¨ã€‚ git log --pretty=oneline git log --graph --pretty=oneline --abbrev-commit ä»…æ˜¾ç¤º SHA-1 æ ¡éªŒå’Œæ‰€æœ‰ 40 ä¸ªå­—ç¬¦ä¸­çš„å‰å‡ ä¸ªå­—ç¬¦ã€‚--oneline æ˜¯ --pretty=oneline --abbrev-commit åˆç”¨çš„ç®€å†™ã€‚ æ‰€ä»¥ git log --graph --pretty=oneline å¯ä»¥ä¹Ÿå¯ä»¥å†™ä¸º git log --graph --pretty=oneline --abbrev-commitã€‚ --graph åœ¨æ—¥å¿—æ—ä»¥ ASCII å›¾å½¢æ˜¾ç¤ºåˆ†æ”¯ä¸åˆå¹¶å†å²ã€‚ git graph ","date":"2019-03-23","objectID":"/git-glance/:3:4","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-log"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git log git logä¸ä¼ å…¥ä»»ä½•å‚æ•°çš„é»˜è®¤æƒ…å†µä¸‹ï¼Œgit log ä¼šæŒ‰æ—¶é—´å…ˆåé¡ºåºåˆ—å‡ºæ‰€æœ‰çš„æäº¤ï¼Œæœ€è¿‘çš„æ›´æ–°æ’åœ¨æœ€ä¸Šé¢ï¼Œå½“è®°å½•å¤ªå¤šæ—¶ä¼šå‡ºç°åˆ†é¡µï¼Œå¯ä»¥æŒ‰ç©ºæ ¼é”®ç¿»é¡µï¼ŒæŒ‰ q é”®é€€å‡ºã€‚ git log git log --pretty=onelineå°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œåœ¨æµè§ˆå¤§é‡çš„æäº¤æ—¶éå¸¸æœ‰ç”¨ã€‚ git log --pretty=oneline git log --graph --pretty=oneline --abbrev-commit ä»…æ˜¾ç¤º SHA-1 æ ¡éªŒå’Œæ‰€æœ‰ 40 ä¸ªå­—ç¬¦ä¸­çš„å‰å‡ ä¸ªå­—ç¬¦ã€‚--oneline æ˜¯ --pretty=oneline --abbrev-commit åˆç”¨çš„ç®€å†™ã€‚ æ‰€ä»¥ git log --graph --pretty=oneline å¯ä»¥ä¹Ÿå¯ä»¥å†™ä¸º git log --graph --pretty=oneline --abbrev-commitã€‚ --graph åœ¨æ—¥å¿—æ—ä»¥ ASCII å›¾å½¢æ˜¾ç¤ºåˆ†æ”¯ä¸åˆå¹¶å†å²ã€‚ git graph ","date":"2019-03-23","objectID":"/git-glance/:3:4","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-log-1"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git log git logä¸ä¼ å…¥ä»»ä½•å‚æ•°çš„é»˜è®¤æƒ…å†µä¸‹ï¼Œgit log ä¼šæŒ‰æ—¶é—´å…ˆåé¡ºåºåˆ—å‡ºæ‰€æœ‰çš„æäº¤ï¼Œæœ€è¿‘çš„æ›´æ–°æ’åœ¨æœ€ä¸Šé¢ï¼Œå½“è®°å½•å¤ªå¤šæ—¶ä¼šå‡ºç°åˆ†é¡µï¼Œå¯ä»¥æŒ‰ç©ºæ ¼é”®ç¿»é¡µï¼ŒæŒ‰ q é”®é€€å‡ºã€‚ git log git log --pretty=onelineå°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œåœ¨æµè§ˆå¤§é‡çš„æäº¤æ—¶éå¸¸æœ‰ç”¨ã€‚ git log --pretty=oneline git log --graph --pretty=oneline --abbrev-commit ä»…æ˜¾ç¤º SHA-1 æ ¡éªŒå’Œæ‰€æœ‰ 40 ä¸ªå­—ç¬¦ä¸­çš„å‰å‡ ä¸ªå­—ç¬¦ã€‚--oneline æ˜¯ --pretty=oneline --abbrev-commit åˆç”¨çš„ç®€å†™ã€‚ æ‰€ä»¥ git log --graph --pretty=oneline å¯ä»¥ä¹Ÿå¯ä»¥å†™ä¸º git log --graph --pretty=oneline --abbrev-commitã€‚ --graph åœ¨æ—¥å¿—æ—ä»¥ ASCII å›¾å½¢æ˜¾ç¤ºåˆ†æ”¯ä¸åˆå¹¶å†å²ã€‚ git graph ","date":"2019-03-23","objectID":"/git-glance/:3:4","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-log---prettyoneline"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git log git logä¸ä¼ å…¥ä»»ä½•å‚æ•°çš„é»˜è®¤æƒ…å†µä¸‹ï¼Œgit log ä¼šæŒ‰æ—¶é—´å…ˆåé¡ºåºåˆ—å‡ºæ‰€æœ‰çš„æäº¤ï¼Œæœ€è¿‘çš„æ›´æ–°æ’åœ¨æœ€ä¸Šé¢ï¼Œå½“è®°å½•å¤ªå¤šæ—¶ä¼šå‡ºç°åˆ†é¡µï¼Œå¯ä»¥æŒ‰ç©ºæ ¼é”®ç¿»é¡µï¼ŒæŒ‰ q é”®é€€å‡ºã€‚ git log git log --pretty=onelineå°†æ¯ä¸ªæäº¤æ”¾åœ¨ä¸€è¡Œæ˜¾ç¤ºï¼Œåœ¨æµè§ˆå¤§é‡çš„æäº¤æ—¶éå¸¸æœ‰ç”¨ã€‚ git log --pretty=oneline git log --graph --pretty=oneline --abbrev-commit ä»…æ˜¾ç¤º SHA-1 æ ¡éªŒå’Œæ‰€æœ‰ 40 ä¸ªå­—ç¬¦ä¸­çš„å‰å‡ ä¸ªå­—ç¬¦ã€‚--oneline æ˜¯ --pretty=oneline --abbrev-commit åˆç”¨çš„ç®€å†™ã€‚ æ‰€ä»¥ git log --graph --pretty=oneline å¯ä»¥ä¹Ÿå¯ä»¥å†™ä¸º git log --graph --pretty=oneline --abbrev-commitã€‚ --graph åœ¨æ—¥å¿—æ—ä»¥ ASCII å›¾å½¢æ˜¾ç¤ºåˆ†æ”¯ä¸åˆå¹¶å†å²ã€‚ git graph ","date":"2019-03-23","objectID":"/git-glance/:3:4","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-log---graph---prettyoneline-"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git checkout cmd è¯´æ˜ git checkout dev åˆ‡æ¢åˆ°devåˆ†æ”¯ git checkout -- file å¯ä»¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œ git checkout -- readme.txt æ„æ€æ˜¯ï¼ŒæŠŠreadme.txtæ–‡ä»¶åœ¨å·¥ä½œåŒºçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ã€‚ è¿™é‡Œæœ‰ä¸¤ç§æƒ…å†µï¼š 1. readme.txtè‡ªä¿®æ”¹åè¿˜æ²¡æœ‰è¢«æ”¾åˆ°æš‚å­˜åŒºï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°å’Œç‰ˆæœ¬åº“ä¸€æ¨¡ä¸€æ ·çš„çŠ¶æ€ã€‚ 2. readme.txtå·²ç»æ·»åŠ åˆ°æš‚å­˜åŒºåï¼Œåˆä½œäº†ä¿®æ”¹ï¼Œæ’¤é”€ä¿®æ”¹å°±å›åˆ°æ·»åŠ åˆ°æš‚å­˜åŒºåçš„çŠ¶æ€ git checkout -b yourbranchname origin/oldbranchname åœ¨æœ¬åœ°åˆ›å»ºå’Œè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„åˆ†æ”¯ ","date":"2019-03-23","objectID":"/git-glance/:3:5","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-checkout"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git rmgit rm æœ‰ 2 ä¸ªå¸¸ç”¨å‘½ä»¤ï¼š git rm \u003cfile\u003eï¼šåŒæ—¶ä»å·¥ä½œåŒºå’Œç´¢å¼•ä¸­åˆ é™¤æ–‡ä»¶ã€‚å³æœ¬åœ°çš„æ–‡ä»¶ä¹Ÿè¢«åˆ é™¤äº†ï¼Œå¹¶æŠŠæ­¤æ¬¡åˆ é™¤æ“ä½œæäº¤åˆ°äº†æš‚å­˜åŒºã€‚ git rm file git rm --cached ï¼šä»ç´¢å¼•ä¸­åˆ é™¤æ–‡ä»¶ã€‚ä½†æ˜¯æœ¬åœ°æ–‡ä»¶è¿˜å­˜åœ¨ï¼Œåªæ˜¯ä¸å¸Œæœ›è¿™ä¸ªæ–‡ä»¶è¢«ç‰ˆæœ¬æ§åˆ¶ã€‚ git rm --cached å¦‚æœæ˜¯æ–‡ä»¶å¤¹éœ€è¦åŠ ä¸Š -r å‚æ•°ï¼Œæ¯”å¦‚ï¼š git rm -r --cached æ–‡ä»¶/æ–‡ä»¶å¤¹åå­— Tips å…ˆæ‰‹åŠ¨åˆ é™¤æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨git rm \u003cfile\u003eå’Œgit add\u003cfile\u003eæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ ","date":"2019-03-23","objectID":"/git-glance/:3:6","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-rm"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git remote cmd è¯´æ˜ git remote add åå­— åœ°å€ å…³è”ä¸€ä¸ªè¿œç¨‹åº“æ—¶å¿…é¡»ç»™è¿œç¨‹åº“æŒ‡å®šä¸€ä¸ªåå­—ï¼Œå¦‚ï¼šgit remote add origin git@server-name:path/repo-name.git git remote -v æŸ¥çœ‹è¿œç¨‹åº“ä¿¡æ¯ git remote rm \u003cname\u003e è§£é™¤äº†æœ¬åœ°å’Œè¿œç¨‹çš„ç»‘å®šå…³ç³»ï¼Œå¦‚ï¼šgit remote rm origin ","date":"2019-03-23","objectID":"/git-glance/:3:7","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-remote"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git pushæŠŠæœ¬åœ°åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ï¼Œç”¨git pushå‘½ä»¤ï¼Œæ¯”å¦‚ï¼š git push -u origin master å®é™…ä¸Šæ˜¯æŠŠå½“å‰åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹çš„ master åˆ†æ”¯ä¸Šã€‚ åŠ ä¸Šäº†-uå‚æ•°ï¼Œgitä¸ä½†ä¼šæŠŠæœ¬åœ°çš„åˆ†æ”¯å†…å®¹æ¨é€çš„è¿œç¨‹çš„masteråˆ†æ”¯ï¼Œè¿˜ä¼šæŠŠæœ¬åœ°çš„åˆ†æ”¯å’Œè¿œç¨‹çš„masteråˆ†æ”¯å…³è”èµ·æ¥ï¼Œåœ¨ä»¥åçš„æ¨é€æˆ–è€…æ‹‰å–æ—¶å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ï¼Œç›´æ¥ä½¿ç”¨ git pushã€‚ ","date":"2019-03-23","objectID":"/git-glance/:3:8","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-push"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git branch cmd è¯´æ˜ git brahcn -b åˆ†æ”¯å æ–°å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ï¼Œå¦‚æ–°å»ºå¹¶åˆ‡æ¢åˆ°devåˆ†æ”¯ï¼šgit branch -b dev git branch åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼Œå½“å‰åˆ†æ”¯å‰é¢ä¼šæ ‡ä¸€ä¸ª*å· git branch -d åˆ†æ”¯å åˆ é™¤æŸä¸ªåˆ†æ”¯ git branch -a æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼Œè¿œç¨‹åˆ†æ”¯ä¼šç”¨çº¢è‰²è¡¨ç¤ºå‡ºæ¥ï¼ˆå¦‚æœå¼€äº†é¢œè‰²æ”¯æŒçš„è¯ï¼‰ git branch -D \u003cname\u003e å¼ºè¡Œåˆ é™¤ä¸€ä¸ªæ²¡æœ‰è¢«åˆå¹¶è¿‡çš„åˆ†æ”¯ git branch --set-upstream branch-name origin/branch-name å»ºç«‹æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯çš„å…³è” ","date":"2019-03-23","objectID":"/git-glance/:3:9","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-branch"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git mergegit mergeå‘½ä»¤ç”¨äºåˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚å¦‚ï¼šgit merge dev åˆå¹¶ dev åˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯ã€‚ ","date":"2019-03-23","objectID":"/git-glance/:3:10","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-merge"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git switchgit 2.23+ ç‰ˆæœ¬æ”¯æŒäº† switch å‘½ä»¤ç”¨æ¥åˆ‡æ¢åˆ†æ”¯ï¼Œå®é™…ä¸Šï¼Œåˆ‡æ¢åˆ†æ”¯è¿™ä¸ªåŠ¨ä½œï¼Œç”¨switchæ›´å¥½ç†è§£ã€‚ ä¹‹å‰åˆ‡æ¢åˆ†æ”¯ä½¿ç”¨git checkout \u003cbranch\u003eï¼Œè€Œæ’¤é”€ä¿®æ”¹åˆ™æ˜¯git checkout -- \u003cfile\u003eï¼ŒåŒä¸€ä¸ªå‘½ä»¤ï¼Œæœ‰ä¸¤ç§ä½œç”¨ï¼Œç¡®å®æœ‰ç‚¹ä»¤äººè¿·æƒ‘ã€‚ æ“ä½œ version 2.23- version 2.23+ åˆ‡æ¢åˆ†æ”¯ git branch dev git switch dev æ–°å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ git branch -b dev git switch -c dev ","date":"2019-03-23","objectID":"/git-glance/:3:11","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-switch"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git cherry-pickåœ¨åˆå¹¶ä»£ç çš„æ—¶å€™ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š éœ€è¦å¦ä¸€ä¸ªåˆ†æ”¯çš„æ‰€æœ‰ä»£ç å˜åŠ¨ï¼Œé‚£ä¹ˆå°±é‡‡ç”¨åˆå¹¶git mergeã€‚ åªéœ€è¦éƒ¨åˆ†ä»£ç å˜åŠ¨ï¼ˆæŸå‡ ä¸ªæäº¤ï¼‰ï¼Œè¿™æ—¶å¯ä»¥é‡‡ç”¨ cherry pickã€‚ git cherry-pick \u003ccommid_1\u003e \u003ccommit_2\u003e ","date":"2019-03-23","objectID":"/git-glance/:3:12","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-cherry-pick"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" git stashæ–°å¢çš„æ–‡ä»¶ï¼Œç›´æ¥æ‰§è¡Œ git stash æ˜¯ä¸ä¼šè¢«å­˜å‚¨çš„ï¼Œéœ€è¦å…ˆæ‰§è¡Œ git add æŠŠæ–‡ä»¶åŠ åˆ°ç‰ˆæœ¬æ§åˆ¶é‡Œã€‚ æ–‡ä»¶åœ¨ç‰ˆæœ¬æ§åˆ¶é‡Œï¼Œå¹¶ä¸ç­‰äºå°±è¢«stashèµ·æ¥äº†ï¼Œgit add å’Œ git stash æ²¡æœ‰å¿…ç„¶çš„å…³ç³»ï¼Œä½†æ˜¯æ‰§è¡Œ git stash èƒ½æ­£ç¡®å­˜å‚¨çš„å‰ææ˜¯æ–‡ä»¶å¿…é¡»åœ¨ git ç‰ˆæœ¬æ§åˆ¶ä¸­æ‰è¡Œã€‚ å¯ä»¥å¤šæ¬¡stashï¼Œæ¢å¤çš„æ—¶å€™ï¼Œå…ˆç”¨git stash listæŸ¥çœ‹ï¼Œç„¶åæ¢å¤æŒ‡å®šçš„stashã€‚ cmd è¯´æ˜ git stash save \"save message\" æ‰§è¡Œå­˜å‚¨æ—¶ï¼Œæ·»åŠ å¤‡æ³¨ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ï¼Œåªæœ‰git stash ä¹Ÿè¦å¯ä»¥çš„ï¼Œä½†æŸ¥æ‰¾æ—¶ä¸æ–¹ä¾¿è¯†åˆ« git stash list æŸ¥çœ‹stashäº†å“ªäº›å­˜å‚¨ git stash show æ˜¾ç¤ºåšäº†å“ªäº›æ”¹åŠ¨ï¼Œé»˜è®¤showç¬¬ä¸€ä¸ªå­˜å‚¨,å¦‚æœè¦æ˜¾ç¤ºå…¶ä»–å­˜è´®ï¼Œåé¢åŠ  stash@{$num}ï¼Œæ¯”å¦‚ç¬¬äºŒä¸ª git stash show stash@{1} git stash show -p æ˜¾ç¤ºç¬¬ä¸€ä¸ªå­˜å‚¨çš„æ”¹åŠ¨ï¼Œå¦‚æœæƒ³æ˜¾ç¤ºå…¶ä»–å­˜å­˜å‚¨ï¼Œå‘½ä»¤ï¼šgit stash show stash@{$num} -p ï¼Œæ¯”å¦‚ç¬¬äºŒä¸ªï¼šgit stash show stash@{1} -p git stash apply åº”ç”¨æŸä¸ªå­˜å‚¨ï¼Œä½†ä¸ä¼šæŠŠå­˜å‚¨ä»å­˜å‚¨åˆ—è¡¨ä¸­åˆ é™¤ï¼Œé»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªå­˜å‚¨ï¼Œå³stash@{0}ï¼Œå¦‚æœè¦ä½¿ç”¨å…¶ä»–ä¸ªï¼Œgit stash apply stash@{$num} ï¼Œ æ¯”å¦‚ç¬¬äºŒä¸ªï¼šgit stash apply stash@{1} git stash pop å‘½ä»¤æ¢å¤ä¹‹å‰ç¼“å­˜çš„å·¥ä½œç›®å½•ï¼Œå°†ç¼“å­˜å †æ ˆä¸­çš„å¯¹åº”stashåˆ é™¤ï¼Œå¹¶å°†å¯¹åº”ä¿®æ”¹åº”ç”¨åˆ°å½“å‰çš„å·¥ä½œç›®å½•ä¸‹ï¼Œé»˜è®¤ä¸ºç¬¬ä¸€ä¸ªstashï¼Œå³stash@{0}ï¼Œå¦‚æœè¦åº”ç”¨å¹¶åˆ é™¤å…¶ä»–stashï¼Œå‘½ä»¤ï¼šgit stash pop stash@{$num} ï¼Œæ¯”å¦‚åº”ç”¨å¹¶åˆ é™¤ç¬¬äºŒä¸ªï¼šgit stash pop stash@{1} git stash drop stash@{$num} ä¸¢å¼ƒstash@{$num}å­˜å‚¨ï¼Œä»åˆ—è¡¨ä¸­åˆ é™¤è¿™ä¸ªå­˜å‚¨ git stash clear åˆ é™¤æ‰€æœ‰ç¼“å­˜çš„stash ","date":"2019-03-23","objectID":"/git-glance/:3:13","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#git-stash"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆ†æ”¯ç®¡ç†HEADä¸¥æ ¼æ¥è¯´ä¸æ˜¯æŒ‡å‘æäº¤ï¼Œè€Œæ˜¯æŒ‡å‘æŸä¸ªåˆ†æ”¯ï¼Œå¦‚masteråˆ†æ”¯ï¼Œmasteræ‰æ˜¯æŒ‡å‘æäº¤çš„ï¼Œæ‰€ä»¥ï¼ŒHEADæŒ‡å‘çš„å°±æ˜¯å½“å‰åˆ†æ”¯ã€‚ HEAD åœ¨åˆå¹¶åˆ†æ”¯æ—¶å¦‚æœå‡ºç°å†²çªï¼ŒGitç”¨\u003c\u003c\u003c\u003c\u003c\u003c\u003cï¼Œ=======ï¼Œ\u003e\u003e\u003e\u003e\u003e\u003e\u003eæ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹ã€‚ åˆå¹¶åˆ†æ”¯æœ‰å†²çª ","date":"2019-03-23","objectID":"/git-glance/:4:0","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#åˆ†æ”¯ç®¡ç†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Fast forwardé€šå¸¸ï¼Œåˆå¹¶åˆ†æ”¯æ—¶ï¼Œå¦‚æœå¯èƒ½ï¼Œgit ä¼šç”¨ Fast forward æ¨¡å¼ï¼Œä½†è¿™ç§æ¨¡å¼ä¸‹ï¼Œåˆ é™¤åˆ†æ”¯åï¼Œä¼šä¸¢æ‰åˆ†æ”¯ä¿¡æ¯ã€‚ å¯ä»¥ä½¿ç”¨--no-ffå¼ºåˆ¶ç¦ç”¨ Fast forward æ¨¡å¼ï¼Œgitå°±ä¼šåœ¨mergeæ—¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ commitï¼Œè¿™æ ·ï¼Œä»åˆ†æ”¯å†å²ä¸Šå°±å¯ä»¥çœ‹å‡ºåˆ†æ”¯ä¿¡æ¯ã€‚ git merge --no-ff å› ä¸ºæœ¬æ¬¡åˆå¹¶è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ commitï¼Œæ‰€ä»¥åŠ ä¸Š -m å‚æ•°ï¼ŒæŠŠ commit æè¿°å†™è¿›å»ã€‚ åˆ†æ”¯å†å² ","date":"2019-03-23","objectID":"/git-glance/:4:1","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#fast-forward"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ ‡ç­¾Tagtag æ˜¯åŸºäºæŸä¸ªåˆ†æ”¯ä¸‹çš„æŸæ¬¡ commitã€‚å¦‚åªæ‰§è¡Œ git tag v1.0ï¼Œé‚£ä¹ˆæ ‡ç­¾æ˜¯æ‰“åœ¨è¯¥åˆ†æ”¯æœ€æ–°æäº¤çš„ commit ä¸Šçš„ã€‚ åˆ›å»ºçš„æ ‡ç­¾éƒ½åªå­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨æ¨é€åˆ°è¿œç¨‹ï¼Œæ‰“é”™çš„æ ‡ç­¾å¯ä»¥åœ¨æœ¬åœ°å®‰å…¨åˆ é™¤ã€‚å¦‚æœæ ‡ç­¾å·²ç»æ¨é€åˆ°è¿œç¨‹ï¼Œå¾—å…ˆåˆ é™¤æœ¬åœ°æ ‡ç­¾ï¼Œå†åˆ é™¤è¿œç¨‹æ ‡ç­¾ã€‚ cmd è¯´æ˜ git tag -a v0.1 -m \"version 0.1 released\" 1094adb åŸºäºæŸæ¬¡ commit æ‰“ tagï¼Œ-aæŒ‡å®šæ ‡ç­¾åï¼Œ-mæŒ‡å®šè¯´æ˜æ–‡å­— git show \u003ctagname\u003e æ˜¾ç¤º tag çš„è¯´æ˜æ–‡å­— git tag å¯ä»¥æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ git tag -d v0.1 åˆ é™¤æ ‡ç­¾ git push origin \u003ctagname\u003e æ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹ï¼Œå¦‚ï¼šgit push origin v1.0 git push origin --tags ä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨å°šæœªæ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°æ ‡ç­¾ git push origin :refs/tags/\u003ctagname\u003e åˆ é™¤ä¸€ä¸ªè¿œç¨‹æ ‡ç­¾ ","date":"2019-03-23","objectID":"/git-glance/:5:0","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#æ ‡ç­¾tag"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" FAQ","date":"2019-03-23","objectID":"/git-glance/:6:0","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#faq"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" pull å’Œ fetch åŒºåˆ«git fetch æ˜¯å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰åˆ°æœ¬åœ°ï¼Œç”¨æˆ·æ£€æŸ¥åå†³å®šæ˜¯å¦åˆå¹¶åˆ°åˆ†æ”¯ä¸­ã€‚ git pull æ˜¯å°†è¿œç¨‹ä¸»æœºçš„æœ€æ–°å†…å®¹æ‹‰ä¸‹æ¥ç›´æ¥åˆå¹¶ï¼Œå¯ä»¥ç†è§£æˆï¼Œgit pull = git fetch + git mergeã€‚åœ¨ merge åˆå¹¶æ—¶å¦‚æœäº§ç”Ÿå†²çªéœ€è¦æ‰‹åŠ¨è§£å†³ã€‚ å°½é‡ä¸è¦ç”¨ git pullï¼Œç”¨ git fetch å’Œ git merge ä»£æ›¿ git pullã€‚ å°† fetch å’Œ merge æ”¾åˆ°ä¸€ä¸ªå‘½ä»¤é‡Œçš„å¦å¤–ä¸€ä¸ªå¼Šç«¯æ˜¯ï¼Œæœ¬åœ°å·¥ä½œç›®å½•åœ¨æœªç»ç¡®è®¤çš„æƒ…å†µä¸‹å°±ä¼šè¢«è¿œç¨‹åˆ†æ”¯æ›´æ–°ã€‚ ","date":"2019-03-23","objectID":"/git-glance/:6:1","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#pull-å’Œ-fetch-åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å°†æäº¤å›åˆ°æš‚å­˜åŒº git reset --soft $commitID å°† commit åçš„ä»£ç å›é€€åˆ°æš‚å­˜åŒº æˆ–è€… git reset HEAD æ–‡ä»¶/æ–‡ä»¶å¤¹ â˜ï¸å¯ä»¥å°†æŸä¸ªæ–‡ä»¶/æ–‡ä»¶å¤¹å›æ»šåˆ°ä¸Šä¸€æ¬¡æ“ä½œã€‚ ","date":"2019-03-23","objectID":"/git-glance/:6:2","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#å°†æäº¤å›åˆ°æš‚å­˜åŒº"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ git-fast-version-control Gitæ•™ç¨‹ Git Cheat Sheet git cherry-pick æ•™ç¨‹ git stash ç”¨æ³•æ€»ç»“å’Œæ³¨æ„ç‚¹ è¯¦è§£git pullå’Œgit fetchçš„åŒºåˆ« Gité£è¡Œè§„åˆ™(Flight Rules) ","date":"2019-03-23","objectID":"/git-glance/:7:0","series":null,"tags":["git"],"title":"git ä½¿ç”¨ç¬”è®°","uri":"/git-glance/#å‚è€ƒ"},{"categories":["web"],"content":"xiaobinqt,ä»€ä¹ˆæ˜¯è·¨åŸŸ,å¦‚ä½•è§£å†³è·¨åŸŸé—®é¢˜,ä»€ä¹ˆæ˜¯JSONP,ä»€ä¹ˆæ˜¯ CORS,ç®€å•è¯·æ±‚,å¤æ‚è¯·æ±‚,è·¨åŸŸé¢„æ£€æœºåˆ¶","date":"2019-03-18","objectID":"/cross-domain/","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/"},{"categories":["web"],"content":" åŒæºç­–ç•¥åŒæºç­–ç•¥æ˜¯æµè§ˆå™¨çš„ä¸€ä¸ªå®‰å…¨è¡Œä¸ºï¼Œæ˜¯æŒ‡æµè§ˆå™¨å¯¹ä¸åŒæºçš„è„šæœ¬æˆ–æ–‡æœ¬çš„è®¿é—®æ–¹å¼è¿›è¡Œé™åˆ¶ã€‚æ¯”å¦‚ï¼Œajax åœ¨è¿›è¡Œè¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨è¦æ±‚å½“å‰ç½‘é¡µå’Œè¯·æ±‚åœ°å€å¿…é¡»åŒæºï¼Œä¹Ÿå°±æ˜¯åè®®ï¼ŒåŸŸåå’Œç«¯å£å¿…é¡»ç›¸åŒã€‚ åŒæºæŒ‡çš„å°±æ˜¯ç›¸åŒçš„åè®®ï¼ŒåŸŸåï¼Œç«¯å£å·ã€‚ æµè§ˆå™¨æ˜¯å…¬å…±èµ„æºï¼Œå‡å¦‚æ²¡æœ‰åŒæºç­–ç•¥ï¼ŒA ç½‘ç«™çš„æ¥å£å¯ä»¥è¢«ä»»æ„æ¥æºçš„ ajax è¯·æ±‚è®¿é—®ï¼Œè¿™æ ·å°±ä¼šå‡ºç°é—®é¢˜ï¼Œè¿™æ˜¯æµè§ˆå™¨å‡ºäºå¯¹ç”¨æˆ·æ•°æ®çš„ä¿æŠ¤ã€‚ æ¯”å¦‚åœ¨ä½¿ç”¨æ·˜å®çš„è¿‡ç¨‹ä¸­ï¼Œæ·˜å®è¿”å›äº†ä¸€ä¸ª cookieï¼Œä¸‹æ¬¡è¯·æ±‚ä½ ä¼šå¸¦ä¸Šcookieï¼Œè¿™æ ·å­æœåŠ¡å™¨å°±çŸ¥é“ä½ ç™»å½•è¿‡äº†ã€‚ å‡è®¾ï¼Œä½ ä¹°ä¸œè¥¿è¿‡ç¨‹ä¸­ï¼Œåˆç‚¹æ¥äº†ä¸€ä¸ªé“¾æ¥ï¼Œç”±äºæ²¡æœ‰åŒæºç­–ç•¥ï¼Œä»–å°±åœ¨åå°æ“ä½œå‘æ·˜å®å‘èµ·è¯·æ±‚ï¼Œé‚£ä¹ˆå°±ç›¸å½“äºä¸æ³•ç½‘ç«™åˆ©ç”¨ä½ çš„è´¦å·ä¸ºæ‰€æ¬²ä¸ºäº†ã€‚ åŒæºç­–ç•¥é™åˆ¶çš„ä¸åŒæºä¹‹é—´çš„äº¤äº’ï¼Œä¸»è¦æ˜¯é’ˆå¯¹ JS ä¸­çš„ XMLHttpRequest è¯·æ±‚ã€‚æœ‰ä¸€äº›æƒ…å†µæ˜¯ä¸å—å½±å“çš„å¦‚ï¼šhtml çš„ä¸€äº›æ ‡ç­¾çš„è¯·æ±‚ï¼Œé“¾æ¥ a æ ‡ç­¾ï¼Œå›¾ç‰‡ img æ ‡ç­¾ç­‰ï¼Œè¿™äº›æ ‡ç­¾çš„è¯·æ±‚å¯ä»¥ä¸ºä¸åŒæºåœ°å€ã€‚ åŒæºç­–ç•¥é™åˆ¶äº† Cookieã€LocalStorage å’Œ IndexDB æ— æ³•è¯»å–ï¼ŒDOM å’Œ JS å¯¹è±¡æ— æ³•è·å–ï¼ŒAjax è¯·æ±‚æ— æ³•å‘é€ã€‚ æ‰€ä»¥ï¼Œåè®®ï¼ŒåŸŸåï¼Œç«¯å£å·åªè¦æœ‰ä¸€ä¸ªä¸åŒå°±å­˜åœ¨è·¨åŸŸã€‚ è§£å†³è·¨åŸŸé—®é¢˜å¸¸ç”¨çš„æœ‰ JSONP å’Œ CORS è¿™ä¸¤ç§æ–¹æ¡ˆï¼Œä»¥ä¸‹å¯¹ä»–ä»¬åˆ†åˆ«è¿›è¡Œä»‹ç»ã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:1:0","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#åŒæºç­–ç•¥"},{"categories":["web"],"content":" jsonpjsonp è™½ç„¶èƒ½è§£å†³è·¨åŸŸé—®é¢˜ï¼Œå®ƒåªæ”¯æŒGETè¯·æ±‚ğŸ˜¢ã€‚ jsonp æ˜¯åˆ©ç”¨\u003cscript\u003eæ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„â€œæ¼æ´â€æ¥è¾¾åˆ°ä¸ç¬¬ä¸‰æ–¹é€šè®¯çš„ç›®çš„ã€‚å½“éœ€è¦é€šè®¯æ—¶ï¼Œæœ¬ç«™è„šæœ¬åˆ›å»ºä¸€ä¸ª\u003cscript\u003eå…ƒç´ ï¼Œåœ°å€æŒ‡å‘ç¬¬ä¸‰æ–¹çš„APIç½‘å€ï¼Œå½¢å¦‚ï¼š \u003cscript src=\"http://www.example.net/api?param1=1\u0026param2=2\"\u003e\u003c/script\u003e å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®ï¼ˆå‡½æ•°åå¯çº¦å®šï¼Œæˆ–é€šè¿‡åœ°å€å‚æ•°ä¼ é€’ï¼‰ã€‚ ç¬¬ä¸‰æ–¹äº§ç”Ÿçš„å“åº”ä¸º json æ•°æ®çš„åŒ…è£…ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸º jsonpjson paddingï¼Œå½¢å¦‚ï¼š callback({ \"name\": \"å´å½¦ç¥–\", \"age\": \"28\" }) è¿™æ ·æµè§ˆå™¨ä¼šè°ƒç”¨ callback å‡½æ•°ï¼Œå¹¶ä¼ é€’è§£æåjsonå¯¹è±¡ä½œä¸ºå‚æ•°ã€‚æœ¬ç«™è„šæœ¬å¯åœ¨callbackå‡½æ•°é‡Œå¤„ç†æ‰€ä¼ å…¥çš„æ•°æ®ã€‚ æ¥å£è¿”å›çš„å‡½æ•°åä¸€å®šè¦è·Ÿå®šä¹‰çš„å‡½æ•°ä¸€è‡´ æœ‰ä¸€ä¸ªæ¥å£http://127.0.0.1:8080/cbè¿”å› jsonp æ•°æ®ğŸ‘‡ jsonp æ¥å£ html æ–‡ä»¶ï¼š \u003c!doctype html\u003e \u003chtml lang=\"en\"\u003e \u003chead\u003e \u003cmeta charset=\"UTF-8\"\u003e \u003cmeta name=\"viewport\" content=\"width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0\"\u003e \u003cmeta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\"\u003e \u003ctitle\u003eDocument\u003c/title\u003e \u003c/head\u003e \u003cbody\u003e \u003cscript\u003e let script = document.createElement('script'); script.type = 'text/javascript'; //è¯·æ±‚æ¥å£åœ°å€å’Œå‚æ•° script.src = 'http://127.0.0.1:8080/cb'; document.body.appendChild(script); //è¯·æ±‚åçš„å›è°ƒå‡½æ•° function callback(res) { console.log(res) } \u003c/script\u003e \u003c/body\u003e \u003c/html\u003e æ•ˆæœğŸ‘‡ æ‰§è¡Œæ•ˆæœ ","date":"2019-03-18","objectID":"/cross-domain/:2:0","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#jsonp"},{"categories":["web"],"content":" CORSæ•´ä¸ªCORSCross-origin resource sharing é€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ã€‚å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒCORSé€šä¿¡ä¸åŒæºçš„AJAXé€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚ å› æ­¤ï¼Œå®ç°CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®ç°äº†CORSæ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚å®ƒå…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨ï¼Œå‘å‡ºXMLHttpRequest è¯·æ±‚ï¼Œæµè§ˆå™¨ä¸€æ—¦å‘ç°AJAXè¯·æ±‚è·¨æºï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä»è€Œå…‹æœäº† AJAX åªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶ã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:3:0","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#cors"},{"categories":["web"],"content":" ä¸¤ç§è¯·æ±‚æµè§ˆå™¨å°†CORSè¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚simple requestå’Œéç®€å•è¯·æ±‚not-so-simple requestã€‚åªè¦åŒæ—¶æ»¡è¶³ğŸ‘‡ä¸¤å¤§æ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚ã€‚ è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ï¼š HEAD GET POST HTTP å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µï¼š Accept Accept-Language Content-Language Last-Event-ID Content-Typeï¼šåªé™äºä¸‰ä¸ªå€¼application/x-www-form-urlencodedã€multipart/form-dataã€text/plain é™¤äº†ç”±ç”¨æˆ·ä»£ç†è‡ªåŠ¨è®¾ç½®çš„å¤´ï¼ˆå¦‚ï¼ŒConnectionã€ User-Agentï¼‰ è¿™æ˜¯ä¸ºäº†å…¼å®¹è¡¨å•formï¼Œå†å²ä¸Šè¡¨å•ä¸€ç›´å¯ä»¥å‘å‡ºè·¨åŸŸè¯·æ±‚ã€‚AJAX çš„è·¨åŸŸè®¾è®¡å°±æ˜¯ï¼Œåªè¦è¡¨å•å¯ä»¥å‘ï¼ŒAJAX å°±å¯ä»¥ç›´æ¥å‘ã€‚ å‡¡æ˜¯ä¸åŒæ—¶æ»¡è¶³ä¸Šé¢ä¸¤ä¸ªæ¡ä»¶ï¼Œå°±å±äºéç®€å•è¯·æ±‚ã€‚ æµè§ˆå™¨å¯¹è¿™ä¸¤ç§è¯·æ±‚çš„å¤„ç†ï¼Œæ˜¯ä¸ä¸€æ ·çš„ã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:3:1","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#ä¸¤ç§è¯·æ±‚"},{"categories":["web"],"content":" ç®€å•è¯·æ±‚å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥å‘å‡ºCORSè¯·æ±‚ã€‚åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œå¢åŠ ä¸€ä¸ªOriginå­—æ®µã€‚ ä¸‹é¢çš„ä¾‹å­ï¼Œæµè§ˆå™¨å‘ç°è¿™æ¬¡è·¨æº AJAX è¯·æ±‚æ˜¯ç®€å•è¯·æ±‚ï¼Œå°±è‡ªåŠ¨åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªOriginå­—æ®µã€‚ GET /cors HTTP/1.1 Origin: http://api.bob.com Host: api.alice.com Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... ä¸Šé¢çš„å¤´ä¿¡æ¯ä¸­ï¼ŒOriginå­—æ®µç”¨æ¥è¯´æ˜ï¼Œæœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ˆåè®® + åŸŸå + ç«¯å£ï¼‰ã€‚æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå€¼ï¼Œå†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ã€‚ å¦‚æœOrigin æŒ‡å®šçš„æºï¼Œä¸åœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„ HTTPå›åº”ã€‚æµè§ˆå™¨å‘ç°ï¼Œè¿™ä¸ªå›åº”çš„å¤´ä¿¡æ¯æ²¡æœ‰åŒ…å«Access-Control-Allow-Originå­—æ®µï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œå°±çŸ¥é“å‡ºé”™äº†ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestçš„onerror å›è°ƒå‡½æ•°æ•è·ã€‚è¿™ç§é”™è¯¯æ— æ³•é€šè¿‡çŠ¶æ€ç è¯†åˆ«ï¼Œå› ä¸ºHTTPå›åº”çš„çŠ¶æ€ç æœ‰å¯èƒ½æ˜¯200ã€‚ å¦‚æœOriginæŒ‡å®šçš„åŸŸååœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”ï¼Œä¼šå¤šå‡ºå‡ ä¸ªå¤´ä¿¡æ¯å­—æ®µã€‚ Access-Control-Allow-Origin: http://api.bob.com Access-Control-Allow-Credentials: true Access-Control-Expose-Headers: FooBar Content-Type: text/html; charset=utf-8 ä¸Šé¢çš„å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œæœ‰ä¸‰ä¸ªä¸CORSè¯·æ±‚ç›¸å…³çš„å­—æ®µï¼Œéƒ½ä»¥Access-Control-å¼€å¤´ã€‚ Access-Control-Allow-Origin è¯¥å­—æ®µæ˜¯å¿…é¡»çš„ã€‚å®ƒçš„å€¼è¦ä¹ˆæ˜¯è¯·æ±‚æ—¶Originå­—æ®µçš„å€¼ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ª*ï¼Œè¡¨ç¤ºæ¥å—ä»»æ„åŸŸåçš„è¯·æ±‚ã€‚ Access-Control-Allow-Credentials è¯¥å­—æ®µå¯é€‰ã€‚å®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸å‘é€Cookieã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCookieä¸åŒ…æ‹¬åœ¨CORSè¯·æ±‚ä¹‹ä¸­ã€‚è®¾ä¸ºtrueï¼Œå³è¡¨ç¤ºæœåŠ¡å™¨æ˜ç¡®è®¸å¯ï¼ŒCookieå¯ä»¥åŒ…å«åœ¨è¯·æ±‚ä¸­ï¼Œä¸€èµ·å‘ç»™æœåŠ¡å™¨ã€‚è¿™ä¸ªå€¼ä¹Ÿåªèƒ½è®¾ä¸ºtrueï¼Œå¦‚æœæœåŠ¡å™¨ä¸è¦æµè§ˆå™¨å‘é€Cookieï¼Œåˆ é™¤è¯¥å­—æ®µå³å¯ã€‚ Access-Control-Expose-Headers è¯¥å­—æ®µå¯é€‰ã€‚CORSè¯·æ±‚æ—¶ï¼ŒXMLHttpRequestå¯¹è±¡çš„getResponseHeader() æ–¹æ³•åªèƒ½æ‹¿åˆ°6ä¸ªåŸºæœ¬å­—æ®µï¼šCache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedã€Pragma ã€‚å¦‚æœæƒ³æ‹¿åˆ°å…¶ä»–å­—æ®µï¼Œå°±å¿…é¡»åœ¨Access-Control-Expose-Headersé‡Œé¢æŒ‡å®šã€‚ä¸Šé¢çš„ä¾‹å­æŒ‡å®šï¼ŒgetResponseHeader('FooBar')å¯ä»¥è¿”å›FooBarå­—æ®µçš„å€¼ã€‚ withCredentials å±æ€§CORSè¯·æ±‚é»˜è®¤ä¸å‘é€Cookieå’ŒHTTPè®¤è¯ä¿¡æ¯ã€‚å¦‚æœè¦æŠŠCookieå‘åˆ°æœåŠ¡å™¨ï¼Œä¸€æ–¹é¢è¦æœåŠ¡å™¨åŒæ„ï¼ŒæŒ‡å®šAccess-Control-Allow-Credentialså­—æ®µã€‚ Access-Control-Allow-Credentials: true å¦ä¸€æ–¹é¢ï¼Œå¼€å‘è€…å¿…é¡»åœ¨AJAXè¯·æ±‚ä¸­æ‰“å¼€withCredentialså±æ€§ã€‚ var xhr = new XMLHttpRequest(); xhr.withCredentials = true; å¦åˆ™ï¼Œå³ä½¿æœåŠ¡å™¨åŒæ„å‘é€Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå‘é€ã€‚æˆ–è€…ï¼ŒæœåŠ¡å™¨è¦æ±‚è®¾ç½®Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå¤„ç†ã€‚ ä½†æ˜¯ï¼Œå¦‚æœçœç•¥withCredentialsè®¾ç½®ï¼Œæœ‰çš„æµè§ˆå™¨è¿˜æ˜¯ä¼šä¸€èµ·å‘é€Cookieã€‚è¿™æ—¶ï¼Œå¯ä»¥æ˜¾å¼å…³é—­withCredentialsã€‚ xhr.withCredentials = false; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¦å‘é€Cookieï¼ŒAccess-Control-Allow-Originå°±ä¸èƒ½è®¾ä¸ºæ˜Ÿå·* ï¼Œå¿…é¡»æŒ‡å®šæ˜ç¡®çš„ã€ä¸è¯·æ±‚ç½‘é¡µä¸€è‡´çš„åŸŸåã€‚åŒæ—¶ï¼ŒCookieä¾ç„¶éµå¾ªåŒæºæ”¿ç­–ï¼Œåªæœ‰ç”¨æœåŠ¡å™¨åŸŸåè®¾ç½®çš„Cookieæ‰ä¼šä¸Šä¼ ï¼Œå…¶ä»–åŸŸåçš„Cookieå¹¶ä¸ä¼šä¸Šä¼ ï¼Œä¸”ï¼ˆè·¨æºï¼‰åŸç½‘é¡µä»£ç ä¸­çš„document.cookie ä¹Ÿæ— æ³•è¯»å–æœåŠ¡å™¨åŸŸåä¸‹çš„Cookieã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:3:2","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#ç®€å•è¯·æ±‚"},{"categories":["web"],"content":" ç®€å•è¯·æ±‚å¯¹äºç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨ç›´æ¥å‘å‡ºCORSè¯·æ±‚ã€‚åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œå¢åŠ ä¸€ä¸ªOriginå­—æ®µã€‚ ä¸‹é¢çš„ä¾‹å­ï¼Œæµè§ˆå™¨å‘ç°è¿™æ¬¡è·¨æº AJAX è¯·æ±‚æ˜¯ç®€å•è¯·æ±‚ï¼Œå°±è‡ªåŠ¨åœ¨å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªOriginå­—æ®µã€‚ GET /cors HTTP/1.1 Origin: http://api.bob.com Host: api.alice.com Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... ä¸Šé¢çš„å¤´ä¿¡æ¯ä¸­ï¼ŒOriginå­—æ®µç”¨æ¥è¯´æ˜ï¼Œæœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæºï¼ˆåè®® + åŸŸå + ç«¯å£ï¼‰ã€‚æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå€¼ï¼Œå†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ã€‚ å¦‚æœOrigin æŒ‡å®šçš„æºï¼Œä¸åœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„ HTTPå›åº”ã€‚æµè§ˆå™¨å‘ç°ï¼Œè¿™ä¸ªå›åº”çš„å¤´ä¿¡æ¯æ²¡æœ‰åŒ…å«Access-Control-Allow-Originå­—æ®µï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰ï¼Œå°±çŸ¥é“å‡ºé”™äº†ï¼Œä»è€ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestçš„onerror å›è°ƒå‡½æ•°æ•è·ã€‚è¿™ç§é”™è¯¯æ— æ³•é€šè¿‡çŠ¶æ€ç è¯†åˆ«ï¼Œå› ä¸ºHTTPå›åº”çš„çŠ¶æ€ç æœ‰å¯èƒ½æ˜¯200ã€‚ å¦‚æœOriginæŒ‡å®šçš„åŸŸååœ¨è®¸å¯èŒƒå›´å†…ï¼ŒæœåŠ¡å™¨è¿”å›çš„å“åº”ï¼Œä¼šå¤šå‡ºå‡ ä¸ªå¤´ä¿¡æ¯å­—æ®µã€‚ Access-Control-Allow-Origin: http://api.bob.com Access-Control-Allow-Credentials: true Access-Control-Expose-Headers: FooBar Content-Type: text/html; charset=utf-8 ä¸Šé¢çš„å¤´ä¿¡æ¯ä¹‹ä¸­ï¼Œæœ‰ä¸‰ä¸ªä¸CORSè¯·æ±‚ç›¸å…³çš„å­—æ®µï¼Œéƒ½ä»¥Access-Control-å¼€å¤´ã€‚ Access-Control-Allow-Origin è¯¥å­—æ®µæ˜¯å¿…é¡»çš„ã€‚å®ƒçš„å€¼è¦ä¹ˆæ˜¯è¯·æ±‚æ—¶Originå­—æ®µçš„å€¼ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ª*ï¼Œè¡¨ç¤ºæ¥å—ä»»æ„åŸŸåçš„è¯·æ±‚ã€‚ Access-Control-Allow-Credentials è¯¥å­—æ®µå¯é€‰ã€‚å®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦å…è®¸å‘é€Cookieã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCookieä¸åŒ…æ‹¬åœ¨CORSè¯·æ±‚ä¹‹ä¸­ã€‚è®¾ä¸ºtrueï¼Œå³è¡¨ç¤ºæœåŠ¡å™¨æ˜ç¡®è®¸å¯ï¼ŒCookieå¯ä»¥åŒ…å«åœ¨è¯·æ±‚ä¸­ï¼Œä¸€èµ·å‘ç»™æœåŠ¡å™¨ã€‚è¿™ä¸ªå€¼ä¹Ÿåªèƒ½è®¾ä¸ºtrueï¼Œå¦‚æœæœåŠ¡å™¨ä¸è¦æµè§ˆå™¨å‘é€Cookieï¼Œåˆ é™¤è¯¥å­—æ®µå³å¯ã€‚ Access-Control-Expose-Headers è¯¥å­—æ®µå¯é€‰ã€‚CORSè¯·æ±‚æ—¶ï¼ŒXMLHttpRequestå¯¹è±¡çš„getResponseHeader() æ–¹æ³•åªèƒ½æ‹¿åˆ°6ä¸ªåŸºæœ¬å­—æ®µï¼šCache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedã€Pragma ã€‚å¦‚æœæƒ³æ‹¿åˆ°å…¶ä»–å­—æ®µï¼Œå°±å¿…é¡»åœ¨Access-Control-Expose-Headersé‡Œé¢æŒ‡å®šã€‚ä¸Šé¢çš„ä¾‹å­æŒ‡å®šï¼ŒgetResponseHeader('FooBar')å¯ä»¥è¿”å›FooBarå­—æ®µçš„å€¼ã€‚ withCredentials å±æ€§CORSè¯·æ±‚é»˜è®¤ä¸å‘é€Cookieå’ŒHTTPè®¤è¯ä¿¡æ¯ã€‚å¦‚æœè¦æŠŠCookieå‘åˆ°æœåŠ¡å™¨ï¼Œä¸€æ–¹é¢è¦æœåŠ¡å™¨åŒæ„ï¼ŒæŒ‡å®šAccess-Control-Allow-Credentialså­—æ®µã€‚ Access-Control-Allow-Credentials: true å¦ä¸€æ–¹é¢ï¼Œå¼€å‘è€…å¿…é¡»åœ¨AJAXè¯·æ±‚ä¸­æ‰“å¼€withCredentialså±æ€§ã€‚ var xhr = new XMLHttpRequest(); xhr.withCredentials = true; å¦åˆ™ï¼Œå³ä½¿æœåŠ¡å™¨åŒæ„å‘é€Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå‘é€ã€‚æˆ–è€…ï¼ŒæœåŠ¡å™¨è¦æ±‚è®¾ç½®Cookieï¼Œæµè§ˆå™¨ä¹Ÿä¸ä¼šå¤„ç†ã€‚ ä½†æ˜¯ï¼Œå¦‚æœçœç•¥withCredentialsè®¾ç½®ï¼Œæœ‰çš„æµè§ˆå™¨è¿˜æ˜¯ä¼šä¸€èµ·å‘é€Cookieã€‚è¿™æ—¶ï¼Œå¯ä»¥æ˜¾å¼å…³é—­withCredentialsã€‚ xhr.withCredentials = false; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¦å‘é€Cookieï¼ŒAccess-Control-Allow-Originå°±ä¸èƒ½è®¾ä¸ºæ˜Ÿå·* ï¼Œå¿…é¡»æŒ‡å®šæ˜ç¡®çš„ã€ä¸è¯·æ±‚ç½‘é¡µä¸€è‡´çš„åŸŸåã€‚åŒæ—¶ï¼ŒCookieä¾ç„¶éµå¾ªåŒæºæ”¿ç­–ï¼Œåªæœ‰ç”¨æœåŠ¡å™¨åŸŸåè®¾ç½®çš„Cookieæ‰ä¼šä¸Šä¼ ï¼Œå…¶ä»–åŸŸåçš„Cookieå¹¶ä¸ä¼šä¸Šä¼ ï¼Œä¸”ï¼ˆè·¨æºï¼‰åŸç½‘é¡µä»£ç ä¸­çš„document.cookie ä¹Ÿæ— æ³•è¯»å–æœåŠ¡å™¨åŸŸåä¸‹çš„Cookieã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:3:2","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#withcredentials-å±æ€§"},{"categories":["web"],"content":" éç®€å•è¯·æ±‚ é¢„æ£€è¯·æ±‚éç®€å•è¯·æ±‚æ˜¯é‚£ç§å¯¹æœåŠ¡å™¨æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯PUTæˆ–DELETEï¼Œæˆ–è€…Content-Typeå­—æ®µçš„ç±»å‹æ˜¯application/jsonã€‚ éç®€å•è¯·æ±‚çš„CORSè¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸ºâ€œé¢„æ£€\"è¯·æ±‚preflight requestã€‚ æµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº›HTTPåŠ¨è¯å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰å¾—åˆ°è‚¯å®šç­”å¤ï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„XMLHttpRequestè¯·æ±‚ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚ ä¸‹é¢æ˜¯ä¸€æ®µæµè§ˆå™¨çš„JavaScriptè„šæœ¬ã€‚ var url = 'http://api.alice.com/cors'; var xhr = new XMLHttpRequest(); xhr.open('PUT', url, true); xhr.setRequestHeader('X-Custom-Header', 'value'); xhr.send(); ä¸Šé¢ä»£ç ä¸­ï¼ŒHTTPè¯·æ±‚çš„æ–¹æ³•æ˜¯PUTï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªè‡ªå®šä¹‰å¤´ä¿¡æ¯X-Custom-Headerã€‚ æµè§ˆå™¨å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚ï¼Œå°±è‡ªåŠ¨å‘å‡ºä¸€ä¸ª\"é¢„æ£€\"è¯·æ±‚ï¼Œè¦æ±‚æœåŠ¡å™¨ç¡®è®¤å¯ä»¥è¿™æ ·è¯·æ±‚ã€‚ä¸‹é¢æ˜¯è¿™ä¸ª\"é¢„æ£€\"è¯·æ±‚çš„HTTPå¤´ä¿¡æ¯ã€‚ OPTIONS /cors HTTP/1.1 Origin: http://api.bob.com Access-Control-Request-Method: PUT Access-Control-Request-Headers: X-Custom-Header Host: api.alice.com Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... â€œé¢„æ£€\"è¯·æ±‚ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯OPTIONSï¼Œè¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ç”¨æ¥è¯¢é—®çš„ã€‚å¤´ä¿¡æ¯é‡Œé¢ï¼Œå…³é”®å­—æ®µæ˜¯Originï¼Œè¡¨ç¤ºè¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚ é™¤äº†Originå­—æ®µï¼Œâ€œé¢„æ£€\"è¯·æ±‚çš„å¤´ä¿¡æ¯åŒ…æ‹¬ä¸¤ä¸ªç‰¹æ®Šå­—æ®µã€‚ Access-Control-Request-Method è¯¥å­—æ®µæ˜¯å¿…é¡»çš„ï¼Œç”¨æ¥åˆ—å‡ºæµè§ˆå™¨çš„CORSè¯·æ±‚ä¼šç”¨åˆ°å“ªäº›HTTPæ–¹æ³•ï¼Œä¸Šä¾‹æ˜¯PUTã€‚ Access-Control-Request-Headers è¯¥å­—æ®µæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šæµè§ˆå™¨CORSè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µï¼Œä¸Šä¾‹æ˜¯X-Custom-Headerã€‚ é¢„æ£€è¯·æ±‚çš„å›åº”æœåŠ¡å™¨æ”¶åˆ°\"é¢„æ£€\"è¯·æ±‚ä»¥åï¼Œæ£€æŸ¥äº†Originã€Access-Control-Request-Methodå’ŒAccess-Control-Request-Headerså­—æ®µä»¥åï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›åº”ã€‚ HTTP/1.1 200 OK Date: Mon, 01 Dec 2008 01:15:39 GMT Server: Apache/2.0.61 (Unix) Access-Control-Allow-Origin: http://api.bob.com Access-Control-Allow-Methods: GET, POST, PUT Access-Control-Allow-Headers: X-Custom-Header Content-Type: text/html; charset=utf-8 Content-Encoding: gzip Content-Length: 0 Keep-Alive: timeout=2, max=100 Connection: Keep-Alive Content-Type: text/plain ä¸Šé¢çš„HTTPå›åº”ä¸­ï¼Œå…³é”®çš„æ˜¯Access-Control-Allow-Originå­—æ®µï¼Œè¡¨ç¤ºhttp://api.bob.comå¯ä»¥è¯·æ±‚æ•°æ®ã€‚è¯¥å­—æ®µä¹Ÿå¯ä»¥è®¾ä¸ºæ˜Ÿå·ï¼Œè¡¨ç¤ºåŒæ„ä»»æ„è·¨æºè¯·æ±‚ã€‚ Access-Control-Allow-Origin: * å¦‚æœæœåŠ¡å™¨å¦å®šäº†\"é¢„æ£€\"è¯·æ±‚ï¼Œä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•CORSç›¸å…³çš„å¤´ä¿¡æ¯å­—æ®µã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè®¤å®šï¼ŒæœåŠ¡å™¨ä¸åŒæ„é¢„æ£€è¯·æ±‚ï¼Œå› æ­¤è§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestå¯¹è±¡çš„onerror å›è°ƒå‡½æ•°æ•è·ã€‚æ§åˆ¶å°ä¼šæ‰“å°å‡ºå¦‚ä¸‹çš„æŠ¥é”™ä¿¡æ¯ã€‚ XMLHttpRequest cannot load http://api.alice.com. Origin http://api.bob.com is not allowed by Access-Control-Allow-Origin. æœåŠ¡å™¨å›åº”çš„å…¶ä»–CORSç›¸å…³å­—æ®µå¦‚ä¸‹ã€‚ Access-Control-Allow-Methods: GET, POST, PUT Access-Control-Allow-Headers: X-Custom-Header Access-Control-Allow-Credentials: true Access-Control-Max-Age: 1728000 Access-Control-Allow-Methods è¯¥å­—æ®µå¿…éœ€ï¼Œå®ƒçš„å€¼æ˜¯é€—å·åˆ†éš”çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•ã€‚æ³¨æ„ï¼Œè¿”å›çš„æ˜¯æ‰€æœ‰æ”¯æŒçš„æ–¹æ³•ï¼Œè€Œä¸å•æ˜¯æµè§ˆå™¨è¯·æ±‚çš„é‚£ä¸ªæ–¹æ³•ã€‚è¿™æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡\"é¢„æ£€\"è¯·æ±‚ã€‚ Access-Control-Allow-Headers å¦‚æœæµè§ˆå™¨è¯·æ±‚åŒ…æ‹¬Access-Control-Request-Headerså­—æ®µï¼Œåˆ™Access-Control-Allow-Headerså­—æ®µæ˜¯å¿…éœ€çš„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰å¤´ä¿¡æ¯å­—æ®µï¼Œä¸é™äºæµè§ˆå™¨åœ¨â€ é¢„æ£€\"ä¸­è¯·æ±‚çš„å­—æ®µã€‚ Access-Control-Allow-Credentials è¯¥å­—æ®µä¸ç®€å•è¯·æ±‚æ—¶çš„å«ä¹‰ç›¸åŒã€‚ Access-Control-Max-Age è¯¥å­—æ®µå¯é€‰ï¼Œç”¨æ¥æŒ‡å®šæœ¬æ¬¡é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ã€‚ä¸Šé¢ç»“æœä¸­ï¼Œæœ‰æ•ˆæœŸæ˜¯20å¤©ï¼ˆ1728000ç§’ï¼‰ï¼Œå³å…è®¸ç¼“å­˜è¯¥æ¡å›åº”1728000ç§’ï¼ˆå³20å¤©ï¼‰ï¼Œåœ¨æ­¤æœŸé—´ï¼Œä¸ç”¨å‘å‡ºå¦ä¸€æ¡é¢„æ£€è¯·æ±‚ã€‚ æµè§ˆå™¨çš„æ­£å¸¸è¯·æ±‚å’Œå›åº”ä¸€æ—¦æœåŠ¡å™¨é€šè¿‡äº†\"é¢„æ£€\"è¯·æ±‚ï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨æ­£å¸¸çš„CORSè¯·æ±‚ï¼Œå°±éƒ½è·Ÿç®€å•è¯·æ±‚ä¸€æ ·ï¼Œä¼šæœ‰ä¸€ä¸ªOriginå¤´ä¿¡æ¯å­—æ®µã€‚æœåŠ¡å™¨çš„å›åº”ï¼Œä¹Ÿéƒ½ä¼šæœ‰ä¸€ä¸ªAccess-Control-Allow-Originå¤´ä¿¡æ¯å­—æ®µã€‚ ä¸‹é¢æ˜¯\"é¢„æ£€\"è¯·æ±‚ä¹‹åï¼Œæµè§ˆå™¨çš„æ­£å¸¸CORSè¯·æ±‚ã€‚ PUT /cors HTTP/1.1 Origin: http://api.bob.com Host: api.alice.com X-Custom-Header: value Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... ä¸Šé¢å¤´ä¿¡æ¯çš„Originå­—æ®µæ˜¯æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ çš„ã€‚ ä¸‹é¢æ˜¯æœåŠ¡å™¨æ­£å¸¸çš„å›åº”ã€‚ Access-Control-Allow-Origin: http://api.bob.com Content-Type: text/html; charset=utf-8 ä¸Šé¢å¤´ä¿¡æ¯ä¸­ï¼ŒAccess-Control-Allow-Originå­—æ®µæ˜¯æ¯æ¬¡å›åº”éƒ½å¿…å®šåŒ…å«çš„ã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:3:3","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#éç®€å•è¯·æ±‚"},{"categories":["web"],"content":" éç®€å•è¯·æ±‚ é¢„æ£€è¯·æ±‚éç®€å•è¯·æ±‚æ˜¯é‚£ç§å¯¹æœåŠ¡å™¨æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯PUTæˆ–DELETEï¼Œæˆ–è€…Content-Typeå­—æ®µçš„ç±»å‹æ˜¯application/jsonã€‚ éç®€å•è¯·æ±‚çš„CORSè¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸ºâ€œé¢„æ£€\"è¯·æ±‚preflight requestã€‚ æµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº›HTTPåŠ¨è¯å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰å¾—åˆ°è‚¯å®šç­”å¤ï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„XMLHttpRequestè¯·æ±‚ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚ ä¸‹é¢æ˜¯ä¸€æ®µæµè§ˆå™¨çš„JavaScriptè„šæœ¬ã€‚ var url = 'http://api.alice.com/cors'; var xhr = new XMLHttpRequest(); xhr.open('PUT', url, true); xhr.setRequestHeader('X-Custom-Header', 'value'); xhr.send(); ä¸Šé¢ä»£ç ä¸­ï¼ŒHTTPè¯·æ±‚çš„æ–¹æ³•æ˜¯PUTï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªè‡ªå®šä¹‰å¤´ä¿¡æ¯X-Custom-Headerã€‚ æµè§ˆå™¨å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚ï¼Œå°±è‡ªåŠ¨å‘å‡ºä¸€ä¸ª\"é¢„æ£€\"è¯·æ±‚ï¼Œè¦æ±‚æœåŠ¡å™¨ç¡®è®¤å¯ä»¥è¿™æ ·è¯·æ±‚ã€‚ä¸‹é¢æ˜¯è¿™ä¸ª\"é¢„æ£€\"è¯·æ±‚çš„HTTPå¤´ä¿¡æ¯ã€‚ OPTIONS /cors HTTP/1.1 Origin: http://api.bob.com Access-Control-Request-Method: PUT Access-Control-Request-Headers: X-Custom-Header Host: api.alice.com Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... â€œé¢„æ£€\"è¯·æ±‚ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯OPTIONSï¼Œè¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ç”¨æ¥è¯¢é—®çš„ã€‚å¤´ä¿¡æ¯é‡Œé¢ï¼Œå…³é”®å­—æ®µæ˜¯Originï¼Œè¡¨ç¤ºè¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚ é™¤äº†Originå­—æ®µï¼Œâ€œé¢„æ£€\"è¯·æ±‚çš„å¤´ä¿¡æ¯åŒ…æ‹¬ä¸¤ä¸ªç‰¹æ®Šå­—æ®µã€‚ Access-Control-Request-Method è¯¥å­—æ®µæ˜¯å¿…é¡»çš„ï¼Œç”¨æ¥åˆ—å‡ºæµè§ˆå™¨çš„CORSè¯·æ±‚ä¼šç”¨åˆ°å“ªäº›HTTPæ–¹æ³•ï¼Œä¸Šä¾‹æ˜¯PUTã€‚ Access-Control-Request-Headers è¯¥å­—æ®µæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šæµè§ˆå™¨CORSè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µï¼Œä¸Šä¾‹æ˜¯X-Custom-Headerã€‚ é¢„æ£€è¯·æ±‚çš„å›åº”æœåŠ¡å™¨æ”¶åˆ°\"é¢„æ£€\"è¯·æ±‚ä»¥åï¼Œæ£€æŸ¥äº†Originã€Access-Control-Request-Methodå’ŒAccess-Control-Request-Headerså­—æ®µä»¥åï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›åº”ã€‚ HTTP/1.1 200 OK Date: Mon, 01 Dec 2008 01:15:39 GMT Server: Apache/2.0.61 (Unix) Access-Control-Allow-Origin: http://api.bob.com Access-Control-Allow-Methods: GET, POST, PUT Access-Control-Allow-Headers: X-Custom-Header Content-Type: text/html; charset=utf-8 Content-Encoding: gzip Content-Length: 0 Keep-Alive: timeout=2, max=100 Connection: Keep-Alive Content-Type: text/plain ä¸Šé¢çš„HTTPå›åº”ä¸­ï¼Œå…³é”®çš„æ˜¯Access-Control-Allow-Originå­—æ®µï¼Œè¡¨ç¤ºhttp://api.bob.comå¯ä»¥è¯·æ±‚æ•°æ®ã€‚è¯¥å­—æ®µä¹Ÿå¯ä»¥è®¾ä¸ºæ˜Ÿå·ï¼Œè¡¨ç¤ºåŒæ„ä»»æ„è·¨æºè¯·æ±‚ã€‚ Access-Control-Allow-Origin: * å¦‚æœæœåŠ¡å™¨å¦å®šäº†\"é¢„æ£€\"è¯·æ±‚ï¼Œä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•CORSç›¸å…³çš„å¤´ä¿¡æ¯å­—æ®µã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè®¤å®šï¼ŒæœåŠ¡å™¨ä¸åŒæ„é¢„æ£€è¯·æ±‚ï¼Œå› æ­¤è§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestå¯¹è±¡çš„onerror å›è°ƒå‡½æ•°æ•è·ã€‚æ§åˆ¶å°ä¼šæ‰“å°å‡ºå¦‚ä¸‹çš„æŠ¥é”™ä¿¡æ¯ã€‚ XMLHttpRequest cannot load http://api.alice.com. Origin http://api.bob.com is not allowed by Access-Control-Allow-Origin. æœåŠ¡å™¨å›åº”çš„å…¶ä»–CORSç›¸å…³å­—æ®µå¦‚ä¸‹ã€‚ Access-Control-Allow-Methods: GET, POST, PUT Access-Control-Allow-Headers: X-Custom-Header Access-Control-Allow-Credentials: true Access-Control-Max-Age: 1728000 Access-Control-Allow-Methods è¯¥å­—æ®µå¿…éœ€ï¼Œå®ƒçš„å€¼æ˜¯é€—å·åˆ†éš”çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•ã€‚æ³¨æ„ï¼Œè¿”å›çš„æ˜¯æ‰€æœ‰æ”¯æŒçš„æ–¹æ³•ï¼Œè€Œä¸å•æ˜¯æµè§ˆå™¨è¯·æ±‚çš„é‚£ä¸ªæ–¹æ³•ã€‚è¿™æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡\"é¢„æ£€\"è¯·æ±‚ã€‚ Access-Control-Allow-Headers å¦‚æœæµè§ˆå™¨è¯·æ±‚åŒ…æ‹¬Access-Control-Request-Headerså­—æ®µï¼Œåˆ™Access-Control-Allow-Headerså­—æ®µæ˜¯å¿…éœ€çš„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰å¤´ä¿¡æ¯å­—æ®µï¼Œä¸é™äºæµè§ˆå™¨åœ¨â€ é¢„æ£€\"ä¸­è¯·æ±‚çš„å­—æ®µã€‚ Access-Control-Allow-Credentials è¯¥å­—æ®µä¸ç®€å•è¯·æ±‚æ—¶çš„å«ä¹‰ç›¸åŒã€‚ Access-Control-Max-Age è¯¥å­—æ®µå¯é€‰ï¼Œç”¨æ¥æŒ‡å®šæœ¬æ¬¡é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ã€‚ä¸Šé¢ç»“æœä¸­ï¼Œæœ‰æ•ˆæœŸæ˜¯20å¤©ï¼ˆ1728000ç§’ï¼‰ï¼Œå³å…è®¸ç¼“å­˜è¯¥æ¡å›åº”1728000ç§’ï¼ˆå³20å¤©ï¼‰ï¼Œåœ¨æ­¤æœŸé—´ï¼Œä¸ç”¨å‘å‡ºå¦ä¸€æ¡é¢„æ£€è¯·æ±‚ã€‚ æµè§ˆå™¨çš„æ­£å¸¸è¯·æ±‚å’Œå›åº”ä¸€æ—¦æœåŠ¡å™¨é€šè¿‡äº†\"é¢„æ£€\"è¯·æ±‚ï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨æ­£å¸¸çš„CORSè¯·æ±‚ï¼Œå°±éƒ½è·Ÿç®€å•è¯·æ±‚ä¸€æ ·ï¼Œä¼šæœ‰ä¸€ä¸ªOriginå¤´ä¿¡æ¯å­—æ®µã€‚æœåŠ¡å™¨çš„å›åº”ï¼Œä¹Ÿéƒ½ä¼šæœ‰ä¸€ä¸ªAccess-Control-Allow-Originå¤´ä¿¡æ¯å­—æ®µã€‚ ä¸‹é¢æ˜¯\"é¢„æ£€\"è¯·æ±‚ä¹‹åï¼Œæµè§ˆå™¨çš„æ­£å¸¸CORSè¯·æ±‚ã€‚ PUT /cors HTTP/1.1 Origin: http://api.bob.com Host: api.alice.com X-Custom-Header: value Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... ä¸Šé¢å¤´ä¿¡æ¯çš„Originå­—æ®µæ˜¯æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ çš„ã€‚ ä¸‹é¢æ˜¯æœåŠ¡å™¨æ­£å¸¸çš„å›åº”ã€‚ Access-Control-Allow-Origin: http://api.bob.com Content-Type: text/html; charset=utf-8 ä¸Šé¢å¤´ä¿¡æ¯ä¸­ï¼ŒAccess-Control-Allow-Originå­—æ®µæ˜¯æ¯æ¬¡å›åº”éƒ½å¿…å®šåŒ…å«çš„ã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:3:3","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#é¢„æ£€è¯·æ±‚"},{"categories":["web"],"content":" éç®€å•è¯·æ±‚ é¢„æ£€è¯·æ±‚éç®€å•è¯·æ±‚æ˜¯é‚£ç§å¯¹æœåŠ¡å™¨æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯PUTæˆ–DELETEï¼Œæˆ–è€…Content-Typeå­—æ®µçš„ç±»å‹æ˜¯application/jsonã€‚ éç®€å•è¯·æ±‚çš„CORSè¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸ºâ€œé¢„æ£€\"è¯·æ±‚preflight requestã€‚ æµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº›HTTPåŠ¨è¯å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰å¾—åˆ°è‚¯å®šç­”å¤ï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„XMLHttpRequestè¯·æ±‚ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚ ä¸‹é¢æ˜¯ä¸€æ®µæµè§ˆå™¨çš„JavaScriptè„šæœ¬ã€‚ var url = 'http://api.alice.com/cors'; var xhr = new XMLHttpRequest(); xhr.open('PUT', url, true); xhr.setRequestHeader('X-Custom-Header', 'value'); xhr.send(); ä¸Šé¢ä»£ç ä¸­ï¼ŒHTTPè¯·æ±‚çš„æ–¹æ³•æ˜¯PUTï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªè‡ªå®šä¹‰å¤´ä¿¡æ¯X-Custom-Headerã€‚ æµè§ˆå™¨å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚ï¼Œå°±è‡ªåŠ¨å‘å‡ºä¸€ä¸ª\"é¢„æ£€\"è¯·æ±‚ï¼Œè¦æ±‚æœåŠ¡å™¨ç¡®è®¤å¯ä»¥è¿™æ ·è¯·æ±‚ã€‚ä¸‹é¢æ˜¯è¿™ä¸ª\"é¢„æ£€\"è¯·æ±‚çš„HTTPå¤´ä¿¡æ¯ã€‚ OPTIONS /cors HTTP/1.1 Origin: http://api.bob.com Access-Control-Request-Method: PUT Access-Control-Request-Headers: X-Custom-Header Host: api.alice.com Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... â€œé¢„æ£€\"è¯·æ±‚ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯OPTIONSï¼Œè¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ç”¨æ¥è¯¢é—®çš„ã€‚å¤´ä¿¡æ¯é‡Œé¢ï¼Œå…³é”®å­—æ®µæ˜¯Originï¼Œè¡¨ç¤ºè¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚ é™¤äº†Originå­—æ®µï¼Œâ€œé¢„æ£€\"è¯·æ±‚çš„å¤´ä¿¡æ¯åŒ…æ‹¬ä¸¤ä¸ªç‰¹æ®Šå­—æ®µã€‚ Access-Control-Request-Method è¯¥å­—æ®µæ˜¯å¿…é¡»çš„ï¼Œç”¨æ¥åˆ—å‡ºæµè§ˆå™¨çš„CORSè¯·æ±‚ä¼šç”¨åˆ°å“ªäº›HTTPæ–¹æ³•ï¼Œä¸Šä¾‹æ˜¯PUTã€‚ Access-Control-Request-Headers è¯¥å­—æ®µæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šæµè§ˆå™¨CORSè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µï¼Œä¸Šä¾‹æ˜¯X-Custom-Headerã€‚ é¢„æ£€è¯·æ±‚çš„å›åº”æœåŠ¡å™¨æ”¶åˆ°\"é¢„æ£€\"è¯·æ±‚ä»¥åï¼Œæ£€æŸ¥äº†Originã€Access-Control-Request-Methodå’ŒAccess-Control-Request-Headerså­—æ®µä»¥åï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›åº”ã€‚ HTTP/1.1 200 OK Date: Mon, 01 Dec 2008 01:15:39 GMT Server: Apache/2.0.61 (Unix) Access-Control-Allow-Origin: http://api.bob.com Access-Control-Allow-Methods: GET, POST, PUT Access-Control-Allow-Headers: X-Custom-Header Content-Type: text/html; charset=utf-8 Content-Encoding: gzip Content-Length: 0 Keep-Alive: timeout=2, max=100 Connection: Keep-Alive Content-Type: text/plain ä¸Šé¢çš„HTTPå›åº”ä¸­ï¼Œå…³é”®çš„æ˜¯Access-Control-Allow-Originå­—æ®µï¼Œè¡¨ç¤ºhttp://api.bob.comå¯ä»¥è¯·æ±‚æ•°æ®ã€‚è¯¥å­—æ®µä¹Ÿå¯ä»¥è®¾ä¸ºæ˜Ÿå·ï¼Œè¡¨ç¤ºåŒæ„ä»»æ„è·¨æºè¯·æ±‚ã€‚ Access-Control-Allow-Origin: * å¦‚æœæœåŠ¡å™¨å¦å®šäº†\"é¢„æ£€\"è¯·æ±‚ï¼Œä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•CORSç›¸å…³çš„å¤´ä¿¡æ¯å­—æ®µã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè®¤å®šï¼ŒæœåŠ¡å™¨ä¸åŒæ„é¢„æ£€è¯·æ±‚ï¼Œå› æ­¤è§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestå¯¹è±¡çš„onerror å›è°ƒå‡½æ•°æ•è·ã€‚æ§åˆ¶å°ä¼šæ‰“å°å‡ºå¦‚ä¸‹çš„æŠ¥é”™ä¿¡æ¯ã€‚ XMLHttpRequest cannot load http://api.alice.com. Origin http://api.bob.com is not allowed by Access-Control-Allow-Origin. æœåŠ¡å™¨å›åº”çš„å…¶ä»–CORSç›¸å…³å­—æ®µå¦‚ä¸‹ã€‚ Access-Control-Allow-Methods: GET, POST, PUT Access-Control-Allow-Headers: X-Custom-Header Access-Control-Allow-Credentials: true Access-Control-Max-Age: 1728000 Access-Control-Allow-Methods è¯¥å­—æ®µå¿…éœ€ï¼Œå®ƒçš„å€¼æ˜¯é€—å·åˆ†éš”çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•ã€‚æ³¨æ„ï¼Œè¿”å›çš„æ˜¯æ‰€æœ‰æ”¯æŒçš„æ–¹æ³•ï¼Œè€Œä¸å•æ˜¯æµè§ˆå™¨è¯·æ±‚çš„é‚£ä¸ªæ–¹æ³•ã€‚è¿™æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡\"é¢„æ£€\"è¯·æ±‚ã€‚ Access-Control-Allow-Headers å¦‚æœæµè§ˆå™¨è¯·æ±‚åŒ…æ‹¬Access-Control-Request-Headerså­—æ®µï¼Œåˆ™Access-Control-Allow-Headerså­—æ®µæ˜¯å¿…éœ€çš„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰å¤´ä¿¡æ¯å­—æ®µï¼Œä¸é™äºæµè§ˆå™¨åœ¨â€ é¢„æ£€\"ä¸­è¯·æ±‚çš„å­—æ®µã€‚ Access-Control-Allow-Credentials è¯¥å­—æ®µä¸ç®€å•è¯·æ±‚æ—¶çš„å«ä¹‰ç›¸åŒã€‚ Access-Control-Max-Age è¯¥å­—æ®µå¯é€‰ï¼Œç”¨æ¥æŒ‡å®šæœ¬æ¬¡é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ã€‚ä¸Šé¢ç»“æœä¸­ï¼Œæœ‰æ•ˆæœŸæ˜¯20å¤©ï¼ˆ1728000ç§’ï¼‰ï¼Œå³å…è®¸ç¼“å­˜è¯¥æ¡å›åº”1728000ç§’ï¼ˆå³20å¤©ï¼‰ï¼Œåœ¨æ­¤æœŸé—´ï¼Œä¸ç”¨å‘å‡ºå¦ä¸€æ¡é¢„æ£€è¯·æ±‚ã€‚ æµè§ˆå™¨çš„æ­£å¸¸è¯·æ±‚å’Œå›åº”ä¸€æ—¦æœåŠ¡å™¨é€šè¿‡äº†\"é¢„æ£€\"è¯·æ±‚ï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨æ­£å¸¸çš„CORSè¯·æ±‚ï¼Œå°±éƒ½è·Ÿç®€å•è¯·æ±‚ä¸€æ ·ï¼Œä¼šæœ‰ä¸€ä¸ªOriginå¤´ä¿¡æ¯å­—æ®µã€‚æœåŠ¡å™¨çš„å›åº”ï¼Œä¹Ÿéƒ½ä¼šæœ‰ä¸€ä¸ªAccess-Control-Allow-Originå¤´ä¿¡æ¯å­—æ®µã€‚ ä¸‹é¢æ˜¯\"é¢„æ£€\"è¯·æ±‚ä¹‹åï¼Œæµè§ˆå™¨çš„æ­£å¸¸CORSè¯·æ±‚ã€‚ PUT /cors HTTP/1.1 Origin: http://api.bob.com Host: api.alice.com X-Custom-Header: value Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... ä¸Šé¢å¤´ä¿¡æ¯çš„Originå­—æ®µæ˜¯æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ çš„ã€‚ ä¸‹é¢æ˜¯æœåŠ¡å™¨æ­£å¸¸çš„å›åº”ã€‚ Access-Control-Allow-Origin: http://api.bob.com Content-Type: text/html; charset=utf-8 ä¸Šé¢å¤´ä¿¡æ¯ä¸­ï¼ŒAccess-Control-Allow-Originå­—æ®µæ˜¯æ¯æ¬¡å›åº”éƒ½å¿…å®šåŒ…å«çš„ã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:3:3","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#é¢„æ£€è¯·æ±‚çš„å›åº”"},{"categories":["web"],"content":" éç®€å•è¯·æ±‚ é¢„æ£€è¯·æ±‚éç®€å•è¯·æ±‚æ˜¯é‚£ç§å¯¹æœåŠ¡å™¨æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯·æ±‚ï¼Œæ¯”å¦‚è¯·æ±‚æ–¹æ³•æ˜¯PUTæˆ–DELETEï¼Œæˆ–è€…Content-Typeå­—æ®µçš„ç±»å‹æ˜¯application/jsonã€‚ éç®€å•è¯·æ±‚çš„CORSè¯·æ±‚ï¼Œä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰ï¼Œå¢åŠ ä¸€æ¬¡HTTPæŸ¥è¯¢è¯·æ±‚ï¼Œç§°ä¸ºâ€œé¢„æ£€\"è¯·æ±‚preflight requestã€‚ æµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨ï¼Œå½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦åœ¨æœåŠ¡å™¨çš„è®¸å¯åå•ä¹‹ä¸­ï¼Œä»¥åŠå¯ä»¥ä½¿ç”¨å“ªäº›HTTPåŠ¨è¯å’Œå¤´ä¿¡æ¯å­—æ®µã€‚åªæœ‰å¾—åˆ°è‚¯å®šç­”å¤ï¼Œæµè§ˆå™¨æ‰ä¼šå‘å‡ºæ­£å¼çš„XMLHttpRequestè¯·æ±‚ï¼Œå¦åˆ™å°±æŠ¥é”™ã€‚ ä¸‹é¢æ˜¯ä¸€æ®µæµè§ˆå™¨çš„JavaScriptè„šæœ¬ã€‚ var url = 'http://api.alice.com/cors'; var xhr = new XMLHttpRequest(); xhr.open('PUT', url, true); xhr.setRequestHeader('X-Custom-Header', 'value'); xhr.send(); ä¸Šé¢ä»£ç ä¸­ï¼ŒHTTPè¯·æ±‚çš„æ–¹æ³•æ˜¯PUTï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ªè‡ªå®šä¹‰å¤´ä¿¡æ¯X-Custom-Headerã€‚ æµè§ˆå™¨å‘ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚ï¼Œå°±è‡ªåŠ¨å‘å‡ºä¸€ä¸ª\"é¢„æ£€\"è¯·æ±‚ï¼Œè¦æ±‚æœåŠ¡å™¨ç¡®è®¤å¯ä»¥è¿™æ ·è¯·æ±‚ã€‚ä¸‹é¢æ˜¯è¿™ä¸ª\"é¢„æ£€\"è¯·æ±‚çš„HTTPå¤´ä¿¡æ¯ã€‚ OPTIONS /cors HTTP/1.1 Origin: http://api.bob.com Access-Control-Request-Method: PUT Access-Control-Request-Headers: X-Custom-Header Host: api.alice.com Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... â€œé¢„æ£€\"è¯·æ±‚ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯OPTIONSï¼Œè¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ç”¨æ¥è¯¢é—®çš„ã€‚å¤´ä¿¡æ¯é‡Œé¢ï¼Œå…³é”®å­—æ®µæ˜¯Originï¼Œè¡¨ç¤ºè¯·æ±‚æ¥è‡ªå“ªä¸ªæºã€‚ é™¤äº†Originå­—æ®µï¼Œâ€œé¢„æ£€\"è¯·æ±‚çš„å¤´ä¿¡æ¯åŒ…æ‹¬ä¸¤ä¸ªç‰¹æ®Šå­—æ®µã€‚ Access-Control-Request-Method è¯¥å­—æ®µæ˜¯å¿…é¡»çš„ï¼Œç”¨æ¥åˆ—å‡ºæµè§ˆå™¨çš„CORSè¯·æ±‚ä¼šç”¨åˆ°å“ªäº›HTTPæ–¹æ³•ï¼Œä¸Šä¾‹æ˜¯PUTã€‚ Access-Control-Request-Headers è¯¥å­—æ®µæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šæµè§ˆå™¨CORSè¯·æ±‚ä¼šé¢å¤–å‘é€çš„å¤´ä¿¡æ¯å­—æ®µï¼Œä¸Šä¾‹æ˜¯X-Custom-Headerã€‚ é¢„æ£€è¯·æ±‚çš„å›åº”æœåŠ¡å™¨æ”¶åˆ°\"é¢„æ£€\"è¯·æ±‚ä»¥åï¼Œæ£€æŸ¥äº†Originã€Access-Control-Request-Methodå’ŒAccess-Control-Request-Headerså­—æ®µä»¥åï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›åº”ã€‚ HTTP/1.1 200 OK Date: Mon, 01 Dec 2008 01:15:39 GMT Server: Apache/2.0.61 (Unix) Access-Control-Allow-Origin: http://api.bob.com Access-Control-Allow-Methods: GET, POST, PUT Access-Control-Allow-Headers: X-Custom-Header Content-Type: text/html; charset=utf-8 Content-Encoding: gzip Content-Length: 0 Keep-Alive: timeout=2, max=100 Connection: Keep-Alive Content-Type: text/plain ä¸Šé¢çš„HTTPå›åº”ä¸­ï¼Œå…³é”®çš„æ˜¯Access-Control-Allow-Originå­—æ®µï¼Œè¡¨ç¤ºhttp://api.bob.comå¯ä»¥è¯·æ±‚æ•°æ®ã€‚è¯¥å­—æ®µä¹Ÿå¯ä»¥è®¾ä¸ºæ˜Ÿå·ï¼Œè¡¨ç¤ºåŒæ„ä»»æ„è·¨æºè¯·æ±‚ã€‚ Access-Control-Allow-Origin: * å¦‚æœæœåŠ¡å™¨å¦å®šäº†\"é¢„æ£€\"è¯·æ±‚ï¼Œä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•CORSç›¸å…³çš„å¤´ä¿¡æ¯å­—æ®µã€‚è¿™æ—¶ï¼Œæµè§ˆå™¨å°±ä¼šè®¤å®šï¼ŒæœåŠ¡å™¨ä¸åŒæ„é¢„æ£€è¯·æ±‚ï¼Œå› æ­¤è§¦å‘ä¸€ä¸ªé”™è¯¯ï¼Œè¢«XMLHttpRequestå¯¹è±¡çš„onerror å›è°ƒå‡½æ•°æ•è·ã€‚æ§åˆ¶å°ä¼šæ‰“å°å‡ºå¦‚ä¸‹çš„æŠ¥é”™ä¿¡æ¯ã€‚ XMLHttpRequest cannot load http://api.alice.com. Origin http://api.bob.com is not allowed by Access-Control-Allow-Origin. æœåŠ¡å™¨å›åº”çš„å…¶ä»–CORSç›¸å…³å­—æ®µå¦‚ä¸‹ã€‚ Access-Control-Allow-Methods: GET, POST, PUT Access-Control-Allow-Headers: X-Custom-Header Access-Control-Allow-Credentials: true Access-Control-Max-Age: 1728000 Access-Control-Allow-Methods è¯¥å­—æ®µå¿…éœ€ï¼Œå®ƒçš„å€¼æ˜¯é€—å·åˆ†éš”çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰è·¨åŸŸè¯·æ±‚çš„æ–¹æ³•ã€‚æ³¨æ„ï¼Œè¿”å›çš„æ˜¯æ‰€æœ‰æ”¯æŒçš„æ–¹æ³•ï¼Œè€Œä¸å•æ˜¯æµè§ˆå™¨è¯·æ±‚çš„é‚£ä¸ªæ–¹æ³•ã€‚è¿™æ˜¯ä¸ºäº†é¿å…å¤šæ¬¡\"é¢„æ£€\"è¯·æ±‚ã€‚ Access-Control-Allow-Headers å¦‚æœæµè§ˆå™¨è¯·æ±‚åŒ…æ‹¬Access-Control-Request-Headerså­—æ®µï¼Œåˆ™Access-Control-Allow-Headerså­—æ®µæ˜¯å¿…éœ€çš„ã€‚å®ƒä¹Ÿæ˜¯ä¸€ä¸ªé€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¡¨æ˜æœåŠ¡å™¨æ”¯æŒçš„æ‰€æœ‰å¤´ä¿¡æ¯å­—æ®µï¼Œä¸é™äºæµè§ˆå™¨åœ¨â€ é¢„æ£€\"ä¸­è¯·æ±‚çš„å­—æ®µã€‚ Access-Control-Allow-Credentials è¯¥å­—æ®µä¸ç®€å•è¯·æ±‚æ—¶çš„å«ä¹‰ç›¸åŒã€‚ Access-Control-Max-Age è¯¥å­—æ®µå¯é€‰ï¼Œç”¨æ¥æŒ‡å®šæœ¬æ¬¡é¢„æ£€è¯·æ±‚çš„æœ‰æ•ˆæœŸï¼Œå•ä½ä¸ºç§’ã€‚ä¸Šé¢ç»“æœä¸­ï¼Œæœ‰æ•ˆæœŸæ˜¯20å¤©ï¼ˆ1728000ç§’ï¼‰ï¼Œå³å…è®¸ç¼“å­˜è¯¥æ¡å›åº”1728000ç§’ï¼ˆå³20å¤©ï¼‰ï¼Œåœ¨æ­¤æœŸé—´ï¼Œä¸ç”¨å‘å‡ºå¦ä¸€æ¡é¢„æ£€è¯·æ±‚ã€‚ æµè§ˆå™¨çš„æ­£å¸¸è¯·æ±‚å’Œå›åº”ä¸€æ—¦æœåŠ¡å™¨é€šè¿‡äº†\"é¢„æ£€\"è¯·æ±‚ï¼Œä»¥åæ¯æ¬¡æµè§ˆå™¨æ­£å¸¸çš„CORSè¯·æ±‚ï¼Œå°±éƒ½è·Ÿç®€å•è¯·æ±‚ä¸€æ ·ï¼Œä¼šæœ‰ä¸€ä¸ªOriginå¤´ä¿¡æ¯å­—æ®µã€‚æœåŠ¡å™¨çš„å›åº”ï¼Œä¹Ÿéƒ½ä¼šæœ‰ä¸€ä¸ªAccess-Control-Allow-Originå¤´ä¿¡æ¯å­—æ®µã€‚ ä¸‹é¢æ˜¯\"é¢„æ£€\"è¯·æ±‚ä¹‹åï¼Œæµè§ˆå™¨çš„æ­£å¸¸CORSè¯·æ±‚ã€‚ PUT /cors HTTP/1.1 Origin: http://api.bob.com Host: api.alice.com X-Custom-Header: value Accept-Language: en-US Connection: keep-alive User-Agent: Mozilla/5.0... ä¸Šé¢å¤´ä¿¡æ¯çš„Originå­—æ®µæ˜¯æµè§ˆå™¨è‡ªåŠ¨æ·»åŠ çš„ã€‚ ä¸‹é¢æ˜¯æœåŠ¡å™¨æ­£å¸¸çš„å›åº”ã€‚ Access-Control-Allow-Origin: http://api.bob.com Content-Type: text/html; charset=utf-8 ä¸Šé¢å¤´ä¿¡æ¯ä¸­ï¼ŒAccess-Control-Allow-Originå­—æ®µæ˜¯æ¯æ¬¡å›åº”éƒ½å¿…å®šåŒ…å«çš„ã€‚ ","date":"2019-03-18","objectID":"/cross-domain/:3:3","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#æµè§ˆå™¨çš„æ­£å¸¸è¯·æ±‚å’Œå›åº”"},{"categories":["web"],"content":" å‚è€ƒ è·¨åŸŸåŠå…¶è§£å†³æ–¹æ¡ˆ https://developer.mozilla.org/en-US/docs/web/http/cors#simple_requests è·¨åŸŸèµ„æºå…±äº« CORS è¯¦è§£ ","date":"2019-03-18","objectID":"/cross-domain/:4:0","series":null,"tags":["web"],"title":"è·¨åŸŸé—®é¢˜","uri":"/cross-domain/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,wampserverçš„å®‰è£…å’Œä½¿ç”¨,wampserver,wampserver php","date":"2018-11-12","objectID":"/wampserver-install-usage/","series":null,"tags":["wampserver","php"],"title":"wampserver çš„å®‰è£…å’Œä½¿ç”¨","uri":"/wampserver-install-usage/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æœ¬åœ°å¼€å‘ php ç¯å¢ƒæ¨èä½¿ç”¨ wampserverï¼Œä¸‹è½½åœ°å€ä¸º WampServer download | SourceForge.net å½“ç„¶å›½äº§çš„ phpStudy ä¹Ÿå¯ä»¥ï¼Œä¸ªäººå–œå¥½é—®é¢˜ã€‚ ","date":"2018-11-12","objectID":"/wampserver-install-usage/:0:0","series":null,"tags":["wampserver","php"],"title":"wampserver çš„å®‰è£…å’Œä½¿ç”¨","uri":"/wampserver-install-usage/#"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¸‹è½½å®‰è£… wampserver ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆå®‰è£… Visual C++ Redistributable for Visual Studioï¼Œè¿™æ˜¯ visual 2015 çš„ä¸‹è½½åœ°å€ Visual C++ Redistributable for Visual Studio 2015 from Official Microsoft Download Center ï¼Œæ ¹æ®è‡ªå·±çš„ç‰ˆæœ¬ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ã€‚ Visual Studio visual c++ redistributable for visual studio 2012 åœ¨å¾ˆå¤šæ—¶å€™å·²ç»ä¸èƒ½ç”¨äº†ã€‚ æˆ‘å®‰è£…çš„æ˜¯ 64 ä½çš„ wampserverï¼Œæ‰€ä»¥ä¸‹è½½å¯¹åº”çš„ visual C++ï¼š visual C++ å›¾ 1 visual C++ å›¾ 2 ä¹‹åå®‰è£… wampserver å®‰è£… wampserver åœ¨å®‰è£…è¿‡ç¨‹ä¸­ä¼šè®©ä½ é€‰æ‹©é»˜è®¤çš„æµè§ˆå™¨å’Œç¼–è¾‘å™¨ã€‚ ","date":"2018-11-12","objectID":"/wampserver-install-usage/:1:0","series":null,"tags":["wampserver","php"],"title":"wampserver çš„å®‰è£…å’Œä½¿ç”¨","uri":"/wampserver-install-usage/#ä¸‹è½½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é…ç½®å¦‚æœæœ‰éœ€è¦å¯ä»¥ä¿®æ”¹ wampserver çš„æ ¹ç›®å½• æ‰“å¼€ wampserver çš„å®‰è£…ç›®å½•ï¼Œåœ¨æ‰“å¼€é‡Œé¢çš„ script æ–‡ä»¶å¤¹ï¼Œç”¨è®°äº‹æœ¬æ‰“å¼€é‡Œé¢çš„ config.inc.php ,æ‰¾åˆ° $wwwDir = $c_installDir.'/www' æ”¹æˆå¸Œæœ›çš„ç›®å½•å°±è¡Œäº†ã€‚ æ¯”å¦‚æ”¹æˆ D:\\websiteï¼Œå¯¹åº”çš„ä»£ç å°±æ˜¯ $wwwDir = 'D:/website'ï¼›ç„¶åå…³é—­ wampserverã€‚ ï¼ˆæ³¨æ„ï¼Œwindowsä¸‹è¡¨ç¤ºè·¯å¾„çš„ \\åœ¨è¿™é‡Œå¿…é¡»æ”¹ä¸º /ï¼‰ wwwDir æ‰“å¼€ Apach ä¸‹é¢çš„ httpd.conf æ–‡ä»¶ï¼Œè·¯å¾„ç¤ºä¾‹ httpd.conf å¯»æ‰¾ DocumentRootï¼ŒæŠŠåé¢çš„å€¼æ”¹æˆæˆ‘ä»¬å®é™…ç½‘ç«™éœ€è¦çš„è·¯å¾„ï¼Œå†å¯»æ‰¾ \u003cDirectory \"c:/wamp/www/\"\u003e ä¿®æ”¹æˆç›¸åŒçš„è·¯å¾„ DocumentRoot é…ç½®è™šæ‹Ÿä¸»æœº VirtualHost ç¤ºä¾‹ \u003cVirtualHost *\u003e ServerAdmin root@localhost DocumentRoot \"D:\\projects\\pc-mes\\src\\public\" ServerName pc-mes.local ErrorLog \"d:\\wamp64\\www\\pc-mes.localhost-error.log\" CustomLog \"d:\\wamp64\\www\\pc-mes.localhost.log\" common \u003c/VirtualHost\u003e è®¿é—®ç¤ºä¾‹ è®¿é—®ç¤ºä¾‹ ","date":"2018-11-12","objectID":"/wampserver-install-usage/:2:0","series":null,"tags":["wampserver","php"],"title":"wampserver çš„å®‰è£…å’Œä½¿ç”¨","uri":"/wampserver-install-usage/#é…ç½®"},{"categories":["mysql"],"content":"xiaobinqt,mysql æ—¶é—´å‡½æ•°,mysql æ—¶é—´æˆ³è½¬æ—¶é—´ç±»å‹","date":"2018-11-08","objectID":"/mysql-common-func-memo/","series":null,"tags":["mysql"],"title":"Mysql å¸¸ç”¨å‡½æ•°å¤‡å¿˜","uri":"/mysql-common-func-memo/"},{"categories":["mysql"],"content":" æ—¶é—´æˆ³ä¸æ—¥æœŸæ ¼å¼è½¬æ¢UNIXæ—¶é—´æˆ³è½¬æ¢ä¸ºæ—¥æœŸç”¨å‡½æ•°ï¼š FROM_UNIXTIME() select FROM_UNIXTIME(1156219870); FROM_UNIXTIME æ—¥æœŸè½¬æ¢ä¸ºUNIXæ—¶é—´æˆ³ç”¨å‡½æ•°ï¼š UNIX_TIMESTAMP() UNIX_TIMESTAMP ","date":"2018-11-08","objectID":"/mysql-common-func-memo/:1:0","series":null,"tags":["mysql"],"title":"Mysql å¸¸ç”¨å‡½æ•°å¤‡å¿˜","uri":"/mysql-common-func-memo/#æ—¶é—´æˆ³ä¸æ—¥æœŸæ ¼å¼è½¬æ¢"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"Windows,ç³»ç»Ÿ,é‡åšç³»ç»Ÿ,win,win10,Uç›˜å®‰è£…ç³»ç»Ÿ","date":"2018-10-07","objectID":"/redo-system/","series":null,"tags":["windows"],"title":"windows é‡åšç³»ç»Ÿ","uri":"/redo-system/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ä¸‹è½½ç³»ç»Ÿé¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæœ€å° 4G å¤§çš„ U ç›˜ è¿›å…¥å¤§ç™½èœç½‘ç«™ä¸‹è½½å¤§ç™½èœè£…æœºç‰ˆå®‰è£…åˆ°ç”µè„‘ï¼Œå¥½å§ï¼Œä¹‹å‰ä¸€ç›´å«å¤§ç™½èœï¼Œä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ”¹æˆå«è€ç™½èœäº†ğŸ˜¢ã€‚ å°† U ç›˜æ’åˆ°ç”µè„‘ä¸Š,åŒå‡»æ‰“å¼€å¤§ç™½èœè£…æœºç‰ˆ,å®ƒä¼šè‡ªåŠ¨è¯»åˆ°æˆ‘ä»¬æ’å…¥çš„ U ç›˜ï¼Œè‡ªåŠ¨åŒ¹é…é»˜è®¤æ¨¡å¼,ä¸éœ€è¦æ‰‹åŠ¨é€‰æ‹©ã€‚ ç‚¹å‡»å¼€å§‹åˆ¶ä½œ â€“\u003e ç¡®è®¤ ç­‰å¾…å†™å…¥æ•°æ®åŒ…å®Œæˆå’Œæ ¼å¼åŒ–å®Œæˆåå…³æ‰å¤§ç™½èœè½¯ä»¶ åˆ¶ä½œå®Œ U ç›˜å¯åŠ¨ç›˜åæˆ‘ä»¬çš„ U ç›˜ä¼šå˜æˆè¿™æ ·è¯´æ˜å¯åŠ¨ç›˜å·²ç»åˆ¶ä½œæˆåŠŸ ! image å»itellyouä¸‹è½½éœ€è¦å®‰è£…çš„æ“ä½œç³»ç»Ÿ ! æ¯”å¦‚æˆ‘ä»¬è¦å®‰è£…è¿™ä¸ªç‰ˆæœ¬çš„ win10 é€šè¿‡ç™¾åº¦ç½‘ç›˜ä¸‹è½½ ed2k æ–‡ä»¶èµ„æº,ç„¶åå†é€šè¿‡ç™¾åº¦ç½‘ç›˜ä¸‹è½½åˆ°ç”µè„‘æœ¬åœ°,å¯ä»¥æ”¾åœ¨é™¤ C ç›˜å¤–çš„å…¶ä»–ç›˜ä¸­ ä¸‹è½½åˆ°æœ¬åœ°çš„æ–‡ä»¶æ˜¯è¿™æ ·çš„å…‰ç›˜æ˜ åƒæ–‡ä»¶ ! å°†æˆ‘ä»¬ä¸‹è½½åˆ°ç”µè„‘æœ¬åœ°çš„å…‰ç›˜æ˜ åƒæ–‡ä»¶å¤åˆ¶åˆ°åˆšåˆ¶ä½œå®Œæˆçš„ U ç›˜å¯åŠ¨ç›˜ä¸­,å¤åˆ¶å®Œæˆåæˆ‘ä»¬ U ç›˜å¯åŠ¨ç›˜å°±å…¨éƒ¨åˆ¶ä½œå®Œæˆäº† ","date":"2018-10-07","objectID":"/redo-system/:1:0","series":null,"tags":["windows"],"title":"windows é‡åšç³»ç»Ÿ","uri":"/redo-system/#ä¸‹è½½ç³»ç»Ÿ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é‡åšç³»ç»Ÿå°†æˆ‘ä»¬åˆ¶ä½œå¥½çš„ U ç›˜å¯åŠ¨ç›˜æ’åˆ°éœ€è¦é‡åšç³»ç»Ÿçš„ç”µè„‘ä¸Š,é‡å¯ç”µè„‘ä¸€ç›´æŒ‰ F12 è¿›å…¥ bios ç•Œé¢(ä¸åŒçš„ç”µè„‘å¯èƒ½æŒ‰é”®ä¸åŒ,å¯ä»¥ç™¾åº¦) é€‰æ‹© usb æ–¹å¼,å›è½¦è¿›å…¥å¤§ç™½èœå¯åŠ¨æ–¹å¼,é€‰æ‹© 02 æ–¹å¼è¿›å…¥ è¿›å…¥ u ç›˜é©±åŠ¨ç•Œé¢,ç³»ç»Ÿé»˜è®¤ä¼šé€‰æ‹© C ç›˜ä¸ºç³»ç»Ÿç›˜,ç›´æ¥ç‚¹å‡»ç¡®å®š ç¡®å®šåè¿›å…¥æ ¼å¼åŒ– C ç›˜é˜¶æ®µ,æ‰€æœ‰é…ç½®ä¸ºé»˜è®¤é…ç½®,ç›´æ¥ç¡®å®š,ç­‰å¾…æ ¼å¼åŒ–å®Œæˆ! æ ¼å¼åŒ–å®Œæˆåé€‰æ‹© æ˜¯ é‡å¯ç”µè„‘,æ‹”å‡º u ç›˜ ç­‰å¾…ç”µè„‘é‡å¯ ","date":"2018-10-07","objectID":"/redo-system/:2:0","series":null,"tags":["windows"],"title":"windows é‡åšç³»ç»Ÿ","uri":"/redo-system/#é‡åšç³»ç»Ÿ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®‰è£…ç³»ç»Ÿå®Œæˆ ","date":"2018-10-07","objectID":"/redo-system/:3:0","series":null,"tags":["windows"],"title":"windows é‡åšç³»ç»Ÿ","uri":"/redo-system/#å®‰è£…ç³»ç»Ÿå®Œæˆ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" WinNTSetup ä½¿ç”¨æœ€æ–°çš„å¤§ç™½èœæ¡Œé¢æ˜¯è¿™æ ·ğŸ‘‡ å¯ä»¥ä½¿ç”¨ WinNTSetup å®‰è£…çº¯å‡€ç‰ˆç³»ç»Ÿã€‚åŒå‡» WinNTSetup è¿›å…¥ï¼Œé€‰æ‹© windows å®‰è£…æºä¸ºä¸‹è½½çš„ ISO é•œåƒï¼Œé€‰æ‹©å¼•å¯¼é©±åŠ¨å™¨å’Œå®‰è£…é©±åŠ¨å™¨ç›˜ç¬¦ã€‚ ä½¿ç”¨ WinNTSetup ","date":"2018-10-07","objectID":"/redo-system/:4:0","series":null,"tags":["windows"],"title":"windows é‡åšç³»ç»Ÿ","uri":"/redo-system/#winntsetup-ä½¿ç”¨"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç³»ç»Ÿæ¿€æ´» è¿›å…¥ç³»ç»ŸåæŒ‰ Win+X é”®ï¼Œé€‰æ‹©å‘½ä»¤æç¤ºç¬¦ï¼ˆç®¡ç†å‘˜ï¼‰ å¤åˆ¶ä»¥ä¸‹å†…å®¹å¹¶è¿è¡Œ # ç¬¬ä¸€æ­¥ slmgr.vbs /skms 222.184.9.98 ## ç¬¬äºŒæ­¥ slmgr.vbs /ato ","date":"2018-10-07","objectID":"/redo-system/:5:0","series":null,"tags":["windows"],"title":"windows é‡åšç³»ç»Ÿ","uri":"/redo-system/#ç³»ç»Ÿæ¿€æ´»"},{"categories":["mysql"],"content":"xiaobinqt,mysql where å’Œ having çš„åŒºåˆ«,what difference between where and having","date":"2018-07-05","objectID":"/what-difference-between-where-and-having/","series":null,"tags":["mysql"],"title":"mysql where å’Œ having çš„åŒºåˆ«","uri":"/what-difference-between-where-and-having/"},{"categories":["mysql"],"content":" æ€»è§ˆwhere æ˜¯ä¸€ä¸ªçº¦æŸå£°æ˜ï¼Œåœ¨æŸ¥è¯¢æ•°æ®åº“çš„ç»“æœè¿”å›ä¹‹å‰å¯¹æ•°æ®åº“ä¸­çš„æ¡ä»¶è¿›è¡Œçº¦æŸï¼Œwhere åé¢è¦è·Ÿçš„å¿…é¡»æ˜¯æ•°æ®è¡¨é‡ŒçœŸå®å­˜åœ¨çš„å­—æ®µï¼Œå³åœ¨ç»“æœè¿”å›ä¹‹å‰èµ·ä½œç”¨ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆ where åé¢ä¸èƒ½å†™èšåˆå‡½æ•°è¿™ä¸ªé—®é¢˜ä¹Ÿå¥½ç†è§£äº†ï¼Œå› ä¸ºèšåˆå‡½æ•°çš„åˆ—ä¸æ˜¯æ•°æ®åº“è¡¨é‡Œçš„å­—æ®µã€‚ having æ˜¯ä¸€ä¸ªè¿‡æ»¤å£°æ˜ï¼Œæ˜¯åœ¨æŸ¥è¯¢æ•°æ®åº“ç»“æœè¿”å›ä¹‹åè¿›è¡Œè¿‡æ»¤ï¼Œå³åœ¨ç»“æœè¿”å›å€¼åèµ·ä½œç”¨ã€‚ é‚£ä¹ˆä¸ºä»€ä¹ˆ having åé¢å¯ä»¥å†™èšåˆå‡½æ•°ä¹Ÿå¥½ç†è§£äº†ï¼Œå› ä¸º having åªæ˜¯æ ¹æ®å‰é¢æŸ¥è¯¢å‡ºæ¥çš„æ˜¯ä»€ä¹ˆå°±å¯ä»¥åé¢æ¥ä»€ä¹ˆã€‚ ","date":"2018-07-05","objectID":"/what-difference-between-where-and-having/:1:0","series":null,"tags":["mysql"],"title":"mysql where å’Œ having çš„åŒºåˆ«","uri":"/what-difference-between-where-and-having/#æ€»è§ˆ"},{"categories":["mysql"],"content":" ç¤ºä¾‹","date":"2018-07-05","objectID":"/what-difference-between-where-and-having/:2:0","series":null,"tags":["mysql"],"title":"mysql where å’Œ having çš„åŒºåˆ«","uri":"/what-difference-between-where-and-having/#ç¤ºä¾‹"},{"categories":["mysql"],"content":" ç¤ºä¾‹ 1 select * from edge where edge_id = '0104932b-8edc-4f2d-9d51-c0450867e373'; -- sql1 æ­£ç¡® select * from edge having edge_id = '0104932b-8edc-4f2d-9d51-c0450867e373'; -- sql2 æ­£ç¡® è¿™ä¸¤å¥ sql çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œsql1 ç”¨ where è¿‡æ»¤ç›¸å½“äºåœ¨è¿”å›ç»“æœå‰è¿‡æ»¤ï¼Œsql2 ç”¨ having è¿‡æ»¤ç›¸å½“äºåœ¨è¿”å›ç»“æœåè¿‡æ»¤ã€‚ ","date":"2018-07-05","objectID":"/what-difference-between-where-and-having/:2:1","series":null,"tags":["mysql"],"title":"mysql where å’Œ having çš„åŒºåˆ«","uri":"/what-difference-between-where-and-having/#ç¤ºä¾‹-1"},{"categories":["mysql"],"content":" ç¤ºä¾‹ 2 select token name from edge where edge_id = '0104932b-8edc-4f2d-9d51-c0450867e373'; -- sql1 æ­£ç¡® select token name from student having edge_id = '0104932b-8edc-4f2d-9d51-c0450867e373'; -- sql2 é”™è¯¯ sql1 æ˜¯æ­£ç¡®çš„ï¼Œè¡¨ä¸­å­˜åœ¨ edge_id è¿™ä¸ªå­—æ®µå¯ä»¥è¿‡æ»¤ã€‚ sql2 æ˜¯é”™è¯¯çš„ï¼Œå› ä¸º select åæ²¡æœ‰ edge_id è¿™ä¸ªå­—æ®µï¼Œæ‰€ä»¥ä¸èƒ½è¿‡æ»¤ã€‚ ","date":"2018-07-05","objectID":"/what-difference-between-where-and-having/:2:2","series":null,"tags":["mysql"],"title":"mysql where å’Œ having çš„åŒºåˆ«","uri":"/what-difference-between-where-and-having/#ç¤ºä¾‹-2"},{"categories":["mysql"],"content":" ç¤ºä¾‹ 3 select count(instance_id) as c, instance_id from edge group by instance_id having c \u003e 10; -- sql1 æ­£ç¡® select count(instance_id) as c, instance_id from edge where c \u003e 10 group by instance_id; -- sql2 é”™è¯¯ sql1 æ˜¯æ­£ç¡®çš„ï¼Œå› ä¸º c åœ¨ select çš„å­—æ®µä¸­æ˜¯å­˜åœ¨ï¼Œæ˜¯ count(instance_id) çš„åˆ«åï¼Œæ‰€ä»¥è¿™é‡Œå†™æˆ having count(instance_id) \u003e 10 ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚ sql2 æ˜¯é”™è¯¯çš„ï¼Œå› ä¸º c è¿™ä¸ªå­—æ®µåœ¨è¡¨ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼Œæ‰€ä»¥ä¸èƒ½è¿‡æ»¤ï¼Œå³ä½¿å†™æˆ count(instance_id) \u003e 10 ä¹Ÿæ˜¯é”™è¯¯çš„ã€‚ ","date":"2018-07-05","objectID":"/what-difference-between-where-and-having/:2:3","series":null,"tags":["mysql"],"title":"mysql where å’Œ having çš„åŒºåˆ«","uri":"/what-difference-between-where-and-having/#ç¤ºä¾‹-3"},{"categories":["mysql"],"content":" æ€»ç»“where åªèƒ½è¿‡æ»¤æ•°æ®åº“çœŸå®å­˜åœ¨çš„å­—æ®µï¼Œhaving å¯ä»¥è¿‡æ»¤ select åçš„æŸ¥è¯¢å­—æ®µã€‚ where å­å¥åœ¨åˆ†ç»„å‰è¿›è¡Œè¿‡æ»¤ï¼Œä½œç”¨äºæ¯ä¸€æ¡è®°å½•ï¼Œwhere å­å¥è¿‡æ»¤æ‰çš„è®°å½•å°†ä¸åŒ…æ‹¬åœ¨åˆ†ç»„ä¸­ã€‚è€Œ having å­å¥åœ¨æ•°æ®åˆ†ç»„åè¿›è¡Œè¿‡æ»¤ï¼Œä½œç”¨äºæ•´ä¸ªåˆ†ç»„ã€‚ ","date":"2018-07-05","objectID":"/what-difference-between-where-and-having/:3:0","series":null,"tags":["mysql"],"title":"mysql where å’Œ having çš„åŒºåˆ«","uri":"/what-difference-between-where-and-having/#æ€»ç»“"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,Docker slimã€stretchã€busterã€jessieã€alpineã€busyBoxã€debianã€Ubuntuã€CentOSã€Fedoraã€buildpack-deps","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç‰ˆæœ¬ä»£å·æˆ‘å¤ªéš¾äº†ï¼Œæè¿™ä¹ˆå¤šä»£å·å¹²å•¥ğŸ˜¢ åœ¨å†™ Dockerfile å¼•ç”¨åŸºç¡€é•œåƒæ—¶ç»å¸¸ä¼šçœ‹åˆ°è¿™æ ·çš„å†™æ³•ï¼š FROM debian:buster æˆ–æ˜¯ FROM node:14.16.1-stretch-slim é‚£è¿™é‡Œçš„ buster å’Œ stretch å…·ä½“æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å® busterã€stretchè¿˜æœ‰jessieé’ˆå¯¹çš„æ˜¯ä¸åŒ Debian ä»£å·codenameï¼Œé™¤äº† Debian ä¹‹å¤–ï¼Œè¿˜æœ‰ Ubuntuã€CentOSã€Fedoraï¼Œä»–ä»¬æ¯æ¬¡åœ¨æ›´æ–°ç‰ˆæœ¬æ—¶éƒ½ä¼šæ›´æ–°ä»£å·ã€‚ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:1:0","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#ç‰ˆæœ¬ä»£å·"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ubuntu ç‰ˆæœ¬ä»£å· ubuntuç‰ˆæœ¬ä»£å· ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:1:1","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#ubuntu-ç‰ˆæœ¬ä»£å·"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" debian ç‰ˆæœ¬ä»£å· debianç‰ˆæœ¬ä»£å· ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:1:2","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#debian-ç‰ˆæœ¬ä»£å·"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" slimã€fatã€rc å‘½åè§„åˆ™ slim å¯ä»¥ç†è§£ä¸ºç²¾ç®€ç‰ˆï¼Œè·Ÿ Minimalæ˜¯ä¸€æ ·çš„ï¼Œä»…å®‰è£…è¿è¡Œç‰¹å®šå·¥å…·æ‰€éœ€çš„æœ€å°‘è½¯ä»¶åŒ…ã€‚fat é•œåƒä¼šæ¯”è¾ƒå¤§ï¼Œé€‚åˆç”¨æ¥å¼€å‘è°ƒè¯•ã€‚ rc ç‰ˆï¼ˆå€™é€‰ç‰ˆæœ¬ï¼Œrelease candidateï¼‰ æ‰€ä»¥FROM debian:buster å°±æ˜¯æŠŠ debian 10 ä½œä¸ºåŸºç¡€é•œåƒï¼ŒFROM node:14.16.1-stretch-slim å°±æ˜¯æŠŠ debian 9 çš„ç²¾ç®€ç‰ˆä½œä¸ºåŸºç¡€é•œåƒã€‚ å®¹å™¨çš„æ ¸å¿ƒæ˜¯åº”ç”¨ã€‚é€‰æ‹©è¿‡å¤§çš„çˆ¶é•œåƒï¼ˆå¦‚Ubuntuç³»ç»Ÿé•œåƒï¼‰ä¼šé€ æˆæœ€ç»ˆç”Ÿæˆåº”ç”¨é•œåƒçš„è‡ƒè‚¿ï¼Œæ‰€ä»¥ä¼šæœ‰è¿™ç§ç˜¦èº«è¿‡çš„åº”ç”¨é•œåƒï¼ˆå¦‚node:slimï¼‰ï¼Œæˆ–è€…è¾ƒä¸ºå°å·§çš„ç³»ç»Ÿé•œåƒï¼ˆå¦‚ alpineã€busybox æˆ– debianï¼‰ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:2:0","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#slimfatrc"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" buildpack-depsbuildpack-deps æ˜¯ docker hub å®˜æ–¹æä¾›çš„ä¸€ä¸ªé•œåƒå·¥å…·åŒ…ï¼Œå¾ˆå¤š docker å®˜æ–¹çš„åŸºç¡€é•œåƒéƒ½åŸºäºæ­¤åŸºç¡€é•œåƒè¿›è¡Œæ„å»ºçš„ï¼Œbuildpack-deps å·²ç»æä¾›äº†å¾ˆå¤šå†…ç½®å¥½çš„ä¾èµ–åº“ï¼Œå¯ä»¥ç®€åŒ–é•œåƒéƒ¨ç½²ï¼Œå®˜æ–¹ä¹Ÿæä¾›äº† debian ä»¥åŠ ubuntu ç­‰çš„é•œåƒï¼Œå¦‚ debian 10 buildpack-deps:busterï¼Œubuntu 16 buildpack-deps:xenial ç­‰ã€‚ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:3:0","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#buildpack-deps"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ“ä½œç³»ç»Ÿalpineã€debianã€ubuntuã€centOSã€fedora è¿™äº›éƒ½æ˜¯æ“ä½œç³»ç»Ÿï¼Œæ˜¯ Linux çš„å‘è¡Œç‰ˆã€‚ Linuxå‘è¡Œç‰ˆ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:4:0","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#æ“ä½œç³»ç»Ÿ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" BusyboxBusyBox æ˜¯ä¸€ä¸ªé›†æˆäº†ä¸€ç™¾å¤šä¸ªæœ€å¸¸ç”¨ Linux å‘½ä»¤å’Œå·¥å…·ï¼ˆå¦‚ catã€echoã€grepã€mountã€telnet ç­‰ï¼‰çš„ç²¾ç®€å·¥å…·ç®± ï¼Œå®ƒåªæœ‰å‡ MBçš„å¤§å°ï¼Œè¢«èª‰ä¸ºâ€œLinuxç³»ç»Ÿçš„ç‘å£«å†›åˆ€â€ã€‚ busybox ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:4:1","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#busybox"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" AlpineAlpine æ“ä½œç³»ç»Ÿæ˜¯ä¸€ä¸ªé¢å‘å®‰å…¨çš„è½»å‹ Linux å‘è¡Œç‰ˆã€‚å®ƒä¸åŒäºé€šå¸¸çš„ Linux å‘è¡Œç‰ˆï¼ŒAlpine é‡‡ç”¨äº† musl libc å’Œ BusyBox ä»¥å‡å°ç³»ç»Ÿçš„ä½“ç§¯å’Œè¿è¡Œæ—¶èµ„æºæ¶ˆè€—ï¼Œä½†åŠŸèƒ½ä¸Šæ¯” BusyBox åˆå®Œå–„å¾—å¤šã€‚åœ¨ä¿æŒç˜¦èº«çš„åŒæ—¶ï¼ŒAlpine è¿˜æä¾›äº†è‡ªå·±çš„åŒ…ç®¡ç†å·¥å…·apk ï¼Œå¯ä»¥é€šè¿‡ https://pkgs.alpinelinux.org/packages æŸ¥è¯¢åŒ…ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡apkå‘½ä»¤ç›´æ¥æŸ¥è¯¢å’Œå®‰è£…å„ç§è½¯ä»¶ã€‚ ç›¸æ¯”äºå…¶ä»– Docker é•œåƒï¼ŒAlpine Docker çš„å®¹é‡éå¸¸å°ï¼Œä»…ä»…åªæœ‰ 5MB å·¦å³ï¼Œè€Œ Ubuntu ç³»åˆ—é•œåƒæ¥è¿‘ 200MBï¼Œä¸”æ‹¥æœ‰éå¸¸å‹å¥½çš„åŒ…ç®¡ç†æœºåˆ¶ã€‚ Docker å®˜æ–¹æ¨èä½¿ç”¨ Alpine ä½œä¸ºé»˜è®¤çš„åŸºç¡€é•œåƒç¯å¢ƒï¼Œè¿™å¯ä»¥å¸¦æ¥å¤šä¸ªä¼˜åŠ¿ï¼Œå¦‚é•œåƒä¸‹è½½é€Ÿåº¦åŠ å¿«ã€é•œåƒå®‰å…¨æ€§æé«˜ã€ä¸»æœºä¹‹é—´çš„åˆ‡æ¢æ›´æ–¹ä¾¿ã€å ç”¨æ›´å°‘ç£ç›˜ç©ºé—´ç­‰ã€‚ Alpine é•œåƒçš„ç¼ºç‚¹å°±åœ¨äºå®ƒå®åœ¨è¿‡äºç²¾ç®€ ï¼Œä»¥è‡³äºéº»é›€è™½å°ï¼Œä¹Ÿæ— æ³•åšåˆ°äº”è„ä¿±å…¨äº†ã€‚åœ¨ Alpine ä¸­ç¼ºå°‘å¾ˆå¤šå¸¸è§çš„å·¥å…·å’Œç±»åº“ï¼Œä»¥è‡³äºå¦‚æœæƒ³åŸºäº Alpine æ ‡ç­¾çš„é•œåƒè¿›è¡ŒäºŒæ¬¡æ„å»ºï¼Œé‚£æ­å»ºçš„è¿‡ç¨‹ä¼šç›¸å½“çƒ¦çã€‚æ‰€ä»¥å¦‚æœæƒ³è¦å¯¹è½¯ä»¶é•œåƒè¿›è¡Œæ”¹é€ ï¼Œå¹¶åŸºäºå…¶æ„å»ºæ–°çš„é•œåƒï¼Œé‚£ä¹ˆ Alpine é•œåƒä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:4:2","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#alpine"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" DebianDebian æ˜¯ç”± GPL å’Œå…¶ä»–è‡ªç”±è½¯ä»¶è®¸å¯åè®®æˆæƒçš„è‡ªç”±è½¯ä»¶ç»„æˆçš„æ“ä½œç³»ç»Ÿï¼Œç”± Debian Project ç»„ç»‡ç»´æŠ¤ã€‚Debian ä»¥å…¶åšå®ˆ Unix å’Œè‡ªç”±è½¯ä»¶çš„ç²¾ç¥ï¼Œä»¥åŠç»™äºˆç”¨æˆ·çš„ä¼—å¤šé€‰æ‹©è€Œé—»åã€‚ ä½œä¸ºä¸€ä¸ªå¤§çš„ç³»ç»Ÿç»„ç»‡æ¡†æ¶ï¼ŒDebianä¸‹é¢æœ‰å¤šç§ä¸åŒæ“ä½œç³»ç»Ÿæ ¸å¿ƒçš„åˆ†æ”¯è®¡åˆ’ ï¼Œä¸»è¦ä¸ºé‡‡ç”¨ Linux æ ¸å¿ƒçš„ Debian GNU/Linux ç³»ç»Ÿï¼Œå…¶ä»–è¿˜æœ‰é‡‡ç”¨ GNU Hurd æ ¸å¿ƒçš„ Debian GNU/Hurd ç³»ç»Ÿã€é‡‡ç”¨ FreeBSD æ ¸å¿ƒçš„ Debian GNU/kFreeBSD ç³»ç»Ÿï¼Œä»¥åŠé‡‡ç”¨ NetBSD æ ¸å¿ƒçš„ Debian GNU/NetBSD ç³»ç»Ÿï¼Œç”šè‡³è¿˜æœ‰åˆ©ç”¨ Debian çš„ç³»ç»Ÿæ¶æ„å’Œå·¥å…·ï¼Œé‡‡ç”¨ OpenSolaris æ ¸å¿ƒæ„å»ºè€Œæˆçš„ Nexenta OS ç³»ç»Ÿã€‚åœ¨è¿™äº› Debian ç³»ç»Ÿä¸­ï¼Œä»¥é‡‡ç”¨ Linux æ ¸å¿ƒçš„ Debian GNU/Linux æœ€ä¸ºè‘—åã€‚ ä¼—å¤šçš„ Linux å‘è¡Œç‰ˆï¼Œä¾‹å¦‚ Ubuntuã€Knoppix å’Œ Linspire åŠ Xandros ç­‰ï¼Œéƒ½åŸºäº Debian GNU/Linuxã€‚ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:4:3","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#debian"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" UbuntuUbuntu æ˜¯ä¸€ä¸ªä»¥æ¡Œé¢åº”ç”¨ä¸ºä¸»çš„ GNU/Linux æ“ä½œç³»ç»Ÿã€‚Ubuntu åŸºäº Debian å‘è¡Œç‰ˆå’Œ GNOME/Unity æ¡Œé¢ç¯å¢ƒï¼Œä¸ Debian çš„ä¸åŒåœ¨äºå®ƒæ¯6ä¸ªæœˆä¼šå‘å¸ƒä¸€ä¸ªæ–°ç‰ˆæœ¬ï¼Œæ¯2å¹´ä¼šæ¨å‡ºä¸€ä¸ªé•¿æœŸæ”¯æŒï¼ˆLong Term Supportï¼ŒLTSï¼‰ç‰ˆæœ¬ï¼Œä¸€èˆ¬æ”¯æŒ3å¹´ã€‚ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:4:4","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#ubuntu"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" CentOSCentOS æ˜¯åŸºäº Redhat çš„å¸¸è§ Linux åˆ†æ”¯ã€‚CentOS æ˜¯ç›®å‰ä¼ä¸šçº§æœåŠ¡å™¨çš„å¸¸ç”¨æ“ä½œç³»ç»Ÿã€‚ CentOSï¼ˆCommunity Enterprise Operating Systemï¼Œç¤¾åŒºä¼ä¸šæ“ä½œç³»ç»Ÿï¼‰æ˜¯åŸºäº Red Hat Enterprise Linux æºä»£ç ç¼–è¯‘è€Œæˆçš„ã€‚ç”±äº CentOS ä¸ Redhat Linux æºäºç›¸åŒçš„ä»£ç åŸºç¡€ï¼Œæ‰€ä»¥å¾ˆå¤šæˆæœ¬æ•æ„Ÿä¸”éœ€è¦é«˜ç¨³å®šæ€§çš„å…¬å¸å°±ä½¿ç”¨ CentOS æ¥æ›¿ä»£å•†ä¸šç‰ˆ Red Hat Enterprise Linuxã€‚CentOS è‡ªèº«ä¸åŒ…å«é—­æºè½¯ä»¶ã€‚ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:4:5","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#centos"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" FedoraFedora ä¹Ÿæ˜¯åŸºäº Redhat çš„å¸¸è§ Linuxåˆ†æ”¯ã€‚Fedora åˆ™ä¸»è¦é¢å‘ä¸ªäººæ¡Œé¢ç”¨æˆ·ã€‚ Fedora æ˜¯ç”± Fedora Project ç¤¾åŒºå¼€å‘ï¼Œçº¢å¸½å…¬å¸èµåŠ©çš„ Linux å‘è¡Œç‰ˆã€‚å®ƒçš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€å¥—æ–°é¢–ã€å¤šåŠŸèƒ½å¹¶ä¸”è‡ªç”±å’Œå¼€æºçš„æ“ä½œç³»ç»Ÿã€‚å¯¹ç”¨æˆ·è€Œè¨€ï¼ŒFedoraæ˜¯ä¸€å¥—åŠŸèƒ½å®Œå¤‡çš„ã€å¯ä»¥æ›´æ–°çš„å…è´¹æ“ä½œç³»ç»Ÿï¼Œè€Œå¯¹èµåŠ©å•† RedHat è€Œè¨€ï¼Œå®ƒæ˜¯è®¸å¤šæ–°æŠ€æœ¯çš„æµ‹è¯•å¹³å°ï¼Œè¢«è®¤ä¸ºå¯ç”¨çš„æŠ€æœ¯æœ€ç»ˆä¼šåŠ å…¥åˆ° RedHat Enterprise Linux ä¸­ã€‚ ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:4:6","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#fedora"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ è¶£è°ˆå½¢å½¢è‰²è‰²çš„ Linux å‘è¡Œç‰ˆçš„ä»£å· Dockerè¿è¡Œæ“ä½œç³»ç»Ÿç¯å¢ƒ(BusyBox\u0026Alpine\u0026Debian/Ubuntu\u0026CentOS/Fedora) ","date":"2018-05-10","objectID":"/docker-slim-stretch-buster-jessie/:5:0","series":null,"tags":["docker","æ“ä½œç³»ç»Ÿ"],"title":"slimã€stretchã€busterã€jessieã€alpineã€debianã€ubuntuã€centOSã€fedoraã€buildpack-deps","uri":"/docker-slim-stretch-buster-jessie/#å‚è€ƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":"xiaobinqt,endpoint å’Œ cmd çš„åŒºåˆ«,docker å¯åŠ¨ï¼Œdocker å†™æ—¶å¤åˆ¶,docker å¸¸è§å‘½ä»¤,è™šæ‹ŸåŒ–,docker æ–‡ä»¶æŒ‚è½½,æ•°æ®å·æ˜¯ä»€ä¹ˆ,å®¹å™¨ç½‘ç»œ,å¦‚ä½•å†™ dockerfile","date":"2018-03-18","objectID":"/docker-glance/","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è™šæ‹ŸåŒ–","date":"2018-03-18","objectID":"/docker-glance/:1:0","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#è™šæ‹ŸåŒ–"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç¡¬ä»¶è™šæ‹ŸåŒ–ç¡¬ä»¶è™šæ‹ŸåŒ–ï¼ŒæŒ‡ç‰©ç†ç¡¬ä»¶æœ¬èº«å°±æä¾›è™šæ‹ŸåŒ–çš„æ”¯æŒã€‚ æ¯”å¦‚ï¼ŒA å¹³å°çš„ CPUï¼Œèƒ½å¤Ÿå°† B å¹³å°çš„æŒ‡ä»¤é›†è½¬æ¢ä¸ºè‡ªèº«çš„æŒ‡ä»¤é›†æ‰§è¡Œï¼Œå¹¶ç»™ç¨‹åºå®Œå…¨è¿è¡Œåœ¨ B å¹³å°ä¸Šçš„æ„Ÿè§‰ã€‚åˆæˆ–è€…ï¼ŒCPU èƒ½å¤Ÿè‡ªèº«æ¨¡æ‹Ÿè£‚å˜ï¼Œè®©ç¨‹åºæˆ–è€…æ“ä½œç³»ç»Ÿè®¤ä¸ºå­˜åœ¨å¤šä¸ª CPUï¼Œè¿›è€Œèƒ½å¤ŸåŒæ—¶è¿è¡Œå¤šä¸ªç¨‹åºæˆ–è€…æ“ä½œç³»ç»Ÿã€‚è¿™äº›éƒ½æ˜¯ç¡¬ä»¶è™šæ‹ŸåŒ–çš„ä½“ç°ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:1:1","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#ç¡¬ä»¶è™šæ‹ŸåŒ–"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è½¯ä»¶è™šæ‹ŸåŒ–è½¯ä»¶è™šæ‹ŸåŒ–æŒ‡çš„æ˜¯é€šè¿‡è½¯ä»¶çš„æ–¹å¼æ¥å®ç°è™šæ‹ŸåŒ–ä¸­å…³é”®çš„æŒ‡ä»¤è½¬æ¢éƒ¨åˆ†ã€‚ æ¯”å¦‚ï¼Œåœ¨è½¯ä»¶è™šæ‹ŸåŒ–å®ç°ä¸­ï¼Œé€šè¿‡ä¸€å±‚å¤¹æ‚åœ¨åº”ç”¨ç¨‹åºå’Œç¡¬ä»¶å¹³å°ä¸Šçš„è™šæ‹ŸåŒ–å®ç°è½¯ä»¶æ¥è¿›è¡ŒæŒ‡ä»¤çš„è½¬æ¢ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè™½ç„¶åº”ç”¨ç¨‹åºå‘æ“ä½œç³»ç»Ÿæˆ–è€…ç‰©ç†ç¡¬ä»¶å‘å‡ºçš„æŒ‡ä»¤ä¸æ˜¯å½“å‰ç¡¬ä»¶å¹³å°æ‰€æ”¯æŒçš„æŒ‡ä»¤ï¼Œè¿™ä¸ªå®ç°è™šæ‹ŸåŒ–çš„è½¯ä»¶ä¹Ÿä¼šå°†ä¹‹è½¬æ¢ä¸ºå½“å‰ç¡¬ä»¶å¹³å°æ‰€èƒ½è¯†åˆ«çš„ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:1:2","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#è½¯ä»¶è™šæ‹ŸåŒ–"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æµ…æ Dockerå¯ä»¥æŠŠå®¹å™¨çœ‹ä½œä¸€ä¸ªç®€æ˜“ç‰ˆçš„ Linux ç³»ç»Ÿç¯å¢ƒï¼ˆåŒ…æ‹¬ root ç”¨æˆ·æƒé™ã€è¿›ç¨‹ç©ºé—´ã€ç”¨æˆ·ç©ºé—´å’Œç½‘ç»œç©ºé—´ç­‰ï¼‰ä»¥åŠè¿è¡Œåœ¨å…¶ä¸­çš„åº”ç”¨ç¨‹åºæ‰“åŒ…è€Œæˆçš„æ²™ç›’sandboxã€‚ æ¯ä¸ªå®¹å™¨å†…è¿è¡Œç€ä¸€ä¸ªåº”ç”¨ï¼Œä¸åŒçš„å®¹å™¨ç›¸äº’éš”ç¦»ï¼Œå®¹å™¨ä¹‹é—´ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œäº’ç›¸é€šä¿¡ã€‚å®¹å™¨çš„åˆ›å»ºå’Œåœæ­¢ååˆ†å¿«é€Ÿï¼Œå‡ ä¹è·Ÿåˆ›å»ºå’Œç»ˆæ­¢åŸç”Ÿåº”ç”¨ä¸€è‡´ï¼›å¦å¤–ï¼Œå®¹å™¨è‡ªèº«å¯¹ç³»ç»Ÿèµ„æºçš„é¢å¤–éœ€æ±‚ä¹Ÿååˆ†æœ‰é™ï¼Œè¿œè¿œä½äºä¼ ç»Ÿè™šæ‹Ÿæœºã€‚å¾ˆå¤šæ—¶å€™ï¼Œç”šè‡³ç›´æ¥æŠŠå®¹å™¨å½“ä½œåº”ç”¨æœ¬èº«ä¹Ÿæ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ Docker å¹¶æ²¡æœ‰å’Œè™šæ‹Ÿæœºä¸€æ ·åˆ©ç”¨ä¸€ä¸ªç‹¬ç«‹çš„ OS æ‰§è¡Œç¯å¢ƒçš„éš”ç¦»ï¼Œå®ƒåˆ©ç”¨çš„æ˜¯ç›®å‰ Linux å†…æ ¸æœ¬èº«æ”¯æŒçš„å®¹å™¨æ–¹å¼ï¼Œå®ç°äº†èµ„æºå’Œç¯å¢ƒçš„éš”ç¦»ã€‚ æ”¯æ’‘ docker çš„æ ¸å¿ƒæŠ€æœ¯æœ‰ï¼šNamespaceï¼ŒCgroupï¼Œchrootï¼ŒUnionFSã€‚ Namespace æ˜¯ 2002 å¹´ä» Linux 2.4.19 å¼€å§‹å‡ºç°çš„ï¼Œæä¾›äº†è™šæ‹Ÿå±‚é¢çš„éš”ç¦»ï¼Œæ¯”å¦‚æ–‡ä»¶éš”ç¦»ï¼Œç½‘ç»œéš”ç¦»ç­‰ç­‰ã€‚æ¯ä¸ªå‘½åç©ºé—´ä¸­çš„åº”ç”¨çœ‹åˆ°çš„ï¼Œéƒ½æ˜¯ä¸åŒçš„ IP åœ°å€ï¼Œç”¨æˆ·ç©ºé—´ï¼Œè¿›ç¨‹ ID ç­‰ã€‚ Cgroupæ˜¯ 2008 å¹´ä» Linux 2.6.24 å¼€å§‹å‡ºç°çš„ï¼Œå®ƒçš„å…¨ç§°æ˜¯ Linux Control Groupã€‚æä¾›äº†ç‰©ç†èµ„æºçš„éš”ç¦»ï¼Œæ¯”å¦‚ CPUï¼Œå†…å­˜ï¼Œç£ç›˜ç­‰ç­‰ã€‚ chrootåœ¨ 1979 å¹´çš„ UNIX V7 å°±å·²ç»å‡ºç°äº†ï¼Œå®ƒå¯ä»¥æ›´æ”¹è¿›ç¨‹çš„æ ¹ç›®å½•ï¼Œä¹Ÿå°±æ˜¯é™åˆ¶è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€‚ç›®å‰çš„å®¹å™¨åŸºæœ¬ä¸å†ä½¿ç”¨è¿‡äºå¤è€çš„chrootäº†ï¼Œè€Œæ˜¯æ”¹ç”¨pivot_rootã€‚ UnionFS ç»™ docker é•œåƒæä¾›äº†æŠ€æœ¯æ”¯æ’‘ã€‚åœ¨ Docker ä¸­ï¼Œæä¾›äº†ä¸€ç§å¯¹ UnionFS çš„æ”¹è¿›å®ç°ï¼Œä¹Ÿå°±æ˜¯ AUFSAdvanced Union File Systemã€‚ AUFS å°†æ–‡ä»¶çš„æ›´æ–°æŒ‚è½½åˆ°è€çš„æ–‡ä»¶ä¹‹ä¸Šï¼Œè€Œä¸å»ä¿®æ”¹é‚£äº›ä¸æ›´æ–°çš„å†…å®¹ï¼Œè¿™æ„å‘³ç€å³ä½¿è™šæ‹Ÿçš„æ–‡ä»¶ç³»ç»Ÿè¢«åå¤ä¿®æ”¹ï¼Œä¹Ÿèƒ½ä¿è¯å¯¹çœŸå®æ–‡ä»¶ç³»ç»Ÿçš„ç©ºé—´å ç”¨ä¿æŒä¸€ä¸ªè¾ƒä½æ°´å¹³ã€‚å°±åƒåœ¨ Git ä¸­æ¯è¿›è¡Œä¸€æ¬¡æäº¤ï¼ŒGit å¹¶ä¸æ˜¯å°†æˆ‘ä»¬æ‰€æœ‰çš„å†…å®¹æ‰“åŒ…æˆä¸€ä¸ªç‰ˆæœ¬ï¼Œè€Œåªæ˜¯å°†ä¿®æ”¹çš„éƒ¨åˆ†è¿›è¡Œè®°å½•ï¼Œè¿™æ ·å³ä½¿æˆ‘ä»¬æäº¤å¾ˆå¤šæ¬¡åï¼Œä»£ç åº“çš„ç©ºé—´å ç”¨ä¹Ÿä¸ä¼šå€æ•°å¢åŠ ã€‚ é€šè¿‡ AUFSï¼ŒDocker å¤§å¹…å‡å°‘äº†è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿå¯¹ç‰©ç†å­˜å‚¨ç©ºé—´çš„å ç”¨ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:1:3","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#æµ…æ-docker"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" è™šæ‹Ÿæœºå’Œ Dockerè™šæ‹ŸæœºVirtual Machineï¼Œé€šå¸¸æ¥è¯´å°±æ˜¯é€šè¿‡ä¸€ä¸ªè™šæ‹Ÿæœºç›‘è§†å™¨Virtual Machine Monitor çš„è®¾æ–½æ¥éš”ç¦»æ“ä½œç³»ç»Ÿä¸ç¡¬ä»¶æˆ–è€…åº”ç”¨ç¨‹åºå’Œæ“ä½œç³»ç»Ÿï¼Œä»¥æ­¤è¾¾åˆ°è™šæ‹ŸåŒ–çš„ç›®çš„ã€‚è¿™ä¸ªå¤¹åœ¨å…¶ä¸­çš„è™šæ‹Ÿæœºç›‘è§†å™¨ï¼Œå¸¸å¸¸è¢«ç§°ä¸º Hypervisorã€‚ğŸ‘‡æ˜¯è™šæ‹Ÿæœºå’Œ Docker çš„å¯¹æ¯”ï¼š è™šæ‹Ÿæœºå’Œå®¹å™¨ ä¼ ç»Ÿæ–¹å¼æ˜¯åœ¨ç¡¬ä»¶å±‚é¢å®ç°è™šæ‹ŸåŒ–ï¼Œéœ€è¦æœ‰é¢å¤–çš„è™šæ‹Ÿæœºç®¡ç†åº”ç”¨å’Œè™šæ‹Ÿæœºæ“ä½œç³»ç»Ÿå±‚ã€‚Dockerå®¹å™¨æ˜¯åœ¨æ“ä½œç³»ç»Ÿå±‚é¢ä¸Šå®ç°è™šæ‹ŸåŒ–ï¼Œç›´æ¥ å¤ç”¨æœ¬åœ°ä¸»æœºçš„æ“ä½œç³»ç»Ÿï¼Œå› æ­¤æ›´åŠ è½»é‡çº§ã€‚ è™šæ‹Ÿæœºæ›´æ“…é•¿å½»åº•éš”ç¦»æ•´ä¸ªè¿è¡Œç¯å¢ƒã€‚ä¾‹å¦‚ï¼Œäº‘æœåŠ¡æä¾›å•†é€šå¸¸é‡‡ç”¨è™šæ‹ŸæœºæŠ€æœ¯éš”ç¦»ä¸åŒçš„ç”¨æˆ·ã€‚è€Œ Docker é€šå¸¸ç”¨äºéš”ç¦»ä¸åŒçš„åº”ç”¨ï¼Œä¾‹å¦‚å‰ç«¯ï¼Œåç«¯ä»¥åŠæ•°æ®åº“ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:1:4","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#è™šæ‹Ÿæœºå’Œ-docker"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨å‘½ä»¤ å®˜æ–¹æ¶æ„å›¾ CMD è¯´æ˜ sudo docker create --name å®¹å™¨åç§° é•œåƒåç§° åˆ›å»ºå®¹å™¨ docker start åç§° å¯åŠ¨å®¹å™¨ sudo docker run --name å®¹å™¨åç§° -d é•œåƒåç§° åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ä¸”åœ¨åå°è¿è¡Œ,-d=--detach docker ps åˆ—å‡ºè¿è¡Œä¸­å®¹å™¨ docker ps -a åˆ—å‡ºæ‰€æœ‰å®¹å™¨, -a=--all docker stop å®¹å™¨åç§°/ID åœæ­¢å®¹å™¨ docker rm å®¹å™¨åç§°/ID åˆ é™¤å®¹å™¨ docker exec -it å®¹å™¨åç§° bash/sh è¿›å…¥å®¹å™¨ docker attach --sig-proxy=false å®¹å™¨åç§° å°†å®¹å™¨è½¬ä¸ºäº†å‰å°è¿è¡Œï¼Œå¦‚æœä¸åŠ --sig-proxy=false Ctrl + C åä¼šåœæ­¢å®¹å™¨ docker logs å®¹å™¨åç§° æŸ¥çœ‹å®¹å™¨æ—¥å¿— docker network ls/list æŸ¥çœ‹å·²ç»å­˜åœ¨çš„ç½‘ç»œ docker network create -d ç½‘ç»œé©±åŠ¨ ç½‘ç»œå åˆ›å»ºæ–°ç½‘ç»œ docker volume ls åˆ—å‡ºå½“å‰å·²åˆ›å»ºçš„æ•°æ®å· docker volume create åç§° åˆ›å»ºæ•°æ®å· docker volume rm åç§° åˆ é™¤æ•°æ®å· docker volume prune åˆ é™¤æ²¡æœ‰è¢«å®¹å™¨å¼•ç”¨çš„æ•°æ®å· docker build æ„å»ºé•œåƒ docker inspect å®¹å™¨å/ID æŸ¥çœ‹å®¹å™¨è¯¦æƒ… docker run --privileged å®¹å™¨è·å–å®¿ä¸»æœºrootæƒé™ docker exec å‘½ä»¤èƒ½å¸®åŠ©æˆ‘ä»¬åœ¨æ­£åœ¨è¿è¡Œçš„å®¹å™¨ä¸­è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚ docker exec [-i] å®¹å™¨å å‘½ä»¤ docker exec --rm é€‰é¡¹å‚æ•°ï¼Œå¯ä»¥è®©å®¹å™¨åœ¨åœæ­¢åè‡ªåŠ¨åˆ é™¤ï¼Œä¸éœ€è¦å†ä½¿ç”¨å®¹å™¨åˆ é™¤å‘½ä»¤æ¥åˆ é™¤ï¼Œå¯¹ä¸´æ—¶å®¹å™¨å‹å¥½ğŸ‘‡ã€‚ docker run --rm --name mysql2 -e MYSQL_RANDOM_ROOT_PASSWORD=yes mysql:5.7 docker build -t webapp:latest -f ./webapp/a.Dockerfile ./webapp â˜ï¸-t é€‰é¡¹ï¼ŒæŒ‡å®šæ–°ç”Ÿæˆé•œåƒçš„åç§°ã€‚-f æŒ‡å®š Dockerfile æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œå¦‚æœä¸å†™çš„è¯ä¼šä» ./webapp ç›®å½•ä¸­å»æ‰¾ï¼Œ./webapp å¯ä»¥ç›´æ¥å†™æˆ. ç†è§£æˆå½“å‰ç›®å½•ï¼Œä¹Ÿæ˜¯é•œåƒæ„å»ºçš„ä¸Šä¸‹æ–‡ï¼Œæ¯”å¦‚ COPYæŒ‡ä»¤æ‰§è¡Œæ—¶å°±æ˜¯ä»è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­å»æ‰¾çš„ã€‚ å¦‚æœéœ€è¦ç¦æ­¢ç¼“å­˜å¯ä»¥åŠ ä¸Š--no-cacheå‚æ•°ã€‚ docker build --no-cache ..... ","date":"2018-03-18","objectID":"/docker-glance/:2:0","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#å¸¸ç”¨å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" images å­å‘½ä»¤æ›´å¤šå­å‘½ä»¤é€‰é¡¹è¿˜å¯ä»¥é€šè¿‡man docker-images æ¥æŸ¥çœ‹ï¼Œæˆ–è€…æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ docker images ã€‚ é€‰é¡¹ è¯´æ˜ -a, â€â€all=true | false åˆ—å‡ºæ‰€æœ‰ï¼ˆåŒ…æ‹¬ä¸´æ—¶æ–‡ä»¶ï¼‰é•œåƒæ–‡ä»¶ï¼Œé»˜è®¤ä¸ºå¦ â€â€digests=true | false åˆ—å‡ºé•œåƒçš„æ•°å­—æ‘˜è¦å€¼ï¼Œé»˜è®¤ä¸ºå¦ -f, --filter=[] è¿‡æ»¤åˆ—å‡ºçš„é•œåƒï¼Œå¦‚dangling=trueåªæ˜¾ç¤ºæ²¡æœ‰è¢«ä½¿ç”¨çš„é•œåƒï¼›ä¹Ÿå¯æŒ‡å®šå¸¦æœ‰ç‰¹å®šæ ‡æ³¨çš„é•œåƒç­‰ --format=\"TEMPLATE\" æ§åˆ¶è¾“å‡ºæ ¼å¼ï¼Œå¦‚.IDä»£è¡¨IDä¿¡æ¯ï¼Œ.Repositoryä»£è¡¨ä»“åº“ä¿¡æ¯ç­‰ â€â€no-trunc=true | false å¯¹è¾“å‡ºç»“æœä¸­å¤ªé•¿çš„éƒ¨åˆ†æ˜¯å¦è¿›è¡Œæˆªæ–­ï¼Œå¦‚é•œåƒçš„IDä¿¡æ¯ï¼Œé»˜è®¤ä¸ºæ˜¯ -q, â€â€quiet=true | false ä»…è¾“å‡ºIDä¿¡æ¯ï¼Œé»˜è®¤ä¸ºå¦ --format --filter ","date":"2018-03-18","objectID":"/docker-glance/:2:1","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#images-å­å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" create å­å‘½ä»¤create å‘½ä»¤æ”¯æŒçš„é€‰é¡¹éƒ½ååˆ†å¤æ‚ï¼Œé€‰é¡¹ä¸»è¦åŒ…æ‹¬å¦‚ä¸‹å‡ å¤§ç±»ï¼šä¸å®¹å™¨è¿è¡Œæ¨¡å¼ç›¸å…³ã€ä¸å®¹å™¨ç¯å¢ƒé…ç½®ç›¸å…³ã€ä¸å®¹å™¨èµ„æºé™åˆ¶å’Œå®‰å…¨ä¿æŠ¤ç›¸å…³ã€‚ âš ï¸å®¹å™¨è¿è¡Œæ¨¡å¼ç›¸å…³çš„é€‰é¡¹ å®¹å™¨è¿è¡Œæ¨¡å¼ç›¸å…³çš„é€‰é¡¹ âš ï¸å®¹å™¨ç¯å¢ƒå’Œé…ç½®ç›¸å…³çš„é€‰é¡¹ å®¹å™¨ç¯å¢ƒå’Œé…ç½®ç›¸å…³çš„é€‰é¡¹ âš ï¸å®¹å™¨èµ„æºé™åˆ¶å’Œå®‰å…¨ä¿æŠ¤ç›¸å…³çš„é€‰é¡¹ å®¹å™¨èµ„æºé™åˆ¶å’Œå®‰å…¨ä¿æŠ¤ç›¸å…³çš„é€‰é¡¹ ","date":"2018-03-18","objectID":"/docker-glance/:2:2","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#create-å­å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" build å­å‘½ä»¤ build å­å‘½ä»¤ ","date":"2018-03-18","objectID":"/docker-glance/:2:3","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#build-å­å‘½ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®¹å™¨ç½‘ç»œåœ¨ Docker ç½‘ç»œä¸­ï¼Œæœ‰ä¸‰ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„æ¦‚å¿µï¼Œå°±æ˜¯ï¼šæ²™ç›’Sandbox ã€ç½‘ç»œNetworkã€ç«¯ç‚¹Endpointã€‚ æ²™ç›’æä¾›äº†å®¹å™¨çš„è™šæ‹Ÿç½‘ç»œæ ˆï¼Œä¹Ÿå°±æ˜¯ç«¯å£å¥—æ¥å­—ã€IP è·¯ç”±è¡¨ã€é˜²ç«å¢™ç­‰å†…å®¹ã€‚å®ç°éš”ç¦»å®¹å™¨ç½‘ç»œä¸å®¿ä¸»æœºç½‘ç»œï¼Œå½¢æˆäº†å®Œå…¨ç‹¬ç«‹çš„å®¹å™¨ç½‘ç»œç¯å¢ƒã€‚ ç½‘ç»œå¯ä»¥ç†è§£ä¸º Docker å†…éƒ¨çš„è™šæ‹Ÿå­ç½‘ï¼Œç½‘ç»œå†…çš„å‚ä¸è€…ç›¸äº’å¯è§å¹¶èƒ½å¤Ÿè¿›è¡Œé€šè®¯ã€‚Docker çš„è¿™ç§è™šæ‹Ÿç½‘ç»œä¹Ÿæ˜¯äºå®¿ä¸»æœºç½‘ç»œå­˜åœ¨éš”ç¦»å…³ç³»çš„ï¼Œå…¶ç›®çš„ä¸»è¦æ˜¯å½¢æˆå®¹å™¨é—´çš„å®‰å…¨é€šè®¯ç¯å¢ƒã€‚ ç«¯ç‚¹æ˜¯ä½äºå®¹å™¨æˆ–ç½‘ç»œéš”ç¦»å¢™ä¹‹ä¸Šçš„æ´ï¼Œå…¶ä¸»è¦ç›®çš„æ˜¯å½¢æˆä¸€ä¸ªå¯ä»¥æ§åˆ¶çš„çªç ´å°é—­çš„ç½‘ç»œç¯å¢ƒçš„å‡ºå…¥å£ã€‚å½“å®¹å™¨çš„ç«¯ç‚¹ä¸ç½‘ç»œçš„ç«¯ç‚¹å½¢æˆé…å¯¹åï¼Œå°±å¦‚åŒåœ¨è¿™ä¸¤è€…ä¹‹é—´æ­å»ºäº†æ¡¥æ¢ï¼Œä¾¿èƒ½å¤Ÿè¿›è¡Œæ•°æ®ä¼ è¾“äº†ã€‚ è¿™ä¸‰è€…å½¢æˆäº† Docker ç½‘ç»œçš„æ ¸å¿ƒæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯å®¹å™¨ç½‘ç»œæ¨¡å‹Container Network Modelã€‚ å®¹å™¨ç½‘ç»œ Docker å®˜æ–¹æä¾›äº†äº”ç§ Docker ç½‘ç»œé©±åŠ¨ï¼šBridge Driverã€Host Driverã€Overlay Driverã€MacLan Driverã€None Driverã€‚ ç½‘ç»œé©±åŠ¨ Bridge ç½‘ç»œæ˜¯ Docker å®¹å™¨çš„é»˜è®¤ç½‘ç»œé©±åŠ¨ï¼Œé€šè¿‡ç½‘æ¡¥æ¥å®ç°ç½‘ç»œé€šè®¯ã€‚ä¸ºå®¹å™¨åˆ›å»ºç‹¬ç«‹çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œåˆ†é…ç½‘å¡ã€IP åœ°å€ç­‰ç½‘ç»œé…ç½®ï¼Œå¹¶é€šè¿‡ veth æ¥å£å¯¹å°†å®¹å™¨æŒ‚è½½åˆ°ä¸€ä¸ªè™šæ‹Ÿç½‘æ¡¥ï¼ˆé»˜è®¤ä¸ºdocker0ï¼‰ä¸Šã€‚bridge æ¨¡å¼å¤šäº†è™šæ‹Ÿç½‘æ¡¥å’Œç½‘å¡ï¼Œé€šä¿¡æ•ˆç‡ä¼šä½ä¸€äº›ï¼Œä½†æ˜¯å¯ä»¥çµæ´»é…ç½®åº”ç”¨ç«¯å£ã€‚ noneä¸ºå®¹å™¨åˆ›å»ºç‹¬ç«‹çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œä½†ä¸è¿›è¡Œç½‘ç»œé…ç½®ï¼Œå³å®¹å™¨å†…æ²¡æœ‰åˆ›å»ºç½‘å¡ã€IPåœ°å€ç­‰ã€‚å…è®¸å…¶ä»–çš„ç½‘ç»œæ’ä»¶æ¥è‡ªå®šä¹‰ç½‘ç»œè¿æ¥ã€‚ hostä¸ä¸ºå®¹å™¨åˆ›å»ºç‹¬ç«‹çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œå®¹å™¨å†…çœ‹åˆ°çš„ç½‘ç»œé…ç½®ï¼ˆç½‘å¡ä¿¡æ¯ã€è·¯ç”±è¡¨ã€Iptables è§„åˆ™ç­‰ï¼‰å‡ä¸ä¸»æœºä¸Šçš„ä¿æŒä¸€è‡´ã€‚æ³¨æ„å…¶ä»–èµ„æºè¿˜æ˜¯ä¸ä¸»æœºéš”ç¦»çš„ã€‚è¿™ç§æ¨¡å¼æ²¡æœ‰ä¸­é—´å±‚ï¼Œç›¸å½“äºå»æ‰äº†å®¹å™¨çš„ç½‘ç»œéš”ç¦»ï¼Œè‡ªç„¶é€šä¿¡æ•ˆç‡é«˜ï¼Œä½†ç¼ºå°‘äº†éš”ç¦»ï¼Œè¿è¡Œå¤ªå¤šçš„å®¹å™¨ä¹Ÿå®¹æ˜“ å¯¼è‡´ç«¯å£å†²çªï¼Œæ¯”å¦‚å®¿ä¸»æœºå’Œå®¹å™¨ä¸èƒ½è¿è¡Œç«¯å£ç›¸åŒçš„åº”ç”¨ã€‚ Overlay é©±åŠ¨é»˜è®¤é‡‡ç”¨ VXLAN åè®®ï¼Œåœ¨ IP åœ°å€å¯ä»¥äº’ç›¸è®¿é—®çš„å¤šä¸ªä¸»æœºä¹‹é—´æ­å»ºéš§é“ï¼Œè®©å®¹å™¨å¯ä»¥äº’ç›¸è®¿é—®ï¼Œå¹¶ä¸”è®©è¿™äº›å®¹å™¨æ„Ÿè§‰è¿™ä¸ªç½‘ç»œä¸å…¶ä»–ç±»å‹çš„ç½‘ç»œæ²¡æœ‰åŒºåˆ«ã€‚ Overlay network ","date":"2018-03-18","objectID":"/docker-glance/:3:0","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#å®¹å™¨ç½‘ç»œ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" åˆ›å»ºç½‘ç»œåœ¨ Docker ä¸­ï¼Œèƒ½å¤Ÿåˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œï¼Œå½¢æˆè‡ªå·±å®šä¹‰è™šæ‹Ÿå­ç½‘çš„ç›®çš„ã€‚åˆ›å»ºç½‘ç»œçš„å‘½ä»¤æ˜¯ docker network createã€‚ docker network create -d bridge individual é€šè¿‡ -d é€‰é¡¹æˆ‘ä»¬å¯ä»¥ä¸ºæ–°çš„ç½‘ç»œæŒ‡å®šé©±åŠ¨çš„ç±»å‹ï¼Œå…¶å€¼å¯ä»¥é»˜è®¤çš„ bridgeã€hostã€overlayã€maclanã€none ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ç½‘ç»œé©±åŠ¨æ’ä»¶æ‰€å®šä¹‰çš„ç±»å‹ã€‚ å½“ä¸æŒ‡å®šç½‘ç»œé©±åŠ¨æ—¶ï¼ŒDocker ä¹Ÿä¼šé»˜è®¤é‡‡ç”¨ Bridge Driver ä½œä¸ºç½‘ç»œé©±åŠ¨ã€‚ é€šè¿‡ docker network ls æˆ–æ˜¯ docker network list å¯ä»¥æŸ¥çœ‹ Docker ä¸­å·²ç»å­˜åœ¨çš„ç½‘ç»œã€‚ åœ¨åˆ›å»ºå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡ --network æ¥æŒ‡å®šå®¹å™¨æ‰€åŠ å…¥çš„ç½‘ç»œï¼Œä¸€æ—¦è¿™ä¸ªå‚æ•°è¢«æŒ‡å®šï¼Œå®¹å™¨ä¾¿ä¸ä¼šé»˜è®¤åŠ å…¥åˆ° bridge è¿™ä¸ªç½‘ç»œä¸­ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥é€šè¿‡ --network bridge è®©å…¶åŠ å…¥ã€‚ docker run -d --name mysql -e MYSQL_RANDOM_ROOT_PASSWORD=yes --network individual mysql:5.7 å¯ä»¥é€šè¿‡ docker inspect å®¹å™¨å/ID è§‚å¯Ÿæ­¤æ—¶çš„å®¹å™¨ç½‘ç»œã€‚ Docker ä¸­å¦‚æœä¸¤ä¸ªå®¹å™¨å¤„äºä¸åŒçš„ç½‘ç»œï¼Œä¹‹é—´æ˜¯ä¸èƒ½ç›¸äº’è¿æ¥å¼•ç”¨çš„ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:3:1","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#åˆ›å»ºç½‘ç»œ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å®¹å™¨äº’è”è¦è®©ä¸€ä¸ªå®¹å™¨è¿æ¥åˆ°å¦å¤–ä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥åœ¨å®¹å™¨é€šè¿‡ docker create æˆ– docker run åˆ›å»ºæ—¶é€šè¿‡ --link é€‰é¡¹è¿›è¡Œé…ç½®ã€‚ ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ª MySQL å®¹å™¨ï¼Œå°†è¿è¡Œ Web åº”ç”¨çš„å®¹å™¨è¿æ¥åˆ°è¿™ä¸ª MySQL å®¹å™¨ä¸Šï¼Œæ‰“é€šä¸¤ä¸ªå®¹å™¨é—´çš„ç½‘ç»œï¼Œå®ç°å®ƒä»¬ä¹‹é—´çš„ç½‘ç»œäº’é€šã€‚ docker run -d --name mysql -e MYSQL_RANDOM_ROOT_PASSWORD=yes mysql docker run -d --name webapp --link mysql webapp:latest å®¹å™¨é—´çš„ç½‘ç»œå·²ç»æ‰“é€šï¼Œå¦‚ä½•åœ¨ Web åº”ç”¨ä¸­è¿æ¥åˆ° MySQL æ•°æ®åº“â“ Docker ä¸ºå®¹å™¨é—´è¿æ¥æä¾›äº†ä¸€ç§éå¸¸å‹å¥½çš„æ–¹å¼ï¼Œåªéœ€è¦å°†å®¹å™¨çš„ç½‘ç»œå‘½åï¼ˆå®¹å™¨åï¼‰å¡«å…¥åˆ°è¿æ¥åœ°å€ä¸­ï¼Œå°±å¯ä»¥è®¿é—®éœ€è¦è¿æ¥çš„å®¹å™¨äº†ã€‚ mysql:3306 åœ¨è¿™é‡Œï¼Œè¿æ¥åœ°å€ä¸­çš„ mysqlï¼ˆå®¹å™¨åï¼‰ å¥½æ¯”å¸¸è§çš„åŸŸåè§£æï¼ŒDocker ä¼šå°†å…¶æŒ‡å‘ MySQL å®¹å™¨çš„ IP åœ°å€ã€‚ Docker åœ¨å®¹å™¨äº’é€šä¸­å¸¦æ¥çš„ä¸€é¡¹ä¾¿åˆ©å°±æ˜¯ï¼Œä¸å†éœ€è¦çœŸå®çš„çŸ¥é“å¦å¤–ä¸€ä¸ªå®¹å™¨çš„ IP åœ°å€å°±èƒ½è¿›è¡Œè¿æ¥ã€‚åœ¨ä»¥å¾€çš„å¼€å‘ä¸­ï¼Œæ¯åˆ‡æ¢ä¸€ä¸ªç¯å¢ƒï¼ˆä¾‹å¦‚å°†ç¨‹åºä»å¼€å‘ç¯å¢ƒæäº¤åˆ°æµ‹è¯•ç¯å¢ƒï¼‰ï¼Œéƒ½éœ€è¦é‡æ–°é…ç½®ç¨‹åºä¸­çš„å„é¡¹è¿æ¥åœ°å€ç­‰å‚æ•°ï¼Œè€Œåœ¨ Docker é‡Œï¼Œå¹¶ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªï¼Œåªéœ€è¦ç¨‹åºä¸­é…ç½®è¢«è¿æ¥å®¹å™¨çš„åç§°ï¼Œæ˜ å°„ IP çš„å·¥ä½œå°±å¯ä»¥äº¤ç»™ Dockerã€‚ åœ¨ Docker é‡Œè¿˜æ”¯æŒè¿æ¥æ—¶ä½¿ç”¨åˆ«åæ¥æ‘†è„±å®¹å™¨åçš„é™åˆ¶ã€‚ sudo docker run -d --name webapp --link mysql:database webapp:latest åœ¨è¿™é‡Œï¼Œä½¿ç”¨ --link \u003cname\u003e:\u003calias\u003e çš„å½¢å¼ï¼Œè¿æ¥åˆ° MySQL å®¹å™¨ï¼Œå¹¶è®¾ç½®å®ƒçš„åˆ«åä¸º databaseã€‚å½“æˆ‘ä»¬è¦åœ¨ Web åº”ç”¨ä¸­ä½¿ç”¨ MySQL è¿æ¥æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ database æ¥ä»£æ›¿è¿æ¥åœ°å€äº†ã€‚ database:3306 ","date":"2018-03-18","objectID":"/docker-glance/:3:2","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#å®¹å™¨äº’è”"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ç«¯å£æ˜ å°„å®¹å™¨ç›´æ¥é€šè¿‡ Docker ç½‘ç»œè¿›è¡Œçš„äº’ç›¸è®¿é—®ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®¹å™¨å¤–é€šè¿‡ç½‘ç»œè®¿é—®å®¹å™¨ä¸­çš„åº”ç”¨ã€‚æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æä¾›äº† Web æœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æä¾›ä¸€ç§æ–¹å¼è®¿é—®è¿è¡Œåœ¨å®¹å™¨ä¸­çš„ Web åº”ç”¨ã€‚ ç«¯å£æ˜ å°„ é€šè¿‡ Docker ç«¯å£æ˜ å°„åŠŸèƒ½ï¼Œå¯ä»¥æŠŠå®¹å™¨çš„ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æ“ä½œç³»ç»Ÿçš„ç«¯å£ä¸Šï¼Œå½“æˆ‘ä»¬ä»å¤–éƒ¨è®¿é—®å®¿ä¸»æ“ä½œç³»ç»Ÿçš„ç«¯å£æ—¶ï¼Œæ•°æ®è¯·æ±‚å°±ä¼šè‡ªåŠ¨å‘é€ç»™ä¸ä¹‹å…³è”çš„å®¹å™¨ç«¯å£ã€‚ è¦æ˜ å°„ç«¯å£ï¼Œå¯ä»¥åœ¨åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨ -p æˆ–è€…æ˜¯ â€“publish é€‰é¡¹ã€‚ docker run -d --name nginx -p 80:80 -p 443:443 nginx:1.12 ä½¿ç”¨ç«¯å£æ˜ å°„é€‰é¡¹çš„æ ¼å¼æ˜¯ -p \u003cip\u003e:\u003chost-port\u003e:\u003ccontainer-port\u003eï¼Œå…¶ä¸­ ip æ˜¯å®¿ä¸»æ“ä½œç³»ç»Ÿçš„ç›‘å¬ ipï¼Œå¯ä»¥ç”¨æ¥æ§åˆ¶ç›‘å¬çš„ç½‘å¡ï¼Œé»˜è®¤ä¸º 0.0.0.0ï¼Œå³æ˜¯ç›‘å¬æ‰€æœ‰ç½‘å¡ã€‚host-port å’Œ container-port åˆ†åˆ«è¡¨ç¤ºæ˜ å°„åˆ°å®¿ä¸»æ“ä½œç³»ç»Ÿçš„ç«¯å£å’Œå®¹å™¨çš„ç«¯å£ï¼Œè¿™ä¸¤è€…æ˜¯å¯ä»¥ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚ï¼Œå¯ä»¥å°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æ“ä½œç³»ç»Ÿçš„ 8080 ç«¯å£ï¼Œä¼ å…¥ -p 8080:80 å³å¯ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:3:3","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#ç«¯å£æ˜ å°„"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æ–‡ä»¶æŒ‚è½½","date":"2018-03-18","objectID":"/docker-glance/:4:0","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#æ–‡ä»¶æŒ‚è½½"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Bind MountBind Mountèƒ½å¤Ÿç›´æ¥å°†å®¿ä¸»æ“ä½œç³»ç»Ÿä¸­çš„ç›®å½•å’Œæ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œé€šè¿‡æŒ‡å®šå®¹å™¨å¤–çš„è·¯å¾„å’Œå®¹å™¨å†…çš„è·¯å¾„ï¼Œå°±å¯ä»¥å½¢æˆæŒ‚è½½æ˜ å°„å…³ç³»ï¼Œåœ¨å®¹å™¨å†…å¤–å¯¹æ–‡ä»¶çš„è¯»å†™ï¼Œéƒ½æ˜¯ç›¸äº’å¯è§çš„ã€‚ docker run -d --name nginx -v /webapp/html:/usr/share/nginx/html nginx:1.12 ä½¿ç”¨ -v æˆ– --volume æ¥æŒ‚è½½å®¿ä¸»æ“ä½œç³»ç»Ÿç›®å½•çš„å½¢å¼æ˜¯ -v \u003chost-path\u003e:\u003ccontainer-path\u003e æˆ– --volume \u003chost-path\u003e:\u003ccontainer-path\u003eï¼Œå…¶ä¸­host-path å’Œ container-path åˆ†åˆ«ä»£è¡¨å®¿ä¸»æ“ä½œç³»ç»Ÿä¸­çš„ç›®å½•å’Œå®¹å™¨ä¸­çš„ç›®å½•ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒDocker è¿™é‡Œå¼ºåˆ¶å®šä¹‰ç›®å½•æ—¶ å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œä¸èƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„ã€‚ Docker è¿˜æ”¯æŒä»¥åªè¯»çš„æ–¹å¼æŒ‚è½½ï¼Œé€šè¿‡åªè¯»æ–¹å¼æŒ‚è½½çš„ç›®å½•å’Œæ–‡ä»¶ï¼Œåªèƒ½è¢«å®¹å™¨ä¸­çš„ç¨‹åºè¯»å–ï¼Œä½†ä¸æ¥å—å®¹å™¨ä¸­ç¨‹åºä¿®æ”¹å®ƒä»¬çš„è¯·æ±‚ã€‚åœ¨æŒ‚è½½é€‰é¡¹ -v åå†æ¥ä¸Š :ro å°±å¯ä»¥åªè¯»æŒ‚è½½äº†ã€‚ docker run -d --name nginx -v /webapp/html:/usr/share/nginx/html:ro nginx:1.12 ","date":"2018-03-18","objectID":"/docker-glance/:4:1","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#bind-mount"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Volumeæ•°æ®å·Volumeæ˜¯ä»å®¿ä¸»æ“ä½œç³»ç»Ÿä¸­æŒ‚è½½ç›®å½•åˆ°å®¹å™¨å†…ï¼Œåªä¸è¿‡è¿™ä¸ªæŒ‚è½½çš„ç›®å½•ç”± Docker è¿›è¡Œç®¡ç†ï¼Œåªéœ€è¦æŒ‡å®šå®¹å™¨å†…çš„ç›®å½• ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“æŒ‚è½½åˆ°äº†å®¿ä¸»æ“ä½œç³»ç»Ÿä¸­çš„å“ªé‡Œã€‚ å¯ä»¥ä½¿ç”¨ -v æˆ– --volume é€‰é¡¹æ¥å®šä¹‰æ•°æ®å·çš„æŒ‚è½½ã€‚ docker run -d --name webapp -v /webapp/storage webapp:latest æ•°æ®å·æŒ‚è½½åˆ°å®¹å™¨åï¼Œå¯ä»¥é€šè¿‡ docker inspect å®¹å™¨å/ID çœ‹åˆ°å®¹å™¨ä¸­æ•°æ®å·æŒ‚è½½çš„ä¿¡æ¯ğŸ‘‡ã€‚ [ { // ...... \"Mounts\": [ { \"Type\": \"volume\", \"Name\": \"2bbd2719b81fbe030e6f446243386d763ef25879ec82bb60c9be7ef7f3a25336\", \"Source\": \"/var/lib/docker/volumes/2bbd2719b81fbe030e6f446243386d763ef25879ec82bb60c9be7ef7f3a25336/_data\", \"Destination\": \"/webapp/storage\", \"Driver\": \"local\", \"Mode\": \"\", \"RW\": true, \"Propagation\": \"\" } ] // ...... } ] Source æ˜¯ Docker ä¸ºæˆ‘ä»¬åˆ†é…ç”¨äºæŒ‚è½½çš„å®¿ä¸»æœºç›®å½•ï¼Œå…¶ä½äº Docker çš„èµ„æºåŒºåŸŸï¼Œä¸€èˆ¬é»˜è®¤ä¸º /var/lib/docker ã€‚ä¸€èˆ¬å¹¶ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªç›®å½•ï¼Œä¸€åˆ‡å¯¹å®ƒçš„ç®¡ç†éƒ½å·²ç»åœ¨ Docker å†…å®ç°äº†ã€‚ ä¸ºäº†æ–¹ä¾¿è¯†åˆ«æ•°æ®å·ï¼Œå¯ä»¥åƒå‘½åå®¹å™¨ä¸€æ ·ä¸ºæ•°æ®å·å‘½åï¼Œè¿™é‡Œçš„ Name æ˜¯æ•°æ®å·çš„å‘½åï¼Œåœ¨æœªç»™å‡ºæ•°æ®å·å‘½åçš„æ—¶å€™ï¼ŒDocker ä¼šé‡‡ç”¨æ•°æ®å·çš„ ID å‘½åæ•°æ®å·ã€‚å¯ä»¥é€šè¿‡ -v \u003cname\u003e:\u003ccontainer-path\u003e è¿™ç§å½¢å¼æ¥å‘½åæ•°æ®å·ã€‚ docker run -d --name webapp -v appdata:/webapp/storage webapp:latest -v åœ¨å®šä¹‰Bind Mountæ—¶å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå½“ä¸æ˜¯ç»å¯¹è·¯å¾„æ˜¯å°±æ˜¯Volume çš„å®šä¹‰ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:4:2","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#volume"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Tmpfs MountTmpfs Mountæ”¯æŒæŒ‚è½½ç³»ç»Ÿå†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†åˆ°å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿé‡Œï¼Œä¸è¿‡ç”±äºå†…å­˜å’Œå®¹å™¨çš„ç‰¹å¾ï¼Œå®ƒçš„å­˜å‚¨å¹¶ä¸æ˜¯æŒä¹…çš„ï¼Œå…¶ä¸­çš„å†…å®¹ä¼šéšç€å®¹å™¨çš„åœæ­¢è€Œæ¶ˆå¤±ã€‚ æŒ‚è½½ä¸´æ—¶æ–‡ä»¶ç›®å½•è¦é€šè¿‡ --tmpfs è¿™ä¸ªé€‰é¡¹æ¥å®Œæˆã€‚ç”±äºå†…å­˜çš„å…·ä½“ä½ç½®ä¸éœ€è¦æŒ‡å®šï¼Œåœ¨è¿™ä¸ªé€‰é¡¹é‡Œåªéœ€è¦ä¼ é€’æŒ‚è½½åˆ°å®¹å™¨å†…çš„ç›®å½•å³å¯ã€‚ docker run -d --name webapp --tmpfs /webapp/cache webapp:latest ","date":"2018-03-18","objectID":"/docker-glance/:4:3","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#tmpfs-mount"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é•œåƒç‰ˆæœ¬ç®¡ç†å·¥ä½œä¸­ï¼Œå½“æŸä¸ªé•œåƒä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬èƒ½å¤Ÿå°†å®¹å™¨å†…çš„ä¿®æ”¹è®°å½•ä¸‹æ¥ï¼Œä¿å­˜ä¸ºä¸€ä¸ªæ–°çš„é•œåƒã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:5:0","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#é•œåƒç‰ˆæœ¬ç®¡ç†"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" æäº¤ä¿®æ”¹ç”Ÿæˆæ–°é•œåƒä»¥ä¸‹ä»¥å®˜æ–¹çš„ nginx:1.12 é•œåƒç¤ºä¾‹ï¼Œä¿®æ”¹åç”Ÿæˆä¸€ä¸ª nginx-v2 é•œåƒã€‚ å…ˆä¸‹è½½é•œåƒğŸ‘‡ # ä¸‹è½½é•œåƒ docker pull nginx:1.12 # è¿è¡Œå®¹å™¨ docker run --name mynginx -d nginx:1.12 ä¸‹è½½é•œåƒå¹¶å¯åŠ¨å®¹å™¨ é€šè¿‡ docker exec è¿›å…¥å®¹å™¨ï¼Œå¹¶åœ¨ /root ç›®å½•ä¸‹æ–°å¢ hw.txt æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹ä¸º hello worldï¼š æ·»åŠ æ–°æ–‡ä»¶ å°†è¿™ä¸ªæ”¹åŠ¨åçš„å®¹å™¨ä¿å­˜ä¸ºæ–°çš„é•œåƒï¼Œdocker commitæäº¤è¿™æ¬¡ä¿®æ”¹ï¼Œæäº¤å®¹å™¨æ›´æ–°åäº§ç”Ÿçš„é•œåƒå¹¶æ²¡ REPOSITORY å’Œ TAG çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ–°çš„é•œåƒè¿˜æ²¡æœ‰åå­—ã€‚å¯ä»¥ä½¿ç”¨ docker tag ç»™æ–°é•œåƒå‘½åã€‚ æäº¤ä¿®æ”¹ç”Ÿæˆæ–°é•œåƒ ","date":"2018-03-18","objectID":"/docker-glance/:5:1","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#æäº¤ä¿®æ”¹ç”Ÿæˆæ–°é•œåƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å­˜å‡ºè½½å…¥é•œåƒå¯¹äºæŸä¸ªé•œåƒæˆ‘ä»¬å¯ä»¥å¯¼å‡ºæˆä¸€ä¸ª tar åŒ…ï¼Œä¹Ÿå¯ä»¥å°†ä¸€ä¸ª tar é•œåƒå¯¼å…¥åˆ°ç³»ç»Ÿä¸­ã€‚ docker save -o å‘½ä»¤å¯ä»¥å°†ä¸€ä¸ªé•œåƒå¯¼å‡ºä¸º tar åŒ…ğŸ‘‡ å¯¼å‡ºé•œåƒ å¯ä»¥é€šè¿‡docker load å¯¼å…¥ä¸€ä¸ª tar åŒ…ä¸ºé•œåƒï¼Œä»¥ä¸‹åˆ é™¤äº†åŸæœ‰çš„ nginx-v2 é•œåƒï¼Œé€šè¿‡ nginx-v2.tar æˆåŠŸå¯¼å…¥äº† nginx-v2 é•œåƒã€‚ å¯¼å…¥é•œåƒ åˆ©ç”¨å¯¼å…¥çš„ nginx-v2 é•œåƒå¯åŠ¨ä¸€ä¸ªæ–°å®¹å™¨ mynginxv2ï¼Œåœ¨æ–°å®¹å™¨ä¸­çš„ /root å°±ä¼šæœ‰ä¸€ä¸ª hw.txt æ–°æ–‡ä»¶ï¼Œå†…å®¹ä¸º hello worldï¼š æ–°é•œåƒ ","date":"2018-03-18","objectID":"/docker-glance/:5:2","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#å­˜å‡ºè½½å…¥é•œåƒ"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" Dockerfileåˆ©ç”¨ Dockerfile æ–‡ä»¶å¯ä»¥ç”Ÿæˆé•œåƒï¼Œè¿™å¯¹äºè‡ªå®šä¹‰é•œåƒéå¸¸ä¼˜é›…ï¼Œä¹Ÿåˆ©äºé•œåƒåˆ†äº«ï¼Œç›´æ¥åˆ†äº« Dockerfile æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:6:0","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#dockerfile"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å¸¸ç”¨æŒ‡ä»¤ å¸¸ç”¨æŒ‡ä»¤ Only the instructions RUN, COPY, ADD create layers. Other instructions create temporary intermediate images, and do not increase the size of the build. åªæœ‰ RUN, COPY, ADD ä¼šç”Ÿæˆæ–°çš„é•œåƒå±‚ï¼Œå…¶å®ƒæŒ‡ä»¤åªä¼šäº§ç”Ÿä¸´æ—¶å±‚ï¼Œä¸å½±å“æ„å»ºå¤§å°ã€‚ ğŸ†FROM é€šè¿‡ FROM æŒ‡ä»¤æŒ‡å®šä¸€ä¸ªåŸºç¡€é•œåƒï¼Œæ¥ä¸‹æ¥æ‰€æœ‰çš„æŒ‡ä»¤éƒ½æ˜¯åŸºäºè¿™ä¸ªé•œåƒæ‰€å±•å¼€çš„ã€‚ ä¸ºäº†ä¿è¯é•œåƒç²¾ç®€ï¼Œå¯ä»¥é€‰ç”¨ä½“ç§¯è¾ƒå°çš„é•œåƒå¦‚Alpineæˆ–Debianä½œä¸ºåŸºç¡€é•œåƒã€‚ FROM æŒ‡ä»¤æ”¯æŒä¸‰ç§å½¢å¼ï¼š FROM \u003cimage\u003e [AS \u003cname\u003e] FROM \u003cimage\u003e[:\u003ctag\u003e] [AS \u003cname\u003e] FROM \u003cimage\u003e[@\u003cdigest\u003e] [AS \u003cname\u003e] Dockerfile ä¸­çš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¿…é¡»æ˜¯ FROM æŒ‡ä»¤ï¼Œå› ä¸ºæ²¡æœ‰äº†åŸºç¡€é•œåƒï¼Œä¸€åˆ‡æ„å»ºè¿‡ç¨‹éƒ½æ— æ³•å¼€å±•ã€‚ ğŸ†RUN RUN æŒ‡ä»¤ç”¨äºå‘æ§åˆ¶å°å‘é€å‘½ä»¤çš„æŒ‡ä»¤ï¼Œåœ¨ RUN æŒ‡ä»¤ä¹‹åï¼Œæˆ‘ä»¬ç›´æ¥æ‹¼æ¥ä¸Šéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œåœ¨æ„å»ºæ—¶ï¼ŒDocker å°±ä¼šæ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œå¹¶å°†å®ƒä»¬å¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹è®°å½•ä¸‹æ¥ï¼Œå½¢æˆé•œåƒçš„å˜åŒ–ã€‚ RUN \u003ccommand\u003e RUN [\"executable\", \"param1\", \"param2\"] RUN æŒ‡ä»¤æ˜¯æ”¯æŒ \\æ¢è¡Œçš„ï¼Œå¦‚æœå•è¡Œçš„é•¿åº¦è¿‡é•¿ï¼Œå»ºè®®å¯¹å†…å®¹è¿›è¡Œåˆ‡å‰²ï¼Œæ–¹ä¾¿é˜…è¯»ã€‚ ğŸ†ENTRYPOINT å’Œ CMD åœ¨å®¹å™¨å¯åŠ¨æ—¶ä¼šæ ¹æ®é•œåƒæ‰€å®šä¹‰çš„ä¸€æ¡å‘½ä»¤æ¥å¯åŠ¨å®¹å™¨ä¸­è¿›ç¨‹å·ä¸º 1 çš„è¿›ç¨‹ã€‚è€Œè¿™ä¸ªå‘½ä»¤çš„å®šä¹‰ï¼Œå°±æ˜¯é€šè¿‡ Dockerfile ä¸­çš„ ENTRYPOINT å’Œ CMD å®ç°çš„ã€‚ ENTRYPOINT [\"executable\", \"param1\", \"param2\"] ENTRYPOINT command param1 param2 CMD [\"executable\",\"param1\",\"param2\"] CMD [\"param1\",\"param2\"] CMD command param1 param2 å½“ ENTRYPOINT ä¸ CMD åŒæ—¶ç»™å‡ºæ—¶ï¼ŒCMD ä¸­çš„å†…å®¹ä¼šä½œä¸º ENTRYPOINT å®šä¹‰å‘½ä»¤çš„å‚æ•°ï¼Œæœ€ç»ˆæ‰§è¡Œå®¹å™¨å¯åŠ¨çš„è¿˜æ˜¯ ENTRYPOINT ä¸­ç»™å‡ºçš„å‘½ä»¤ã€‚ ğŸ†EXPOSE é€šè¿‡ EXPOSE æŒ‡ä»¤å°±å¯ä»¥ä¸ºé•œåƒæŒ‡å®šè¦æš´éœ²çš„ç«¯å£ã€‚ EXPOSE \u003cport\u003e ğŸ†VOLUME VOLUME [\"/data\"] åœ¨ VOLUME æŒ‡ä»¤ä¸­å®šä¹‰çš„ç›®å½•ï¼Œåœ¨åŸºäºæ–°é•œåƒåˆ›å»ºå®¹å™¨æ—¶ï¼Œä¼šè‡ªåŠ¨å»ºç«‹ä¸ºæ•°æ®å·ï¼Œä¸éœ€è¦å†å•ç‹¬ä½¿ç”¨ -v é€‰é¡¹æ¥é…ç½®ã€‚ ğŸ†LABEL LABELæŒ‡ä»¤å¯ä»¥ä¸ºç”Ÿæˆçš„é•œåƒæ·»åŠ å…ƒæ•°æ®æ ‡ç­¾ä¿¡æ¯ã€‚è¿™äº›ä¿¡æ¯å¯ä»¥ç”¨æ¥è¾…åŠ©è¿‡æ»¤å‡ºç‰¹å®šé•œåƒã€‚æ ¼å¼ä¸ºï¼š LABEL \u003ckey\u003e=\u003cvalue\u003e LABEL version=1.2 ğŸ† COPY å’Œ ADD åœ¨åˆ¶ä½œæ–°çš„é•œåƒçš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦å°†ä¸€äº›è½¯ä»¶é…ç½®ã€ç¨‹åºä»£ç ã€æ‰§è¡Œè„šæœ¬ç­‰ç›´æ¥å¯¼å…¥åˆ°é•œåƒå†…çš„æ–‡ä»¶ç³»ç»Ÿé‡Œï¼Œä½¿ç”¨ COPY æˆ– ADD æŒ‡ä»¤èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç›´æ¥ä»å®¿ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿé‡Œæ‹·è´å†…å®¹åˆ°é•œåƒé‡Œçš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ COPY [--chown=\u003cuser\u003e:\u003cgroup\u003e] \u003csrc\u003e... \u003cdest\u003e ADD [--chown=\u003cuser\u003e:\u003cgroup\u003e] \u003csrc\u003e... \u003cdest\u003e COPY [--chown=\u003cuser\u003e:\u003cgroup\u003e] [\"\u003csrc\u003e\",... \"\u003cdest\u003e\"] ADD [--chown=\u003cuser\u003e:\u003cgroup\u003e] [\"\u003csrc\u003e\",... \"\u003cdest\u003e\"] COPY ä¸ ADD æŒ‡ä»¤çš„å®šä¹‰æ–¹å¼å®Œå…¨ä¸€æ ·ï¼Œéœ€è¦æ³¨æ„çš„ä»…æ˜¯å½“æˆ‘ä»¬çš„ç›®å½•ä¸­å­˜åœ¨ç©ºæ ¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åä¸¤ç§æ ¼å¼é¿å…ç©ºæ ¼äº§ç”Ÿæ­§ä¹‰ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:6:1","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#å¸¸ç”¨æŒ‡ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ARG å‚æ•°åœ¨ Dockerfile é‡Œï¼Œå¯ä»¥ç”¨ ARG æŒ‡ä»¤æ¥å»ºç«‹ä¸€ä¸ªå‚æ•°å˜é‡ï¼Œå¯ä»¥åœ¨æ„å»ºæ—¶é€šè¿‡æ„å»ºæŒ‡ä»¤ä¼ å…¥è¿™ä¸ªå‚æ•°å˜é‡ï¼Œå¹¶ä¸”åœ¨ Dockerfile é‡Œä½¿ç”¨å®ƒã€‚ FROM debian:stretch-slim ## ...... ARG TOMCAT_MAJOR ARG TOMCAT_VERSION ## ...... RUN wget -O tomcat.tar.gz \"https://www.apache.org/dyn/closer.cgi?action=download\u0026filename=tomcat/tomcat-$TOMCAT_MAJOR/v$TOMCAT_VERSION/bin/apache-tomcat-$TOMCAT_VERSION.tar.gz\" ## ...... åœ¨â˜ï¸è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å°† Tomcat çš„ç‰ˆæœ¬å·é€šè¿‡ ARG æŒ‡ä»¤å®šä¹‰ä¸ºå‚æ•°å˜é‡ï¼Œåœ¨è°ƒç”¨ä¸‹è½½ Tomcat åŒ…æ—¶ï¼Œä½¿ç”¨å˜é‡æ›¿æ¢æ‰ä¸‹è½½åœ°å€ä¸­çš„ç‰ˆæœ¬å·ã€‚é€šè¿‡è¿™æ ·çš„å®šä¹‰ï¼Œå°±å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸å¯¹ Dockerfile è¿›è¡Œå¤§å¹…ä¿®æ”¹çš„å‰æä¸‹ï¼Œè½»æ¾å®ç°å¯¹ Tomcat ç‰ˆæœ¬çš„åˆ‡æ¢å¹¶é‡æ–°æ„å»ºé•œåƒäº†ã€‚ å¦‚æœæˆ‘ä»¬éœ€è¦é€šè¿‡è¿™ä¸ª Dockerfile æ–‡ä»¶æ„å»º Tomcat é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ„å»ºæ—¶é€šè¿‡ docker build çš„ --build-arg é€‰é¡¹æ¥è®¾ç½®å‚æ•°å˜é‡ã€‚ Dockerå†…ç½®äº†ä¸€äº›é•œåƒåˆ›å»ºå˜é‡ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨è€Œæ— é¡»å£°æ˜ï¼ŒåŒ…æ‹¬ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰HTTP_PROXYã€HTTPS_PROXYã€FTP_PROXY ã€NO_PROXYã€‚ docker build --build-arg TOMCAT_MAJOR=8 --build-arg TOMCAT_VERSION=8.0.53 -t tomcat:8.0 ./tomcat ","date":"2018-03-18","objectID":"/docker-glance/:6:2","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#arg-å‚æ•°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ENV å‚æ•°ENV ç¯å¢ƒå˜é‡è®¾ç½®çš„å®è´¨ï¼Œå…¶å®å°±æ˜¯å®šä¹‰æ“ä½œç³»ç»Ÿç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥åœ¨è¿è¡Œçš„å®¹å™¨é‡Œï¼Œä¸€æ ·æ‹¥æœ‰è¿™äº›å˜é‡ï¼Œè€Œå®¹å™¨ä¸­è¿è¡Œçš„ç¨‹åºä¹Ÿèƒ½å¤Ÿå¾—åˆ°è¿™äº›å˜é‡çš„å€¼ã€‚ FROM debian:stretch-slim ## ...... ENV TOMCAT_MAJOR 8 ENV TOMCAT_VERSION 8.0.53 ## ...... ç¯å¢ƒå˜é‡çš„å€¼ä¸æ˜¯åœ¨æ„å»ºæŒ‡ä»¤ä¸­ä¼ å…¥çš„ï¼Œè€Œæ˜¯åœ¨ Dockerfile ä¸­ç¼–å†™ã€‚ç”±äºç¯å¢ƒå˜é‡åœ¨å®¹å™¨è¿è¡Œæ—¶ä¾ç„¶æœ‰æ•ˆï¼Œæ‰€ä»¥è¿è¡Œå®¹å™¨æ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å…¶è¿›è¡Œè¦†ç›–ï¼Œåœ¨åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨ -e æˆ–æ˜¯ --env é€‰é¡¹ï¼Œå¯ä»¥å¯¹ç¯å¢ƒå˜é‡çš„å€¼è¿›è¡Œä¿®æ”¹æˆ–å®šä¹‰æ–°çš„ç¯å¢ƒå˜é‡ã€‚ docker run -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:5.7 ENV æŒ‡ä»¤æ‰€å®šä¹‰çš„å˜é‡ï¼Œæ°¸è¿œä¼šè¦†ç›– ARG æ‰€å®šä¹‰çš„å˜é‡ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:6:3","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#env-å‚æ•°"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" FAQ","date":"2018-03-18","objectID":"/docker-glance/:7:0","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#faq"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" CMD æŒ‡ä»¤CMDæŒ‡ä»¤ç”¨æ¥æŒ‡å®šå¯åŠ¨å®¹å™¨æ—¶é»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚æ”¯æŒä¸‰ç§æ ¼å¼ï¼š CMD [\"executable\", \"param1\", \"param2\"]ï¼šç›¸å½“äºæ‰§è¡Œ executable param1 param2ï¼Œæ¨èæ–¹å¼ã€‚ CMD command param1 param2ï¼šåœ¨é»˜è®¤çš„ Shell ä¸­æ‰§è¡Œï¼Œæä¾›ç»™éœ€è¦äº¤äº’çš„åº”ç”¨ã€‚ CMD [\"param1\", \"param2\"]ï¼šæä¾›ç»™ ENTRYPOINT çš„é»˜è®¤å‚æ•°ã€‚ æ¯ä¸ª Dockerfile åªèƒ½æœ‰ä¸€æ¡ CMD å‘½ä»¤ã€‚å¦‚æœæŒ‡å®šäº†å¤šæ¡å‘½ä»¤ï¼Œåªæœ‰æœ€åä¸€æ¡ä¼šè¢«æ‰§è¡Œã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:7:1","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#cmd-æŒ‡ä»¤"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" ENTRYPOINT å’Œ CMD çš„åŒºåˆ«è¿™ 2 ä¸ªå‘½ä»¤éƒ½æ˜¯ç”¨æ¥æŒ‡å®šåŸºäºæ­¤é•œåƒæ‰€åˆ›å»ºå®¹å™¨é‡Œä¸»è¿›ç¨‹çš„å¯åŠ¨å‘½ä»¤ã€‚ ENTRYPOINT æŒ‡ä»¤çš„ä¼˜å…ˆçº§é«˜äº CMD æŒ‡ä»¤ã€‚å½“ ENTRYPOINT å’Œ CMD åŒæ—¶åœ¨é•œåƒä¸­è¢«æŒ‡å®šæ—¶ï¼ŒCMD é‡Œçš„å†…å®¹ä¼šä½œä¸º ENTRYPOINT çš„å‚æ•°ï¼Œä¸¤è€…æ‹¼æ¥ä¹‹åï¼Œæ‰æ˜¯æœ€ç»ˆæ‰§è¡Œçš„å‘½ä»¤ã€‚ ENTRYPOINT CMD å®é™…æ‰§è¡Œ ENTRYPOINT [\"/bin/ep\", \"arge\"] /bin/ep arge ENTRYPOINT /bin/ep arge /bin/sh -c /bin/ep arge CMD [\"/bin/exec\", \"args\"] /bin/exec args CMD /bin/exec args /bin/sh -c /bin/exec args ENTRYPOINT [\"/bin/ep\", \"arge\"] CMD [\"/bin/exec\", \"argc\"] /bin/ep arge /bin/exec argc ENTRYPOINT [\"/bin/ep\", \"arge\"] CMD /bin/exec args /bin/ep arge /bin/sh -c /bin/exec args ENTRYPOINT /bin/ep arge CMD [\"/bin/exec\", \"argc\"] /bin/sh -c /bin/ep arge /bin/exec argc ENTRYPOINT /bin/ep arge CMD /bin/exec args /bin/sh -c /bin/ep arge /bin/sh -c /bin/exec args ENTRYPOINT æŒ‡ä»¤ä¸»è¦ç”¨äºå¯¹å®¹å™¨è¿›è¡Œä¸€äº›åˆå§‹åŒ–ï¼Œè€Œ CMD æŒ‡ä»¤åˆ™ç”¨äºçœŸæ­£å®šä¹‰å®¹å™¨ä¸­ä¸»ç¨‹åºçš„å¯åŠ¨å‘½ä»¤ã€‚ åˆ›å»ºå®¹å™¨æ—¶å¯ä»¥æ”¹å†™å®¹å™¨ä¸»ç¨‹åºçš„å¯åŠ¨å‘½ä»¤ï¼Œè€Œè¿™ä¸ªè¦†ç›–åªä¼šè¦†ç›– CMD ä¸­å®šä¹‰çš„å†…å®¹ï¼Œä¸ä¼šå½±å“ ENTRYPOINT ä¸­çš„å†…å®¹ã€‚ æ¯ä¸ª Dockerfile ä¸­åªèƒ½æœ‰ä¸€ä¸ªENTRYPOINTï¼Œå½“æŒ‡å®šå¤šä¸ªæ—¶ï¼Œåªæœ‰æœ€åä¸€ä¸ªèµ·æ•ˆã€‚åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥è¢«--entrypoint å‚æ•°è¦†ç›–æ‰ï¼Œå¦‚docker run --entrypointã€‚ ä½¿ç”¨è„šæœ¬æ–‡ä»¶æ¥ä½œä¸º ENTRYPOINT çš„å†…å®¹æ˜¯å¸¸è§çš„åšæ³•ï¼Œå› ä¸ºå¯¹å®¹å™¨è¿è¡Œåˆå§‹åŒ–çš„å‘½ä»¤ç›¸å¯¹è¾ƒå¤šï¼Œå…¨éƒ¨ç›´æ¥æ”¾ç½®åœ¨ ENTRYPOINT åä¼šç‰¹åˆ«å¤æ‚ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:7:2","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#entrypoint-å’Œ-cmd-çš„åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" COPY å’Œ ADD çš„åŒºåˆ« COPY [--chown=\u003cuser\u003e:\u003cgroup\u003e] \u003csrc\u003e... \u003cdest\u003e ADD [--chown=\u003cuser\u003e:\u003cgroup\u003e] \u003csrc\u003e... \u003cdest\u003e COPY [--chown=\u003cuser\u003e:\u003cgroup\u003e] [\"\u003csrc\u003e\",... \"\u003cdest\u003e\"] ADD [--chown=\u003cuser\u003e:\u003cgroup\u003e] [\"\u003csrc\u003e\",... \"\u003cdest\u003e\"] ä¸¤è€…çš„åŒºåˆ«ä¸»è¦åœ¨äº ADD èƒ½å¤Ÿæ”¯æŒä½¿ç”¨ç½‘ç»œç«¯çš„ URL åœ°å€ä½œä¸º src æºï¼Œå¹¶ä¸”åœ¨æºæ–‡ä»¶è¢«è¯†åˆ«ä¸ºå‹ç¼©åŒ…æ—¶ï¼Œè‡ªåŠ¨è¿›è¡Œè§£å‹ï¼Œè€Œ COPY æ²¡æœ‰è¿™ä¸¤ä¸ªèƒ½åŠ›ã€‚ å½“ä½¿ç”¨æœ¬åœ°ç›®å½•ä¸ºæºç›®å½•æ—¶ï¼Œæ¨èä½¿ç”¨ COPYã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:7:3","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#copy-å’Œ-add-çš„åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å†™æ—¶å¤åˆ¶åœ¨ç¼–ç¨‹é‡Œï¼Œå†™æ—¶å¤åˆ¶Copy on Write å¸¸å¸¸ç”¨äºå¯¹è±¡æˆ–æ•°ç»„çš„æ‹·è´ä¸­ï¼Œå½“æ‹·è´å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼Œå¤åˆ¶çš„è¿‡ç¨‹å¹¶ä¸æ˜¯é©¬ä¸Šå‘ç”Ÿåœ¨å†…å­˜ä¸­ï¼Œè€Œåªæ˜¯å…ˆè®©ä¸¤ä¸ªå˜é‡åŒæ—¶æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œå¹¶è¿›è¡Œä¸€äº›æ ‡è®°ï¼Œå½“è¦å¯¹å¯¹è±¡æˆ–æ•°ç»„è¿›è¡Œä¿®æ”¹æ—¶ï¼Œæ‰çœŸæ­£è¿›è¡Œå†…å­˜çš„æ‹·è´ã€‚ Docker çš„å†™æ—¶å¤åˆ¶ä¸ç¼–ç¨‹ä¸­çš„ç›¸ç±»ä¼¼ï¼Œåœ¨é€šè¿‡é•œåƒè¿è¡Œå®¹å™¨æ—¶ï¼Œå¹¶ä¸æ˜¯é©¬ä¸Šå°±æŠŠé•œåƒé‡Œçš„æ‰€æœ‰å†…å®¹æ‹·è´åˆ°å®¹å™¨æ‰€è¿è¡Œçš„æ²™ç›’æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè€Œæ˜¯åˆ©ç”¨ UnionFS å°†é•œåƒä»¥åªè¯»çš„æ–¹å¼æŒ‚è½½åˆ°æ²™ç›’æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚åªæœ‰åœ¨å®¹å™¨ä¸­å‘ç”Ÿå¯¹æ–‡ä»¶çš„ä¿®æ”¹æ—¶ï¼Œä¿®æ”¹æ‰ä¼šä½“ç°åˆ°æ²™ç›’ç¯å¢ƒä¸Šã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®¹å™¨åœ¨åˆ›å»ºå’Œå¯åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•çš„æ–‡ä»¶ç³»ç»Ÿå¤åˆ¶æ“ä½œï¼Œä¹Ÿä¸éœ€è¦ä¸ºå®¹å™¨å•ç‹¬å¼€è¾Ÿå¤§é‡çš„ç¡¬ç›˜ç©ºé—´ï¼Œä¸å…¶ä»–è™šæ‹ŸåŒ–æ–¹å¼å¯¹è¿™ä¸ªè¿‡ç¨‹çš„æ“ä½œè¿›è¡Œå¯¹æ¯”ï¼ŒDocker å¯åŠ¨çš„é€Ÿåº¦å¯è§ä¸€æ–‘ã€‚ é‡‡ç”¨å†™æ—¶å¤åˆ¶æœºåˆ¶æ¥è®¾è®¡çš„ Dockerï¼Œæ—¢ä¿è¯äº†é•œåƒåœ¨ç”Ÿæˆä¸ºå®¹å™¨æ—¶ï¼Œä»¥åŠå®¹å™¨åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸ä¼šå¯¹è‡ªèº«é€ æˆä¿®æ”¹ã€‚åˆå€ŸåŠ©å‰”é™¤å¸¸è§è™šæ‹ŸåŒ–åœ¨åˆå§‹åŒ–æ—¶éœ€è¦ä»é•œåƒä¸­æ‹·è´æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„è¿‡ç¨‹ï¼Œå¤§å¹…æé«˜äº†å®¹å™¨çš„åˆ›å»ºå’Œå¯åŠ¨é€Ÿåº¦ã€‚å¯ä»¥è¯´ï¼ŒDocker å®¹å™¨èƒ½å¤Ÿå®ç°ç§’çº§å¯åŠ¨é€Ÿåº¦ï¼Œå†™æ—¶å¤åˆ¶æœºåˆ¶åœ¨å…¶ä¸­å‘æŒ¥äº†ä¸¾è¶³è½»é‡çš„ä½œç”¨ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:7:4","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#å†™æ—¶å¤åˆ¶"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" docker saveã€export åŒºåˆ«docker save å’Œ docker load æ˜¯å¯¹é•œåƒçš„æ“ä½œï¼Œå¯¼å…¥å¯¼å‡ºçš„æ˜¯é•œåƒæ–‡ä»¶ã€‚ docker export å’Œ docker importæ˜¯å¯¹å®¹å™¨çš„æ“ä½œï¼Œæ˜¯å¯¼å‡ºå¯¼å…¥å®¹å™¨ï¼Œå¯¼å‡ºä¸€ä¸ªå·²ç»åˆ›å»ºçš„å®¹å™¨åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸ç®¡æ­¤æ—¶è¿™ä¸ªå®¹å™¨æ˜¯å¦å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œå¯ä»¥ç†è§£ä¸ºå®¹å™¨å¿«ç…§ã€‚ å®¹å™¨å¿«ç…§æ–‡ä»¶å°†ä¸¢å¼ƒæ‰€æœ‰çš„å†å²è®°å½•å’Œå…ƒæ•°æ®ä¿¡æ¯ï¼ˆå³ä»…ä¿å­˜å®¹å™¨å½“æ—¶çš„å¿«ç…§çŠ¶æ€ï¼Œå¦‚æ ‡ç­¾ä¿¡æ¯ä¼šè¢«ä¸¢å¼ƒï¼‰ï¼Œè€Œé•œåƒå­˜å‚¨æ–‡ä»¶å°†ä¿å­˜å®Œæ•´è®°å½•ï¼Œä½“ç§¯æ›´å¤§ã€‚ä»å®¹å™¨å¿«ç…§æ–‡ä»¶å¯¼å…¥æ—¶å¯ä»¥é‡æ–°æŒ‡å®šæ ‡ç­¾ç­‰å…ƒæ•°æ®ä¿¡æ¯ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:7:5","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#docker-saveexport-åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" -v å’Œ â€“mount çš„åŒºåˆ«ä½¿ç”¨-væ—¶ï¼Œå¦‚æœå®¿ä¸»æœºä¸Šæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå¦‚æœä½¿ç”¨--mountæ—¶ï¼Œå®¿ä¸»æœºä¸­æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ä¼šæŠ¥é”™æ‰¾ä¸åˆ°è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶åˆ›å»ºå¤±è´¥ã€‚ --mountç”±å¤šä¸ªé”®-å€¼å¯¹ç»„æˆï¼Œä»¥é€—å·åˆ†éš”ï¼Œæ¯ä¸ªé”®-å€¼å¯¹ç”±ä¸€ä¸ª\u003ckey\u003e=\u003cvalue\u003eå…ƒç»„ç»„æˆã€‚--mountè¯­æ³•æ¯”-væˆ–--volumeæ›´å†—é•¿ï¼Œä½†æ˜¯é”®çš„é¡ºåºå¹¶ä¸é‡è¦ï¼Œæ ‡è®°çš„å€¼ä¹Ÿæ›´å®¹æ˜“ç†è§£ã€‚ æŒ‚è½½çš„ç±»å‹typeï¼Œå¯ä»¥æ˜¯bindã€volumeæˆ–è€…tmpfsã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:7:6","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#-v-å’Œ---mount-çš„åŒºåˆ«"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" é•œåƒé‡Œçš„å±‚éƒ½æ˜¯åªè¯»ä¸å¯ä¿®æ”¹çš„ï¼Œä½†å®¹å™¨è¿è¡Œçš„æ—¶å€™ç»å¸¸ä¼šå†™å…¥æ•°æ®ï¼Œè¿™ä¸ªå†²çªåº”è¯¥æ€ä¹ˆè§£å†³ Docker é‡‡ç”¨ UNION FS æ–‡ä»¶ç³»ç»Ÿï¼Œå°†æ–‡ä»¶ç³»ç»Ÿåˆ†ä¸ºä¸Šå±‚å’Œä¸‹å±‚ã€‚å³ä¸Šå±‚ä¸ºå®¹å™¨å±‚ï¼Œä¸‹å±‚ä¸ºé•œåƒå±‚ã€‚å¦‚æœä¸‹å±‚æœ‰ä¿®æ”¹ï¼Œè¿è¡Œå®¹å™¨æ—¶ï¼Œä¸Šå±‚ä¼šåŒæ­¥ä¿®æ”¹ã€‚å¦‚æœä¸Šå±‚æœ‰æ•°æ®ä¿®æ”¹ï¼ˆå³å®¹å™¨å±‚æ•°æ®ä¿®æ”¹ï¼‰ï¼Œä¸ä¼šå½±å“åˆ°ä¸‹å±‚ï¼ˆå³é•œåƒå±‚ï¼‰ã€‚ ","date":"2018-03-18","objectID":"/docker-glance/:7:7","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#é•œåƒé‡Œçš„å±‚éƒ½æ˜¯åªè¯»ä¸å¯ä¿®æ”¹çš„ä½†å®¹å™¨è¿è¡Œçš„æ—¶å€™ç»å¸¸ä¼šå†™å…¥æ•°æ®è¿™ä¸ªå†²çªåº”è¯¥æ€ä¹ˆè§£å†³"},{"categories":["å¼€å‘è€…æ‰‹å†Œ"],"content":" å‚è€ƒ DockeræŠ€æœ¯å…¥é—¨ä¸å®æˆ˜(ç¬¬ä¸‰ç‰ˆ) å¯¹æ¯”Dockerå’Œè™šæ‹Ÿæœº å¼€å‘è€…å¿…å¤‡çš„ Docker å®è·µæŒ‡å— Docker åŸºç¡€çŸ¥è¯† - ä½¿ç”¨ç»‘å®šæŒ‚è½½(bind mounts)ç®¡ç†åº”ç”¨ç¨‹åºæ•°æ® php ä¸­æ–‡ç½‘ docker Dockerfile reference ","date":"2018-03-18","objectID":"/docker-glance/:8:0","series":null,"tags":["docker"],"title":"Docker å­¦ä¹ ç¬”è®°","uri":"/docker-glance/#å‚è€ƒ"}]